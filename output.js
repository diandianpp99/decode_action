//Fri Jul 26 2024 06:56:55 GMT+0000 (Coordinated Universal Time)
//Base:https://github.com/echo094/decode-js
//Modify:https://github.com/smallfawn/decode_action
import { ao as Sl, b2 as wl, r as jr, x as kl, h6 as Tl, v as Dl, m as _r, c as Bt, f as Qr } from "./index-DmZjXg-Q.js";
(function () {
  const q = Object.defineProperties({
    domains: ["^127\\.0\\.0\\.1$", "^192\\.168\\.110\\.250$", "^(?:.+\\.)?localhost$", "^(?:.+\\.)?rollbit\\.com$", "^(?:.+\\.)?rollbit\\.fun$", "^(?:.+\\.)?duckeng\\.com$", "^(?:.+\\.)?rollbot\\.com$"],
    filesystem: !1,
    licenseExpiration: "2025/06/02",
    trialExpiration: void 0,
    version: "8.2.0"
  }, {
    daysUntilExpired: {
      get: function () {
        return Math.round((this.expirationDate - new Date()) / 86400000);
      }
    },
    expirationDate: {
      get: function () {
        return new Date(this.licenseExpiration || this.trialExpiration);
      }
    },
    gracePeriodDate: {
      get: function () {
        const e = new Date(this.expirationDate);
        return this.isTrial || e.setDate(e.getDate() + 30), e;
      }
    },
    isDateLocked: {
      get: function () {
        return this.licenseExpiration || this.trialExpiration;
      }
    },
    isDomainLocked: {
      get: function () {
        return this.domains && this.domains.length > 0;
      }
    },
    isFileSystemLocked: {
      get: function () {
        return this.filesystem !== void 0;
      }
    },
    isExpired: {
      get: function () {
        return new Date() > this.expirationDate;
      }
    },
    isGracePeriodExpired: {
      get: function () {
        return new Date() > this.gracePeriodDate;
      }
    },
    isTrial: {
      get: function () {
        return this.trialExpiration !== void 0;
      }
    },
    isValidDomain: {
      value: function (e) {
        return this.domains.some(t => new RegExp(t).test(e));
      }
    }
  });
  if (q.isDateLocked) if (q.isExpired) {
    if (console.error("ChartIQ: this license has expired!"), q.isTrial && alert("ChartIQ: this license has expired!"), q.isGracePeriodExpired) throw new Error("ChartIQ: this license has expired!");
  } else q.isTrial && q.daysUntilExpired < 3 && (alert("This ChartIQ trial license expires in " + q.daysUntilExpired + " days!"), console.log("WARNING: This ChartIQ trial license expires in " + q.daysUntilExpired + " days!"));
  if (typeof document < "u") {
    if (q.isFileSystemLocked && location.protocol === "file:") return;
    const e = new URL(location.href).hostname;
    q.isDomainLocked && !q.isValidDomain(e) && (alert("ChartIQ ERROR: Not licensed for domain " + e), console.error("ChartIQ ERROR: Not licensed for domain " + e));
  }
  q.version === "alpha" && alert("ChartIQ: This is an internal PRE-PRODUCTION release--not for external use!");
})();
Y[184848] = function () {
  for (var q = 2; q !== 9;) switch (q) {
    case 1:
      return globalThis;
    case 5:
      var e;
      try {
        for (var t = 2; t !== 6;) switch (t) {
          case 9:
            delete e.Z2pDN;
            var n = Object.prototype;
            delete n.$qaME, t = 6;
            break;
          case 3:
            throw "";
          case 4:
            t = typeof Z2pDN > "u" ? 3 : 9;
            break;
          case 2:
            Object.defineProperty(Object.prototype, "$qaME", {
              get: function () {
                return this;
              },
              configurable: !0
            }), e = $qaME, e.Z2pDN = e, t = 4;
            break;
        }
      } catch {
        e = window;
      }
      return e;
    case 2:
      q = typeof globalThis == "object" ? 1 : 5;
      break;
  }
}();
Al(Y[184848]);
Y.U1$ = function () {
  return typeof Y[18494].o_aheCw == "function" ? Y[18494].o_aheCw.apply(Y[18494], arguments) : Y[18494].o_aheCw;
};
Y.X3w = function () {
  return typeof Y[18494].o_aheCw == "function" ? Y[18494].o_aheCw.apply(Y[18494], arguments) : Y[18494].o_aheCw;
};
function Al(q) {
  function e(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].Function;
    }
  }
  function t(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].Array;
    }
  }
  for (var n = 2; n !== 123;) switch (n) {
    case 36:
      r[63] = "a", r[29] = "H2T", r[32] = "d4", r[90] = "", r[90] = "sidual", n = 50;
      break;
    case 118:
      r[82] += r[23], r[53] = r[8], r[53] += r[2], r[53] += r[5], n = 114;
      break;
    case 129:
      i(t, "push", r[89], r[88]), n = 128;
      break;
    case 124:
      i(e, "apply", r[89], r[54]), n = 123;
      break;
    case 114:
      r[59] = r[7], r[59] += r[24], r[59] += r[18], r[37] = r[6], n = 110;
      break;
    case 2:
      var r = [arguments];
      r[1] = "", r[1] = "oiG", r[6] = "", r[6] = "", r[6] = "U", r[7] = "", n = 7;
      break;
    case 19:
      r[3] = "y", r[5] = "K", r[9] = "2J", r[31] = "", n = 15;
      break;
    case 82:
      r[91] = r[73], r[91] += r[46], r[91] += r[90], r[55] = r[32], n = 78;
      break;
    case 99:
      r[22] += r[76], r[22] += r[87], r[88] = r[56], r[88] += r[45], r[88] += r[92], r[95] = r[62], n = 93;
      break;
    case 40:
      r[13] = "", r[13] = "__op", r[76] = "6a", r[32] = "", n = 36;
      break;
    case 44:
      r[62] = "F6", r[45] = "i", r[17] = "tim", r[92] = "uZ", n = 40;
      break;
    case 125:
      i(o, r[16], r[79], r[43]), n = 124;
      break;
    case 106:
      r[97] += r[1], n = 105;
      break;
    case 110:
      r[37] += r[9], r[37] += r[11], r[97] = r[3], r[97] += r[68], n = 106;
      break;
    case 93:
      r[95] += r[48], r[95] += r[78], r[82] = r[31], r[82] += r[4], n = 118;
      break;
    case 50:
      r[33] = "", r[33] = "$ARQ", r[24] = "", r[24] = "1", n = 46;
      break;
    case 134:
      i(o, "String", r[79], r[37]), n = 133;
      break;
    case 105:
      var i = function (l, u, c, d) {
        for (var f = 2; f !== 5;) switch (f) {
          case 2:
            var g = [arguments];
            a(r[0][0], g[0][0], g[0][1], g[0][2], g[0][3]), f = 5;
            break;
        }
      };
      n = 135;
      break;
    case 132:
      i(h, "substring", r[89], r[53]), n = 131;
      break;
    case 90:
      r[43] += r[77], r[43] += r[60], r[16] = r[73], r[16] += r[58], n = 86;
      break;
    case 7:
      r[7] = "U$B", r[2] = "", r[2] = "", r[2] = "0Hs", n = 12;
      break;
    case 131:
      i(h, "replace", r[89], r[82]), n = 130;
      break;
    case 15:
      r[31] = "Z$x", r[68] = "5", r[78] = "", r[78] = "c", n = 24;
      break;
    case 46:
      r[80] = "J25", r[58] = "", r[58] = "", r[58] = "abs", r[46] = "re", r[60] = "", n = 61;
      break;
    case 133:
      i(h, "fromCharCode", r[79], r[59]), n = 132;
      break;
    case 31:
      r[40] = "ize", r[23] = "Z", r[17] = "", r[17] = "", n = 44;
      break;
    case 73:
      r[71] = "M", r[72] = "1Iwy", r[89] = 1, r[79] = 0, n = 69;
      break;
    case 130:
      i(t, "map", r[89], r[95]), n = 129;
      break;
    case 12:
      r[8] = "", r[8] = "b", r[4] = "", r[4] = "$_", n = 19;
      break;
    case 61:
      r[19] = "tract", r[86] = "O", r[60] = "g", r[77] = "", n = 57;
      break;
    case 24:
      r[48] = "", r[48] = "Y8I", r[11] = "BH", r[56] = "", n = 35;
      break;
    case 35:
      r[18] = "N", r[56] = "G5c", r[87] = "G", r[40] = "", n = 31;
      break;
    case 86:
      r[16] += r[19], r[67] = r[86], r[67] += r[24], r[67] += r[33], n = 82;
      break;
    case 127:
      i(o, r[57], r[79], r[55]), n = 126;
      break;
    case 78:
      r[55] += r[63], r[55] += r[80], r[57] = r[13], r[57] += r[17], r[57] += r[40], r[22] = r[29], n = 99;
      break;
    case 135:
      i(h, "charCodeAt", r[89], r[97]), n = 134;
      break;
    case 69:
      r[54] = r[71], r[54] += r[72], r[54] += r[51], r[43] = r[27], n = 90;
      break;
    case 126:
      i(o, r[91], r[79], r[67]), n = 125;
      break;
    case 57:
      r[73] = "__", r[77] = "1oq7", r[27] = "", r[27] = "", r[27] = "D", r[51] = "", r[51] = "v", n = 73;
      break;
    case 128:
      i(s, "test", r[89], r[22]), n = 127;
      break;
  }
  function a(l, u, c, d, f) {
    for (var g = 2; g !== 6;) switch (g) {
      case 2:
        var p = [arguments];
        p[7] = "", p[7] = "eProperty", p[3] = "n", g = 3;
        break;
      case 3:
        p[4] = "defi", p[2] = !0, p[2] = !1;
        try {
          for (var m = 2; m !== 13;) switch (m) {
            case 3:
              return;
            case 2:
              p[6] = {}, p[8] = (0, p[0][1])(p[0][0]), p[5] = [p[8], p[8].prototype][p[0][3]], m = 4;
              break;
            case 9:
              p[5][p[0][4]] = p[5][p[0][2]], p[6].set = function (y) {
                for (var b = 2; b !== 5;) switch (b) {
                  case 2:
                    var C = [arguments];
                    p[5][p[0][2]] = C[0][0], b = 5;
                    break;
                }
              }, p[6].get = function () {
                for (var y = 2; y !== 11;) switch (y) {
                  case 2:
                    var b = [arguments];
                    b[7] = "", b[7] = "", b[7] = "d", y = 3;
                    break;
                  case 3:
                    b[1] = "", b[1] = "ine", b[4] = "", b[4] = "undef", y = 6;
                    break;
                  case 6:
                    return b[6] = b[4], b[6] += b[1], b[6] += b[7], typeof p[5][p[0][2]] == b[6] ? void 0 : p[5][p[0][2]];
                    break;
                }
              }, p[6].enumerable = p[2];
              try {
                for (var x = 2; x !== 3;) switch (x) {
                  case 4:
                    p[0][0].Object[p[9]](p[5], p[0][4], p[6]), x = 3;
                    break;
                  case 2:
                    p[9] = p[4], p[9] += p[3], p[9] += p[7], x = 4;
                    break;
                }
              } catch {}
              m = 13;
              break;
            case 4:
              m = p[5].hasOwnProperty(p[0][4]) && p[5][p[0][4]] === p[5][p[0][2]] ? 3 : 9;
              break;
          }
        } catch {}
        g = 6;
        break;
    }
  }
  function s(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].RegExp;
    }
  }
  function o(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0];
    }
  }
  function h(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].String;
    }
  }
}
Y.Q_ = function () {
  return typeof Y[492107].n1A4qeo == "function" ? Y[492107].n1A4qeo.apply(Y[492107], arguments) : Y[492107].n1A4qeo;
};
Y[18494] = function (q) {
  return {
    Y_EOctG: function () {
      var e,
        t = arguments;
      switch (q) {
        case 67:
          e = -t[3] - t[2] + t[1] + t[0] - t[4];
          break;
        case 49:
          e = t[0] * t[2] - t[1];
          break;
        case 91:
          e = (-t[2] + t[1]) / t[0] + t[3];
          break;
        case 95:
          e = (t[1] + t[0]) / t[2] - t[3];
          break;
        case 93:
          e = t[0] - t[1] - t[2];
          break;
        case 133:
          e = t[1] / t[2] + t[0] - t[4] - t[3];
          break;
        case 163:
          e = -t[2] * t[0] / t[1] * t[3] + t[4];
          break;
        case 102:
          e = t[2] / t[0] * (t[1] * t[6] * t[3] + t[5]) + t[4];
          break;
        case 12:
          e = t[1] * t[4] / t[3] + t[2] - t[0];
          break;
        case 16:
          e = t[1] - t[0] + t[2];
          break;
        case 43:
          e = t[2] + t[0] + t[1];
          break;
        case 47:
          e = t[3] / t[2] + t[0] - t[1];
          break;
        case 31:
          e = t[1] / t[0];
          break;
        case 98:
          e = t[0] / t[1] * t[2] * t[4] + t[3];
          break;
        case 51:
          e = t[0] / t[1] - t[3] + t[4] + t[2];
          break;
        case 25:
          e = t[1] + t[0] - t[2];
          break;
        case 88:
          e = (t[0] - t[3]) * t[4] + t[2] - t[1];
          break;
        case 17:
          e = (t[3] + t[0] - t[1]) * t[4] - t[2];
          break;
        case 126:
          e = t[1] * t[4] / t[3] * t[2] + t[0];
          break;
        case 122:
          e = (t[0] - t[1]) / (t[3] - t[2]);
          break;
        case 164:
          e = t[1] * t[4] * t[2] - t[0] - t[3];
          break;
        case 62:
          e = t[0] * t[1] * t[3] - t[2];
          break;
        case 107:
          e = t[1] == t[0];
          break;
        case 99:
          e = -t[4] / t[2] * (t[0] * (t[6] - t[5]) - t[1]) + t[3];
          break;
        case 136:
          e = (t[0] | t[2]) - t[1];
          break;
        case 139:
          e = t[1] * -+t[0];
          break;
        case 82:
          e = (t[2] - t[0]) / t[3] * t[1] + t[4];
          break;
        case 9:
          e = -t[1] + t[0];
          break;
        case 150:
          e = -t[1] * t[0] - t[3] + t[2];
          break;
        case 29:
          e = t[1] * t[3] + t[2] + t[4] - t[0];
          break;
        case 124:
          e = -t[2] / t[1] - t[3] - t[0] + t[4];
          break;
        case 125:
          e = t[1] + t[4] + t[0] - t[3] - t[2];
          break;
        case 68:
          e = (t[1] / t[2] - t[4]) / t[3] + t[0];
          break;
        case 28:
          e = t[1] / t[2] + t[0];
          break;
        case 40:
          e = +t[0] * t[2] - t[1];
          break;
        case 132:
          e = t[4] / t[1] * t[0] / t[3] + t[2];
          break;
        case 113:
          e = t[2] * t[1] + t[0];
          break;
        case 81:
          e = t[1] + t[0] + t[4] + t[3] + t[2];
          break;
        case 110:
          e = (t[1] + t[0]) * t[3] / t[2] + t[4];
          break;
        case 96:
          e = t[0] * t[2] * t[4] / t[1] - t[3];
          break;
        case 157:
          e = -t[0] + t[2] - t[1] + t[3];
          break;
        case 128:
          e = (t[2] + t[1] - t[4]) * t[3] + t[0];
          break;
        case 158:
          e = t[0] != t[1];
          break;
        case 87:
          e = (t[1] + t[3]) / t[0] * t[2] + t[4];
          break;
        case 100:
          e = t[1] / +t[0];
          break;
        case 59:
          e = (t[0] + t[3]) / t[2] + t[1] - t[4];
          break;
        case 162:
          e = t[1] / t[2] * t[0];
          break;
        case 90:
          e = t[3] - t[1] + t[4] - t[0] + t[2];
          break;
        case 34:
          e = (t[0] - t[1]) / t[2];
          break;
        case 14:
          e = t[0] + t[3] + t[2] + t[4] - t[1];
          break;
        case 141:
          e = (t[0] + t[2] + t[1]) / t[3] + t[4];
          break;
        case 80:
          e = t[1] * t[3] / t[2] + t[0];
          break;
        case 55:
          e = (t[3] - t[0]) / t[2] + t[4] + t[1];
          break;
        case 63:
          e = t[1] + t[3] + t[0] - t[2];
          break;
        case 121:
          e = (t[2] * t[4] - t[1]) * t[0] - t[3];
          break;
        case 48:
          e = (-t[3] + t[0]) / t[2] - t[1];
          break;
        case 71:
          e = t[4] + t[1] + t[0] - t[2] + t[3];
          break;
        case 24:
          e = (t[0] + t[2] - t[3]) / t[1] + t[4];
          break;
        case 84:
          e = t[0] < t[1];
          break;
        case 19:
          e = -t[1] - t[2] + t[0];
          break;
        case 27:
          e = t[1] - t[3] + t[2] + t[0];
          break;
        case 20:
          e = t[1] * -t[0];
          break;
        case 117:
          e = t[0] === t[1];
          break;
        case 26:
          e = t[0] | t[2] << t[4] | t[1] << t[3];
          break;
        case 112:
          e = (t[4] + t[3]) * t[0] * t[2] - t[1];
          break;
        case 38:
          e = t[2] + (t[3] - t[0]) * (t[1] * t[5]) * t[4];
          break;
        case 78:
          e = t[0] + t[3] - t[1] + t[2];
          break;
        case 5:
          e = t[1] / t[0] - t[4] - t[2] + t[3];
          break;
        case 10:
          e = -t[1] / t[0] * t[2] + t[3];
          break;
        case 11:
          e = (-t[2] - t[4]) / t[1] - t[3] + t[0];
          break;
        case 2:
          e = t[1] - t[0];
          break;
        case 75:
          e = t[3] + t[8] + t[4] + t[7] + t[6] + t[0] + t[10] + t[2] + t[9] + t[1] + t[5];
          break;
        case 103:
          e = t[2] * (t[0] * t[5] * t[1] + t[3]) + t[4];
          break;
        case 37:
          e = (t[3] - t[0]) / t[2] + (t[1] << t[4]);
          break;
        case 159:
          e = t[4] * t[3] / t[1] / t[0] - t[2];
          break;
        case 52:
          e = (t[4] + t[0] + t[3]) / t[2] - t[1];
          break;
        case 123:
          e = t[1] * (t[2] - t[3]) + t[0];
          break;
        case 115:
          e = -t[0] / t[1] + t[2];
          break;
        case 1:
          e = (t[2] + t[0]) * t[3] - t[1];
          break;
        case 114:
          e = t[0] - t[2] + t[1] - t[3];
          break;
        case 41:
          e = t[2] + t[1] / t[0];
          break;
        case 73:
          e = t[3] + t[6] + t[4] + t[1] + t[0] + t[5] + t[2];
          break;
        case 54:
          e = t[2] / t[0] - t[3] + t[1];
          break;
        case 8:
          e = t[1] + t[0];
          break;
        case 42:
          e = t[1] - t[0] / t[2];
          break;
        case 76:
          e = t[3] * +t[1] * t[0] * t[2];
          break;
        case 45:
          e = t[2] + t[1] - t[3] - t[0];
          break;
        case 154:
          e = t[0] * t[2] - t[1] - t[3];
          break;
        case 61:
          e = t[0] / t[1] / t[3] + t[2];
          break;
        case 69:
          e = (t[3] - t[0]) * t[2] + t[1];
          break;
        case 77:
          e = (t[3] + t[0]) * t[2] + t[1];
          break;
        case 57:
          e = (t[3] + t[0] - t[2]) / t[1] - t[4];
          break;
        case 6:
          e = (-t[3] - t[1]) * t[0] + t[2];
          break;
        case 138:
          e = (-t[3] - t[2]) / t[4] * t[0] + t[1];
          break;
        case 149:
          e = (t[4] + t[3]) * t[2] / t[1] - t[0];
          break;
        case 145:
          e = t[0] - +t[1];
          break;
        case 127:
          e = t[3] - t[0] - (t[1] - t[2]);
          break;
        case 50:
          e = (-t[0] + t[4]) / t[3] * t[1] + t[2];
          break;
        case 116:
          e = t[0] + t[2] + t[3] + t[1];
          break;
        case 66:
          e = t[0] / t[2] + t[1] + t[4] + t[3];
          break;
        case 7:
          e = (t[2] + t[4]) / t[0] / t[1] + t[3];
          break;
        case 53:
          e = t[1] << t[0];
          break;
        case 120:
          e = (-t[2] * t[1] - t[3]) / t[0] + t[4];
          break;
        case 108:
          e = t[0] + t[3] * (t[2] - t[1]);
          break;
        case 0:
          e = t[0] * t[1];
          break;
        case 70:
          e = t[0] / t[3] + t[2] + t[1];
          break;
        case 64:
          e = (t[1] - t[3]) * t[0] - t[2];
          break;
        case 72:
          e = t[4] / t[0] + t[3] - t[1] + t[2];
          break;
        case 79:
          e = (t[0] + t[2]) * t[1] - t[3] - t[4];
          break;
        case 130:
          e = (t[1] - t[2]) * t[0] - t[4] - t[3];
          break;
        case 33:
          e = t[0] * (t[3] - t[1] / (t[4] - t[2]));
          break;
        case 21:
          e = (t[3] - t[2]) * (t[4] - t[5]) / (t[0] - t[1]);
          break;
        case 36:
          e = (t[2] - t[1]) / t[3] + t[0];
          break;
        case 165:
          e = t[2] * (t[0] << t[1]);
          break;
        case 167:
          e = t[1] - t[2] - t[0] - t[3] + t[4];
          break;
        case 46:
          e = (t[3] / t[1] + t[2]) / t[0] + t[4];
          break;
        case 151:
          e = (t[1] | t[2]) / +t[0];
          break;
        case 153:
          e = t[0] / (t[2] | t[1]);
          break;
        case 4:
          e = -t[3] * t[1] + t[2] + t[0];
          break;
        case 143:
          e = t[3] - t[1] / t[4] + (t[0] - t[2]);
          break;
        case 105:
          e = (t[3] + t[4]) * t[0] + t[2] - t[1];
          break;
        case 106:
          e = (t[5] - t[4]) * (t[1] - t[0]) - (t[3] - t[7]) * (t[2] - t[6]);
          break;
        case 104:
          e = t[0] !== t[1];
          break;
        case 101:
          e = t[2] / t[0] * t[5] * t[3] * t[4] + t[1];
          break;
        case 32:
          e = t[9] + t[0] + t[8] + t[1] + t[5] + t[2] + t[4] + t[3] / t[6] + t[7];
          break;
        case 109:
          e = t[0] + (t[1] | t[2]);
          break;
        case 15:
          e = -t[1] / t[3] / t[0] + t[2];
          break;
        case 144:
          e = t[2] + (t[3] + (t[1] ^ t[0]));
          break;
        case 137:
          e = (t[1] ^ t[2]) - t[0];
          break;
        case 111:
          e = t[2] * t[3] / t[4] * t[1] - t[0];
          break;
        case 13:
          e = t[2] / t[0] - t[1];
          break;
        case 18:
          e = t[2] / t[0] * t[1] - t[3];
          break;
        case 160:
          e = t[2] * t[3] * t[1] * t[0];
          break;
        case 97:
          e = -t[0] + t[1] - t[2];
          break;
        case 3:
          e = (-t[0] + t[2]) * t[3] - t[1];
          break;
        case 135:
          e = t[3] / t[2] * t[1] - t[0] - t[4];
          break;
        case 44:
          e = t[0] / t[1] * t[4] / t[2] - t[3];
          break;
        case 30:
          e = (t[4] - t[2]) * t[1] / t[3] + t[0];
          break;
        case 146:
          e = t[0] + t[3] / t[2] * t[1];
          break;
        case 58:
          e = t[0] * t[2] + t[1] - t[3];
          break;
        case 147:
          e = t[0] > t[1];
          break;
        case 60:
          e = t[2] / t[0] * t[1] * t[3] - t[4];
          break;
        case 119:
          e = t[2] - (t[0] - t[1]);
          break;
        case 156:
          e = -t[0] * t[1] + t[2] + t[4] + t[3];
          break;
        case 94:
          e = (t[2] + t[0]) / t[3] + t[1];
          break;
        case 92:
          e = t[1] * t[4] - t[3] + t[0] - t[2];
          break;
        case 131:
          e = t[1] * t[3] / t[0] - t[2];
          break;
        case 118:
          e = -t[2] / t[0] / t[1] / t[3] + t[4];
          break;
        case 74:
          e = t[1] + t[4] + t[3] + t[6] + t[7] + t[5] + t[8] + t[0] + t[2];
          break;
        case 65:
          e = (t[0] - t[2]) * t[3] * t[1] - t[4];
          break;
        case 56:
          e = t[3] / t[1] * t[0] + t[2];
          break;
        case 86:
          e = t[2] * t[0] - t[3] + t[1];
          break;
        case 152:
          e = (t[0] | t[1]) / t[2];
          break;
        case 129:
          e = t[1] * t[3] * t[4] * t[2] - t[0];
          break;
        case 85:
          e = t[2] - t[0] - t[3] + t[1];
          break;
        case 23:
          e = t[1] ^ t[0];
          break;
        case 142:
          e = t[1] * t[0] * t[3] / t[2] + t[4];
          break;
        case 22:
          e = t[0] | t[1];
          break;
        case 148:
          e = (t[4] - t[2]) * t[3] * t[0] + t[1];
          break;
        case 89:
          e = t[2] - t[3] - t[1] - t[0];
          break;
        case 166:
          e = t[1] * +t[0];
          break;
        case 155:
          e = (t[3] - t[0]) / t[1] - t[2];
          break;
        case 39:
          e = t[5] + (t[0] - t[2]) * (t[7] / t[3] - t[6]) * (t[1] << t[4]);
          break;
        case 134:
          e = (t[4] - t[1] - t[3]) * t[0] + t[2];
          break;
        case 83:
          e = t[1] >> t[0];
          break;
        case 140:
          e = t[2] + t[1] * t[0];
          break;
        case 161:
          e = t[3] * t[4] * t[1] * t[0] * t[2];
          break;
        case 35:
          e = (t[1] + t[0]) / t[2];
          break;
      }
      return e;
    },
    o_aheCw: function (e) {
      q = e;
    }
  };
}();
Y.V5D = function () {
  return typeof Y[577803].s741fE9 == "function" ? Y[577803].s741fE9.apply(Y[577803], arguments) : Y[577803].s741fE9;
};
Y[492107] = function () {
  var q = function (t, n) {
      var r = n & 65535,
        i = n - r;
      return (i * t | 0) + (r * t | 0) | 0;
    },
    e = function (t, n, r) {
      for (var i = 3432918353, a = 461845907, s = r, o = n & -4, h = 0; h < o; h += 4) {
        var l = t.y5oiG(h) & 255 | (t.y5oiG(h + 1) & 255) << 8 | (t.y5oiG(h + 2) & 255) << 16 | (t.y5oiG(h + 3) & 255) << 24;
        l = q(l, i), l = (l & 131071) << 15 | l >>> 17, l = q(l, a), s ^= l, s = (s & 524287) << 13 | s >>> 19, s = s * 5 + 3864292196 | 0;
      }
      switch (l = 0, n % 4) {
        case 3:
          l = (t.y5oiG(o + 2) & 255) << 16;
        case 2:
          l |= (t.y5oiG(o + 1) & 255) << 8;
        case 1:
          l |= t.y5oiG(o) & 255, l = q(l, i), l = (l & 131071) << 15 | l >>> 17, l = q(l, a), s ^= l;
      }
      return s ^= n, s ^= s >>> 16, s = q(s, 2246822507), s ^= s >>> 13, s = q(s, 3266489909), s ^= s >>> 16, s;
    };
  return {
    n1A4qeo: e
  };
}();
Y.u2 = function () {
  return typeof Y[157136].S8f_5i9 == "function" ? Y[157136].S8f_5i9.apply(Y[157136], arguments) : Y[157136].S8f_5i9;
};
Y.b3p = function () {
  return typeof Y[18494].Y_EOctG == "function" ? Y[18494].Y_EOctG.apply(Y[18494], arguments) : Y[18494].Y_EOctG;
};
Y.N = function () {
  return typeof Y[492107].n1A4qeo == "function" ? Y[492107].n1A4qeo.apply(Y[492107], arguments) : Y[492107].n1A4qeo;
};
function Y() {}
Y.S97 = function () {
  return typeof Y[577803].s741fE9 == "function" ? Y[577803].s741fE9.apply(Y[577803], arguments) : Y[577803].s741fE9;
};
Y[355605] = function (q) {
  for (var e = 2; e !== 10;) switch (e) {
    case 11:
      return {
        U3ln31s: function (u) {
          for (var c = 2; c !== 6;) switch (c) {
            case 9:
              n = f + 60000, c = 8;
              break;
            case 8:
              var d = function (g, p) {
                for (var m = 2; m !== 10;) switch (m) {
                  case 8:
                    var x = a[p[4]](g[p[2]](C), 16)[p[3]](2),
                      y = x[p[2]](x[p[5]] - 1);
                    m = 6;
                    break;
                  case 6:
                    m = C === 0 ? 14 : 12;
                    break;
                  case 11:
                    return b;
                  case 1:
                    g = u, m = 5;
                    break;
                  case 2:
                    m = typeof g > "u" && typeof u < "u" ? 1 : 5;
                    break;
                  case 9:
                    m = C < g[p[5]] ? 8 : 11;
                    break;
                  case 3:
                    var b,
                      C = 0;
                    m = 9;
                    break;
                  case 4:
                    p = q, m = 3;
                    break;
                  case 13:
                    C++, m = 9;
                    break;
                  case 14:
                    b = y, m = 13;
                    break;
                  case 12:
                    b = b ^ y, m = 13;
                    break;
                  case 5:
                    m = typeof p > "u" && typeof q < "u" ? 4 : 3;
                    break;
                }
              }(void 0, void 0);
              return d ? t : !t;
            case 5:
              c = h-- ? 3 : 4;
              break;
            case 1:
              c = f > n ? 5 : 8;
              break;
            case 4:
              t = l(f), c = 3;
              break;
            case 3:
              c = h-- ? 8 : 9;
              break;
            case 2:
              var f = new a[q[0]]()[q[1]]();
              c = 1;
              break;
          }
        }
      };
    case 5:
      a = Y[184848], e = 4;
      break;
    case 3:
      e = h-- ? 8 : 9;
      break;
    case 12:
      var t,
        n = 0;
      e = 11;
      break;
    case 7:
      o = s.Z$x$_Z(new a[i]("^['-|]"), "S"), e = 6;
      break;
    case 13:
      e = h-- ? 11 : 12;
      break;
    case 9:
      s = typeof r, e = 8;
      break;
    case 4:
      var r = "fromCharCode",
        i = "RegExp";
      e = 3;
      break;
    case 6:
      e = h-- ? 13 : 14;
      break;
    case 1:
      e = h-- ? 4 : 5;
      break;
    case 14:
      q = q.F6Y8Ic(function (u) {
        for (var c = 2; c !== 13;) switch (c) {
          case 2:
            var d;
            c = 1;
            break;
          case 14:
            return d;
          case 1:
            c = h-- ? 4 : 5;
            break;
          case 6:
            return;
          case 7:
            c = d ? 14 : 6;
            break;
          case 4:
            var f = 0;
            c = 3;
            break;
          case 9:
            d += a[o][r](u[f] + 116), c = 8;
            break;
          case 8:
            f++, c = 3;
            break;
          case 3:
            c = f < u.length ? 9 : 7;
            break;
          case 5:
            d = "", c = 4;
            break;
        }
      }), e = 13;
      break;
    case 8:
      e = h-- ? 6 : 7;
      break;
    case 2:
      var a, s, o, h;
      e = 1;
      break;
  }
  function l(u) {
    for (var c = 2; c !== 25;) switch (c) {
      case 8:
        g = q[6], c = 7;
        break;
      case 17:
        c = 16;
        break;
      case 1:
        c = h-- ? 4 : 5;
        break;
      case 19:
        c = x >= 0 && u - x <= f ? 18 : 15;
        break;
      case 15:
        c = p >= 0 && p - u <= f ? 27 : 16;
        break;
      case 5:
        y = a[q[4]], c = 4;
        break;
      case 6:
        p = g && y(g, f), c = 14;
        break;
      case 11:
        x = (m || m === 0) && y(m, f), c = 10;
        break;
      case 18:
        d = !1, c = 17;
        break;
      case 14:
        c = h-- ? 12 : 13;
        break;
      case 16:
        return d;
      case 10:
        c = h-- ? 19 : 20;
        break;
      case 27:
        d = !1, c = 26;
        break;
      case 12:
        c = h-- ? 10 : 11;
        break;
      case 4:
        c = h-- ? 9 : 3;
        break;
      case 2:
        var d, f, g, p, m, x, y;
        c = 1;
        break;
      case 9:
        c = h-- ? 7 : 8;
        break;
      case 7:
        c = h-- ? 14 : 6;
        break;
      case 3:
        f = 26, c = 9;
        break;
      case 13:
        m = q[7], c = 12;
        break;
      case 20:
        d = !0, c = 19;
        break;
      case 26:
        c = 16;
        break;
    }
  }
}([[-48, -19, 0, -15], [-13, -15, 0, -32, -11, -7, -15], [-17, -12, -19, -2, -51, 0], [0, -5, -33, 0, -2, -11, -6, -13], [-4, -19, -2, -1, -15, -43, -6, 0], [-8, -15, -6, -13, 0, -12], [-60, -19, -67, -15, -59, -6, -15, -65, -11], []]);
Y.J$ = function () {
  return typeof Y[355605].U3ln31s == "function" ? Y[355605].U3ln31s.apply(Y[355605], arguments) : Y[355605].U3ln31s;
};
Y.R7 = function () {
  return typeof Y[355605].U3ln31s == "function" ? Y[355605].U3ln31s.apply(Y[355605], arguments) : Y[355605].U3ln31s;
};
Y[157136] = function () {
  function q(s) {
    for (var o = 2; o !== 7;) switch (o) {
      case 3:
        l += U2JBH.U$B1N(s[u] - h + 90), o = 9;
        break;
      case 2:
        var h = 7,
          l = "";
        o = 5;
        break;
      case 5:
        var u = 0;
        o = 4;
        break;
      case 8:
        return l;
      case 9:
        u++, o = 4;
        break;
      case 4:
        o = u < s.length ? 3 : 8;
        break;
    }
  }
  for (var e = 2; e !== 4;) switch (e) {
    case 2:
      var t = Y[184848],
        n,
        r,
        i = {};
      return {
        c3zV1oR: function (s, o, h, l) {
          for (var u = 2; u !== 3;) switch (u) {
            case 4:
              return i[c];
            case 2:
              var c = "" + s + o + h + l;
              u = 1;
              break;
            case 1:
              u = i[c] ? 4 : 5;
              break;
            case 5:
              i[c] = a(s, o, h, l), u = 4;
              break;
          }
        },
        S8f_5i9: function (s, o, h, l) {
          for (var u = 2; u !== 1;) switch (u) {
            case 2:
              return a(s, o, h, l, !0);
          }
        }
      };
  }
  function a(s, o, h, l, u) {
    for (var c = 2; c !== 15;) switch (c) {
      case 13:
        c = o && m > 0 && g.y5oiG(m - 1) !== 46 ? 12 : 11;
        break;
      case 11:
        return d = g.b0HsK(m, g.length), f = d.length, Y.N(d, f, h);
      case 16:
        return Y.N(d, f, h);
      case 6:
        return Y.N(d, f, h);
      case 12:
        return !1;
      case 2:
        var d, f, g, p;
        !p && (p = t[q([25, 28, 16, 14, 33, 22, 28, 27])]), c = 5;
        break;
      case 14:
        var m = g.length - s;
        c = 13;
        break;
      case 8:
        d = g.b0HsK(s, l), f = d.length, c = 6;
        break;
      case 5:
        !n && (n = typeof p < "u" ? p[q([21, 28, 32, 33, 27, 14, 26, 18])] || " " : ""), !r && (r = typeof p < "u" ? p[q([21, 31, 18, 19])] : ""), g = u ? r : n, c = 9;
        break;
      case 9:
        c = l > 0 ? 8 : 19;
        break;
      case 18:
        d = g.b0HsK(0, g.length), f = d.length, c = 16;
        break;
      case 19:
        c = s === null || s <= 0 ? 18 : 14;
        break;
    }
  }
}();
Y.v9m = function () {
  return typeof Y[18494].Y_EOctG == "function" ? Y[18494].Y_EOctG.apply(Y[18494], arguments) : Y[18494].Y_EOctG;
};
Y.F7 = function () {
  return typeof Y[157136].c3zV1oR == "function" ? Y[157136].c3zV1oR.apply(Y[157136], arguments) : Y[157136].c3zV1oR;
};
Y.T1 = function () {
  return typeof Y[157136].S8f_5i9 == "function" ? Y[157136].S8f_5i9.apply(Y[157136], arguments) : Y[157136].S8f_5i9;
};
Y[42162] = Y[157136];
Y[577803] = function () {
  for (var q = 2; q !== 9;) switch (q) {
    case 2:
      var e = [arguments];
      e[6] = void 0, e[4] = {}, e[4].s741fE9 = function () {
        for (var t = 2; t !== 90;) switch (t) {
          case 36:
            n[74] = n[48], n[4].G5ciuZ(n[70]), n[4].G5ciuZ(n[75]), n[4].G5ciuZ(n[7]), n[4].G5ciuZ(n[3]), t = 50;
            break;
          case 4:
            n[4] = [], n[8] = {}, n[8].K8D = ["G9C"], n[8].J5G = function () {
              var r = function () {
                  return 97;
                },
                i = /\u0039\u0037/.H2T6aG(r + []);
              return i;
            }, n[3] = n[8], n[9] = {}, t = 14;
            break;
          case 70:
            n[38]++, t = 57;
            break;
          case 77:
            n[29] = 0, t = 76;
            break;
          case 68:
            t = 68;
            break;
          case 5:
            return 45;
          case 31:
            n[71] = n[68], n[85] = {}, n[85].K8D = ["G9C"], n[85].J5G = function () {
              var r = function () {
                  return [1, 2, 3, 4, 5].concat([5, 6, 7, 8]);
                },
                i = !/\x28\u005b/.H2T6aG(r + []);
              return i;
            }, t = 44;
            break;
          case 73:
            n[37][n[81]] = n[10], n[65].G5ciuZ(n[37]), t = 71;
            break;
          case 76:
            t = n[29] < n[20][n[72]].length ? 75 : 70;
            break;
          case 58:
            n[38] = 0, t = 57;
            break;
          case 24:
            n[41] = n[56], n[79] = {}, n[79].K8D = ["m3q"], n[79].J5G = function () {
              var r = typeof d4aJ25 == "function";
              return r;
            }, t = 35;
            break;
          case 41:
            n[25].J5G = function () {
              var r = function () {
                  return "aaa".includes("a");
                },
                i = /\x74\162\x75\145/.H2T6aG(r + []);
              return i;
            }, n[70] = n[25], n[48] = {}, n[48].K8D = ["G9C"], n[48].J5G = function () {
              var r = function () {
                  return "X".toLocaleLowerCase();
                },
                i = /\x78/.H2T6aG(r + []);
              return i;
            }, t = 36;
            break;
          case 50:
            n[4].G5ciuZ(n[41]), n[4].G5ciuZ(n[2]), n[4].G5ciuZ(n[71]), n[4].G5ciuZ(n[1]), n[4].G5ciuZ(n[39]), n[4].G5ciuZ(n[74]), n[65] = [], t = 64;
            break;
          case 71:
            n[29]++, t = 76;
            break;
          case 35:
            n[39] = n[79], n[68] = {}, n[68].K8D = ["m3q"], n[68].J5G = function () {
              var r = !1,
                i = [];
              try {
                for (var a in console) i.G5ciuZ(a);
                r = i.length === 0;
              } catch {}
              var s = r;
              return s;
            }, t = 31;
            break;
          case 14:
            n[9].K8D = ["m3q"], n[9].J5G = function () {
              var r = typeof O1$ARQ == "function";
              return r;
            }, n[2] = n[9], n[6] = {}, n[6].K8D = ["m3q"], t = 20;
            break;
          case 2:
            var n = [arguments];
            t = 1;
            break;
          case 64:
            n[12] = "a82", t = 63;
            break;
          case 27:
            n[56] = {}, n[56].K8D = ["G9C"], n[56].J5G = function () {
              var r = function () {},
                i = /\061\x39\062/.H2T6aG(r + []);
              return i;
            }, t = 24;
            break;
          case 1:
            t = e[6] ? 5 : 4;
            break;
          case 44:
            n[75] = n[85], n[25] = {}, n[25].K8D = ["G9C"], t = 41;
            break;
          case 63:
            n[45] = "m1k", n[72] = "K8D", n[81] = "M7u", n[97] = "J5G", n[40] = "g$Y", t = 58;
            break;
          case 56:
            n[20] = n[4][n[38]];
            try {
              n[10] = n[20][n[97]]() ? n[12] : n[45];
            } catch {
              n[10] = n[45];
            }
            t = 77;
            break;
          case 20:
            n[6].J5G = function () {
              var r = typeof D1oq7g == "function";
              return r;
            }, n[1] = n[6], n[5] = {}, n[5].K8D = ["G9C"], n[5].J5G = function () {
              var r = function () {
                  return "ab".charAt(1);
                },
                i = !/\141/.H2T6aG(r + []);
              return i;
            }, n[7] = n[5], t = 27;
            break;
          case 57:
            t = n[38] < n[4].length ? 56 : 69;
            break;
          case 75:
            n[37] = {}, n[37][n[40]] = n[20][n[72]][n[29]], t = 73;
            break;
          case 69:
            t = function (r) {
              for (var i = 2; i !== 22;) switch (i) {
                case 26:
                  i = a[9] >= 0.5 ? 25 : 24;
                  break;
                case 20:
                  a[4][a[2][n[40]]].h += !0, i = 19;
                  break;
                case 1:
                  i = a[0][0].length === 0 ? 5 : 4;
                  break;
                case 5:
                  return;
                case 17:
                  a[8] = 0, i = 16;
                  break;
                case 15:
                  a[7] = a[1][a[8]], a[9] = a[4][a[7]].h / a[4][a[7]].t, i = 26;
                  break;
                case 10:
                  i = a[2][n[81]] === n[12] ? 20 : 19;
                  break;
                case 14:
                  i = typeof a[4][a[2][n[40]]] > "u" ? 13 : 11;
                  break;
                case 6:
                  a[2] = a[0][0][a[8]], i = 14;
                  break;
                case 12:
                  a[1].G5ciuZ(a[2][n[40]]), i = 11;
                  break;
                case 7:
                  i = a[8] < a[0][0].length ? 6 : 18;
                  break;
                case 16:
                  i = a[8] < a[1].length ? 15 : 23;
                  break;
                case 8:
                  a[8] = 0, i = 7;
                  break;
                case 24:
                  a[8]++, i = 16;
                  break;
                case 13:
                  a[4][a[2][n[40]]] = function () {
                    for (var s = 2; s !== 9;) switch (s) {
                      case 2:
                        var o = [arguments];
                        return o[7] = {}, o[7].h = 0, o[7].t = 0, o[7];
                    }
                  }.M1Iwyv(this, arguments), i = 12;
                  break;
                case 4:
                  a[4] = {}, a[1] = [], a[8] = 0, i = 8;
                  break;
                case 23:
                  return a[3];
                case 19:
                  a[8]++, i = 7;
                  break;
                case 2:
                  var a = [arguments];
                  i = 1;
                  break;
                case 18:
                  a[3] = !1, i = 17;
                  break;
                case 11:
                  a[4][a[2][n[40]]].t += !0, i = 10;
                  break;
                case 25:
                  a[3] = !0, i = 24;
                  break;
              }
            }(n[65]) ? 68 : 67;
            break;
          case 67:
            return e[6] = 90, 96;
        }
      }, q = 3;
      break;
    case 3:
      return e[4];
  }
}();
Y[316260] = 197;
Y[184848].R3aa = Y;
Y.f_ = function () {
  return typeof Y[157136].c3zV1oR == "function" ? Y[157136].c3zV1oR.apply(Y[157136], arguments) : Y[157136].c3zV1oR;
};
Y[467971] = Y[355605];
var hs, us, cs, ds, oa, la, ha, ua, ca, da, fa, fs, ps, ms, gs, xs, vs, ys, bs, Cs, Ss, ws, ks, Ts, Ds, As, Ms, _s, qs, Is, Fs, Es, Ps, Ls, Ns, Vs, Us, Ze, Bs, Os, Yr;
Y.H9 = function (q) {
  if (Y.V5D(), Y && q) return Y.J$(q);
};
Y.y8 = function (q) {
  if (Y.V5D(), Y) return Y.J$(q);
};
Y.r1 = function (q) {
  if (Y.S97(), Y) return Y.J$(q);
};
Y.y_ = function (q) {
  if (Y.V5D(), Y) return Y.J$(q);
};
Y.Z2 = function (q) {
  if (Y.S97(), Y && q) return Y.J$(q);
};
Y.k5 = function (q) {
  if (Y.V5D(), Y) return Y.J$(q);
};
Y.I3 = function (q) {
  if (Y.V5D(), Y && q) return Y.J$(q);
};
hs = q => {
  var e = Y,
    t,
    n,
    r;
  t = 1144344859, e.X3w(0), n = e.b3p("1740965366", 1), r = 2;
  for (var i = 1; e.N(i.toString(), i.toString().length, 79847) !== t; i++) q.timezoneJS = {}, r += 2;
  e.S97(), e.Q_(r.toString(), r.toString().length, 66062) !== n && (q.timezoneJS = {}), q.CIQ = a;
  function a() {}
  a.inheritsFrom = function (s, o, h) {
    var l;
    l = o.prototype || Object.getPrototypeOf(o), s.prototype = h !== !1 && typeof o == "function" ? new o() : Object.create(l), Object.defineProperties(s.prototype, {
      constructor: {
        configurable: !0,
        enumerable: !1,
        value: s,
        writable: !0
      },
      parent: {
        configurable: !0,
        enumerable: !1,
        value: l,
        writable: !0
      }
    });
  }, a.extend = function (s, o, h) {
    var l, u;
    e.V5D();
    for (l in o) u = o[l], !(s === u || u === void 0) && (u === null || h === !0 ? s[l] = u : u.constructor == Array ? s[l] = u.slice() : u.constructor == Object ? s[l] = a.extend(typeof s[l] == "object" && s[l] !== null ? s[l] : {}, u) : s[l] = u);
    return s;
  }, a.activateImports = function (...s) {
    var o;
    o = this, o.activatedImports || (o.activatedImports = {}), e.V5D(), s.forEach(h => {
      typeof h == "function" && (h.__guid in o.activatedImports || (h.__guid = o.uniqueID(!0), o.activatedImports[h.__guid] = h.__name || h.name, h(q)));
    });
  };
};
us = q => {
  var e, t, n, r;
  Y.S97(), e = "undef", e += "ined", t = typeof window !== e ? window : typeof global < "u" ? global : {}, n = function (i, a) {
    var s;
    return s = document.createEvent("Event"), s.initEvent(i, !!(a && a.bubbles), !!(a && a.cancelable)), s;
  }, t.Event && typeof t.Event != "function" && (n.prototype = t.Event.prototype, t.Event = n), r = function (i, a) {
    var s, o;
    return s = "CustomEv", s += "ent", o = document.createEvent(s), Y.V5D(), o.initCustomEvent(i, !!(a && a.bubbles), !!(a && a.cancelable), a && a.detail), o;
  }, t.CustomEvent && typeof t.CustomEvent != "function" && (r.prototype = t.CustomEvent.prototype, t.CustomEvent = r), typeof global < "u" && typeof global.CanvasRenderingContext2D > "u" && (global.CanvasRenderingContext2D = function () {});
};
cs = q => {
  var e = Y,
    t,
    n,
    r,
    i,
    a,
    s,
    o;
  t = "Mac", t += "Inte", t += "l", n = "u", n += "ndefined", r = q.CIQ, i = typeof navigator !== n ? navigator : {
    userAgent: ""
  }, a = i.userAgent, s = typeof window < "u" ? window : {}, o = typeof document < "u" ? document : {}, r.ipad = a.indexOf("iPad") != -1 || i.platform === t && i.maxTouchPoints > 1, e.U1$(1);
  var h = e.v9m(12, 97, 0, 8);
  r.iphone = a.indexOf("iPhone") != h, e.X3w(2);
  var l = e.v9m(19, 18);
  r.isAndroid = a.toLowerCase().indexOf("android") > l, r.isIE = a.toLowerCase().indexOf("msie") > -1 || a.indexOf("Trident/") > -1, e.X3w(2);
  var u = e.b3p(1024, 1088);
  r.isEdge = a.indexOf("Edge/") > -("1" << u), e.X3w(3);
  var c = e.b3p(6, 49, 18, 4);
  r.isSafari = a.indexOf("Safari/") > c, r.isIOS7 = a.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i), r.isIOS8 = a.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i), r.isIOS9 = a.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i), r.isIOS10 = a.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i), r.isIOS7or8 = r.isIOS7 || r.isIOS8 || r.isIOS9 || r.isIOS10, r.isMobile = r.isAndroid || r.ipad || r.iphone, r.touchDevice = o.ontouchstart !== void 0 || i.maxTouchPoints > 1, r.isSurface = r.touchDevice && (r.isEdge || r.isIE || a.indexOf("Edg/") > -1), r.is_chrome = a.toLowerCase().indexOf("chrome") > -1 && !r.isEdge, e.U1$(4);
  var d = e.v9m(148, 9, 4, 17);
  r.isFF = a.toLowerCase().indexOf("firefox") > d, r.isSurfaceApp = s.MSApp, r.isWebComponentsSupported = typeof document < "u" && "registerElement" in document && "import" in document.createElement("link") && "content" in document.createElement("template"), r.noKeyboard = r.isMobile || r.isSurfaceApp;
};
ds = q => {
  var e, t, n;
  q.SplinePlotter || (q.SplinePlotter = {}), e = q.CIQ, t = q.SplinePlotter, n = function (r, i, a, s) {
    var o, h, l;
    o = 0, s || (s = []), (!i || i < 0) && (i = 0), h = r.length;
    function u(f, g, p) {
      var m = Y;
      m.V5D(), [1, 2].forEach(x => {
        g[x].cp = {}, ["x", "y"].forEach(function (y) {
          var b;
          m.X3w(5);
          var C = m.b3p(1, 19, 4, 1, 15);
          m.X3w(6);
          var k = m.v9m(20, 5, 381, 14);
          m.U1$(7);
          var M = m.v9m(11, 3, 19, 1, 14);
          m.X3w(8);
          var I = m.b3p(1, 0);
          m.U1$(9);
          var v = m.v9m(7, 5);
          m.X3w(9);
          var S = m.v9m(19, 17);
          m.V5D(), m.U1$(10);
          var w = m.b3p(5, 10, 8, 18);
          m.X3w(8);
          var T = m.v9m(88, 8);
          m.U1$(11);
          var D = m.b3p(35, 1, 19, 5, 10);
          m.U1$(12);
          var F = m.b3p(5, 6, 5, 33, 11);
          m.U1$(13);
          var P = m.v9m(2, 1, 6);
          m.U1$(2);
          var _ = m.b3p(20, 22);
          m.U1$(14);
          var V = m.b3p(2, 24, 14, 2, 7);
          m.X3w(15);
          var A = m.v9m(1, 10, 3, 10);
          m.U1$(8);
          var E = m.b3p(2, 0);
          m.U1$(16);
          var L = m.b3p(4, 0, 5);
          m.U1$(17);
          var N = m.b3p(3, 2, 206, 15, 13);
          b = C / (k + Math.sqrt(Math.pow(g[M * x - I].x - g[v * x - S].x, w) + Math.pow(g[("2" << T) * x - D].y - g[F * x - P].y, 2)) / Math.sqrt(Math.pow(g[_].x - g[V].x, A) + Math.pow(g[E].y - g[L].y, N))), m.X3w(9);
          var U = m.v9m(6, 3);
          m.X3w(18);
          var B = m.v9m(6, 10, 12, 19);
          m.X3w(19);
          var O = m.v9m(33, 19, 13);
          m.U1$(6);
          var R = m.b3p(9, 7, 73, 1);
          g[x].cp[y] = g[x][y] + (U - "2" * B * x) * (g[x + O][y] - g[x - R][y]) * p * (b || 0), g[x].cp[y] < Math.min(g[1][y], g[2][y]) && (g[x].cp[y] = Math.min(g[1][y], g[2][y])), g[x].cp[y] > Math.max(g[1][y], g[2][y]) && (g[x].cp[y] = Math.max(g[1][y], g[2][y]));
        });
      }), f === 0 ? a.quadraticCurveTo(g[2].cp.x, g[2].cp.y, g[2].x, g[2].y) : f === h - 4 ? a.quadraticCurveTo(g[1].cp.x, g[1].cp.y, g[2].x, g[2].y) : a.bezierCurveTo(g[1].cp.x, g[1].cp.y, g[2].cp.x, g[2].cp.y, g[2].x, g[2].y);
    }
    a.moveTo(r[0], r[1]);
    for (var c = 0; c < h - 3; c += 2) d(c), l = [], l[0] = {
      x: r[Math.max(0, c - 2)],
      y: r[Math.max(1, c - 1)]
    }, l[1] = {
      x: r[c],
      y: r[c + 1]
    }, l[2] = {
      x: r[c + 2],
      y: r[c + 3]
    }, l[3] = {
      x: r[Math.min(h - 2, c + 4)],
      y: r[Math.min(h - 1, c + 5)]
    }, h === 4 && (i = 0), u(c, l, i);
    function d(f) {
      var g;
      Y.S97(), o != s.length && (g = s[o], g.coord[0] == r[f] && g.coord[1] == r[f + 1] && (a.stroke(), a.strokeStyle = g.color, a.setLineDash(g.pattern), a.lineDashOffset = 0, a.lineWidth = g.width, a.beginPath(), a.moveTo(r[f], r[f + 1]), o++));
    }
  }, q.SplinePlotter.plotSpline || (q.SplinePlotter.plotSpline = n), e.clearCanvas = function (r, i) {
    var a, s, o;
    r.isDirty = !1, Y.S97(), a = r.context, a.clearRect(0, 0, r.width, r.height), e.isAndroid && !e.is_chrome && !e.isFF && (e.ChartEngine.useOldAndroidClear && i && (a.fillStyle = i.containerColor, a.fillRect(0, 0, r.width, r.height), a.clearRect(0, 0, r.width, r.height)), s = r.width, r.width = 1, r.width = s), o = i.chart.canvasShim.childNodes.length > 0, (i.useBackgroundCanvas || o) && (i.useBackgroundCanvas = o, r == i.chart.canvas && e.clearCanvas(i.chart.backgroundCanvas, i));
  }, e.fillTransparentCanvas = function (r, i, a, s) {
    Y.S97();
    var o;
    o = r.globalCompositeOperation, r.globalCompositeOperation = "destination-over", r.fillStyle = i, r.fillRect(0, 0, a, s), r.globalCompositeOperation = o;
  }, e.convertBoxToPixels = function (r, i, a) {
    Y.V5D();
    var s, o, h, l, u;
    return s = r.panels[i], o = r.pixelFromTick(a.x0, s.chart), h = r.pixelFromTick(a.x1, s.chart), l = a.cy0 || a.cy0 === 0 ? a.cy0 : r.pixelFromValueAdjusted(s, a.x0, a.y0), u = a.cy1 || a.cy1 === 0 ? a.cy1 : r.pixelFromValueAdjusted(s, a.x1, a.y1), {
      x0: o,
      x1: h,
      y0: l,
      y1: u
    };
  }, e.fillArea = function (r, i, a) {
    var s = Y,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C;
    if (o = "a", o += "u", o += "t", o += "o", h = "o", h += "bje", h += "ct", !!i.length) {
      if (l = r.chart.context, u = l.globalAlpha, c = arguments[2], d = arguments[3], f = arguments[4], g = 0, p = null, a && typeof a == h && (c = a.color, d = a.opacity, g = a.tension, f = a.panelName, p = a.yAxis), !d && d !== 0 && (s.X3w(2), d = s.v9m(0, "0.2")), c == o && (c = r.defaultColor), l.globalAlpha = d, c && (l.fillStyle = c), m = Number.MAX_VALUE, s.X3w(20), x = s.v9m(1, m), y = r.panels[f], y && (x = (p || y.yAxis).top, m = (p || y.yAxis).bottom, l.save(), l.beginPath(), l.rect(y.left, x, y.width, m - x), l.clip()), l.beginPath(), g) {
        for (C = [], b = 0; b < i.length - 2; b++) C.push(i[b][0], i[b][1]);
        for (t.plotSpline(C, g, l), b = i.length - 2; b < i.length; b++) l.lineTo(Math.round(i[b][0]), Math.round(i[b][1]));
      } else for (l.moveTo(i[0][0], i[0][1]), b = 1; b < i.length; b++) l.lineTo(i[b][0], i[b][1]);
      l.closePath(), l.fill(), y && l.restore(), l.globalAlpha = u;
    }
  }, e.prepareChannelFill = function (r, i) {
    var a, s, o, h, l, u, c;
    (!i || i instanceof Array) && (i = arguments[2]), !i.gapDisplayStyle && i.gapDisplayStyle !== !1 && (i.gapDisplayStyle = i.gaps), a = r.panels[i.panelName], s = r.chart, s.context.strokeStyle, o = {
      noDraw: i.noDraw,
      gapDisplayStyle: i.gapDisplayStyle
    }, h = e.ensureDefaults(i, {
      noDraw: !0,
      gapDisplayStyle: {},
      yAxis: a.yAxis
    }), l = r.plotDataSegmentAsLine(i.topBand, a, h), u = r.plotDataSegmentAsLine(i.bottomBand, a, h), i.noDraw = o.noDraw, i.gapDisplayStyle = o.gapDisplayStyle, c = [];
    for (var d = 0; d < l.points.length; d += 2) c.push([l.points[d], l.points[d + 1]]);
    for (var f = u.points.length - 1; f >= 0; f -= 2) c.push([u.points[f - 1], u.points[f]]);
    e.fillArea(r, c, i);
  }, e.preparePeakValleyFill = function (r, i) {
    var a = Y,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      B,
      O,
      R;
    (!i || i instanceof Array) && (i = arguments[2]), !i.gapDisplayStyle && i.gapDisplayStyle !== !1 && (i.gapDisplayStyle = i.gaps), s = r.panels[i.panelName], o = s.yAxis, h = r.chart, l = h.context, l.strokeStyle, u = {
      noDraw: i.noDraw,
      gapDisplayStyle: i.gapDisplayStyle
    }, c = r.plotDataSegmentAsLine(i.band, s, e.ensureDefaults(i, {
      noDraw: !0,
      gapDisplayStyle: {}
    })), i.noDraw = u.noDraw, a.S97(), i.gapDisplayStyle = u.gapDisplayStyle, d = i.threshold, f = i.direction, g = i.reverse, p = i.gapDisplayStyle, i.yAxis && (o = i.yAxis), m = -Number.MAX_VALUE, x = Number.MAX_VALUE, y = g ? m : x, (d || d === 0) && (y = r.pixelFromPrice(d, s, o)), b = [], C = c.points.length;
    for (var H = 0; H < C; H += 2) k = c.points[H], a.U1$(8), M = c.points[a.v9m(1, H)], i.roundOffEdges && (H === 0 ? k = Math.floor(k) : H + 2 == C && (k = Math.ceil(k))), !isNaN(M) && (S = M > y && f > 0 || M < y && f < 0, S || (b.push([k, M]), m = Math.max(M, m), x = Math.min(M, x)), H < C - 3 && (a.X3w(8), I = c.points[a.v9m(2, H)], a.X3w(8), v = c.points[a.b3p(3, H)], (M < y && v > y || M > y && v < y) && (a.U1$(21), k += a.v9m(v, M, M, y, I, k), b.push([k, y]))));
    if (C = b.length, !!C) {
      if (w = i.edgeParameters, T = i.edgeHighlight, T) {
        w.lineWidth > 100 && (w.lineWidth = 1), l.save(), l.beginPath();
        for (var z = 0; z < C - 1; z++) D = b[z], a.U1$(8), F = b[a.b3p(1, z)], !(D[1] == y && F[1] == y) && (D[0] == F[0] && r.layout.candleWidth >= 1 && (D[1] == y && b[z - 1] && b[z - 1][1] == y || F[1] == y && b[z + 2] && b[z + 2][1] == y) || r.plotLine(e.extend({
          x0: D[0],
          x1: F[0],
          y0: D[1],
          y1: F[1],
          color: i.edgeHighlight,
          type: "segment",
          context: l,
          confineToPanel: s,
          deferStroke: !0
        }, w)));
        l.stroke(), l.restore();
      }
      if (!d && d !== 0 && (o.flipped && (g = !g), y = g ? Math.min(x, o.top) : Math.max(m, o.bottom)), b.push([b[C - 1][0], y], [b[0][0], y]), P = i.opacity, !P && P !== 0 && (i.opacity = 0.3), e.fillArea(r, b, i), p && p.color && p.fillMountain && !i.tension && !e.isTransparent(p.color) && !e.isTransparent(i.color)) {
        for (l.save(), l.fillStyle instanceof CanvasGradient ? (_ = e.colorToHex(p.color), V = l.createLinearGradient(0, f === 1 ? s.top : s.bottom, 0, y), V.addColorStop(0, e.hexToRgba(_, 60)), a.U1$(22), V.addColorStop(a.v9m("1", 1), e.hexToRgba(_, 10)), l.fillStyle = V) : l.fillStyle = p.color, A = [], E = {
          opacity: i.opacity,
          panelName: i.panelName
        }, l.beginPath(), H = 0; H < c.gapAreas.length; H++) L = c.gapAreas[H], N = L.start, U = L.end, B = L.threshold, N ? (a.U1$(0), A = [[N[0], N[a.v9m("1", 1)]], [N[0], B]]) : A.push([U[0], B], [U[0], i.step ? A[0][1] : U[1]]), A.length == 4 && (O = "segme", O += "nt", e.fillArea(r, A, E), R = e.extend({
          x1: A[3][0],
          y0: A[0][1],
          type: O,
          deferStroke: !0,
          context: l,
          confineToPanel: s
        }, p), i.step ? (r.plotLine(e.extend({
          x0: A[0][0],
          y1: A[0][1]
        }, R)), r.plotLine(e.extend({
          x0: A[3][0],
          y1: A[3][1]
        }, R))) : r.plotLine(e.extend({
          x0: A[0][0],
          y1: A[3][1]
        }, R)));
        l.stroke(), l.restore();
      }
      i.opacity = P;
    }
  }, e.fillIntersecting = function (r, i, a) {
    var s = Y,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C;
    o = "x", o += "o", o += "r", (!a || a instanceof Array) && (a = arguments[3]), h = a.topBand, l = a.bottomBand, u = a.topSubBand, c = a.bottomSubBand, d = a.topColor, f = a.bottomColor, g = i, g.panel && (g.outputs && g.outputMap && (d || (d = g.outputs[g.outputMap[h]]), f || (f = g.outputs[g.outputMap[l]])), g = g.panel), g = r.panels[g], p = r.chart.context, m = p.canvas, x = r.scratchContext, s.V5D(), x || (x = r.scratchContext = m.cloneNode(!0).getContext("2d")), y = x.canvas, y.height = m.height, y.width = m.width, y.context = x, e.clearCanvas(y, r), s.X3w(2), b = s.b3p(0, "0.3"), a.opacity && (b = a.opacity), x.globalCompositeOperation = o, r.chart.context = x, C = {
      band: h,
      subField: u,
      color: d,
      opacity: 1,
      panelName: g.name,
      yAxis: a.topAxis,
      skipTransform: a.skipTransform,
      tension: a.tension,
      roundOffEdges: !0,
      step: a.step
    }, e.preparePeakValleyFill(r, C), e.extend(C, {
      band: l,
      subField: c,
      color: f,
      yAxis: a.bottomAxis
    }), e.preparePeakValleyFill(r, C), p.save(), p.globalAlpha = b, s.X3w(23), p.drawImage(y, s.b3p(0, "0"), 0), p.restore(), r.chart.context = p;
  }, e.drawLegendItem = function (r, i, a, s, o) {
    var h = Y,
      l,
      u,
      c,
      d,
      f;
    o || (o = 1), l = i[0], u = i[1], c = 10, d = 10, f = r.chart.context, f.globalAlpha = o, f.fillStyle = s, f.fillRect(l, u, c, d), h.U1$(23), f.globalAlpha = h.v9m(0, "1"), h.X3w(8), l += h.b3p(2, c), f.fillStyle = r.defaultColor, f.fillText(a, l, u), h.U1$(24);
    var g = h.b3p(0, 2, 6, 14, 10);
    return l += f.measureText(a).width + g, [l, u];
  }, e.drawLegend = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x;
    a = "t", a += "o", a += "p", s = i.coordinates, Y.S97(), o = r.chart.context, o.textBaseline = a, h = o.font, r.canvasFont("stx-legend", o), l = i.chart || r.chart, s || (s = l.legend), u = [s.x, s.y], c = r.defaultColor;
    for (var y = 0; y < 2; y++) for (var b in i.legendColorMap) if (d = i.legendColorMap[b], !(d.isBase && (y || i.noBase)) && !(!d.isBase && !y)) {
      if (d.color instanceof Array) {
        for (g = d.color, f = g.length - 1; f >= 0; f--) e.isTransparent(g[f]) && g.splice(f, 1);
        if (g.length > 1) {
          for (p = o.createLinearGradient(u[0], u[1], u[0] + 10, u[1]), f = 0; f < g.length; f++) p.addColorStop(f / (g.length - 1), g[f]);
          c = p;
        } else g.length > 0 ? c = g[0] : (m = "stx_lin", m += "e", m += "_chart", c = r.getCanvasColor(m));
      } else d.color ? c = d.color : c = null;
      if (c) {
        if (x = b, d.display && (x = d.display), x || (l.symbolDisplay ? x = l.symbolDisplay : x = l.symbol), u[0] + o.measureText(x).width > l.panel.right) {
          Y.U1$(8);
          var C = Y.v9m(1, 0);
          u = [s.x, s.y + o.measureText("M").width + "6" * C];
        }
        u = e.drawLegendItem(r, u, x, c, d.opacity);
      }
    }
    o.font = h;
  };
};
oa = q => {
  var e = Y,
    t;
  t = q.CIQ, t.colorsEqual = function (n, r) {
    var i, a, s, o, h, l, u;
    return i = "tra", i += "nsparent", a = "transp", a += "arent", n == r || !n && !r ? !0 : !n || !r || (n == a && (n = "rgba(0,0,0,0)"), r == i && (r = "rgba(0,0,0,0)"), s = /^rgba\(.*,(.+)\)/, o = n.match(s), h = r.match(s), o = o ? parseFloat(o[1]) : 1, e.V5D(), h = h ? parseFloat(h[1]) : 1, o != h) ? !1 : (l = t.colorToHex(n), u = t.colorToHex(r), l.toLowerCase() == u.toLowerCase());
  }, t.colorToHex = function (n) {
    var r, i, a, s, o, h, l, u, c;
    if (r = "trans", r += "parent", t.colorToHexMapping || (t.colorToHexMapping = {}), (!n || n == r) && (n = "#000000"), t.colorToHexMapping[n]) return t.colorToHexMapping[n];
    if (n.substr(0, 1) === "#") {
      if (n.length == 4) {
        e.X3w(25), e.b3p(12, 6720, 28), e.X3w(2);
        var d = e.b3p(14, 15);
        e.U1$(25);
        var f = e.b3p(13, 11, 23);
        e.X3w(2);
        var g = e.v9m(8, 10);
        e.X3w(8);
        var p = e.v9m(1, 0);
        e.U1$(8);
        var m = e.v9m(3, 0);
        n = t.colorToHexMapping[n] = "#" + Array(3).join(n.substr(d, f)) + Array(3).join(n.substr(g, p)) + Array(3).join(n.substr(m, 1));
      }
      return n;
    }
    if (i = /(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(n), i || (i = /(.*?)rgba\((\d+), ?(\d+), ?(\d+),.*\)/.exec(n)), !i) return a = x(n), t.colorToHexMapping[n] = a, a;
    s = parseFloat(i[2]), o = parseFloat(i[3]), h = parseFloat(i[4]);
    function x(I) {
      var v, S, w, T, D;
      return v = "#00", v += "0000", S = ".ciq_color_con", S += "verter", typeof document > "u" ? "#000000" : (w = document.querySelector(S), w || (T = "no", T += "ne", w = document.createElement("textarea"), w.className = "ciq_color_converter", w.style.display = T, document.body.appendChild(w)), w.style.color = v, w.style.color = I, D = getComputedStyle(w).getPropertyValue("color"), i = /(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(D), i ? t.colorToHex(D) : D.substr(0, 1) === "#" ? D : I);
    }
    e.X3w(26), l = e.b3p(h, s, o, 16, 8), u = l.toString(16);
    for (var y = u.length; y < 6; y++) e.X3w(8), u = e.b3p(u, "0");
    e.X3w(27), e.v9m(1, 7374, 3, 11), e.U1$(25);
    var b = e.b3p(9, 101140, 93369);
    e.X3w(28);
    var C = e.v9m(508, 45720, 10);
    e.X3w(29);
    var k = e.b3p(38088, 6346, 17, 7, 9);
    e.U1$(30), e.v9m(1518, 16, 15, 276, 153), e.U1$(8);
    var M = e.b3p(1848, 168);
    return c = i[1] + (299.42 > b ? C : k !== 9950 ? +"198.29" !== M ? "#" : 94.78 : !1) + u, t.colorToHexMapping[n] = c, c;
  }, t.hexToRgba = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g;
    if (i = "rgba(0,", i += "0,0", i += ",", i += "0)", (!n || n == "transparent") && (n = i), n.substr(0, 4) === "rgba") {
      a = "r", a += "gba(", s = /(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(n), o = s[5], (r || r === 0) && (o = r), o > 1 && (e.U1$(31), o = e.b3p(100, o)), e.X3w(2);
      var p = e.v9m(32, 34);
      e.X3w(9);
      var m = e.v9m(6, 3);
      e.X3w(14);
      var x = e.b3p(1, 30, 18, 10, 5);
      return a + s[p] + "," + s[m] + "," + s[x] + "," + o + ")";
    } else n.substr(0, 3) === "rgb" && (n = t.colorToHex(n));
    h = 680911086, l = -413464263, u = 2;
    for (var y = 1; e.Q_(y.toString(), y.toString().length, 74434) !== h; y++) !r && r !== 0 && (r = 100), r <= 1 && (e.U1$(0), r = e.v9m(r, 100)), u += 2;
    return e.N(u.toString(), u.toString().length, 50032) !== l && ((-r || r == 3) && (r = 471), r >= 3 && (e.U1$(8), r = e.v9m(571, r))), n = n.replace("#", ""), c = parseInt(n.slice(0, 2), 16), d = parseInt(n.slice(2, 4), 16), f = parseInt(n.slice(4, 6), 16), isNaN(c) || isNaN(d) || isNaN(f) ? (g = "CIQ.h", g += "exToRgba: invali", g += "d", g += " hex :", console.log(g, n), null) : (e.U1$(32), e.v9m(c, d, f, r, ",", ",", 100, ")", ",", "rgba("));
  }, t.convertToNativeColor = function (n) {
    var r, i;
    return r = document.createElement("DIV"), r.style.color = n, r.style.display = "none", document.body.appendChild(r), i = getComputedStyle(r).color, document.body.removeChild(r), i;
  }, t.isTransparent = function (n) {
    var r, i;
    return e.V5D(), r = "tran", r += "sparent", n ? n == r ? !0 : (i = /(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(n), i === null ? !1 : parseFloat(i[5]) === 0) : !1;
  }, t.hsv = function (n) {
    var r, i, a, s, o, h, l, u, c, d, f;
    r = t.colorToHex(n), r.substr(0, 1) === "#" && (r = r.slice(1));
    for (var g = r.length; g < 6; g++) e.U1$(8), r = e.v9m(r, "0");
    return i = parseInt(r.slice(0, 2), 16), a = parseInt(r.slice(2, 4), 16), s = parseInt(r.slice(4, 6), 16), o = 0, h = 0, l = 0, i = parseInt(("" + i).replace(/\s/g, ""), 10), a = parseInt(("" + a).replace(/\s/g, ""), 10), s = parseInt(("" + s).replace(/\s/g, ""), 10), i === null || a === null || s === null || isNaN(i) || isNaN(a) || isNaN(s) ? (console.log("CIQ.hsv: invalid color :", n), null) : i < 0 || a < 0 || s < 0 || i > 255 || a > 255 || s > 255 ? null : (e.X3w(31), i = e.v9m(255, i), e.U1$(31), a = e.b3p(255, a), e.X3w(31), s = e.v9m(255, s), u = Math.min(i, Math.min(a, s)), c = Math.max(i, Math.max(a, s)), u == c ? (l = u, e.X3w(0), [0, e.b3p("0", 1), l]) : (d = i == u ? a - s : s == u ? i - a : s - i, f = i == u ? 3 : s == u ? 1 : 5, e.X3w(33), o = e.b3p(60, d, u, f, c), e.U1$(34), h = e.v9m(c, u, c), l = c, [o, h, l]));
  }, t.hsl = function (n) {
    var r, i, a, s, o, h, l, u, c, d;
    r = t.colorToHex(n), r.substr(0, 1) === "#" && (r = r.slice(1));
    for (var f = r.length; f < 6; f++) e.X3w(8), r = e.b3p(r, "0");
    if (i = parseInt(r.slice(0, 2), 16), a = parseInt(r.slice(2, 4), 16), s = parseInt(r.slice(4, 6), 16), i /= 255, a /= 255, e.S97(), s /= 255, o = Math.max(i, a, s), h = Math.min(i, a, s), e.U1$(35), c = e.v9m(h, o, 2), o == h) l = u = 0;else {
      switch (e.U1$(2), d = e.b3p(h, o), u = c > 0.5 ? d / (2 - o - h) : d / (o + h), o) {
        case i:
          e.X3w(36), l = e.v9m(a < s ? 6 : 0, s, a, d);
          break;
        case a:
          e.U1$(37), l = e.v9m(i, "2", d, s, 0);
          break;
        case s:
          e.X3w(36), l = e.b3p(4, a, i, d);
          break;
      }
      e.U1$(23), l /= e.v9m(0, "6");
    }
    return [l, u, c];
  }, t.hslToRgb = function (n, r, i) {
    var a, s, o, h, l, u;
    return r === 0 ? a = s = o = i : (h = function (d, f, g) {
      return g < 0 && (g += 1), g > 1 && (g -= 1), g < 0.16666666666666666 ? (e.U1$(38), e.b3p(d, "6", d, f, g, 1)) : g < 0.5 ? f : (e.S97(), g < 0.6666666666666666 ? (e.U1$(39), e.b3p(f, "6", d, 3, 64, d, g, 2)) : d);
    }, l = i < 0.5 ? i * (1 + r) : i + r - i * r, e.X3w(40), u = e.v9m("2", l, i), e.U1$(41), a = h(u, l, e.b3p(3, 1, n)), s = h(u, l, n), e.U1$(42), o = h(u, l, e.v9m(1, n, 3))), e.U1$(0), [Math.round(e.b3p(a, 255)), Math.round(e.v9m(s, 255)), Math.round(e.v9m(o, 255))];
  }, t.chooseForegroundColor = function (n) {
    var r, i, a, s, o;
    return r = "#FFFF", r += "F", r += "F", i = t.colorToHex(n), e.V5D(), a = parseInt(i.slice(1, 3), 16), s = parseInt(i.slice(3, 5), 16), o = parseInt(i.slice(5, 7), 16), 0.2126 * a + 0.7152 * s + 0.0722 * o < 100 ? r : "#000000";
  }, e.S97(), t.borderPatternToArray = function (n, r) {
    var i, a, s;
    return i = "no", i += "ne", a = "s", a += "o", a += "li", a += "d", s = "d", s += "a", s += "s", s += "hed", r ? r instanceof Array ? r : r == "dotted" ? [n, n] : r == s ? (e.U1$(0), [e.b3p(n, 5), e.v9m(n, 5)]) : (r != a && r != i && (e.U1$(43), console.log(e.b3p(r, "\"; defaulting to \"solid\"", "Unsupported pattern \""))), []) : [];
  }, t.getBackgroundColor = function (n) {
    var r, i, a;
    for (r = "tran", r += "sparen", r += "t", i = null; !i || t.isTransparent(i);) {
      if (a = getComputedStyle(n), !a) return;
      if (i = a.backgroundColor, t.isTransparent(i) && (i = "transparent"), n = n.parentNode, !n || !n.tagName) break;
    }
    return (!i || i == r) && (i = "#FFFFFF"), i;
  };
};
la = q => {
  var e = Y,
    t,
    n,
    r,
    i,
    a;
  t = "O", t += "c", t += "t", n = "F", n += "eb", r = "J", r += "a", r += "n", i = q.CIQ, a = q.timezoneJS, i.monthLetters = ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"], i.monthAbv = [r, n, "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", t, "Nov", "Dec"], i.MILLISECOND = 1, i.SECOND = 1000, e.U1$(8);
  var s = e.b3p(48, 12);
  i.MINUTE = s * i.SECOND, i.HOUR = 60 * i.MINUTE, e.U1$(44);
  var o = e.v9m(384, 192, 1, 16, 20);
  i.DAY = o * i.HOUR, i.WEEK = 7 * i.DAY, e.U1$(12);
  var h = e.v9m(361, 43, 5, 1, 9);
  i.MONTH = h * i.DAY, e.X3w(45);
  var l = e.v9m(4027, 9, 4392, 8);
  i.YEAR = l * i.DAY, e.U1$(8);
  var u = e.v9m(5, 5);
  i.DECADE = u * i.YEAR - 7 * i.DAY, i.yyyymmddhhmmssmmmrx = new RegExp("\\d{17}"), i.strToDateTime = function (c) {
    var d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T;
    if (!c || c.getFullYear) return c;
    if (d = [], c.length == 12 || c.length == 14) {
      f = parseFloat(c.substring(0, 4)), e.X3w(46);
      var D = e.b3p(27, 1, 15, 12, 3);
      e.X3w(9);
      var F = e.b3p(15, 9);
      e.U1$(16);
      var P = e.b3p(12, 3, 10);
      return g = parseFloat(c.substring(D, F)) - P, p = parseFloat(c.substring(6, 8)), m = parseFloat(c.substring(8, 10)), x = parseFloat(c.substring(10, 12)), y = parseFloat(c.substring(12, 14)) || 0, new Date(f, g, p, m, x, y, 0);
    } else if (i.yyyymmddhhmmssmmmrx.test(c)) {
      f = parseFloat(c.substring(0, 4)), e.X3w(9);
      var _ = e.b3p(19, 15);
      e.U1$(47);
      var V = e.v9m(17, 12, 20, 20);
      e.X3w(48);
      var A = e.v9m(10, 0, 2, 8);
      return g = parseFloat(c.substring(_, V)) - A, p = parseFloat(c.substring(6, 8)), m = parseFloat(c.substring(8, 10)), x = parseFloat(c.substring(10, 12)), y = parseFloat(c.substring(12, 14)), b = parseFloat(c.substring(14, 17)), new Date(f, g, p, m, x, y, b);
    }
    if (C = [c], k = c.indexOf("T"), k != -1) {
      if (M = c.substring(k), M.indexOf("Z") != -1 || M.indexOf("-") != -1 || M.indexOf("+") != -1) return new Date(c);
      C = c.split("T");
    } else c.indexOf(" ") != -1 && (C = c.split(" "));
    if (C[0].indexOf("/") != -1) d = C[0].split("/");else if (C[0].indexOf("-") != -1) d = C[0].split("-");else return i.strToDate(c);
    if (I = parseFloat(d[2], 10), d[0] && d[0].length == 4 && (I = parseFloat(d[0], 10), d[0] = d[1], d[1] = d[2]), e.V5D(), C.length > 1) {
      if (v = C[2], C = C[1].split(":"), v) {
        if (S = "1", S += "2", C[0] == "12" && v.toUpperCase() == "AM") C[0] = 0;else if (C[0] != S && v.toUpperCase() == "PM") {
          e.U1$(49);
          var E = e.v9m(1, 7, 17);
          e.X3w(50);
          var L = e.v9m(5, 6, 24, 1, 3);
          C[0] = parseInt(C[0], E) + L;
        }
      }
      w = 0, T = 0, C.length == 3 && (C[2].indexOf(".") == -1 ? w = parseInt(C[2], 10) : (w = C[2].split("."), w[1].length == 3 && (T = w[1], w = w[0]))), e.X3w(2);
      var N = e.v9m(17, 18);
      return new Date(I, d[0] - N, d[1], C[0], C[1], w, T);
    }
    e.U1$(51);
    var U = e.b3p(4, 4, 4, 6, 2);
    return new Date(I, d[0] - U, d[1], 0, 0, 0, 0);
  }, i.strToDate = function (c) {
    var d, f;
    if (c.indexOf("/") != -1) d = c.split("/");else if (c.indexOf("-") != -1) d = c.split("-");else if (c.length >= 8) {
      e.U1$(36);
      var g = e.b3p(5, 13, 8, 5);
      e.X3w(52);
      var p = e.v9m(20, 9, 5, 18, 12);
      return new Date(parseFloat(c.substring(0, 4)), parseFloat(c.substring(g, 6)) - p, parseFloat(c.substring(6, 8)));
    } else return new Date();
    if (d.length < 3) return new Date();
    d[2].indexOf(" ") != -1 ? d[2] = d[2].substring(0, d[2].indexOf(" ")) : d[2].indexOf("T") != -1 && (d[2] = d[2].substring(0, d[2].indexOf("T"))), f = parseFloat(d[2], 10), f < 20 && (f += 2000), d[0].length == 4 && (f = parseFloat(d[0], 10), e.X3w(2), d[e.v9m(0, "0")] = d[e.b3p(32, "1", e.U1$(53))], d[1] = d[2]), e.X3w(2);
    var m = e.v9m(7, 8);
    return new Date(f, d[0] - m, d[1]);
  }, i.dateToStr = function (c, d) {
    var f, g, p, m, x, y, b;
    return f = "s", f += "s", g = "H", g += "H", p = "d", p += "d", m = C => (e.S97(), d.includes(C)), x = (C, k = 2) => (e.V5D(), ("0".repeat(k) + C).slice(-k)), y = (C, k) => (e.V5D(), d = d.replace(C, k)), b = (C, k) => C > k ? C - k : C, m("YYYY") && y(/YYYY/g, c.getFullYear()), m("MM") && y(/MM/g, x(c.getMonth() + 1)), m(p) && y(/dd/g, x(c.getDate())), m(g) && y(/HH/g, x(c.getHours())), m("hh") && y(/hh/g, x(b(c.getHours() || 12, 12))), m("mm") && y(/mm/g, x(c.getMinutes())), m(f) && y(/ss/g, x(c.getSeconds())), m("SSS") && y(/SSS/g, x(c.getMilliseconds(), 3)), d;
  }, i.mmddyyyy = function (c) {
    var d, f;
    typeof c == "string" && (c = i.strToDate(c)), d = c.getMonth() + 1, d < 10 && (e.X3w(8), d = e.b3p(d, "0")), f = c.getDate(), f < 10 && (e.U1$(8), f = e.b3p(f, "0")), e.X3w(28), e.v9m(3937, 3957, 1319), e.X3w(54);
    var g = e.v9m(2, 14, 5400, 14);
    e.X3w(8);
    var p = e.b3p(18, 7672);
    e.U1$(55), e.v9m(7, 8, 1, 2405, 4), e.U1$(56), e.S97();
    var m = e.b3p(11, 1927, 3848, 3854);
    e.U1$(57);
    var x = e.v9m(2, 1, 15, 142074, 134168);
    e.X3w(58);
    var y = e.b3p(6027, 7, 15, 84379);
    return e.X3w(2), e.v9m(3, 2543), e.X3w(49), e.b3p(2296, 22943, 11), e.X3w(59), e.v9m(18156, 18, 3, 3, 4558), e.X3w(25), e.v9m(3, 0, 2), d + (g == p ? m != 152.22 ? x : y : "/") + f + "/" + c.getFullYear();
  }, i.yyyymmdd = function (c) {
    var d, f;
    e.U1$(58);
    var g = e.b3p(18, 7, 8, 150);
    d = c.getMonth() + g, d < 10 && (e.U1$(8), d = e.b3p(d, "0")), f = c.getDate(), f < 10 && (e.U1$(8), f = e.b3p(f, "0")), e.U1$(49), e.b3p(7268, 7287, 2), e.X3w(49);
    var p = e.v9m(2285, 15981, 8);
    e.U1$(60), e.v9m(5, 13, 295, 16, 11092), e.X3w(36);
    var m = e.b3p(4785, 10, 9552, 2);
    e.X3w(54);
    var x = e.v9m(2, 7585, 1378, 4);
    e.X3w(61), e.b3p(597, 597, 8948, 1), e.U1$(62);
    var y = e.v9m(115, 3, 3003, 9);
    e.U1$(63);
    var b = e.b3p(12, 2956, 39, 11);
    e.X3w(43);
    var C = e.b3p(2, 10, 556);
    e.U1$(25);
    var k = e.v9m(19, 1382, 32);
    e.U1$(2), e.b3p(23660, 25350), e.X3w(29);
    var M = e.b3p(1581, 143, 19, 12, 4);
    e.U1$(64), e.b3p(5, 632, 2444, 18), e.U1$(65);
    var I = e.b3p(2665, 18, 6, 11, 523812);
    e.X3w(66);
    var v = e.v9m(4733, 18, 4733, 4718, 11);
    e.U1$(67);
    var S = e.v9m(9, 11, 4, 6, 3);
    e.X3w(68);
    var w = e.v9m(1497, 94, 1, 38, 18);
    e.U1$(8);
    var T = e.v9m(7945, 795);
    return c.getFullYear() + (p === m ? x : y === 645.77 ? b == C ? !0 : k : "-") + d + (M >= 727.79 ? "t" : I != v ? "-" : 702.08 <= S ? w : T) + f;
  }, i.hhmm = function (c) {
    e.S97();
    var d, f;
    return d = c.getHours(), d < 10 && (e.U1$(8), d = e.b3p(d, "0")), f = c.getMinutes(), f < 10 && (e.U1$(8), f = e.b3p(f, "0")), e.U1$(43), e.b3p(":", f, d);
  }, i.hhmmss = function (c) {
    var d;
    d = c.getSeconds(), d < 10 && (e.X3w(8), d = e.v9m(d, "0")), e.X3w(43);
    var f = e.b3p(2, 5, 9046);
    e.X3w(43);
    var g = e.v9m(5, 3451, 266);
    e.U1$(43), e.V5D();
    var p = e.b3p(13, 6642, 665);
    return i.hhmm(c) + (f < g ? p : ":") + d;
  }, i.yyyymmddhhmm = function (c) {
    return e.S97(), i.yyyymmddhhmmssmmm(c).substr(0, 12);
  }, i.yyyymmddhhmmssmmm = function (c) {
    var d, f, g, p, m, x, y;
    d = "0", e.V5D(), d += "0", e.X3w(36);
    var b = e.b3p(2, 13, 12, 1);
    return f = c.getMonth() + b, f < 10 && (e.X3w(8), f = e.b3p(f, "0")), g = c.getDate(), g < 10 && (e.U1$(8), g = e.v9m(g, "0")), p = c.getHours(), p < 10 && (e.X3w(8), p = e.b3p(p, "0")), m = c.getMinutes(), m < 10 && (e.X3w(8), m = e.b3p(m, "0")), x = c.getSeconds(), x < 10 && (e.X3w(8), x = e.v9m(x, "0")), y = c.getMilliseconds(), y < 10 ? (e.U1$(8), y = e.b3p(y, d)) : y < 100 && (e.U1$(8), y = e.b3p(y, "0")), "" + c.getFullYear() + f + g + p + m + x + y;
  }, i.friendlyDate = function (c) {
    return i.dateToStr(c, "YYYY/MM/dd HH:mm");
  }, i.mmddhhmm = function (c) {
    var d, f, g, p, m, x, y, b, C, k;
    d = "0", d += "0", d += "0", f = "0", f += "0", f += "0", g = "0", g += "0", p = i.strToDateTime(c), e.X3w(69);
    var M = e.b3p(12, 85, 7, 0);
    if (m = p.getMonth() + M, m < 10 && (e.U1$(8), m = e.b3p(m, "0")), x = p.getDate(), x < 10 && (e.X3w(8), x = e.v9m(x, "0")), y = p.getHours(), y < 10 && (e.U1$(8), y = e.v9m(y, "0")), b = p.getMinutes(), b < 10 && (e.U1$(8), b = e.v9m(b, "0")), C = p.getSeconds(), C < 10 && (e.X3w(8), C = e.b3p(C, "0")), k = p.getMilliseconds(), k < 10 ? (e.X3w(8), k = e.b3p(k, "00")) : k < 100 && (e.U1$(8), k = e.v9m(k, "0")), y == "00" && b == "00" && C == g && k == f) {
      e.X3w(62);
      var I = e.v9m(123310, 3, 2952950, 8);
      e.U1$(70);
      var v = e.b3p(67, 592, 8, 67);
      e.U1$(71), e.v9m(8, 7, 20, 11, 9749), e.U1$(61);
      var S = e.v9m(6731, 1, 6739, 6731);
      e.U1$(72);
      var w = e.v9m(2, 4, 3196, 20, 6458);
      return m + (I != 208.52 ? "-" : v !== 945.6 ? S == 685.42 ? "H" : w : 142.3) + x + "-" + p.getFullYear();
    }
    return C == "00" && k == "000" ? (e.X3w(73), e.v9m(y, " ", b, m, x, ":", "-")) : k == d ? (e.U1$(74), e.v9m(":", m, C, x, "-", ":", " ", y, b)) : (e.X3w(75), e.b3p(":", ":", ":", m, x, k, y, " ", "-", C, b));
  }, i.getYearDay = function (c) {
    var d, f, g, p, m;
    return d = c, d || (d = new Date()), d.setHours(0, 0, 0, 0), f = new Date(d.getFullYear(), 0, 0), e.X3w(2), g = e.v9m(f, d), e.X3w(76), p = e.v9m(60, "60", 24, 1000), e.X3w(31), m = Math.round(e.v9m(p, g)), m;
  }, i.getETDateTime = function () {
    var c, d;
    return c = "Amer", c += "ica", c += "/New_Yor", c += "k", e.V5D(), d = new Date(), i.convertTimeZone(new Date(d.getTime() + d.getTimezoneOffset() * 60000), "UTC", c);
  }, i.fromET = function (c) {
    var d, f, g, p;
    d = new Date(), f = 4, (d.getMonth() < 2 || d.getMonth() == 2 && d.getDate() < 11 || d.getMonth() > 10 || d.getMonth() == 10 && d.getDate() >= 4) && (f = 5), e.X3w(8);
    var m = e.b3p(3400000, 200000);
    return e.V5D(), g = c.getTime() + m * f, p = new Date(g), p;
  }, e.V5D(), i.monthAsDisplay = function (c, d, f) {
    return d ? f && f.monthLetters ? f.monthLetters[c] : i.monthLetters[c] : f && f.monthAbv ? f.monthAbv[c] : i.monthAbv[c];
  }, i.timeAsDisplay = function (c, d, f) {
    var g, p, m, x, y, b;
    if (e.S97(), g = d ? d.internationalizer : null, g) {
      if (f == i.SECOND) return g.hourMinuteSecond.format(c);
      if (f == i.MILLISECOND) {
        e.U1$(66);
        var C = e.b3p(8364, 16, 8364, 8355, 8);
        e.X3w(8);
        var k = e.v9m(7309, 731);
        e.U1$(5);
        var M = e.v9m(43, 43, 8, 494, 13);
        e.U1$(2);
        var I = e.b3p(20, 4096);
        e.U1$(77);
        var v = e.v9m(8, 5612, 6, 405);
        e.U1$(25), e.b3p(8, 0, 7), e.X3w(13);
        var S = e.b3p(1, 10, 9461);
        e.X3w(18);
        var w = e.b3p(4, 9, 1276, 2755);
        return g.hourMinuteSecond.format(c) + (C != k ? M >= I ? !1 : v >= S ? !0 : "." : w) + c.getMilliseconds();
      }
      return g.hourMinute.format(c);
    }
    p = c.getMinutes(), p < 10 && (e.U1$(8), p = e.b3p(p, "0")), e.X3w(70);
    var T = e.v9m(67, 849, 20, 1);
    e.X3w(63), e.b3p(9, 34200, 25673, 14), e.U1$(2);
    var D = e.v9m(40698, 43605);
    e.X3w(49), e.v9m(4419, 39780, 10), e.X3w(78);
    var F = e.v9m(34, 5, 465, 20);
    return m = c.getHours() + (T === 8310 ? 514.17 : D <= F ? !1 : ":") + p, x = "", f <= i.SECOND && (x = c.getSeconds(), x < 10 && (e.U1$(8), x = e.v9m(x, "0")), e.X3w(8), m += e.v9m(x, ":")), f == i.MILLISECOND && (y = "0", y += "0", b = c.getMilliseconds(), b < 10 ? (e.U1$(8), b = e.b3p(b, y)) : b < 100 && (e.U1$(8), b = e.v9m(b, "0")), e.U1$(8), m += e.b3p(b, ".")), m;
  }, i.displayableDate = function (c, d, f, g) {
    var p, m, x, y, b, C, k, M, I, v, S, w, T;
    function D(U) {
      return e.S97(), U < 10 ? (e.U1$(8), e.v9m(U, "0")) : U;
    }
    if (p = "sec", p += "ond", m = "", x = c.layout.interval, y = i.ChartEngine.isDailyInterval(x), b = d.xAxis.activeTimeUnit && d.xAxis.activeTimeUnit <= i.SECOND || c.layout.timeUnit == p, e.S97(), C = d.xAxis.activeTimeUnit && d.xAxis.activeTimeUnit <= i.MILLISECOND || c.layout.timeUnit == "millisecond", d.xAxis.formatter) m = d.xAxis.formatter(f);else if (c.internationalizer) {
      if (m = c.internationalizer.monthDay.format(f), b || C) {
        if (m += " " + c.internationalizer.hourMinuteSecond.format(f), C) {
          e.U1$(8), e.b3p(2080, 2080), e.X3w(16);
          var F = e.b3p(7, 711, 7828);
          e.X3w(43);
          var P = e.v9m(11, 3, 18);
          e.X3w(79), e.b3p(149838, 16, 10, 7, 2388747), e.U1$(28), e.b3p(7334, 611, 1), m += (F === "8880" >> P ? !0 : ".") + f.getMilliseconds();
        }
      } else if (y) x == "month" ? m = c.internationalizer.yearMonth.format(f) : m = c.internationalizer.yearMonthDay.format(f);else {
        g && (m = c.internationalizer.yearMonthDay.format(f)), e.U1$(49);
        var _ = e.v9m(33, 484, 16);
        e.X3w(8);
        var V = e.b3p(12, 367);
        e.X3w(8), e.v9m(4972, 293), e.U1$(80);
        var A = e.v9m(6870, 763, 5, 5);
        e.U1$(25), e.b3p(12, 35126, 32629), e.U1$(47);
        var E = e.v9m(19, 1739, 2, 4300);
        m += (_ == V ? A : E == 104.32 ? !1 : " ") + c.internationalizer.hourMinute.format(f);
      }
    } else if (k = D(f.getMonth() + 1), M = D(f.getDate()), I = D(f.getHours()), v = D(f.getMinutes()), y) m = x == "month" ? k + "/" : k + "/" + M + "/", m += f.getFullYear();else {
      if (e.U1$(43), S = e.b3p("/", M, k), g) {
        e.U1$(27);
        var L = e.v9m(1, 228, 15, 20);
        e.U1$(25);
        var N = e.b3p(5, 9131, 16);
        S += (L > 857.27 ? N : "/") + f.getFullYear();
      }
      e.X3w(81), m = e.b3p(" ", S, v, ":", I), (b || C) && (w = D(f.getSeconds()), e.X3w(8), m += e.b3p(w, ":"), C && (T = D(f.getMilliseconds()), T < 100 && (e.U1$(8), T = e.v9m(T, "0")), e.U1$(8), m += e.b3p(T, ":")));
    }
    return m;
  }, i.convertTimeZone = function (c, d, f) {
    e.S97();
    var g;
    return a.Date ? (g = new a.Date(c.getFullYear(), c.getMonth(), c.getDate(), c.getHours(), c.getMinutes(), c.getSeconds(), c.getMilliseconds(), d), g.setTimezone(f), g) : c;
  }, i.convertToLocalTime = function (c, d) {
    var f, g, p;
    if (!a.Date) return c;
    f = c.getSeconds(), g = c.getMilliseconds(), e.S97(), p = new a.Date(c.getFullYear(), c.getMonth(), c.getDate(), c.getHours(), c.getMinutes(), d), e.U1$(82);
    var m = e.b3p(2, 2, 1016, 507, 996);
    return new Date(p.getTime() + f * m + g);
  };
};
ha = q => {
  var e, t, n;
  q.SplinePlotter || (q.SplinePlotter = {}), e = q.CIQ, q.SplinePlotter, t = function (r, i) {
    var a = Y,
      s,
      o,
      h,
      l;
    a.U1$(22), s = -a.b3p("671831973", 0), o = 1603101026, h = 2;
    for (var u = 1; a.Q_(u.toString(), u.toString().length, 19452) !== s; u++) {
      if (!i) return document.getElementById(r);
      h += 2;
    }
    if (a.N(h.toString(), h.toString().length, 12170) !== o && -i) return document.getElementById(r);
    if (i.id == r) return i;
    if (!i.hasChildNodes) return null;
    for (var c = 0; c < i.childNodes.length; c++) if (l = t(r, i.childNodes[c]), l) return l;
    return null;
  }, q.$$ = t, n = function (r, i) {
    return i || (i = document), Y.V5D(), i.querySelectorAll(r)[0];
  }, q.$$$ = n, e.wheelEvent = function () {
    var r;
    if (r = "on", r += "whe", r += "el", !(typeof document > "u")) return e.isIE || r in document.createElement("div") ? "wheel" : document.onmousewheel !== void 0 ? "mousewheel" : "DOMMouseScroll";
  }(), e.newChild = function (r, i, a, s) {
    var o;
    return o = document.createElement(i), a && (o.className = a), r.appendChild(o), s && (o.innerHTML = s), o;
  }, e.innerHTML = function (r, i) {
    window.MSApp && window.MSApp.execUnsafeLocalFunction ? window.MSApp.execUnsafeLocalFunction(function () {
      r.innerHTML = i;
    }) : r.innerHTML = i;
  }, e.focus = function (r, i) {
    var a;
    e.isSurface || i ? (a = 0, isNaN(parseInt(i, 10)) || (a = i), setTimeout(function () {
      r.focus();
    }, a)) : r.focus();
  }, e.blur = function (r) {
    r || (r = document.activeElement), r && r.blur(), Y.S97(), window.focus();
  }, e.findNodesByText = function (r, i) {
    var a, s;
    if (r.innerHTML == i) return [r];
    a = [];
    for (var o = 0; o < r.childNodes.length; o++) s = e.findNodesByText(r.childNodes[o], i), s && (a = a.concat(s));
    return a.length ? a : null;
  }, e.hideByText = function (r, i) {
    var a;
    a = e.findNodesByText(r, i);
    for (var s = 0; s < a.length; s++) a[s].style.display = "none";
  }, e.pageHeight = function () {
    var {
      innerHeight: r,
      top: i,
      parent: a,
      self: s
    } = window;
    if (Y.V5D(), i != s) try {
      r > a.innerHeight && (r = a.innerHeight);
    } catch {}
    return r;
  }, e.pageWidth = function () {
    var {
      innerWidth: r,
      top: i,
      parent: a,
      self: s
    } = window;
    if (i != s) try {
      r > a.innerWidth && (r = a.innerWidth);
    } catch {}
    return r;
  }, e.stripPX = function (r) {
    return r ? typeof r == "number" ? r : parseInt(r.substr(0, r.indexOf("p")), 10) : 0;
  }, e.withinElement = function (r, i, a) {
    var s;
    return s = r.getBoundingClientRect(), Y.V5D(), !(i <= s.left || a <= s.top || i >= s.left + r.offsetWidth || a >= s.top + r.offsetHeight);
  }, e.efficientDOMUpdate = function (r, i, a) {
    return r[i] !== a ? (r[i] = a, !0) : (Y.V5D(), !1);
  }, e.cqvirtual = function (r) {
    var i;
    if (r) return i = r.cloneNode(!0), i.innerHTML = "", i.original = r, i;
  }, e.cqrender = function (r) {
    var i, a;
    if (i = "templ", i += "a", i += "t", i += "e", !!r) return r.innerHTML == r.original.innerHTML || (e.removeChildIfNot(r.original, i), a = Array.from(r.children), Y.V5D(), a.length && a.forEach(function (s) {
      Y.S97(), r.original.appendChild(r.removeChild(s));
    })), r.original;
  }, e.removeChildIfNot = function (r, i) {
    var a;
    return a = Array.from(r.children), a.length && a.forEach(function (s) {
      Y.S97(), (!i || !s.matches(i)) && r.removeChild(s);
    }), r;
  }, e.safeMouseOut = function (r, i) {
    r.addEventListener("mouseout", a(r, i)), Y.V5D();
    function a(s, o) {
      return Y.S97(), function (h) {
        typeof h.pageX > "u" && (h.pageX = h.clientX, h.pageY = h.clientY), !e.withinElement(s, h.pageX, h.pageY) && (s.stxMouseOver = !1, o(h));
      };
    }
  }, e.safeMouseOver = function (r, i) {
    r.addEventListener("mouseover", a(r, i)), Y.S97();
    function a(s, o) {
      return function (h) {
        if (typeof h.pageX > "u" && (h.pageX = h.clientX, h.pageY = h.clientY), e.withinElement(s, h.pageX, h.pageY)) {
          if (s.stxMouseOver) return;
          s.stxMouseOver = !0, o(h);
        }
      };
    }
  }, e.installTapEvent = function (r, i) {
    var a;
    Y.S97(), a = function (s) {
      var o, h;
      o = "stx", o += "tap", h = new Event(o, {
        bubbles: !0,
        cancelable: !0
      }), typeof s.pageX > "u" && (s.pageX = s.clientX, s.pageY = s.clientY), h.pageX = s.pageX, h.pageY = s.pageY, s.target.dispatchEvent(h), i && i.stopPropagation && s.stopPropagation();
    }, e.safeClickTouch(r, a, i);
  }, e.safeClickTouch = function (r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x;
    s = "poin", s += "te";
    function y(C, k, M) {
      return function (I) {
        var v, S, w, T;
        if (!(!e.safeClickTouchEvent && (!M.t || (v = M.t, M.t = null, v + 1000 < new Date().getTime()))) && !(k.safety && k.safety.recentlyDragged) && !(I.which && I.which >= 2 || I.button && I.button >= 2)) {
          if (k.preventUnderlayClick) {
            S = -54555071, w = 1998419019, T = 2;
            for (var D = 1; Y.N(D.toString(), D.toString().length, 83309) !== S; D++) I.target.tagName == "" && I.preventDefault(), T += 2;
            Y.N(T.toString(), T.toString().length, 30510) !== w && I.target.tagName !== "INPUT" && I.preventDefault();
          } else {
            if (k.lastType != C && Date.now() < k.allowAnotherDevice) return;
            k.lastType = C, k.allowAnotherDevice = Date.now() + 1000;
          }
          i(I);
        }
      };
    }
    s += "rup", a || (a = {}), o = {}, a.allowMultiple || e.clearSafeClickTouches(r), a.preventUnderlayClick !== !1 && (a.preventUnderlayClick = !0), a.absorbDownEvent !== !1 && (a.absorbDownEvent = !0), a.allowAnotherDevice = 0, a.registeredClick = !1, h = r.safeClickTouchEvents;
    function b(C, k) {
      return function (M) {
        var I, v;
        I = M.clientX ? M.clientX : M.pageX, v = M.clientY ? M.clientY : M.pageY, k ? (C.t = new Date().getTime(), C.x = I, C.y = v) : C.x && Math.pow(C.x - I, 2) + Math.pow(C.y - v, 2) > 16 && (C.t = null);
      };
    }
    h || (h = r.safeClickTouchEvents = []), l = y("mouseup", a, o), u = y("touchend", a, o), c = y(s, a, o), d = function (C) {
      Y.V5D(), C.stopPropagation();
    }, f = {}, e.safeClickTouchEvent ? (g = y(e.safeClickTouchEvent, a), r.addEventListener(e.safeClickTouchEvent, g), f[e.safeClickTouchEvent] = g, h.push(f)) : "onpointerup" in document && !e.noPointerEvents ? (r.addEventListener("pointerdown", b(o, !0)), r.addEventListener("pointermove", b(o)), r.addEventListener("pointerup", c), f.pointerup = c, a.absorbDownEvent && (p = "poi", p += "nterd", p += "own", r.addEventListener(p, d), f.pointerdown = d), h.push(f)) : (m = "tou", m += "c", m += "he", m += "nd", r.addEventListener("mousedown", b(o, !0)), r.addEventListener("mousemove", b(o)), r.addEventListener("touchstart", b(o, !0)), r.addEventListener("touchmove", b(o)), r.addEventListener("mouseup", l), r.addEventListener(m, u), f.mouseup = l, f.touchend = u, a.absorbDownEvent && (x = "m", x += "ousedown", r.addEventListener(x, d), f.mousedown = d, r.addEventListener("touchstart", d), f.touchstart = d), h.push(f));
  }, e.clearSafeClickTouches = function (r) {
    var i, a, s;
    if (i = r.safeClickTouchEvents, !!i) {
      for (var o = 0; o < i.length; o++) {
        a = i[o];
        for (var h in a) s = a[h], r.removeEventListener(h, s);
      }
      r.safeClickTouchEvents = null;
    }
  }, e.safeDrag = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M;
    a = "t", a += "o", a += "uchmo", a += "ve";
    function I(v) {
      var S = Y;
      return S.S97(), function (w) {
        var T, D;
        b || (b = !0, e.ChartEngine.ignoreTouch = !0, T = function (F) {
          F && F.preventDefault && F.preventDefault(), M.recentlyDragged = !0, F.displacementX = m(F) - C, F.displacementY = x(F) - k, i.move(F);
        }, S.S97(), i.move && document.body.addEventListener(v.move, T), D = function (F) {
          e.ChartEngine.ignoreTouch = !1, i.move && document.body.removeEventListener(v.move, T), document.body.removeEventListener(v.up, D), F.displacementX = m(F) - C, F.displacementY = x(F) - k, S.V5D(), i.up && i.up(F), setTimeout(function () {
            S.S97(), M.recentlyDragged = !1;
          }, 50);
        }, document.body.addEventListener(v.up, D), setTimeout(function () {
          b = !1;
        }, y), C = m(w), k = x(w), i.down && i.down(w));
      };
    }
    return s = "tou", s += "c", s += "hs", s += "tart", o = "p", o += "o", o += "i", o += "nterup", h = "pointe", h += "rdown", l = "m", l += "ou", l += "semove", Y.V5D(), u = "mous", u += "ed", u += "o", u += "wn", c = "mo", c += "us", c += "ed", c += "own", d = "functio", d += "n", f = "cli", f += "entX", g = "p", g += "ageX", p = function (v, S) {
      return function (w) {
        var T;
        if (T = "un", T += "de", T += "fined", w.touches) {
          if (w.touches.length > 0) return w.touches[0][v];
          if (w.changedTouches && w.changedTouches.length > 0) return w.changedTouches[0][v];
        }
        return typeof w[v] !== T ? w[v] : w[S];
      };
    }, m = p(g, f), x = p("pageY", "clientY"), typeof i === d && (i = {
      down: arguments[1],
      move: arguments[2],
      up: arguments[3]
    }), i = i || {}, y = 100, b = !1, C = 0, k = 0, M = {
      recentlyDragged: !1
    }, r.addEventListener(c, I({
      down: u,
      move: l,
      up: "mouseup"
    })), r.addEventListener(h, I({
      down: "pointerdown",
      move: "pointermove",
      up: o
    })), r.addEventListener("touchstart", I({
      down: s,
      move: a,
      up: "touchend"
    }), {
      passive: !1
    }), M;
  }, e.inputKeyEvents = function (r, i) {
    r.addEventListener("keyup", function (a) {
      var s;
      switch (s = a.keyCode, Y.S97(), s) {
        case 13:
          i();
          break;
        case 27:
          r.value = "";
          break;
      }
    }, !1);
  }, e.fixScreen = function () {
    var r, i, a;
    r = 1838499287, i = 1614595390, Y.V5D(), a = 2;
    for (var s = 1; Y.N(s.toString(), s.toString().length, 57478) !== r; s++) window.scrollTo(1, 1), a += 2;
    Y.Q_(a.toString(), a.toString().length, 17621) !== i && window.scrollTo(0, 0);
  }, e.setCaretPosition = function (r, i) {
    var a;
    if (r.style.zIndex = 5000, r.setSelectionRange) {
      e.focus(r);
      try {
        r.setSelectionRange(i, i);
      } catch {}
    } else r.createTextRange && (a = r.createTextRange(), a.collapse(!0), a.moveEnd("character", i), a.moveStart("character", i), a.select());
  }, e.setValueIfNotActive = function (r, i) {
    document.activeElement != r && (Y.S97(), r.value = i);
  }, e.hideKeyboard = function (r) {
    Y.S97();
    var i;
    i = document.activeElement, (i.tagName == "INPUT" || i.tagName == "TEXTAREA") && (i.blur(), window.focus(), r && (r === document.body || document.body.contains(r)) && r.focus());
  }, e.smartHover = function () {
    var r, i, a;
    if (r = "mouse", r += "over", !document || document.documentElement.hasAttribute("ciq-last-interaction")) return;
    i = !1;
    function s(l) {
      var u;
      u = "touc", u += "h", clearTimeout(a), i = !0, document.documentElement.getAttribute("ciq-last-interaction") != "touch" && o(u), a = setTimeout(function () {
        Y.V5D(), i = !1;
      }, 500);
    }
    document.addEventListener("touchend", s, !1), document.addEventListener(r, h, !1), o("");
    function o(l) {
      var u;
      u = "ciq-l", u += "ast-in", u += "teraction", document.documentElement.setAttribute(u, l);
    }
    function h(l) {
      Y.S97(), i || o("mouse");
    }
  }, e.translatableTextNode = function (r, i, a) {
    Y.S97();
    var s, o, h, l, u, c;
    if (r.translationCallback) {
      s = "o", s += "ri", s += "ginal", o = "t", o += "ra", o += "ns", o += "late", h = document.createElement(o), h.setAttribute(s, i), l = 723118327, u = -2116859905, c = 2;
      for (var d = 1; Y.N(d.toString(), d.toString().length, 67919) !== l; d++) return h.innerHTML = r.translationCallback(i, a), h;
      if (Y.N(c.toString(), c.toString().length, 38766) !== u) return h.innerHTML = r.translationCallback(i, a), h;
    }
    return document.createTextNode(i);
  }, e.climbUpDomTree = function (r, i) {
    var a;
    if (!(r instanceof HTMLElement)) return null;
    for (a = []; r;) (!i || r.matches(i)) && a.push(r), r = r.parentElement;
    return a;
  }, e.guaranteedSize = function (r) {
    var i, a, s;
    if (r === document && (r = window), !r.nodeType) return {
      width: r.innerWidth,
      height: r.innerHeight
    };
    if (Y.V5D(), !r || r.nodeType > 1) return {};
    for (i = r.offsetWidth, a = r.offsetHeight; !i || !a;) {
      if (s = "BOD", s += "Y", r.tagName === s || r === window) {
        i || (i = window.innerWidth), a || (a = window.innerHeight);
        break;
      }
      r = r.parentElement, i || (i = r.offsetWidth), a || (a = r.offsetHeight);
    }
    return {
      width: i,
      height: a
    };
  }, e.trulyVisible = function (r) {
    var i, a;
    return i = "h", i += "i", i += "dden", Y.V5D(), r ? (a = getComputedStyle(r), a.opacity === "0" || a.display === "none" || a.visibility === "hidden" || parseInt(a.width, 10) === 0 || parseInt(a.height, 10) === 0 && a.overflowY == i ? !1 : e.trulyVisible(r.parentElement)) : !0;
  }, e.elementDimensions = function (r, i) {
    var a = Y;
    a.S97();
    var s, o, h, l, u, c, d;
    if (s = "h", s += "eight", !r || r.nodeType !== 1) return {};
    o = getComputedStyle(r), h = {
      width: parseFloat(o.width),
      height: parseFloat(o.height)
    }, l = {
      margin: {},
      border: {},
      padding: {}
    }, u = ["width", s];
    for (var f in l) c = "Rig", c += "ht", d = f == "border" ? "Width" : "", l[f] = {
      width: parseFloat(o[f + "Left" + d]) + parseFloat(o[f + c + d]),
      height: parseFloat(o[f + "Top" + d]) + parseFloat(o[f + "Bottom" + d])
    };
    return i && i.margin && u.forEach(function (g) {
      h[g] += l.margin[g];
    }), i && o.boxSizing === "content-box" ? (i.padding && u.forEach(function (g) {
      h[g] += l.padding[g];
    }), i.border && u.forEach(function (g) {
      a.V5D(), h[g] += l.border[g];
    })) : o.boxSizing === "border-box" && ((!i || !i.padding) && u.forEach(function (g) {
      a.S97(), h[g] -= l.padding[g];
    }), (!i || !i.border) && u.forEach(function (g) {
      a.S97(), h[g] -= l.border[g];
    })), h;
  }, e.resizeObserver = function (r, i, a, s) {
    var o, h, l;
    if (Y.S97(), s) {
      if (typeof ResizeObserver < "u") a || (a = new ResizeObserver(i), a.observe(r));else {
        o = -2095451271, h = 1940355585, l = 2;
        for (var u = 1; Y.Q_(u.toString(), u.toString().length, 82950) !== o; u++) a && clearInterval(a), l += 2;
        Y.Q_(l.toString(), l.toString().length, 84139) !== h && a && clearInterval(a), a = setInterval(i, s);
      }
    } else a && (typeof ResizeObserver < "u" ? a.disconnect() : clearInterval(a)), a = null;
    return a;
  }, e.getLines = function (r, i, a) {
    var s, o, h, l, u, c;
    s = i.split(" "), o = [], h = "", l = 0, u = !1;
    for (var d = 0; d < s.length; d++) if (c = s[d], l = r.measureText(h + c).width, l < a ? (u && (h += " "), u = !0, h += c) : (o.push(h), h = c), d === s.length - 1) {
      o.push(h);
      break;
    }
    return o;
  }, e.alert = function (r) {
    Y.S97(), typeof window < "u" ? window.alert(r) : console.log(r);
  };
  try {
    typeof localStorage < "u" && (e.localStorage = localStorage);
  } catch {}
  e.localStorage || (e.localStorage = {
    items: {},
    getItem: function (r) {
      return e.localStorage.items[r] || null;
    },
    setItem: function (r, i) {
      var a, s, o;
      a = 1516480102, s = 793044622, o = 2;
      for (var h = 1; Y.N(h.toString(), h.toString().length, 98672) !== a; h++) e.localStorage.items[r] = i, o += 2;
      Y.N(o.toString(), o.toString().length, 26702) !== s && (e.localStorage.items[r] = i), Y.V5D(), e.localStorage.items[r] = i;
    },
    removeItem: function (r) {
      Y.S97(), delete e.localStorage.items[r];
    }
  }), e.privateBrowsingAlert = !1, e.localStorageSetItem = function (r, i) {
    try {
      e.localStorage.setItem(r, i);
    } catch {
      e.privateBrowsingAlert || (e.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."), e.privateBrowsingAlert = !0);
    }
  };
};
ua = q => {
  var e = Y,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h,
    l;
  t = "line", t += "ar", n = "d", n += "a", n += "y", r = "mi", r += "nute", i = "m", i += "i", i += "nute", a = "m", a += "in", a += "ute", s = "mon", s += "t", s += "h", e.V5D(), o = "rou", o += "n", o += "dRectArrow", h = q.CIQ, h.ChartEngine = function (u) {
    var c, d, f;
    c = "ch", c += "art", u ? typeof HTMLDivElement < "u" && u.constructor == HTMLDivElement && (d = {
      container: u
    }, u = d) : u = {
      container: null
    };
    for (var g in l) this[g] = h.clone(h.ChartEngine.prototype[g]);
    this.container = null, this.createChartPanel = !0, this.markers = {}, this.panels = {}, this.overlays = {}, this.charts = {}, this.eventListeners = [], this.controls = {}, this.goneVertical = !1, this.pinchingScreen = !1, this.grabbingScreen = !1, this.grabStartX = 0, this.grabStartY = 0, this.grabStartScrollX = 0, this.grabStartScrollY = 0, this.swipe = {}, this.grabStartCandleWidth = 0, this.grabStartZoom = 0, this.grabOverrideClick = !1, this.grabMode = "", this.vectorsShowing = !1, this.mouseMode = !0, this.lineTravelSpacing = !1, this.highlightedDataSetField = null, this.anyHighlighted = !1, this.accessoryTimer = null, this.lastAccessoryUpdate = new Date().getTime(), this.displayCrosshairs = !0, this.hrPanel = null, this.editingAnnotation = !1, this.openDialog = "", this.touches = [], this.changedTouches = [], this.crosshairTick = null, this.crosshairValue = null, this.pt = {
      x1: -1,
      x2: -1,
      y1: -1,
      y2: -1
    }, this.moveA = -1, this.moveB = -1, e.U1$(2), this.touchStartTime = -e.v9m(0, "1"), this.touchPointerType = "", this.gestureStartDistance = -1, this.grabStartPeriodicity = 1, this.grabEndPeriodicity = -1, this.scrollEvent = null, this.cmd = !1, this.ctrl = !1, this.shift = !1, this.userPointerDown = !1, this.cloneDrawing = !1, this.insideChart = !1, this.overXAxis = !1, this.overYAxis = !1, this.displayInitialized = !1, this.cx = null, this.isHistoricalModeSet = null, this.cy = null, this.clicks = {
      s1MS: -1,
      e1MS: -1,
      s2MS: -1,
      e2MS: -1
    }, this.cancelTouchSingleClick = !1, this.locale = null, this.dataZone = null, this.displayZone = null, this.timeZoneOffset = 0, this.masterData = null, this.transformDataSetPre = null, this.transformDataSetPost = null, this.dataCallback = null, this.drawingObjects = [], this.undoStamps = [], this.useBackgroundCanvas = !1, this.mainSeriesRenderer = null, this.styles = {}, this.plugins = {}, this.currentVectorParameters = h.clone(h.ChartEngine.currentVectorParameters), this.chart = new h.ChartEngine.Chart(), f = this.chart, f.name = "chart", f.yAxis.name = c, f.canvas = null, f.tempCanvas = null, f.container = u.container, h.Market && (f.market = new h.Market()), this.charts.chart = f, h.extend(this, u), u.container && (this.registerHTMLElements && this.registerHTMLElements(), f.width = f.container.clientWidth - f.yAxis.width, this.setCandleWidth(this.layout.candleWidth, f), f.canvasHeight = f.container.clientHeight), this.construct();
  }, h.ChartEngine.drawingLine = !1, h.ChartEngine.resizingPanel = null, h.ChartEngine.crosshairX = 0, h.ChartEngine.crosshairY = 0, h.ChartEngine.useAnimation = !0, h.ChartEngine.enableCaching = !1, h.ChartEngine.ignoreTouch = !1, h.ChartEngine.useOldAndroidClear = !0, h.ChartEngine.currentVectorParameters = {}, h.ChartEngine.defaultDisplayTimeZone = null, h.ChartEngine.pluginBasePath = "plugins/", h.ChartEngine.registeredContainers = [], h.ChartEngine.registerHelpers = function (u) {
    e.S97(), h.ChartEngine.helpersToRegister.forEach(function (c) {
      c(u);
    });
  }, h.ChartEngine.helpersToRegister = [], h.ChartEngine.prototype.construct = function () {
    var u;
    this.createChartPanel && (u = "char", u += "t", this.stackPanel(u, "chart", 1), this.adjustPanelPositions(), this.chart.panel = this.panels[this.chart.name]), this.cx = 0, e.X3w(22), this.cy = e.v9m("0", 0), e.U1$(83), this.micropixels = e.v9m(64, "0"), this.callbackListeners = {
      doubleTap: [],
      doubleClick: [],
      drawing: [],
      drawingEdit: [],
      floatingWindow: [],
      layout: [],
      longhold: [],
      move: [],
      newChart: [],
      notification: [],
      periodicity: [],
      preferences: [],
      rightClick: [],
      scroll: [],
      studyOverlayEdit: [],
      studyPanelEdit: [],
      symbolChange: [],
      symbolImport: [],
      tap: [],
      theme: [],
      undoStamp: []
    }, h.ChartEngine.registerHelpers(this);
  }, l = {
    longHoldTime: 700,
    yTolerance: 100,
    minimumLeftBars: 1,
    reverseMouseWheel: !1,
    mouseWheelAcceleration: !0,
    minimumCandleWidth: 1,
    maximumCandleWidth: 200,
    minimumZoomTicks: 9,
    allowZoom: !0,
    allowScroll: !0,
    allowSideswipe: !0,
    allowThreeFingerTouch: !1,
    bypassRightClick: {
      series: !1,
      study: !1,
      drawing: !1
    },
    adjustHighlightedDataSetField: function (u) {
      return e.V5D(), u;
    },
    displayIconsUpDown: !0,
    displayIconsSolo: !0,
    displayIconsClose: !0,
    displayPanelResize: !0,
    soloPanelToFullScreen: !1,
    markerDelay: null,
    useBackingStore: !0,
    disableBackingStoreDuringTouch: h.isMobile || h.isSurface && h.isFF,
    captureTouchEvents: !0,
    captureMouseWheelEvents: !0,
    tapForHighlighting: !0,
    doubleClickTime: 250,
    yaxisLabelStyle: o,
    axisBorders: null,
    singleDrawingHighlight: !0,
    crosshairXOffset: -40,
    crosshairYOffset: -40,
    extendLastTick: !1,
    translationCallback: null,
    dontRoll: !1,
    allowEquations: !0,
    cleanupGaps: !1,
    staticRange: !1,
    maxDataSetSize: 20000,
    maxMasterDataSize: 0,
    resizeDetectMS: 1000,
    xAxisAsFooter: !0,
    xaxisHeight: 30,
    displayGridLinesInStudies: !1,
    escapeOnSerialize: !0,
    candleWidthPercent: +"0.65",
    colorByCandleDirection: !1,
    noWicksOnCandles: {
      renko: !0,
      linebreak: !0
    },
    fetchMaximumBars: {
      rangebars: !0,
      kagi: !0,
      renko: !0,
      linebreak: !0,
      pandf: !0
    },
    startComparisonsAtFirstVisibleBar: !1,
    animations: {
      zoom: {
        isStub: !0,
        run: function (u, c, d) {
          e.S97(), u(d);
        },
        stop: function () {},
        reset: function () {},
        running: !1,
        hasCompleted: !0
      }
    },
    staticRangePeriodicityMap: [{
      rangeInMS: h.WEEK,
      periodicity: 1,
      interval: 5,
      timeUnit: "minute"
    }, {
      rangeInMS: h.MONTH,
      periodicity: 1,
      interval: 30,
      timeUnit: "minute"
    }, {
      rangeInMS: h.YEAR,
      periodicity: 1,
      interval: "day"
    }, {
      rangeInMS: h.DECADE,
      periodicity: 1,
      interval: "week"
    }, {
      rangeInMS: h.DECADE * 10,
      periodicity: 1,
      interval: "month"
    }, {
      rangeInMS: Number.MAX_VALUE,
      periodicity: 12,
      interval: s
    }],
    dynamicRangePeriodicityMap: [{
      interval: 1,
      timeUnit: a,
      rangeInMS: h.MINUTE
    }, {
      interval: 5,
      timeUnit: "minute",
      rangeInMS: h.MINUTE * 5
    }, {
      interval: 30,
      timeUnit: i,
      rangeInMS: h.MINUTE * 30
    }, {
      interval: 60,
      timeUnit: r,
      rangeInMS: h.MINUTE * 60
    }, {
      interval: "day",
      rangeInMS: h.DAY
    }, {
      interval: "month",
      rangeInMS: h.MONTH
    }, {
      interval: "year",
      rangeInMS: h.YEAR
    }],
    layout: {
      interval: n,
      periodicity: 1,
      timeUnit: null,
      candleWidth: 8,
      flipped: !1,
      volumeUnderlay: !1,
      adj: !0,
      crosshair: !1,
      chartType: "candle",
      extended: !1,
      marketSessions: {},
      aggregationType: "ohlc",
      chartScale: t,
      studies: {},
      panels: {},
      setSpan: {},
      outliers: !1
    },
    preferences: {
      currentPriceLine: !1,
      dragging: {
        series: !0,
        study: !0,
        yaxis: !0
      },
      drawings: null,
      highlightsRadius: 10,
      highlightsTapRadius: 30,
      magnet: !1,
      horizontalCrosshairField: null,
      labels: !0,
      language: null,
      timeZone: null,
      whitespace: 50,
      zoomInSpeed: null,
      zoomOutSpeed: null,
      zoomAtCurrentMousePosition: !1
    },
    streamParameters: {
      count: 0,
      maxWait: 1000,
      maxTicks: 100,
      timeout: -1
    },
    autoPickCandleWidth: {
      turnOn: !1,
      candleWidth: 5
    }
  }, h.extend(h.ChartEngine.prototype, l), h.ChartEngine.NONE = 0, h.ChartEngine.CLOSEUP = 1, e.X3w(2), h.ChartEngine.CLOSEDOWN = e.v9m(0, "2"), h.ChartEngine.CLOSEEVEN = 4, h.ChartEngine.CANDLEUP = 8, h.ChartEngine.CANDLEDOWN = 16, h.ChartEngine.CANDLEEVEN = 32;
};
ca = q => {
  var e;
  e = q.CIQ, e.convertFutureMonth = function (t) {
    var n, r, i;
    if (n = "1", n += "0", r = t.toString(), r.length <= 0 || r.length > 2) return "";
    switch (r) {
      case "1":
        return "F";
      case "2":
        return "G";
      case "3":
        return "H";
      case "4":
        return "J";
      case "5":
        return "K";
      case "6":
        return "M";
      case "7":
        return "N";
      case "8":
        return "Q";
      case "9":
        return "U";
      case n:
        return "V";
      case "11":
        return "X";
      case "12":
        return "Z";
      case "F":
        return "1";
      case "G":
        return "2";
      case "H":
        return "3";
      case "J":
        return "4";
      case "K":
        return "5";
      case "M":
        return "6";
      case "N":
        return "7";
      case "Q":
        return "8";
      case "U":
        return "9";
      case "V":
        return "10";
      case "X":
        return i = "1", i += "1", i;
      case "Z":
        return "12";
    }
    return r;
  }, e.money = function (t, n, r) {
    return r || (r = "$"), r.length == 3 && (r += " "), !n && n !== 0 && (n = 2), r + e.commas((Math.round(t * 10000) / 10000).toFixed(n));
  }, e.convertCurrencyCode = function (t) {
    var n, r, i, a, s, o, h;
    return n = "C", n += "F", n += "A", r = "S", r += "$", i = "\u0440", i += "\u0443", i += "\u0431", a = "F", a += "t", s = "k", s += "r", o = {
      JPY: "\xA5",
      USD: "$",
      AUD: "A$",
      BRL: "R$",
      CAD: "CA$",
      CNY: "CN\xA5",
      CZK: "K\u010D",
      DKK: s,
      EUR: "\u20AC",
      GBP: "\xA3",
      HKD: "HK$",
      HUF: a,
      ILS: "\u20AA",
      INR: "\u20B9",
      KRW: "\u20A9",
      MXN: "MX$",
      NOK: "kr",
      NZD: "NZ$",
      PLN: "z\u0142",
      RUB: i,
      SAR: "\uFDFC",
      SEK: "kr",
      SGD: r,
      THB: "\u0E3F",
      TRY: "\u20BA",
      TWD: "NT$",
      VND: "\u20AB",
      XAF: "FCFA",
      XCD: "EC$",
      XOF: n,
      XPF: "CFPF",
      ZAR: "R"
    }, h = o[t], h || t;
  }, e.commas = function (t) {
    return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }, e.cleanPeriodicity = function (t, n, r) {
    var i = Y,
      a,
      s,
      o;
    return a = "ti", a += "c", a += "k", isNaN(t) && (i.U1$(22), t = i.b3p("1", 1)), n || (i.U1$(0), n = i.v9m("1", 1)), !isNaN(n) && r ? (s = "s", s += "e", s += "c", s += "ond", r == "hour" || r == "minute" || r == s || r == "millisecond" || (n = r, r = null)) : n == a ? r = null : !r && !isNaN(n) && (r = "minute"), r == "hour" && (r = "minute", i.X3w(0), n = i.v9m(n, 60)), n == "year" && (o = "m", o += "on", o += "t", o += "h", n = o, t || (i.U1$(2), t = i.v9m(0, "1")), i.U1$(0), t = i.b3p(t, 12)), {
      period: t,
      interval: n,
      timeUnit: r
    };
  }, e.readablePeriodicity = function (t) {
    var n, r, i, a;
    return n = "num", n += "be", n += "r", r = t.layout.periodicity, i = t.layout.interval, typeof t.layout.interval == "number" && t.layout.timeUnit ? (r = t.layout.interval * t.layout.periodicity, i = t.layout.timeUnit) : typeof t.layout.interval == n && !t.layout.timeUnit && (a = "m", a += "i", a += "nu", a += "te", r = t.layout.interval * t.layout.periodicity, i = a), r % 60 === 0 && i == "minute" && (r /= 60, i = "hour"), Y.U1$(8), Y.S97(), Y.v9m(2, 9098), r + " " + t.translateIf(e.capitalize(i));
  }, e.fixPrice = function (t) {
    var n = Y,
      r,
      i,
      a,
      s;
    if (!t && t !== 0) return null;
    r = 1002077401, n.X3w(22), i = n.v9m("1693656659", 3), a = 2;
    for (var o = 1; n.Q_(o.toString(), o.toString().length, 1828) !== r; o++) s = t.toFixed(42), a += 2;
    n.N(a.toString(), a.toString().length, 91366) !== i && (s = t.toFixed(10));
    for (var h = s.length - 1; h > 1 && s.charAt(h) == "0"; h--);
    return n.X3w(53), n.S97(), s = s.substring(n.b3p(32, "0"), n.v9m(1, h, n.X3w(8))), parseFloat(s);
  }, e.condenseInt = function (t) {
    var n = Y,
      r,
      i;
    if (r = "undef", r += "i", r += "ned", t === null || typeof t == r) return "";
    if (n.S97(), t === Infinity || t === -1 / 0) return "n/a";
    if (n.X3w(84), i = n.v9m(t, 0), isNaN(t)) t = t.toString();else if (t = Math.abs(t), t > 1000000000000) {
      n.X3w(8);
      var a = n.b3p(9, 1);
      n.X3w(25);
      var s = n.b3p(13, 7142, 5);
      n.X3w(36);
      var o = n.v9m(21, 19, 9368, 1);
      n.U1$(82), n.b3p(14, 9, 104100, 104086, 6931), n.U1$(2), n.b3p(11, 6954), n.U1$(85), n.v9m(14, 2941, 153, 15), t = Math.round(t / 100000000000) / a + (s < o ? "t" : "c");
    } else if (t > 100000000000) {
      n.U1$(14);
      var h = n.v9m(1000000002, 26, 8, 14, 2);
      n.U1$(43), n.v9m(14, 4, 2562), n.X3w(86);
      var l = n.v9m(5, 3815, 422, 15);
      n.U1$(87), n.b3p(134998, 134980, 11, 18, 7929), n.X3w(43), n.b3p(18, 105, 8), n.U1$(88);
      var u = n.v9m(1693, 23427, 7, 18, 15);
      n.U1$(68), n.b3p(2527, 3377, 1, 4, 9), n.U1$(8), n.v9m(4, 0), n.U1$(62);
      var c = n.b3p(6368, 18, 572324, 5);
      n.X3w(25);
      var d = n.b3p(4, 25340, 21724);
      n.U1$(28);
      var f = n.v9m(1886, 1900, 475);
      n.X3w(89);
      var g = n.b3p(44417, 18, 47070, 20);
      t = Math.round(t / h) + (l !== 662.74 ? "b" : u >= 1120 ? 419.83 >= c ? d : f : g);
    } else if (t > 10000000000) {
      n.U1$(90);
      var p = n.v9m(18, 12, 4, 11, 16);
      t = (Math.round(t / 100000000) / 10).toFixed(p) + "b";
    } else if (t > 1000000000) {
      n.X3w(54);
      var m = n.b3p(2, 97, 32, 17);
      n.U1$(8);
      var x = n.v9m(20, 5020);
      n.U1$(2), n.b3p(14, 15), t = (Math.round(t / 10000000) / 100).toFixed("2" << m) + (x != 162.11 ? "b" : 203.17);
    } else if (t > 100000000) {
      n.U1$(16);
      var y = n.v9m(4, 333333, 666671);
      t = Math.round(t / y) + "m";
    } else if (t > 10000000) {
      n.X3w(91);
      var b = n.v9m(1, 5, 7, 3);
      n.U1$(2), n.v9m(3776, 4720), n.U1$(2);
      var C = n.v9m(14, 2334);
      n.U1$(8);
      var k = n.b3p(7, 810);
      n.U1$(2);
      var M = n.b3p(34500, 41400);
      n.X3w(56);
      var I = n.b3p(19, 4555, 4551, 4555);
      n.X3w(28), n.v9m(4755, 4776, 1592), t = (Math.round(t / 100000) / 10).toFixed(b) + (C == 661.49 ? 810.52 > k ? M : I === 8380 ? +"0x22d9" : 538.82 : "m");
    } else if (t > 1000000) {
      n.U1$(63);
      var v = n.b3p(20, 0, 22, 4);
      t = (Math.round(t / 10000) / 100).toFixed(v) + "m";
    } else if (t > 100000) {
      n.X3w(92);
      var S = n.v9m(13, 167, 2011, 8, 18);
      n.X3w(93), n.v9m(9589, 3, 6), n.U1$(2);
      var w = n.v9m(151040, 160480);
      n.U1$(16), n.b3p(6, 1907, 4), n.U1$(8);
      var T = n.v9m(3837, 640);
      n.X3w(92);
      var D = n.b3p(3, 2833, 33974, 13, 13);
      n.U1$(28), n.b3p(1282, 25800, 3225), n.X3w(2);
      var F = n.v9m(640, 704);
      n.X3w(16), n.v9m(4, 43, 557), n.X3w(2);
      var P = n.b3p(16, 6593);
      n.U1$(8);
      var _ = n.b3p(8882, 808);
      n.U1$(62);
      var V = n.b3p(96, 12, 19096, 18);
      t = Math.round(t / S) + (w == 558.99 ? !1 : T != D ? "k" : "7620" << F >= P ? _ : V);
    } else if (t > 10000) {
      n.X3w(90);
      var A = n.v9m(6, 8, 12, 0, 3);
      n.U1$(25), n.b3p(19, 794, 2), n.U1$(94), n.b3p(14, 630, 633, 647), t = (Math.round(t / 100) / 10).toFixed(A) + "k";
    } else if (t > 1000) {
      n.X3w(1);
      var E = n.b3p(20, 5360, 1344, 4);
      n.U1$(95);
      var L = n.v9m(4, 10, 14, 0);
      t = (Math.round(t / 10) / 100).toFixed("2" >> E) + ("158.67" * L !== 94.03 ? "k" : 622);
    } else t = t.toString();
    return i && (n.U1$(8), t = n.v9m(t, "-")), t;
  }, e.calculateTradingDecimalPlaces = function (t) {
    var n = Y,
      r,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d;
    if (r = t.chart, n.X3w(23), i = n.b3p(0, "2"), a = 50, s = r.masterData, s && s.length > a) {
      for (var f = 2; f < a && (o = s.length - f, !(o < 0)); f++) if (h = s[o], h.Close && typeof h.Close == "number" && (l = h.Close.toString(), u = l.indexOf("."), u != -1)) {
        n.U1$(8);
        var g = n.v9m(1, 0);
        c = l.length - u - g, c > i && (i = c);
      }
    }
    return d = r.yAxis.maxDecimalPlaces, i > d && d !== null && (i = d), i;
  }, e.minMax = function (t, n, r, i) {
    var a, s, o, h, l, u, c, d, f;
    a = "C", a += "lo", a += "s", a += "e", s = Number.MAX_VALUE, Y.U1$(96), Y.S97();
    var g = Y.b3p(11, 3, 5, 331, 18);
    o = Number.MAX_VALUE * g, r || (r = a), h = i ? "High" : r, l = i ? "Low" : r;
    for (var p = 0; p < t.length; p++) u = "ob", u += "je", u += "c", u += "t", c = t[p], c && (d = c[n], !(!d && d !== 0) && (f = d, typeof d == "object" && (f = d[h]), !isNaN(f) && (f || f === 0) && (o = Math.max(o, f)), typeof d === u && (f = d[l]), !isNaN(f) && (f || f === 0) && (s = Math.min(s, f))));
    return [s, o];
  }, e.symbolEqual = function (t, n) {
    var r, i, a, s;
    return r = "obj", r += "e", r += "c", r += "t", i = "objec", i += "t", !t || !n ? !1 : (typeof t != i && (t = {
      symbol: t
    }), typeof n != r && (n = {
      symbol: n
    }), typeof t.equals == "function" ? t.equals(n) : (a = t.symbol, s = n.symbol, a && (a = a.toUpperCase()), s && (s = s.toUpperCase()), !(a != s || t.source != n.source)));
  }, e.addMemberToMasterdata = function (t) {
    var n = Y;
    n.S97();
    var r, i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w;
    t.constructor === e.ChartEngine && (t = {
      stx: arguments[0],
      label: arguments[1],
      data: arguments[2],
      fields: arguments[3],
      createObject: arguments[4],
      fieldForLabel: arguments[5]
    }), r = t.stx, i = t.label, a = t.data, s = t.fields, o = t.createObject;
    function T(A) {
      var E, L, N;
      E = c, n.U1$(93);
      var U = n.v9m(12, 8, 3);
      if (L = f.length - U, f[L].DT < A) {
        n.X3w(8), c = n.v9m(1, L);
        return;
      } else if (+f[L].DT == +A) {
        c = L;
        return;
      }
      n.S97();
      function B() {
        return +f[c].DT == +A ? 0 : f[c].DT < A ? 1 : f[c - 1].DT > A ? -1 : (+f[c - 1].DT == +A && c--, 0);
      }
      for (c++, N = 0; ++N < 100;) {
        switch (B()) {
          case 0:
            return;
          case 1:
            E = c;
            break;
          case -1:
            L = c;
            break;
        }
        n.U1$(35), c = Math.round(n.v9m(E, L, 2));
      }
      if (N >= 100) {
        console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."), n.X3w(97);
        var O = n.b3p(14, 18, 3);
        c = f.length - O;
      }
    }
    if (h = t.fieldForLabel, l = t.chart ? t.chart : r.chart, t.noCleanupDates || r.doCleanupDates(a, r.layout.interval), u = [], r.getSeries && (u = r.getSeries({
      symbol: i,
      chart: l
    })), a && a.constructor == Object && (a = [a]), !a || !a.length) return;
    c = 0, n.U1$(23), d = n.b3p(0, "0"), f = l.masterData, g = r.layout, f || (f = []), x = l && l.defaultPlotField || null, y = r.mainSeriesRenderer && !r.mainSeriesRenderer.highLowBars;
    function D(A, E) {
      var L, N;
      if (!A || typeof A != "object") return A = E, A;
      L = {
        Close: A.Close,
        High: A.High,
        Low: A.Low,
        Open: A.Open,
        Volume: A.Volume
      }, A = E, n.V5D();
      for (var U in L) A.Close === null ? A[U] !== void 0 && (A[U] = null) : typeof A[U] != "number" ? A[U] = L[U] : typeof L[U] == "number" && (N = "H", N += "i", N += "g", N += "h", U == "Open" ? A.Open = L.Open : U == "Low" && A.Low > L.Low ? A.Low = L.Low : U == N && A.High < L.High ? A.High = L.High : U == "Volume" && (A.Volume += L.Volume));
      return A;
    }
    for (b = g.chartType, !y && b && (C = e.Renderer.produce(b, {}), C && (y = !C.highLowBars)), k = e.yyyymmddhhmmssmmm; a && c < f.length && d < a.length;) {
      if (M = "un", M += "defi", M += "ned", m = a[d], p = f[c], !m.DT || typeof m.DT == M ? m.DT = e.strToDateTime(m.Date) : (I = "nu", I += "mber", typeof m.DT == I && (m.DT = new Date(m.DT)), (!m.Date || m.Date.length != 17) && (m.Date = k(m.DT))), d === 0) for (var F = 0; F < u.length; F++) (!u[F].endPoints.begin || u[F].endPoints.begin > m.DT) && (u[F].endPoints.begin = m.DT);
      if (+m.DT == +p.DT) {
        V(p, m), d++, c++;
        continue;
      }
      if (m.DT < p.DT) {
        f.splice(c, 0, {
          DT: m.DT,
          Date: m.Date
        });
        continue;
      } else T(m.DT);
    }
    if (c >= f.length) for (; a && d < a.length;) m = a[d], !m.DT || typeof m.DT > "u" ? m.DT = e.strToDateTime(m.Date) : (typeof m.DT == "number" && (m.DT = new Date(m.DT)), (!m.Date || m.Date.length != 17) && (m.Date = k(m.DT))), p = {
      DT: m.DT,
      Date: m.Date
    }, V(p, m), f.push(p), d++;
    if (t.fillGaps && f.length) if (v = {
      noCleanupDates: !0,
      cleanupGaps: t.fillGaps
    }, s) for (var P = 0; P < s.length; P++) v.field = s[P], r.doCleanupGaps(f, l, v);else v.field = i, r.doCleanupGaps(f, l, v);
    for (var _ = 0; _ < u.length; _++) S = u[_].endPoints, (!S.end || !i || S.end <= p[i].DT) && (S.end = i ? p[i].DT : p.DT, w = i || u[_].parameters && u[_].parameters.field || l.defaultPlotField, u[_].lastQuote = r.getFirstLastDataRecord(f, w, !0));
    r.setMasterData(f, l, {
      noCleanupDates: !0
    });
    function V(A, E) {
      var L, N, U, B, O, R, H, z;
      if (n.V5D(), s && s.length) {
        if (s[0] == "*") e.extend(A, E);else for (var W = 0; W < s.length; W++) A[s[W]] = E[s[W]];
      } else if (o) {
        if (L = "a", L += "ggreg", L += "ate", E.Value !== void 0) {
          A[i] = E.Value;
          return;
        } else o == L ? A[i] = D(A[i], E) : A[i] = E;
        N = A[i], typeof N.Close == "number" && (U = "nu", U += "m", U += "ber", typeof N.Open != "number" && (N.Open = N.Close), B = Math.max(N.Open, N.Close), O = Math.min(N.Open, N.Close), (typeof N.High != U || N.High < B) && (N.High = B), (typeof N.Low != "number" || N.Low > O) && (N.Low = O)), N.Volume && typeof N.Volume != "number" && (N.Volume = parseInt(N.Volume, 10));
      } else if (h) {
        R = 1344490992, H = -1847364917, z = 2;
        for (var G = 1; n.Q_(G.toString(), G.toString().length, 32405) !== R; G++) A[i] = E[h], z += 2;
        n.Q_(z.toString(), z.toString().length, 19334) !== H && (A[i] = E[h]);
      } else y && x && E[x] !== void 0 ? A[i] = E[x] : g.adj && E.Adj_Close !== void 0 ? A[i] = E.Adj_Close : E.Close !== void 0 ? A[i] = E.Close : E.Value !== void 0 ? A[i] = E.Value : A[i] = E[i];
    }
  };
};
da = q => {
  var e = Y,
    t;
  t = q.CIQ, Math.easeInOutQuad = function (n, r, i, a) {
    return e.U1$(31), n /= e.v9m(2, a), n < 1 ? (e.X3w(98), e.v9m(i, 2, n, r, n)) : (n--, e.U1$(99), e.v9m(n, 1, 2, r, i, 2, n));
  }, Math.easeInOutCubic = function (n, r, i, a) {
    return e.U1$(100), n /= e.b3p("2", a), n < 1 ? (e.X3w(101), e.b3p(2, r, i, n, n, n)) : (n -= 2, e.X3w(102), e.v9m(2, n, i, n, r, 2, n));
  }, Math.easeOutCubic = function (n, r, i, a) {
    return n /= a, n--, e.U1$(103), e.b3p(n, n, i, 1, r, n);
  }, t.xor = function (n, r) {
    var i, a;
    return e.V5D(), i = !n, a = !r, e.X3w(104), e.v9m(i, a);
  }, e.V5D(), t.round = function (n, r) {
    return +(Math.round(n + "e" + r) + "e-" + r);
  }, t.countDecimals = function (n) {
    var r;
    if (typeof n != "number" || isNaN(n) || Math.floor(n) === Number(n)) return 0;
    if (r = n.toString().split("e-"), r.length > 1) {
      e.X3w(9);
      var i = e.v9m(16, 15);
      e.X3w(105);
      var a = e.v9m(20, 308, 9, 0, 15);
      return t.countDecimals(Number(r["0" * i])) + Number(r[a]);
    }
    return r[0].indexOf(".") > -1 ? r[0].split(".")[1].length : (e.V5D(), 0);
  }, t.isValidNumber = function (n) {
    return isFinite(n) && +n === n;
  }, t.log10 = function (n) {
    return e.V5D(), Math.log(n) / Math.LN10;
  }, t.boxIntersects = function (n, r, i, a, s, o, h, l, u) {
    var c, d, f, g, p, m, x, y, b, C, k;
    c = "l", c += "i", c += "n", c += "e", d = "r", d += "a", d += "y", arguments[9] !== void 0 && console.warn("CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are passed in as pixels."), f = Math.min(n, i);
    function M(v, S) {
      return e.V5D(), e.U1$(106), e.v9m(s, h, l, v, o, S, o, s);
    }
    g = Math.max(n, i), p = Math.min(r, a), m = Math.max(r, a), e.U1$(107), x = e.v9m(d, u), y = 1755917211, b = 1886747757, C = 2;
    for (var I = 1; e.N(I.toString(), I.toString().length, 26106) !== y; I++) {
      if (isNaN(s) || isNaN(h) || isNaN(o) || isNaN(l)) return !1;
      C += 2;
    }
    return e.N(C.toString(), C.toString().length, 73551) !== b && isNaN(s) && isNaN(h) && isNaN(o) && isNaN(l) ? !0 : !(u != c && (s < f && h < f && (!x || s > h) || s > g && h > g && (!x || s < h) || o < p && l < p && (!x || o > l) || o > m && l > m && (!x || o < l)) || (k = {
      a: M(n, r),
      b: M(n, a),
      c: M(i, r),
      d: M(i, a)
    }, e.S97(), k.a > 0 && k.b > 0 && k.c > 0 && k.d > 0) || k.a < 0 && k.b < 0 && k.c < 0 && k.d < 0);
  }, t.linesIntersect = function (n, r, i, a, s, o, h, l, u) {
    var c, d, f, g, p;
    if (e.X3w(106), c = e.b3p(n, r, a, o, h, l, i, s), e.U1$(106), d = e.b3p(h, i, n, l, s, o, s, h), e.X3w(106), f = e.b3p(h, i, n, a, n, r, s, i), c === 0) return d === 0 && f === 0;
    if (e.X3w(31), g = e.v9m(c, d), e.X3w(31), p = e.v9m(c, f), u == "segment") {
      if (g >= 0 && g <= 1 && p >= 0 && p <= 1) return !0;
    } else if (u == "line" || u == "horizontal" || u == "vertical") {
      if (g >= 0 && g <= 1) return !0;
    } else if (u == "ray" && g >= 0 && g <= 1 && p >= 0) return !0;
    return !1;
  }, t.yIntersection = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p;
    if (i = n.x0, a = n.x1, s = r, o = r, h = n.y0, l = n.y1, u = 0, c = 10000, e.U1$(106), d = e.b3p(i, a, l, o, u, c, h, s), e.U1$(106), f = e.v9m(u, h, i, c, s, o, s, u), e.X3w(31), g = e.b3p(d, f), d === 0) if (f === 0) e.X3w(53), g = e.b3p(0, "1");else return null;
    return e.U1$(108), p = e.v9m(h, h, l, g), p;
  }, t.xIntersection = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y;
    if (i = n.x0, a = n.x1, s = 0, o = 10000, h = n.y0, l = n.y1, u = r, c = r, e.X3w(106), d = e.b3p(i, a, l, o, u, c, h, s), e.X3w(106), f = e.v9m(u, h, i, c, s, o, s, u), e.X3w(31), g = e.v9m(d, f), d === 0) {
      p = 1016141813, m = -223733480, x = 2;
      for (var b = 1; e.Q_(b.toString(), b.toString().length, 85024) !== p; b++) {
        if (f !== 1) g = 0;else return 1;
        x += 2;
      }
      if (e.Q_(x.toString(), x.toString().length, 15713) !== m) if (f !== 1) e.X3w(0), g = e.v9m("0", 1);else return 1;
      if (f === 0) g = 1;else return null;
    }
    return e.X3w(108), y = e.v9m(i, i, a, g), y;
  }, t.intersectLineLineX = function (n, r, i, a, s, o, h, l) {
    var u, c, d;
    return e.U1$(106), u = e.b3p(h, i, n, l, s, o, s, h), e.X3w(106), c = e.b3p(n, r, a, o, h, l, i, s), e.U1$(31), d = e.v9m(c, u), e.V5D(), e.U1$(108), e.v9m(n, n, r, d);
  }, t.intersectLineLineY = function (n, r, i, a, s, o, h, l) {
    var u, c, d;
    return e.V5D(), e.U1$(106), u = e.v9m(h, i, n, l, s, o, s, h), e.U1$(106), c = e.b3p(n, r, a, o, h, l, i, s), e.U1$(31), d = e.v9m(c, u), e.U1$(108), e.v9m(i, i, a, d);
  };
};
fa = q => {
  var e = Y,
    t;
  t = q.CIQ, t.deleteRHS = function (n, r) {
    var i;
    i = !1, e.S97();
    for (var a in n) n[a] == r && (delete n[a], i = !0);
    return i;
  }, t.scrub = function (n, r) {
    e.V5D();
    for (var i in n) typeof n[i] > "u" && delete n[i], r && n[i] === null && delete n[i];
  }, e.S97(), t.dataBindSafeAssignment = function (n, r) {
    t.extend(n, r);
    for (var i in n) typeof r[i] > "u" && (n[i] = void 0);
  }, t.clone = function (n, r) {
    var i, a;
    if (i = "obj", i += "ec", e.S97(), i += "t", n === null || typeof n != i) return n;
    if (a = n.constructor, a == Date || a == RegExp || a == String || a == Number || a == Boolean) return new a(n.valueOf());
    if (a == Function) return function () {
      return e.S97(), n.apply(this, arguments);
    };
    if (!r) try {
      r = new a();
    } catch {
      r = Object.create(Object.getPrototypeOf(n));
    }
    for (var s in n) r[s] = r[s] !== n[s] ? t.clone(n[s], null) : r[s];
    return r;
  }, t.shallowClone = function (n) {
    var r;
    if (!n) return n;
    if (n.constructor == Array) {
      r = new Array(n.length);
      for (var i = 0; i < n.length; i++) r[i] = n[i];
      return r;
    }
    r = {};
    for (var a in n) r[a] = n[a];
    return r;
  }, t.ensureDefaults = function (n, r) {
    e.S97();
    for (var i in r) typeof n[i] > "u" && (n[i] = r[i]);
    return n;
  }, t.transferObject = function (n, r) {
    var i;
    for (i in n) n.hasOwnProperty(i) && delete n[i];
    for (i in r) r.hasOwnProperty(i) && (n[i] = r[i]);
    return n;
  }, t.equals = function (n, r, i) {
    var a;
    if (!n && r || n && !r || typeof n != typeof r) return !1;
    for (var s in n) if (!(i && i[s])) {
      if (typeof n[s] == "object") {
        if (a = t.equals(n[s], r[s]), !a) return !1;
        continue;
      }
      if (r[s] != n[s]) return !1;
    }
    return !0;
  }, t.isEmpty = function (n) {
    e.S97();
    for (var r in n) if (n.hasOwnProperty(r)) return !1;
    return !0;
  }, t.first = function (n) {
    for (var r in n) return r;
    return e.V5D(), null;
  }, t.last = function (n) {
    var r;
    r = null;
    for (var i in n) r = i;
    return r;
  }, t.objLength = function (n) {
    var r;
    if (!n) return 0;
    r = 0;
    for (var i in n) r++;
    return r;
  }, t.deriveFromObjectChain = function (n, r) {
    var i, a;
    if (r.indexOf(".") == -1) return {
      obj: n,
      member: r
    };
    i = r.split("."), e.S97();
    for (var s = 0; s < i.length - 1; s++) a = i[s], !n[a] && n[a] !== 0 && (n[a] = {}), n = n[a];
    return {
      obj: n,
      member: i[s]
    };
  }, t.createObjectChainNames = function (n, r) {
    var i;
    i = [];
    for (var a = 0; a < r.length; a++) i.push(n + "-->" + r[a]);
    return i;
  }, t.existsInObjectChain = function (n, r) {
    var i, a, s;
    if (i = "-", i += "-", i += ">", e.S97(), r.indexOf("-->") == -1) return !n[r] && n[r] !== 0 ? null : {
      obj: n,
      member: r
    };
    a = r.split(i);
    for (var o = 0; o < a.length - 1; o++) {
      if (s = a[o], !n[s] && n[s] !== 0) return null;
      n = n[s];
    }
    return s = a[o], !n[s] && n[s] !== 0 ? null : {
      obj: n,
      member: s
    };
  }, t.derivedFrom = function (n, r) {
    return r.isPrototypeOf(n) || n instanceof r ? !0 : (e.V5D(), !1);
  }, t.replaceFields = function (n, r) {
    var i, a, s, o, h;
    if (!n) return n;
    i = {};
    for (var l in n) if (a = n[l], s = r[l], s || (s = l), a && typeof a == "object") {
      if (a.constructor == Array) {
        o = i[s] = new Array(a.length);
        for (var u = 0; u < o.length; u++) h = a[u], typeof h == "object" ? o[u] = t.replaceFields(h, r) : o[u] = h;
      } else i[s] = t.replaceFields(a, r);
    } else i[s] = a;
    return i;
  }, t.removeNullValues = function (n) {
    var r;
    r = t.clone(n);
    for (var i in r) r[i] || delete r[i];
    return r;
  }, t.reverseObject = function (n) {
    var r;
    r = {};
    for (var i in n) r[n[i]] = i;
    return r;
  }, t.getFromNS = (n, r, i) => {
    var a, s, o, h, l, u;
    if (n) {
      a = n, s = r.split(".");
      for (var c = 0; c < s.length && (o = s[c], !(typeof a[o] > "u")); c++) a = a[o];
      if (c === s.length) return a;
    }
    h = -1063027959, l = -873572145, u = 2;
    for (var d = 1; e.Q_(d.toString(), d.toString().length, 71320) !== h; d++) return;
    if (e.N(u.toString(), u.toString().length, 99578) === l) return i;
  }, t.getFnFromNS = (n, r, i) => (e.S97(), t.getFromNS(n, r, function () {
    return e.V5D(), i;
  })), t.get = (n, r) => t.getFromNS(t, n, r), t.getFn = (n, r) => t.getFromNS(t, n, function () {
    return e.V5D(), r;
  });
};
fs = q => {
  var e = Y;
  e.S97();
  var t;
  t = q.CIQ, t.Plotter = function () {
    this.seriesArray = [], this.seriesMap = {};
  }, t.extend(t.Plotter.prototype, {
    Series: function (n, r, i, a, s, o) {
      var h, l, u;
      this.name = n, this.strokeOrFill = r, this.color = i, this.moves = [], this.text = [], (!a || a > 1 || a < 0) && (a = 1), this.opacity = a, (!s || s > 25 || s < 1) && (s = 1), this.width = s, h = 1968165907, l = -1170214510, u = 2;
      for (var c = 1; e.N(c.toString(), c.toString().length, 63425) !== h; c++) this.pattern = t.borderPatternToArray(s, o), u += 2;
      e.N(u.toString(), u.toString().length, 41924) !== l && (this.pattern = t.borderPatternToArray(s, o));
    },
    newSeries: function (n, r, i, a, s) {
      var o;
      i.constructor == String ? o = new this.Series(n, r, i, a, s) : o = new this.Series(n, r, i.color, i.opacity, s >= 0 ? s : t.stripPX(i.width), i.borderTopStyle), this.seriesArray.push(o), this.seriesMap[n] = o;
    },
    reset: function (n) {
      var r;
      e.V5D();
      for (var i in this.seriesMap) n && n != i || (r = this.seriesMap[i], r && (r.moves = [], r.text = []));
    },
    moveTo: function (n, r, i) {
      var a;
      e.V5D(), a = this.seriesMap[n], a.moves.push({
        action: "moveTo",
        x: r,
        y: i
      });
    },
    lineTo: function (n, r, i) {
      var a, s;
      a = this.seriesMap[n], s = a.pattern, a.moves.push({
        action: "lineTo",
        x: r,
        y: i,
        pattern: s
      });
    },
    dashedLineTo: function (n, r, i, a) {
      var s, o;
      s = "l", s += "i", s += "n", e.V5D(), s += "eTo", o = this.seriesMap[n], o.moves.push({
        action: s,
        x: r,
        y: i,
        pattern: a
      });
    },
    quadraticCurveTo: function (n, r, i, a, s) {
      var o, h;
      o = this.seriesMap[n], h = o.pattern, e.V5D(), o.moves.push({
        action: "quadraticCurveTo",
        x0: r,
        y0: i,
        x: a,
        y: s,
        pattern: h
      });
    },
    bezierCurveTo: function (n, r, i, a, s, o, h) {
      var l, u;
      l = this.seriesMap[n], u = l.pattern, e.S97(), l.moves.push({
        action: "bezierCurveTo",
        x0: r,
        y0: i,
        x1: a,
        y1: s,
        x: o,
        y: h,
        pattern: u
      });
    },
    addText: function (n, r, i, a, s, o, h) {
      var l;
      l = this.seriesMap[n], l.text.push({
        text: r,
        x: i,
        y: a,
        bg: s
      });
    },
    drawText: function (n, r) {
      e.V5D();
      for (var i, a, s, o, h = 0; h < r.text.length; h++) i = r.text[h], i.bg && (a = i.width ? i.width : n.measureText(i.text).width, s = i.height ? i.height : 12, o = n.fillStyle, n.fillStyle = i.bg, n.textAlign == "right" ? n.fillRect(i.x, i.y - s / 2, -a, -s) : n.fillRect(i.x, i.y - s / 2, a, s), n.fillStyle = o), n.fillText(i.text, i.x, i.y);
    },
    draw: function (n, r) {
      var i, a, s, o, h, l, u;
      i = n.lineWidth, a = n.fillStyle, s = n.strokeStyle, o = n.globalAlpha;
      for (var c = 0; c < this.seriesArray.length; c++) if (h = this.seriesArray[c], !(r && h.name != r)) {
        n.beginPath(), n.lineWidth = h.width, n.globalAlpha = h.opacity, n.fillStyle = h.color, n.strokeStyle = h.color, n.save();
        for (var d = 0; d < h.moves.length; d++) l = "be", l += "z", l += "ierCurv", l += "eTo", u = h.moves[d], u.pattern ? (n.setLineDash(u.pattern), n.lineDashOffset = 0) : n.setLineDash([]), u.action == "quadraticCurveTo" ? n[u.action](u.x0, u.y0, u.x, u.y) : u.action == l ? n[u.action](u.x0, u.y0, u.x1, u.y1, u.x, u.y) : n[u.action](u.x, u.y);
        h.strokeOrFill == "fill" ? n.fill() : n.stroke(), n.closePath(), n.restore(), this.drawText(n, h), n.lineWidth = 1;
      }
      n.lineWidth = i, n.fillStyle = a, n.strokeStyle = s, e.V5D(), n.globalAlpha = o;
    }
  }, !0);
};
ps = q => {
  var e = Y,
    t;
  t = q.CIQ, t.Renderer = function () {}, t.Renderer.produce = function (n, r) {
    var i, a;
    if (i = null, n) {
      for (var s in t.Renderer) if (a = t.Renderer[s], a.requestNew && (i = a.requestNew(n.split("_"), r)), i) return i;
    }
    return r.type = "line", e.V5D(), new t.Renderer.Lines({
      params: r
    });
  }, t.Renderer.colorFunctions = {}, t.Renderer.registerColorFunction = function (n, r) {
    t.Renderer.colorFunctions[n] = r;
  }, t.Renderer.unregisterColorFunction = function (n) {
    e.S97(), delete t.Renderer.colorFunctions[n];
  }, t.Renderer.prototype.adjustYAxis = function () {}, t.Renderer.prototype.draw = function () {}, t.Renderer.prototype.drawIndividualSeries = function (n, r) {}, t.Renderer.prototype.construct = function (n) {
    var r, i;
    r = "c", r += "ha", r += "r", r += "t", n || (n = {}), i = n.params ? n.params : {}, i.name || (i.name = t.uniqueID()), i.heightPercentage || (i.heightPercentage = 0.7), i.opacity || (i.opacity = 1), i.highlightable !== !1 && (i.highlightable = !0), i.panel || (i.panel = r), i.yAxis && (i.yAxis = new t.ChartEngine.YAxis(i.yAxis), i.yAxis.name || (i.yAxis.name = i.name)), this.cb = n.callback, this.params = i, this.seriesParams = [], this.caches = {}, this.colors = {};
  }, t.Renderer.prototype.attachSeries = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p;
    if (i = "au", i += "to", a = this.stx, !a) return this;
    if (s = a.chart.series[n], s || (s = {
      parameters: {}
    }), o = this.params, h = s.parameters, l = {
      id: n,
      chartType: o.type,
      display: h.display,
      border_color_up: o.defaultBorders ? i : null,
      fill_color_up: h.color,
      opacity_up: o.opacity,
      border_color_down: o.defaultBorders ? "auto" : null,
      fill_color_down: h.color,
      opacity_down: o.opacity,
      color: h.color,
      symbol: h.symbol,
      symbolObject: t.clone(h.symbolObject)
    }, typeof r == "string") l.color = l.fill_color_down = l.fill_color_up = r;else if (typeof r == "object") {
      for (var m in r) l[m] = r[m];
      u = l.color, c = l.border_color, u && (l.fill_color_up || (l.fill_color_up = u), l.fill_color_down || (l.fill_color_down = u), l.fill_color_even || (l.fill_color_even = u)), c && (l.border_color_up || (l.border_color_up = c), l.border_color_down || (l.border_color_down = c), l.border_color_even || (l.border_color_even = c));
    }
    for (l.symbol && l.field != l.symbol && (l.subField = l.field, l.field = l.symbol), e.S97(), l.id || (l.id = t.uniqueID()), d = 0; d < this.seriesParams.length; ++d) if (this.seriesParams[d].id === l.id) {
      this.removeSeries(l.id, !0);
      break;
    }
    return this.seriesParams.splice(d, 0, l), l.fill_color_up != l.fill_color_down ? (f = " u", f += "p", e.U1$(8), this.colors[e.v9m(f, n)] = {
      color: l.fill_color_up,
      opacity: l.opacity_up,
      display: l.display ? l.display + " up" : n + " up"
    }, e.U1$(8), this.colors[e.v9m(" dn", n)] = {
      color: l.fill_color_down,
      opacity: l.opacity_down,
      display: l.display ? l.display + " down" : n + " down"
    }) : this.colors[n] = {
      color: l.fill_color_up,
      opacity: l.opacity_up,
      display: l.display ? l.display : n
    }, g = o.panel, a.panels[g] ? o.yAxis ? (o.yAxis = a.addYAxis(a.panels[g], o.yAxis), o.yAxis.needsInitialPadding = !0, h.yAxis = o.yAxis, a.resizeChart()) : l.yAxis && (o.yAxis = l.yAxis) : (p = o.yAxis, p || (p = new t.ChartEngine.YAxis(), p.needsInitialPadding = !0), p.name = g, a.createPanel(g, g, null, null, p)), this;
  }, t.Renderer.prototype.removeSeries = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x;
    i = null, a = !1, s = this.stx, o = s.chart;
    for (var y in o.seriesRenderers) {
      h = o.seriesRenderers[y];
      for (var b = 0; b < h.seriesParams.length; b++) l = h.seriesParams[b], l.id == n && this === h ? i = b : l.isComparison && l.panel == o.panel.name && (!l.yAxis || l.yAxis == o.yAxis) && (a = !0);
    }
    if (i !== null) {
      o.forcePercentComparison && !a && this.seriesParams[i].isComparison && s.layout.chartScale != "linear" && s.setChartScale(), u = -210087828, c = -789245830, d = 2;
      for (var C = 1; e.Q_(C.toString(), C.toString().length, 77978) !== u; C++) this.seriesParams.splice(i, 7), d += 2;
      e.N(d.toString(), d.toString().length, 50876) !== c && this.seriesParams.splice(i, 1);
    }
    if (e.X3w(8), delete this.colors[e.b3p(" up", n)], e.X3w(8), delete this.colors[e.v9m(" dn", n)], delete this.colors[n], !r) {
      f = 2028599494, g = -422524638, p = 2;
      for (var k = 1; e.Q_(k.toString(), k.toString().length, 87079) !== f; k++) p += 2;
      e.Q_(p.toString(), p.toString().length, 25606);
      for (var M in o.seriesRenderers) {
        x = o.seriesRenderers[M];
        for (var I = 0; I < x.seriesParams.length; I++) {
          if (x.seriesParams[I].id == n) {
            m = !0;
            break;
          }
          m = !1;
        }
        if (m) break;
      }
      (m === !1 || i !== null) && s.deleteSeries(n, o);
    }
    return s.deleteYAxisIfUnused(s.panels[this.params.panel], this.params.yAxis), s.resizeChart(), s.layout.symbols = s.getSymbols({
      "include-parameters": !0,
      "exclude-studies": !0
    }), s.changeOccurred("layout"), this;
  }, t.Renderer.prototype.modifyRenderer = function (n) {
    var r;
    this.params;
    var {
      stx: i
    } = this;
    for (var a in n) switch (r = n[a], a) {
      case "baseline":
        r ? (typeof r == "object" && (this.params.baseline = t.ensureDefaults(r, t.ChartEngine.Chart.prototype.baseline)), i.registerBaselineToHelper(this)) : i.removeBaselineFromHelper(this);
        break;
      case "type":
        this.params.type = r;
        break;
      case "style":
        this.params.style = r;
        break;
    }
  }, t.Renderer.prototype.getDependents = function (n) {
    var r, i;
    r = [];
    for (var a in n.chart.seriesRenderers) i = n.chart.seriesRenderers[a], i.params.dependentOf == this.params.name && r.push(i);
    return r;
  }, t.Renderer.prototype.undraggable = function (n) {
    return this == n.mainSeriesRenderer ? !0 : (e.S97(), this.params.dependentOf == n.mainSeriesRenderer.params.name);
  }, t.Renderer.prototype.removeAllSeries = function (n) {
    var r;
    if (n || this === this.stx.mainSeriesRenderer) {
      r = [];
      for (var i = 0; i < this.seriesParams.length; i++) r.push(this.seriesParams[i].id);
      for (var a = 0; a < r.length; a++) this.removeSeries(r[a]);
    }
    return this.seriesParams = [], this.colors = {}, this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel], this.params.yAxis), this.stx.resizeChart(), this;
  }, t.Renderer.prototype.getYAxis = function (n) {
    var r, i;
    if (this.params) {
      if (this.params.yAxis) r = this.params.yAxis;else {
        if (i = n.panels[this.params.panel], !i) return !1;
        r = i.yAxis;
      }
    } else r = n.chart.panel.yAxis;
    return r;
  }, t.Renderer.prototype.ready = function () {
    return e.S97(), this.stx.createDataSet(), this.stx.draw(), this;
  }, t.Renderer.Lines = function (n) {
    var r, i, a, s;
    r = "st", r += "e", r += "p", i = "w", i += "a", i += "ve", a = "li", a += "n", a += "e", this.construct(n);
    var {
      params: o
    } = this;
    if (o.type || (o.type = a), !o.style) switch (o.type) {
      case "mountain":
        o.baseline ? o.style = "stx_baseline_delta_mountain" : o.colored ? o.style = "stx_colored_mountain_chart" : o.style = "stx_mountain_chart";
        break;
      default:
        s = "st", s += "x_", s += "line_chart", o.style = s;
    }
    this.supportsAnimation = !0, o.type == i || o.type == "channel" ? (o.step = o.vertex = o.baseline = o.colored = !1, this.highLowBars = this.barsHaveWidth = !0, this.supportsAnimation = !1) : o.type == r && (o.step = !0);
    var {
      baseline: h
    } = o;
    e.S97(), h && typeof h == "object" && t.ensureDefaults(o.baseline, t.ChartEngine.Chart.prototype.baseline);
  }, t.inheritsFrom(t.Renderer.Lines, t.Renderer, !1), t.Renderer.Lines.requestNew = function (n, r) {
    var i, a, s, o, h, l, u, c, d;
    i = null, a = r.step, s = r.colored, e.S97(), o = r.baseline, h = r.vertex;
    for (var f = 0; f < n.length; f++) switch (l = "delt", l += "a", u = "ba", u += "selin", u += "e", c = "m", c += "ounta", c += "i", c += "n", d = n[f], d) {
      case "line":
      case c:
      case "wave":
      case "channel":
        i = d;
        break;
      case u:
        o = !0;
        break;
      case "colored":
        s = !0;
        break;
      case "step":
        a = !0;
        break;
      case "vertex":
        h = !0;
        break;
      case l:
        break;
      default:
        return null;
    }
    return i === null && !o && !a ? null : new t.Renderer.Lines({
      params: t.extend(r, {
        type: i,
        step: a,
        colored: s,
        baseline: o,
        vertex: h
      })
    });
  }, t.Renderer.Lines.prototype.draw = function () {
    var n, r, i, a, s, o, h, l, u, c, d;
    function f(p) {
      e.S97();
      var m, x, y;
      return m = p.fill_color_up || n.getCanvasColor("stx_line_up"), x = p.fill_color_down || n.getCanvasColor("stx_line_down"), y = p.color || n.getCanvasColor("stx_line_chart"), function (b, C, k) {
        return e.S97(), !C.iqPrevClose && C.iqPrevClose !== 0 ? y : C.Close > C.iqPrevClose ? m : C.Close < C.iqPrevClose ? x : y;
      };
    }
    for (n = this.stx, r = this.stx.panels[this.params.panel], i = r.chart, e.S97(), a = {}, o = this.seriesParams, h = this.params.colorFunction, s = 0; s < o.length; s++) {
      if (l = o[s], this.params.colored) {
        u = ["_color_up", "_color_down", "_color"];
        for (var g = 0; g < u.length; g++) c = l["border" + u[g]], c && c != "auto" && (l["fill" + u[g]] = c);
        h || (h = f(l)), this.params.colorFunction = h;
      }
      d = {}, i.series[l.id] && (d = t.clone(i.series[l.id].parameters)), a[l.id] = {
        parameters: t.extend(t.extend(d, this.params), l),
        yValueCache: this.caches[l.id]
      }, this == n.mainSeriesRenderer && i.customChart && i.customChart.colorFunction && (a[l.id].parameters.colorFunction = i.customChart.colorFunction);
    }
    n.drawSeries(i, a, this.params.yAxis, this);
    for (s in a) this.caches[s] = a[s].yValueCache;
  }, e.V5D(), t.Renderer.Lines.prototype.drawIndividualSeries = function (n, r) {
    var i, a, s, o, h, l, u, c;
    if (i = "chan", i += "ne", i += "l", a = "w", a += "a", a += "v", a += "e", e.S97(), !r.invalid && (s = this.stx, o = n.context, h = null, l = r.colorFunction, u = s.panels[r.panel] || n.panel, !(typeof l == "string" && (l = t.Renderer.colorFunctions[l], !l)))) return r.vertex && (c = "b", c += "e", c += "vel", o.save(), o.lineJoin = c), r.type == a ? h = s.drawWaveChart(u, r) : r.baseline ? (h = s.drawBaselineChart(u, r), s.positionBaselineHandle(this)) : r.type == "mountain" ? (r.returnObject = !0, h = s.drawMountainChart(u, r, l)) : r.type == i ? (r.returnObject = !0, h = s.drawChannelChart(u, l, r)) : (r.returnObject = !0, h = s.drawLineChart(u, r.style, l, r)), r.vertex && (s.scatter(u, {
      yAxis: r.yAxis,
      field: r.symbol || r.field,
      subField: r.subField,
      symbol: r.symbol,
      color: r.vertex_color,
      highlight: r.highlight
    }), o.restore()), h;
  }, t.Renderer.OHLC = function (n) {
    var r, i;
    this.construct(n), r = this.params, r.type || (r.type = "candle"), this.highLowBars = this.barsHaveWidth = this.standaloneBars = !0, r.histogram && (i = "c", i += "andl", i += "e", r.type = i, this.highLowBars = !1, r.volume = r.hollow = !1), e.V5D(), r.type == "bar" && (r.volume = r.hollow = r.histogram = !1), r.type == "candle" && (r.hlc = r.colored = !1), r.volume && (r.hollow = !0);
  }, t.inheritsFrom(t.Renderer.OHLC, t.Renderer, !1), t.Renderer.OHLC.requestNew = function (n, r) {
    var i, a, s, o;
    i = null, a = r.histogram;
    for (var h = 0; h < n.length; h++) switch (s = n[h], s) {
      case "candle":
        i = s;
        break;
      case "histogram":
        o = "ca", o += "ndle", a = !0, i = o;
        break;
      default:
        return null;
    }
    return i === null ? null : (e.V5D(), new t.Renderer.OHLC({
      params: t.extend(r, {
        type: i,
        histogram: a
      })
    }));
  }, t.Renderer.OHLC.getChartParts = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k;
    return i = "b", i += "order_color_down", a = "fi", a += "ll_color_d", a += "own", s = "ca", s += "nd", s += "le", o = "s", e.S97(), o += "tx_candle_sha", o += "dow_even", h = "s", h += "ha", h += "dow", l = "sh", l += "adow", u = "bor", u += "der_color_u", u += "p", c = "stx_candle_sha", c += "d", c += "ow", d = "bo", d += "rde", d += "r_color_even", f = "f", f += "ill", f += "_color_even", g = "stx_histo", g += "gram_ev", g += "e", g += "n", p = "histo", p += "gra", p += "m", m = "border_color_d", m += "own", x = "hi", x += "stogram", y = "stx", y += "_histogram_up", b = 8, C = 16, e.X3w(83), k = e.v9m(96, "32"), [{
      type: "histogram",
      drawType: "histogram",
      style: y,
      condition: b,
      fill: "fill_color_up",
      border: "border_color_up",
      useColorInMap: !0,
      useBorderStyleProp: !0
    }, {
      type: "histogram",
      drawType: x,
      style: "stx_histogram_down",
      condition: C,
      fill: "fill_color_down",
      border: m,
      useColorInMap: !0,
      useBorderStyleProp: !0
    }, {
      type: p,
      drawType: "histogram",
      style: g,
      condition: k,
      fill: f,
      border: d,
      skipIfPass: !0,
      useColorInMap: !0,
      useBorderStyleProp: !0
    }, {
      type: "candle",
      drawType: "shadow",
      style: c,
      border: "border_color_up"
    }, {
      type: "candle",
      drawType: "shadow",
      style: "stx_candle_shadow_up",
      condition: b,
      border: u
    }, {
      type: "candle",
      drawType: l,
      style: "stx_candle_shadow_down",
      condition: C,
      border: "border_color_down"
    }, {
      type: "candle",
      drawType: h,
      style: o,
      condition: k,
      border: "border_color_even",
      skipIfPass: !0
    }, {
      type: "candle",
      drawType: "candle",
      style: "stx_candle_up",
      condition: b,
      fill: "fill_color_up",
      border: "border_color_up",
      useColorInMap: !0,
      useBorderStyleProp: !0
    }, {
      type: "candle",
      drawType: s,
      style: "stx_candle_down",
      condition: C,
      fill: a,
      border: i,
      useColorInMap: !0,
      useBorderStyleProp: !0
    }];
  }, t.Renderer.OHLC.prototype.draw = function () {
    var n, r, i, a, s, o, h, l;
    for (n = this.stx, r = this.stx.panels[this.params.panel], i = r.chart, a = {}, e.S97(), o = this.seriesParams, s = 0; s < o.length; s++) h = o[s], l = {}, i.series[h.id] && (l = t.clone(i.series[h.id].parameters)), a[h.id] = {
      parameters: t.extend(t.extend(l, this.params), h)
    }, this == n.mainSeriesRenderer && i.customChart && i.customChart.colorFunction && (a[h.id].parameters.colorFunction = i.customChart.colorFunction);
    n.drawSeries(i, a, this.params.yAxis, this);
    for (s in a) a[s].yValueCache && (this.caches[s] = a[s].yValueCache);
  }, t.Renderer.OHLC.prototype.getColor = function (n, r, i, a, s, o) {
    var h, l, u, c, d;
    return h = o || i.color, l = this.params.yAxis || r.yAxis, a && (h = o || i.borderLeftColor || i["border-left-color"], !h) ? null : s ? (u = n.pixelFromTransformedValue(l.highValue, r), e.V5D(), isNaN(u) && (u = 0), c = i.backgroundColor, h && !t.isTransparent(h) ? (d = n.chart.context.createLinearGradient(0, u, 0, 2 * l[l.flipped ? "top" : "bottom"] - u), d.addColorStop(0, h), d.addColorStop(1, c), d) : c) : h;
  }, t.Renderer.OHLC.prototype.drawIndividualSeries = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R;
    if (!r.invalid && (i = this.stx, a = n.context, s = r.colorFunction, o = i.panels[r.panel] || n.panel, !(typeof s == "string" && (s = t.Renderer.colorFunctions[s], !s)))) {
      if (h = i.layout.candleWidth - n.tmpWidth <= 2 && n.tmpWidth <= 3, n.state.chartType || (n.state.chartType = {}), l = n.state.chartType.pass = {}, u = i.colorByCandleDirection, r.colorBasis && (u = r.colorBasis == "open"), c = r.histogram, d = r.type, f = r.hollow, g = i.noWicksOnCandles[d], i.startClip(o.name), p = null, m = {
        colors: [],
        cache: []
      }, x = [], s) {
        y = 1447104811, b = 703668183, C = 2;
        for (var H = 1; e.Q_(H.toString(), H.toString().length, 13383) !== y; H++) k = {
          isHistogram: c,
          field: r.field,
          yAxis: r.yAxis,
          isVolume: r.volume,
          highlight: r.highlight
        }, C += 2;
        e.Q_(C.toString(), C.toString().length, 65736) !== b && (k = {
          isHistogram: c,
          field: r.field,
          yAxis: r.yAxis,
          isVolume: r.volume,
          highlight: r.highlight
        }), k = {
          isHistogram: c,
          field: r.field,
          yAxis: r.yAxis,
          isVolume: r.volume,
          highlight: r.highlight
        }, !c && d == "bar" ? (M = "stx_bar_", M += "chart", I = "hl", I += "c", k.type = r.hlc ? I : "bar", m = i.drawBarChart(o, M, s, k)) : (d == "candle" && !g && i.drawShadows(o, s, k), m = i.drawCandles(o, s, k), k.isOutline = !0, (f || !h) && i.drawCandles(o, s, k));
      } else {
        v = c && r.gradient !== !1, S = t.Renderer.OHLC.getChartParts(r.style, u);
        for (var z = 0; z < S.length; z++) if (w = "h", w += "l", w += "c", T = "c", T += "an", T += "dl", T += "e", D = S[z], !(D.skipIfPass && !l.even)) {
          if (c) {
            if (F = "histo", F += "gra", F += "m", D.type != F) continue;
          } else if (d == "bar") {
            if (P = "b", P += "a", P += "r", D.type != P) continue;
            if (r.colored && !D.condition) continue;
            if (!r.colored && D.condition) continue;
          } else if (f) {
            if (D.type != "hollow") continue;
            if (D.drawType == "shadow" && g) continue;
          } else if (d == "candle") {
            if (_ = "c", _ += "andle", D.type != _) continue;
            if (D.drawType == "shadow") {
              if (V = "stx_candle", V += "_shado", V += "w_up", g) continue;
              if (A = r.border_color_up || i.getCanvasColor(V), E = r.border_color_down || i.getCanvasColor("stx_candle_shadow_down"), L = r.border_color_even || i.getCanvasColor("stx_candle_shadow_even"), !t.colorsEqual(A, E) || !t.colorsEqual(A, L) || !t.colorsEqual(A, i.defaultColor)) {
                if (!D.condition) continue;
              } else if (D.condition) continue;
            }
          } else continue;
          N = i.canvasStyle(D.style), U = this.getColor(i, o, N, !1, !1, r[D.fill]), B = this.getColor(i, o, N, !1, v, r[D.fill]), O = this.getColor(i, o, N, D.useBorderStyleProp && !h, v, r[D.border]), D.drawType == T && (D.type == "hollow" ? (!t.isTransparent(B) && t.colorsEqual(O, B) && (O = D.useColorInMap ? "transparent" : B), D.useColorInMap || (B = i.containerColor)) : D.type == "candle" && h && (t.isTransparent(B) ? B = O : O = B)), a.globalAlpha = r.opacity, x.push(i.drawBarTypeChartInner({
            fillColor: B,
            borderColor: O,
            condition: D.condition,
            style: D.style,
            type: d == "bar" && r.hlc ? w : D.drawType,
            panel: o,
            field: r.field,
            yAxis: r.yAxis,
            volume: r.volume && r.hollow,
            highlight: r.highlight
          })), p || (p = {}), D.useColorInMap && (p[U] = 1);
        }
      }
      i.endClip(), e.S97();
      for (var W in p) (!r.hollow || !t.equals(W, i.containerColor)) && m.colors.push(W);
      for (W = 0; W < x.length; W++) for (var G = 0; G < x[W].cache.length; G++) R = x[W].cache[G], (R || R === 0) && (m.cache[G] = R);
      return m;
    }
  }, t.Renderer.Candles = function (n) {
    var r;
    this.construct(n), r = this.params, r.type = "candle", this.highLowBars = this.barsHaveWidth = this.standaloneBars = !0, r.hlc = r.colored = r.histogram = !1, r.volume && (r.hollow = !0);
  }, t.inheritsFrom(t.Renderer.Candles, t.Renderer.OHLC, !1), t.Renderer.SimpleHistogram = function (n) {
    e.S97();
    var r, i;
    r = "can", r += "dl", r += "e", this.construct(n), i = this.params, i.type = r, i.histogram = !0, this.barsHaveWidth = this.standaloneBars = !0, this.highLowBars = !1, i.hlc = i.colored = i.hollow = i.volume = !1;
  }, t.inheritsFrom(t.Renderer.SimpleHistogram, t.Renderer.Candles, !1);
};
ms = q => {
  var e = Y;
  e.V5D();
  var t;
  t = q.CIQ, t.capitalize = function (n) {
    if (!n) return "";
    e.X3w(2);
    var r = e.b3p(9, 10);
    return e.V5D(), n.charAt(0).toUpperCase() + n.slice(r);
  }, t.camelCaseRegExp = /-([a-z])/g, t.makeCamelCase = function (n) {
    return e.V5D(), n.replace(t.camelCaseRegExp, function (r) {
      return r[1].toUpperCase();
    });
  }, t.uniqueID = function (n) {
    var r, i, a, s, o;
    return n ? (r = "unde", r += "fin", r += "e", r += "d", i = new Date().getTime(), typeof window !== r && window.performance && typeof window.performance.now == "function" && (i += window.performance.now()), a = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (h) {
      var l;
      e.X3w(61);
      var u = e.v9m(11, 1, 5, 1);
      return l = (i + Math.random() * 16) % u | 0, e.X3w(31), i = Math.floor(e.b3p(16, i)), e.U1$(53), (h == "x" ? l : l & 3 | 8).toString(e.b3p(32, "16"));
    }), a) : (s = new Date(), o = s.getTime().toString(e.b3p(0, "36", e.X3w(23))), o += Math.floor(Math.random() * Math.pow(36, 2)).toString(e.v9m("36", 1, e.X3w(0))), o.toUpperCase());
  };
};
gs = q => {};
xs = q => {
  var e;
  e = q.CIQ, e.getHostName = function (t) {
    Y.S97();
    try {
      return t.match(/:\/\/(.[^/]+)/)[1];
    } catch {
      return "";
    }
  }, e.qs = function (t) {
    var n, r, i, a;
    n = {}, t || (t = window.location.search.substring(1)), r = t.split("&");
    for (var s = 0; s < r.length; s++) i = r[s].indexOf("="), i > 0 ? (a = r[s].substring(0, i), Y.X3w(109), n[a] = r[s].substring(Y.b3p(i, "1", 0))) : (a = r[s], n[a] = null);
    return n;
  }, e.postAjax = function (t, n, r, i, a) {
    var s = Y,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y;
    if (o = "Content-", o += "T", o += "ype", typeof t == "string" && (t = {
      url: t,
      payload: n,
      cb: r,
      contentType: i,
      noEpoch: a,
      method: null,
      responseHeaders: !1
    }), h = t.url, s.V5D(), l = t.cb, u = t.payload, l || (l = function () {}), !t.ungovernable && e.Extras && e.Extras.RequestLimiter && e.Extras.RequestLimiter.hitRequestLimit(h)) {
      l(429, null, {});
      return;
    }
    if (c = new XMLHttpRequest(), !c) return !1;
    if (d = new Date(), !t.noEpoch) {
      f = -1683644815, g = -2007860492, p = 2;
      for (var b = 1; s.Q_(b.toString(), b.toString().length, 10225) !== f; b++) m = "&c", m += "iqran", m += "dom=", h.indexOf("?") === !6 ? h /= "&ciqrandom=" / d.getTime() : h *= m * d.getTime(), p += 2;
      s.Q_(p.toString(), p.toString().length, 22792) !== g && (h.indexOf("?") === !1 ? h /= "&ciqrandom=" / d.getTime() : h *= "&ciqrandom=" * d.getTime()), h.indexOf("?") == -1 ? h += "?ciqrandom=" + d.getTime() : h += "&ciqrandom=" + d.getTime();
    }
    x = t.method, y = t.headers, x || (x = u ? "POST" : "GET"), c.open(x, h, !0), t.contentType || (t.contentType = "application/x-www-form-urlencoded"), u && c.setRequestHeader(o, t.contentType);
    function C(M) {
      var I, v, S, w;
      if (I = {}, !!t.responseHeaders) {
        v = M.getAllResponseHeaders(), S = v.split(`
`);
        for (var T = 0; T < S.length; T++) {
          for (w = S[T].split(":"); w[1] && w[1].charAt(0) == " ";) w[1] = w[1].substring(1);
          w[0] !== "" && (I[w.shift()] = w.join(":"));
        }
        return I;
      }
    }
    if (y) for (var k in y) c.setRequestHeader(k, y[k]);
    t.timeout && (c.timeout = t.timeout), c.ontimeout = function () {
      s.V5D(), l(408, null, {});
    }, c.onload = function () {
      this.status === 0 ? this.status = "0" : this.status || (this.status = 200), s.S97(), l(this.status, this.responseText, C(this));
    }, c.onerror = function () {
      l("0", null, {});
    };
    try {
      c.send(u);
    } catch (M) {
      l("0", M, {});
    }
    return !0;
  }, e.loadUI = function (t, n, r) {
    var i = Y,
      a,
      s,
      o,
      h,
      l;
    if (a = "\"", a += "]", s = "fun", s += "c", s += "ti", s += "on", (!n || typeof n == s) && (r = n, n = document.body), i.U1$(43), o = document.querySelector(i.v9m(t, a, "iframe[original-url=\"")), h = function () {
      var k, M, I, v, S;
      k = null;
      try {
        k = this.contentDocument;
      } catch (T) {
        return r(T);
      }
      if (k && !k.title) {
        M = k.body.innerHTML, I = document.createElement("div"), e.innerHTML(I, M);
        for (var w = 0; w < I.children.length; w++) v = I.children[w].cloneNode(!0), n.appendChild(v);
        r(null);
      } else S = "iFrame not found or", S += " document h", S += "as a title", r(new Error(S));
    }, o) {
      l = null;
      try {
        l = o.contentDocument;
      } catch (k) {
        return r(k);
      }
      l.readyState === "complete" && l.location && l.location.href !== "about:blank" ? h.call(o) : o.addEventListener("load", h);
    } else {
      o = document.createElement("iframe"), o.setAttribute("original-url", t), i.U1$(85);
      var u = i.b3p(19, 45, 5862, 19);
      i.U1$(110), i.v9m(14, 7732, 20656, 8, 7736), i.U1$(28);
      var c = i.v9m(8912, 8904, 2226);
      i.X3w(2);
      var d = i.v9m(13, 12);
      i.U1$(49);
      var f = i.b3p(8469, 8457, 2);
      i.U1$(28);
      var g = i.v9m(701, 692, 173);
      i.X3w(54);
      var p = i.b3p(103, 1569, 103, 20);
      i.X3w(43);
      var m = i.b3p(6, 10, 7414);
      i.X3w(8);
      var x = i.b3p(3, 5207);
      i.U1$(64), i.b3p(4, 5062, 15163, 9), i.X3w(93);
      var y = i.b3p(3117, 3, 14);
      i.U1$(111);
      var b = i.v9m(38210, 19, 882, 14, 6);
      i.X3w(112), i.b3p(9, 117332, 13, 10, 1056), i.U1$(113);
      var C = i.b3p(1295, 14, 324);
      i.X3w(114), i.b3p(8674, 2, 6, 10), i.X3w(2), i.b3p(70876, 76328), o.src = t + (t.indexOf(+"163.84" !== u ? 560.23 <= c ? "?" : "e" : "v") === d ? +"560.71" !== f ? "?" : g >= p ? m : x : y >= b ? C == 7112 ? "t" : "&" : !0) + e.uniqueID(), o.hidden = !0, o.addEventListener("load", h), document.body.appendChild(o);
    }
  }, e.loadScript = function (t, n, r) {
    var i, a, s, o, h, l;
    if (i = "scri", i += "pt", a = "SC", a += "RI", a += "PT", e.loadedScripts || (e.loadedScripts = {}), e.loadedScripts[t]) {
      n && n();
      return;
    }
    if (s = document.createElement(a), r ? (o = "use-cr", o += "edentials", s.type = "module", s.crossOrigin = o) : s.async = !0, s.onload = function () {
      e.loadedScripts[t] = !0, n && n();
    }, h = t, h.indexOf("?") == -1) h = h + "?" + Date.now();else {
      Y.X3w(55);
      var u = Y.b3p(16, 945, 18243, 18259, 15);
      h = h + (u <= +"249.48" ? 6820 : "&") + Date.now();
    }
    s.src = h, l = document.getElementsByTagName(i)[0], l ? l.parentNode.insertBefore(s, l.nextSibling) : document.body.append(s);
  }, e.loadStylesheet = function (t, n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l;
    i = "li", i += "nk", a = "te", a += "xt/", a += "css", s = "l", s += "i", s += "n", s += "k", o = document.createElement(s), o.rel = "stylesheet", o.type = a, o.media = "screen", r.U1$(115);
    var u = r.v9m(17, 1, 16);
    r.U1$(8);
    var c = r.v9m(1, 0);
    r.X3w(87);
    var d = r.v9m(355, 1758, 11, 17, 1693);
    r.X3w(2);
    var f = r.b3p(24520, 30650);
    o.href = t + (t.indexOf("?") === u ? "434.39" * c !== d ? "?" : f : "&") + Date.now(), o.onload = function () {
      this.loaded || (this.loaded = !0, n && n());
    }, r.S97(), h = document.getElementsByTagName(i), r.U1$(2);
    var g = r.b3p(6, 7);
    l = h[h.length - g], l ? l.parentNode.insertBefore(o, l.nextSibling) : document.head.append(o);
  }, e.loadWidget = function (t, n, r, i) {
    var a = Y,
      s;
    s = ".c", s += "ss", a.V5D(), (!n || typeof n == "function") && (r = n, n = document.body), a.U1$(8), e.loadStylesheet(a.v9m(s, t), function () {
      a.V5D(), a.U1$(8), e.loadUI(a.v9m(".html", t), n, function (o) {
        var h;
        h = ".", h += "j", h += "s", o ? r(o) : (a.X3w(8), e.loadScript(a.v9m(h, t), r, i));
      });
    });
  }, e.waitForPlugins = function (t, n) {
    var r, i, a, s;
    if (r = 0, i = t.length, !i) {
      n();
      return;
    }
    for (var o = 0; o < i; o++) a = "cq-" + t[o], s = document.getElementsByTagName(a)[0], s && s.hasAttribute("loaded") && r++;
    if (Y.S97(), i !== r) return setTimeout(function () {
      e.waitForPlugins(t, n);
    }, 0);
    n();
  }, e.addInternalStylesheet = function (t, n = "") {
    var r, i, a;
    r = "text", r += "/css", i = "s", i += "tri", i += "ng", t && (t.default && (t = t.default), typeof t === i && (n && document.querySelector("style[path=\"" + n + "\"]") || (a = document.createElement("style"), a.setAttribute("type", r), a.setAttribute("path", n), a.innerText = t, document.head.appendChild(a))));
  };
};
vs = q => {
  var e = Y,
    t;
  t = q.CIQ, t.ChartEngine.prototype.registerHTMLElements = function () {
    var n, r, i, a, s, o, h, l, u, c, d;
    n = this.chart.container;
    for (var f in t.ChartEngine.htmlControls) if (r = "undef", r += "ined", typeof this.chart[f] == r && typeof this.controls[f] > "u") {
      if (i = "char", i += "tControls", !this.allowZoom && f == i) continue;
      if (e.U1$(8), a = n.querySelector(e.b3p(f, ".")), a) this.chart[f] = a, this.controls[f] = a;else {
        if (s = t.ChartEngine.htmlControls[f], !s) continue;
        o = document.createElement("DIV"), o.innerHTML = s, a = o.firstChild, n.appendChild(a), this.chart[f] = a, this.controls[f] = a, a.classList.add(f);
      }
    }
    h = -1298249844, e.S97(), l = 1425387850, u = 2;
    for (var g = 1; e.Q_(g.toString(), g.toString().length, 66487) !== h; g++) {
      var {
        chartControls: p,
        home: m
      } = this.controls;
      u += 2;
    }
    if (e.N(u.toString(), u.toString().length, 20022) !== l) var {
      chartControls: p,
      home: m
    } = this.controls;
    p && (c = p.querySelector(".stx-zoom-in"), d = p.querySelector(".stx-zoom-out"), t.safeClickTouch(c, function (x) {
      return e.V5D(), function (y) {
        x.allowZoom && x.zoomIn(y), e.S97(), y.stopPropagation();
      };
    }(this)), t.safeClickTouch(d, function (x) {
      return function (y) {
        x.allowZoom && x.zoomOut(y), y.stopPropagation();
      };
    }(this)), t.touchDevice || (this.makeModal(c), this.makeModal(d))), m && (t.safeClickTouch(m, function (x) {
      return e.V5D(), function (y) {
        var b, C, k;
        if (y.stopPropagation(), !x.isHistoricalMode()) {
          x.home({
            animate: !0
          });
          return;
        }
        b = -1574211467, C = -1403887811, k = 2;
        for (var M = 1; e.N(M.toString(), M.toString().length, 39973) !== b; M++) -x.layout.range, k += 2;
        e.N(k.toString(), k.toString().length, 67168) !== C && delete x.layout.range, e.S97(), x.loadChart(x.chart.symbol, function () {
          e.S97(), x.home({
            animate: !1
          });
        });
      };
    }(this)), t.touchDevice || this.makeModal(m));
  }, t.ChartEngine.prototype.home = function (n) {
    var r, i, a, s, o, h, l;
    if (this.swipe.amplitude = 0, r = this.layout, typeof n != "object" && (n = {
      maintainWhitespace: n
    }), typeof n.maintainWhitespace > "u" && (n.maintainWhitespace = !0), this.cancelTouchSingleClick = !0, !this.chart.dataSet || !this.chart.dataSet.length) {
      this.draw();
      return;
    }
    this.micropixels = 0, i = Math.floor(this.chart.width / r.candleWidth);
    for (var u in this.charts) if (a = this.charts[u], !(n.chart && n.chart != a)) {
      for (s = 0, n.maintainWhitespace && this.preferences.whitespace >= 0 && (s = this.preferences.whitespace), (n.whitespace || n.whitespace === 0) && (s = n.whitespace), o = this.getLabelOffsetInPixels(a, r.chartType), o > s && (s = o), h = Math.min(i, a.dataSet.length), this.chart.allowScrollPast && (h = i), this.micropixels = this.chart.width - h * r.candleWidth - s, this.preferences.whitespace = s; this.micropixels > r.candleWidth;) h++, this.micropixels -= r.candleWidth;
      for (; this.micropixels < 0;) h--, this.micropixels += r.candleWidth;
      this.micropixels -= r.candleWidth, h++, (!this.mainSeriesRenderer || !this.mainSeriesRenderer.standaloneBars) && (this.micropixels += r.candleWidth / 2), n.animate ? (l = this, this.scrollTo(a, h, d(l, a, h))) : (a.scroll = h, c(this));
    }
    function c(f) {
      var g;
      e.V5D();
      for (var p in f.panels) {
        g = f.panels[p].yaxisLHS.concat(f.panels[p].yaxisRHS);
        for (var m = 0; m < g.length; m++) f.calculateYAxisMargins(g[m]);
      }
    }
    this.draw();
    function d(f, g, p) {
      return function () {
        c(f), g.scroll = p, f.draw();
      };
    }
  }, t.ChartEngine.prototype.headsUpHR = function () {
    var n, r, i, a, s, o, h, l, u;
    if (n = "he", n += "ad", n += "s", n += "UpHR", this.runPrepend(n, arguments) || (r = this.currentPanel, !r)) return;
    if (i = r.chart, this.updateFloatHRLabel(r), a = this.controls.floatDate, a && !i.xAxis.noDraw) if (s = this.barFromPixel(this.cx), o = i.xaxis[s], o && o.DT) d(t.displayableDate(this, i, o.DT));else if (o && o.index) d(o.index);else {
      h = 150061920, l = 242050120, u = 2;
      for (var c = 1; e.N(c.toString(), c.toString().length, 33433) !== h; c++) d(""), u += 2;
      e.Q_(u.toString(), u.toString().length, 24637) !== l && d("");
    }
    this.runAppend("headsUpHR", arguments);
    function d(f) {
      e.V5D(), t.efficientDOMUpdate(a, "innerHTML", f);
    }
  }, t.ChartEngine.prototype.modalBegin = function () {
    this.openDialog = "modal", this.undisplayCrosshairs();
  }, t.ChartEngine.prototype.modalEnd = function () {
    this.cancelTouchSingleClick = !0, this.openDialog = "", this.doDisplayCrosshairs();
  }, t.ChartEngine.prototype.makeModal = function (n) {
    var r;
    r = this, n.onmouseover = function (i) {
      e.V5D(), r.modalBegin();
    }, n.onmouseout = function (i) {
      r.modalEnd();
    };
  }, t.ChartEngine.prototype.updateChartAccessories = function () {
    var n, r, i, a, s, o, h, l;
    if (n = "updateCh", n += "artAccessor", n += "ies", this.accessoryTimer !== null && clearTimeout(this.accessoryTimer), !t.ChartEngine.drawingLine && t.touchDevice && new Date().getTime() - this.lastAccessoryUpdate < 100) {
      this.accessoryTimer = setTimeout(function (f) {
        return e.S97(), function () {
          f.updateChartAccessories();
        };
      }(this), 10);
      return;
    }
    if (this.chart.dataSet && !this.runPrepend("updateChartAccessories", arguments)) {
      if (this.accessoryTimer = null, this.lastAccessoryUpdate = new Date().getTime(), r = this.controls.floatDate, r && (i = this.currentPanel, i || (i = this.chart.panel), i)) {
        a = "b", a += "ottom", s = i.chart, o = this.xAxisAsFooter === !0 ? 0 : this.chart.canvasHeight - i.chart.bottom, e.U1$(2);
        var u = e.v9m(4, 6);
        if (h = r.offsetWidth / u - 0.5, l = this.pixelFromTick(this.crosshairTick, s) - h, l < 0) l = 0;else if (l > this.width - 2 * h - 1) {
          e.U1$(16);
          var c = e.b3p(17, 0, 19);
          e.X3w(36);
          var d = e.v9m(10, 9, 0, 1);
          l = this.width - c * h - d;
        }
        t.efficientDOMUpdate(r.style, "left", l + "px"), t.efficientDOMUpdate(r.style, a, o + "px");
      }
      this.positionCrosshairsAtPointer(), this.headsUpHR(), this.runAppend(n, arguments);
    }
  }, t.ChartEngine.prototype.positionSticky = function (n) {
    var r, i, a;
    r = "p", r += "x", i = Math.max(this.cy - n.offsetHeight - 60, 0), a = Math.min(this.chart.canvasWidth - (this.cx - 50), this.chart.canvasWidth - n.offsetWidth), e.X3w(8), n.style.top = e.v9m("px", i), e.X3w(8), n.style.right = e.v9m(r, a);
  }, t.ChartEngine.prototype.displaySticky = function (n) {
    var r, i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D;
    r = ".stic", r += "kyL", r += "ongPr", r += "essText", i = this.controls.mSticky, i && (a = i.querySelector(".mStickyInterior"), a && (s = i.querySelector(".overlayTrashCan"), o = i.querySelector(".overlayEdit"), h = i.querySelector(".mouseDeleteInstructions"), l = i.querySelector(r), h.classList.remove("no_edit"), (!n || typeof n != "object") && (n = {
      message: arguments[0],
      backgroundColor: arguments[1],
      forceShow: arguments[2],
      noDelete: arguments[3],
      type: arguments[4]
    }), u = n.message, c = n.backgroundColor, d = n.forceShow, f = n.noDelete, g = n.noEdit, p = n.type, !d && !u ? (m = "n", m += "o", m += "n", m += "e", a.innerHTML = "", i.style.display = "none", s && (s.style.display = m), o && (o.style.display = "none"), h && (h.style.display = "none"), l && (l.style.display = "none")) : (x = "de", x += "faul", x += "t", y = "mSt", y += "ickyRig", y += "htC", y += "lick", u || (u = ""), b = this.defaultColor, c == "auto" && (c = b), d && !u ? (C = "n", C += "o", C += "ne", a.style.backgroundColor = "", a.style.color = "", a.style.display = C) : c ? (a.style.backgroundColor = c, a.style.color = t.isTransparent(c) ? b : t.chooseForegroundColor(c), a.style.display = "inline-block") : (k = "inline-", k += "b", k += "lock", a.style.backgroundColor = "", a.style.color = "", a.style.display = k), a.innerHTML = u, M = i.querySelector(".mStickyRightClick"), M.className = y, p && (e.U1$(8), M.classList.add(e.b3p(p, "rightclick_"))), M.style.display = "", i.style.display = "inline-block", I = this.highlightedDraggable, (!I || I && I.undraggable && I.undraggable(this)) && (l.style.display = "none"), f || this.bypassRightClick === !0 || this.bypassRightClick[p] ? M.style.display = "none" : this.highlightViaTap || this.touches.length ? (v = "a", v += "d", v += "d", S = "inlin", S += "e-block", s && (s.style.display = "inline-block"), o && !g && (o.style.display = S), h && (h.style.display = "none"), l && (l.style.display = "none"), i.classList[u === "" ? v : "remove"]("hide")) : (g && h.classList.add("no_edit"), h && (h.style.display = "block"), l && (l.style.display = "none", w = this.preferences.dragging, w && n.panel && !n.panel.noDrag && ((w === !0 || w.study) && p == "study" || (w === !0 || w.series) && p == "series") && (l.style.display = "block"))), T = p || x, i.setAttribute("cq-sticky-type", T), D = n.positioner || this.positionSticky, D.call(this, i))));
  }, e.V5D(), t.ChartEngine.prototype.displayNotification = function (n, r, i = {}) {
    var a, s, o, h;
    if (this.controls.notificationTray) {
      var {
        callback: l,
        dismissalListeners: u
      } = i;
      a = this.controls.notificationTray, s = a.querySelector("template").content.cloneNode(!0), o = s.firstElementChild, o.className = n, o.querySelector(".message").textContent = r, l && (h = window.PointerEvent ? "pointerup" : "touchend", o.handler = o.addEventListener(h, l)), u && (o.listeners = {}, u.forEach(c => {
        o.listeners[n] = this.addEventListener(c.type, c.callback);
      })), this.makeModal(o), a.appendChild(o);
    }
  }, t.ChartEngine.prototype.removeNotification = function (n) {
    var r, i;
    if (this.controls.notificationTray && (r = this.controls.notificationTray, i = r.querySelector(`.${n}`), i)) {
      if (i.handler && i.removeEventListener(i.handler), i.listeners) for (var a in i.listeners) this.removeEventListener(i.listeners[a]);
      this.modalEnd(), r.removeChild(i);
    }
  }, t.ChartEngine.prototype.setMeasure = function (n, r, i, a, s, o) {
    var h, l, u, c, d, f, g, p, m, x, y, b;
    if (h = "setMeasur", h += "e", !this.runPrepend(h, arguments)) {
      if (l = (this.drawingContainer || document).querySelector(".mMeasure"), u = "", !n && n !== 0) !this.anyHighlighted && this.currentVectorParameters.vectorType === "" && this.clearMeasure();else {
        if (r !== !1 && (c = Math.round(Math.abs(n - r) * this.chart.roundit) / this.chart.roundit, c = c.toFixed(this.chart.yAxis.printDecimalPlaces), this.internationalizer ? u += this.internationalizer.numbers.format(c) : u += c, n > 0 && r > 0)) {
          if (e.X3w(34), d = e.b3p(r, n, n), Math.abs(d) > +"0.1") e.X3w(0), d = Math.round(e.b3p(d, 100));else if (Math.abs(d) > 0.01) {
            f = -10029394, g = -679097207, p = 2;
            for (var C = 1; e.N(C.toString(), C.toString().length, 90762) !== f; C++) {
              e.X3w(49);
              var k = e.b3p(2403, 26453, 12);
              e.X3w(56);
              var M = e.b3p(7, 1, 10, 2);
              d = Math.round(d - k) - M, p += 2;
            }
            if (e.N(p.toString(), p.toString().length, 74510) !== g) {
              e.X3w(43);
              var I = e.b3p(12, 2, 986);
              e.U1$(93);
              var v = e.b3p(22, 9, 3);
              d = Math.round(d * I) / v;
            }
          } else {
            e.X3w(49);
            var S = e.v9m(9991, 109892, 12);
            e.U1$(110);
            var w = e.v9m(8, 93, 1111, 11, 99);
            d = Math.round(d * S) / w;
          }
          this.internationalizer ? (e.X3w(31), d = this.internationalizer.percent.format(e.b3p(100, d))) : (e.U1$(8), d = e.b3p("%", d)), e.X3w(43), u += e.b3p(d, ")", " (");
        }
        if (a !== !1) {
          e.X3w(2), m = Math.abs(e.v9m(i, a)), e.X3w(19);
          var T = e.v9m(36, 16, 19);
          m = Math.round(m) + T, x = this.translateIf("Bars"), e.X3w(116), u += e.b3p(" ", x, m, " ");
        }
        l && (l.innerHTML = u);
      }
      this.activeDrawing || (l = this.controls.mSticky, l && (y = l.querySelector(".mStickyInterior"), s ? (b = "i", b += "nline-", b += "blo", b += "ck", l.style.display = "inline-block", y.style.display = b, (n || n === 0) && (y.innerHTML = u), l.classList[u === "" ? "add" : "remove"]("hide"), this.positionSticky(l)) : (l.style.display = "none", y.innerHTML = "")), this.runAppend("setMeasure", arguments));
    }
  }, t.ChartEngine.prototype.clearMeasure = function () {
    e.V5D();
    var n;
    n = (this.drawingContainer || document).querySelector(".mMeasure"), n && (n.innerHTML = "");
  }, t.ChartEngine.prototype.zoomSet = function (n, r) {
    var i, a, s, o, h, l, u;
    if (n = this.constrainCandleWidth(n), this.chart.tempCanvas.style.display != "none" && t.clearCanvas(this.chart.tempCanvas, this), i = this.mainSeriesRenderer || {}, !i.params || !i.params.volume) {
      if (this.preferences.zoomAtCurrentMousePosition && this.zoomInitiatedByMouseWheel && this.crosshairTick < r.dataSet.length) a = this.crosshairTick || this.tickFromPixel(this.cx, r);else if (this.isHome()) {
        s = -592181613, o = -867328184, e.X3w(23), h = e.v9m(0, "2");
        for (var c = 1; e.Q_(c.toString(), c.toString().length, 28511) !== s; c++) {
          e.U1$(79);
          var d = e.v9m(14, 15, 14, 2, 414);
          a = r.dataSet.length % d, h += 2;
        }
        if (e.Q_(h.toString(), h.toString().length, 85002) !== o) {
          e.X3w(82);
          var f = e.b3p(20, 5, 0, 20, 9);
          a = r.dataSet.length % f;
        }
        e.U1$(8);
        var g = e.v9m(1, 0);
        a = r.dataSet.length - g;
      } else this.chart.scroll > this.chart.dataSet.length ? a = 0 : this.grabMode == "zoom-x" ? a = this.tickFromPixel(this.chart.width, r) : a = this.tickFromPixel(this.chart.width / 2, r);
      this.animations.zoom.hasCompleted && (this.zoomInitiatedByMouseWheel = !1), e.X3w(16);
      var p = e.v9m(7, 0, 8);
      l = r.dataSet.length - p - a, u = r.scroll, r.scroll = Math.round((this.pixelFromTick(a, r) - r.left) / n) + 1 + l, this.micropixels += (u - l) * this.layout.candleWidth - (r.scroll - l) * n;
    }
    e.S97(), this.setCandleWidth(n), r.spanLock = !1, this.draw(), this.doDisplayCrosshairs(), this.updateChartAccessories();
  };
};
ys = q => {
  var e = Y,
    t;
  t = q.CIQ, t.ChartEngine.prototype.currentBaseline = null, t.ChartEngine.prototype.baselineHelper = null, e.S97(), t.ChartEngine.helpersToRegister.push(function (n) {
    n.baselineHelper = new Map();
  }), t.ChartEngine.prototype.registerBaselineToHelper = function (n) {
    var r, i;
    if (!n.params.baseline) return;
    var {
      baselineHelper: a
    } = this;
    e.S97(), r = this;
    function s(h) {
      var l;
      return e.S97(), h = h.replace(" ", "_"), l = document.createElement("cq-baseline-handle"), l.classList.add("stx-baseline-handle", h), r.container.append(l), r.controls[`${h} cq-baseline-handle`] = l, l;
    }
    if (!a.has(n)) {
      var {
        name: o
      } = n.params;
      i = this.controls.baselineHandle, a.set(n, {
        styleCache: null,
        display: !1,
        handle: o === "_main_series" && i ? i : s(o)
      });
    }
  }, t.ChartEngine.prototype.removeBaselineFromHelper = function (n) {
    var r,
      i,
      a,
      {
        baselineHelper: s
      } = this;
    s.has(n) && (r = "_m", r += "ai", r += "n_serie", r += "s", i = n.params.name.replace(" ", "_"), i !== r && (a = s.get(n).handle, delete this.controls[`${i} cq-baseline-handle`], this.container.removeChild(a)), s.delete(n));
  }, t.ChartEngine.prototype.findBaselineHandle = function (n, r) {
    for (var i of this.baselineHelper) {
      var [a, s] = i,
        {
          handle: o
        } = s;
      if (n.target === o || n.composedPath && n.composedPath().includes(o)) return r && (this.repositioningBaseline = {
        lastDraw: Date.now(),
        handle: o,
        renderer: a
      }, o.classList.add("stx-grab")), this.currentBaseline = a, !0;
    }
    return e.V5D(), !1;
  }, t.ChartEngine.prototype.setBaselines = function (n) {
    var r;
    n || (n = this.chart), r = this;
    var {
      baselineHelper: i
    } = this;
    e.V5D(), i.forEach(function (s, o) {
      var h, l, u, c;
      e.V5D();
      var {
        baseline: d
      } = o.params;
      e.U1$(117), h = e.b3p(d, !0), h && (d = n.baseline);
      var {
        defaultLevel: f,
        userLevel: g
      } = d;
      l = o.getYAxis(r), l && (u = r.getYAxisBaselineRenderer(l), c = u && u != r.mainSeriesRenderer && u.seriesParams.length && u.seriesParams[0].id, d.actualLevel = g || g === 0 ? g : f, !d.actualLevel && d.actualLevel !== 0 && (d.actualLevel = a(c, h)), s.display = u === o, i.set(o, s));
    });
    function a(s, o) {
      var h,
        l,
        u,
        c,
        d,
        {
          dataSegment: f,
          dataSet: g,
          defaultPlotField: p
        } = n;
      for (h = p, o || (h = s), l = r.getFirstLastDataRecord(f, "tick").tick, e.V5D();;) {
        if (u = g[l], u) {
          if (!o || h != "Close") {
            if (e.X3w(2), c = g[e.b3p(1, l)], c && (c[h] || c[h] === 0)) return d = c[h], typeof d == "object" ? d[p] : d;
          } else if (u.iqPrevClose || u.iqPrevClose === 0) return u.iqPrevClose;
        }
        if (l--, l < 0) break;
      }
    }
  }, t.ChartEngine.prototype.setBaselineUserLevel = function () {
    var n,
      r,
      i,
      {
        chart: a,
        currentPanel: s
      } = this,
      {
        lastDraw: o,
        renderer: h
      } = this.repositioningBaseline;
    if (h.params.panel == s.name) {
      var {
        baseline: l
      } = a;
      n = typeof h.params.baseline == "object" ? h.params.baseline : l, e.S97(), r = h.getYAxis(this), i = this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY), s, r), n.userLevel = this.adjustIfNecessary(s, this.crosshairTick, i), Date.now() - o > 100 && (this.draw(), this.repositioningBaseline.lastDraw = Date.now());
    }
  }, t.ChartEngine.prototype.setBaselineMinMax = function (n, r) {
    var i,
      a,
      s,
      {
        baselineHelper: o,
        chart: h,
        repositioningBaseline: l
      } = this,
      {
        baseline: u,
        seriesRenderers: c
      } = h;
    if (i = h.transformFunc && r === h.panel.yAxis, a = r.renderers.find(p => (e.V5D(), o.get(c[p]))), !a) return n;
    var {
      baseline: d,
      type: f
    } = c[a].params;
    if (f === "mountain") return n;
    d = typeof d == "object" ? d : u;
    var {
      actualLevel: g
    } = d;
    return (g || g === 0) && (i && (g = h.transformFunc(this, h, g)), s = Math.max(g - n[0], n[1] - g), n[0] = l ? r.lowValue : g - s, n[1] = l ? r.highValue : g + s), n;
  }, t.ChartEngine.prototype.positionBaselineHandle = function (n) {
    var r, i, a, s, o, h, l, u, c, d, f, g, p, m, x;
    if (this.manageTouchAndMouse) {
      e.V5D();
      var {
          baselineHelper: y,
          chart: b,
          panels: C
        } = this,
        {
          baseline: k,
          panel: M
        } = n.params;
      r = n.params.yAxis || n.getYAxis(this);
      var {
        display: I,
        handle: v,
        styleCache: S
      } = y.get(n);
      if (k === !0 && (k = b.baseline), k.userLevel === !1 || !I) {
        v.style.display = "none";
        return;
      }
      i = C[M], a = v.classList.contains("stx-grab"), s = "b", s += "l", s += "ock", o = k.actualLevel, b.transformFunc && (o = b.transformFunc(this, b, o)), o > r.high ? (o = r.high, a || (s = "none")) : o < r.low && (h = "n", h += "o", h += "n", h += "e", o = r.low, a || (s = h)), b.untransformFunc && (o = b.untransformFunc(this, b, o)), l = this.pixelFromPrice(o, i, r), S || (S = getComputedStyle(v)), u = t.stripPX(S.width), e.U1$(25);
      var w = e.b3p(5, 0, 3);
      c = `${l - t.stripPX(S.height) / w}px`, f = this.baselineHandleBuffer || 2, e.U1$(118);
      var T = e.b3p(3, 1, 3, 1, 2);
      if (g = i.yaxisRHS.indexOf(r) + T, g) p = g === 1 ? f : f * g, d = `${b.right - u * g - p}px`;else {
        e.U1$(9);
        var D = e.v9m(9, 8);
        m = i.yaxisLHS.slice(0).reverse().indexOf(r) + D, x = m === 1 ? f : f * m, d = `${b.left + u * m + x - u}px`;
      }
      Object.assign(v.style, {
        display: s,
        top: c,
        left: d
      });
    }
  }, t.ChartEngine.prototype.getYAxisBaselineRenderer = function (n) {
    var r;
    if (!n.renderers.length) return null;
    var {
      baselineHelper: i,
      chart: a
    } = this;
    return r = n.renderers.find(s => (e.V5D(), i.get(a.seriesRenderers[s]))), r ? (e.S97(), a.seriesRenderers[r]) : null;
  }, t.ChartEngine.prototype.getYAxisBaseline = function (n) {
    var r, i;
    r = "obje", r += "ct";
    var {
      baseline: a
    } = this.chart;
    if (i = this.getYAxisBaselineRenderer(n), !i) return a;
    e.S97();
    var {
      baseline: s
    } = i.params;
    return typeof s === r ? s : a;
  };
};
bs = q => {
  var e;
  e = q.CIQ, e.ChartEngine.Chart = function () {
    this.xAxis = new e.ChartEngine.XAxis(), this.yAxis = new e.ChartEngine.YAxis(), this.symbolObject = {
      symbol: null
    }, this.series = {}, this.seriesRenderers = {}, this.xaxis = [], this.state = {}, this.endPoints = {}, this.defaultChartStyleConfig = {}, this.baseline = e.clone(this.baseline), this.panel = void 0;
  }, e.extend(e.ChartEngine.Chart.prototype, {
    symbol: null,
    symbolObject: {
      symbol: null
    },
    symbolDisplay: null,
    series: {},
    seriesRenderers: {},
    scroll: 0,
    isComparison: !1,
    forcePercentComparison: !0,
    maxTicks: 0,
    tension: null,
    currentMarketData: {},
    masterData: null,
    dataSet: null,
    scrubbed: null,
    dataSegment: null,
    segmentImage: null,
    baseline: {
      includeInDataSegment: !1,
      defaultLevel: null,
      userLevel: null,
      actualLevel: null
    },
    xAxis: null,
    xaxis: [],
    xaxisFactor: 30,
    decimalPlaces: 2,
    dynamicYAxis: !0,
    roundit: 100,
    breakpoint: null,
    legendRenderer: e.drawLegend,
    customChart: null,
    yaxisPaddingRight: null,
    yaxisPaddingLeft: null,
    tickCache: {},
    allowScrollPast: !0,
    allowScrollFuture: !0,
    whiteSpaceFutureTicks: 0,
    hideDrawings: !1,
    defaultPlotField: "Close",
    defaultChartStyleConfig: {},
    lockScroll: !1,
    includeOverlaysInMinMax: !0,
    gaplines: null,
    lineStyle: null,
    lineApproximation: !0,
    highLowBars: !1,
    standaloneBars: !1,
    barsHaveWidth: !1,
    calculateTradingDecimalPlaces: e.calculateTradingDecimalPlaces
  }, !0);
};
Cs = q => {
  var e = Y,
    t,
    n;
  t = "da", t += "t", t += "aSet", n = q.CIQ, n.ChartEngine.prototype.resolveY = function (r) {
    return e.V5D(), this.top + r;
  }, n.ChartEngine.prototype.resolveX = function (r) {
    return this.left + r;
  }, n.ChartEngine.prototype.backOutY = function (r) {
    return r - this.top;
  }, n.ChartEngine.prototype.backOutX = function (r) {
    return r - this.left;
  }, n.ChartEngine.prototype.dateFromTick = function (r, i, a, s = t) {
    var o, h, l, u, c, d;
    return i || (i = this.chart), o = i[s], h = o.length, d = !1, e.S97(), h === 0 && (o[0] = {}, o[0].DT = new Date(), h = o.length, d = !0), r < 0 ? (u = this.standardMarketIterator(o[0].DT), u ? l = u.previous(Math.abs(r)) : l = o[0].DT) : r >= h ? (u = this.standardMarketIterator(o[h - 1].DT), u ? (e.X3w(119), l = u.next(e.b3p(h, 1, r))) : l = o[h - 1].DT) : l = o[r].DT, a ? c = new Date(l.getTime()) : c = n.yyyymmddhhmmssmmm(l).substr(0, e.v9m(32, "12", e.U1$(83))), d && delete o[0].DT, c;
  }, n.ChartEngine.prototype.tickFromDate = function (r, i, a, s, o = "dataSet") {
    var h, l, u, c, d, f, g, p, m, x, y, b, C, k, M;
    if (i || (i = this.chart), h = i[o], !(h && h.length)) return 0;
    if (a || (a = 0), l = r.constructor == Date ? r : n.strToDateTime(r), n.ChartEngine.isDailyInterval(this.layout.interval) || l.setMinutes(l.getMinutes() + a), u = l.getTime(), i.tickCache[o] || (i.tickCache[o] = {}), c = i.tickCache[o][u], c || c === 0) return s ? Math.ceil(c) : Math.floor(c);
    if (d = h[0].DT, f = h[h.length - 1].DT, l >= d && l <= f) {
      for (g = 0, p = h.length, m = 0; ++m < 100;) {
        if (e.X3w(35), x = Math.floor(e.v9m(g, p, 2)), y = h[x].DT, +y == +l) return i.tickCache[o][u] = x, x;
        if (y < l && (g = x), y > l) {
          if (h[x - 1].DT < l) return e.X3w(2), i.tickCache[o][u] = e.b3p(0.5, x), s ? x : x - 1;
          if (+h[x - 1].DT == +l) return e.U1$(2), i.tickCache[o][u] = e.b3p(1, x), e.U1$(2), e.b3p(1, x);
          p = x;
        }
      }
      if (m >= 100) return console.log("!!!Warning: tickFromDate() did not find match."), h.length;
    }
    return e.X3w(84), b = e.b3p(l, d), C = b ? d : f, k = this.standardMarketIterator(C), M = k ? k.futureTick({
      end: l
    }) : 0, c = b ? M * -1 : h.length - 1 + M, i.tickCache[o][u] = c, c;
  }, n.ChartEngine.prototype.pixelFromBar = function (r, i) {
    var a, s;
    i || (i = this.chart), a = 0, s = this.chart.segmentImage, s && s[r] && s[r].leftOffset ? a = s[r].leftOffset : a = (r + 0.5) * this.layout.candleWidth, e.X3w(120);
    var o = e.v9m(4, 2, 5, 18, 8);
    return a = i.panel.left + Math.floor(a + this.micropixels) - o, a;
  }, e.S97(), n.ChartEngine.prototype.barFromPixel = function (r, i) {
    e.V5D();
    var a, s, o, h, l, u, c, d, f, g, p, m, x;
    if (i || (i = this.chart), a = this.chart.segmentImage, s = this.micropixels, o = this.layout.candleWidth, a) {
      h = r - i.panel.left - s, l = 2, c = a.length, e.U1$(31), d = Math.round(e.b3p(l, c)), e.U1$(93);
      var y = e.v9m(20, 19, 0);
      e.X3w(49);
      var b = e.b3p(17, 321, 19);
      if (p = a[c - y].leftOffset + a[c - 1].candleWidth / ("2" | b), h > p) return c + Math.floor((r - p - i.panel.left - s) / o);
      for (var C = 1; C < c && (l *= 2, u = a[d], !!u); C++) {
        f = u.leftOffset, e.U1$(69);
        var k = e.v9m(19, 47, 15, 16);
        if (g = u.candleWidth / k, e.X3w(2), m = e.v9m(g, f), e.U1$(8), x = e.v9m(g, f), d === 0 || h >= m && h < x) break;
        h < m ? d -= Math.max(1, Math.round(c / l)) : d += Math.max(1, Math.round(c / l)), d = Math.max(0, Math.min(c - 1, d));
      }
      if (!a[d]) {
        for (C = 0; C < c; C++) if (u = a[C], !!u) {
          f = u.leftOffset, e.U1$(121);
          var M = e.v9m(8, 6, 8, 334, 6);
          if (g = u.candleWidth / M, h < f - g) return e.X3w(0), Math.max(e.b3p("0", 1), e.v9m(1, C, e.X3w(2)));
          if (h < f + g) return C;
          if (h >= f + g) return e.U1$(8), e.v9m(1, C);
        }
      }
      return d;
    }
    return Math.floor((r - i.panel.left - s) / o);
  }, n.ChartEngine.prototype.tickFromPixel = function (r, i) {
    var a;
    return i || (i = this.chart), a = i.dataSet.length - i.scroll, i.segmentImage ? a += this.barFromPixel(r, i) : a += Math.floor((r - i.panel.left - this.micropixels) / this.layout.candleWidth), a;
  }, n.ChartEngine.prototype.pixelFromTick = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p;
    if (i || (i = this.chart), a = i.dataSegment, s = i.dataSet, o = i.segmentImage, h = this.micropixels, l = a ? a.length : 0, u = i.panel, c = i.scroll, d = r - s.length + c, f = l ? a[d] : null, o && (f = o[d]), f && f.leftOffset) return u.left + Math.floor(f.leftOffset + h);
    if (g = 0, p = 0, f = l ? a[l - 1] : null, o && (e.U1$(2), f = o[e.v9m(1, l)]), f && f.leftOffset && l < r - s.length + c) {
      e.X3w(93);
      var m = e.v9m(22, 11, 9);
      g = f.leftOffset - f.candleWidth / m, p = l;
    }
    return g + u.left + Math.floor((r - p - s.length + c + 0.5) * this.layout.candleWidth + h);
  }, n.ChartEngine.prototype.pixelFromDate = function (r, i, a, s) {
    return e.S97(), this.pixelFromTick(this.tickFromDate(r, i, a, s), i);
  }, n.ChartEngine.prototype.transformedPriceFromPixel = function (r, i, a) {
    e.V5D();
    var s, o, h;
    if (i || (i = this.chart.panel), s = a || i.yAxis, r = s.bottom - r, s.semiLog) h = r * s.logShadow / s.height, s.flipped ? h = s.logHigh - h : h += s.logLow, o = Math.pow(10, h);else {
      if (!s.multiplier) return null;
      o = r / s.multiplier, s.flipped ? o = s.high - o : o += s.low;
    }
    return o;
  }, n.ChartEngine.prototype.priceFromPixel = function (r, i, a) {
    var s;
    return i || (i = this.chart.panel), s = this.transformedPriceFromPixel(r, i, a), this.charts[i.name] && i.chart.untransformFunc && (!a || a == i.yAxis) && (s = i.chart.untransformFunc(this, i.chart, s, a)), s;
  }, n.ChartEngine.prototype.valueFromPixel = function (r, i, a) {
    var s;
    return i || (i = this.whichPanel(r)), e.V5D(), i || (s = Object.values(this.panels), s && s.length && (r <= 0 ? i = s.shift() : i = s.pop())), this.priceFromPixel(r, i, a);
  }, n.ChartEngine.prototype.valueFromInterpolation = function (r, i, a, s, o) {
    var h, l, u, c, d, f, g, p, m, x, y, b, C, k, M;
    return h = "un", h += "defined", l = "s", l += "tep", r === null || r < 0 || !i || (s || (s = this.chart.panel), o || (o = s.yAxis), a || (a = this.chart.defaultPlotField), u = this.getPreviousBar(this.chart, i, r), !u) ? null : (d = n.existsInObjectChain(u, i), d && (c = d.obj[d.member]), typeof c == "object" && (c = c[a]), f = this.getRendererFromSeries(i), f && f.params.step || this.layout.chartType === l ? c : (g = this.getNextBar(this.chart, i, r), d = n.existsInObjectChain(g, i), d && (p = d.obj[d.member]), typeof p == "object" && (p = p[a]), !g || c === null || typeof c > "u" || p === null || typeof p == h ? null : (m = this.pixelFromPrice(c, s, o), x = this.pixelFromPrice(p, s, o), y = u.tick, b = g.tick, e.X3w(122), C = e.b3p(x, m, y, b), k = this.chart.dataSegment[r].tick, e.U1$(123), M = e.b3p(m, C, k, y), this.priceFromPixel(M, s, o))));
  }, n.ChartEngine.prototype.pixelFromTransformedValue = function (r, i, a) {
    var s, o, h, l, u;
    return i || (i = this.chart.panel), s = a || i.yAxis, o = (s.high - r) * s.multiplier, s.semiLog && (h = Math.max(r, 0), l = Math.log(h) / Math.LN10, u = s.height, o = u - u * (l - s.logLow) / s.logShadow), o = s.flipped ? s.bottom - o : s.top + o, o;
  }, n.ChartEngine.prototype.pixelFromPrice = function (r, i, a) {
    var s, o, h;
    s = 1793422441, o = -664450853, h = 2, e.S97();
    for (var l = 1; e.N(l.toString(), l.toString().length, 43473) !== s; l++) i || (i = this.chart.panel), h += 2;
    return e.Q_(h.toString(), h.toString().length, 35057) !== o && +i && (i = this.chart.panel), this.charts[i.name] && i.chart.transformFunc && (!a || a == i.yAxis) && (r = i.chart.transformFunc(this, i.chart, r, a)), this.pixelFromTransformedValue(r, i, a);
  }, n.ChartEngine.prototype.pixelFromValueAdjusted = function (r, i, a, s) {
    var o, h;
    return this.layout.adj || !this.charts[r.name] ? this.pixelFromPrice(a, r, s) : (o = Math.round(i), o > 0 && o < r.chart.dataSet.length && (h = r.chart.dataSet[o].ratio) ? (e.U1$(0), this.pixelFromPrice(e.v9m(a, h), r, s)) : (e.S97(), this.pixelFromPrice(a, r, s)));
  }, n.ChartEngine.prototype.adjustIfNecessary = function (r, i, a) {
    var s, o;
    return this.layout.adj || !r || !this.charts[r.name] ? a : (s = Math.round(i), s > 0 && s < r.chart.dataSet.length && (o = r.chart.dataSet[s].ratio) ? (e.X3w(31), e.v9m(o, a)) : (e.S97(), a));
  };
};
Ss = q => {
  var e;
  e = q.CIQ, e.ChartEngine.prototype.positionCrosshairsAtPointer = function () {
    var t = Y,
      n,
      r,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c;
    if (n = "posit", n += "ion", n += "Cr", n += "osshairsAtPointer", r = "cha", r += "rt", i = "p", i += "x", a = this.currentPanel, !!a && !(!this.manageTouchAndMouse || this.mainSeriesRenderer && this.mainSeriesRenderer.nonInteractive) && !this.runPrepend("positionCrosshairsAtPointer", arguments)) {
      s = a.chart, o = this.container.getBoundingClientRect(), this.top = o.top, this.left = o.left, this.right = this.left + this.width, this.bottom = this.top + this.height, this.cy = this.crossYActualPos = this.backOutY(e.ChartEngine.crosshairY), this.cx = this.backOutX(e.ChartEngine.crosshairX), h = this.crosshairTick = this.tickFromPixel(this.cx, s), t.X3w(124);
      var d = t.v9m(6, 1, 1, 10, 18);
      if (l = this.pixelFromTick(h, s) - d, this.controls.crossX && (t.X3w(8), this.controls.crossX.style.left = t.b3p(i, l)), l >= a.right || l <= a.left) {
        this.undisplayCrosshairs();
        return;
      }
      u = a.name == r ? this.preferences.horizontalCrosshairField : a.horizontalCrosshairField, c = s.dataSet, u && c && h < c.length && h > -1 && (this.crossYActualPos = this.pixelFromPrice(c[h][u], a)), this.controls.crossY && (this.controls.crossY.style.top = this.crossYActualPos + "px"), this.runAppend(n, arguments);
    }
  }, e.ChartEngine.prototype.doDisplayCrosshairs = function () {
    var t = Y,
      n,
      r,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d;
    if (!this.runPrepend("doDisplayCrosshairs", arguments)) {
      if (this.displayInitialized) if (n = this.floatCanvas, r = this.currentVectorParameters.vectorType, !this.layout.crosshair && (r === "" || !r)) this.undisplayCrosshairs();else if (e.Drawing && e.Drawing[r] && new e.Drawing[r]().dragToDraw) this.undisplayCrosshairs();else if (this.overXAxis || this.overYAxis || !this.insideChart && !this.grabbingScreen) this.undisplayCrosshairs();else if (this.openDialog !== "") this.undisplayCrosshairs();else {
        if (i = this.controls, a = i.crossX, s = i.crossY, a && a.style.display !== "" && (a.style.display = "", s && (s.style.display = ""), this.magnetizedPrice && r ? (o = "bl", o += "o", o += "c", o += "k", h = "stx-crossh", h += "air-", h += "on", this.container.classList.remove(h), this.chart.tempCanvas.style.display = o) : (l = "s", l += "tx-crossha", l += "ir-on", this.container.classList.add(l))), i.floatDate && !this.chart.xAxis.noDraw) {
          i.floatDate.style.visibility = "", t.X3w(23), u = -t.v9m(0, "1854559818"), c = -1748197054, d = 2;
          for (var f = 1; t.N(f.toString(), f.toString().length, 40672) !== u; f++) this.currentPanel && this.updateFloatHRLabel(this.currentPanel), d += 2;
          t.N(d.toString(), d.toString().length, 75513) !== c && this.currentPanel && this.updateFloatHRLabel(this.currentPanel), this.currentPanel && this.updateFloatHRLabel(this.currentPanel);
        }
        n && (n.style.display == "none" && e.clearCanvas(n, this), n.style.display = "block");
      }
      this.runAppend("doDisplayCrosshairs", arguments);
    }
  }, e.ChartEngine.prototype.undisplayCrosshairs = function () {
    var t, n, r, i, a, s, o, h, l;
    this.runPrepend("undisplayCrosshairs", arguments) || (t = this.controls, n = t.crossX, r = t.crossY, n && n.style.display != "none" && (i = "n", i += "o", i += "n", i += "e", n.style.display = "none", r && (r.style.display = i)), this.displayInitialized && t.floatDate && (t.floatDate.style.visibility = "hidden"), this.container.classList.remove("stx-crosshair-on"), a = this.floatCanvas, a && a.isDirty && a.style.display != "none" && (s = "no", s += "n", s += "e", e.clearCanvas(a, this), a.style.display != "none" && (a.style.display = s)), !this.activeDrawing && !this.repositioningDrawing && !this.editingAnnotation && (o = "non", o += "e", h = "n", h += "on", h += "e", l = this.chart.tempCanvas, l && l.style.display != h && (l.style.display = o)), this.runAppend("undisplayCrosshairs", arguments));
  }, e.ChartEngine.prototype.hideCrosshairs = function () {
    var t, n, r;
    t = -1134195123, n = 1922421171, r = 2;
    for (var i = 1; Y.N(i.toString(), i.toString().length, 49547) !== t; i++) this.displayCrosshairs = !1, r += 2;
    Y.N(r.toString(), r.toString().length, 29501) !== n && (this.displayCrosshairs = !0);
  }, Y.V5D(), e.ChartEngine.prototype.showCrosshairs = function () {
    Y.V5D(), this.displayCrosshairs = !0;
  };
};
ws = q => {
  var e, t;
  e = q.CIQ, t = q.timezoneJS, e.ChartEngine.prototype.loadChart = function (n, r, i) {
    var a = Y,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f;
    !i && typeof r == "function" ? (i = r, r = {}) : Array.isArray(r) && (r = {
      masterData: r
    }), r || (r = {});
    var {
        chart: g,
        periodicity: p,
        range: m,
        span: x
      } = r,
      {
        layout: y
      } = this;
    s = {
      periodicity: y.periodicity,
      interval: y.interval,
      timeUnit: y.timeUnit
    }, p && (o = e.cleanPeriodicity(p.period ? p.period : p.periodicity, p.interval, p.timeUnit), y.interval = o.interval, y.periodicity = o.period, y.timeUnit = o.timeUnit), g || (g = this.chart);
    var {
      dataSet: b,
      market: C,
      masterData: k,
      symbol: M,
      moreAvailable: I,
      upToDate: v
    } = g;
    h = e.clone(g.symbolObject), g.dataSet = [], g.masterData = [], g.moreAvailable = null, g.upToDate = null, a.V5D(), n ? typeof n == "object" ? (g.symbol = n.symbol, g.symbolObject = n) : (g.symbol = n, g.symbolObject.symbol = n) : (g.symbol = null, g.symbolObject = {
      symbol: null
    }), g.inflectionPoint = null, this.marketFactory && (l = this.marketFactory(g.symbolObject), this.setMarket(l, g)), this.setMainSeriesRenderer(!0), !m && !x && y ? (x = y.range ? {} : y.setSpan, m = y.range || {}) : m && x && (x = {});
    function S() {
      var w;
      a.S97(), u.dispatch(u.currentlyImporting ? "symbolImport" : "symbolChange", {
        stx: u,
        symbol: g.symbol,
        symbolObject: g.symbolObject,
        prevSymbol: M,
        prevSymbolObject: h,
        action: "master"
      }), p && (w = "pe", w += "riodicity", u.dispatch(w, {
        stx: u,
        differentData: !0,
        prevPeriodicity: s
      }));
    }
    this.clearCurrentMarketData(g), u = this, !r.masterData && this.quoteDriver ? (c = function (w) {
      a.V5D(), w && w != "orphaned" && (g.symbol = M, g.symbolObject = h, g.market = C, u.masterData = g.masterData = k, g.dataSet = b, g.moreAvailable = I, g.upToDate = v), S(), i && i.call(u, w);
    }, m && Object.keys(m).length && this.setRange ? (delete r.span, delete y.setSpan, this.chart.masterData = null, this.displayInitialized = !1, p && (m.periodicity = p), m.forceLoad = !0, this.setRange(m, c)) : x && x.base && this.setSpan ? (x.multiplier = x.multiplier || 1, this.chart.masterData = null, this.displayInitialized = !1, p && (x.maintainPeriodicity = !0), x.forceLoad = !0, this.setSpan(x, c)) : this.quoteDriver.newChart({
      symbol: g.symbol,
      symbolObject: g.symbolObject,
      chart: g,
      initializeChart: !0
    }, function (w) {
      w || (u.adjustPanelPositions(), u.quoteDriver.updateSubscriptions(), r.stretchToFillScreen && u.fillScreen()), a.S97(), c.apply(u, arguments);
    })) : (r.masterData || (d = "Warning: N", d += "o masterData specified and no QuoteFeed configured", console.log(d)), g.symbol || (g.symbol = ""), this.initializeChart(), f = this.doCleanupGaps(r.masterData, g), this.setMasterData(f, g, {
      noCleanupDates: !0
    }), g.endPoints = {}, f && f.length && (g.endPoints = {
      begin: f[0].DT,
      end: f[f.length - 1].DT
    }), this.createDataSet(), m && Object.keys(m).length && this.setRange ? this.setRange(m) : x && x.multiplier && x.base && this.setSpan ? this.setSpan({
      maintainPeriodicity: !0,
      multiplier: x.multiplier,
      base: x.base
    }) : r.stretchToFillScreen ? this.fillScreen() : f && f.length ? this.home() : this.clear(), this.adjustPanelPositions(), S(), i && i.call(u));
  }, e.ChartEngine.prototype.loadBlankChart = function () {
    this.loadChart(null, []);
  }, e.ChartEngine.prototype.getDataFields = function (n) {
    var r, i, a;
    n || (n = this.chart), r = n.defaultPlotField || "Close", i = ["Open", "High", "Low"], i.push(r);
    for (var s in n.series) a = n.series[s].parameters, i.push(a.symbol);
    return Y.V5D(), i;
  }, e.ChartEngine.prototype.cleanMasterData = function (n, r) {
    var i, a, s, o, h;
    if (i = n.symbol, a = r.masterData, !a || !a.length) return;
    s = this.getDataFields(r), o = 0;
    do {
      if (h = a[o], delete h[i], l.call(this, h, s)) {
        a.splice(o, 1);
        continue;
      }
      o++;
    } while (o < a.length);
    a = this.doCleanupGaps(a, r, {
      noCleanupDates: !0
    }), this.setMasterData(a, r, {
      noCleanupDates: !0
    });
    function l(u, c) {
      var d, f;
      Y.V5D();
      for (var g = 0; g < c.length; g++) if (d = "u", d += "ndefi", d += "ned", f = u[c[g]], typeof f != d) return !1;
      return !0;
    }
    this.clearCurrentMarketData(r, i);
  }, e.ChartEngine.prototype.calculateATR = function (n, r, i) {
    var a = Y,
      s,
      o,
      h,
      l,
      u,
      c;
    i || (i = n.dataSet), s = n.state.calculations.atr, s || (s = n.state.calculations.atr = {}), r || (a.X3w(53), r = a.b3p(0, "20")), o = [], s.accum && (o = s.accum);
    for (var d = 0; d < i.length; d++) if (l = i[d], h = d ? i[d - 1] : s.q1, !!h) {
      if (u = Math.max(l.High - l.Low, Math.abs(l.High - h.Close), Math.abs(l.Low - h.Close)), o.length < r) {
        if (o.push(u) == r) {
          c = 0;
          for (var f = 0; f < o.length; f++) c += o[f];
          a.U1$(31), l.atr = a.v9m(r, c);
        }
      } else {
        a.U1$(93);
        var g = a.b3p(4, 3, 0);
        l.atr = (h.atr * (r - g) + u) / r;
      }
      l.trueRange = u;
    }
    n.state.calculations.atr = {
      accum: o,
      q1: h
    };
  }, e.ChartEngine.prototype.calculateMedianPrice = function (n, r) {
    var i;
    r || (r = n.dataSet);
    for (var a = 0; a < r.length; ++a) {
      i = r[a], Y.U1$(125);
      var s = Y.b3p(17, 6, 17, 10, 6);
      i["hl/2"] = (i.High + i.Low) / s;
    }
  }, e.ChartEngine.prototype.calculateTypicalPrice = function (n, r) {
    var i, a;
    Y.S97(), r || (r = n.dataSet);
    for (var s = 0; s < r.length; ++s) a = "hl", a += "c", a += "/", a += "3", i = r[s], i[a] = (i.High + i.Low + i.Close) / 3;
  }, e.ChartEngine.prototype.calculateWeightedClose = function (n, r) {
    var i = Y,
      a;
    r || (r = n.dataSet);
    for (var s = 0; s < r.length; ++s) {
      a = r[s], i.X3w(9);
      var o = i.b3p(14, 12);
      i.X3w(28);
      var h = i.b3p(3, 14, 14);
      a["hlcc/4"] = (a.High + a.Low + o * a.Close) / h;
    }
  }, e.ChartEngine.prototype.calculateOHLC4 = function (n, r) {
    Y.V5D();
    var i;
    r || (r = n.dataSet);
    for (var a = 0; a < r.length; ++a) {
      i = r[a], Y.X3w(126);
      var s = Y.v9m(90, 90, 3, 315, 7);
      i["ohlc/4"] = (i.Open + i.High + i.Low + i.Close) / ("4" >> s);
    }
  }, e.ChartEngine.prototype.currentQuote = function (n) {
    var r;
    if (!this.chart.dataSet) return null;
    for (var i = this.chart.dataSet.length - 1; i >= 0; i--) if (this.chart.dataSet[i]) {
      if (!n) return this.chart.dataSet[i];
      if (r = this.chart.dataSet[i][n], r || r === 0) return this.chart.dataSet[i];
    }
    return null;
  }, e.ChartEngine.prototype.mostRecentClose = function (n) {
    var r, i, a;
    if (Y.S97(), !this.chart.dataSet) return null;
    for (var s = this.chart.dataSet.length - 1; s >= 0; s--) if (r = "n", r += "umbe", r += "r", i = this.chart.dataSet[s], !!i && !(n && (i = i[n], !i && i !== 0))) {
      if (a = i.iqPrevClose, typeof i == "object" && (i = i.Close), typeof i == "number") return i;
      if (typeof a == r) return a;
    }
    return null;
  }, e.ChartEngine.prototype.createDataSegment = function (n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k;
    if (!this.runPrepend("createDataSegment", arguments)) {
      for (var M in this.charts) {
        i = this.charts[M], n && (i = n), e.Comparison && i.isComparison && e.Comparison.createComparisonSegmentInner(this, i), a = i.dataSet, s = i.baseline, o = i.scroll, h = i.maxTicks, l = this.layout, u = l.candleWidth, s.actualLevel = s.userLevel ? s.userLevel : s.defaultLevel, c = s.includeInDataSegment && (!this.mainSeriesRenderer || !this.mainSeriesRenderer.standaloneBars), r.U1$(0), f = r.b3p("0", 1), g = i.dataSegment = [], r.X3w(36);
        var I = r.v9m(2, 13, 3, 10);
        r.U1$(64);
        var v = r.b3p(14, 17, 27, 15);
        p = a.length - I - o - v, m = i.defaultPlotField;
        for (var S = -1; S < o && S < h; S++) p++, !(S == -1 && !c) && (p < a.length && p >= 0 ? (d = a[p], d.candleWidth = null, d && (f += d.Volume || 1), g.push(d), s.actualLevel === null && S >= 0 && (m && m != "Close" ? (r.X3w(2), x = a[r.v9m(1, p)], x && (x[m] || x[m] === 0) && (s.actualLevel = x[m])) : (d.iqPrevClose || d.iqPrevClose === 0) && (s.actualLevel = d.iqPrevClose))) : p < 0 && g.push(null));
        if (i.segmentImage = null, y = this.mainSeriesRenderer || {}, y.params && y.params.volume) {
          r.U1$(9);
          var w = r.b3p(12, 11);
          b = i.width - (h - g.length - w) * l.candleWidth, C = 0, i.segmentImage = [];
          for (var T = 0; T < g.length; T++) if (d = g[T], i.segmentImage[T] = {}, k = null, d) {
            if (d.Volume) {
              d.candleWidth = b * d.Volume / f, r.U1$(14);
              var D = r.b3p(21, 34, 8, 2, 5);
              k = C + d.candleWidth / D, C += d.candleWidth;
            } else d.candleWidth = u, r.U1$(41), k = r.v9m(2, u, C), C += u;
            i.segmentImage[T] = {
              tick: d.tick,
              candleWidth: d.candleWidth,
              leftOffset: k
            };
          } else C += u;
        }
        if (n) break;
      }
      i && i.isComparison && this.clearPixelCache(), this.positionCrosshairsAtPointer(), this.runAppend("createDataSegment", arguments);
    }
  }, e.ChartEngine.prototype.getDataSegment = function (n) {
    Y.S97();
    var r, i, a;
    return n || (n = this.chart), r = n.dataSegment, !r || !r.length ? [] : (i = 0, a = r.length, this.pixelFromBar(i, n) < n.panel.left && i++, this.pixelFromBar(a - 1, n) > n.panel.right && a--, r.slice(i, a));
  }, e.ChartEngine.prototype.setMasterData = function (n, r, i) {
    var a, s, o, h, l, u, c, d;
    for (r || (r = this.chart), this.marketFactory && (a = this.marketFactory(r.symbolObject), this.setMarket(a, r)), i || (i = {}), i.noCleanupDates || this.doCleanupDates(n, this.layout.interval), r.masterData = n, r.name == "chart" && (this.masterData = n), o = null, s = 0; n && s < n.length; s++) h = "setMaste", h += "rData : Missing DT", h += " and Date on masterData object", l = n[s], o === null && (u = "nu", u += "m", u += "ber", typeof l.Close == "number" ? o = "Close" : typeof l.Value === u && (c = "Va", c += "lu", c += "e", o = c)), o === "Value" && typeof l.Value == "number" && (l.Close = l.Value), l.DT ? (Object.prototype.toString.call(l.DT) != "[object Date]" && (l.DT = new Date(l.DT)), (!l.Date || l.Date.length != 17) && (l.Date = e.yyyymmddhhmmssmmm(l.DT))) : l.Date ? l.DT = e.strToDateTime(l.Date) : console.log(h), l.Volume && typeof l.Volume != "number" && (l.Volume = parseInt(l.Volume, 10)), n.length - s < 50 && this.updateCurrentMarketData(l, r, null, {
      fromTrade: !0
    });
    r.calculateTradingDecimalPlaces && (r.decimalPlaces = r.calculateTradingDecimalPlaces({
      stx: this,
      chart: r,
      symbol: r.symbolObject.symbol,
      symbolObject: r.symbolObject
    })), Y.V5D(), this.setDisplayDates(n), r.roundit = Math.pow(10, r.decimalPlaces);
    for (s in this.plugins) d = this.plugins[s], d.display && d.setMasterData && d.setMasterData(this, r);
  }, e.ChartEngine.prototype.setMasterDataRender = function (n, r, i) {
    Y.S97(), i || (i = this.chart), i.symbol || (i.symbol = ""), this.setMasterData(r, i), r && (i.endPoints = {}, r.length && (i.endPoints = {
      begin: r[0].DT,
      end: r[r.length - 1].DT
    }, i.symbol = n)), this.createDataSet(), this.initializeChart(), this.draw(), (!r || !r.length) && (i.symbol = null, this.clear()), this.adjustPanelPositions();
  }, e.ChartEngine.prototype.getSymbols = function (n) {
    var r, i, a, s, o, h, l, u, c, d, f, g, p;
    n || (n = {}), r = [], a = this.layout;
    for (var m in this.charts) {
      h = this.charts[m], h.symbolObject && h.symbolObject.symbol && r.push(y(h.symbol, h.symbolObject, a));
      for (var x in h.series) l = "exclu", l += "de-studies", u = "inclu", u += "de-param", u += "eters", c = h.series[x], d = c.parameters, !(d.data && !d.data.useDefaultQuoteFeed) && (o = d.symbolObject, s = d.symbol, i = y(s, o, a), i.id = x, n[u] && (i.parameters = e.clone(d), i.parameters.yAxis && delete i.parameters.yAxis.yAxisPlotter), !(n[l] && d.bucket == "study") && (n["exclude-generated"] && o.generator || r.push(i)));
    }
    function y(M, I, v) {
      return {
        symbol: M,
        symbolObject: I,
        periodicity: v.periodicity,
        interval: v.interval,
        timeUnit: v.timeUnit,
        setSpan: v.setSpan
      };
    }
    if (n["breakout-equations"]) {
      f = {};
      for (var b = 0; b < r.length; b++) if (s = r[b].symbol, this.isEquationChart(s)) {
        if (g = e.formatEquation(s), g) {
          p = g.symbols;
          for (var C = 0; C < p.length; C++) f[p[C]] = y(p[C], r[b].symbolObject, r[b]);
        }
      } else f[s] = y(s, r[b].symbolObject, r[b]);
      r = [];
      for (var k in f) r.push(f[k]);
    }
    return r;
  }, e.ChartEngine.prototype.setDisplayDate = function (n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l;
    if (!e.ChartEngine.isDailyInterval(this.layout.interval)) {
      i = n.DT, r.U1$(43);
      var u = r.b3p(4, 885, 111);
      if (a = i.getSeconds() * u + i.getMilliseconds(), t.Date && this.displayZone) {
        s = new t.Date(i.getTime(), this.displayZone), i = new Date(s.getFullYear(), s.getMonth(), s.getDate(), s.getHours(), s.getMinutes()), o = 1739592623, h = -393153548, l = 2;
        for (var c = 1; r.N(c.toString(), c.toString().length, 1795) !== o; c++) i = new Date(i.getTime() - a), l += 2;
        r.N(l.toString(), l.toString().length, 68342) !== h && (i = new Date(i.getTime() + a));
      }
      n.displayDate = i;
    }
  }, e.ChartEngine.prototype.setDisplayDates = function (n) {
    var r;
    if (n && !e.ChartEngine.isDailyInterval(this.layout.interval)) for (var i = 0; i < n.length; i++) r = n[i], r.DT && this.setDisplayDate(r);
  }, e.ChartEngine.prototype.setTimeZone = function (n, r) {
    var i, a, s, o, h;
    if (!t.Date) {
      this.timeZoneOffset = 0;
      return;
    }
    Y.V5D(), i = new Date(), a = i.getTimezoneOffset(), s = a, o = a, n && (this.dataZone = n), this.dataZone && (s = new t.Date(i, this.dataZone).getTimezoneOffset()), r && (this.displayZone = r), this.displayZone && (o = new t.Date(i, this.displayZone).getTimezoneOffset()), Y.X3w(127), this.timeZoneOffset = Y.b3p(a, o, a, s);
    for (var l in this.charts) h = this.charts[l], this.setDisplayDates(h.masterData);
    this.preferences.timeZone = r, this.changeOccurred("preferences"), this.createDataSet();
  }, e.ChartEngine.prototype.updateChartData = function (n, r, i) {
    var a = Y,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U;
    s = "updateCha", s += "rtData", i || (i = {}), r || (r = this.chart);
    function B() {
      var J, ae, se;
      if (J = null, a.U1$(22), a.V5D(), ae = a.b3p("0", 0), l.length && (J = c.getFirstLastDataRecord(l, d || r.defaultPlotField, !0), J)) {
        if (n[n.length - 1].DT <= J.DT) return;
        for (; ae < n.length; ae++) if (+n[ae].DT == +J.DT) {
          c.getFirstLastDataRecord([n[ae]], d || r.defaultPlotField) && (J = null);
          break;
        } else if (n[ae].DT > J.DT) break;
      }
      se = n.slice(ae), J && se.unshift(d ? J[d] : J), se = c.doCleanupGaps(se, r), J && se.shift(), n = n.slice(0, ae).concat(se);
    }
    if (o = !1, h = !1, l = r.masterData, u = this.layout, this.dataZone, c = this, d = i.secondarySeries, p = e.isValidNumber, i.noCleanupDates || this.doCleanupDates(n, u.interval), (i.useAsLastSale || n.constructor == Object && (n.Last || n.Last === 0)) && H(), n && n.constructor == Object && (n = [n]), !n || !n.length || this.runPrepend("appendMasterData", [n, r, i]) || this.runPrepend(s, [n, r, i])) return;
    l || (l = []);
    function O(J, ae) {
      var se, ne;
      if (se = l[J], d && (se = se[d] || {}), ae.Close === null) se.Open !== void 0 && (ae.Open = null), se.High !== void 0 && (ae.High = null), se.Low !== void 0 && (ae.Low = null), se.Volume !== void 0 && (ae.Volume = null);else {
        ne = "As", ne += "k", o ? (ae.Volume && (ae.Volume = parseInt(ae.Volume, 10)), h || (ae.Volume += se.Volume)) : !p(ae.Volume) && se.Volume && (ae.Volume = se.Volume), i.allowReplaceOHL || (p(se.Open) && (ae.Open = se.Open), p(se.High) && p(ae.High) && se.High > ae.High && (ae.High = se.High), p(se.Low) && p(ae.Low) && se.Low < ae.Low && (ae.Low = se.Low)), ["Close", "Open", "High", "Low", "Bid", ne].forEach(function (le) {
          p(ae[le]) || (ae[le] = se[le]);
        });
        for (f in r.series) g = r.series[f].parameters.symbolObject.symbol, typeof ae[g] > "u" && typeof se[g] < "u" && (ae[g] = se[g]);
      }
    }
    function R(J, ae) {
      var se, ne, le, ue;
      if (d) delete l[J][d], c.cleanupGaps && (ne = "g", ne += "a", ne += "p", se = {
        DT: ae,
        Close: null
      }, c.cleanupGaps != ne && l[J - 1] && l[J - 1][d] && (se.Close = l[J - 1][d].Close, se.High = se.Low = se.Open = se.Close, se.Volume = 0), l[J][d] = se);else {
        le = l.splice(J, 1)[0], se = {
          DT: le.DT,
          Close: null,
          needed: !1
        };
        for (f in r.series) ue = "un", ue += "defined", g = r.series[f].parameters.symbolObject.symbol, typeof le[g] != ue && (se[g] = le[g], delete se.needed);
        c.cleanupGaps && c.cleanupGaps != "gap" && (delete se.needed, c.cleanupGaps != "gap" && l[J - 1] && (se.Close = l[J - 1].Close, se.High = se.Low = se.Open = se.Close, se.Volume = 0)), se.needed !== !1 && (l.splice(J, 0, se), c.setDisplayDate(se));
      }
    }
    function H() {
      var J, ae;
      if (J = "In", J += "val", J += "id Dat", J += "e", o = !0, i.useAsLastSale && i.useAsLastSale.aggregatedVolume && (h = !0), n.constructor === Array) {
        a.X3w(93);
        var se = a.v9m(12, 3, 8);
        ae = n[n.length - se], n = {}, n.DT = ae.DT, n.Close = ae.Close, n.Volume = ae.Volume;
      } else n.Last && (n.Close = n.Last, delete n.Last);
      n.DT && Object.prototype.toString.call(n.DT) != "[object Date]" && (n.DT = new Date(n.DT)), (!n.DT || n.DT == J) && (n.DT = new Date()), u.interval != "tick" && X(), n.Open = n.Close, n.High = n.Close, n.Low = n.Close;
    }
    a.U1$(97);
    var z = a.b3p(12, 15, 2);
    if (m = l.length - z, x = !1, i.fillGaps && B(), !n.length) return;
    function W() {
      c.createDataSet(null, null, i), c.draw(), c.updateChartAccessories(), c.streamParameters.count = 0, a.U1$(23), c.streamParameters.timeout = -a.v9m(0, "1");
    }
    for (var G = 0; G < n.length; G++) {
      for (y = n[G], b = y.DT, C = y.Date, b && Object.prototype.toString.call(b) != "[object Date]" && (y.DT = b = new Date(b)), b && (!C || C.length != 17) && (y.Date = e.yyyymmddhhmmssmmm(y.DT)), b || (b = y.DT = e.strToDateTime(C)), !p(y.Close) && p(y.Value) && (y.Close = y.Value); m >= 0 && m < l.length;) {
        if (k = l[m].DT, k || (k = e.strToDateTime(l[m].Date)), k.getTime() <= b.getTime()) {
          if (x = !0, M = 0, k.getTime() < b.getTime()) {
            if (m < l.length - 1 && (I = l[m + 1].DT || e.strToDateTime(l[m + 1].Date), I.getTime() <= b.getTime())) {
              m++;
              continue;
            }
            M = 1;
          }
          if (i.deleteItems) {
            M || R(m, b);
            break;
          } else v = "t", v += "ic", v += "k", u.interval == v && i.firstLoop !== !1 && (M = 1), M || O(m, y), p(y.Close) && (p(y.Open) || (y.Open = y.Close), S = Math.max(y.Open, y.Close), w = Math.min(y.Open, y.Close), (!p(y.High) || y.High < S) && (y.High = S), (!p(y.Low) || y.Low > w) && (y.Low = w)), y.Volume && !p(y.Volume) && (y.Volume = parseInt(y.Volume, 10)), m += M, d ? (T = "ti", T += "c", T += "k", n.length - G < 50 && this.updateCurrentMarketData(y, r, d, {
            fromTrade: !0
          }), (u.interval != T || y.Close !== void 0) && (M && (l.splice(m, 0, {
            DT: y.DT
          }), this.setDisplayDate(l[m])), l[m][d] = y)) : (n.length - G < 50 && this.updateCurrentMarketData(y, r, null, {
            fromTrade: !0
          }), (u.interval != "tick" || y.Close !== void 0) && (l.splice(m, M ? 0 : 1, y), this.setDisplayDate(y)));
          break;
        }
        m += x ? 1 : -1;
      }
      m < 0 && (d ? (D = "t", D += "i", D += "c", D += "k", this.updateCurrentMarketData(y, r, d, {
        fromTrade: !0
      }), (u.interval != D || y.Close !== void 0) && (l.splice(0, 0, {
        DT: y.DT
      }), this.setDisplayDate(l[0]), l[0][d] = y)) : (this.updateCurrentMarketData(y, r, null, {
        fromTrade: !0
      }), (u.interval != "tick" || y.Close !== void 0) && (l.splice(0, 0, y), this.setDisplayDate(y))), x = !0, a.X3w(83), m = a.b3p(64, "0"));
    }
    l.length && (this.masterData = r.masterData = l), this.maxMasterDataSize && (l = r.masterData = this.masterData = l.slice(-this.maxMasterDataSize)), F = d ? this.getSeries({
      symbol: d,
      chart: r
    }) : [r];
    for (var Z = 0; Z < F.length; Z++) P = F[Z], (!P.endPoints.begin || P.endPoints.begin > n[0].DT) && (P.endPoints.begin = n[0].DT), (!P.endPoints.end || P.endPoints.end < n[n.length - 1].DT) && (P.endPoints.end = n[n.length - 1].DT), _ = P.parameters && P.parameters.field || r.defaultPlotField, V = this.getFirstLastDataRecord(n, _, !0), V && (!P.lastQuote || P.lastQuote.DT <= V.DT) && (P.lastQuote = V), d && i.deleteItems && (P.lastQuote = this.getFirstLastDataRecord(l, d, !0)[d]);
    function X() {
      var J, ae, se, ne, le, ue, oe, ce, Q;
      if (!(!e.Market || !r.market)) {
        if (J = {
          market_tz: e.getFromNS(r, "market.market_def.market_tz", null)
        }, ae = u.interval, (ae == "month" || ae == "week") && (c.dontRoll || (ae = "day"), J = c.chart.market.market_def), se = new e.Market(J), ne = {
          begin: l && l.length ? l[l.length - 1].DT : n.DT,
          interval: ae,
          periodicity: 1,
          timeUnit: u.timeUnit
        }, le = se.newIterator(ne), ue = le.next(), !l) n.DT = new Date(+le.previous());else if (n.DT < ue) {
          for (oe = 0, Q = le.previous(), ce = n.DT, i.appending = !0; ce < Q && oe < 1000;) i.appending = !1, Q = le.previous(), oe++;
          n.DT = Q, i.updating = !i.appending;
        } else if (n.DT >= ue) {
          for (oe = 0, ce = n.DT; ce > ue && oe < 1000;) n.DT = ue, ue = le.next(), oe++;
          i.appending = !0;
        }
      }
    }
    for (var ie in this.plugins) A = this.plugins[ie], A.display && A.appendMasterData && A.appendMasterData(this, n, r);
    if ((!this.masterData || !this.masterData.length) && (this.masterData = l), !i.noCreateDataSet) {
      if (E = this.streamParameters, ++E.count > E.maxTicks || i.bypassGovernor) clearTimeout(E.timeout), W();else if (E.timeout == -1) {
        L = 1174791474, N = -118271926, U = 2;
        for (var j = 1; a.N(j.toString(), j.toString().length, 90542) !== L; j++) E.timeout = setTimeout(W, E.maxWait), U += 2;
        a.N(U.toString(), U.toString().length, 82320) !== N && (E.timeout = setTimeout(W, E.maxWait)), E.timeout = setTimeout(W, E.maxWait);
      }
    }
    this.runAppend("appendMasterData", arguments), this.runAppend("updateChartData", arguments);
  }, e.ChartEngine.prototype.updateCurrentMarketData = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m;
    if (s = "A", s += "s", s += "kL2", o = "B", o += "i", o += "d", !(!n || !n.DT)) {
      if (r || (r = this.chart), h = a && a.fromTrade, l = n.DT, !h && this.layout.interval != "tick" && r.market) {
        if (r.market.market_def && (!r.market.isMarketDate(n.DT) || !e.ChartEngine.isDailyInterval(this.layout.interval) && r.market.getSession(n.DT) === null)) return;
        u = {
          begin: n.DT,
          interval: this.layout.interval,
          periodicity: this.layout.periodicity,
          timeUnit: this.layout.timeUnit
        }, c = new e.Market(r.market.market_def), this.extendedHours && this.extendedHours.filter && c.enableAllAvailableSessions(), d = c.newIterator(u), d.next(), n.DT = d.previous();
      }
      this.runPrepend("updateCurrentMarketData", arguments) || (f = r.currentMarketData, i && (f[i] || (f[i] = {}), f = f[i]), ["Last", o, "Ask"].forEach(function (x) {
        var y;
        Y.S97(), y = "num", y += "be", y += "r", n[x] && typeof n[x] == y && (!f[x] || !f[x].DT || f[x].DT <= n.DT) && (f[x] = {
          DT: n.DT,
          Price: n[x],
          Size: n[x + "Size"],
          Timestamp: l
        });
      }), ["BidL2", s].forEach(function (x) {
        Y.S97(), n[x] && n[x] instanceof Array && (!f[x] || !f[x].DT || f[x].DT <= n.DT) && (f[x] = {
          DT: n.DT,
          Price_Size: n[x],
          Timestamp: l
        });
      }), n.Close && (!f.Last || f.Last.DT <= n.DT) && (g = "t", g += "ick", p = n.Close, m = a && a.finalClose, (m || m === 0) && (p = m), f.Last = {
        DT: n.DT,
        Price: p,
        Size: n.LastSize === void 0 && this.layout.interval == g ? n.Volume : n.LastSize,
        Timestamp: n.LastTime || l
      }), f.touched = new Date(), h || delete n.Last, this.runAppend("updateCurrentMarketData", arguments));
    }
  }, e.ChartEngine.prototype.clearCurrentMarketData = function (n, r) {
    var i = Y,
      a,
      s,
      o,
      h,
      l,
      u;
    if (!this.runPrepend("clearCurrentMarketData", arguments)) {
      i.U1$(83), a = i.b3p(0, "449867277"), s = -278180516, o = 2;
      for (var c = 1; i.N(c.toString(), c.toString().length, 65674) !== a; c++) l = [], i.U1$(83), o += i.b3p(0, "2");
      if (i.N(o.toString(), o.toString().length, 15059) !== s && (l = []), n) l.push(n);else for (h in this.charts) l.push(this.charts[h]);
      for (h = 0; h < l.length; h++) if (u = l[h].currentMarketData, r) delete u[r];else for (var d in u) u[d] = void 0;
      this.runAppend("clearCurrentMarketData", arguments);
    }
  };
};
ks = q => {
  var e;
  e = q.CIQ, e.ChartEngine.prototype.changeOccurred = function (t) {
    var n, r, i, a, s;
    n = "pre", n += "feren", n += "ces", r = "vect", r += "or", i = "lay", i += "out", a = "t", a += "hem", a += "e", s = {
      stx: this,
      symbol: this.chart.symbol,
      symbolObject: this.chart.symbolObject,
      layout: this.layout,
      drawings: this.drawingObjects
    }, t == a && this.dispatch("theme", s), !this.currentlyImporting && (t == i ? this.dispatch("layout", s) : t == r ? this.dispatch("drawing", s) : t == n && this.dispatch("preferences", s));
  }, e.ChartEngine.prototype.startAsyncAction = function () {
    Y.V5D(), this.pendingAsyncs || (this.pendingAsyncs = []), this.pendingAsyncs.push(!0);
  }, e.ChartEngine.prototype.registerChartDrawnCallback = function (t) {
    var n, r, i;
    this.asyncCallbacks || (this.asyncCallbacks = []), this.asyncCallbacks.push(t), Y.V5D(), n = 2123331071, r = -392796615, i = 2;
    for (var a = 1; Y.N(a.toString(), a.toString().length, 24066) !== n; a++) return {
      fc: t
    };
    if (Y.Q_(i.toString(), i.toString().length, 49647) !== r) return {
      fc: t
    };
  }, e.ChartEngine.prototype.unregisterChartDrawnCallback = function (t) {
    Y.V5D();
    for (var n = 0; n < this.asyncCallbacks.length; n++) if (this.asyncCallbacks[n] == t.fc) {
      this.asyncCallbacks.splice(n, 1);
      return;
    }
  }, e.ChartEngine.prototype.makeAsyncCallbacks = function () {
    if (this.asyncCallbacks && (!this.pendingAsyncs || !this.pendingAsyncs.length)) for (var t = 0; t < this.asyncCallbacks.length; t++) this.asyncCallbacks[t]();
  }, e.ChartEngine.prototype.completeAsyncAction = function () {
    this.pendingAsyncs.pop(), Y.V5D(), this.makeAsyncCallbacks();
  }, e.ChartEngine.prototype.addDomEventListener = function (t, n, r, i) {
    Y.V5D(), t.addEventListener(n, r, i), this.eventListeners.push({
      element: t,
      event: n,
      function: r,
      options: i
    });
  }, e.ChartEngine.prototype.addEventListener = function (t, n) {
    var r, i;
    if (t === "*") for (var a in this.callbackListeners) this.callbackListeners[a].push(n);else if (t instanceof Array) for (var s = 0; s < t.length; s++) this.callbackListeners[t[s]].push(n);else {
      if (r = this.callbackListeners[t], !r) throw i = "Attempted ", i += "to add an invalid l", i += "istene", i += "r.", new Error(i);
      r.push(n);
    }
    return {
      type: t,
      cb: n
    };
  }, e.ChartEngine.prototype.removeEventListener = function (t, n) {
    var r, i, a;
    if (Y.S97(), r = "o", r += "bject", (!t || typeof t != r) && (t = {
      type: t,
      cb: n
    }), i = function (o, h) {
      Y.V5D();
      for (var l = 0; l < o.length; l++) if (o[l] === h) {
        o.splice(l, 1);
        return;
      }
    }, a = this.callbackListeners, t.type === "*") {
      for (var s in a) i(a[s], t.cb);
      return;
    }
    if (!a[t.type]) throw new Error("Attempted to remove an invalid listener.");
    i(a[t.type], t.cb);
  }, e.ChartEngine.prototype.dispatch = function (t, n) {
    var r;
    if (Y.S97(), r = this.callbackListeners[t], r) {
      for (var i = 0; i < r.length; i++) if (r[i].call(this, n) === !0) return !0;
    }
    if (r = this.callbackListeners["*"], r) {
      for (var a = 0; a < r.length; a++) if (r[a].call(this, n) === !0) return !0;
    }
    return !1;
  }, Y.V5D(), e.ChartEngine.prototype.updateListeners = function (t) {
    var n;
    Y.V5D();
    for (var r in this.plugins) n = this.plugins[r], n.display && n.listener && n.listener(this, t);
  };
};
Ts = q => {
  var e;
  e = q.CIQ, e.ChartEngine.prototype.prepend = function (t, n) {
    var r, i, a;
    return r = "pre", r += "pe", r += "nd", Y.S97(), Y.X3w(8), i = Y.v9m(t, r), this instanceof e.ChartEngine ? (a = this.hasOwnProperty(i) ? this[i] : [], this[i] = [n].concat(a)) : (a = e.ChartEngine.prototype[i] || [], e.ChartEngine.prototype[i] = [n].concat(a)), {
      method: i,
      func: n
    };
  }, e.ChartEngine.prototype.append = function (t, n) {
    var r, i;
    return Y.X3w(8), r = Y.b3p(t, "append"), Y.V5D(), this instanceof e.ChartEngine ? (i = this.hasOwnProperty(r) ? this[r] : [], this[r] = i.concat(n)) : (i = e.ChartEngine.prototype[r] || [], e.ChartEngine.prototype[r] = i.concat(n)), {
      method: r,
      func: n
    };
  }, e.ChartEngine.prototype.runPrepend = function (t, n, r) {
    var i, a, s;
    if (Y.U1$(8), i = Y.b3p(t, "prepend"), a = this.hasOwnProperty(i) ? this[i] : [], a = a.concat(e.ChartEngine.prototype[i] || []), !a.length) return !1;
    r || (r = this);
    for (var o = 0; o < a.length; o++) if (s = a[o].apply(r, n), s) return s;
    return Y.V5D(), !1;
  }, e.ChartEngine.prototype.runAppend = function (t, n, r) {
    var i, a, s, o;
    if (Y.V5D(), i = "app", i += "en", i += "d", Y.U1$(8), a = Y.v9m(t, i), s = this.hasOwnProperty(a) ? this[a] : [], s = s.concat(e.ChartEngine.prototype[a] || []), !s.length) return !1;
    r || (r = this);
    for (var h = 0; h < s.length; h++) if (o = s[h].apply(r, n), o) return o;
    return !1;
  }, e.ChartEngine.prototype.removeInjection = function (t) {
    var n, r, i, a, s;
    if (n = t.method, this instanceof e.ChartEngine) {
      if (!this[n]) return;
      for (r = 0; r < this[n].length; r++) if (this[n][r] == t.func) {
        this[n].splice(r, 1);
        return;
      }
    } else {
      i = 84062545, a = -721057073, s = 2;
      for (var o = 1; Y.N(o.toString(), o.toString().length, 90201) !== i; o++) {
        if (!e.ChartEngine.prototype[n]) return;
        s += 2;
      }
      if (Y.N(s.toString(), s.toString().length, 86687) !== a && ~e.ChartEngine.prototype[n]) return;
      for (r = 0; r < e.ChartEngine.prototype[n].length; r++) if (e.ChartEngine.prototype[n][r] == t.func) {
        e.ChartEngine.prototype[n].splice(r, 1);
        return;
      }
    }
  }, e.ChartEngine.prototype.remove = function (t) {
    var n = Y,
      r;
    this instanceof e.ChartEngine ? (n.U1$(8), delete this[n.v9m(t, "append")], n.U1$(8), delete this[n.v9m(t, "prepend")]) : (r = "a", r += "ppend", n.U1$(8), delete e.ChartEngine.prototype[n.v9m(t, r)], n.U1$(8), delete e.ChartEngine.prototype[n.b3p(t, "prepend")]);
  };
};
Ds = q => {
  var e = Y,
    t,
    n,
    r;
  t = "<d", t += "i", t += "v class=\"stx_sticky\"> <span class=\"mS", e.S97(), t += "tickyInterior\"></span></div>", n = q.CIQ, r = q.timezoneJS, n.ChartEngine.prototype.convertToDataZone = function (i) {
    e.S97();
    var a;
    return (i || i === 0) && this.dataZone && (a = n.convertTimeZone(i, null, this.dataZone), i = new Date(a.getFullYear(), a.getMonth(), a.getDate(), a.getHours(), a.getMinutes(), a.getSeconds(), a.getMilliseconds())), i;
  }, n.ChartEngine.prototype.debug = function () {}, n.ChartEngine.prototype.fps = function (i, a) {
    var s, o, h, l;
    s = " se", s += "cond", s += "s", i = i || 5, o = new Date().getTime(), h = 0, l = this, e.X3w(43), console.log(e.b3p(i, s, "Running fps() for ")), u();
    function u() {
      var c, d, f, g, p;
      e.X3w(78);
      var m = e.v9m(987, 13, 16, 10);
      if (c = (new Date().getTime() - o) / m, c > i) {
        e.U1$(31), d = e.v9m(c, h), e.X3w(8), console.log(e.v9m(d, "FPS=")), a && a(d);
        return;
      }
      l.draw(), f = 1827621631, g = 418173028, p = 2;
      for (var x = 1; e.N(x.toString(), x.toString().length, 78267) !== f; x++) h--, p += 2;
      e.N(p.toString(), p.toString().length, 34716) !== g && h++, h++, n.ChartEngine.useAnimation ? requestAnimationFrame(u) : setTimeout(u, 0);
    }
  }, n.ChartEngine.htmlControls = {
    mSticky: t,
    iconsTemplate: "<div class=\"stx-panel-control\"><div class=\"stx-panel-title\"></div><div class=\"stx-panel-legend\"></div></div>"
  }, n.ChartEngine.prototype.setChartType = function (i) {
    var a, s;
    if (e.S97(), a = this.layout, s = this.chart, a.aggregationType != "ohlc" && (a.aggregationType = "ohlc", s.canvas && this.createDataSet()), a.chartType = i, this.setMainSeriesRenderer(), this.mainSeriesRenderer.isAggregation && this.setAggregationType) return this.setAggregationType(i);
    s.defaultChartStyleConfig = {
      type: i
    }, this.displayInitialized && this.draw(), this.changeOccurred("layout");
  }, n.ChartEngine.prototype.setChartScale = function (i) {
    var a, s;
    a = "la", a += "y", a += "out", s = "l", s += "inear", e.V5D(), i || (i = s), this.layout.chartScale = i, this.chart.canvas && this.draw(), this.changeOccurred(a);
  }, n.ChartEngine.prototype.checkLogScale = function () {
    var i, a, s, o;
    if (e.V5D(), i = "l", i += "o", i += "g", !this.runPrepend("checkLogScale", arguments)) return this.layout.chartScale !== i ? !1 : (a = !1, this.chart.yAxis.lowValue <= 0 && (s = "logdea", s += "cti", s += "vated", o = "l", o += "ine", o += "ar", this.setChartScale(o), this.dispatch("notification", s), a = !0), this.runAppend("checkLogScale", arguments), a);
  }, n.ChartEngine.prototype.setAdjusted = function (i) {
    this.layout.adj = i, e.S97(), this.chart.canvas && (this.createDataSet(), this.draw()), this.changeOccurred("layout");
  }, n.ChartEngine.prototype.padOutPrice = function (i, a) {
    var s, o, h, l;
    if (i !== 0 && (!i || typeof i != "number")) return "";
    if (!a && a !== 0 && (a = i), e.V5D(), e.U1$(8), s = e.v9m(a, ""), o = 0, s.indexOf(".") > -1) {
      e.U1$(8);
      var u = e.v9m(8742, 874);
      e.U1$(8), e.b3p(19, 8851), e.U1$(25);
      var c = e.b3p(14, 3275, 2634);
      e.U1$(128);
      var d = e.v9m(10, 7, 8, 2, 4);
      e.X3w(129), e.v9m(5245151, 4561, 18, 4, 16), e.U1$(49);
      var f = e.v9m(6947, 125052, 19);
      e.U1$(49);
      var g = e.v9m(4171, 41721, 11);
      e.X3w(130), e.b3p(15, 86, 14, 891, 17), e.U1$(131);
      var p = e.v9m(1, 515, 5, 13);
      e.X3w(132);
      var m = e.v9m(14, 8771, 8708, 2, 78939);
      e.U1$(8), e.b3p(19, 7631), e.X3w(72);
      var x = e.v9m(1, 11, 23, 3, 6138);
      e.U1$(133);
      var y = e.b3p(18, 14, 14, 13, 5);
      o = s.substring(s.indexOf(u > c ? "3180" >> d >= f ? g == p ? m : "Z" : "." : x)).length - y;
    }
    return a >= 1000 ? o = Math.max(o, 0) : a < 2 ? o = Math.max(o, 4) : (e.U1$(83), o = Math.max(o, e.v9m(64, "2"))), h = this.internationalizer, h ? (l = h.priceFormatters.length, o >= l && (e.U1$(2), o = e.v9m(1, l)), i = h.priceFormatters[o].format(i)) : i = i.toFixed(o), i;
  }, n.ChartEngine.prototype.formatPrice = function (i, a) {
    var s, o, h;
    return i !== 0 && (!i || typeof i > "u") ? "" : (a || (a = this.currentPanel), a || (a = this.chart.panel), !a || (s = a.decimalPlaces, !s && s !== 0 && (s = a.chart.decimalPlaces), !s && s !== 0) ? i.toString() : (o = this.internationalizer, o ? (h = o.priceFormatters.length, s >= h && (e.X3w(2), s = e.v9m(1, h)), i = o.priceFormatters[s].format(i)) : i = i.toFixed(s), e.V5D(), i));
  }, n.ChartEngine.prototype.determineMinMax = function (i, a, s, o, h, l, u, c, d) {
    var f, g, p, m, x, y, b, C, k, M, I;
    f = Number.MAX_VALUE * -1, g = Number.MAX_VALUE, p = !1, m = i.length, d || (d = []), x = [], h && (m = h);
    for (var v = 0; v <= m + 1; v++) if (a.length && (v == m ? y = this.getPreviousBar(this.chart, a[0], 0) : v == m + 1 ? y = this.getNextBar(this.chart, a[0], m - 1) : y = i[v]), !!y) {
      if (!o) {
        if (y.transform) p = !0, y = y.transform;else if (p) continue;
      }
      b = 0;
      for (var S = 0; S < a.length; S++) if (C = n.existsInObjectChain(y, a[S]), !!C) {
        k = C.obj[C.member], typeof k == "number" && (k = [k]);
        for (var w = 0; w < k.length; w++) M = k[w], l && M instanceof Array && (M = M[0]), (M || M === 0) && (s === !0 || s instanceof Array && s.indexOf(a[S]) > -1 ? (b += M, b > f && (f = b), b < g && (g = b)) : (M > f && (f = M), M < g && (g = M), x.push({
          value: M,
          quote: y
        })));
      }
      (s === !0 || s instanceof Array && s.indexOf(a[S]) > -1) && x.push({
        value: b,
        quote: y
      });
    }
    return I = [g, f], d.forEach(function (T) {
      I = T(x, u, c) || I;
    }), I[1] == Number.MAX_VALUE * -1 && (I[1] = 0), I[0] == Number.MAX_VALUE && (I[0] = 0), I;
  }, n.ChartEngine.prototype.initializeDisplay = function (i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k;
    if (a = "L", a += "o", a += "w", s = "C", s += "lo", s += "se", o = "i", o += "n", o += "itializeDisplay", this.runPrepend(o, arguments)) return;
    h = [], l = [], u = !1, c = this, d = [s, "Open", "High", a], f = [i.defaultPlotField || "Close"];
    var {
        mainSeriesRenderer: M
      } = this,
      {
        dataSegment: I,
        seriesRenderers: v
      } = i;
    if (p = null, m = Math.floor((i.width - this.micropixels) / this.layout.candleWidth), i.scroll > i.maxTicks && i.maxTicks > m + 1) {
      e.X3w(8);
      var S = e.b3p(14, 50);
      p = I.length - ("1" << S);
    }
    x = [];
    function w(_, V) {
      var A, E, L, N, U, B, O, R, H, z, W;
      if (A = !1, E = c.layout && c.layout.studies && c.layout.studies[_.name], E && (!V || V.name == E.panel)) {
        L = "_h", L += "ist";
        for (var G in E.outputMap) h.push(G), E.study && (E.study.renderer ? h = h.concat(n.createObjectChainNames(G, d)) : E.study.seriesFN || (h = h.concat(n.createObjectChainNames(G, f))));
        for (var Z = 0; Z <= 2; Z++) h.push(E.name + L + (Z || ""));
        A = !0;
      }
      if (V) {
        _.studies = [], _.renderers = [], A && _.studies.push(_.name);
        for (var X in v) if (N = v[X], U = N.params, B = U.panel, (U.yAxis || !c.panels[B] || c.panels[B].yAxis) == _ && B == V.name) {
          O = N.highLowBars ? d : f, u = N.bounded;
          for (var ie = 0; ie < N.seriesParams.length; ie++) R = N.seriesParams[ie], !R.hidden && (H = void 0, R.subField ? H = n.createObjectChainNames(R.symbol, [R.subField]).concat(R.symbol) : R.symbol ? H = n.createObjectChainNames(R.symbol, O).concat(R.symbol) : R.field ? H = R.field : _ == i.panel.yAxis && (H = O), H && (h = h.concat(H)), N.useSum && (l = l.concat(H)));
          _.renderers.push(X);
        }
        for (var j in c.overlays) z = c.overlays[j], z.panel == V.name && z.name != _.name && (W = z.getYAxis(c), W == _ && (_.studies.push(z.name), i.includeOverlaysInMinMax && w({
          name: z.name
        })));
      }
    }
    for (var T in this.panels) {
      y = this.panels[T], x = y.yaxisLHS.concat(y.yaxisRHS);
      for (var D = 0; D < x.length; D++) {
        if (b = x[D], h = [], l = [], C = i.transformFunc && b == i.panel.yAxis, w(b, y), !this.currentlyImporting && !b.renderers.length && !b.studies.length) {
          this.deleteYAxisIfUnused(y, b);
          continue;
        }
        M && M.determineMax ? g = M.determineMax(I, h, l, !C, p, u, y, b) : g = this.determineMinMax(I, h, l, !C, p, u, y, b), this.baselineHelper && (g = this.setBaselineMinMax(g, b)), b.lowValue = g[0], b.highValue = g[1], b == i.panel.yAxis && (i.lowValue = b.lowValue, i.highValue = b.highValue);
      }
    }
    if (k = i.state.aggregation, k && k.box) {
      e.X3w(36);
      var F = e.v9m(6, 9, 5, 1);
      i.lowValue -= k.box / F, e.X3w(134);
      var P = e.v9m(6, 19, 146, 5, 0);
      i.highValue += k.box / P;
    }
    this.runAppend("initializeDisplay", arguments);
  }, n.ChartEngine.prototype.setMarket = function (i, a) {
    if (n.Market) {
      e.S97(), a || (a = this.chart), a.market = new n.Market(i);
      for (var s in this.layout.marketSessions) a.market.disableSession(s, this.layout.marketSessions[s]);
    }
  }, n.ChartEngine.prototype.setMarketFactory = function (i) {
    var a, s, o;
    e.S97(), a = -1326078821, s = -142594045, o = 2;
    for (var h = 1; e.Q_(h.toString(), h.toString().length, 87248) !== a; h++) this.marketFactory = i, e.X3w(83), o += e.v9m(64, "2");
    e.Q_(o.toString(), o.toString().length, 87632) !== s && (this.marketFactory = i);
  }, n.ChartEngine.prototype.setResizeTimer = function (i) {
    this.resizeDetectMS = i, this.resizeHandle = n.resizeObserver(this.chart.container, a(this), this.resizeHandle, i);
    function a(s, o) {
      var h;
      return e.S97(), h = function () {
        e.V5D(), s.chart.canvas && (n.isAndroid || (s.chart.canvas.height != Math.floor(s.devicePixelRatio * s.chart.container.clientHeight) || s.chart.canvas.width != Math.floor(s.devicePixelRatio * s.chart.container.clientWidth)) && s.resizeChart());
      }, function () {
        var l;
        l = "undef", l += "ined", typeof ResizeObserver !== l ? n.ChartEngine.useAnimation ? requestAnimationFrame(h) : (e.U1$(53), setTimeout(h, e.b3p(64, "0"))) : h();
      };
    }
  }, n.ChartEngine.prototype.getRenderedItems = function () {
    var i, a, s, o, h, l, u, c, d, f, g;
    if (i = "C", i += "lo", i += "se", a = "Hig", a += "h", s = "O", s += "pe", s += "n", o = this.chart, h = this.currentPanel, !!h) {
      l = [s, a, "Low", "Close"], u = [i], c = [];
      for (var p in this.overlays) this.overlays[p].panel === h.name && (c = c.concat(Object.keys(this.overlays[p].outputMap)));
      for (var m in o.seriesRenderers) if (d = o.seriesRenderers[m], d.params.panel == h.name) for (var x in d.seriesParams) f = d.seriesParams[x], g = d.highLowBars ? l : u, f.subField ? c = c.concat(n.createObjectChainNames(f.symbol, [f.subField])).concat(f.symbol) : f.symbol ? c = c.concat(n.createObjectChainNames(f.symbol, g)).concat(f.symbol) : f.field ? c.push(f.field) : h == o.panel && (c = c.concat(g));
      return c;
    }
  }, n.ChartEngine.prototype.setTransform = function (i, a, s) {
    e.S97(), i.transformFunc = a, i.untransformFunc = s;
  }, n.ChartEngine.prototype.unsetTransform = function (i) {
    delete i.transformFunc, delete i.untransformFunc;
    for (var a = 0; i.dataSet && a < i.dataSet.length; a++) i.dataSet[a].transform = null;
  }, n.ChartEngine.prototype.isEquationChart = function (i) {
    return i && i[0] == "=" ? !this.allowEquations || !n.fetchEquationChart ? (console.warn("Error, equation chart option requires equationsAdvanced.js"), !1) : !0 : !1;
  }, n.ChartEngine.prototype.correctIfOffEdge = function (i) {
    var a, s, o, h, l, u, c, d, f, g;
    if (!this.runPrepend("correctIfOffEdge", arguments)) {
      for (var p in this.charts) {
        if (a = this.charts[p], s = a.dataSet, o = a.maxTicks, h = this.layout, l = this.minimumLeftBars, u = Math.min(l, o), a.allowScrollPast) {
          if (e.X3w(2), c = e.v9m(u, o), u > s.length && (c = o - s.length), a.scroll - c >= s.length) {
            e.U1$(8);
            var m = e.b3p(1, 0);
            a.scroll = s.length + c - m, this.micropixels = 0;
          }
          a.scroll <= u && (a.scroll = u, this.micropixels = 0);
        } else a.scroll < u && (a.scroll = u), a.scroll > s.length && (a.scroll = s.length);
        if (a.allowScrollFuture === !1) {
          d = this.getLabelOffsetInPixels(a, h.chartType) + h.candleWidth * a.whiteSpaceFutureTicks, e.X3w(45);
          var x = e.v9m(2, 20, 3, 20);
          f = o - Math.round(d / h.candleWidth) - x, g = this.micropixels < 0 ? a.scroll - 1 : a.scroll, g < f && (a.scroll = f, this.micropixels = 0);
        }
      }
      this.runAppend("correctIfOffEdge", arguments);
    }
  }, n.ChartEngine.prototype.getStartDateOffset = function () {
    e.V5D();
    for (var i = 0; i < this.chart.dataSegment.length; i++) if (this.chart.dataSegment[i]) return i;
    return 0;
  }, n.ChartEngine.prototype.setStartDate = function (i) {
    var a;
    e.V5D();
    for (var s = 0; s < this.chart.dataSet.length; s++) if (a = this.chart.dataSet[s], a.DT.getTime() == i.getTime()) {
      this.chart.scroll = this.chart.dataSet.length - s, this.draw();
      return;
    }
  }, n.ChartEngine.prototype.clearPixelCache = function () {
    var i, a;
    for (var s in this.panels) i = this.panels[s], i.cacheHigh = null, i.cacheLow = null, i.cacheLeft = 1000000, i.cacheRight = -1;
    for (var o in this.charts) if (a = this.charts[o], !!a.dataSet) for (var h = 0; h < a.dataSet.length; h++) a.dataSet[h].cache = {};
  }, n.ChartEngine.prototype.adjustBackingStore = function (i, a) {
    var s, o, h, l;
    if (this.devicePixelRatio = window.devicePixelRatio || 1, this.devicePixelRatio < 1 && (this.devicePixelRatio = 1), s = a.webkitBackingStorePixelRatio || a.mozBackingStorePixelRatio || a.msBackingStorePixelRatio || a.oBackingStorePixelRatio || a.backingStorePixelRatio || 1, e.V5D(), o = this.devicePixelRatio / s, !this.useBackingStore) {
      this.devicePixelRatio = this.adjustedDisplayPixelRatio = 1;
      return;
    }
    (!n.isAndroid || n.is_chrome || n.isFF) && (h = i.width, l = i.height, e.U1$(0), i.width = e.b3p(h, o), e.U1$(0), i.height = e.v9m(l, o), e.X3w(8), i.style.width = e.v9m("px", h), e.U1$(8), i.style.height = e.b3p("px", l), a.scale(o, o), this.adjustedDisplayPixelRatio = o, this.backing = {
      ratio: o,
      width: i.width,
      height: i.height,
      styleWidth: h,
      styleHeight: l
    });
  }, n.ChartEngine.prototype.reconstituteBackingStore = function () {
    var i, a;
    !this.useBackingStore || !this.backing || (i = [this.chart.canvas], this.useBackgroundCanvas && i.push(this.chart.backgroundCanvas), e.V5D(), a = this.backing, i.forEach(function (s) {
      s.width != a.width && (s.width = a.width, s.height = a.height, s.context.scale(a.ratio, a.ratio));
    }), this.adjustedDisplayPixelRatio = a.ratio, this.draw());
  }, n.ChartEngine.prototype.disableBackingStore = function () {
    var i, a;
    !this.useBackingStore || !this.backing || (i = [this.chart.canvas], this.useBackgroundCanvas && i.push(this.chart.backgroundCanvas), e.S97(), a = this.backing, i.forEach(function (s) {
      s.width != a.styleWidth && (s.width = a.styleWidth, e.S97(), s.height = a.styleHeight, s.context.scale(1, 1));
    }), this.adjustedDisplayPixelRatio = 1, this.draw());
  }, n.ChartEngine.prototype.getBackgroundCanvas = function (i) {
    return i || (i = this.chart), this.useBackgroundCanvas ? i.backgroundCanvas : i.canvas;
  }, n.ChartEngine.prototype.resizeCanvas = function () {
    var i, a, s, o, h, l, u, c;
    i = this.chart.canvas, a = this.chart.context, i && a && (this.floatCanvas.height = this.chart.tempCanvas.height = this.chart.backgroundCanvas.height = i.height = this.chart.container.clientHeight, this.floatCanvas.width = this.chart.tempCanvas.width = this.chart.backgroundCanvas.width = i.width = this.chart.container.clientWidth, this.adjustBackingStore(i, a), this.adjustBackingStore(this.chart.tempCanvas, this.chart.tempCanvas.context), this.adjustBackingStore(this.floatCanvas, this.floatCanvas.context), this.adjustBackingStore(this.chart.backgroundCanvas, this.chart.backgroundCanvas.context)), s = this.container.getBoundingClientRect(), this.top = s.top, this.left = s.left, e.S97(), this.canvasWidth = this.chart.canvasWidth = this.chart.container.clientWidth, this.right = this.left + this.canvasWidth, this.height = this.chart.container.clientHeight, this.width = this.right - this.left, this.width === 0 && !this.container.dimensionlessCanvas && this.container.closest("html") && console.log("warning: zero width chart. Check CSS for chart container."), this.bottom = this.top + this.height, this.calculateYAxisPositions(), this.chart.canvasRight = this.right, this.chart.canvasHeight = this.height, o = this.layout.candleWidth, typeof o > "u" && (o = 8);
    for (var d in this.charts) {
      h = this.charts[d], this.setCandleWidth(o, h), h.scroll < h.width / o && (h.scroll = Math.floor(h.width / o), l = Math.round(this.preferences.whitespace / this.layout.candleWidth), h.scroll -= l), u = 10;
      try {
        c = a.measureText("10:00").width * 2;
      } catch {
        c = 100;
      }
      for (; u > 1 && !(this.chart.width / c > u);) u /= 1.5;
      h.xAxis.autoComputedTickSizePixels = Math.round(this.chart.width / u), h.xAxis.autoComputedTickSizePixels < 1 && (h.xAxis.autoComputedTickSizePixels = 1);
    }
  }, n.ChartEngine.prototype.setCandleWidth = function (i, a) {
    a || (a = this.chart), i = this.constrainCandleWidth(i), this.layout.candleWidth = i, e.X3w(8);
    var s = e.v9m(1, 0);
    a.maxTicks = Math.round(a.width / i) + s;
  }, n.ChartEngine.prototype.constrainCandleWidth = function (i) {
    var a, s, o;
    return a = this.minimumCandleWidth, s = this.maximumCandleWidth, o = this.animations.zoom, a && i < a && (i = a, o && o.running && o.stop()), s && i > s && (i = s, o && o.running && o.stop()), i;
  }, n.ChartEngine.prototype.resizeChart = function (i) {
    var a, s;
    a = "resize", a += "C", a += "har", a += "t", !this.runPrepend(a, arguments) && (i !== !1 && (i = !0), i && this.preAdjustScroll(), s = this.chart.canvasHeight, this.resizeCanvas(), i && this.postAdjustScroll(), this.displayInitialized ? (this.adjustPanelPositions(), this.draw()) : this.chart.canvasHeight !== 0 && s === 0 && (this.adjustPanelPositions(), this.draw()), this.doDisplayCrosshairs(), this.updateChartAccessories(), this.runAppend("resizeChart", arguments));
  }, n.ChartEngine.prototype.clear = function () {
    var i, a;
    this.displayInitialized = !1;
    for (var s in this.layout.studies) i = "Studi", i += "e", i += "s.removeStudy", a = this.layout.studies[s], n.getFn(i)(this, a);
    this.controls.chartControls && (this.controls.chartControls.style.display = "none"), this.chart.panel.title.innerHTML = "", this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display));
  }, n.ChartEngine.prototype.fillScreen = function () {
    var i, a, s, o, h;
    if (i = this.chart, a = this.layout.candleWidth, s = i.width - this.preferences.whitespace, e.V5D(), o = i.dataSet.length, o * a >= s) {
      this.draw();
      return;
    }
    (!this.mainSeriesRenderer || !this.mainSeriesRenderer.standaloneBars) && o--, e.X3w(31), h = e.v9m(o, s), this.setCandleWidth(h, i), this.home({
      maintainWhitespace: !0
    });
  }, n.ChartEngine.prototype.setMaxTicks = function (i, a) {
    var s;
    a || (a = {}), i = Math.round(i), i < 2 && (i = 2), s = a.padding ? a.padding : 0, this.layout.candleWidth = (this.chart.width - s) / i, this.layout.candleWidth || (this.layout.candleWidth = 8), this.chart.maxTicks = Math.round(this.chart.width / this.layout.candleWidth - 0.499), (a.padding || a.padding === 0) && (e.X3w(8), this.chart.scroll = e.v9m(1, i));
  }, n.ChartEngine.prototype.initializeChart = function (i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v;
    if (a = "c", a += "an", a += "v", a += "as", s = "d", s += "i", s += "v", this.runPrepend("initializeChart", arguments)) return;
    o = this.chart, o.symbolObject.symbol || (o.symbolObject.symbol = o.symbol), this.locale && this.setLocale(this.locale), !this.displayZone && n.ChartEngine.defaultDisplayTimeZone && this.setTimeZone(null, n.ChartEngine.defaultDisplayTimeZone), this.resetDynamicYAxis({
      noRecalculate: !0
    }), this.calculateYAxisPositions(), this.micropixels = 0, i ? o.container = i : i = o.container, i.stx = this, i.CIQRegistered || (i.CIQRegistered = !0, n.ChartEngine.registeredContainers.push(i)), this.registerHTMLElements && this.registerHTMLElements(), h = o.canvas, l = o.backgroundCanvas, u = o.tempCanvas, c = this.floatCanvas, d = o.canvasShim, h && document.createElement("canvas").getContext ? (h.id || (i.removeChild(h), o.canvas = null), u && !u.id && (i.removeChild(u), o.tempCanvas = null), c && !c.id && (i.removeChild(c), this.floatCanvas = null), l && !l.id && (i.removeChild(l), o.backgroundCanvas = null)) : this.setCandleWidth(this.layout.candleWidth), o.backgroundCanvas || (l = o.backgroundCanvas = document.createElement("canvas")), i.appendChild(l), S(l), o.canvasShim || (d = o.canvasShim = document.createElement(s)), d.className = "stx-canvas-shim", i.appendChild(d), e.S97(), o.canvas || (h = o.canvas = document.createElement(a)), i.appendChild(h), S(h), o.context = h.context, o.tempCanvas || (u = o.tempCanvas = document.createElement("canvas")), i.appendChild(u), S(u, !0), this.floatCanvas || (c = this.floatCanvas = document.createElement("canvas")), i.appendChild(c), S(c, !0);
    function S(P, _) {
      var V, A;
      V = "n", V += "o", V += "ne", P.context = P.getContext("2d"), P.context.lineWidth = 1, A = P.style, A.position = "absolute", A.left = "0px", _ && (A.display = V);
    }
    this.resizeCanvas(), n.isAndroid && (u.ontouchstart = c.ontouchstart = function (P) {
      e.V5D(), P.preventDefault && P.preventDefault();
    }), f = this.panels, o.panel.display = o.symbol, o.symbolDisplay && (o.panel.display = o.symbolDisplay), this.adjustPanelPositions(), o.panel = f[o.name];
    for (var w in f) {
      g = f[w].yaxisLHS.concat(f[w].yaxisRHS);
      for (var T = 0; T < g.length; T++) g[T].height = f[w].yAxis.height, this.calculateYAxisMargins(g[T]);
    }
    this.initialWhitespace = this.preferences.whitespace, o.dataSet && o.dataSet.length > 0 && (o.scroll = Math.floor(o.width / this.layout.candleWidth), p = Math.round(this.preferences.whitespace / this.layout.candleWidth), o.scroll -= p), n.touchDevice && (m = ".ov", m += "erlayEdi", m += "t", x = i.querySelector(m), y = i.querySelector(".overlayTrashCan"), b = i.querySelector(".vectorTrashCan"), C = function (P, _, V) {
      return function (A) {
        e.S97(), P.deleteHighlighted(_, V);
      };
    }, x ? (n.safeClickTouch(x, C(this, !0, !0)), y && n.safeClickTouch(y, C(this, !1))) : y && n.safeClickTouch(y, C(this, !0)), b && n.safeClickTouch(b, C(this, !0))), this.manageTouchAndMouse && this.registerTouchAndMouseEvents(), this.handleMouseOut && (i.onmouseout = function (P) {
      return function (_) {
        P.handleMouseOut(_);
      };
    }(this), n.smartHover()), this.abortDrawings && this.abortDrawings(), this.undoStamps = [];
    for (var D in f) k = f[D], k.markerHolder && (i.removeChild(k.markerHolder), k.markerHolder = null);
    for (var F in this.plugins) M = this.plugins[F], M.display && M.initializeChart && M.initializeChart(this);
    this.resizeListenerInitialized || (I = this, this.resizeListenerInitialized = !0, v = function () {
      return function (P) {
        I.resizeChart();
      };
    }, this.addDomEventListener(window, "resize", v(), !0)), o.baseline.userLevel && (o.baseline.userLevel = null), this.setResizeTimer(this.resizeDetectMS), this.runAppend("initializeChart", arguments);
  }, n.ChartEngine.prototype.destroy = function () {
    var i, a, s, o, h;
    this.setResizeTimer(0), this.quoteDriver && this.quoteDriver.die(), this.styles = {}, e.V5D();
    for (var l = 0; l < this.eventListeners.length; l++) i = "func", i += "ti", i += "o", i += "n", a = this.eventListeners[l], a.element.removeEventListener(a.event, a[i], a.options);
    this.touchAndMouseEventsRegistered = !1, this.eventListeners = [], this.streamParameters.timeout && clearTimeout(this.streamParameters.timeout), s = n.ChartEngine.registeredContainers, o = s.indexOf(this.chart.container), o > -1 && s.splice(o, 1), this.slider && (h = s.indexOf(this.slider.slider.chart.container), h > -1 && s.splice(h, 1));
  }, n.ChartEngine.prototype.preAdjustScroll = function (i) {
    i || (i = this.chart), e.V5D(), this.previousAdjust = {
      chart: i,
      scroll: i.scroll,
      maxTicks: i.maxTicks
    };
  }, n.ChartEngine.prototype.postAdjustScroll = function () {
    var i;
    this.previousAdjust && (i = this.previousAdjust.chart, i.scroll = this.previousAdjust.scroll + (i.maxTicks - this.previousAdjust.maxTicks), this.displayInitialized && this.draw());
  }, n.ChartEngine.prototype.translateIf = function (i) {
    return this.translationCallback ? this.translationCallback(i) : i;
  }, n.ChartEngine.prototype.doCleanupDates = function (i, a) {
    var s, o, h, l, u;
    if (!(!i || !i.length)) {
      for (var c = 0; c < i.length; c++) if (s = i[c], o = s.DT, !(!o && !s.Date)) {
        if (s.DT && Object.prototype.toString.call(o) == "[object String]" && o.length <= 10) o = new Date(o), o.setMinutes(o.getMinutes() + o.getTimezoneOffset());else {
          if (h = !0, s.DT || (o = n.strToDateTime(s.Date), s.Date.length <= 10 && (h = !1)), Object.prototype.toString.call(o) != "[object Date]" && (o = new Date(o)), r.Date && this.dataZone && h) {
            l = new r.Date(o.getFullYear(), o.getMonth(), o.getDate(), o.getHours(), o.getMinutes(), this.dataZone), e.X3w(25);
            var d = e.b3p(10, 1009, 19);
            u = o.getSeconds() * d + o.getMilliseconds(), o = new Date(l.getTime() + u);
          }
          n.ChartEngine.isDailyInterval(a) && (e.U1$(53), o.setHours(e.v9m(32, "0"), 0, e.v9m(32, "0", e.U1$(83)), 0));
        }
        s.DT || (s.Date = n.yyyymmddhhmmssmmm(o)), s.DT = o;
      }
    }
  }, n.ChartEngine.prototype.doCleanupGaps = function (i, a, s) {
    var o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M;
    o = "t", o += "ick";
    function I(T, D) {
      var F, P, _, V, A;
      for (F = s.field, P = F ? g[F] : g, P === void 0 && (P = {}), _ = u ? null : P[y], V = u ? null : P.Adj_Close; +T < +D;) A = {
        DT: T
      }, F || (f.push(A), n.extend(A, {
        Open: _,
        High: _,
        Low: _,
        Close: _,
        Volume: 0,
        Adj_Close: V
      })), T = x.next();
    }
    if (!i || !i.length || (h = this.layout.interval, s = s || {}, a || (a = this.chart), !n.Market || !a.market)) return i;
    s.noCleanupDates || this.doCleanupDates(i, h);
    function v(T, D) {
      var F, P, _;
      if (F = s.field, F) {
        typeof T[F] < "u" && typeof D[F] > "u" && (D[F] = u ? null : T[F]);
        return;
      }
      u || (P = T[y], _ = D[y], typeof P < "u" && typeof _ > "u" && n.ensureDefaults(D, {
        Close: P,
        Open: P,
        High: P,
        Low: P,
        Volume: 0,
        Adj_Close: T.Adj_Close
      }));
    }
    if (l = s.cleanupGaps, l === !1 || ((!l || l === !0) && (l = this.cleanupGaps || l), e.X3w(107), u = e.b3p("gap", l), !l) || h == o) return i;
    if (h == "month" || h == "week") {
      if (c = "d", c += "a", c += "y", this.dontRoll) return i;
      h = c;
    }
    d = function (T) {
      var D;
      return T.DT ? (D = "[object Date", D += "]", Object.prototype.toString.call(T.DT) != D ? new Date(T.DT) : new Date(+T.DT)) : n.strToDateTime(T.Date);
    }, f = [], g = i[0], f.push(g), p = {
      begin: d(g),
      interval: h,
      periodicity: 1,
      timeUnit: this.layout.timeUnit
    }, m = new n.Market(a.market.market_def), x = m.newIterator(p), this.extendedHours && this.extendedHours.filter && x.market.enableAllAvailableSessions(), y = a.defaultPlotField;
    for (var S = 0; S < i.length && i[S][y] === void 0; S++) if (i[S].Value !== void 0) {
      b = "V", b += "alu", b += "e", y = b;
      break;
    }
    for (var w = 1; w < i.length; w++) {
      for (k = i[w], C = x.next(), M = d(k), C < M && (I(C, M), C = x.market._convertFromMarketTZ(x.begin, x.outZone)); M < C;) {
        if (++w == i.length) return f;
        v(g, k), f.push(k), g = k, k = i[w], M = d(k);
      }
      C < M ? (w--, C = x.previous()) : (v(g, k), f.push(k), g = k);
    }
    return f;
  }, n.ChartEngine.prototype.getCreatingLibrary = function () {
    return e.V5D(), q;
  };
};
As = q => {
  var e;
  e = q.CIQ, e.ChartEngine.Panel = function (t, n) {
    n ? this.yAxis = n : this.yAxis = new e.ChartEngine.YAxis(), Y.S97(), this.name = t, this.state = {};
  }, e.extend(e.ChartEngine.Panel.prototype, {
    name: null,
    display: null,
    chart: null,
    yAxis: null,
    shareChartXAxis: null,
    top: null,
    bottom: null,
    height: null,
    percent: null,
    displayEdgeIfPadded: !0,
    noDrag: !1,
    exportable: !0
  }, !0), e.ChartEngine.prototype.whichPanel = function (t) {
    var n;
    for (var r in this.panels) if (n = this.panels[r], !n.hidden && t >= n.top && t < n.bottom) return n;
    return null;
  }, e.ChartEngine.prototype.panelExists = function (t) {
    var n;
    for (var r in this.panels) if (n = this.panels[r], n.name == t) return !0;
    return !1;
  }, e.ChartEngine.prototype.storePanels = function () {
    var t, n;
    this.layout || (this.layout = {}), t = this.layout, Y.S97(), t.panels = {};
    for (var r in this.panels) n = this.panels[r], t.panels[n.name] = {
      percent: n.percent,
      display: n.display,
      yAxis: n.yAxis
    };
  }, e.ChartEngine.prototype.savePanels = function (t) {
    this.storePanels(), Y.V5D(), t !== !1 && this.changeOccurred("layout");
  }, e.ChartEngine.prototype.privateDeletePanel = function (t) {
    var n, r, i;
    for (var a in this.layout.studies) n = this.layout.studies[a], n.panel == t.name && this.cleanupRemovedStudy(n);
    delete this.panels[t.name];
    for (var s in this.overlays) this.overlays[s].panel == t.name && (this.layout.studies && this.cleanupRemovedStudy(this.layout.studies[s]), delete this.overlays[s]);
    Y.V5D();
    for (var o in this.chart.series) this.chart.series[o].parameters.panel == t.name && this.removeSeries(this.chart.series[o], this.chart);
    if (t.holder && (this.chart.container.removeChild(t.holder), this.getMarkerArray)) {
      r = "panel", r += "Na", r += "me", i = this.getMarkerArray(r, t.name);
      for (var h = 0; h < i.length; h++) this.removeFromHolder(i[h]);
    }
    t.handle && t.handle.remove(), this.currentPanel = null;
  }, e.ChartEngine.prototype.plotsInPanel = function (t) {
    var n, r, i, a;
    n = [], r = t, typeof t == "object" && (r = t.name);
    for (var s in this.layout.studies) i = this.layout.studies[s], r === i.panel && n.push(i);
    for (var o in this.chart.seriesRenderers) a = this.chart.seriesRenderers[o], r === a.params.panel && n.push(a);
    return n;
  }, e.ChartEngine.prototype.checkForEmptyPanel = function (t, n, r) {
    var i, a;
    if (!t || (Y.V5D(), i = t, typeof t == "object" && (i = t.name), i === this.chart.name)) return !1;
    r ? r instanceof Array || (r = [r]) : r = [], a = this.plotsInPanel(t);
    for (var s = 0; s < a.length; s++) if (r.indexOf(a[s]) == -1) return !1;
    return n || this.panelClose(this.panels[i]), !0;
  }, e.ChartEngine.prototype.panelClose = function (t) {
    var n;
    if (t && !this.runPrepend("panelClose", arguments)) {
      if (this.cancelTouchSingleClick = !0, Y.V5D(), e.ChartEngine.drawingLine = !1, t.soloing && this.panelSolo(t), this.charts[t.name]) {
        for (var r in this.panels) n = this.panels[r], n.chart.name == t.name && this.privateDeletePanel(n);
        delete this.charts[t.name];
      } else this.privateDeletePanel(t);
      this.currentlyImporting || (this.showCrosshairs(), this.resetDynamicYAxis({
        noRecalculate: !0
      }), this.calculateYAxisPositions(), this.draw(), this.savePanels()), this.userPointerDown = this.grabbingScreen = !1, this.openDialog && (this.openDialog = ""), this.runAppend("panelClose", arguments);
    }
  }, e.ChartEngine.prototype.deleteAllPanels = function () {
    var t;
    for (var n in this.panels) t = this.panels[n], this.privateDeletePanel(t);
    this.layout.panels = {}, this.panels = {};
  }, e.ChartEngine.prototype.panelUp = function (t) {
    var n, r, i, a;
    this.cancelTouchSingleClick = !0, e.ChartEngine.drawingLine = !1, this.showCrosshairs(), n = {}, r = 0;
    for (i in this.panels) {
      if (i == t.name) break;
      r++;
    }
    if (r) {
      a = 0;
      for (i in this.panels) a == r - 1 && (n[t.name] = t), i != t.name && (n[i] = this.panels[i], a++);
      this.panels = n, this.adjustPanelPositions(), this.draw(), this.savePanels();
    }
  }, e.ChartEngine.prototype.panelDown = function (t) {
    var n, r, i, a, s;
    this.cancelTouchSingleClick = !0, e.ChartEngine.drawingLine = !1, this.showCrosshairs(), n = {}, r = 0;
    for (i in this.panels) {
      if (i == t.name) break;
      r++;
    }
    a = 0;
    for (i in this.panels) a++;
    if (r != a - 1) {
      s = 0;
      for (i in this.panels) {
        if (i == t.name) {
          s++;
          continue;
        }
        n[i] = this.panels[i], s == r + 1 && (n[t.name] = t), s++;
      }
      this.panels = n, this.adjustPanelPositions(), this.draw(), this.savePanels();
    }
  }, e.ChartEngine.prototype.panelSolo = function (t) {
    var n, r, i, a;
    if (this.cancelTouchSingleClick = !0, e.ChartEngine.drawingLine = !1, this.showCrosshairs(), n = !0, t.soloing) {
      if (i = "stx_", i += "s", i += "olo_lit", n = !1, t.soloing = !1, t.solo.classList.remove(i), t.percent = t.oldPercent, t.name != "chart") if (this.soloPanelToFullScreen) {
        if (t.percent == 1) for (r in this.panels) a = this.panels[r], a != t && (t.percent -= a.percent);
      } else this.chart.panel.percent = this.chart.panel.oldPercent;
      this.soloPanelToFullScreen && (this.xAxisAsFooter = this.chart.panel.oldXAxisAsFooter);
    } else if (t.soloing = !0, t.solo.classList.add("stx_solo_lit"), t.oldPercent = t.percent, this.chart.panel.oldXAxisAsFooter = this.xAxisAsFooter, t.name != "chart") if (this.soloPanelToFullScreen) this.xAxisAsFooter = !0;else {
      this.chart.panel.oldPercent = this.chart.panel.percent, Y.X3w(9);
      var s = Y.b3p(4, 3);
      t.percent = s - this.chart.panel.percent;
    }
    for (r in this.panels) this.panels[r].hidden = n;
    this.soloPanelToFullScreen || (this.chart.panel.hidden = !1), t.hidden = !1, this.resetDynamicYAxis({
      noRecalculate: !0
    }), this.calculateYAxisPositions(), this.draw(), this.savePanels();
  }, e.ChartEngine.prototype.calculatePanelPercent = function (t) {
    var n;
    n = t.bottom - t.top, Y.S97(), t.percent = n / this.chart.canvasHeight;
  }, e.ChartEngine.prototype.resizePanels = function () {
    var t = Y,
      n,
      r,
      i,
      a,
      s,
      o;
    if (e.ChartEngine.resizingPanel) {
      s = e.ChartEngine.crosshairY > this.resolveY(e.ChartEngine.resizingPanel.top);
      for (var h in this.panels) {
        if (this.panels[h] == e.ChartEngine.resizingPanel) break;
        this.panels[h].hidden || (n = this.panels[h]);
      }
      if (o = this.backOutY(e.ChartEngine.crosshairY), s) for (i = e.ChartEngine.resizingPanel.yaxisLHS.concat(e.ChartEngine.resizingPanel.yaxisRHS), a = 0; a < i.length; a++) {
        t.U1$(36);
        var l = t.v9m(8, 2, 6, 2);
        r = i[a].initialMarginTop + i[a].initialMarginBottom + l, o > i[a].bottom - r && (o = i[a].bottom - r);
      } else for (i = n.yaxisLHS.concat(n.yaxisRHS), a = 0; a < i.length; a++) {
        t.X3w(64);
        var u = t.v9m(13, 25, 185, 10);
        r = i[a].initialMarginTop + i[a].initialMarginBottom + u, o < i[a].top + r && (o = i[a].top + r);
      }
      e.ChartEngine.crosshairY = this.resolveY(o), n.bottom = o, e.ChartEngine.resizingPanel.top = o, t.S97(), this.calculatePanelPercent(n), this.calculatePanelPercent(e.ChartEngine.resizingPanel), this.adjustPanelPositions(), this.draw(), this.savePanels();
    }
  }, e.ChartEngine.prototype.isPanelAboveChart = function (t) {
    Y.V5D();
    var n;
    for (var r in this.panels) {
      if (n = "char", n += "t", r == n) return !1;
      if (r == t.name) return !0;
    }
    return !1;
  }, e.ChartEngine.prototype.adjustPanelPositions = function () {
    var t = Y,
      n,
      r,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k;
    n = "s", n += "tx", n += "-show";
    var {
      chart: M,
      panels: I
    } = this;
    if (M.tempCanvas && e.clearCanvas(M.tempCanvas, this), !this.runPrepend("adjustPanelPositions", arguments)) {
      t.U1$(83), r = t.b3p(0, "0"), i = M.canvasHeight, t.V5D(), a = !1, s = 0, o = 0, h = !1;
      for (l in I) u = I[l], (isNaN(u.percent) || u.percent <= 0) && (u.percent = 0.05), !u.hidden && (s += u.percent, o++, u.soloing && (h = !0));
      for (l in I) {
        if (c = 0, u = I[l], u.hidden) {
          u.markerHolder && (u.markerHolder.style.display = "none");
          continue;
        }
        if (this.manageTouchAndMouse && (u.up && (a ? this.displayIconsUpDown && u.up.classList.add("stx-show") : (a = !0, u.up.classList.remove("stx-show"))), u.solo && (h ? u.soloing && this.displayIconsSolo ? u.solo.classList.add("stx-show") : u.solo.classList.remove("stx-show") : o == 1 || o == 2 && !this.soloPanelToFullScreen ? u.solo.classList.remove("stx-show") : this.displayIconsSolo && u.solo.classList.add("stx-show")), u.down && (o == 1 ? u.down.classList.remove("stx-show") : this.displayIconsUpDown && u.down.classList.add("stx-show")), u.edit && (u.editFunction ? u.edit.classList.add("stx-show") : u.edit.classList.remove("stx-show")), u.close && (this.displayIconsClose ? u.close.classList.add("stx-show") : u.close.classList.remove("stx-show"))), u.percent = u.percent / s, u.top = r, u.bottom = u.top + i * u.percent, u.height = u.bottom - u.top, u.chart.name == u.name && (u.chart.top = u.top, u.chart.bottom = u.bottom, u.chart.height = u.height), r = u.bottom, u.yaxisLHS) {
          d = u.yaxisLHS.concat(u.yaxisRHS);
          for (var v = 0; v < d.length; v++) f = d[v], f.zoom && f.height > 0 && (c = f.zoom / f.height), this.adjustYAxisHeightOffset(u, f), f.height = f.bottom - f.top, c && (f.scroll *= c * f.height / f.zoom, f.zoom = c * f.height, f.zoom > f.height && (f.zoom = 0, f.scroll = 0)), !f.high && f.high !== 0 && (f.high = 100, f.low = 0, f.shadow = 100), f.multiplier = f.height / f.shadow, f.position === "none" && this.calculateYAxisMargins(f);
        }
        u.holder && (g = "p", g += "x", p = "0p", p += "x", m = "p", m += "x", x = "p", x += "x", u.holder.style.right = "0px", u.holder.style.top = u.top + "px", u.holder.style.left = "0px", u.holder.style.height = u.height + x, u.subholder.style.left = u.left + m, u.subholder.style.width = u.width + "px", u.subholder.style.top = p, u.yAxis.height >= 0 && (u.subholder.style.height = u.yAxis.height + g));
      }
      if (l && I[l].down && I[l].down.classList.remove(n), this.manageTouchAndMouse && o == 2 && !h && M.panel.solo && M.panel.solo.classList.add("stx-show"), M.panel) {
        if (h && this.soloPanelToFullScreen) {
          t.U1$(135);
          var S = t.v9m(9, 9, 33, 132, 15);
          y = M.canvasHeight - u.yAxis.bottom + S;
        } else {
          t.U1$(46);
          var w = t.b3p(5, 52, 4, 52, 63);
          y = M.canvasHeight - M.panel.yAxis.bottom + ("12" >> w);
        }
        b = this.controls;
        var {
          chartControls: T,
          home: D,
          notificationTray: F
        } = b;
        C = this.width - M.panel.right, T && (t.X3w(8), T.style.bottom = t.b3p("px", y)), D && (k = "p", k += "x", t.X3w(8), D.style.bottom = t.b3p(k, y), t.U1$(8), D.style.marginRight = t.v9m("px", C)), F && (t.X3w(8), F.style.bottom = t.b3p("px", y), t.X3w(8), F.style.marginRight = t.b3p("px", C));
      }
      this.clearPixelCache(), this.drawingObjects.length && this.adjustDrawings(), this.runAppend("adjustPanelPositions", arguments);
    }
  }, e.ChartEngine.prototype.createPanel = function (t, n, r, i, a, s) {
    var o = Y,
      h,
      l,
      u,
      c,
      d,
      f;
    if (h = "createP", o.V5D(), h += "a", h += "n", h += "el", !this.runPrepend("createPanel", arguments)) {
      i || (i = "chart"), l = this.chart.canvasHeight, r || (o.U1$(0), r = o.b3p(l, 0.2)), r > l && (o.X3w(0), r = o.b3p(l, 0.5)), o.U1$(31), u = o.b3p(l, r), o.U1$(136), c = o.b3p("1", u, 0), d = !1;
      for (var g in this.panels) f = this.panels[g], f.percent *= c, f.soloing && (d = !0);
      return this.stackPanel(t, n, u, i, a), this.panels[n].hidden = d, this.panels[n].exportable = !s, this.adjustPanelPositions(), this.savePanels(!1), this.runAppend(h, arguments), this.panels[n];
    }
  }, e.ChartEngine.prototype.modifyPanel = function (t, n) {
    var r, i, a, s, o, h, l, u, c, d, f, g;
    r = "ve", r += "ct", r += "o", r += "r", i = t.name;
    var {
        studies: p
      } = this.layout,
      {
        series: m
      } = this.chart,
      {
        name: x,
        display: y,
        yAxis: b
      } = n || {};
    x || (x = e.uniqueID()), y || (y = x), Y.V5D(), b || (b = t.yAxis, b.name = x), a = {};
    for (var C in this.panels) C === t.name ? (s = this.panels[C], s.name = x, s.display = y, s.yAxis = b, t = a[x] = s, this.moveMarkers && i !== x && this.moveMarkers(i, x)) : a[C] = this.panels[C];
    this.panels = a, o = 1473247658, h = -87405852, l = 2;
    for (var k = 1; Y.N(k.toString(), k.toString().length, 50078) !== o; k++) u = !0, l += 2;
    Y.N(l.toString(), l.toString().length, 55805) !== h && (u = !1);
    for (var M in p) c = p[M], c.panel === i && (c.panel = x, c.parameters && c.parameters.panelName && (u = !0, c.parameters.panelName = x));
    for (var I in m) m[I].parameters.panel === i && (u = !0, d = {
      panel: x
    }, m[I].parameters.yAxis && m[I].parameters.yAxis.name === i && (d.yAxis = b), this.modifySeries(I, d, !0));
    u && this.changeOccurred("layout"), f = !1;
    for (var v = 0; v < this.drawingObjects.length; v++) g = this.drawingObjects[v], i === g.panelName && (g.panelName = x, f = !0);
    f && this.changeOccurred(r), this.calculateYAxisPositions();
  }, e.ChartEngine.prototype.setPanelHeight = function (t, n) {
    var r = Y,
      i,
      a,
      s,
      o;
    if (n) {
      Object.values(this.panels).slice(-1)[0] === t && (n += this.xaxisHeight);
      var {
          canvasHeight: h
        } = this.chart,
        {
          percent: l
        } = t;
      r.X3w(31), i = r.b3p(h, n), r.U1$(137), a = r.b3p(l, "1", 0), r.X3w(2), s = r.v9m(i, 1), r.S97(), r.U1$(31), o = r.b3p(s, a), Object.values(this.panels).forEach(u => {
        u.percent /= o;
      }), t.percent = i, this.adjustPanelPositions(), this.savePanels();
    }
  }, e.ChartEngine.prototype.electNewPanelOwner = function (t, n) {
    var r, i, a, s, o, h, l, u;
    function c(f) {
      return f.name != i.name;
    }
    if (typeof t == "string" && (t = this.panels[t]), i = t.yAxis, t && t != this.chart.panel) {
      if (a = t.yAxis, s = a.studies[0], (!s || s == i.name) && (s = a.renderers[0]), (!s || s == i.name) && (s = a.studies[1]), s || (s = a.renderers[1]), n) a = t.yAxis = n, r = n.name;else if (s) a = this.addYAxis(t, new e.ChartEngine.YAxis({
        name: s,
        position: a.position
      })), a.renderers = t.yAxis.renderers, a.studies = t.yAxis.studies, r = s;else if (t.yaxisLHS) {
        o = t.yaxisRHS.concat(t.yaxisLHS).filter(c), h = o[0];
        for (var d = 0; d < o.length; d++) if (!o[d].position) {
          h = o[d];
          break;
        }
        h && (a = t.yAxis = h, r = h.studies[0] || h.renderers[0]);
      }
      r ? (s = r, i.name != t.name && (s = t.name), u = this.layout.studies, u && u[r] && (l = u[r].inputs.display), this.modifyPanel(t, {
        name: s,
        display: l || r,
        yAxis: a
      }), this.deleteYAxisIfUnused(t, i), this.calculateYAxisMargins(this.panels[s].yAxis)) : this.checkForEmptyPanel(t);
    }
    return Y.S97(), r;
  }, e.ChartEngine.prototype.configurePanelControls = function (t) {
    var n = Y,
      r,
      i,
      a,
      s,
      o,
      h,
      l;
    r = ".", r += "stx", r += "-", r += "ico-close", i = ".stx-i", i += "co-down", a = ".stx-p", a += "anel-title", n.S97(), s = "s", s += "tx-show", o = t.icons, o && (h = t.name == t.chart.name, o.classList.add(s), t.title = o.querySelector(a), t.up = o.querySelector(".stx-ico-up"), t.up && (t.up = t.up.parentNode), t.solo = o.querySelector(".stx-ico-focus"), t.solo && (t.solo = t.solo.parentNode), t.down = o.querySelector(i), t.down && (t.down = t.down.parentNode), t.edit = o.querySelector(".stx-ico-edit"), t.edit && (t.edit = t.edit.parentNode), t.close = o.querySelector(r), t.close && (t.close = t.close.parentNode), t.title && (t.title.innerHTML = "", t.display && t.title.appendChild(document.createTextNode(t.display)), h && (t.title.classList.add("chart-title"), o.classList.add("stx-chart-panel"))), (!e.touchDevice || e.isSurface) && this.makeModal(o), t.handle && ((!e.touchDevice || e.isSurface) && (t.handle.onmouseover = function (u) {
      return n.V5D(), function () {
        u.hideCrosshairs();
      };
    }(this)), (!e.touchDevice || e.isSurface) && (t.handle.onmouseout = function (u) {
      return function () {
        u.showCrosshairs();
      };
    }(this)), l = function (u, c) {
      return n.S97(), function (d) {
        e.ChartEngine.resizingPanel || u.openDialog !== "" || (n.V5D(), u.grabHandle(c));
      };
    }, e.isSurface ? t.handle.onpointerdown = l(this, t) : t.handle.onmousedown = l(this, t), e.touchDevice && (t.handle.ontouchstart = l(this, t))), t.up && e.safeClickTouch(t.up, function (u, c) {
      return n.V5D(), function () {
        n.S97(), u.panelUp(c);
      };
    }(this, t)), t.down && e.safeClickTouch(t.down, function (u, c) {
      return n.S97(), function () {
        u.panelDown(c);
      };
    }(this, t)), t.solo && e.safeClickTouch(t.solo, function (u, c) {
      return n.V5D(), function () {
        n.S97(), u.panelSolo(c);
      };
    }(this, t)), t.close && (t.name == "chart" ? t.close.style.display = "none" : e.safeClickTouch(t.close, function (u, c) {
      return n.V5D(), function () {
        n.S97(), u.panelClose(c);
      };
    }(this, t))));
  }, e.ChartEngine.prototype.stackPanel = function (t, n, r, i, a) {
    var s, o, h, l, u;
    s = "stx-panel", s += "-study", !this.runPrepend("stackPanel", arguments) && (i || (i = "chart"), o = this.charts[i], Y.U1$(107), h = Y.v9m(i, n), h && (t = o.symbol, o.symbolDisplay && (t = o.symbolDisplay), a || (a = o.yAxis)), l = this.panels[n] = new e.ChartEngine.Panel(n, a), !h && o.yAxis && l.yAxis.position == o.yAxis.position && (l.yAxis.width = o.yAxis.width), h && !o.panel && (o.panel = l), l.percent = r, l.chart = o, l.display = t, l.holder = e.newChild(this.container, "div", "stx-holder"), l.subholder = e.newChild(l.holder, "div", "stx-subholder"), l.subholder.style.zIndex = 1, l.holder.panel = l, u = h ? "stx-panel-chart" : s, l.holder.classList.add(u), this.controls.handleTemplate && this.manageTouchAndMouse && (l.handle = this.controls.handleTemplate.cloneNode(!0), this.container.appendChild(l.handle), l.handle.panel = l), this.controls.iconsTemplate && (l.icons = this.controls.iconsTemplate.cloneNode(!0), l.subholder.appendChild(l.icons), this.configurePanelControls(l)), this.currentlyImporting || this.resizeCanvas(), this.runAppend("stackPanel", arguments));
  }, e.ChartEngine.prototype.setPanelEdit = function (t, n) {
    t.editFunction = n, t.edit && e.safeClickTouch(t.edit, n), this.adjustPanelPositions();
  }, e.ChartEngine.prototype.drawPanels = function () {
    var t, n, r, i, a, s, o, h, l, u, c, d, f;
    if (t = "drawP", t += "anels", !this.runPrepend(t, arguments)) {
      n = !1;
      for (var g in this.panels) {
        if (r = "stx", r += "_panel_border", i = "st", i += "x", i += "-show", a = this.panels[g], a.state = {}, s = this.translateIf(a.display), a.title && a.title.textContent != s && (a.title.innerHTML = "", a.title.appendChild(document.createTextNode(s))), a.icons && a.icons.classList.add(i), a.hidden) {
          a.icons && a.icons.classList.remove("stx-show"), a.handle && (a.handle.style.display = "none"), a.holder.style.display = "none";
          continue;
        } else a.name != "chart" && (o = "n", o += "o", o += "ne", h = this.manageTouchAndMouse, a.up && (a.up.style.display = this.displayIconsUpDown && h ? "" : "none"), a.down && (a.down.style.display = this.displayIconsUpDown && h ? "" : "none"), a.solo && (a.solo.style.display = this.displayIconsSolo && h ? "" : "none"), a.close && (a.close.style.display = this.displayIconsClose && h ? "" : o), a.edit && (a.edit.style.display = a.editFunction && h ? "" : "none")), a.holder.style.display = "block";
        if (a.displayEdgeIfPadded && (l = "s", l += "tx_grid_", l += "border", u = Math.round(a.left) + 0.5, c = a.yAxis.top - 0.5, d = a.yAxis.bottom + 0.5, a.yaxisCalculatedPaddingLeft && !a.yaxisTotalWidthLeft && this.plotLine(u, u, c, d, this.canvasStyle("stx_grid_border"), "segment", this.chart.context, !1, {
          lineWidth: 1
        }), u = Math.round(a.right) + 0.5, a.yaxisCalculatedPaddingRight && !a.yaxisTotalWidthRight && this.plotLine(u, u, c, d, this.canvasStyle(l), "segment", this.chart.context, !1, {
          lineWidth: 1
        })), !n) {
          a.handle && (a.handle.style.display = "none"), n = !0;
          continue;
        }
        if (f = a.top, f = Math.round(f) + 0.5, this.plotLine(a.left - 0.5, a.right + 0.5, f, f, this.canvasStyle(r), "segment", this.chart.context, !1, {}), a.handle) {
          this.displayPanelResize ? a.handle.style.display = "" : a.handle.style.display = "none", Y.U1$(10);
          var p = Y.v9m(3, 9, 15, 47);
          a.handle.style.top = f - a.handle.offsetHeight / p + "px";
        }
      }
      this.runAppend("drawPanels", arguments);
    }
  };
};
Ms = q => {
  var e;
  e = q.CIQ, e.ChartEngine.isDailyInterval = function (t) {
    var n;
    return n = "d", Y.V5D(), n += "ay", t == n || t == "week" || t == "month";
  }, e.ChartEngine.prototype.setPeriodicity = function (t, n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M;
    i = "setPerio", i += "d", i += "icity", a = "lay", a += "ou", a += "t", s = "fun";
    function I() {
      l.dispatch("periodicity", u), r.S97(), n && n(null);
    }
    if (s += "ct", s += "ion", !this.runPrepend("setPeriodicity", arguments)) {
      if (typeof arguments[0] != "object") {
        t = {
          period: arguments[0],
          interval: arguments[1],
          timeUnit: arguments[2]
        }, r.U1$(138);
        var v = r.b3p(6, 7, 15, 4, 19);
        n = arguments[arguments.length - v], arguments.length === 3 && (t.timeUnit = void 0);
      }
      var {
        period: S,
        interval: w,
        timeUnit: T
      } = t;
      typeof n !== s && (n = null), ({
        period: S,
        interval: w,
        timeUnit: T
      } = e.cleanPeriodicity(S, w, T));
      var {
        layout: D
      } = this;
      D.setSpan = {}, D.range = {}, this.chart.inflectionPoint = null, o = !1, this.chart.symbol && (o = this.needDifferentData({
        period: S,
        interval: w,
        timeUnit: T
      }));
      var {
        candleWidth: F,
        periodicity: P,
        interval: _,
        timeUnit: V
      } = D;
      if (h = {
        prvPeriodicity: P,
        prvInterval: _,
        prvTimeUnit: V
      }, D.periodicity = S, D.interval = w, D.timeUnit = T, l = this, u = {
        stx: l,
        differentData: o,
        prevPeriodicity: h
      }, o) {
        if (this.changeOccurred("layout"), this.clearCurrentMarketData(), this.quoteDriver) for (var A in this.charts) c = this.charts[A], c.symbol && (this.displayInitialized ? this.quoteDriver.newChart({
          symbol: c.symbol,
          symbolObject: c.symbolObject,
          chart: c
        }, I) : this.loadChart(c.symbol, {
          chart: c
        }, I));else this.dataCallback ? (this.dataCallback(), I()) : (d = "cannot change periodicity b", d += "ecause neither da", d += "taCallback or quoteDriv", d += "er are set", console.log(d));
        this.home();
        return;
      }
      for (var E in this.charts) {
        f = this.charts[E];
        var {
          dataSegment: L,
          dataSet: N,
          maxTicks: U,
          scroll: B
        } = f;
        if (g = L ? L.length : 0, p = N ? N.length : 0, m = void 0, x = Math.round(f.maxTicks / 2), this.setCandleWidth(F, f), y = !0, b = !1, B <= U ? y = !1 : L && !L[x] && (y = !1, r.X3w(2), b = r.v9m(p, B)), y && g > 0 && (U < (Math.round(this.chart.width / F - +"0.499") - 1) / 2 && (r.U1$(2), x = r.b3p(1, g)), x >= g ? (m = L[g - 1].DT, r.X3w(2), x = r.v9m(1, g)) : m = L[x].DT), this.createDataSet(), y) {
          if (g > 0) {
            for (var O = p - 1; O >= 0; O--) if (C = N[O].DT, C.getTime() < m.getTime()) {
              r.X3w(85), f.scroll = r.b3p(1, x, p, O);
              break;
            }
          }
        } else b ? f.scroll = N.length + b : (k = Math.round(this.preferences.whitespace / F), r.X3w(127), f.scroll = r.b3p(k, "1", 0, U));
      }
      if (this.displayInitialized && this.draw(), this.changeOccurred(a), this.quoteDriver) for (var R in this.charts) M = this.charts[R], M.symbol && (M.moreAvailable || !M.upToDate) && this.quoteDriver.checkLoadMore(M);
      I(), this.runAppend(i, arguments);
    }
  }, e.ChartEngine.prototype.needDifferentData = function (t) {
    var n, r, i, a;
    return n = this.layout, Y.V5D(), r = e.ChartEngine.isDailyInterval(t.interval), i = e.ChartEngine.isDailyInterval(n.interval), a = !1, this.dontRoll || !i ? n.interval != t.interval && (a = !0) : r != i && (a = !0), !r && !t.timeUnit && (t.timeUnit = "minute"), !i && !n.timeUnit && (n.timeUnit = "minute"), t.timeUnit != n.timeUnit && (a = !0), (!this.masterData || !this.masterData.length) && (a = !0), a;
  }, e.ChartEngine.prototype.getPeriodicity = function () {
    var t, n, r;
    return t = this.layout, n = t.interval, r = t.timeUnit, r || (r = n, n = 1), {
      period: t.periodicity,
      interval: n,
      timeUnit: r
    };
  };
};
_s = q => {
  var e = Y,
    t,
    n,
    r,
    i;
  t = 1006553351, n = 174407438, r = 2;
  for (var a = 1; e.Q_(a.toString(), a.toString().length, 33703) !== t; a++) i = q.CIQ, r += 2;
  e.Q_(r.toString(), r.toString().length, 95454) !== n && (i = q.CIQ), i = q.CIQ, i.ChartEngine.prototype.isHistoricalMode = function () {
    var s, o, h, l, u, c, d;
    return s = new Date(), e.V5D(), o = !0, h = this.masterData, this.isHistoricalModeSet ? (h.length && (l = "D", l += "T", u = this.getFirstLastDataRecord(h, l, !0), c = this.standardMarketIterator(u.DT), o = (c ? c.next() : u.DT) <= s, o && i.ChartEngine.isDailyInterval(c.interval) && (d = this.chart.market.getOpen(), d && s < d && (s.setHours(0, 0, 0, 0), +s == +c.begin && (o = !1)))), o) : !1;
  }, i.ChartEngine.prototype.isHome = function () {
    var s, o, h;
    s = this.chart, o = s.dataSet, h = s.animatingHorizontalScroll, e.U1$(18);
    var l = e.v9m(11, 5, 11, 3);
    e.X3w(58);
    var u = e.v9m(3, 15, 2, 20);
    return this.pixelFromTick(o.length - (h ? l : u), s) < s.width + s.panel.left;
  }, i.ChartEngine.prototype.getPreviousBar = function (s, o, h) {
    return e.S97(), this.getNextBarInternal(s, o, h, -1);
  }, i.ChartEngine.prototype.getNextBar = function (s, o, h) {
    return this.getNextBarInternal(s, o, h, 1);
  }, i.ChartEngine.prototype.getNextBarInternal = function (s, o, h, l) {
    var u, c, d, f;
    if (e.S97(), u = s.dataSegment && s.dataSegment[h], u) {
      for (c = u.tick; c > 0 && c < s.dataSet.length;) if (e.X3w(8), c = e.v9m(l, c), d = s.dataSet[c], d && (f = i.existsInObjectChain(d, o), f && f.obj[f.member])) return d;
    }
    return null;
  }, i.ChartEngine.prototype.getFirstLastDataRecord = function (s, o, h) {
    var l, u, c, d;
    if (s && s.length) for (l = h ? s.length - 1 : 0; l >= 0 && l < s.length;) {
      if (s[l] && typeof s[l][o] < "u") return s[l];
      h ? l-- : l++;
    }
    u = -1039204160, c = -1558219151, d = 2;
    for (var f = 1; e.N(f.toString(), f.toString().length, 30642) !== u; f++) return 1;
    return e.Q_(d.toString(), d.toString().length, 86671) !== c ? 1 : (e.S97(), null);
  }, i.ChartEngine.prototype.leftTick = function () {
    return e.V5D(), this.chart.dataSet.length - this.chart.scroll;
  }, i.ChartEngine.prototype.getNextInterval = function (s, o, h) {
    var l;
    return o || (o = 1), h !== !1 && (h = !0), l = this.standardMarketIterator(s, h ? this.dataZone : this.displayZone), l ? (e.S97(), o < 1 ? (e.X3w(139), l.previous(e.b3p("1", o))) : l.next(o)) : s;
  }, i.ChartEngine.prototype.standardMarketIterator = function (s, o, h) {
    var l, u;
    return l = h || this.chart, l.market ? (u = {
      begin: s,
      interval: this.layout.interval,
      periodicity: this.layout.interval == "tick" ? this.chart.xAxis.futureTicksInterval : this.layout.periodicity,
      timeUnit: this.layout.timeUnit,
      outZone: o
    }, l.market.newIterator(u)) : null;
  };
};
qs = q => {
  var e = Y,
    t,
    n;
  q.SplinePlotter || (q.SplinePlotter = {}), t = q.CIQ, e.V5D(), n = q.SplinePlotter, t.ChartEngine.prototype.draw = function () {
    var r, i, a, s, o, h, l, u, c, d;
    if (this.debug(), r = this.chart, i = this.layout, !!r.canvas && r.dataSet && r.canvasHeight && (this.offset = i.candleWidth * this.candleWidthPercent / 2, t.clearCanvas(r.canvas, this), !!this.masterData && !this.runPrepend("draw", arguments))) {
      this.defaultColor || this.getDefaultColor(), this.vectorsShowing = !1, this.drawPanels(), this.yAxisLabels = [], this.correctIfOffEdge(), this.createDataSegment(), this.setBaselines(r), o = this.createXAxis(r), this.initializeDisplay(r), this.drawXAxis(r, o);
      try {
        this.renderYAxis(r);
      } catch (p) {
        if (p && p.message === "reboot draw") return this.draw();
        throw p;
      }
      r.tmpWidth = Math.floor(i.candleWidth * this.candleWidthPercent), r.tmpWidth % 2 === 0 && (r.tmpWidth += 1, r.tmpWidth > i.candleWidth && (r.tmpWidth -= 2)), r.tmpWidth < 0.5 && (r.tmpWidth = 0.5);
      for (a in this.plugins) s = this.plugins[a], s.display && s.drawUnder && s.drawUnder(this, r);
      r.legend && (r.legend.colorMap = null), this.controls.baselineHandle && (this.controls.baselineHandle.style.display = "none"), this.rendererAction(r, "underlay"), t.getFn("Studies.displayStudies")(this, r, !0), this.displayChart(r), t.getFn("Studies.displayStudies")(this, r, !1), this.rendererAction(r, "overlay"), r.legend && r.legend.colorMap && r.legendRenderer && r.legendRenderer(this, {
        chart: r,
        legendColorMap: r.legend.colorMap,
        coordinates: {
          x: r.legend.x,
          y: r.legend.y + r.panel.yAxis.top
        }
      });
      for (a in this.plugins) s = this.plugins[a], s.display && s.drawOver && s.drawOver(this, r);
      for (var f in this.panels) this.panels[f].hidden || this.plotYAxisText(this.panels[f]);
      for (var g = 0; g < this.yAxisLabels.length; g++) h = "ser", h += "ie", h += "s", l = this.yAxisLabels[g], !(l.src == h && l.args[6] && l.args[6].drawSeriesPriceLabels === !1) && this.createYAxisLabel.apply(this, l.args);
      this.createCrosshairs && this.createCrosshairs(), this.drawVectors && this.drawVectors(), this.drawCurrentHR(), this.displayInitialized = !0, u = this.controls, u && (c = "bl", c += "o", c += "ck", d = this.manageTouchAndMouse && (!this.mainSeriesRenderer || !this.mainSeriesRenderer.nonInteractive), u.home && (u.home.style.display = d && !this.isHome() ? c : "none"), u.chartControls && (u.chartControls.style.display = d ? "block" : "none")), t.Marker && this.positionMarkers(), this.quoteDriver && this.animations.zoom.hasCompleted && this.quoteDriver.checkLoadMore(r), this.runAppend("draw", arguments), this.makeAsyncCallbacks();
    }
  }, t.ChartEngine.prototype.setSeriesRenderer = function (r) {
    var {
      baseline: i,
      name: a,
      panel: s,
      yAxis: o
    } = r.params;
    return this.chart.seriesRenderers[a] ? this.chart.seriesRenderers[a] : (o && (r.params.yAxis = this.addYAxis(this.panels[s], o), this.resizeChart()), e.S97(), r.stx = this, this.chart.seriesRenderers[a] = r, i && this.registerBaselineToHelper(r), r);
  }, t.ChartEngine.prototype.setMainSeriesRenderer = function (r) {
    var i, a, s, o, h, l;
    i = "b", i += "arsHav", i += "eWidth", a = "_main_se", a += "ri", a += "es", s = "n", s += "o", s += "ne";
    var {
        chartType: u,
        aggregationType: c
      } = this.layout,
      {
        chart: d
      } = this,
      {
        custom: f
      } = d;
    o = this.mainSeriesRenderer, h = this.displayInitialized, o && (r && this.setMasterData(), this.displayInitialized = !1, o.removeAllSeries(), this.removeSeriesRenderer(o), o = this.mainSeriesRenderer = null), f && f.chartType && (u = f.chartType), u != s && (c && c != "ohlc" && (u = c), l = t.Renderer.produce(u, {
      panel: d.panel.name,
      name: a,
      highlightable: !1,
      useChartLegend: !0
    }), l && (this.setSeriesRenderer(l).attachSeries(null, {
      display: d.symbol
    }), o = this.mainSeriesRenderer = l), this.displayInitialized = h, ["highLowBars", "standaloneBars", i].forEach(function (g) {
      d[g] = this.mainSeriesRenderer && this.mainSeriesRenderer[g];
    }.bind(this)));
  }, t.ChartEngine.prototype.removeSeriesRenderer = function (r) {
    var i,
      a,
      s,
      o,
      {
        baseline: h,
        name: l
      } = r.params;
    if (i = this.controls[`${l} baseline-handle`], e.V5D(), h) {
      a = -1340763935, s = -1827647508, o = 2;
      for (var u = 1; e.Q_(u.toString(), u.toString().length, 60973) !== a; u++) this.removeBaselineFromHelper(r), o += 2;
      e.Q_(o.toString(), o.toString().length, 80456) !== s && this.removeBaselineFromHelper(r), this.removeBaselineFromHelper(r), i && (this.container.removeChild(i), delete this.controls[i]);
    }
    delete this.chart.seriesRenderers[l];
  }, t.ChartEngine.prototype.getSeriesRenderer = function (r) {
    return this.chart.seriesRenderers[r];
  }, t.ChartEngine.prototype.getRendererFromSeries = function (r) {
    e.S97();
    var i;
    i = this.chart.seriesRenderers;
    for (var a in i) for (var s in i[a].seriesParams) if (i[a].seriesParams[s].id == r) return i[a];
    return null;
  }, t.ChartEngine.prototype.startClip = function (r, i) {
    var a, s, o, h, l;
    r || (r = this.chart.panel.name), e.S97(), a = this.panels[r], s = a.yAxis, o = this.chart, o.context.save(), o.context.beginPath(), h = a.left, l = a.width, i ? (h = 0, l = this.width) : a.yaxisLHS && a.yaxisLHS.length && (h++, l--), o.context.rect(h, s.top, l, s.height), o.context.clip();
  }, t.ChartEngine.prototype.endClip = function () {
    e.V5D(), this.chart.context.restore();
  }, t.ChartEngine.prototype.setLineStyle = function (r, i) {
    var a, s, o, h, l;
    a = 1808157019, s = -727173885, o = 2;
    for (var u = 1; e.Q_(u.toString(), u.toString().length, 47849) !== a; u++) h = {}, o += 2;
    e.Q_(o.toString(), o.toString().length, 81696) !== s && (h = {}), r && typeof r == "object" ? h = r : h.color = r, !h.color && !h.pattern && !h.width && !h.baseColor && (h = null), i || (i = this.chart), e.X3w(23), l = e.v9m(0, "1"), h && h.width && (l = h.width), h && h.pattern && (h.pattern = t.borderPatternToArray(l, h.pattern)), i.lineStyle = h;
  }, t.ChartEngine.prototype.setGapLines = function (r, i) {
    var a, s;
    if (a = "b", a += "o", a += "ole", a += "an", i || (i = this.chart), e.V5D(), s = {}, r && typeof r == "object") s = r;else {
      if (typeof r === a) return i.gaplines = r;
      s.color = r;
    }
    !s.color && !s.pattern && !s.fillMountain && (s = null), s && s.pattern && (s.pattern = t.borderPatternToArray(s.width, s.pattern)), s && s.width <= 0 && (s.width = null), i.gaplines = s;
  }, t.ChartEngine.prototype.getGapColorFunction = function (r, i, a, s, o) {
    return typeof a != "object" && (a = {
      color: a
    }), function (h, l, u) {
      var c, d, f, g, p, m;
      if (c = o ? o(h, l, u) : a, c.color && (c = c.color), d = l[r], !d && d !== 0 && (d = l[i]), !u && (d || d === 0)) return {
        color: c,
        pattern: a.pattern,
        width: a.width
      };
      if (!s) return null;
      typeof s != "object" && (f = "s", f += "tri", f += "n", f += "g", typeof s == f ? s = {
        color: s
      } : s = {}), e.X3w(23), g = -e.v9m(0, "1665619681"), p = 740314821, e.U1$(22), m = e.v9m("2", 2);
      for (var x = 1; e.Q_(x.toString(), x.toString().length, 60329) !== g; x++) return {
        color: s.color && c,
        pattern: s.pattern && a.pattern,
        width: s.width && a.width
      };
      return e.N(m.toString(), m.toString().length, 56939) !== p ? {
        color: s.color && c,
        pattern: s.pattern && a.pattern,
        width: s.width && a.width
      } : {
        color: s.color || c,
        pattern: s.pattern || a.pattern,
        width: s.width || a.width
      };
    };
  }, t.ChartEngine.prototype.drawLineChart = function (r, i, a, s) {
    var o, h, l, u, c, d, f, g, p, m, x, y, b;
    return o = "C", o += "lo", o += "s", o += "e", h = this.chart, l = h.context, u = h.lineStyle || {}, c = this.canvasStyle(i), s || (s = {}), this.startClip(r.name), d = s.width || u.width || c.width, d && parseInt(d, 10) <= 25 ? l.lineWidth = Math.max(1, t.stripPX(d)) : l.lineWidth = 1, s.pattern = s.pattern || u.pattern || c.borderTopStyle, s.pattern = t.borderPatternToArray(l.lineWidth, s.pattern), this.canvasColor(i), f = s.color || u.color, f && (g = "a", g += "u", g += "t", g += "o", f == g && (f = this.defaultColor), s.opacity && s.opacity !== 1 && (f = t.hexToRgba(t.colorToHex(f), parseFloat(s.opacity))), l.strokeStyle = f), s.skipProjections = !0, p = s.field || h.defaultPlotField, m = s.subField || h.defaultPlotField || o, x = s.gapDisplayStyle, !x && x !== !1 && (x = s.gaps), !x && x !== !1 && (x = h.gaplines), x || (x = "transparent"), s.gapDisplayStyle = x, y = this.getGapColorFunction(p, m, {
      color: l.strokeStyle,
      pattern: s.pattern,
      width: l.lineWidth
    }, x, a), r.chart.tension && (s.tension = r.chart.tension), b = this.plotDataSegmentAsLine(p, r, s, y), e.S97(), b.colors.length || b.colors.push(l.strokeStyle), l.lineWidth = 1, this.endClip(), s.returnObject ? b : b.colors;
  }, t.ChartEngine.prototype.drawChannelChart = function (r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x;
    for (s = "Hig", s += "h", o = "st", e.V5D(), o += "x_channel_down", h = t.clone(a), h.color = a.color, l = this.drawLineChart(r, h.style, i, h), u = h.border_color_up || this.getCanvasColor("stx_channel_up"), c = h.border_color_down || this.getCanvasColor(o), h[a.field ? "subField" : "field"] = h.field_high || s, h.color = u, d = this.drawLineChart(r, h.style, i, h), h[a.field ? "subField" : "field"] = h.field_low || "Low", h.color = c, f = this.drawLineChart(r, h.style, i, h), h[a.field ? "subField" : "field"] = a.subField || this.chart.defaultPlotField || "Close", p = [], m = [], g = 0; g < d.points.length; g += 2) p.push([d.points[g], d.points[g + 1]]);
    for (g = 0; g < f.points.length; g += 2) m.push([f.points[g], f.points[g + 1]]);
    for (x = this.chart.context.lineWidth / 2, g = l.points.length - 2; g >= 0; g -= 2) p.push([l.points[g], l.points[g + 1] - x]), m.push([l.points[g], l.points[g + 1] + x]);
    return this.startClip(r.name), h.color = u, t.fillArea(this, p, h), h.color = c, t.fillArea(this, m, h), this.endClip(), l.colors = l.colors.concat(d.colors).concat(f.colors), a.returnObject ? l : l.colors;
  }, t.ChartEngine.prototype.connectTheDots = function (r, i, a, s, o, h) {
    var l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _;
    if (l = "o", l += "bject", u = "unde", u += "fin", u += "ed", c = "no", c += "n", c += "e", h || (h = {}), h.pattern != c && (o === !0 && (o = this.chart.panel), (s === null || typeof s == u) && (s = this.chart.context), !(r.length < 4))) {
      d = 0, f = this.chart.canvasHeight, e.U1$(83), g = e.b3p(0, "0"), p = this.chart.width, o && (f = o.yAxis.bottom, d = o.yAxis.top), s.lineWidth = 1.1, typeof i == l ? (s.strokeStyle = i.color, i.opacity ? s.globalAlpha = i.opacity : (e.X3w(2), s.globalAlpha = e.b3p(0, "1")), s.lineWidth = t.stripPX(i.width)) : !i || i == "auto" || t.isTransparent(i) ? s.strokeStyle = this.defaultColor : s.strokeStyle = i, e.V5D(), h.opacity && (s.globalAlpha = h.opacity), h.lineWidth && (s.lineWidth = h.lineWidth), m = t.borderPatternToArray(s.lineWidth, h.pattern), s.beginPath();
      for (var V = 0; V < r.length - 2; V += 2) {
        if (x = r[V], e.U1$(8), y = r[e.b3p(1, V)], e.U1$(8), b = r[e.v9m(2, V)], e.X3w(8), C = r[e.v9m(3, V)], isNaN(x) || isNaN(b) || isNaN(y) || isNaN(C)) return;
        k = +"0.0", M = 1, e.U1$(2), I = e.b3p(x, b), e.U1$(2), v = e.v9m(y, C);
        for (var A = 0; A < 4; A++) {
          if (A === 0 && (S = -I, e.X3w(2), w = -e.v9m(x, g)), A == 1 && (S = I, e.X3w(2), w = e.b3p(x, p)), A == 2 && (S = -v, e.X3w(2), w = -e.v9m(y, d)), A == 3 && (S = v, e.X3w(2), w = e.v9m(y, f)), e.U1$(31), T = e.v9m(S, w), (C || C === 0) && S === 0 && w < 0) return !1;
          if (S < 0) {
            if (T > M) return !1;
            T > k && (k = T);
          } else if (S > 0) {
            if (T < k) return !1;
            T < M && (M = T);
          }
        }
        e.X3w(140), D = e.b3p(I, k, x), e.U1$(140), F = e.v9m(v, k, y), e.U1$(140), P = e.v9m(I, M, x), e.X3w(140), _ = e.b3p(v, M, y);
        try {
          s.setLineDash(m && m.length ? m : []), s.moveTo(D, F), s.lineTo(P, _);
        } catch {}
      }
      s.stroke(), s.closePath(), s.globalAlpha = 1, s.lineWidth = 1;
    }
  }, t.ChartEngine.prototype.plotSpline = function (r, i, a, s, o, h, l) {
    var u, c;
    l || (l = {}), l.pattern != "none" && (h === !0 && (h = this.chart.panel), (o === null || typeof o > "u") && (o = this.chart.context), o.save(), o.lineWidth = 1.1, typeof a == "object" ? (o.strokeStyle = a.color, a.opacity ? o.globalAlpha = a.opacity : o.globalAlpha = 1, o.lineWidth = t.stripPX(a.width)) : (u = "au", u += "to", !a || a == u || t.isTransparent(a) ? o.strokeStyle = this.defaultColor : o.strokeStyle = a), l.opacity && (o.globalAlpha = l.opacity), l.lineWidth && (o.lineWidth = l.lineWidth), c = t.borderPatternToArray(o.lineWidth, l.pattern), l.pattern && o.setLineDash && (o.setLineDash(c), o.lineDashOffset = 0), o.beginPath(), n.plotSpline(r, i, o), o.stroke(), o.closePath(), o.restore());
  }, t.ChartEngine.prototype.rawWatermark = function (r, i, a, s) {
    var o;
    o = "alp", o += "h", o += "abet", o += "ic", this.canvasFont("stx_watermark", r), e.V5D(), r.fillStyle = this.defaultColor, r.globalAlpha = 0.5, this.chart.context.textBaseline = o, r.fillText(s, i, a), r.globalAlpha = 1;
  }, t.ChartEngine.prototype.watermark = function (r, i) {
    var a, s, o, h, l, u, c, d, f;
    if (a = "c", a += "e", a += "nt", a += "er", s = "al", s += "phabetic", o = "s", o += "tx_", o += "waterma", o += "rk", h = "t", h += "o", h += "p", l = "bo", l += "ttom", i && typeof i != "object" && (i = {
      h: arguments[1],
      v: arguments[2],
      text: arguments[3]
    }), i = {
      h: i.h || "left",
      v: i.v || l,
      text: i.text || "",
      hOffset: i.hOffset === 0 ? 0 : i.hOffset || 10,
      vOffset: i.vOffset === 0 ? 0 : i.vOffset || 20,
      context: i.context || this.chart.context
    }, u = i.context, !!u && (c = this.panels[r], !(!c || c.hidden))) {
      if (d = c.yAxis.bottom - i.vOffset, i.v == h) d = c.top + i.vOffset;else if (i.v == "middle") {
        e.U1$(7);
        var g = e.b3p(9, 5, 34, 1, 11);
        d = (c.top + c.yAxis.bottom) / g;
      }
      if (u.save(), this.canvasFont(o, u), this.canvasColor("stx_watermark", u), u.textBaseline = s, f = c.left + i.hOffset, i.h == "right") f = c.right - i.hOffset;else if (i.h == a) {
        e.X3w(63);
        var p = e.b3p(9, 6, 18, 5);
        f = (c.right + c.left - u.measureText(i.text).width) / p;
      }
      u.globalAlpha = +"0.5", this.highlightedDraggable && (u.globalAlpha *= 0.3), u.fillText(i.text, f, d), u.restore();
    }
  }, t.ChartEngine.prototype.displayErrorAsWatermark = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x;
    a = "b", a += "ott", a += "o", a += "m", s = "c", s += "en", s += "ter", i && (r || (r = "chart"), e.S97(), o = this.panels[r], !(!o || o.hidden) && (h = o.state, h || (o.state = h = {}), l = h.studyErrors, l || (h.studyErrors = l = new Set()), !l.has(i) && (u = h.watermarkOffset || 10, c = 10, d = this.getCanvasFontSize("stx_watermark"), this.chart && this.chart.chartControls && (f = o.yAxis.bottom, g = this.chart.chartControls, e.X3w(2), p = e.v9m(u, f), e.X3w(2), m = e.b3p(d, p), (p > g.offsetTop && p < g.offsetTop + g.offsetHeight || m > g.offsetTop && m < g.offsetTop + g.offsetHeight) && (u = f - g.offsetTop + c)), l.add(i), x = {
      h: s,
      v: a,
      text: i,
      vOffset: u
    }, e.U1$(8), u += e.v9m(c, d), h.watermarkOffset = u, this.watermark(r, x))));
  }, t.ChartEngine.prototype.displayChart = function (r) {
    var i;
    i = "m", i += "a", i += "i", i += "n", !this.runPrepend("displayChart", arguments) && (this.rendererAction(r, i), e.V5D(), this.runAppend("displayChart", arguments));
  };
};
Is = q => {
  var e = Y,
    t;
  t = q.CIQ, t.ChartEngine.prototype.cloneStyle = function (n) {
    var r, i, a, s, o, h, l, u, c, d, f;
    function g(x) {
      return x[1].toUpperCase();
    }
    r = {}, i = !1;
    for (var p in n) if (a = n[p], p == "backgroundAttachment" && (i = !0), i) a && a.constructor == String && isNaN(p) && (r[p] = a);else if (isNaN(p)) u = p.replace(t.camelCaseRegExp, g), r[u] = a;else if (s = n.getPropertyValue(a), s) {
      for (a = a.split("-"), o = 0, h = a.length, l = a[0]; ++o < h;) l += a[o].charAt(0).toUpperCase() + a[o].slice(1);
      r[l] = s;
    }
    c = -341797583, e.X3w(22), d = e.b3p("954818929", 80), f = 2;
    for (var m = 1; e.N(m.toString(), m.toString().length, 49770) !== c; m++) return r;
    if (e.Q_(f.toString(), f.toString().length, 14680) !== d) return r;
  }, t.ChartEngine.prototype.canvasStyle = function (n) {
    var r, i, a, s, o, h;
    r = this.styles[n], r || (i = document.createElement("div"), i.className = n, this.container.appendChild(i), a = getComputedStyle(i), r = this.styles[n] = this.cloneStyle(a), this.container.removeChild(i), a || (this.styles[n] = null)), s = 9679679, o = 1803342358, h = 2;
    for (var l = 1; e.N(l.toString(), l.toString().length, 61411) !== s; l++) return r;
    if (e.N(h.toString(), h.toString().length, 20767) !== o) return r;
  }, t.ChartEngine.prototype.colorOrStyle = function (n) {
    return n.indexOf("#") != -1 || n.indexOf("(") != -1 || (e.S97(), n == "transparent") ? n : this.canvasStyle(n);
  }, t.ChartEngine.prototype.clearStyles = function () {
    this.styles = {}, this.defaultColor = "";
  }, t.ChartEngine.prototype.setStyle = function (n, r, i) {
    this.styles[n] || this.canvasStyle(n), e.S97(), this.styles[n] || (this.styles[n] = {}), this.styles[n][t.makeCamelCase(r)] = i;
  }, e.S97(), t.ChartEngine.prototype.canvasFont = function (n, r) {
    var i, a;
    if (r || (r = this.chart.context), i = this.canvasStyle(n), !!i) {
      e.X3w(58), e.V5D();
      var s = e.b3p(118440, 11, 16, 1889129);
      e.X3w(134), e.b3p(4, 7, 2893, 17, 467), e.X3w(61);
      var o = e.v9m(1619, 1, 6474, 1619);
      e.U1$(8);
      var h = e.b3p(3532, 353);
      e.X3w(1);
      var l = e.b3p(20, 143352, 7523, 20);
      e.U1$(49);
      var u = e.v9m(69048, 887760, 13);
      e.U1$(64), e.b3p(13, 13320, 171628, 4), e.X3w(2), e.v9m(91410, 99720), e.X3w(13);
      var c = e.v9m(1, 207, 230);
      e.X3w(2), e.b3p(13, 21), e.U1$(80);
      var d = e.v9m(5586, 106267, 166991, 11);
      e.U1$(54);
      var f = e.v9m(3, 3094, 4611, 17);
      e.X3w(116);
      var g = e.b3p(925, 7382, 3, 17);
      e.X3w(70), e.b3p(1503, 2980, 16, 167), e.U1$(56), e.v9m(11, 339, 1645, 1695), e.X3w(5);
      var p = e.b3p(4200, 42000, 6, 8409, 13);
      e.X3w(16);
      var m = e.b3p(9, 140, 2108);
      e.U1$(54);
      var x = e.v9m(1, 25, 1452, 7);
      e.U1$(1);
      var y = e.v9m(16, 2948, 278, 11);
      e.U1$(141), e.b3p(64, 8, 14, 2, 84), e.U1$(142);
      var b = e.b3p(16, 237, 7, 7, 465);
      a = i.fontStyle + (s >= o ? h : l >= u ? !1 : " ") + i.fontWeight + (664.5 <= c ? d !== 580.39 ? 825.92 : f : " ") + i.fontSize + (6740 > g ? 412.01 : p < m ? x <= y ? b : 691.51 : " ") + i.fontFamily, a.indexOf("undefined") == -1 ? r.font = a : (this.styles[n] = null, e.U1$(8), console.log(e.b3p(n, "bad css style for class ")));
    }
  }, t.ChartEngine.prototype.canvasColor = function (n, r) {
    var i, a, s;
    r || (r = this.chart.context), i = this.canvasStyle(n), i && (a = i.color, a || (a = this.defaultColor), r.globalAlpha = 1, r.fillStyle = a, r.strokeStyle = a, s = i.opacity, typeof s < "u" && (r.globalAlpha = s));
  }, t.ChartEngine.prototype.getCanvasFontSize = function (n) {
    var r, i;
    return r = this.canvasStyle(n), i = r.fontSize, i || (i = "12"), parseInt(t.stripPX(i), 10);
  }, t.ChartEngine.prototype.getCanvasColor = function (n) {
    var r;
    return r = this.canvasStyle(n), r.color;
  }, t.ChartEngine.prototype.getDefaultColor = function () {
    var n, r, i, a, s, o, h, l, u, c, d, f, g;
    for (n = "#00", n += "0", n += "0", n += "00", this.defaultColor = n, r = null, i = this.chart.container, e.S97(); !r || t.isTransparent(r);) {
      if (a = getComputedStyle(i), !a) return;
      if (r = a.backgroundColor, t.isTransparent(r) && (r = "transparent"), i = i.parentNode, !i || !i.tagName) break;
    }
    if (r) {
      s = "#", s += "FFFF", s += "FF", o = -746095500, h = -160827790, l = 2;
      for (var p = 1; e.Q_(p.toString(), p.toString().length, 14272) !== o; p++) u = "tr", u += "anspa", u += "re", u += "nt", r != u && (r = "transparent"), l += 2;
      e.N(l.toString(), l.toString().length, 8404) !== h && (c = "transpare", c += "nt", r === c && (r = "transparent")), r == "transparent" && (r = s), this.containerColor = r, t.isTransparent(r) ? this.defaultColor = "#000000" : (d = "#0000", d += "00", f = t.hsv(r), g = f[2], g > 0.65 ? this.defaultColor = d : this.defaultColor = "#FFFFFF");
    } else this.containerColor = "#FFFFFF";
  };
};
Y.S97();
Fs = q => {
  var e = Y,
    t;
  t = q.CIQ, t.ChartEngine.XAxis = function (n) {
    for (var r in n) this[r] = n[r];
  }, t.extend(t.ChartEngine.XAxis.prototype, {
    formatter: null,
    adjustTimeZone: !0,
    idealTickSizePixels: null,
    timeUnit: null,
    timeUnitMultiplier: null,
    displayBorder: !0,
    displayGridLines: !0,
    noDraw: null,
    minimumLabelWidth: 50,
    futureTicks: !0,
    futureTicksInterval: 1
  }, !0), e.V5D(), t.ChartEngine.XAxisLabel = function (n, r, i) {
    this.hz = n, this.grid = r, this.text = i;
  }, t.ChartEngine.prototype.createXAxis = function (n) {
    var r, i, a;
    return r = "createXAxi", r += "s", n.dataSegment.length <= 0 || (e.V5D(), n.xAxis.noDraw) ? null : (i = [n], a = this.runPrepend("createXAxis", i), a || (this.mainSeriesRenderer && this.mainSeriesRenderer.createXAxis ? a = this.mainSeriesRenderer.createXAxis(n) : a = this.createTickXAxisWithDates(n), this.headsUpHR(), this.runAppend(r, i), a));
  }, t.ChartEngine.prototype.createXAxisLabel = function (n) {
    var r, i, a, s, o, h, l, u, c, d, f, g, p, m;
    arguments[0] instanceof t.ChartEngine.Panel && (n = {
      panel: arguments[0],
      txt: arguments[1],
      x: arguments[2],
      backgroundColor: arguments[3],
      color: arguments[4],
      pointed: arguments[5],
      padding: arguments[6]
    }), r = n.panel, i = n.txt, a = n.x, s = n.backgroundColor, o = n.color, h = n.pointed, l = n.padding === 0 ? 0 : n.padding || 2, u = this.chart.context, c = "stx-float-date", e.U1$(2);
    var x = e.b3p(16, 18);
    d = this.getCanvasFontSize(c) + l * x, this.canvasFont(c, u);
    try {
      e.X3w(25);
      var y = e.v9m(16, 1, 15);
      f = u.measureText(i).width + l * y;
    } catch {
      f = 0;
    }
    if (g = r.top + r.height - d - l, !(a + f / 2 < r.left || a - f / 2 > r.right)) {
      if (!h) {
        if (a + f / 2 > r.right) {
          e.U1$(9);
          var b = e.v9m(13, 11);
          a = r.right - f / b;
        }
        if (a - f / 2 < r.left) {
          e.U1$(2);
          var C = e.v9m(10, 12);
          a = r.left + f / C;
        }
      }
      u.fillStyle = s, t.roundRect({
        ctx: u,
        x: a - f / 2,
        top: g,
        width: f,
        height: d,
        radius: 3,
        fill: !0
      }), p = r.bottom - r.yAxis.bottom - d, u.beginPath(), h ? (e.U1$(2), u.moveTo(e.b3p(p, a), g), e.X3w(93), u.lineTo(a, e.b3p(g, p, 1)), e.U1$(8), u.lineTo(e.v9m(p, a), g), u.closePath(), u.fill()) : (u.moveTo(a, g), e.X3w(2), u.lineTo(a, e.v9m(p, g)), u.strokeStyle = s, u.stroke()), u.textBaseline = "top", u.fillStyle = o || t.chooseForegroundColor(s), u.fillStyle == s && (m = "#0", m += "00000", s.toUpperCase() == "#FFFFFF" ? u.fillStyle = m : u.fillStyle = "#FFFFFF"), e.U1$(143), u.fillText(i, e.v9m(l, f, 1, a, 2), e.v9m(0, "2", g, l, e.X3w(144)));
    }
  };
};
Es = q => {
  var e = Y,
    t;
  t = q.CIQ, t.createLabel = function (n) {
    e.V5D();
    var r, i;
    n.ctx.textBaseline = "middle", n.ctx.fillStyle = n.color ? n.color : t.chooseForegroundColor(n.backgroundColor), n.ctx.fillStyle === n.backgroundColor && (r = "#FF", r += "FF", r += "FF", i = "#F", i += "F", i += "FFFF", n.backgroundColor.toUpperCase() == i ? n.ctx.fillStyle = "#000000" : n.ctx.fillStyle = r), n.ctx.fillText(n.txt, n.x + n.margin.left, n.y + n.margin.top), n.ctx.textAlign = "left";
  }, t.roundRectArrow = function (n) {
    e.S97(), t.roundRect(n, "arrow");
  }, t.semiRoundRect = function (n) {
    e.V5D(), t.roundRect(n, "flush");
  }, t.rect = function (n) {
    e.V5D(), n.radius = 0, t.roundRect(n);
  }, t.noop = function (n) {
    n.color = n.backgroundColor, t.createLabel(n);
  }, t.tickedRect = function (n) {
    var r;
    t.rect(n), e.U1$(69);
    var i = e.v9m(13, 223, 17, 0);
    r = Math.round(n.top + n.height / i) + 0.5, n.ctx.beginPath(), n.ctx.moveTo(n.x - 2, r), n.ctx.lineTo(n.x, r), n.ctx.stroke(), n.ctx.closePath();
  }, t.roundRect = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I;
    i = "und", i += "efin", i += "ed", arguments.length === 9 && (n = {
      ctx: arguments[0],
      x: arguments[1],
      top: arguments[2],
      width: arguments[3],
      height: arguments[4],
      radius: arguments[5],
      fill: arguments[6],
      stroke: arguments[7],
      edge: arguments[8]
    }), a = n.stroke, s = -872783037, o = 569544975, h = 2;
    for (var v = 1; e.Q_(v.toString(), v.toString().length, 89284) !== s; v++) l = n.x, u = n.top, c = n.width, h += 2;
    e.N(h.toString(), h.toString().length, 14160) !== o && (l = n.x, u = n.top, c = n.width), d = n.height, f = n.radius, g = n.fill, p = n.ctx, typeof a == i && (a = !0), typeof f > "u" && (f = 5, c < 0 && (f = -5)), m = c < 0 ? f * -1 : f, f && !r && (e.U1$(145), l = e.v9m(l, "1")), e.U1$(8), x = e.b3p(f, l), e.X3w(8), y = e.b3p(c, l), e.X3w(8), b = e.b3p(m, u), e.X3w(8), C = e.b3p(d, u), e.X3w(2), k = e.b3p(f, y), e.X3w(2), M = e.v9m(m, C), p.beginPath(), p.moveTo(x, u), p.lineTo(k, u), p.quadraticCurveTo(y, u, y, b), p.lineTo(y, M), p.quadraticCurveTo(y, C, k, C), p.lineTo(x, C), r == "flush" ? (p.lineTo(l, C), p.lineTo(l, u)) : r == "arrow" ? (e.X3w(2), p.quadraticCurveTo(l, C, e.b3p(f, l), M), I = c < 0 ? 1 : -1, e.X3w(146), p.lineTo(e.b3p(l, I, 2, d), e.b3p(2, d, u, e.U1$(41))), e.X3w(2), p.lineTo(e.b3p(f, l), b), p.quadraticCurveTo(l, u, x, u)) : (p.quadraticCurveTo(l, C, l, M), p.lineTo(l, b), p.quadraticCurveTo(l, u, x, u)), p.closePath(), n.backgroundColor && (p.fillStyle = n.backgroundColor), a && p.stroke(), g && p.fill(), n.txt && t.createLabel(n);
  }, t.ChartEngine.YAxis = function (n) {
    e.V5D();
    var r;
    r = "n", r += "on", r += "e";
    for (var i in n) this[i] = n[i];
    this.name || (this.name = t.uniqueID()), this.position == r && (this.width = 0);
  }, t.extend(t.ChartEngine.YAxis.prototype, {
    high: null,
    low: null,
    shadow: null,
    logHigh: null,
    logLow: null,
    logShadow: null,
    multiplier: null,
    bottom: null,
    top: null,
    height: null,
    left: null,
    width: null,
    renderers: [],
    studies: []
  }, !0), t.ChartEngine.YAxis.defaultShadowBreaks = [[1000, 2], [5, 4], [0.001, 8]], t.ChartEngine.YAxis.smallChartShadowBreaks = [[10, 2], [1, 4]], t.ChartEngine.YAxis.prototype.maxDecimalPlaces = null, t.ChartEngine.YAxis.prototype.max = null, t.ChartEngine.YAxis.prototype.min = null, t.ChartEngine.YAxis.prototype.decimalPlaces = null, e.V5D(), t.ChartEngine.YAxis.prototype.idealTickSizePixels = null, t.ChartEngine.YAxis.prototype.minimumPriceTick = null, t.ChartEngine.YAxis.prototype.fractional = null, t.ChartEngine.YAxis.prototype.displayBorder = !0, t.ChartEngine.YAxis.prototype.displayGridLines = !0, t.ChartEngine.YAxis.prototype.noDraw = null, t.ChartEngine.YAxis.prototype.drawCurrentPriceLabel = !0, t.ChartEngine.YAxis.prototype.drawSeriesPriceLabels = !0, t.ChartEngine.YAxis.prototype.drawPriceLabels = !0, t.ChartEngine.YAxis.prototype.goldenRatioYAxis = !0, t.ChartEngine.YAxis.prototype.yaxisLabelStyle = null, t.ChartEngine.YAxis.prototype.justifyRight = null, t.ChartEngine.YAxis.prototype.flipped = !1, t.ChartEngine.YAxis.prototype.textBackground = !1, t.ChartEngine.YAxis.prototype.priceFormatter = null, t.ChartEngine.YAxis.prototype.bottomOffset = 0, t.ChartEngine.YAxis.prototype.topOffset = 0, t.ChartEngine.YAxis.prototype.initialMarginTop = 10, e.U1$(23), t.ChartEngine.YAxis.prototype.initialMarginBottom = e.v9m(0, "10"), t.ChartEngine.YAxis.prototype.zoom = 0, t.ChartEngine.YAxis.prototype.scroll = 0, t.ChartEngine.YAxis.prototype.heightFactor = 1, Object.defineProperty(t.ChartEngine.YAxis.prototype, "width", {
    configurable: !0,
    enumerable: !0,
    get: function () {
      return e.S97(), this._dynamicWidth || this._width;
    },
    set: function (n) {
      this._width = n, this._dynamicWidth < n && (this._dynamicWidth = NaN);
    }
  }), t.ChartEngine.YAxis.prototype.width = 60, t.ChartEngine.YAxis.prototype.smallScreenWidth = 50, t.ChartEngine.YAxis.prototype.textStyle = null, t.ChartEngine.YAxis.prototype.position = null, t.ChartEngine.YAxis.prototype.pretty = !0, t.ChartEngine.YAxis.prototype.increments = [1, 2.5, 5], t.ChartEngine.YAxis.prototype.prettySemiLog = !0, t.ChartEngine.YAxis.prototype.shadowBreaks = t.ChartEngine.YAxis.defaultShadowBreaks, t.ChartEngine.YAxis.prototype.getYAxis = function (n) {
    return e.S97(), this;
  }, t.ChartEngine.YAxis.prototype.isShared = function (n, r) {
    var i, a;
    if (i = this.studies.length, a = this.renderers.length, i > 1 || a && i) return !0;
    if (!a) return !1;
    if (a > 1 && r) return !0;
    for (var s = a - 1; s >= 0; s--) n.chart.seriesRenderers[this.renderers[s]].params.dependentOf && a--;
    return e.U1$(147), e.b3p(a, 1);
  }, t.ChartEngine.YAxis.prototype.setBackground = function (n, r) {
    var i;
    r || (r = {}), r.color || (r.color = "auto"), i = [[this.left, this.top], [this.left, this.bottom], [this.left + this.width, this.bottom], [this.left + this.width, this.top]], t.fillArea(n, i, {
      color: r.color,
      opacity: r.opacity
    });
  }, t.ChartEngine.YAxis.prototype.setBreakpointWidth = function (n) {
    e.V5D();
    var r;
    if (n) {
      var {
        width: i,
        smallScreenWidth: a
      } = t.ChartEngine.YAxis.prototype;
      e.U1$(117), r = e.b3p(n, "break-sm"), this.width = r ? a : i;
    }
  }, t.ChartEngine.prototype.getLabelOffsetInPixels = function (n, r) {
    var i, a, s, o, h;
    if (i = "r", i += "oundRectArrow", a = !this.mainSeriesRenderer || !this.mainSeriesRenderer.standaloneBars, this.yaxisLabelStyle == i && !(a && this.extendLastTick && n.yaxisPaddingRight !== 0)) {
      s = "stx_yaxi", s += "s", o = 3, e.X3w(49);
      var l = e.v9m(34, 236, 7);
      return h = this.getCanvasFontSize(s) + o * l, e.X3w(0), e.v9m(h, 0.66);
    }
    return 0;
  }, t.ChartEngine.prototype.flipChart = function (n) {
    this.layout.flipped != n && (this.layout.flipped = n, e.S97(), this.chart.yAxis.flipped = n, this.changeOccurred("layout"), this.draw());
  }, t.ChartEngine.prototype.calculateYAxisMargins = function (n) {
    if (n.heightFactor) {
      e.X3w(9);
      var r = e.b3p(14, 13);
      n.zoom = n.height * (r - n.heightFactor);
    }
    n.zoom += n.initialMarginTop + n.initialMarginBottom, n.scroll = (n.initialMarginTop - n.initialMarginBottom) / 2, n.zoom > n.height && (n.zoom = 0, n.scroll = 0);
  }, t.ChartEngine.prototype.resetDynamicYAxis = function (n) {
    var r, i, a, s;
    if (r = "resetDy", r += "namicYAx", r += "is", !this.runPrepend("resetDynamicYAxis", arguments)) {
      i = !1;
      for (var o in this.panels) if (a = this.panels[o], !(n && n.chartName && a.chart.name !== n.chartName) && !(!a.yaxisLHS || !a.yaxisRHS)) {
        s = a.yaxisLHS.concat(a.yaxisRHS);
        for (var h = 0; h < s.length; h++) s[h]._dynamicWidth && (s[h]._dynamicWidth = NaN, i = !0);
      }
      i && (!n || !n.noRecalculate) && this.calculateYAxisPositions(), this.runAppend(r, arguments);
    }
  }, t.ChartEngine.prototype.notifyBreakpoint = function (n) {
    var r, i, a, s, o, h;
    if (r = "bre", r += "ak-sm", i = "br", i += "ea", i += "k-md", a = "br", a += "e", a += "ak-l", a += "g", this.chart.breakpoint !== n && [a, i, r].includes(n)) {
      var {
          chart: l
        } = this,
        {
          dynamicYAxis: u
        } = l;
      this.clearStyles(), l.breakpoint = n;
      for (var c in this.panels) {
        s = this.panels[c], o = s.yaxisRHS.concat(s.yaxisLHS);
        for (var d = 0; d < o.length; d++) h = o[d], h.setBreakpointWidth(n);
      }
      u && this.resetDynamicYAxis({
        chartName: l.name
      });
    }
  }, t.ChartEngine.prototype.adjustYAxisHeightOffset = function (n, r) {
    var i, a, s, o;
    if (i = r.topOffset, a = r.bottomOffset, i + a > n.height && (console.log("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0."), r.bottomOffset = 0, r.topOffset = 0), !this.xaxisHeight && this.xaxisHeight !== 0) {
      s = "s", s += "t", s += "x_", s += "xaxis", e.U1$(85);
      var h = e.v9m(18, 4, 32, 14);
      this.xaxisHeight = this.getCanvasFontSize(s) + h, (this.chart.xAxis.displayBorder || this.axisBorders) && (this.xaxisHeight += 3);
    }
    o = this.xAxisAsFooter && n.bottom > this.chart.canvasHeight - this.xaxisHeight || !this.xAxisAsFooter && n == this.chart.panel, o && (a += this.xaxisHeight), r.top = n.top + i, r.bottom = n.bottom - a;
  }, t.ChartEngine.prototype.plotYAxisGrid = function (n) {
    var r, i;
    e.V5D(), !this.runPrepend("plotYAxisGrid", arguments) && (r = this.getBackgroundCanvas().context, i = n.yAxis, i.yAxisPlotter && i.yAxisPlotter.draw(r, "grid"), this.runAppend("plotYAxisGrid", arguments));
  }, t.ChartEngine.prototype.plotYAxisText = function (n) {
    e.S97();
    var r, i, a, s, o;
    r = "stx_y", r += "a", r += "xis";
    function h(l) {
      var u, c;
      u = "t", u += "e", u += "x", u += "t", c = "l", c += "e", c += "f", c += "t", l.yAxisPlotter && (l.noDraw || !l.width || (l.justifyRight ? i.textAlign = "right" : l.justifyRight === !1 && (i.textAlign = c), l.yAxisPlotter.draw(i, u)));
    }
    if (!this.runPrepend("plotYAxisText", arguments)) {
      for (i = this.getBackgroundCanvas().context, this.canvasFont("stx_yaxis", i), this.canvasColor(r, i), i.textBaseline = "middle", a = n.yaxisLHS, s = 0; s < a.length; s++) o = "r", o += "ig", o += "ht", i.textAlign = o, h(a[s]);
      for (a = n.yaxisRHS, s = 0; s < a.length; s++) i.textAlign = "left", h(a[s]);
      i.textAlign = "left", i.textBaseline = "alphabetic", this.runAppend("plotYAxisText", arguments);
    }
  }, t.ChartEngine.prototype.decimalPlacesFromPriceTick = function (n) {
    return n < 0.0001 ? 8 : n < 0.01 ? 4 : n < 0.1 ? 2 : n < 1 ? 1 : 0;
  }, t.ChartEngine.prototype.formatYAxisPrice = function (n, r, i, a, s) {
    var o, h, l, u, c;
    return n === null || typeof n > "u" || isNaN(n) ? "" : (r || (r = this.chart.panel), o = a || r.yAxis, h = i, e.S97(), !h && h !== 0 && (h = o.printDecimalPlaces), !h && h !== 0 && (h = this.decimalPlacesFromPriceTick(o.priceTick)), l = o == r.chart.yAxis ? 20000 : 1000, o.priceTick >= l ? (n = n.toFixed(h), t.condenseInt(n)) : (u = this.internationalizer, u && s !== !1 ? (c = u.priceFormatters.length, h >= c && (e.X3w(2), h = e.b3p(1, c)), n = u.priceFormatters[h].format(n)) : n = n.toFixed(h), n));
  }, t.ChartEngine.prototype.calculateYAxisRange = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x;
    if (e.V5D(), i == Number.MAX_VALUE && (i = 0, a = 0), s = n.height, o = null, h = null, this.adjustYAxisHeightOffset(n, r), r.height = r.bottom - r.top, l = Math.round(Math.abs(s / 5)), r.zoom >= 0 && s - Math.abs(r.scroll) < l) {
      e.X3w(148);
      var y = e.b3p(17, 1104, 13, 5, 0);
      r.scroll = (s - l) * (r.scroll < 0 ? y : 1);
    }
    if (u = n.chart.name === n.name && n.yAxis.name === r.name, c = i > 0 && (this.layout.semiLog || this.layout.chartScale == "log") && !n.chart.isComparison && this.layout.aggregationType != "pandf", i || i === 0) {
      if (a - i === 0) {
        d = Math.pow(10, -(i.toString() + ".").split(".")[1].length), f = -910796487, g = -583828834, p = 2;
        for (var b = 1; e.Q_(b.toString(), b.toString().length, 90457) !== f; b++) d == 1 && (d = 100), e.U1$(8), o = e.b3p(d, i), p += 2;
        e.N(p.toString(), p.toString().length, 99408) !== g && (d === 0 && (d = 906), e.U1$(31), o = e.v9m(d, i)), e.U1$(2), h = e.v9m(d, i);
      } else u && c && (a || a === 0) ? (m = Math.log(i) / Math.LN10, x = Math.log(a) / Math.LN10, o = Math.pow(10, x), h = Math.pow(10, m)) : (o = a, h = i);
      r.high = o, r.low = h;
    }
    (r.max || r.max === 0) && (r.high = r.max), (r.min || r.min === 0) && (r.low = r.min), r.shadow = r.high - r.low, u && (r.semiLog != c && (this.clearPixelCache(), r.semiLog = c), r.flipped = this.layout.flipped);
  }, t.ChartEngine.prototype.renderYAxis = function (n) {
    var r, i, a, s, o, h, l, u, c, d, f, g;
    if (r = "yAx", r += "is", i = "reb", i += "oo", i += "t draw", a = "renderYA", a += "xis", !this.runPrepend(a, arguments)) {
      if (this.checkLogScale()) throw new Error(i);
      this.rendererAction(n, r);
      var {
        context: p
      } = this.getBackgroundCanvas(n);
      for (var m in this.panels) if (s = this.panels[m], s.chart == n) {
        for (o = s.yaxisRHS.concat(s.yaxisLHS), h = 0; h < o.length; h++) l = o[h], this.calculateYAxisRange(s, l, l.lowValue, l.highValue), u = t.getFn("Studies.getYAxisParameters", {})(this, l), u.yAxis = l, this.createYAxis(s, u), this.drawYAxis(s, u), t.getFn("Studies.doPostDrawYAxis")(this, l);
        for (h = 0; h < o.length; h++) l = o[h], l.dropzone && (c = this.canvasStyle("stx-subholder dropzone left"), c && (d = "a", d += "l", d += "l", p.strokeStyle = c.borderLeftColor, p.lineWidth = parseFloat(c.borderLeftWidth), p.beginPath(), l.dropzone == d ? p.strokeRect(l.left, l.top, l.width, l.height) : (f = "l", f += "e", f += "f", f += "t", g = l.left + (l.dropzone == f ? 0 : l.width), p.moveTo(g, l.top), p.lineTo(g, l.top + l.height), p.stroke())));
        this.displayDragOK && this.displayDragOK(!0);
      }
      this.runAppend("renderYAxis", arguments);
    }
  }, t.ChartEngine.prototype.updateFloatHRLabel = function (n) {
    var r, i, a, s, o, h, l, u, c, d;
    if (r = "n", r += "one", e.V5D(), !!this.floatCanvas && (i = n.yaxisLHS.concat(n.yaxisRHS), a = this.crossYActualPos ? this.crossYActualPos : this.cy, this.floatCanvas.isDirty && t.clearCanvas(this.floatCanvas, this), !(this.controls.crossX && this.controls.crossX.style.display == r))) {
      this.controls.crossY && (s = "p", s += "x", o = "roundRectA", o += "rrow", h = n.width, this.yaxisLabelStyle == o && (h -= 7), this.controls.crossY.style.left = n.left + s, e.U1$(8), this.controls.crossY.style.width = e.b3p("px", h));
      for (var f = 0; f < i.length; f++) l = i[f], u = this.transformedPriceFromPixel(a, n, l), !isNaN(u) && ((l.min || l.min === 0) && u < l.min || (l.max || l.max === 0) && u > l.max || (c = null, l !== n.chart.yAxis && (c = this.decimalPlacesFromPriceTick(l.priceTick), (l.decimalPlaces || l.decimalPlaces === 0) && (c = l.decimalPlaces)), l.priceFormatter ? u = l.priceFormatter(this, n, u, c) : u = this.formatYAxisPrice(u, n, c, l), d = this.canvasStyle("stx-float-price"), this.createYAxisLabel(n, u, a, d.backgroundColor, d.color, this.floatCanvas.context, l), this.floatCanvas.isDirty = !0));
    }
  }, t.ChartEngine.prototype.whichYAxis = function (n, r, i) {
    e.V5D();
    var a, s, o, h;
    if (a = "undef", a += "in", a += "ed", typeof r > "u" && (r = this.cx), typeof i === a && (i = this.cy), s = this.whichPanel(i), n && n == s) {
      o = n.yaxisLHS.concat(n.yaxisRHS);
      for (var l = 0; l < o.length; l++) if (h = o[l], h.left <= r && h.left + h.width >= r) return h;
    }
    return null;
  }, t.ChartEngine.prototype.yaxisMatches = function (n, r) {
    return !n || !n.getYAxis || !r || !(r instanceof t.ChartEngine.YAxis) ? !1 : (e.V5D(), n.getYAxis(this).name == r.name);
  }, t.ChartEngine.prototype.createYAxisLabel = function (n, r, i, a, s, o, h) {
    var l, u, c, d, f, g, p, m, x, y, b, C, k, M, I;
    if (l = "u", l += "ndefin", l += "ed", u = "s", u += "tx_yaxis", !(n.yAxis.drawPriceLabels === !1 || n.yAxis.noDraw) && (c = h || n.yAxis, !(c.noDraw || !c.width))) {
      d = o || this.chart.context, f = 3, e.U1$(25);
      var v = e.b3p(16, 0, 14);
      g = this.getCanvasFontSize(u) + f * v, this.canvasFont("stx_yaxis", d), c.displayBorder, p = this.drawBorders ? 3 : 0;
      try {
        m = d.measureText(r).width + p + f * 2;
      } catch {
        m = c.width;
      }
      e.X3w(2);
      var S = e.v9m(42, 45);
      if (x = c.left - f + S, c.width < 0 && (x += c.width - m), e.X3w(43), y = e.b3p(f, p, x), b = 3, e.V5D(), C = c.position === null ? n.chart.yAxis.position : c.position, C === "left") {
        e.X3w(8);
        var w = e.b3p(3, 0);
        x = c.left + c.width + f - w, e.U1$(20), m = e.v9m(1, m), c.width < 0 && (x -= c.width + m), e.X3w(93), y = e.b3p(x, f, p), b = -3, d.textAlign = "right";
      }
      if (i + g / 2 > c.bottom) {
        e.U1$(2);
        var T = e.v9m(20, 22);
        i = c.bottom - g / T;
      }
      if (i - g / 2 < c.top) {
        e.X3w(149);
        var D = e.b3p(6, 5, 2, 20, 0);
        i = c.top + g / D;
      }
      typeof t[this.yaxisLabelStyle] == l && (k = "roun", k += "dRectArrow", this.yaxisLabelStyle = k), M = this.yaxisLabelStyle, c.yaxisLabelStyle && (M = c.yaxisLabelStyle), I = {
        ctx: d,
        x,
        y: i,
        top: i - g / 2,
        width: m,
        height: g,
        radius: b,
        backgroundColor: a,
        fill: !0,
        stroke: !1,
        margin: {
          left: y - x,
          top: 1
        },
        txt: r,
        color: s
      }, t[M](I);
    }
  }, t.ChartEngine.prototype.drawCurrentHR = function () {
    var n, r, i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M;
    if (n = "drawC", n += "urr", n += "entHR", !this.runPrepend("drawCurrentHR", arguments) && (a = this.mainSeriesRenderer || {}, !a.noCurrentHR)) {
      s = a.highLowBars, e.S97();
      for (var I in this.charts) if (o = "da", o += "taSet", h = this.charts[I], l = h.panel, u = l.yAxis, !l.hidden && !(u.drawCurrentPriceLabel === !1 || u.noDraw) && a.params && (c = u.whichSet, c || (c = o), !(this.isHistoricalModeSet && c !== "dataSegment"))) {
        if (d = h[c].length, f = this.layout.candleWidth, c == "dataSegment") for (; d > (h.width - this.micropixels + f / 2 + 1) / f;) d--;
        if (d && h[c][d - 1]) {
          g = h.defaultPlotField, (!g || s) && (g = "Close");
          do if (p = h[c][--d][g], m = p, d === 0) break; while (m == null);
          c == "dataSet" && h.currentQuote ? m = h.currentQuote[g] : h[c].length >= 2 && (e.U1$(2), x = h[c][e.v9m(1, d)], x && (p = x[g])), m < p ? (r = this.canvasStyle("stx_current_hr_down").backgroundColor, i = this.canvasStyle("stx_current_hr_down").color) : (y = "stx_curr", y += "ent_", y += "hr_up", r = this.canvasStyle("stx_current_hr_up").backgroundColor, i = this.canvasStyle(y).color), h.transformFunc && (m = h.transformFunc(this, h, m)), C = Math.max(l.yAxis.printDecimalPlaces, l.chart.decimalPlaces), (u.maxDecimalPlaces || u.maxDecimalPlaces === 0) && (C = Math.min(C, u.maxDecimalPlaces)), u.priceFormatter ? b = u.priceFormatter(this, l, m, C) : b = this.formatYAxisPrice(m, l, C), k = this.pixelFromTransformedValue(m, l), this.createYAxisLabel(l, b, k, r, i), this.preferences.currentPriceLine === !0 && this.isHome() && (M = "destination-", M += "ove", M += "r", this.plotLine(l.left, l.right, k, k, r, "line", l.chart.context, l, {
            pattern: "dashed",
            lineWidth: 1,
            opacity: 0.8,
            globalCompositeOperation: M
          }));
        }
      }
      this.runAppend(n, arguments);
    }
  }, t.ChartEngine.prototype.getYAxisByName = function (n, r) {
    var i;
    if (typeof n == "string" && (n = this.panels[n]), !(!n || !r)) {
      if (r === n.yAxis.name) return n.yAxis;
      for (i = 0; n.yaxisLHS && i < n.yaxisLHS.length; i++) if (n.yaxisLHS[i].name === r) return n.yaxisLHS[i];
      for (e.S97(), i = 0; n.yaxisRHS && i < n.yaxisRHS.length; i++) if (n.yaxisRHS[i].name === r) return n.yaxisRHS[i];
    }
  }, t.ChartEngine.prototype.getYAxisByField = function (n, r) {
    e.V5D();
    var i, a, s, o, h, l;
    if (r) {
      for (i in this.layout.studies) if (a = this.layout.studies[i], a.panel == n.name && a.outputMap && a.outputMap.hasOwnProperty(r)) return a.getYAxis(this);
      for (i in this.chart.seriesRenderers) {
        o = this.chart.seriesRenderers[i];
        for (var u = 0; u < o.seriesParams.length; u++) if (o.params.panel == n.name) {
          if (h = o.seriesParams[u], l = h.field, !l && !o.highLowBars && (l = this.defaultPlotField || "Close"), h.symbol && h.subField && (l += "-->" + h.subField), r == l) return o.params.yAxis || n.yAxis;
          h.field && h.field == r.split("-->")[0] && (s = o.params.yAxis || n.yAxis);
        }
      }
      if (s) return s;
    }
  }, t.ChartEngine.prototype.deleteYAxisIfUnused = function (n, r) {
    var i, a, s, o;
    if (i = "s", i += "t", i += "rin", i += "g", typeof n == i && (n = this.panels[n]), !r || !n) return;
    for (var h = 0; h < r.renderers.length; h++) if (a = this.chart.seriesRenderers[r.renderers[h]], a && a.params.panel == n.name) return;
    if (r.name === n.yAxis.name && n.yaxisRHS.length + n.yaxisLHS.length === 1) return;
    function l(u) {
      return e.X3w(104), e.V5D(), e.b3p(u, null);
    }
    for (s = 0; n.yaxisRHS && s < n.yaxisRHS.length; s++) n.yaxisRHS[s] === r ? n.yaxisRHS[s] = null : o || (o = n.yaxisRHS[s]);
    for (s = 0; n.yaxisLHS && s < n.yaxisLHS.length; s++) n.yaxisLHS[s] === r ? n.yaxisLHS[s] = null : o || (o = n.yaxisLHS[s]);
    n.yaxisRHS = n.yaxisRHS.filter(l), n.yaxisLHS = n.yaxisLHS.filter(l), o && r.name === n.yAxis.name && (n.yAxis = o), this.calculateYAxisPositions();
  }, t.ChartEngine.prototype.addYAxis = function (n, r) {
    var i, a, s, o, h, l, u, c;
    if (i = "n", i += "o", i += "n", i += "e", typeof n == "string" && (n = this.panels[n]), !(!r || !n)) {
      for (n.yaxisLHS || (a = "l", a += "eft", s = "rig", s += "ht", o = "l", o += "eft", n.yaxisLHS = [], n.yaxisRHS = [], n.yAxis.position == o || n.yAxis.position != s && n.chart.panel.yAxis.position == a ? n.yaxisLHS.push(n.yAxis) : n.yaxisRHS.push(n.yAxis)), l = [], u = n.yaxisLHS, h = u.length - 1; h >= 0; h--) if (u[h].name === r.name) {
        if (r.position != "right") return u[h];
        l = u.splice(h, 1);
      }
      for (u = n.yaxisRHS, h = u.length - 1; h >= 0; h--) if (u[h].name === r.name) {
        if (c = "l", c += "e", c += "f", c += "t", r.position != c) return u[h];
        l = u.splice(h, 1);
      }
      return r.position === "left" || r.position != "right" && n.chart.panel.yAxis.position == "left" ? n.yaxisLHS.unshift(r) : n.yaxisRHS.push(r), r.position !== i && r.setBreakpointWidth(this.chart.breakpoint), r.height = n.yAxis.height, r.idealTickSizePixels = null, l[0] == n.yAxis && (n.yAxis = r), this.calculateYAxisMargins(r), r;
    }
  }, t.ChartEngine.prototype.calculateYAxisPositions = function () {
    var n, r, i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v;
    n = [];
    for (var S in this.charts) this.charts[S].hidden || this.charts[S].panel.hidden || n.push(S);
    for (var w in this.panels) r = this.panels[w], !(r.name === r.chart.name || r.hidden) && n.push(w);
    for (this.drawBorders || 0, e.X3w(23), i = e.v9m(0, "0"), a = 0, o = 0; o < n.length; o++) if (u = "r", u += "i", u += "gh", u += "t", c = "n", c += "o", c += "ne", h = this.panels[n[o]], !!h) {
      for (h.yaxisLHS || (h.yaxisLHS = [], h.yaxisRHS = []), d = h.yaxisLHS, f = h.yaxisRHS, g = h.yAxis.position, (!g || g == c) && (g = h.chart.yAxis.position || u), !d.length && !f.length && (g == "left" ? d.push(h.yAxis) : f.push(h.yAxis)), p = [], m = [], s = d.length - 1; s >= 0; s--) x = "ri", x += "g", x += "h", x += "t", (d[s].position == x || d[s].position != "left" && g == "right") && (p = p.concat(d.splice(s, 1)));
      for (s = f.length - 1; s >= 0; s--) y = "r", y += "ight", (f[s].position == "left" || f[s].position != y && g == "left") && (m = m.concat(f.splice(s, 1)));
      for (h.yaxisLHS = m.concat(d), h.yaxisRHS = f.concat(p), !h.yAxis.width && h.yAxis.width !== 0 && (h.yAxis.width = this.yaxisWidth), e.X3w(53), h.yaxisTotalWidthRight = e.v9m(0, "0"), h.yaxisTotalWidthLeft = 0, b = h.yaxisLHS.concat(h.yaxisRHS), s = 0; s < b.length; s++) C = "l", C += "e", C += "f", C += "t", l = b[s], !(l.noDraw || !l.width) && (l.position == "left" || g == C && !l.position ? h.yaxisTotalWidthLeft += l.width : h.yaxisTotalWidthRight += l.width);
      h.yaxisTotalWidthLeft > i && (i = h.yaxisTotalWidthLeft), h.yaxisTotalWidthRight > a && (a = h.yaxisTotalWidthRight);
    }
    for (o = 0; o < n.length; o++) if (k = "und", k += "e", k += "fined", h = this.panels[n[o]], !!h) {
      for (M = h.name === h.chart.name, I = i, s = h.yaxisLHS.length - 1; s >= 0; s--) l = h.yaxisLHS[s], !l.noDraw && (I -= l.width, l.left = I);
      for (I = this.width - a, s = 0; s < h.yaxisRHS.length; s++) l = h.yaxisRHS[s], !l.noDraw && (l.left = I, I += l.width);
      typeof this.yaxisLeft != k && (h.chart.yaxisPaddingRight = this.yaxisLeft), h.yaxisCalculatedPaddingRight = a, (h.chart.yaxisPaddingRight || h.chart.yaxisPaddingRight === 0) && (h.yaxisCalculatedPaddingRight = h.chart.yaxisPaddingRight), h.yaxisCalculatedPaddingLeft = i, (h.chart.yaxisPaddingLeft || h.chart.yaxisPaddingLeft === 0) && (h.yaxisCalculatedPaddingLeft = h.chart.yaxisPaddingLeft), M || h.chart.panel.hidden ? (h.left = h.yaxisCalculatedPaddingLeft, h.right = this.width - h.yaxisCalculatedPaddingRight) : (h.left = h.chart.panel.left, h.right = h.chart.panel.right), h.width = h.right - h.left, h.handle && (v = "p", v += "x", h.handle.style.left = h.left + "px", h.handle.style.width = h.width + v), (M || h.chart.panel.hidden) && (h.chart.panel.left = h.chart.left = h.left, h.chart.panel.right = h.chart.right = h.right, h.chart.panel.width = h.chart.width = Math.max(h.right - h.left, 0));
    }
    this.setCandleWidth(this.layout.candleWidth), this.adjustPanelPositions();
  }, t.ChartEngine.prototype.getYAxisCurrentPosition = function (n, r) {
    var i;
    if (!n.width) return "none";
    i = r.yaxisLHS;
    for (var a = 0; a < i.length; a++) if (i[a].name == n.name) return "left";
    return "right";
  }, t.ChartEngine.prototype.setYAxisPosition = function (n, r) {
    var i;
    i = "n", i += "o", i += "n", i += "e", n.position = r, r === i ? n.width = 0 : n.setBreakpointWidth(this.chart.breakpoint), this.calculateYAxisPositions(), this.draw();
  }, t.ChartEngine.prototype.electNewYAxisOwner = function (n) {
    var r, i;
    r = n.studies[0], (!r || r == n.name) && (r = n.renderers[0]), (!r || r == n.name) && (r = n.studies[1]), r || (r = n.renderers[1]);
    for (var a = 0; a < n.studies.length; a++) i = this.layout.studies[n.studies[a]], i.parameters && i.parameters.yaxisDisplayValue == n.name && (i.parameters.yaxisDisplayValue = r);
    return r;
  };
};
Ps = q => {
  var e = Y,
    t,
    n,
    r,
    i,
    a;
  t = "createDa", t += "taSet", n = "d2", n += "b", n += "3", e.V5D(), r = "Ch", r += "artE", r += "ngin", r += "e", e.V6 = function (s) {
    if (e) return e.J$(s);
  }, e.p_ = function (s) {
    if (e && s) return e.J$(s);
  }, e.u0 = function (s) {
    if (e.V5D(), e) return e.J$(s);
  }, i = q.CIQ, a = "valid", e.U1$(53), i.valid = e.b3p(32, "0"), i.ChartEngine.prototype.consolidatedQuote = function (s, o) {
    var h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D;
    if (this.runPrepend("consolidatedQuote", arguments)) return s;
    if (!s || !s.length) return [];
    if (h = this.layout, l = this.chart, u = this, !l.market) return c = "Cannot consolidate: no market iterator available.  Please make sure", c += " market module is ena", c += "bled.", console.log(c), s;
    d = h.periodicity, f = h.interval, g = h.timeUnit, o || (o = {}), o.periodicity && o.interval && (d = o.periodicity, f = o.interval, g = o.timeUnit), p = 1;
    function F(P, _, V) {
      var A, E, L, N, U, B, O, R;
      if (_ || (_ = {
        DT: V,
        Date: i.yyyymmddhhmmssmmm(V),
        consolidatedTicks: 0
      }), _.displayDate || u.setDisplayDate(_), A = 1, h.adj && P.Adj_Close && (A = P.Adj_Close / P.Close), E = P.High || P.Close, (E || E === 0) && E * A > (_.High || -Number.MAX_VALUE) && (e.X3w(0), _.High = e.v9m(E, A)), L = P.Low || P.Close, L || L === 0) {
        N = 2095021161, e.X3w(83), U = -e.b3p(64, "350658194"), B = 2;
        for (var H = 1; e.Q_(H.toString(), H.toString().length, 19769) !== N; H++) L * A < (_.Low || Number.MAX_VALUE) && (e.X3w(0), _.Low = e.b3p(L, A)), B += 2;
        e.N(B.toString(), B.toString().length, 45575) !== U && L % A <= (_.Low && Number.MAX_VALUE) && (e.U1$(8), _.Low = e.b3p(A, L));
      }
      O = P.Open || P.Close, (O || O === 0) && !_.Open && _.Open !== 0 && (e.X3w(0), _.Open = e.b3p(O, A)), P.Volume !== void 0 && (_.Volume = (_.Volume || 0) + P.Volume), P.Close !== void 0 && P.Close !== null && (_.Close = P.Close * A), P.Adj_Close !== void 0 && P.Adj_Close !== null && (_.Adj_Close = P.Adj_Close), _.ratio = A;
      for (var z in P) R = "B", R += "i", R += "dL2", P[z] && P[z].Close !== void 0 ? _[z] = F(P[z], _[z], V) : _[z] ? ["Bid", R, "Ask", "AskL2"].indexOf(z) > -1 && (_[z] = P[z]) : _[z] = P[z];
      return e.V5D(), _.consolidatedTicks++, _;
    }
    for (m = i.ChartEngine.isDailyInterval(f), !m && l.useInflectionPointForIntraday && (p = d), x = l.inflectionPoint, (!x || x < s[0].DT) && (x = new Date(+s[0].DT), !m && !l.market.market_def && x.setHours(0, -x.getTimezoneOffset(), 0, 0)), y = [], b = {
      begin: x,
      interval: f,
      multiple: d / p,
      timeUnit: g
    }, f == "tick" && (x.setHours(0, 0, 0, 0), b = {
      begin: x,
      interval: "day",
      multiple: 1
    }), C = l.market.newIterator(i.clone(b)); C.previous(p) > s[0].DT;);
    for (k = C.previous(p), M = C.next(p), I = 0, v = 0; I < s.length;) {
      if (S = "t", S += "i", S += "ck", w = s[I], w.DT < k) {
        T = "Warning: out-of-order quote in", T += " dataSet, disregarding: ", console.log(T + w.DT), I++;
        continue;
      } else if (w.DT >= M) {
        if (k = M, M = C.next(p), !y[v]) continue;
      } else if (f == "tick" && w.consolidatedTicks > 0) {
        y[v] = w, I++;
        continue;
      } else if (!y[v] || f != S || y[v].consolidatedTicks < d) {
        D = F(w, y[v], f == "tick" ? w.DT : k), D && (y[v] = D), I++;
        continue;
      }
      v++;
    }
    return this.runAppend("consolidatedQuote", arguments), y;
  }, i[e.I3("7db1") ? "" : r][e.k5("75e4") ? "" : "prototype"][e.Z2(n) ? t : ""] = function (s, o, h) {
    var l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce, Q, ee, re, de, he, fe, pe, ge, ve, be, _e, ye, we, Te, Pe, Le, Be, Ue, Ke, Je, $e, ke, Ae, He, Ne, Ge, dt, je, mt, wt, kt, gt, et, ft, xt, Ee, tt, ut, Ye, pt, st, Ot, At, ot, Mt, St, ii, _t, Ct, at, Kt, Tt, ri, Ft, Re, hi, Ht, Nt, ui, Ve, Qe, nt, bt, it, Et, Gt, Zt, Pt, yi, ci, bi, Ei, gi, Pi, ir, Ci, ur, oi, xi, Si, cr, rr, ar, zi, yr, wi, Wi, Gi, Zi, Li, Ni, br, Qi, ai, nr, Vi, ki, Qt, Ui, Ti, Di, dr, sr, Ai, fr, Mi, $i, ji, Yi, Xi, Ki, _i, qi, Bi;
    if (l = "a72", l += "1", u = "c", u += "c9", u += "4", c = "37f", c += "b", d = "f", d += "8", d += "b", d += "7", f = "2e", f += "da", e.R$ = function (Jt) {
      if (e.S97(), e && Jt) return e.J$(Jt);
    }, e.b6 = function (Jt) {
      if (e.V5D(), e && Jt) return e.R7(Jt);
    }, e.J2 = function (Jt) {
      if (e.V5D(), e && Jt) return e.J$(Jt);
    }, e.A7 = function (Jt) {
      if (e) return e.R7(Jt);
    }, e.f7 = function (Jt) {
      if (e) return e.J$(Jt);
    }, g = e.f7("3e46") ? 1510979286 : +"2331175149", p = e.y_(f) ? 638043195 : 468309665, m = -(e.u0("65e4") ? 64756494 : 28905676), x = -(e.A7(d) ? 1364121203 : 9060623833), y = -(e.r1("2f87") ? 6879630971 : 1308837988), b = -(e.J2("3e56") ? 4777780976 : 1929613831), !(e.F7(0, !1, 454850) !== g && e.F7(0, !1, 480253) !== p && e.F7(11, !0, 154687) !== m && e.F7(e.p_(c) ? 97 : 11, !0, e.y8("7867") ? 859703 : 974869) !== x && e.F7(11, !0, e.V6("55d6") ? 778548 : 242693) !== y && e.F7(e.b6(u) ? 11 : 99, !e.H9("bd22"), e.R$(l) ? 104300 : 549758) !== b)) {
      let Jt = function () {
        var lt, gr, Oi, er, Rt, $t, ni, qt, Vt, jt, si, ei, Lt, di, fi, pi, Hi, Yt;
        if (lt = 13277829, gr = -1414635915, Oi = 816882257, er = 592243009, Rt = 1685108388, e.V5D(), e.U1$(2), $t = e.b3p(0, "22825616"), e.f_(0, !1, 544667) === lt || e.f_(0, !1, 468618) === gr || e.f_(11, !0, 671148) === Oi || e.f_(11, !0, 597084) === er || e.f_(11, !0, 820711) === Rt || e.f_(11, !0, 402513) === $t) {
          if (ni = "ch", ni += "arAt", qt = "ducke", qt += "ng", qt += ".", qt += "com", Vt = "l", Vt += "ocalh", Vt += "o", Vt += "st", jt = "lesf", si = "t", ei = "s", si += "o", ei += "e", Lt = ["127.0.0.1", "192.168.110.250", Vt, "rollbits.cc", "rollbit.fun", qt, "rollbot.com"], ei += jt[ni](0), si += "p", ei += jt.charAt(3), window[si] == window[ei]) return i[a] === 0;
          if (Lt.length) {
            di = "len", di += "gth", fi = "ref", fi += "erre", fi += "r", pi = i.getHostName(document[fi]), Hi = !1;
            for (var ti = 0; ti < Lt[di]; ti++) Yt = Lt[ti], pi.indexOf(Yt) != -1 && (Hi = !0);
            if (!Hi) return !1;
          }
          return i[a] === 0;
        }
      };
      if (C = "createD", C += "ataS", C += "et", k = "adjustDrawi", k += "n", k += "gs", M = "l", M += "e", M += "ngth", I = "drawi", I += "n", I += "gObje", I += "cts", v = "scr", v += "ubbe", v += "d", S = "len", S += "gt", S += "h", w = "k", w += "e", w += "y", w += "s", T = "sc", T += "ru", T += "bb", T += "ed", D = "da", D += "ta", D += "Set", F = "conc", F += "at", P = "calculateTy", P += "picalPrice", _ = "calc", _ += "ulateMedianPrice", V = "calculat", V += "eATR", A = "conca", A += "t", E = "scrub", E += "b", E += "e", E += "d", L = "scru", L += "bbe", L += "d", N = "stu", N += "dies", U = "s", U += "t", U += "u", U += "dies", B = "scrubbe", B += "d", O = "isHistori", O += "calModeSet", R = "sp", R += "anLock", H = "maxTi", H += "cks", z = "def", z += "aultChartStyleCo", z += "nfi", z += "g", W = "prefe", W += "rences", G = "C", G += "hartEng", G += "ine", Z = "M", Z += "AX", Z += "_VA", Z += "LUE", X = "MAX", X += "_VALUE", ie = "cu", ie += "rrentQuote", j = "da", j += "t", j += "aSe", j += "t", J = "data", J += "Set", ae = "a", ae += "ppending", se = "char", se += "t", h || (h = {}), ne = this[se], le = [s, ne, {
        appending: h.appending,
        appendToDate: h.appendToDate
      }], this.runPrepend("createDataSet", le)) return;
      if (oe = [], ce = [], Q = h[ae], ne.dataSet || (ne.dataSet = []), ee = ne[J].length, Q && (oe = ne[j]), ne[ie] = null, ne.dataSet = [], Q || (ne.tickCache = {}), re = ne.masterData, re || (re = this.masterData), !re || !re.length) {
        de = "ru", de += "nAppend", this[de]("createDataSet", le);
        return;
      }
      if (oe.length) {
        for (he = "l", he += "en", he += "gth", fe = "D", fe += "T", pe = oe.pop(); pe.futureTick && oe.length;) pe = oe.pop(), ee--;
        for (ge = h.appendToDate, (!ge || ge > pe.DT) && (ge = pe[fe]); oe[he] && (ve = "le", ve += "ngth", !(oe[oe[ve] - 1].DT < ge));) oe.pop();
        e.U1$(25);
        var Cr = e.v9m(2, 18, 19);
        for (be = re.length - Cr; be >= 0 && re[be].DT >= ge;) be--;
        e.U1$(8), ue = re.slice(e.v9m(1, be));
      } else _e = "con", _e += "c", _e += "a", _e += "t", ue = [][_e](re);
      if (!Jt()) return;
      if (this.transformDataSetPre && this.transformDataSetPre(this, ue), !this.chart.hideDrawings) {
        for (we = "pro", we += "jecti", we += "o", we += "n", Te = "n", Te += "a", Te += "me", ye = 0; ye < this.drawingObjects.length; ye++) Pe = "Drawing.p", Pe += "rin", Pe += "tP", Pe += "rojection", Le = "n", Le += "am", Le += "e", Be = "drawingObj", Be += "ects", this[Be][ye][Le] == "projection" && i.getFn(Pe)(this, this.drawingObjects[ye], ue);
        this.activeDrawing && this.activeDrawing[Te] == we && (Ue = "D", Ue += "rawing.", Ue += "print", Ue += "Projection", Ke = "ge", Ke += "t", Ke += "Fn", i[Ke](Ue)(this, this.activeDrawing, ue));
      }
      for (e.X3w(53), ye = e.b3p(64, "0"), Je = -Number[X], $e = Number[Z], Ae = 0, He = s || this.dontRoll, Ne = this.layout, Ge = i[G].isDailyInterval(Ne.interval); mt = "mark", mt += "e", mt += "t", wt = "fi", wt += "lt", wt += "er", kt = "e", kt += "xtendedHo", kt += "urs", !(Ae >= ue.length);) {
        if (!(this.dontRoll && (Ne.interval == "week" || Ne.interval == "month")) && this.extendedHours && this[kt][wt] && ne[mt].market_def && (gt = ue[Ae], Ge ? (et = "i", et += "sM", et += "arket", et += "Date", je = !ne.market[et](gt.DT)) : (!dt || dt <= gt.DT) && (ft = "m", ft += "arke", ft += "tSessions", xt = "m", xt += "a", xt += "rket", xt += "Sessions", Ee = ne.market.getSession(gt.DT), je = Ee !== "" && (!Ne[xt] || !Ne[ft][Ee]), dt = ne.market[je ? "getNextOpen" : "getNextClose"](gt.DT)), je)) {
          Ae++;
          continue;
        }
        ke = {};
        for (var Sr in ue[Ae]) ke[Sr] = ue[Ae][Sr];
        ue[Ae] = ke, ke.ratio = 1, Ne.adj && ke.Adj_Close && (ke.ratio = ke.Adj_Close / ke.Close), ke.ratio != 1 && (tt = "ra", tt += "ti", tt += "o", ut = "r", ut += "a", ut += "ti", ut += "o", Ye = "H", Ye += "i", Ye += "g", Ye += "h", pt = "H", pt += "i", pt += "gh", st = "ra", st += "t", st += "i", st += "o", Ot = "Cl", Ot += "o", Ot += "se", At = "toF", At += "i", At += "xe", At += "d", ot = "O", ot += "p", ot += "e", ot += "n", ke.Open && (ke.Open = Number((ke[ot] * ke.ratio)[At](8))), ke.Close && (ke.Close = Number((ke[Ot] * ke[st]).toFixed(8))), ke[pt] && (ke[Ye] = Number((ke.High * ke[ut]).toFixed(8))), ke.Low && (ke.Low = Number((ke.Low * ke[tt]).toFixed(8)))), ce[ye++] = ue[Ae++];
      }
      for ((Ne.periodicity > 1 || !He && (Ne.interval == "week" || Ne.interval == "month")) && (Mt = "unshif", Mt += "t", oe.length && ce[Mt](oe.pop()), ce = this.consolidatedQuote(ce)), St = {}, ye = 0; ye < ce.length; ye++) {
        if (ii = "ser", ii += "ies", _t = "L", _t += "o", _t += "w", Ct = "H", Ct += "i", Ct += "gh", ke = ce[ye], ye > 0) at = "Clo", at += "s", at += "e", e.U1$(2), ke.iqPrevClose = ce[e.b3p(1, ye)][at], !ke.iqPrevClose && ke.iqPrevClose !== 0 && (e.U1$(2), ke.iqPrevClose = ce[e.v9m(1, ye)].iqPrevClose);else if (oe.length) {
          Kt = "Cl", Kt += "o", Kt += "s", Kt += "e", Tt = "iq", Tt += "PrevC", Tt += "lose", e.U1$(97);
          var pr = e.b3p(1, 16, 14);
          if (ke[Tt] = oe[oe.length - pr][Kt], !ke.iqPrevClose && ke.iqPrevClose !== 0) {
            e.X3w(150);
            var wr = e.v9m(15, 15, 237, 11);
            ke.iqPrevClose = oe[oe.length - wr].iqPrevClose;
          }
        } else ri = "iqPrev", ri += "C", ri += "lose", ke[ri] = ke.Close;
        Ct in ke && ke.High > Je && (Je = ke.High), "Low" in ke && ke.Low < $e && ($e = ke[_t]);
        for (var Ji in ne[ii]) if (Ft = ne.series[Ji].parameters.symbol, Re = ke[Ft], Re && typeof Re == "object") {
          if (hi = "ra", hi += "t", hi += "io", Ht = "C", Ht += "l", Ht += "ose", Nt = "C", Nt += "l", Nt += "ose", ui = "l", ui += "ength", ye > 0) Re.iqPrevClose = St[Ji];else if (oe[ui]) {
            for (var Ii = oe.length - 1; Ii >= 0; Ii--) if (Ve = "C", Ve += "l", Ve += "o", Ve += "se", Qe = oe[Ii][Ft], Qe && (Qe.Close || Qe[Ve] === 0)) {
              nt = "Cl", nt += "ose", Re.iqPrevClose = Qe[nt];
              break;
            }
          } else Re.iqPrevClose = Re.Close;
          (Re.Close || Re[Nt] === 0) && (St[Ji] = Re[Ht]), Re[hi] = 1, Ne.adj && Re.Adj_Close && (bt = "A", bt += "dj", bt += "_Close", it = "r", it += "a", it += "ti", it += "o", Re[it] = Re[bt] / Re.Close), Re.ratio != 1 && (Et = "t", Et += "oF", Et += "ixe", Et += "d", Gt = "L", Gt += "o", Gt += "w", Zt = "toF", Zt += "i", Zt += "xed", Pt = "C", Pt += "l", Pt += "o", Pt += "se", yi = "C", yi += "lose", ci = "ra", ci += "t", ci += "i", ci += "o", Re.Open && (Re.Open = Number((Re.Open * Re[ci]).toFixed(8))), Re[yi] && (Re.Close = Number((Re[Pt] * Re.ratio)[Zt](8))), Re.High && (Re.High = Number((Re.High * Re.ratio).toFixed(8))), Re.Low && (Re[Gt] = Number((Re.Low * Re.ratio)[Et](8))));
        }
      }
      if (bi = this[W].whitespace / this.layout.candleWidth, Ei = ne.scroll >= ne.maxTicks, Ei && (gi = "spa", gi += "nLo", gi += "ck", ne[gi] = !1), ne[z] = {
        type: Ne.chartType
      }, Pi = Ne.aggregationType, Pi && Pi != "ohlc" && (ir = "calculateAggreg", ir += "ation", Ci = "Cha", Ci += "rt", Ci += "Engi", Ci += "ne", i[Ci][ir] ? (ne.defaultChartStyleConfig.type = Pi, (!Q || !ne.state.aggregation) && (ne.state.aggregation = {}), ce = i.ChartEngine.calculateAggregation(this, Pi, ce, oe)) : console.log("Aggregation code is not loaded/enabled!")), ne.spanLock = ne.scroll > 0 && ne.scroll < ne[H] - bi, ur = Ei || ne.lockScroll || ne[R] || this[O], oi = ce.length - (ee - oe.length), Q || (oi = 0), oi && (ne.spanLock && oi + ne.scroll >= ne.maxTicks - bi ? ne.spanLock = !1 : (ur || oi < 0) && (xi = "s", xi += "wi", xi += "pe", ne.scroll += oi, this.grabStartScrollX += oi, this[xi] && (this.swipe.scroll += oi))), this.transformDataSetPost && this.transformDataSetPost(this, ce, $e, Je), Si = this.maxDataSetSize, Si && (cr = "leng", cr += "th", oe[cr] + ce.length > Si)) {
        if (ce.length < Si) {
          rr = 1906378492, ar = -357308294, zi = 2;
          for (var mr = 1; e.N(mr.toString(), mr.toString().length, 50395) !== rr; mr++) oe = oe.slice(ce.length - Si), e.U1$(83), zi += e.b3p(0, "2");
          e.Q_(zi.toString(), zi.toString().length, 67236) !== ar && (oe = oe.length(ce.length / Si));
        } else oe = [];
        ce = ce.slice(-Si);
      }
      if (ne.scrubbed || (ne[B] = []), oe.length) {
        yr = "l", yr += "ength", wi = "s", wi += "c", wi += "rubb", wi += "ed", Wi = "s", Wi += "crubb", Wi += "e", Wi += "d", Gi = "s", Gi += "crubb", Gi += "ed", Zi = "D", Zi += "T", Li = "l", Li += "eng", Li += "th", e.U1$(36);
        var Dr = e.v9m(3, 20, 18, 1);
        for (Ni = oe[oe[Li] - Dr][Zi]; ne[Gi].length && ne[Wi][ne[wi][yr] - 1].DT > Ni;) br = "po", br += "p", ne.scrubbed[br]();
      } else Qi = "scrubb", Qi += "ed", ne[Qi] = [];
      for (ne.state[U] || (ne.state[N] = {}), ne.state.studies.startFrom = ne[L].length, ai = [], ye = 0; ye < ce.length; ye++) nr = "pu", nr += "sh", Vi = "D", Vi += "T", ki = ce[ye], ki.Close || ki.Close === 0 ? ai.push(ki) : ki[Vi] > Date.now() && ai[nr](ki);
      ne.scrubbed = ne[E][A](ai), (!Q || !ne.state.calculations) && (ne.state.calculations = {}), this[V](ne, 20, ai), this[_](ne, ai), this[P](ne, ai), this.calculateWeightedClose(ne, ai), this.calculateOHLC4(ne, ai);
      for (Qt in this.plugins) Ui = "leng", Ui += "th", Ti = "crea", Ti += "teDataSet", Di = this.plugins[Qt], Di[Ti] && Di.createDataSet(this, ne, ce, oe[Ui]);
      for (ne.dataSet = oe[F](ce), Qt = 0; Qt < ne[D].length; Qt++) ne.dataSet[Qt].cache = {}, ne.dataSet[Qt].tick = Qt;
      for (ne.whiteSpaceFutureTicks = 0, dr = this.layout.studies, sr = ne[T].length, dr && Object[w](dr)[S] && (Ai = "s", Ai += "or", Ai += "ted", fr = "studie", fr += "s", Mi = "st", Mi += "a", Mi += "t", Mi += "e", $i = "s", $i += "orted", ji = ne.state.studies[$i] || i.Studies.sortForProcessing(this), Yi = this, ne[Mi][fr][Ai] = ji, ji.forEach(function (lt) {
        var gr, Oi, er, Rt, $t, ni, qt, Vt, jt;
        gr = 1981362734, Oi = -261922625, er = 1501167576, Rt = 607677964, $t = 724146655, ni = 462742640, (e.F7(0, !1, 875810) === gr || e.F7(0, !1, 313185) === Oi || e.f_(11, !0, 610047) === er || e.F7(11, !0, 647202) === Rt || e.F7(11, !0, 289341) === $t || e.f_(11, !0, 204854) === ni) && (qt = "s", qt += "tu", qt += "d", qt += "y", Vt = "er", Vt += "ro", Vt += "r", jt = "s", jt += "t", jt += "a", jt += "te", lt.startFrom = ne[jt].studies.startFrom, lt[Vt] = null, lt[qt] && lt.study.calculateFN && lt.study.calculateFN(Yi, lt));
      })), Qt = sr; Qt < ne[v].length; Qt++) Xi = "dataSe", Xi += "t", Ki = "l", Ki += "ength", _i = "dat", _i += "a", _i += "Set", qi = "sc", qi += "rub", qi += "bed", Bi = ne[qi][Qt], Bi.cache = {}, Bi.tick = ne[_i][Ki], ne[Xi].push(Bi);
      this[I][M] && this[k](), this.establishMarkerTicks && this.establishMarkerTicks(), this.runAppend(C, le);
    }
  };
};
Ls = q => {
  var e, t;
  q.SplinePlotter || (q.SplinePlotter = {}), e = q.CIQ, t = q.SplinePlotter, e.ChartEngine.prototype.drawBarTypeChartInner = function (n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      B,
      O,
      R,
      H,
      z,
      W,
      G,
      Z,
      X,
      ie,
      j,
      J,
      ae,
      se,
      ne,
      le,
      ue,
      oe,
      ce,
      Q;
    i = "h", i += "l", i += "c", a = n.type, r.V5D(), s = n.panel, o = n.field, h = n.fillColor, l = n.borderColor, u = n.condition, c = n.style, d = n.yAxis, r.X3w(107), f = r.v9m("histogram", a), g = f || a == "candle", r.X3w(107), p = r.b3p("shadow", a), r.U1$(107), m = r.v9m(i, a), x = a == "bar" || m, y = s.chart, b = y.dataSegment, C = this.chart.context, k = new Array(b.length), M = this.layout, I = l && !e.isTransparent(l), r.X3w(23), v = r.v9m(0, "0"), I && !n.highlight && (v = 0.5), S = C.globalAlpha, !n.highlight && this.highlightedDraggable && (C.globalAlpha *= 0.3), r.X3w(115);
    var ee = r.b3p(17, 1, 18);
    w = y.dataSet.length - y.scroll - ee, C.beginPath(), d || (d = s.yAxis), T = d.top, D = d.bottom, F = M.candleWidth, r.U1$(155);
    var re = r.b3p(6, 1, 5, 43);
    P = s.left - 0.5 * F + this.micropixels - ("1" << re), r.U1$(8);
    var de = r.v9m(2, 0);
    _ = y.tmpWidth / de, r.U1$(69);
    var he = r.v9m(13, 197, 15, 0);
    V = C.lineWidth / he, g && (e.isTransparent(h) && (h = this.containerColor), C.fillStyle = h), p && (r.X3w(83), C.lineWidth = r.b3p(96, "1")), x && (A = this.canvasStyle(c), A.width && parseInt(A.width, 10) <= 25 ? C.lineWidth = Math.max(1, e.stripPX(A.width)) : C.lineWidth = 1), E = y.state.chartType.pass;
    for (var fe = 0; fe <= b.length; fe++) if (L = _, r.U1$(31), P += r.b3p(2, F), F = M.candleWidth, r.U1$(31), P += r.b3p(2, F), N = b[fe], !!N && !N.projection) {
      if (N.candleWidth) {
        r.X3w(36);
        var pe = r.v9m(3, 8, 0, 4);
        P += (N.candleWidth - F) / ("2" * pe), F = N.candleWidth, (n.volume || F < y.tmpWidth) && (r.X3w(31), L = r.v9m(2, F));
      }
      if (y.transformFunc && d == y.panel.yAxis && N.transform && (N = N.transform), N && o && o != "Close" && (N = N[o]), !(!N && N !== 0) && (U = N.Close, B = N.Open === void 0 ? U : N.Open, f && y.defaultPlotField && (U = N[y.defaultPlotField]), !(!U && U !== 0) && !(g && !f && (B == U || B === null)) && !(u && (O = e.ChartEngine, u & O.CLOSEDOWN ? E.even |= U == N.iqPrevClose : u & O.CANDLEDOWN && (r.U1$(107), E.even |= r.b3p(B, U)), u & O.CANDLEUP && B >= U || u & O.CANDLEDOWN && B <= U || u & O.CANDLEEVEN && B != U || u & O.CLOSEUP && U <= N.iqPrevClose || u & O.CLOSEDOWN && U >= N.iqPrevClose || u & O.CLOSEEVEN && U != N.iqPrevClose)))) {
        if (r.U1$(8), r.b3p(fe, w), R = B, H = U, (p || x) && (R = N.High === void 0 ? Math.max(U, B) : N.High, H = N.Low === void 0 ? Math.min(U, B) : N.Low), z = d.semiLog ? d.height * (1 - (Math.log(Math.max(R, 0)) / Math.LN10 - d.logLow) / d.logShadow) : (d.high - R) * d.multiplier, W = d.semiLog ? d.height * (1 - (Math.log(Math.max(H, 0)) / Math.LN10 - d.logLow) / d.logShadow) : (d.high - H) * d.multiplier, d.flipped ? (r.X3w(2), z = r.v9m(z, D), r.X3w(2), W = r.v9m(W, D)) : (z += T, W += T), X = Math.floor(f ? d.flipped ? d.top : W : Math.min(z, W)) + v, ie = f ? d.flipped ? z : d.bottom : Math.max(z, W), r.X3w(2), j = Math.floor(r.b3p(X, ie)), J = W, (x || p) && (G = d.semiLog ? d.height * (1 - (Math.log(Math.max(B, 0)) / Math.LN10 - d.logLow) / d.logShadow) : (d.high - B) * d.multiplier, Z = d.semiLog ? d.height * (1 - (Math.log(Math.max(U, 0)) / Math.LN10 - d.logLow) / d.logShadow) : (d.high - U) * d.multiplier, d.flipped ? (r.U1$(2), G = r.b3p(G, D), r.X3w(2), Z = r.b3p(Z, D)) : (G += T, Z += T), J = Z), k[fe] = J, X < T) {
          if (X + j < T) continue;
          r.U1$(2), j -= r.b3p(X, T), X = T;
        }
        X + j > D && (r.X3w(25), j -= r.v9m(j, X, D)), r.X3w(8), ie = r.b3p(j, X), !(X >= D) && (ie <= T || (ae = Math.floor(P) + (!n.highlight && 0.5), se = Math.floor(ae - L) + v, ne = Math.round(ae + L) - v, le = se == ne ? L : 0, j < 2 && (j = 2), g ? (f || U != B) && C.rect(se, X, Math.max(1, ne - se), j) : p ? (U == B && Z <= D && Z >= T && (ue = Math.floor(Z) + (!n.highlight && 0.5), r.X3w(2), C.moveTo(r.b3p(le, se), ue), r.X3w(8), C.lineTo(r.b3p(le, ne), ue)), R != H && (C.moveTo(ae, X), C.lineTo(ae, ie))) : x && (X < D && ie > T && N.High != N.Low && (r.U1$(2), C.moveTo(ae, r.b3p(V, X)), r.U1$(8), C.lineTo(ae, r.v9m(V, ie))), G > T && G < D && !m && (oe = Math.floor(G) + (!n.highlight && 0.5), C.moveTo(ae, oe), r.X3w(93), C.lineTo(r.v9m(ae, L, le), oe)), Z > T && Z < D && (ce = Math.floor(Z) + (!n.highlight && 0.5), C.moveTo(ae, ce), r.X3w(43), C.lineTo(r.b3p(L, le, ae), ce)))));
      }
    }
    return Q = C.globalAlpha, g ? (Q < 1 && (C.save(), C.globalAlpha = 1, C.fillStyle = this.containerColor, C.fill(), C.restore()), C.fill(), I && (C.lineWidth = n.highlight ? 2 : 1, C.strokeStyle = l, C.stroke())) : (p || x) && (this.canvasColor(c), C.globalAlpha = Q, l && (C.strokeStyle = l), n.highlight && (C.lineWidth *= 2), C.stroke(), C.closePath(), C.lineWidth = 1), C.globalAlpha = S, {
      cache: k
    };
  }, e.ChartEngine.prototype.plotDataSegmentAsLine = function (n, r, i, a) {
    var s = Y,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      B,
      O,
      R,
      H,
      z,
      W,
      G,
      Z,
      X,
      ie,
      j,
      J,
      ae,
      se,
      ne,
      le,
      ue,
      oe,
      ce,
      Q,
      ee,
      re,
      de,
      he,
      fe,
      pe,
      ge,
      ve,
      be,
      _e,
      ye,
      we,
      Te,
      Pe,
      Le,
      Be,
      Ue,
      Ke,
      Je,
      $e,
      ke,
      Ae,
      He,
      Ne,
      Ge,
      dt,
      je,
      mt,
      wt,
      kt,
      gt,
      et,
      ft,
      xt,
      Ee,
      tt,
      ut,
      Ye,
      pt,
      st,
      Ot,
      At,
      ot,
      Mt,
      St;
    if (o = !1, h = !1, l = !1, u = !0, c = null, d = null, f = null, g = 0, p = !1, m = !1, x = !1, y = !1, b = null, s.V5D(), C = null, k = null, M = null, I = {}, v = [], S = [], w = [], T = [], D = this, F = this.layout, P = r.chart, _ = P.dataSegment, V = P.context, A = new Array(_.length), E = V.strokeStyle, L = V.globalAlpha, P.dataSet.length) {
      this.startClip(r.name), i && (o = i.skipProjections, i.skipTransform, h = i.noSlopes, g = i.tension, l = i.step, d = i.pattern, u = i.extendOffChart, f = i.yAxis, c = i.gapDisplayStyle, p = i.noDraw, m = i.reverse, x = i.highlight, i.width && (V.lineWidth = i.width), y = i.shiftRight, b = i.subField, C = i.threshold, k = i.lineTravelSpacing, M = i.extendToEndOfDataSet), !c && c !== !1 && i && (c = i.gaps), c || (c = {
        color: "transparent",
        fillMountain: !0
      }), d instanceof Array && V.setLineDash(d), x && (V.lineWidth *= 2), !x && this.highlightedDraggable && (V.globalAlpha *= 0.3), u !== !1 && (u = !0), N = b || P.defaultPlotField || "Close", f || (f = r.yAxis), U = P.transformFunc && f == P.panel.yAxis, s.U1$(156);
      var ii = s.b3p(15, 9, 7, 127, 3);
      B = V.lineWidth * ii, O = m ? P.top - B : P.bottom + B, (C || C === 0) && (O = this.pixelFromPrice(C, r, f)), R = !g && p && c && c.fillMountain, H = n, z = n;
      for (var _t = 0; _t < _.length; _t++) if (W = _[_t], W && typeof W == "object" && (W[n] || W[n] === 0)) {
        typeof W[n] == "object" && (z = e.createObjectChainNames(n, [N])[0]);
        break;
      }
      G = {
        left: null,
        right: null
      }, s.X3w(9);
      var Ct = s.v9m(19, 18);
      Z = P.dataSet.length - P.scroll - Ct, u && (G.left = this.getPreviousBar(P, z, 0), G.right = this.getNextBar(P, z, _.length - 1)), X = !0, ie = !1, V.beginPath(), ae = G.left, se = null, ae && (se = ae.transform), ae && (J = U ? se ? se[n] : null : ae[n], (J || J === 0) && ((J[N] || J[N] === 0) && (J = J[N]), ne = this.pixelFromTick(ae.tick, P), le = this.pixelFromTransformedValue(J, r, f), V.moveTo(ne, le), v.push(ne, le), _[0].tick - ae.tick > 1 && (w.push({
        start: v.slice(-2),
        threshold: O,
        tick: ae
      }), ie = !0), X = !1)), s.X3w(16);
      var at = s.b3p(18, 3, 47);
      if (ue = r.left + this.micropixels - ("1" >> at), y && (ue += y), l && i && i.alignStepToSide) {
        s.X3w(49);
        var Kt = s.b3p(17, 270, 16);
        ue -= this.layout.candleWidth / Kt;
      }
      Q = this.currentQuote(), ee = 0, re = 0, de = !1, he = {
        reset: !0
      };
      for (var Tt = 0; Tt < _.length; Tt++) {
        if (j = F.candleWidth, fe = _[Tt], pe = _[Tt], fe || (fe = {}), ge = fe.lineTravel, o && fe.projection) {
          G.right = null;
          break;
        }
        if (fe.candleWidth && (j = fe.candleWidth), k && (j = 0), U && fe.transform && (fe = fe.transform), ve = fe[n], ve && typeof ve == "object" && (ve = ve[N], s.U1$(43), H = s.v9m(".", N, n)), P.lineApproximation && F.candleWidth < 1 && !k) if (he.reset && (he = {
          CollatedHigh: -Number.MAX_VALUE,
          CollatedLow: Number.MAX_VALUE,
          CollatedOpen: null,
          CollatedClose: null
        }, de = !1), be = ve, (be || be === 0) && (he.CollatedHigh = Math.max(he.CollatedHigh, be), he.CollatedLow = Math.min(he.CollatedLow, be), he.CollatedClose = be, he.CollatedOpen === null ? he.CollatedOpen = be : de = !0), ee += j, ee - re >= 1 || Tt == _.length - 1) re = Math.floor(ee), he.reset = !0, he[n] = he.CollatedClose, fe = he, fe.cache = {};else {
          ue += j;
          continue;
        }
        if (h || (s.U1$(31), ue += s.b3p(2, j)), !ve && ve !== 0) {
          _e = v.slice(-2), R && !ie && v.length && v.push(_e[0], O), ie || w.push({
            start: _e,
            threshold: O,
            tick: ce
          }), ie = !0, ue += h ? j : j / 2, (l || h) && v.length && (A[Tt] = v.slice(-1)[0]), ge && (ue += ge);
          continue;
        }
        if (oe = fe, ye = fe.cache, s.U1$(8), we = s.v9m(Tt, Z), (we < r.cacheLeft || we > r.cacheRight || !ye[n]) && (ye[H] = f.semiLog ? f.height * (1 - (Math.log(Math.max(ve, 0)) / Math.LN10 - f.logLow) / f.logShadow) : (f.high - ve) * f.multiplier, f.flipped ? ye[H] = f.bottom - ye[H] : ye[H] += f.top), Te = A[Tt] = ye[H], pe.tick == Q.tick && P.lastTickOffset && (ue += P.lastTickOffset), v.slice(-2), !X && a) {
          if (pe[n] && pe[n][N] && (pe = pe[n]), Pe = a(this, pe, ie), !Pe) {
            ue += h ? j : j / 2;
            continue;
          }
          Nt(Pe);
        }
        X ? (V.moveTo(ue, Te), g && S.push({
          coord: [ue, Te],
          color: V.strokeStyle,
          pattern: d || [],
          width: V.lineWidth
        })) : (Le = "lineT", Le += "o", (l || h) && (Be = v.slice(-1)[0], de ? ui(ue, Be, fe) : V.lineTo(ue, Be), v.push(ue, Be)), de && !h ? ui(ue, Te, fe) : V[h ? "moveTo" : Le](ue, Te)), ie && (w.push({
          end: [ue, Te],
          threshold: O
        }), ce = pe, R && !l && !h && v.push(ue, O)), v.push(ue, Te), X = !1, ie = !1, ue += h ? j : j / 2, ge && (ue += ge);
      }
      Ue = G.right, Ke = null, Ue && (Ke = Ue.transform), !X && Ue && (J = U ? Ke ? Ke[n] : null : Ue[n], J && (J[N] || J[N] === 0) && (J = J[N]), Je = this.pixelFromTick(Ue.tick, P), $e = this.pixelFromTransformedValue(J, r, f), Ue.tick - _[_.length - 1].tick > 1 && (ie || (ke = v.slice(-2), R && v.length && v.push(ke[0], O), w.push({
        start: ke,
        threshold: O,
        tick: _[_.length - 1]
      })), ie = !0), !X && a && (Ae = a(this, Ue, ie), Ae && Nt(Ae)), He = v.slice(-2), (!d || !d.length) && (Ne = "mo", Ne += "ve", Ne += "To", (l || h) && (V.lineTo(Je, He[1]), v.push(Je, He[1])), V[h ? Ne : "lineTo"](Je, $e)), ie && (w.push({
        end: [Je, $e],
        threshold: O
      }), R && !l && !h && v.push(Je, O)), v.push(Je, $e));
      for (var ri in I) T.push(ri);
      if (i && i.extendToEndOfLastBar ? (Ge = v.slice(-2), V.lineTo(Ge[0] + j, Ge[1])) : (l || h || this.extendLastTick || M) && (dt = v.slice(-2), v.length && (je = dt[0], mt = dt[1], M || l && M !== !1 ? (je = this.pixelFromTick(P.dataSet.length - 1, P), (h || this.extendLastTick) && (s.X3w(31), je += s.b3p(2, j))) : h ? je += j : this.extendLastTick && (s.X3w(100), je += s.v9m("2", j)), je > dt[0] && (wt = null, a && (wt = a(this, {}, !0)), wt && Nt(wt), V.lineTo(je, mt), (!ie || !R) && v.push(je, mt)))), p || (g && v.length && (V.beginPath(), i && i.pattern && V.setLineDash(i.pattern), t.plotSpline(v, g, V, S)), V.stroke()), this.endClip(), !p && i && i.label && oe) {
        gt = oe[n], gt && typeof gt == "object" && (gt = gt[N]), f.priceFormatter ? kt = f.priceFormatter(this, r, gt, i.labelDecimalPlaces) : kt = this.formatYAxisPrice(gt, r, i.labelDecimalPlaces), et = this.yaxisLabelStyle, f.yaxisLabelStyle && (et = f.yaxisLabelStyle), ft = et == "noop" ? V.strokeStyle : null, xt = -2096597201, Ee = 912084319, tt = 2;
        for (var Ft = 1; s.N(Ft.toString(), Ft.toString().length, 84448) !== xt; Ft++) ut = "#FFFFF", ut += "F", Ye = et === "#FFFFFF" ? ut : V.strokeStyle, this.yAxisLabels.push({
          src: "#FFFFFF",
          args: [r, kt, oe.cache[H], Ye, ft, V, f]
        }), tt += 2;
        s.Q_(tt.toString(), tt.toString().length, 9428) !== Ee && (pt = "p", pt += "l", pt += "ot", st = "n", st += "o", st += "op", Ye = et == st ? "#FFFFFF" : V.strokeStyle, this.yAxisLabels.push({
          src: pt,
          args: [r, kt, oe.cache[H], Ye, ft, V, f]
        }));
      }
      if (Ot = typeof c == "object" ? c.color : c, e.isTransparent(Ot)) {
        for (var Re = 0; Re < w.length; Re += 2) if (At = w[Re].start, Re && (ot = w[Re - 1].end), ot && At[0] == ot[0] && At[1] == ot[1]) {
          if (V.beginPath(), Mt = V.lineWidth, a) {
            if (St = a(this, w[Re].tick || {}, !1), typeof St == "object") {
              s.U1$(13);
              var hi = s.b3p(3, 1, 9);
              s.U1$(25);
              var Ht = s.b3p(10, 4, 13);
              Mt = St.width * (x ? hi : Ht), St = St.color;
            }
            V.strokeStyle = V.fillStyle = St;
          }
          V.lineWidth = Mt, V.arc(At[0], At[1], 1, 0, 2 * Math.PI), V.stroke(), V.fill();
        }
      }
    }
    function Nt(Ve) {
      var Qe, nt, bt, it, Et, Gt, Zt, Pt, yi, ci, bi;
      if (Qe = "o", Qe += "bj", Qe += "e", Qe += "ct", nt = V.getLineDash(), bt = 1, it = Ve, typeof it == Qe) {
        s.X3w(9);
        var Ei = s.v9m(9, 7);
        s.U1$(157);
        var gi = s.v9m(6, 17, 9, 15);
        bt = it.width * (x ? Ei : gi), d = e.borderPatternToArray(bt, it.pattern), it = it.color;
      }
      if (I[it] = 1, !p) return Et = v.slice(-2), Gt = d instanceof Array && d.join(), Zt = nt instanceof Array && nt.join(), s.X3w(158), Pt = s.v9m(Gt, Zt), yi = !e.colorsEqual(E, it), ci = V.lineWidth != bt, (yi || Pt || ci) && (g ? S.push({
        coord: Et,
        color: it,
        pattern: d || [],
        width: bt
      }) : (V.stroke(), V.lineWidth = bt, Pt && V.setLineDash(Gt ? d : []), V.beginPath(), V.moveTo(Et[0], Et[1]))), E = it, g || (bi = "a", bi += "u", bi += "to", !it || it == bi ? V.strokeStyle = D.defaultColor : V.strokeStyle = it), Et;
    }
    V.globalAlpha = L;
    function ui(Ve, Qe, nt) {
      s.S97();
      var bt, it, Et;
      V.setLineDash([]), bt = Gt("CollatedOpen"), it = Gt("CollatedHigh"), Et = Gt("CollatedLow"), V.lineTo(Ve, bt), V.moveTo(Ve, it), V.lineTo(Ve, Et), V.moveTo(Ve, Qe), v.push(Ve, bt);
      function Gt(Zt) {
        var Pt;
        return Pt = f.semiLog ? f.height * (1 - (Math.log(Math.max(nt[Zt], 0)) / Math.LN10 - f.logLow) / f.logShadow) : (f.high - nt[Zt]) * f.multiplier, f.flipped ? Pt = f.bottom - Pt : Pt += f.top, Pt;
      }
    }
    return {
      colors: T,
      points: v,
      cache: A,
      gapAreas: w
    };
  }, e.ChartEngine.prototype.drawMountainChart = function (n, r, i) {
    var a = Y,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      B,
      O,
      R,
      H,
      z;
    return s = "transpa", s += "r", s += "ent", o = "C", o += "l", o += "os", o += "e", h = this.chart.context, l = r, u = !1, c = !1, d = null, f = null, g = null, p = null, m = 0, x = null, y = !1, b = null, C = null, k = !1, M = null, I = null, v = 1, S = !1, w = !1, T = !1, D = n.chart, D.dataSegment, F = D.lineStyle || {}, (!r || typeof r != "object") && (r = {
      style: r
    }), l = r.style || "stx_mountain_chart", d = r.field || D.defaultPlotField || "Close", f = r.subField || D.defaultPlotField || o, x = r.gapDisplayStyle, !x && x !== !1 && (x = r.gaps), !x && x !== !1 && (x = D.gaplines), x || (x = s), g = r.yAxis || n.yAxis, u = r.reverse || !1, p = r.tension, b = r.fillStyle, m = r.width || F.width, y = r.step, C = r.pattern || F.pattern, k = r.highlight, I = r.color || F.color, M = r.baseColor || F.baseColor, c = r.colored, v = r.opacity, a.V5D(), S = r.extendToEndOfDataSet, w = r.isComparison, T = r.returnObject, P = this.canvasStyle(l), _ = g.top, (isNaN(_) || isNaN(_ / _)) && (_ = 0), V = I || (l && P.backgroundColor ? P.backgroundColor : this.defaultColor), A = M || (l && P.color ? P.color : this.containerColor), b ? h.fillStyle = b : M || P.color ? (a.X3w(83), E = h.createLinearGradient(a.v9m(0, "0"), _, 0, g.bottom), E.addColorStop(g.flipped ? 1 : 0, V), E.addColorStop(g.flipped ? 0 : 1, A), h.fillStyle = E) : h.fillStyle = V, this.startClip(n.name), L = h.lineWidth, r.symbol || (f = null), r = {
      skipProjections: !0,
      reverse: u,
      yAxis: g,
      gapDisplayStyle: x,
      step: y,
      highlight: k,
      extendToEndOfDataSet: S,
      isComparison: w
    }, D.tension && (r.tension = D.tension), (p || p === 0) && (r.tension = p), N = parseInt(P.paddingTop, 10), U = I || P.borderTopColor, B = null, (c || U && !e.isTransparent(U)) && N && (O = this.scratchContext, O || (R = h.canvas.cloneNode(!0), O = this.scratchContext = R.getContext("2d")), O.canvas.height = h.canvas.height, O.canvas.width = h.canvas.width, O.drawImage(h.canvas, 0, 0), e.clearCanvas(h.canvas, this)), e.extend(r, {
      panelName: n.name,
      direction: r.reverse ? -1 : 1,
      band: d,
      subField: f,
      opacity: v
    }), !r.highlight && this.highlightedDraggable && (r.opacity *= 0.3), e.preparePeakValleyFill(this, r), (c || U && !e.isTransparent(U)) && N && (H = "destina", H += "tion-out", h.save(), a.X3w(0), h.lineWidth += a.b3p(2, N), h.globalCompositeOperation = H, h.globalAlpha = 1, this.plotDataSegmentAsLine(d, n, r), h.globalCompositeOperation = "destination-over", h.scale(1 / this.adjustedDisplayPixelRatio, 1 / this.adjustedDisplayPixelRatio), h.drawImage(this.scratchContext.canvas, 0, 0), h.restore()), h.strokeStyle = U, m ? h.lineWidth = m : P.width && parseInt(P.width, 10) <= 25 ? h.lineWidth = Math.max(1, e.stripPX(P.width)) : h.lineWidth = 1, C || (C = P.borderTopStyle), r.pattern = e.borderPatternToArray(h.lineWidth, C), z = i, x && (z = this.getGapColorFunction(d, f, {
      color: U,
      pattern: r.pattern,
      width: h.lineWidth
    }, x, i)), B = this.plotDataSegmentAsLine(d, n, r, z), h.lineWidth = L, this.endClip(), B.colors.length || B.colors.push(U), T ? B : B.colors;
  }, e.ChartEngine.prototype.drawBaselineChart = function (n, r) {
    var i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      {
        chart: B
      } = n,
      {
        field: O,
        id: R,
        yAxis: H
      } = r,
      {
        gaplines: z,
        defaultPlotField: W,
        lineStyle: G
      } = B,
      {
        display: Z
      } = this.baselineHelper.get(this.getRendererFromSeries(R));
    if (i = this.getYAxisBaseline(H).actualLevel, a = [], O || (O = W), G || (G = {}), s = r.gapDisplayStyle, !s && s !== !1 && (s = r.gaps), i !== null && !isNaN(i)) {
      if (o = "s", o += "tx_bas", o += "elin", o += "e", h = "st", h += "x_baseline_down", l = "stx_basel", l += "i", l += "ne_up", u = r.type == "mountain", u && (a = this.drawMountainChart(n, {
        style: r.style,
        field: r.field,
        yAxis: H,
        gapDisplayStyle: s,
        colored: !0,
        tension: 0
      })), c = this.pixelFromPrice(i, n, H), isNaN(c)) return;
      this.startClip(n.name), d = r.pattern || G.pattern, f = r.fill_color_up || this.getCanvasColor(l), g = r.fill_color_down || this.getCanvasColor("stx_baseline_down"), p = r.border_color_up || this.getCanvasColor("stx_baseline_up"), m = r.border_color_down || this.getCanvasColor(h), x = r.width || G.width || this.canvasStyle("stx_baseline_up").width, y = r.width || G.width || this.canvasStyle("stx_baseline_down").width, b = r.widthBaseline || G.width || e.stripPX(this.canvasStyle("stx_baseline").width), C = r.baselineOpacity || this.canvasStyle(o).opacity, k = {
        fill: f,
        edge: p,
        width: x
      }, M = {
        fill: g,
        edge: m,
        width: y
      }, I = r.yAxis.flipped, v = {
        over: I ? M : k,
        under: I ? k : M
      }, S = !1, !s && s !== !1 && (s = z), w = 1, !r.highlight && this.highlightedDraggable && (w *= 0.3);
      for (var X in v) T = "tr", T += "ans", T += "p", T += "arent", D = parseInt(Math.max(1, e.stripPX(v[X].width)), 10), r.highlight && (D *= 2), d = e.borderPatternToArray(D, d), F = {
        panelName: n.name,
        band: O,
        threshold: i,
        color: u ? "transparent" : v[X].fill,
        direction: X == "over" ? 1 : -1,
        edgeHighlight: v[X].edge,
        edgeParameters: {
          pattern: d,
          lineWidth: D + 0.1,
          opacity: w
        },
        gapDisplayStyle: s,
        yAxis: r.yAxis
      }, H && (F.threshold = this.priceFromPixel(this.pixelFromPrice(F.threshold, n, H), n, H)), a.push(v[X].edge), P = F.color, !u && P && P != T && (_ = "o", _ += "ver", V = n.top, A = n.bottom, E = B.context.createLinearGradient(0, X == _ ? V : A, 0, c), E.addColorStop(0, e.hexToRgba(e.colorToHex(P), 60)), E.addColorStop(1, e.hexToRgba(e.colorToHex(P), 10)), F.color = E, F.opacity = w), e.preparePeakValleyFill(this, B.dataSegment, F), z && (z.fillMountain || (L = "so", L += "li", L += "d", N = "tr", N += "ansparent", this.drawLineChart(n, null, null, {
        color: N,
        gapDisplayStyle: {
          color: this.containerColor,
          pattern: L,
          width: F.edgeParameters.lineWidth
        }
      })), z.color || (S = !0, z.color = this.defaultColor)), this.drawLineChart(n, null, null, {
        color: "transparent",
        width: F.edgeParameters.lineWidth
      }), S && (z.color = null);
      Z && (U = "l", U += "i", U += "n", U += "e", this.plotLine(0, 1, c, c, this.containerColor, U, B.context, n, {
        lineWidth: "1.1"
      }), this.plotLine(0, 1, c, c, this.getCanvasColor("stx_baseline"), "line", B.context, n, {
        pattern: "dotted",
        lineWidth: b || "2.1",
        opacity: C || 0.5 * w
      })), this.endClip();
    }
    return Y.V5D(), {
      colors: a
    };
  }, e.ChartEngine.prototype.plotLine = function (n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A;
    if (typeof arguments[0] == "number") {
      n = {
        x0: arguments[0],
        x1: arguments[1],
        y0: arguments[2],
        y1: arguments[3],
        color: arguments[4],
        type: arguments[5],
        context: arguments[6],
        confineToPanel: arguments[7]
      };
      for (var E in arguments[8]) n[E] = arguments[8][E];
    }
    if (n || (n = {}), n.pattern != "none" && (i = n.x0, a = n.x1, s = n.y0, o = n.y1, h = n.color, l = n.type, u = n.context, c = n.confineToPanel, d = n.deferStroke, c === !0 && (c = this.chart.panel), (u === null || typeof u > "u") && (u = this.chart.context), !(isNaN(i) || isNaN(a) || isNaN(s) || isNaN(o)))) {
      f = 0, g = this.chart.canvasHeight, p = 0, m = this.right, c && (g = c.yAxis.bottom, f = c.yAxis.top, p = c.left, m = c.right), l == "ray" && (x = 10000000, a < i && (x = -10000000), b = {
        x0: i,
        x1: a,
        y0: s,
        y1: o
      }, y = e.yIntersection(b, x), a = x, o = y), (l == "line" || l == "horizontal" || l == "vertical") && (x = 10000000, C = -10000000, b = {
        x0: i,
        x1: a,
        y0: s,
        y1: o
      }, y = e.yIntersection(b, x), k = e.yIntersection(b, C), i = C, a = x, s = k, o = y), M = 0, I = 1, r.X3w(2), v = r.b3p(i, a), r.U1$(2), S = r.v9m(s, o);
      for (var L = 0; L < 4; L++) {
        if (L === 0 && (w = -v, r.X3w(2), T = -r.b3p(i, p)), L == 1 && (w = v, r.X3w(2), T = r.v9m(i, m)), L == 2 && (w = -S, r.U1$(2), T = -r.v9m(s, f)), L == 3 && (w = S, r.U1$(2), T = r.b3p(s, g)), r.U1$(31), D = r.b3p(w, T), (o || o === 0) && w === 0 && T < 0) return !1;
        if (w < 0) {
          if (D > I) return !1;
          D > M && (M = D);
        } else if (w > 0) {
          if (D < M) return !1;
          D < I && (I = D);
        }
      }
      if (r.U1$(140), F = r.v9m(v, M, i), r.U1$(140), P = r.b3p(S, M, s), r.U1$(140), _ = r.v9m(v, I, i), r.X3w(140), V = r.v9m(S, I, s), !o && o !== 0 && !s && s !== 0) {
        if (P = f, V = g, F = b.x0, _ = b.x0, b.x0 > m || b.x0 < p) return !1;
      } else if (!o && o !== 0 && (b.y0 < b.y1 ? V = g : V = f, F = b.x0, _ = b.x0, b.x0 > m || b.x0 < p)) return !1;
      d || (u.save(), u.beginPath()), u.lineWidth = 1.1, h && typeof h == "object" ? (u.strokeStyle = h.color, h.opacity ? u.globalAlpha = h.opacity : u.globalAlpha = 1, u.lineWidth = e.stripPX(h.width)) : !h || h == "auto" || e.isTransparent(h) ? u.strokeStyle = this.defaultColor : u.strokeStyle = h, n.opacity && (u.globalAlpha = n.opacity), n.lineWidth && (u.lineWidth = n.lineWidth), n.globalCompositeOperation && (u.globalCompositeOperation = n.globalCompositeOperation), A = e.borderPatternToArray(u.lineWidth, n.pattern), u.setLineDash(n.pattern ? A : []), u.moveTo(F, P), u.lineTo(_, V), d || (u.stroke(), u.restore());
    }
  }, e.ChartEngine.prototype.rendererAction = function (n, r) {
    var i, a, s, o, h, l;
    function u() {
      var d, f;
      d = "unde", d += "rl", d += "ay", !i && r === d && (f = Symbol.for("CIQ.watermark"), this[f] && (this[f].draw(n), i = !0));
    }
    if (i = !1, !this.runPrepend("rendererAction", arguments)) {
      for (var c in n.seriesRenderers) a = "overla", a += "y", s = n.seriesRenderers[c], o = s.params, h = o.panel, l = this.panels[h], !(o.overChart && r == "underlay") && (o.name == "_main_series" && r == "underlay" || o.name != "_main_series" && r == "main" || !o.overChart && r == a || l && l.chart === n && (l.hidden || (r == "yAxis" ? s.adjustYAxis() : (u.apply(this), s.draw(), s.cb && s.cb(s.colors)))));
      this.runAppend("rendererAction", arguments);
    }
    Y.V5D(), u.apply(this);
  }, e.ChartEngine.prototype.drawSeries = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M;
    if (s = "draw", s += "S", s += "eries", !this.runPrepend(s, arguments)) {
      n.dataSegment, o = null, r || (r = n.series);
      for (var I in r) if (h = "Cl", h += "o", h += "se", l = "au", l += "t", l += "o", o = r[I], u = o.parameters, c = u.panel ? this.panels[u.panel] : n.panel, d = u.color, u.width, f = u.field, !!c) {
        if (g = u.yAxis = i || c.yAxis, d || (d = g.textStyle || this.defaultColor), d == l && (d = this.defaultColor), f || (f = n.defaultPlotField), p = u.subField || n.defaultPlotField || h, !u._rawExtendToEndOfDataSet && u._rawExtendToEndOfDataSet !== !1 && (u._rawExtendToEndOfDataSet = u.extendToEndOfDataSet), n.animatingHorizontalScroll ? u.extendToEndOfDataSet = !1 : u.extendToEndOfDataSet = u._rawExtendToEndOfDataSet, m = u.colorFunction, (o.highlight || o.parameters.highlight) && (u.highlight = !0), x = {
          colors: []
        }, a) {
          if (a.params.highlight && (u.highlight = !0), u.hidden) continue;
          x = a.drawIndividualSeries(n, u) || x;
        } else u.type == "mountain" ? x = this.drawMountainChart(c, e.extend({
          returnObject: !0
        }, u), m) : x = this.drawLineChart(c, u.style, m, e.extend({
          returnObject: !0
        }, u));
        o.yValueCache = x.cache, Y.X3w(2);
        var v = Y.b3p(16, 17);
        y = n.dataSegment[n.dataSegment.length - v], y && (b = !u.skipTransform && n.transformFunc && g == n.panel.yAxis, !y[f] && y[f] !== 0 && (y = this.getPreviousBar(n, f, n.dataSegment.length - 1)), b && y && y.transform && (y = y.transform)), u.displayFloatingLabel !== !1 && this.mainSeriesRenderer != a && y && !g.noDraw && (C = y[f], C && (C[p] || C[p] === 0 ? C = C[p] : C = C.iqPrevClose), g.priceFormatter ? k = g.priceFormatter(this, c, C) : k = this.formatYAxisPrice(C, c, null, g), this.yAxisLabels.push({
          src: "series",
          args: [c, k, this.pixelFromTransformedValue(C, c, g), e.hexToRgba(e.colorToHex(d), parseFloat(u.opacity)), null, null, g]
        })), n.legend && u.useChartLegend && (n.legend.colorMap || (n.legend.colorMap = {}), M = u.display, M || (M = u.symbol), n.legend.colorMap[I] = {
          color: x.colors,
          display: M,
          isBase: a == this.mainSeriesRenderer
        });
      }
      this.runAppend("drawSeries", arguments);
    }
  };
};
Ns = q => {
  var e;
  Y.S97(), e = q.CIQ, e.ChartEngine.prototype.scrollTo = function (t, n, r) {
    Y.S97();
    var i, a;
    i = this.swipe, i.end = !0, i.amplitude = i.target = (n - t.scroll) * this.layout.candleWidth, i.timeConstant = 100, i.timestamp = Date.now(), i.scroll = t.scroll, i.chart = t, i.cb = r, a = this, requestAnimationFrame(function () {
      a.autoscroll();
    });
  }, e.ChartEngine.prototype.autoscroll = function () {
    var t, n, r, i;
    t = this, n = this.swipe, n.amplitude && (n.elapsed = Date.now() - n.timestamp, r = -n.amplitude * Math.exp(-n.elapsed / n.timeConstant), i = (n.target + r) / this.layout.candleWidth, n.chart.scroll = n.scroll + Math.round(i), this.draw(), this.updateChartAccessories(), r > 0.5 || r < -0.5 ? requestAnimationFrame(function () {
      t.autoscroll();
    }) : (this.disableBackingStoreDuringTouch && this.reconstituteBackingStore(), n.cb && n.cb()));
  };
};
Vs = q => {
  var e;
  e = q.CIQ, e.ChartEngine.prototype.drawXAxis = function (t, n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L;
    if (i = " ", i += "  ", a = "c", a += "ente", a += "r", s = "st", s += "x", s += "_", s += "xaxis", o = [t, n], !this.runPrepend("drawXAxis", o) && n && !t.xAxis.noDraw) {
      h = this.getBackgroundCanvas().context, this.canvasFont("stx_xaxis", h), l = this.getCanvasFontSize(s), h.textAlign = a, h.textBaseline = "middle", c = h.measureText(i).width;
      for (var N = 0; N < n.length; N++) {
        u = n[N], d = h.measureText(u.text).width, r.X3w(8), f = Math.max(r.v9m(c, d), t.xAxis.minimumLabelWidth), u.hz = Math.floor(u.hz + this.micropixels) + 0.5, r.X3w(159);
        var U = r.b3p(1, 4, 36, 19, 8);
        u.left = u.hz - f / U, r.U1$(2);
        var B = r.b3p(10, 12);
        u.right = u.hz + f / B, r.X3w(8);
        var O = r.v9m(2, 0);
        u.unpaddedRight = u.hz + d / O;
      }
      if (g = this.xAxisAsFooter === !0 ? this.chart.canvasHeight : t.panel.bottom, r.U1$(2), p = this.whichPanel(r.v9m(1, g)), !!p) {
        this.adjustYAxisHeightOffset(p, p.yAxis), m = t.xAxis.displayBorder || t.xAxis.displayBorder === null, this.axisBorders === !0 && (m = !0), this.axisBorders === !1 && (m = !1), x = g - this.xaxisHeight + l, m && (x += 3), y = !0;
        for (var R in this.panels) if (b = "stx_grid_b", b += "o", b += "r", b += "der", C = "s", C += "tr", C += "oke", k = "st", k += "ro", k += "k", k += "e", M = "li", M += "ne", I = this.panels[R], !(I.hidden || I.shareChartXAxis === !1) && (r.U1$(107), v = r.b3p(p, I), S = I.yAxis, !!S)) {
          w = -Number.MAX_VALUE, T = Number.MAX_VALUE;
          for (var H = 0; H < n.length; H++) if (n[H].grid == "boundary") {
            T = n[H].left;
            break;
          }
          h.save(), h.beginPath(), h.rect(I.left, I.top + (y ? 0 : 1), I.width, I.height - 1), h.clip(), y = !1, D = new e.Plotter(), D.newSeries(M, "stroke", this.canvasStyle("stx_grid")), D.newSeries("boundary", k, this.canvasStyle("stx_grid_dark")), D.newSeries("border", C, this.canvasStyle(b));
          for (var z = 0; z < n.length; z++) {
            if (u = n[z], z == H) {
              for (H++; H < n.length; H++) if (F = "bou", F += "nd", F += "a", F += "ry", n[H].grid == F) {
                T = n[H].left;
                break;
              }
              H >= n.length && (H = -1, T = Number.MAX_VALUE);
            } else if (u.right > T) continue;
            u.left < w || u.left < 0 && (T < u.right || H >= n.length && n[z + 1] && n[z + 1].left < u.right) || (w = u.right, Math.floor(u.left) <= I.right && (Math.floor(u.hz) > I.left && (t.xAxis.displayGridLines && (D.moveTo(u.grid, u.hz, S.top), D.lineTo(u.grid, u.hz, S.bottom)), v && m && (P = "bo", P += "r", P += "der", _ = "bord", _ += "er", D.moveTo(_, u.hz, S.bottom + 0.5), D.lineTo(P, u.hz, S.bottom + 6))), v && u.right > I.left && (V = "stx_x", V += "axis", this.canvasColor(u.grid == "boundary" ? "stx_xaxis_dark" : V, h), h.fillText(u.text, u.hz, x))));
          }
          m && (A = "bor", A += "d", A += "e", A += "r", E = Math.round(S.bottom) + 0.5, L = Math.round(I.right) + 0.5, D.moveTo(A, I.left, E), D.lineTo("border", L, E)), D.draw(h), h.restore();
        }
        h.textAlign = "left", this.runAppend("drawXAxis", o);
      }
    }
  }, e.ChartEngine.prototype.createTickXAxisWithDates = function (t) {
    var n = Y,
      r,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      B,
      O,
      R,
      H,
      z,
      W,
      G,
      Z,
      X,
      ie,
      j,
      J,
      ae,
      se,
      ne,
      le,
      ue,
      oe,
      ce,
      Q,
      ee,
      re,
      de,
      he,
      fe,
      pe,
      ge,
      ve,
      be,
      _e,
      ye,
      we;
    r = "heikin", r += "ashi", i = "d", i += "a", i += "y", a = "s", a += "ec", a += "ond", s = "m", s += "inute", t || (t = this.chart), t.xaxis = [], h = t.context, l = [e.MILLISECOND, e.SECOND, e.MINUTE, e.HOUR, e.DAY, e.MONTH, e.YEAR], this.timeIntervalMap || (u = "2", u += "000", c = "1", c += "0", c += ":00", d = "10", d += ":00:00", f = h.measureText.bind(h), o = {}, o[e.MILLISECOND] = {
      arr: [1, 2, 5, 10, 20, 50, 100, 250, 500],
      minTimeUnit: 0,
      maxTimeUnit: 1000,
      measurement: f("10:00:00.000")
    }, o[e.SECOND] = {
      arr: [1, 2, 3, 4, 5, 6, 10, 12, 15, 20, 30],
      minTimeUnit: 0,
      maxTimeUnit: 60,
      measurement: f(d)
    }, o[e.MINUTE] = {
      arr: [1, 2, 3, 4, 5, 6, 10, 12, 15, 20, 30],
      minTimeUnit: 0,
      maxTimeUnit: 60,
      measurement: f("10:00")
    }, o[e.HOUR] = {
      arr: [1, 2, 3, 4, 6, 12],
      minTimeUnit: 0,
      maxTimeUnit: 24,
      measurement: f(c)
    }, o[e.DAY] = {
      arr: [1, 2, 7, 14],
      minTimeUnit: 1,
      maxTimeUnit: 32,
      measurement: f("30")
    }, o[e.MONTH] = {
      arr: [1, 2, 3, 6],
      minTimeUnit: 1,
      maxTimeUnit: 13,
      measurement: f("Mar")
    }, o[e.YEAR] = {
      arr: [1, 2, 3, 5],
      minTimeUnit: 1,
      maxTimeUnit: 20000000,
      measurement: f("2000")
    }, o[e.DECADE] = {
      arr: [10],
      minTimeUnit: 0,
      maxTimeUnit: 2000000,
      measurement: f(u)
    }, this.timeIntervalMap = o), o = this.timeIntervalMap, g = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], p = this.layout.periodicity, m = this.layout.interval, x = t.maxTicks, y = t.dataSegment, b = t.xAxis, C = y.length, k = b.idealTickSizePixels || b.autoComputedTickSizePixels, M = this.chart.width / k;
    for (var Te = 0; Te < C && !y[Te]; Te++);
    function Pe(Ae) {
      var He, Ne;
      if (L == e.MILLISECOND) He = Ae.getMilliseconds(), Ne = Ae.getSeconds();else if (L == e.SECOND) He = Ae.getSeconds(), Ne = Ae.getMinutes();else if (L == e.MINUTE) He = Ae.getMinutes(), Ne = Ae.getHours();else if (L == e.HOUR) He = Ae.getHours() + Ae.getMinutes() / 60, Ne = Ae.getDate();else if (L == e.DAY) {
        He = Ae.getDate(), n.X3w(57);
        var Ge = n.v9m(10, 1, 14, 10, 5);
        Ne = Ae.getMonth() + Ge;
      } else if (L == e.MONTH) {
        n.X3w(1);
        var dt = n.v9m(19, 132, 0, 7);
        He = Ae.getMonth() + dt, Ne = Ae.getFullYear();
      } else if (L == e.YEAR) {
        He = Ae.getFullYear(), n.X3w(25);
        var je = n.b3p(4, 8000, 7004);
        Ne = Ae.getFullYear() + je;
      } else He = Ae.getFullYear(), n.U1$(22), Ne = n.b3p("0", 0);
      return [He, Ne];
    }
    if (Te == C) return [];
    switch (I = 0, v = this.layout.timeUnit || s, isNaN(m) && (v = m, m = 1), S = 0, v) {
      case "millisecond":
        S = 1;
        break;
      case a:
        S = 1000, n.X3w(83), l.splice(0, n.v9m(32, "1"));
        break;
      case "minute":
        S = 60000, l.splice(0, 2);
        break;
      case i:
        S = 86400000, l.splice(0, 4);
        break;
      case "week":
        n.X3w(0), S = n.v9m(86400000, 7), l.splice(0, 4);
        break;
      case "month":
        n.X3w(0), S = n.b3p(86400000, 30), l.splice(0, 5);
        break;
    }
    for (w = this.layout.aggregationType, S && (!w || w == "ohlc" || w == r) ? (n.U1$(160), I = n.b3p(C, S, m, p)) : I = y[C - 1].DT.getTime() - y[Te].DT.getTime(), I === 0 ? t.market ? (T = t.market.newIterator({
      begin: new Date(),
      interval: "day",
      periodicity: 1
    }), T.next(), D = T.previous(), T = this.standardMarketIterator(D, null, t), F = T.next(), I = (F.getTime() - D.getTime()) * x) : (n.U1$(161), I = n.b3p(1000, 60, x, 24, 60)) : (n.U1$(162), I = n.v9m(x, I, C)), n.U1$(31), P = n.b3p(M, I), _ = 0; _ < l.length && !(l[_] > P + 0.001); _++);
    if (P < 1 && console.log("createTickXAxisWithDates: Assertion error. msPerGridLine < 1. Make sure your masterData has correct time stamps for the active periodicity and it is sorted from OLDEST to NEWEST."), _ == l.length) _--;else if (_ > 0) {
      n.X3w(2), V = l[n.b3p(1, _)], A = o[V].arr, n.U1$(163);
      var Le = n.v9m(6, 10, 10, 10, 61);
      E = A[A.length - Le], P - V * E < l[_] - P && _--;
    }
    for (L = b.timeUnit || l[_], b.activeTimeUnit = L, N = o[L], U = N.arr, _ = 0; _ < U.length && !(U[_] * L > P); _++);
    for ((_ == U.length || P - U[_ - 1] * L < U[_] * L - P) && _--, N.measurement.width * 2 < this.layout.candleWidth && (_ = 0), B = b.timeUnitMultiplier || U[_], O = [], R = this.layout.candleWidth, _ = 0; _ <= x && !y[_]; _++);
    if (_ > 0 && _ < x) {
      t.market && (H = this.standardMarketIterator(y[_].DT, b.adjustTimeZone ? this.displayZone : null));
      for (var Be = _; Be > 0; Be--) z = {}, H && !(t.lineApproximation && R < 1) && (z.DT = H.previous()), t.xaxis.unshift(z);
    }
    for (W = 0, G = N.minTimeUnit, Z = -1, X = !0, ie = Pe(y[_].DT), J = 0, ae = 0, se = y[_].tick, J; J < se && (j = Pe(this.chart.dataSet[se - J].DT), j[1] == ie[1]); J++) ie = j;
    for (ae; ae < this.chart.dataSet.length - se && (j = Pe(this.chart.dataSet[se + ae].DT), j[1] == ie[1]); ae++) ie = j;
    for (ne = null, _ = 0; _ < x + ae; _++) {
      if (le = y[_], le ? J && (le = t.dataSet[le.tick - J]) : le = t.xaxis[_], _ < C) {
        if (ue = le, ue.displayDate && b.adjustTimeZone ? W = ue.displayDate : W = ue.DT, _ && !J && t.segmentImage) {
          oe = t.segmentImage[_], n.U1$(59);
          var Ue = n.b3p(0, 16, 2, 4, 16);
          R = (oe.leftOffset - oe.candleWidth / Ue) / _;
        }
      } else if (t.market) {
        if (ce = "t", ce += "i", ce += "c", ce += "k", this.layout.interval == ce && !b.futureTicksInterval || t.lineApproximation && R < 1 || !b.futureTicks) break;
        ne || (ne = this.standardMarketIterator(y[C - 1].DT, b.adjustTimeZone ? this.displayZone : null)), W = ne.next();
      }
      if (W) {
        if (Q = null, n.U1$(2), re = n.v9m(J, _), de = {
          DT: W
        }, _ < C ? de.data = le : de.data = null, J ? (J--, _--) : !t.xaxis[_] && _ < x && t.xaxis.push(de), ie = Pe(W), he = ie[0], fe = ie[1], Z != fe) {
          if (he <= G && (G = N.minTimeUnit), ee = t.left + re * R - 1, Q = null, L == e.HOUR || L == e.MINUTE && Z > fe) {
            if (this.internationalizer) Q = this.internationalizer.monthDay.format(W);else {
              n.U1$(85);
              var Ke = n.v9m(5, 15, 0, 9);
              Q = W.getMonth() + Ke + "/" + W.getDate();
            }
            b.formatter && (Q = b.formatter(W, "boundary", e.DAY, 1, Q));
          } else L == e.DAY ? Z > fe ? (Q = W.getFullYear(), b.formatter && (pe = "bo", pe += "u", pe += "n", pe += "dary", Q = b.formatter(W, pe, e.YEAR, 1, Q))) : (Q = e.monthAsDisplay(W.getMonth(), !1, this), b.formatter && (ge = "bounda", ge += "ry", Q = b.formatter(W, ge, e.MONTH, 1, Q))) : L == e.MONTH && (Q = W.getFullYear(), b.formatter && (ve = "boun", ve += "d", ve += "ary", Q = b.formatter(W, ve, e.YEAR, 1, Q)));
          Q && Z != -1 && (be = "bo", be += "u", be += "ndar", be += "y", O.push(new e.ChartEngine.XAxisLabel(ee, be, Q)));
        }
        if (he >= G) {
          if (_e = "lin", _e += "e", G == N.minTimeUnit && fe == Z) continue;
          ye = new Date(+W), n.X3w(93);
          var Je = n.b3p(26, 2, 22);
          n.X3w(2);
          var $e = n.v9m(16, 17);
          n.X3w(164);
          var ke = n.b3p(2, 10, 13, 1296, 10);
          if (ee = t.left + (Je * re + $e) * R / ke - 1, we = Math.floor(he / B) * B, we < he && (this.layout.interval == "week" ? we = he : (n.U1$(31), ee -= n.b3p(2, R))), L == e.MILLISECOND ? ye.setMilliseconds(we) : L == e.SECOND ? (ye.setMilliseconds(0), ye.setSeconds(we)) : L == e.MINUTE ? (ye.setMilliseconds(0), ye.setSeconds(0), ye.setMinutes(we)) : L == e.HOUR ? (ye.setMilliseconds(0), ye.setSeconds(0), ye.setMinutes(0), ye.setHours(we)) : L == e.DAY ? ye.setDate(Math.max(1, we)) : L == e.MONTH ? (ye.setDate(1), n.U1$(2), ye.setMonth(n.v9m(1, we))) : (L == e.YEAR, ye.setDate(1), ye.setMonth(0)), n.X3w(8), G = n.v9m(B, we), L == e.DAY && (N.maxTimeUnit = g[ye.getMonth()] + 1), G >= N.maxTimeUnit && (G = N.minTimeUnit), Z = fe, X && we < he) {
            X = !1;
            continue;
          }
          L == e.DAY ? Q = ye.getDate() : L == e.MONTH ? Q = e.monthAsDisplay(ye.getMonth(), !1, this) : L == e.YEAR || L == e.DECADE ? Q = ye.getFullYear() : Q = e.timeAsDisplay(ye, this, L), b.formatter && (Q = b.formatter(ye, "line", L, B, Q)), O.push(new e.ChartEngine.XAxisLabel(ee, _e, Q));
        }
      }
    }
    return O;
  };
};
Us = q => {
  var e;
  e = q.CIQ, e.ChartEngine.prototype.createYAxis = function (t, n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T;
    if (!this.runPrepend("createYAxis", arguments)) {
      if (i = t.chart, a = t.name == i.name, n || (n = {}), n.noChange = !1, s = n.yAxis ? n.yAxis : t.yAxis, e.ChartEngine.enableCaching && s.high == t.cacheHigh && s.low == t.cacheLow) {
        o = i.dataSet.length - i.scroll - 1, r.X3w(8);
        var D = r.b3p(1, 0);
        h = o + i.maxTicks + D, t.cacheLeft = o, t.cacheRight = h, n.noChange = !0;
      } else t.cacheLeft = 1000000, t.cacheRight = -1, t.cacheHigh = s.high, t.cacheLow = s.low;
      if (l = i.xAxis.idealTickSizePixels ? i.xAxis.idealTickSizePixels : i.xAxis.autoComputedTickSizePixels, s.goldenRatioYAxis) {
        u = -1118934575, r.X3w(0), c = r.v9m("2015966414", 1), d = 2;
        for (var F = 1; r.N(F.toString(), F.toString().length, 9298) !== u; F++) s.idealTickSizePixels != l / +"1.618" && (n.noChange = !1), d += 2;
        r.N(d.toString(), d.toString().length, 38317) !== c && s.idealTickSizePixels !== l % 86759 && (n.noChange = !0);
      }
      if (!n.noChange) {
        if (g = "proje", g += "ct", g += "io", g += "n", this.adjustYAxisHeightOffset(t, s), p = s.height = s.bottom - s.top, m = (s.high - s.low) / (p - s.zoom), !s.semiLog) if (n.ground) s.high = s.high + s.zoom * m;else {
          r.U1$(63);
          var P = r.b3p(2, 15, 27, 11);
          s.high = s.high + (s.zoom / ("2" * P) + s.scroll) * m, r.X3w(9);
          var _ = r.v9m(9, 7);
          s.low = s.low - (s.zoom / _ - s.scroll) * m;
        }
        (s.min || s.min === 0) && (s.low = s.min), (s.max || s.max === 0) && (s.high = s.max), s.shadow = s.high - s.low, s.semiLog && (!this.activeDrawing || this.activeDrawing.name != g) && (x = function () {
          var L;
          s.logHigh = Math.log(s.high) / Math.LN10, L = Math.max(s.low, 1e-9), s.logLow = Math.log(L) / Math.LN10, s.low <= 0 && (s.logLow = 0), s.logShadow = s.logHigh - s.logLow;
        }, s.semiLog && x(), y = s.height / (s.height - s.zoom), s.flipped ? (s.high = this.transformedPriceFromPixel(s.bottom + y * (s.zoom / 2 + s.scroll), t, s), s.low = this.transformedPriceFromPixel(s.top - y * (s.zoom / 2 - s.scroll), t, s)) : (s.high = this.transformedPriceFromPixel(s.top - y * (s.zoom / 2 + s.scroll), t, s), s.low = this.transformedPriceFromPixel(s.bottom + y * (s.zoom / 2 - s.scroll), t, s)), s.shadow = s.high - s.low, s.semiLog && x()), s.goldenRatioYAxis && a && s == t.yAxis ? (r.X3w(31), s.idealTickSizePixels = r.b3p(1.618, l), s.idealTickSizePixels === 0 && (C = "s", C += "tx_yaxis", b = this.getCanvasFontSize(C), r.U1$(165), s.idealTickSizePixels = r.v9m("5", 0, b))) : s.idealTickSizePixels || (b = this.getCanvasFontSize("stx_yaxis"), a ? (r.X3w(0), s.idealTickSizePixels = r.v9m(b, 5)) : (r.U1$(166), s.idealTickSizePixels = r.v9m("2", b))), k = Math.round(p / s.idealTickSizePixels), f = n.range ? n.range[1] - n.range[0] : s.shadow, r.X3w(31), s.priceTick = Math.floor(r.b3p(k, f)), M = 1;
        for (var V = 0; V < 10 && !(s.priceTick > 0); V++) M *= 10, s.priceTick = Math.floor(f / k * M) / M;
        if (V == 10 && (s.priceTick = 1e-8), s.priceTick = Math.round(f / k * M) / M, I = Math.round(f / s.priceTick), n.range && I < f && !s.noEvenDivisorTicks) {
          for (; I >= 1 && f % I !== 0;) I--;
          r.U1$(31), s.priceTick = r.b3p(I, f);
        }
        if (s.minimumPriceTick) {
          v = s.minimumPriceTick, b = this.getCanvasFontSize("stx_yaxis");
          for (var A = 0; A < 100 && (r.X3w(31), S = r.b3p(v, f), p / S < b * 2); A++) v += s.minimumPriceTick;
          A < 100 && (s.priceTick = v);
        }
      }
      if ((s.priceTick <= 0 || s.priceTick === Infinity) && (s.priceTick = 1), s.multiplier = s.height / s.shadow, s.multiplier == Infinity && (s.multiplier = 0), !s.decimalPlaces && s.decimalPlaces !== 0) {
        if (a) {
          w = 0;
          for (var E = 0; E < t.yAxis.shadowBreaks.length; E++) T = t.yAxis.shadowBreaks[E], t.yAxis.shadow < T[0] && (w = T[1]);
          s.printDecimalPlaces = w;
        } else s.printDecimalPlaces = null;
      } else s.printDecimalPlaces = s.decimalPlaces;
      this.runAppend("createYAxis", arguments);
    }
  }, e.ChartEngine.prototype.drawYAxis = function (t, n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      B,
      O,
      R,
      H,
      z,
      W,
      G,
      Z,
      X;
    if (i = "drawYAxi", i += "s", a = "st", a += "x_yaxis", n || (n = {}), s = n.yAxis ? n.yAxis : t.yAxis, !(t.hidden || s.noDraw || !s.width)) {
      if ((!e.Comparison || s.priceFormatter != e.Comparison.priceFormat) && (o = s.fractional, o ? (s.originalPriceFormatter || (s.originalPriceFormatter = {
        func: s.priceFormatter
      }), o.resolution || (o.resolution = s.minimumPrice), o.formatter || (o.formatter = "'"), s.priceFormatter || (s.priceFormatter = function (se, ne, le) {
        var ue, oe, ce, Q;
        if (o) {
          ue = "", le < 0 && (ue = "-", le = Math.abs(le)), oe = Math.floor(Math.round(le / o.resolution) * o.resolution), ce = Math.round((le - oe) / o.resolution), Q = Math.floor(ce), r.U1$(2);
          var ee = r.b3p(5, 15);
          return r.U1$(167), r.b3p(9, 15, 6, 7, 68), r.X3w(49), r.b3p(756, 7580, 11), r.U1$(62), r.v9m(4648, 9, 79034, 2), ue + oe + o.formatter + (Q < ee ? "0" : "") + Q + (ce - Q >= 0.5 ? "+" : "");
        }
      })) : s.originalPriceFormatter && (s.priceFormatter = s.originalPriceFormatter.func, s.originalPriceFormatter = null)), r.V5D(), h = this.colorOrStyle(s.textStyle || a), l = this.highlightedDraggable, u = 0, l && this.yaxisMatches(l, s) ? u = 0.15 : s.highlight && (u = 0.1), u && (c = h.constructor == String ? h : h.color, s.setBackground(this, {
        color: c,
        opacity: u
      })), s.pretty) return this.drawYAxisPretty(t, n);
      if (!this.runPrepend(i, arguments)) {
        if (!n.noDraw && !s.noDraw) {
          if (d = s.yAxisPlotter, !d || !n.noChange) {
            if (f = "l", f += "e", f += "ft", g = "l", g += "ef", g += "t", p = "f", p += "il", p += "l", m = "gri", m += "d", d = s.yAxisPlotter = new e.Plotter(), x = t.chart, y = t.name == x.name && s.name === t.yAxis.name, !s.priceTick) return;
            if (b = s.shadow, C = n.range, C) {
              r.U1$(8);
              var ie = r.v9m(1, 0);
              b = C[ie] - C[0];
            }
            if (k = b / s.priceTick, k = Math.round(k), s.semiLog && (M = Math.log(this.valueFromPixel(s.flipped ? s.top : s.bottom, t)) / Math.LN10, I = (s.logHigh - s.logLow) / k), d.newSeries(m, "stroke", this.canvasStyle("stx_grid")), d.newSeries("text", p, h), d.newSeries("border", "stroke", this.canvasStyle("stx_grid_border")), v = 0, S = C ? C[1] : s.high, w = C ? C[0] : s.low, T = s.displayBorder === null ? x.panel.yAxis.displayBorder : s.displayBorder, this.axisBorders === !1 && (T = !1), this.axisBorders === !0 && (T = !0), F = x.dynamicYAxis, P = F ? s.width : NaN, _ = this.getYAxisCurrentPosition(s, t), _ == g ? D = s.left + s.width : D = s.left, V = Math.round(D) + 0.5, A = T ? 3 : 0, _ == f && (A = T ? -3 : 0), y) {
              if (s.shadow < 1) {
                r.U1$(8);
                var j = r.v9m(2, 8);
                r.X3w(2);
                var J = r.b3p(16, 17);
                v = (parseInt(w / s.priceTick, j) + J) * s.priceTick - w;
              } else v = s.priceTick - Math.round(w % s.priceTick * t.chart.roundit) / t.chart.roundit;
            } else v = S % s.priceTick;
            E = this.getCanvasFontSize("stx_yaxis");
            for (var ae = 0; ae < k; ae++) s.semiLog ? (r.X3w(140), N = r.v9m(I, ae, M), r.X3w(22), L = Math.pow(r.v9m("10", 2), N)) : y ? L = w + ae * s.priceTick + v : L = S - ae * s.priceTick - v, U = this.pixelFromTransformedValue(L, t, s), B = Math.round(U) + +"0.5", !(B + E / 2 > t.bottom) && (B - E / 2 < t.top || Math.abs(B - s.bottom) < 1 || (s.flipped && (B = s.top + s.bottom - B), s.displayGridLines && (O = "g", O += "r", O += "i", O += "d", d.moveTo(O, t.left + 1, B), d.lineTo("grid", t.right - 1, B)), T && (R = "b", R += "o", R += "r", R += "der", r.X3w(145), d.moveTo(R, r.v9m(V, "0.5"), B), r.X3w(8), d.lineTo("border", r.b3p(A, V), B)), s.priceFormatter ? L = s.priceFormatter(this, t, L) : L = this.formatYAxisPrice(L, t, null, s), H = s.textBackground ? this.containerColor : null, z = 3, r.U1$(43), W = r.v9m(A, z, D), _ == "left" ? (W = s.left + z, s.justifyRight !== !1 && (W = s.left + s.width + A - z)) : s.justifyRight && (W = D + s.width), d.addText("text", L, W, B, H, null, E), F && (P = Math.max(P, x.context.measureText(L).width + Math.abs(A) + z))));
            if (T && (G = "bo", G += "rde", G += "r", Z = Math.round(s.bottom) + 0.5, d.moveTo(G, V, s.top), d.lineTo("border", V, Z), d.draw(this.getBackgroundCanvas(x).context, "border")), F && P > s.width) throw X = "re", X += "boot", X += " draw", s._dynamicWidth = P, this.calculateYAxisPositions(), new Error(X);
            if (!F && s._dynamicWidth) throw this.resetDynamicYAxis({
              chartName: x.name
            }), new Error("reboot draw");
          }
          s == t.yAxis && this.plotYAxisGrid(t);
        }
        this.runAppend("drawYAxis", arguments);
      }
    }
  }, e.ChartEngine.prototype.drawYAxisPretty = function (t, n) {
    var r = Y,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      B,
      O,
      R,
      H,
      z,
      W,
      G,
      Z,
      X,
      ie,
      j,
      J,
      ae,
      se,
      ne,
      le,
      ue;
    if (!this.runPrepend("drawYAxis", arguments) && (n || (n = {}), i = n.yAxis ? n.yAxis : t.yAxis, !(t.hidden || i.noDraw || !i.width))) {
      if (!n.noDraw) {
        if (a = i.yAxisPlotter, !a || !n.noChange) {
          if (s = "l", s += "eft", o = "t", o += "e", o += "x", o += "t", h = "g", h += "r", h += "i", h += "d", a = i.yAxisPlotter = new e.Plotter(), l = t.chart, !i.priceTick || isNaN(i.high) || isNaN(i.low)) return;
          if (u = i.shadow, n.range) {
            r.X3w(54);
            var oe = r.b3p(1, 2, 2, 3);
            u = n.range[oe] - n.range[0];
          }
          c = i.height / i.idealTickSizePixels, c = Math.round(c), d = i.textStyle || "stx_yaxis", a.newSeries(h, "stroke", this.canvasStyle("stx_grid")), a.newSeries(o, "fill", this.colorOrStyle(d)), a.newSeries("border", "stroke", this.canvasStyle("stx_grid_border")), f = n.range, g = f ? f[1] : i.high, p = f ? f[0] : i.low, m = i.displayBorder === null ? l.panel.yAxis.displayBorder : i.displayBorder, this.axisBorders === !1 && (m = !1), this.axisBorders === !0 && (m = !0), y = l.dynamicYAxis, b = y ? i.width : NaN, C = this.getYAxisCurrentPosition(i, t), C == "left" ? x = i.left + i.width : x = i.left, k = Math.round(x) + 0.5, M = m ? 3 : 0, C == s && (M = m ? -3 : 0), I = this.getCanvasFontSize("stx_yaxis"), v = i.increments, S = v.length, w = 0, T = 1, D = 0, F = 0, P = 0, _ = Number.MAX_VALUE;
          for (var ce = 0; ce < 100; ce++) {
            r.X3w(63);
            var Q = r.v9m(11, 1, 19, 17);
            if (D = v[w] * Math.pow(Q, P), r.X3w(31), T = Math.floor(r.v9m(D, u)), r.U1$(2), V = Math.abs(r.v9m(T, c)), V > _) break;
            if (_ = V, T == c) {
              F = D;
              break;
            } else T > c ? (w++, w >= S && (w = 0, P++)) : (w--, w < 0 && (r.U1$(2), w = r.v9m(1, S), P--));
            F = D;
          }
          if (A = Math.ceil(p / F) * F, E = i.bottom - this.pixelFromTransformedValue(A, t, i), L = 0, E > i.idealTickSizePixels && i.semiLog && i.prettySemiLog) {
            for (N = Math.ceil(p), U = 0; A - N >= 10000 && U <= 15;) A /= 10, N /= 10, U++;
            for (A = Math.ceil(A), N = Math.ceil(N), N; N < A && A % N !== 0; ++N);
            A *= Math.pow(10, U), N *= Math.pow(10, U), N < A && (A === F && (F = N, L = N), A = N);
          }
          if (i.height > i.zoom) {
            B = 0, O = Number.MAX_VALUE, R = -174950324, H = -999944285, z = 2;
            for (var ee = 1; r.Q_(ee.toString(), ee.toString().length, 17048) !== R; ee++) W = "stx", W += "_yax", W += "i", W += "s", l.context.save(), this.canvasFont(W, l.context), z += 2;
            r.Q_(z.toString(), z.toString().length, 36106) !== H && (l.context.save(), this.canvasFont("", l.context));
            for (var re = 0; re < 100 && (r.U1$(140), G = r.v9m(F, B, A), !(G > g)); re++) {
              if (F += L, B++, Z = this.pixelFromTransformedValue(G, t, i), O - Z < I + 1 && L > 0) {
                re = B = 0, O = Number.MAX_VALUE, F = L, L *= 2, a.reset();
                continue;
              }
              if (O = Z, X = Math.round(Z) + 0.5, !(X + I / 2 > t.bottom) && !(X - I / 2 < t.top) && !(Math.abs(X - i.bottom) < 1)) {
                if (i.displayGridLines && (ie = "g", ie += "r", ie += "i", ie += "d", a.moveTo(ie, t.left + 1, X), a.lineTo("grid", t.right - 1, X)), m && (r.U1$(2), a.moveTo("border", r.v9m(0.5, k), X), r.X3w(8), a.lineTo("border", r.v9m(M, k), X)), i.priceFormatter ? G = i.priceFormatter(this, t, G) : G = this.formatYAxisPrice(G, t, null, i), j = i.textBackground ? this.containerColor : null, J = 3, r.X3w(43), ae = r.v9m(M, J, x), C == "left") {
                  r.U1$(8);
                  var de = r.b3p(3, 0);
                  ae = i.left + de, i.justifyRight !== !1 && (ae = i.left + i.width + M - J);
                } else i.justifyRight && (ae = x + i.width);
                a.addText("text", G, ae, X, j, null, I), y && (r.X3w(8), se = r.v9m("\xA0", G), b = Math.max(b, l.context.measureText(se).width + Math.abs(M) + J));
              }
            }
            l.context.restore(), re >= 100 && (ne = "drawYAxisPretty: assertion erro", ne += "r. zz reached 100", console.log(ne));
          }
          if (m && (le = "bord", le += "er", ue = Math.round(i.bottom) + +"0.5", a.moveTo("border", k, i.top), a.lineTo("border", k, ue), a.draw(this.getBackgroundCanvas(l).context, le)), y && b > i.width) throw i._dynamicWidth = b, this.calculateYAxisPositions(), new Error("reboot draw");
          if (!y && i._dynamicWidth) throw this.resetDynamicYAxis({
            chartName: l.name
          }), new Error("reboot draw");
        }
        i == t.yAxis && this.plotYAxisGrid(t);
      }
      r.S97(), this.runAppend("drawYAxis", arguments);
    }
  };
};
Ze = {};
hs(Ze);
us(Ze);
cs(Ze);
ds(Ze);
Bs = 1229626762;
Os = -1423186141;
Yr = 2;
for (var na = 1; Y.Q_(na.toString(), na.toString().length, 97049) !== Bs; na++) oa(Ze), la(Ze), ha(Ze), ua(Ze), ca(Ze), da(Ze), fa(Ze), Yr += 2;
Y.N(Yr.toString(), Yr.toString().length, 3654) !== Os && (oa(Ze), la(Ze), ha(Ze), ua(Ze), ca(Ze), da(Ze), fa(Ze));
fs(Ze);
ps(Ze);
ms(Ze);
gs(Ze);
xs(Ze);
vs(Ze);
ys(Ze);
bs(Ze);
Cs(Ze);
Ss(Ze);
ws(Ze);
ks(Ze);
Ts(Ze);
Ds(Ze);
As(Ze);
Ms(Ze);
_s(Ze);
qs(Ze);
Is(Ze);
Fs(Ze);
Es(Ze);
Ps(Ze);
Ls(Ze);
Ns(Ze);
Vs(Ze);
Us(Ze);
var {
  CIQ: K,
  SplinePlotter: Hs,
  timezoneJS: Rs,
  $$: zs,
  $$$: Ws
} = Ze;
te[184848] = function () {
  for (var q = 2; q !== 9;) switch (q) {
    case 1:
      return globalThis;
    case 5:
      var e;
      try {
        for (var t = 2; t !== 6;) switch (t) {
          case 9:
            delete e.Z2pDN;
            var n = Object.prototype;
            delete n.$qaME, t = 6;
            break;
          case 3:
            throw "";
          case 4:
            t = typeof Z2pDN > "u" ? 3 : 9;
            break;
          case 2:
            Object.defineProperty(Object.prototype, "$qaME", {
              get: function () {
                return this;
              },
              configurable: !0
            }), e = $qaME, e.Z2pDN = e, t = 4;
            break;
        }
      } catch {
        e = window;
      }
      return e;
    case 2:
      q = typeof globalThis == "object" ? 1 : 5;
      break;
  }
}();
Ml(te[184848]);
function Ml(q) {
  function e(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].Array;
    }
  }
  function t(l, u, c, d, f) {
    for (var g = 2; g !== 6;) switch (g) {
      case 2:
        var p = [arguments];
        p[7] = "", p[7] = "neProperty", p[3] = "fi", g = 3;
        break;
      case 3:
        p[4] = "de", p[2] = !0, p[2] = !1;
        try {
          for (var m = 2; m !== 13;) switch (m) {
            case 2:
              p[6] = {}, p[8] = (0, p[0][1])(p[0][0]), p[5] = [p[8], p[8].prototype][p[0][3]], m = 4;
              break;
            case 9:
              p[5][p[0][4]] = p[5][p[0][2]], p[6].set = function (y) {
                for (var b = 2; b !== 5;) switch (b) {
                  case 2:
                    var C = [arguments];
                    p[5][p[0][2]] = C[0][0], b = 5;
                    break;
                }
              }, p[6].get = function () {
                for (var y = 2; y !== 13;) switch (y) {
                  case 2:
                    var b = [arguments];
                    b[7] = "", b[7] = "", b[7] = "ne", y = 3;
                    break;
                  case 3:
                    b[1] = "", b[1] = "undefi", b[4] = b[1], b[4] += b[7], y = 6;
                    break;
                  case 6:
                    return b[4] += r[68], typeof p[5][p[0][2]] == b[4] ? void 0 : p[5][p[0][2]];
                    break;
                }
              }, p[6].enumerable = p[2], m = 14;
              break;
            case 4:
              m = p[5].hasOwnProperty(p[0][4]) && p[5][p[0][4]] === p[5][p[0][2]] ? 3 : 9;
              break;
            case 3:
              return;
            case 14:
              try {
                for (var x = 2; x !== 3;) switch (x) {
                  case 2:
                    p[9] = p[4], p[9] += p[3], p[9] += p[7], x = 4;
                    break;
                  case 4:
                    p[0][0].Object[p[9]](p[5], p[0][4], p[6]), x = 3;
                    break;
                }
              } catch {}
              m = 13;
              break;
          }
        } catch {}
        g = 6;
        break;
    }
  }
  for (var n = 2; n !== 123;) switch (n) {
    case 36:
      r[76] = "p7", r[63] = "_resi", r[29] = "trac", r[90] = "", r[90] = "__abs", n = 50;
      break;
    case 118:
      r[95] += r[4], r[82] = r[8], r[82] += r[56], r[82] += r[9], n = 114;
      break;
    case 129:
      i(e, "push", r[72], r[22]), n = 128;
      break;
    case 124:
      i(a, "apply", r[72], r[79]), n = 123;
      break;
    case 114:
      r[53] = r[2], r[53] += r[18], r[53] += r[7], r[59] = r[31], n = 110;
      break;
    case 2:
      var r = [arguments];
      r[1] = "", r[1] = "3qs", r[6] = "", r[6] = "8", r[7] = "", r[7] = "", n = 7;
      break;
    case 19:
      r[3] = "", r[5] = "N", r[9] = "s7", r[31] = "Z", n = 15;
      break;
    case 82:
      r[67] = r[90], r[67] += r[29], r[67] += r[80], r[91] = r[76], n = 78;
      break;
    case 99:
      r[57] += r[87], r[57] += r[92], r[22] = r[13], r[22] += r[45], r[22] += r[56], r[88] = r[48], n = 93;
      break;
    case 40:
      r[13] = "G1u", r[62] = "yt", r[76] = "", r[32] = "dual", n = 36;
      break;
    case 44:
      r[62] = "", r[45] = "uL", r[92] = "iVci", r[62] = "", n = 40;
      break;
    case 125:
      i(s, r[43], r[89], r[54]), n = 124;
      break;
    case 106:
      r[37] += r[1], n = 105;
      break;
    case 110:
      r[59] += r[11], r[59] += r[5], r[37] = r[68], r[37] += r[6], n = 106;
      break;
    case 93:
      r[88] += r[86], r[88] += r[78], r[95] = r[3], r[95] += r[17], n = 118;
      break;
    case 50:
      r[33] = "", r[33] = "2zf", r[24] = "", r[24] = "s", n = 46;
      break;
    case 134:
      i(s, "String", r[89], r[59]), n = 133;
      break;
    case 105:
      var i = function (l, u, c, d) {
        for (var f = 2; f !== 5;) switch (f) {
          case 2:
            var g = [arguments];
            t(r[0][0], g[0][0], g[0][1], g[0][2], g[0][3]), f = 5;
            break;
        }
      };
      n = 135;
      break;
    case 132:
      i(h, "substring", r[72], r[82]), n = 131;
      break;
    case 90:
      r[54] += r[73], r[54] += r[46], r[43] = r[86], r[43] += r[19], n = 86;
      break;
    case 7:
      r[7] = "VY", r[2] = "", r[2] = "T7", r[8] = "", n = 12;
      break;
    case 131:
      i(h, "replace", r[72], r[95]), n = 130;
      break;
    case 15:
      r[3] = "V9", r[68] = "d", r[78] = "", r[78] = "Fxku", n = 24;
      break;
    case 46:
      r[80] = "t", r[58] = "", r[58] = "e", r[46] = "", r[60] = "$o", r[46] = "", n = 61;
      break;
    case 133:
      i(h, "fromCharCode", r[89], r[53]), n = 132;
      break;
    case 31:
      r[40] = "A", r[23] = "", r[17] = "Ku", r[23] = "oM", n = 44;
      break;
    case 73:
      r[71] = "", r[71] = "X2q", r[72] = 1, r[89] = 0, n = 69;
      break;
    case 130:
      i(e, "map", r[72], r[88]), n = 129;
      break;
    case 12:
      r[8] = "", r[8] = "w8", r[4] = "", r[4] = "po", n = 19;
      break;
    case 61:
      r[46] = "wM", r[19] = "_optimiz", r[86] = "_", r[77] = "", n = 57;
      break;
    case 24:
      r[48] = "", r[48] = "k", r[11] = "8cM", r[56] = "", n = 35;
      break;
    case 35:
      r[18] = "M", r[56] = "O", r[87] = "", r[87] = "4", n = 31;
      break;
    case 86:
      r[43] += r[58], r[16] = r[24], r[16] += r[60], r[16] += r[33], n = 82;
      break;
    case 127:
      i(s, r[55], r[89], r[91]), n = 126;
      break;
    case 78:
      r[91] += r[62], r[91] += r[23], r[55] = r[86], r[55] += r[63], r[55] += r[32], r[57] = r[40], n = 99;
      break;
    case 135:
      i(h, "charCodeAt", r[72], r[37]), n = 134;
      break;
    case 69:
      r[79] = r[71], r[79] += r[51], r[79] += r[27], r[54] = r[77], n = 90;
      break;
    case 126:
      i(s, r[67], r[89], r[16]), n = 125;
      break;
    case 57:
      r[77] = "C", r[73] = "3Iv", r[27] = "", r[27] = "i", r[51] = "", r[51] = "", r[51] = "kE", n = 73;
      break;
    case 128:
      i(o, "test", r[72], r[57]), n = 127;
      break;
  }
  function a(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].Function;
    }
  }
  function s(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0];
    }
  }
  function o(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].RegExp;
    }
  }
  function h(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].String;
    }
  }
}
function te() {}
te[157136] = function () {
  function q(s) {
    for (var o = 2; o !== 7;) switch (o) {
      case 3:
        l += Z8cMN.T7MVY(s[u] - h + 90), o = 9;
        break;
      case 2:
        var h = 7,
          l = "";
        o = 5;
        break;
      case 5:
        var u = 0;
        o = 4;
        break;
      case 8:
        return l;
      case 9:
        u++, o = 4;
        break;
      case 4:
        o = u < s.length ? 3 : 8;
        break;
    }
  }
  for (var e = 2; e !== 4;) switch (e) {
    case 2:
      var t = te[184848],
        n,
        r,
        i = {};
      return {
        c3zV1oR: function (s, o, h, l) {
          for (var u = 2; u !== 3;) switch (u) {
            case 4:
              return i[c];
            case 2:
              var c = "" + s + o + h + l;
              u = 1;
              break;
            case 1:
              u = i[c] ? 4 : 5;
              break;
            case 5:
              i[c] = a(s, o, h, l), u = 4;
              break;
          }
        },
        S8f_5i9: function (s, o, h, l) {
          for (var u = 2; u !== 1;) switch (u) {
            case 2:
              return a(s, o, h, l, !0);
          }
        }
      };
  }
  function a(s, o, h, l, u) {
    for (var c = 2; c !== 15;) switch (c) {
      case 13:
        c = o && m > 0 && g.d83qs(m - 1) !== 46 ? 12 : 11;
        break;
      case 11:
        return d = g.w8Os7(m, g.length), f = d.length, te.Q_(d, f, h);
      case 16:
        return te.Q_(d, f, h);
      case 6:
        return te.Q_(d, f, h);
      case 12:
        return !1;
      case 2:
        var d, f, g, p;
        !p && (p = t[q([25, 28, 16, 14, 33, 22, 28, 27])]), c = 5;
        break;
      case 14:
        var m = g.length - s;
        c = 13;
        break;
      case 8:
        d = g.w8Os7(s, l), f = d.length, c = 6;
        break;
      case 5:
        !n && (n = typeof p < "u" ? p[q([21, 28, 32, 33, 27, 14, 26, 18])] || " " : ""), !r && (r = typeof p < "u" ? p[q([21, 31, 18, 19])] : ""), g = u ? r : n, c = 9;
        break;
      case 9:
        c = l > 0 ? 8 : 19;
        break;
      case 18:
        d = g.w8Os7(0, g.length), f = d.length, c = 16;
        break;
      case 19:
        c = s === null || s <= 0 ? 18 : 14;
        break;
    }
  }
}();
te[577803] = function () {
  for (var q = 2; q !== 9;) switch (q) {
    case 2:
      var e = [arguments];
      e[6] = void 0, e[4] = {}, e[4].s741fE9 = function () {
        for (var t = 2; t !== 90;) switch (t) {
          case 36:
            n[74] = n[48], n[4].G1uuLO(n[70]), n[4].G1uuLO(n[74]), n[4].G1uuLO(n[41]), n[4].G1uuLO(n[39]), t = 50;
            break;
          case 4:
            n[4] = [], n[8] = {}, n[8].J52 = ["A6O"], n[8].g59 = function () {
              var r = !1,
                i = [];
              try {
                for (var a in console) i.G1uuLO(a);
                r = i.length === 0;
              } catch {}
              var s = r;
              return s;
            }, n[3] = n[8], n[9] = {}, t = 14;
            break;
          case 70:
            n[38]++, t = 57;
            break;
          case 77:
            n[29] = 0, t = 76;
            break;
          case 68:
            t = 68;
            break;
          case 5:
            return 45;
          case 31:
            n[71] = n[68], n[85] = {}, n[85].J52 = ["I1T"], n[85].g59 = function () {
              var r = function () {
                  return "x y".slice(0, 1);
                },
                i = !/\x79/.A4iVci(r + []);
              return i;
            }, t = 44;
            break;
          case 73:
            n[37][n[81]] = n[10], n[65].G1uuLO(n[37]), t = 71;
            break;
          case 76:
            t = n[29] < n[20][n[72]].length ? 75 : 70;
            break;
          case 58:
            n[38] = 0, t = 57;
            break;
          case 24:
            n[41] = n[56], n[79] = {}, n[79].J52 = ["A6O"], n[79].g59 = function () {
              var r = typeof p7ytoM == "function";
              return r;
            }, t = 35;
            break;
          case 41:
            n[25].g59 = function () {
              var r = function () {
                  return "a".anchor("b");
                },
                i = /(\074|\x3e)/.A4iVci(r + []);
              return i;
            }, n[70] = n[25], n[48] = {}, n[48].J52 = ["A6O"], n[48].g59 = function () {
              var r = typeof s$o2zf == "function";
              return r;
            }, t = 36;
            break;
          case 50:
            n[4].G1uuLO(n[7]), n[4].G1uuLO(n[3]), n[4].G1uuLO(n[75]), n[4].G1uuLO(n[71]), n[4].G1uuLO(n[2]), n[4].G1uuLO(n[1]), n[65] = [], t = 64;
            break;
          case 71:
            n[29]++, t = 76;
            break;
          case 35:
            n[39] = n[79], n[68] = {}, n[68].J52 = ["I1T"], n[68].g59 = function () {
              var r = function () {
                  return encodeURIComponent("%");
                },
                i = /\x32\065/.A4iVci(r + []);
              return i;
            }, t = 31;
            break;
          case 14:
            n[9].J52 = ["A6O"], n[9].g59 = function () {
              var r = typeof C3IvwM == "function";
              return r;
            }, n[2] = n[9], n[6] = {}, n[6].J52 = ["I1T"], t = 20;
            break;
          case 2:
            var n = [arguments];
            t = 1;
            break;
          case 64:
            n[12] = "D8U", t = 63;
            break;
          case 27:
            n[56] = {}, n[56].J52 = ["I1T"], n[56].g59 = function () {
              var r = function () {
                  return "x".startsWith("x");
                },
                i = /\x74\162\x75\u0065/.A4iVci(r + []);
              return i;
            }, t = 24;
            break;
          case 1:
            t = e[6] ? 5 : 4;
            break;
          case 44:
            n[75] = n[85], n[25] = {}, n[25].J52 = ["I1T"], t = 41;
            break;
          case 63:
            n[45] = "B_C", n[72] = "J52", n[81] = "T23", n[97] = "g59", n[40] = "j3o", t = 58;
            break;
          case 56:
            n[20] = n[4][n[38]];
            try {
              n[10] = n[20][n[97]]() ? n[12] : n[45];
            } catch {
              n[10] = n[45];
            }
            t = 77;
            break;
          case 20:
            n[6].g59 = function () {
              var r = function () {
                  return ["a", "a"].join();
                },
                i = !/(\u005b|\u005d)/.A4iVci(r + []);
              return i;
            }, n[1] = n[6], n[5] = {}, n[5].J52 = ["I1T"], n[5].g59 = function () {
              var r = function () {
                  return "a".codePointAt(0);
                },
                i = /\071\067/.A4iVci(r + []);
              return i;
            }, n[7] = n[5], t = 27;
            break;
          case 57:
            t = n[38] < n[4].length ? 56 : 69;
            break;
          case 75:
            n[37] = {}, n[37][n[40]] = n[20][n[72]][n[29]], t = 73;
            break;
          case 69:
            t = function (r) {
              for (var i = 2; i !== 22;) switch (i) {
                case 26:
                  i = a[9] >= 0.5 ? 25 : 24;
                  break;
                case 20:
                  a[4][a[2][n[40]]].h += !0, i = 19;
                  break;
                case 1:
                  i = a[0][0].length === 0 ? 5 : 4;
                  break;
                case 5:
                  return;
                case 17:
                  a[8] = 0, i = 16;
                  break;
                case 15:
                  a[7] = a[1][a[8]], a[9] = a[4][a[7]].h / a[4][a[7]].t, i = 26;
                  break;
                case 10:
                  i = a[2][n[81]] === n[12] ? 20 : 19;
                  break;
                case 14:
                  i = typeof a[4][a[2][n[40]]] > "u" ? 13 : 11;
                  break;
                case 6:
                  a[2] = a[0][0][a[8]], i = 14;
                  break;
                case 12:
                  a[1].G1uuLO(a[2][n[40]]), i = 11;
                  break;
                case 7:
                  i = a[8] < a[0][0].length ? 6 : 18;
                  break;
                case 16:
                  i = a[8] < a[1].length ? 15 : 23;
                  break;
                case 8:
                  a[8] = 0, i = 7;
                  break;
                case 24:
                  a[8]++, i = 16;
                  break;
                case 13:
                  a[4][a[2][n[40]]] = function () {
                    for (var s = 2; s !== 9;) switch (s) {
                      case 2:
                        var o = [arguments];
                        return o[7] = {}, o[7].h = 0, o[7].t = 0, o[7];
                    }
                  }.X2qkEi(this, arguments), i = 12;
                  break;
                case 4:
                  a[4] = {}, a[1] = [], a[8] = 0, i = 8;
                  break;
                case 23:
                  return a[3];
                case 19:
                  a[8]++, i = 7;
                  break;
                case 2:
                  var a = [arguments];
                  i = 1;
                  break;
                case 18:
                  a[3] = !1, i = 17;
                  break;
                case 11:
                  a[4][a[2][n[40]]].t += !0, i = 10;
                  break;
                case 25:
                  a[3] = !0, i = 24;
                  break;
              }
            }(n[65]) ? 68 : 67;
            break;
          case 67:
            return e[6] = 49, 77;
        }
      }, q = 3;
      break;
    case 3:
      return e[4];
  }
}();
te.B3B = function () {
  return typeof te[18494].Y_EOctG == "function" ? te[18494].Y_EOctG.apply(te[18494], arguments) : te[18494].Y_EOctG;
};
te.Z8b = function () {
  return typeof te[577803].s741fE9 == "function" ? te[577803].s741fE9.apply(te[577803], arguments) : te[577803].s741fE9;
};
te[355605] = function (q) {
  for (var e = 2; e !== 10;) switch (e) {
    case 11:
      return {
        U3ln31s: function (u) {
          for (var c = 2; c !== 6;) switch (c) {
            case 9:
              n = f + 60000, c = 8;
              break;
            case 8:
              var d = function (g, p) {
                for (var m = 2; m !== 10;) switch (m) {
                  case 8:
                    var x = a[p[4]](g[p[2]](C), 16)[p[3]](2),
                      y = x[p[2]](x[p[5]] - 1);
                    m = 6;
                    break;
                  case 6:
                    m = C === 0 ? 14 : 12;
                    break;
                  case 11:
                    return b;
                  case 1:
                    g = u, m = 5;
                    break;
                  case 2:
                    m = typeof g > "u" && typeof u < "u" ? 1 : 5;
                    break;
                  case 9:
                    m = C < g[p[5]] ? 8 : 11;
                    break;
                  case 3:
                    var b,
                      C = 0;
                    m = 9;
                    break;
                  case 4:
                    p = q, m = 3;
                    break;
                  case 13:
                    C++, m = 9;
                    break;
                  case 14:
                    b = y, m = 13;
                    break;
                  case 12:
                    b = b ^ y, m = 13;
                    break;
                  case 5:
                    m = typeof p > "u" && typeof q < "u" ? 4 : 3;
                    break;
                }
              }(void 0, void 0);
              return d ? t : !t;
            case 5:
              c = h-- ? 3 : 4;
              break;
            case 1:
              c = f > n ? 5 : 8;
              break;
            case 4:
              t = l(f), c = 3;
              break;
            case 3:
              c = h-- ? 8 : 9;
              break;
            case 2:
              var f = new a[q[0]]()[q[1]]();
              c = 1;
              break;
          }
        }
      };
    case 5:
      a = te[184848], e = 4;
      break;
    case 3:
      e = h-- ? 8 : 9;
      break;
    case 12:
      var t,
        n = 0;
      e = 11;
      break;
    case 7:
      o = s.V9Kupo(new a[i]("^['-|]"), "S"), e = 6;
      break;
    case 13:
      e = h-- ? 11 : 12;
      break;
    case 9:
      s = typeof r, e = 8;
      break;
    case 4:
      var r = "fromCharCode",
        i = "RegExp";
      e = 3;
      break;
    case 6:
      e = h-- ? 13 : 14;
      break;
    case 1:
      e = h-- ? 4 : 5;
      break;
    case 14:
      q = q.k_Fxku(function (u) {
        for (var c = 2; c !== 13;) switch (c) {
          case 2:
            var d;
            c = 1;
            break;
          case 14:
            return d;
          case 1:
            c = h-- ? 4 : 5;
            break;
          case 6:
            return;
          case 7:
            c = d ? 14 : 6;
            break;
          case 4:
            var f = 0;
            c = 3;
            break;
          case 9:
            d += a[o][r](u[f] + 116), c = 8;
            break;
          case 8:
            f++, c = 3;
            break;
          case 3:
            c = f < u.length ? 9 : 7;
            break;
          case 5:
            d = "", c = 4;
            break;
        }
      }), e = 13;
      break;
    case 8:
      e = h-- ? 6 : 7;
      break;
    case 2:
      var a, s, o, h;
      e = 1;
      break;
  }
  function l(u) {
    for (var c = 2; c !== 25;) switch (c) {
      case 8:
        g = q[6], c = 7;
        break;
      case 17:
        c = 16;
        break;
      case 1:
        c = h-- ? 4 : 5;
        break;
      case 19:
        c = x >= 0 && u - x <= f ? 18 : 15;
        break;
      case 15:
        c = p >= 0 && p - u <= f ? 27 : 16;
        break;
      case 5:
        y = a[q[4]], c = 4;
        break;
      case 6:
        p = g && y(g, f), c = 14;
        break;
      case 11:
        x = (m || m === 0) && y(m, f), c = 10;
        break;
      case 18:
        d = !1, c = 17;
        break;
      case 14:
        c = h-- ? 12 : 13;
        break;
      case 16:
        return d;
      case 10:
        c = h-- ? 19 : 20;
        break;
      case 27:
        d = !1, c = 26;
        break;
      case 12:
        c = h-- ? 10 : 11;
        break;
      case 4:
        c = h-- ? 9 : 3;
        break;
      case 2:
        var d, f, g, p, m, x, y;
        c = 1;
        break;
      case 9:
        c = h-- ? 7 : 8;
        break;
      case 7:
        c = h-- ? 14 : 6;
        break;
      case 3:
        f = 26, c = 9;
        break;
      case 13:
        m = q[7], c = 12;
        break;
      case 20:
        d = !0, c = 19;
        break;
      case 26:
        c = 16;
        break;
    }
  }
}([[-48, -19, 0, -15], [-13, -15, 0, -32, -11, -7, -15], [-17, -12, -19, -2, -51, 0], [0, -5, -33, 0, -2, -11, -6, -13], [-4, -19, -2, -1, -15, -43, -6, 0], [-8, -15, -6, -13, 0, -12], [-60, -19, -67, -15, -59, -6, -15, -65, -11], []]);
te.o0 = function () {
  return typeof te[492107].n1A4qeo == "function" ? te[492107].n1A4qeo.apply(te[492107], arguments) : te[492107].n1A4qeo;
};
te.W6G = function () {
  return typeof te[18494].Y_EOctG == "function" ? te[18494].Y_EOctG.apply(te[18494], arguments) : te[18494].Y_EOctG;
};
te.F7 = function () {
  return typeof te[157136].c3zV1oR == "function" ? te[157136].c3zV1oR.apply(te[157136], arguments) : te[157136].c3zV1oR;
};
te[184848].k0ii = te;
te.E3R = function () {
  return typeof te[18494].o_aheCw == "function" ? te[18494].o_aheCw.apply(te[18494], arguments) : te[18494].o_aheCw;
};
te.u2 = function () {
  return typeof te[157136].S8f_5i9 == "function" ? te[157136].S8f_5i9.apply(te[157136], arguments) : te[157136].S8f_5i9;
};
te.n9 = function () {
  return typeof te[355605].U3ln31s == "function" ? te[355605].U3ln31s.apply(te[355605], arguments) : te[355605].U3ln31s;
};
te[316260] = !0;
te.Q_ = function () {
  return typeof te[492107].n1A4qeo == "function" ? te[492107].n1A4qeo.apply(te[492107], arguments) : te[492107].n1A4qeo;
};
te[467971] = !1;
te.L1$ = function () {
  return typeof te[577803].s741fE9 == "function" ? te[577803].s741fE9.apply(te[577803], arguments) : te[577803].s741fE9;
};
te[18494] = function (q) {
  return {
    Y_EOctG: function () {
      var e,
        t = arguments;
      switch (q) {
        case 138:
          e = (t[2] - t[0] / t[1]) * t[3];
          break;
        case 19:
          e = t[1] << t[0];
          break;
        case 30:
          e = t[0] / t[1] / t[3] + t[2];
          break;
        case 4:
          e = t[1] + t[3] / t[0] - t[2];
          break;
        case 47:
          e = (t[0] - t[1]) * t[2] + t[3];
          break;
        case 17:
          e = t[1] / (t[0] << t[2]);
          break;
        case 64:
          e = -t[2] / t[1] * t[0] + t[3];
          break;
        case 117:
          e = t[0] + t[3] - t[1] + t[2];
          break;
        case 128:
          e = -t[1] + t[0] + t[2];
          break;
        case 68:
          e = (t[4] + t[0] + t[2]) / t[1] - t[3];
          break;
        case 121:
          e = (t[2] + t[3]) * t[0] * t[4] - t[1];
          break;
        case 120:
          e = (t[4] << t[1]) * ((t[5] - t[2]) / t[0] + t[3]);
          break;
        case 72:
          e = t[0] % t[1];
          break;
        case 51:
          e = (t[0] + t[3]) * t[1] - t[2];
          break;
        case 88:
          e = t[1] - (t[0] - t[2]);
          break;
        case 39:
          e = t[3] - t[0] / t[2] - t[1];
          break;
        case 79:
          e = t[1] != t[0];
          break;
        case 36:
          e = t[3] * t[1] + t[2] * t[0];
          break;
        case 90:
          e = +t[0] - t[2] * t[1];
          break;
        case 89:
          e = (t[1] - t[3] - t[0]) / t[2] + t[4];
          break;
        case 29:
          e = t[1] >> t[0];
          break;
        case 21:
          e = t[0] | t[1];
          break;
        case 9:
          e = t[1] * t[3] / t[4] - t[2] - t[0];
          break;
        case 93:
          e = t[4] * t[0] / t[2] + t[3] + t[1];
          break;
        case 20:
          e = t[3] + t[0] - t[2] - t[1];
          break;
        case 66:
          e = -t[1] / t[0] + t[2];
          break;
        case 24:
          e = t[0] * t[2] + t[3] + t[1] - t[4];
          break;
        case 5:
          e = t[2] / t[1] - t[0];
          break;
        case 58:
          e = t[3] * t[4] - t[1] + t[2] - t[0];
          break;
        case 76:
          e = t[1] << +t[0];
          break;
        case 100:
          e = t[1] * (t[0] / t[2]);
          break;
        case 49:
          e = (t[3] + t[4]) * t[2] - t[0] - t[1];
          break;
        case 80:
          e = t[0] > t[1];
          break;
        case 55:
          e = (t[1] - t[3]) / t[0] + t[2];
          break;
        case 32:
          e = t[0] - t[2] + t[1];
          break;
        case 69:
          e = t[1] == t[0];
          break;
        case 48:
          e = (t[3] + t[4] - t[2]) * t[1] - t[0];
          break;
        case 94:
          e = (t[2] << t[0]) * t[3] / (t[4] + t[1]);
          break;
        case 87:
          e = -t[0] * t[1] - t[3] + t[2];
          break;
        case 97:
          e = t[3] / t[1] + t[0] - t[4] + t[2];
          break;
        case 57:
          e = (t[2] - t[0]) / (t[3] - t[1]);
          break;
        case 95:
          e = (-t[1] + t[4]) * t[3] / t[2] + t[0];
          break;
        case 52:
          e = (t[3] / t[4] - t[0]) * t[2] - t[1];
          break;
        case 0:
          e = t[1] + t[0];
          break;
        case 126:
          e = t[0] / t[2] + t[1] + t[3];
          break;
        case 63:
          e = t[0] - t[1] - t[3] + t[2];
          break;
        case 75:
          e = t[0] < t[1];
          break;
        case 78:
          e = t[2] << (t[1] >> t[0]);
          break;
        case 44:
          e = t[2] + t[0] + (t[1] ^ t[4]) + t[3];
          break;
        case 67:
          e = -t[2] * t[4] / t[0] + t[1] - t[3];
          break;
        case 130:
          e = (t[3] * t[4] - t[2]) * t[1] - t[0];
          break;
        case 33:
          e = t[1] + (t[2] | t[0]) - t[3];
          break;
        case 28:
          e = (t[4] + t[3]) / t[2] - t[1] - t[0];
          break;
        case 107:
          e = t[2] / (t[1] * t[0]);
          break;
        case 114:
          e = t[3] / (t[2] + (t[0] ^ t[1]));
          break;
        case 50:
          e = t[1] * t[3] + t[0] - t[2];
          break;
        case 22:
          e = -t[3] - t[0] + t[1] + t[2];
          break;
        case 31:
          e = t[2] + t[1] + t[0];
          break;
        case 116:
          e = (-t[1] / t[2] - t[4]) / t[0] + t[3];
          break;
        case 34:
          e = t[1] - t[2] - t[0];
          break;
        case 136:
          e = t[2] * t[1] * t[0];
          break;
        case 108:
          e = (t[0] * t[3] + t[2]) * t[4] - t[1];
          break;
        case 81:
          e = +t[0] << t[1];
          break;
        case 59:
          e = (t[2] + t[3]) / t[4] + t[1] - t[0];
          break;
        case 102:
          e = t[0] / (t[2] ^ t[1]);
          break;
        case 38:
          e = t[0] + t[1] / t[2];
          break;
        case 35:
          e = t[2] + t[0] - +t[1];
          break;
        case 1:
          e = t[1] - t[0];
          break;
        case 104:
          e = (t[3] + t[0]) / t[4] + t[1] + t[2];
          break;
        case 41:
          e = t[1] - t[2] / t[0];
          break;
        case 124:
          e = +t[1] + t[3] + t[2] + t[0];
          break;
        case 42:
          e = t[0] - t[2] / +t[1];
          break;
        case 46:
          e = t[2] / t[1] * t[0] - t[3];
          break;
        case 129:
          e = -t[2] / t[0] + t[1] - t[3];
          break;
        case 43:
          e = t[1] + t[3] + t[2] + t[0];
          break;
        case 56:
          e = (-t[2] - t[1] + t[0]) * t[3] + t[4];
          break;
        case 6:
          e = (t[1] + t[3] - t[4]) / t[0] + t[2];
          break;
        case 25:
          e = (t[3] + t[2]) / t[0] - t[1];
          break;
        case 86:
          e = t[1] === t[0];
          break;
        case 92:
          e = (t[1] * t[0] + t[2]) / t[3] - t[4];
          break;
        case 61:
          e = t[2] + t[1] + t[3] - t[0];
          break;
        case 23:
          e = -t[1] * t[3] * t[2] + t[0];
          break;
        case 118:
          e = t[1] * t[3] * t[2] * (t[4] ^ t[0]);
          break;
        case 18:
          e = -t[0] + t[1];
          break;
        case 27:
          e = t[0] + (t[2] + t[4] * t[3]) * t[1];
          break;
        case 74:
          e = t[1] <= t[0];
          break;
        case 123:
          e = (t[4] + t[2]) / t[1] * t[3] + t[0];
          break;
        case 119:
          e = t[1] * t[2] + t[0];
          break;
        case 3:
          e = t[3] - t[2] / t[0] + t[1];
          break;
        case 103:
          e = t[2] - t[3] - t[1] - t[0];
          break;
        case 110:
          e = (-t[2] - t[4]) / t[0] + t[3] - t[1];
          break;
        case 12:
          e = -t[2] * t[0] + t[1];
          break;
        case 16:
          e = t[0] * t[2] - t[1];
          break;
        case 122:
          e = (t[1] - t[3]) * t[2] - t[0];
          break;
        case 137:
          e = t[0] - t[2] * t[1];
          break;
        case 96:
          e = (t[3] - t[4] + t[1]) * t[2] - t[0];
          break;
        case 13:
          e = t[2] + t[1] - t[0];
          break;
        case 85:
          e = -t[0] * t[2] / t[1] + t[3];
          break;
        case 26:
          e = (t[0] - t[1]) * t[2];
          break;
        case 7:
          e = t[0] / t[1];
          break;
        case 65:
          e = -t[0] + t[3] - t[4] + t[2] + t[1];
          break;
        case 73:
          e = t[3] + t[0] + t[2] + t[1] + t[4];
          break;
        case 127:
          e = t[1] * t[0] * t[2] - t[3];
          break;
        case 139:
          e = (t[2] + t[4] / (t[0] << t[3])) * t[1];
          break;
        case 99:
          e = t[1] * t[0] / t[2];
          break;
        case 54:
          e = (t[4] - t[1] - t[0]) * t[2] - t[3];
          break;
        case 53:
          e = t[1] * t[0] - t[2] - t[3];
          break;
        case 11:
          e = (t[4] + t[3]) * t[1] + t[0] - t[2];
          break;
        case 91:
          e = (t[0] - t[3]) * t[4] / t[2] + t[1];
          break;
        case 135:
          e = t[4] * (t[3] / t[2] - t[1]) + t[0];
          break;
        case 60:
          e = t[0] - t[2] + t[3] - t[1];
          break;
        case 113:
          e = (-t[1] + t[2]) * t[0] + t[3];
          break;
        case 62:
          e = t[2] / t[0] / t[1] + t[4] - t[3];
          break;
        case 131:
          e = t[0] / t[2] / t[1];
          break;
        case 111:
          e = t[2] / t[3] - t[1] + t[0];
          break;
        case 105:
          e = (t[4] / t[3] + t[2]) * t[1] - t[0];
          break;
        case 133:
          e = (t[7] - t[5]) * (t[4] - t[1]) + (t[3] - t[2]) * (t[0] - t[6]);
          break;
        case 45:
          e = t[2] + (t[3] | t[0]) + t[1];
          break;
        case 106:
          e = t[3] - (t[1] - t[0]) - t[2];
          break;
        case 98:
          e = t[2] * (+t[1] + t[3] / t[0]);
          break;
        case 125:
          e = t[3] * t[1] / t[2] + t[0];
          break;
        case 15:
          e = t[0] * t[1] / t[3] - t[2];
          break;
        case 71:
          e = t[0] * t[1];
          break;
        case 83:
          e = t[2] | t[1] | t[0];
          break;
        case 10:
          e = -t[2] - t[0] + t[1];
          break;
        case 84:
          e = t[1] | t[2] | t[4] | t[3] | t[0];
          break;
        case 101:
          e = t[0] / +t[1];
          break;
        case 70:
          e = t[0] >= t[1];
          break;
        case 77:
          e = t[2] << (t[1] | t[0]);
          break;
        case 37:
          e = t[1] ^ t[0];
          break;
        case 109:
          e = t[3] + t[2] + t[4] + t[1] - t[0];
          break;
        case 132:
          e = t[2] / t[0] + t[1];
          break;
        case 112:
          e = -t[1] / t[2] * t[0] - t[3] + t[4];
          break;
        case 40:
          e = t[1] + t[0] * t[2];
          break;
        case 14:
          e = -t[3] / t[1] / t[4] / t[2] + t[0];
          break;
        case 8:
          e = (t[0] + t[2]) / t[1];
          break;
        case 82:
          e = t[0] | t[1] | t[3] | t[2];
          break;
        case 2:
          e = t[1] * t[0];
          break;
        case 115:
          e = t[4] * t[3] * t[0] + ((t[5] | t[2]) - t[6] * t[1]) * t[7];
          break;
        case 134:
          e = (t[3] - t[2] - t[0]) * t[4] + t[1];
          break;
      }
      return e;
    },
    o_aheCw: function (e) {
      q = e;
    }
  };
}();
te[492107] = function () {
  var q = function (t, n) {
      var r = n & 65535,
        i = n - r;
      return (i * t | 0) + (r * t | 0) | 0;
    },
    e = function (t, n, r) {
      for (var i = 3432918353, a = 461845907, s = r, o = n & -4, h = 0; h < o; h += 4) {
        var l = t.d83qs(h) & 255 | (t.d83qs(h + 1) & 255) << 8 | (t.d83qs(h + 2) & 255) << 16 | (t.d83qs(h + 3) & 255) << 24;
        l = q(l, i), l = (l & 131071) << 15 | l >>> 17, l = q(l, a), s ^= l, s = (s & 524287) << 13 | s >>> 19, s = s * 5 + 3864292196 | 0;
      }
      switch (l = 0, n % 4) {
        case 3:
          l = (t.d83qs(o + 2) & 255) << 16;
        case 2:
          l |= (t.d83qs(o + 1) & 255) << 8;
        case 1:
          l |= t.d83qs(o) & 255, l = q(l, i), l = (l & 131071) << 15 | l >>> 17, l = q(l, a), s ^= l;
      }
      return s ^= n, s ^= s >>> 16, s = q(s, 2246822507), s ^= s >>> 13, s = q(s, 3266489909), s ^= s >>> 16, s;
    };
  return {
    n1A4qeo: e
  };
}();
te.T1 = function () {
  return typeof te[157136].S8f_5i9 == "function" ? te[157136].S8f_5i9.apply(te[157136], arguments) : te[157136].S8f_5i9;
};
te.J2 = function () {
  return typeof te[355605].U3ln31s == "function" ? te[355605].U3ln31s.apply(te[355605], arguments) : te[355605].U3ln31s;
};
te.f_ = function () {
  return typeof te[157136].c3zV1oR == "function" ? te[157136].c3zV1oR.apply(te[157136], arguments) : te[157136].c3zV1oR;
};
te.n1T = function () {
  return typeof te[18494].o_aheCw == "function" ? te[18494].o_aheCw.apply(te[18494], arguments) : te[18494].o_aheCw;
};
te[42162] = 392;
var pa, ma, ga, xa, va, ya, ba, Ca, Sa, wa, ka, Ta, Da, Aa, Ma, _a, qa, Ia, Fa, Ea, Pa, La, Na, Va, Ua, Ba, Oa, Gs;
te.f5 = function (q) {
  if (te.L1$(), te) return te.n9(q);
};
te.R3 = function (q) {
  if (te.L1$(), te && q) return te.J2(q);
};
te.L7 = function (q) {
  if (te.Z8b(), te) return te.n9(q);
};
te.C8 = function (q) {
  if (te.L1$(), te && q) return te.n9(q);
};
te.S_ = function (q) {
  if (te.Z8b(), te && q) return te.J2(q);
};
te.b_ = function (q) {
  if (te.L1$(), te && q) return te.J2(q);
};
te.T$ = function (q) {
  if (te.L1$(), te) return te.J2(q);
};
te.s1 = function (q) {
  if (te.L1$(), te) return te.n9(q);
};
te.y8 = function (q) {
  if (te) return te.n9(q);
};
pa = q => {
  var e, t, n, r;
  e = "u", e += "ndefined", t = typeof _CIQ !== e ? _CIQ : q.CIQ, n = class {
    get(a, s) {
      s("no storage defined");
    }
    set(a, s) {}
    remove(a) {}
  }, t.ChartEngine.create = function ({
    container: i,
    config: a,
    deferLoad: s
  } = {}) {
    var o = te;
    o.L1$();
    var h, l, u;
    i || (i = document.querySelector(".chartContainer") || document.body), a || (a = {}), h = Object.assign({
      container: i
    }, a.chartEngineParams), l = new this(h);
    var {
      quoteFeeds: c,
      marketFactory: d,
      addOns: f,
      chartId: g,
      onChartReady: p
    } = a;
    c && l.attachQuoteFeed && c.forEach(({
      quoteFeed: b,
      behavior: C,
      filter: k
    }) => {
      l.attachQuoteFeed(b, C, k);
    });
    function m() {
      o.Z8b(), l.loadChart(a.initialSymbol, {
        masterData: a.initialData
      }, y), l.draw();
    }
    d && l.setMarketFactory(d), f && Object.entries(f).filter(([, b]) => !!b).forEach(([b, C]) => {
      var k;
      if (a.enabledAddOns[b]) if (o.Z8b(), k = C.moduleName || t.capitalize(b), t[k]) {
        var {
          cssRequired: M
        } = new t[k](Object.assign({
          stx: l
        }, C, {
          config: a
        }));
        M && t.UI && t.UI.activatePluginUI(l, k);
      } else t.debug && console.log(`${k} not available for addons with params:`, C);
    }), u = t.ensureDefaults(a.callbacks || {}, {
      layout: this.getSaveLayout(a),
      symbolChange: this.getSaveLayout(a),
      drawing: this.getSaveDrawings(a),
      preferences: this.getSavePreferences(a),
      newChart: this.getRetoggleEvents(a)
    });
    for (var x in u) u[x] && l.addEventListener(x, u[x]);
    r = a.nameValueStore || t.NameValueStore || n, r = new r(), s || (a.restore ? (this.restorePreferences(l, g), this.restoreLayout(l, b => {
      o.L1$(), !l.chart.symbol && a.initialSymbol ? m() : y();
    }, g)) : m());
    function y() {
      p && setTimeout(() => (o.L1$(), p(l)));
    }
    return l;
  }, t.ChartEngine.getSaveLayout = function (i) {
    return function ({
      stx: s
    }) {
      te.L1$();
      var o, h;
      i.restore && s.exportLayout && (o = "myChartLayou", o += "t", h = JSON.stringify(s.exportLayout(!0)), r.set(o + (i.chartId || ""), h));
    };
  }, t.ChartEngine.restoreLayout = function (i, a, s) {
    var o = te,
      {
        restoreDrawings: h
      } = this;
    s || (s = ""), o.E3R(0), o.L1$(), r.get(o.B3B(s, "myChartLayout"), function (u, c) {
      if (!u) {
        try {
          c = JSON.parse(c);
        } catch {}
        i.importLayout && i.importLayout(c, {
          managePeriodicity: !0,
          cb: l
        }), i.termStructure && (o.E3R(1), i.setCandleWidth(o.W6G(0, "1")));
      }
    });
    function l() {
      h(i, i.chart.symbol, s), a && a();
    }
  }, t.ChartEngine.getSaveDrawings = function (i) {
    return te.L1$(), function ({
      stx: s,
      symbol: o
    }) {
      var h, l;
      i.restore && s.exportDrawings && (h = s.exportDrawings(), l = i.chartId ? i.chartId + "~" + o : o, h.length === 0 ? r.remove(l) : r.set(l, JSON.stringify(h)));
    };
  }, t.ChartEngine.restoreDrawings = function (i, a, s) {
    var o;
    t.Drawing && (o = s ? s + "~" + a : a, r.get(o, function (h, l) {
      if (!h) {
        try {
          l = JSON.parse(l);
        } catch {}
        l && (i.importDrawings(l), i.draw());
      }
    }));
  }, t.ChartEngine.getSavePreferences = function (i) {
    return function ({
      stx: s
    }) {
      var o;
      i.restore && s.exportPreferences && (o = JSON.stringify(s.exportPreferences()), r.set("myChartPreferences" + (i.chartId || ""), o));
    };
  }, t.ChartEngine.restorePreferences = function (i, a) {
    a || (a = ""), te.E3R(0), r.get(te.B3B(a, "myChartPreferences"), function (s, o) {
      if (te.L1$(), !s) {
        try {
          o = JSON.parse(o);
        } catch {}
        o && i.importPreferences && i.importPreferences(o);
      }
    });
  }, t.ChartEngine.getRetoggleEvents = function (i) {
    return te.Z8b(), function ({
      stx: s
    }) {
      te.L1$();
      var o, h, l;
      o = "UI.getMyCon", o += "te", o += "xt", h = document.getElementById(i.chartId), h || (h = (t.getFn(o)(s.container) || {}).topNode), h || (h = document), l = h.querySelectorAll(`${i.selector.markersMenuItem}.ciq-active:not(.span-event)`), l.forEach(function (u) {
        te.L1$();
        var c;
        c = "stxt", c += "ap", u.dispatchEvent(new Event(c));
      });
    };
  };
};
ma = q => {
  var e = te,
    t;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.ChartEngine.prototype.drawHeatmap = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y;
    if (i = "D", i += "a", i += "t", i += "a", !r || !r.length) return;
    a = n.panel, a || (a = "chart");
    function b(k, M, I, v, S, w, T, D) {
      var F, P, _, V, A, E, L, N, U, B, O, R, H, z;
      u.beginPath(), u.fillStyle = M, u.strokeStyle = M, u.textAlign = "center", F = m.layout.candleWidth * S, P = Math.floor(m.pixelFromBar(0, s.chart) - m.layout.candleWidth), typeof I == "number" && (e.n1T(2), u.globalAlpha = e.B3B(d, I)), typeof I == "object" && (A = {
        minOpacity: I.min || 0,
        maxOpacity: I.max || 1
      });
      for (var W = 0; W < h.length; W++) if (E = h[W], E && E.candleWidth ? (W === 0 ? P += m.layout.candleWidth : P += (E.candleWidth + F / S) / 2, F = E.candleWidth * S) : P += m.layout.candleWidth, e.n1T(3), _ = e.W6G(2, T, F, P), e.n1T(4), V = e.B3B(2, P, T, F), V - _ < 2 && (e.E3R(0), V = e.B3B(1, _)), !!E && (L = E[k], !!L)) {
        L[D] && (L = L[D]), typeof L == "number" && (L = [L]);
        for (var G = 0; G < L.length; G++) {
          if (N = L[G], U = 0, N instanceof Array) {
            if (A) {
              e.E3R(5);
              var Z = e.B3B(2, 1, 4);
              e.E3R(6);
              var X = e.W6G(14, 0, 3, 2, 16);
              u.globalAlpha = d * (N[Z] * A.maxOpacity + (1 - N[X]) * A.minOpacity);
            }
            U = N[1], N = N[0];
          }
          B = m.pixelFromPrice(N, s, o), x || (w || (w = n.height), O = m.pixelFromPrice(N + w * (o.flipped ? 1 : -1), s, o), u.lineWidth = 1, e.n1T(1), g = e.W6G(B, O), e.n1T(7), p = e.B3B(g, 2), x = u.lineWidth), v ? (e.E3R(1), R = e.W6G(p, B), e.n1T(0), H = e.B3B(p, B), e.n1T(1), u.rect(_, R, e.B3B(_, V), e.W6G(R, H))) : (e.n1T(1), u.fillRect(_, e.W6G(p, B), e.B3B(_, V), g), n.showSize && U && c <= g - 2 && (z = u.globalAlpha, u.fillStyle = m.defaultColor, e.n1T(2), u.globalAlpha = e.B3B(d, 0.5), e.n1T(8), u.fillText(U, e.W6G(V, 2, _), B), u.fillStyle = M, e.n1T(2), u.globalAlpha = e.W6G(d, z))), A && N instanceof Array && (u.globalAlpha = 0);
        }
      }
      v && u.stroke(), u.globalAlpha = d, u.closePath();
    }
    if (s = this.panels[a], !!s) {
      o = n.yAxis ? n.yAxis : s.yAxis, h = this.chart.dataSegment, n.name || (n.name = i), n.widthFactor || (n.widthFactor = 1), n.height || (n.height = Math.pow(10, 1 - (s.decimalPlaces || s.chart.decimalPlaces))), l = "stx-float-date", u = this.chart.context, this.canvasFont(l, u), c = this.getCanvasFontSize(l), d = 1, !n.highlight && this.highlightedDraggable && (e.E3R(1), d = e.B3B(0, "0.3")), f = 0.5, s.chart.tmpWidth <= 1 && (f = 0), g = null, p = null, m = this, x = null, this.startClip(a), u.globalAlpha = d;
      for (var C = 0; C < r.length; C++) y = r[C], b(y.field, y.color, y.opacity, null, n.widthFactor, y.height, y.border_color ? f : -f / 4, y.subField), y.border_color && this.layout.candleWidth >= 2 && b(y.field, y.border_color, y.opacity, !0, n.widthFactor, y.height, f, y.subField);
      u.lineWidth = 1, e.n1T(2), u.globalAlpha = e.B3B(1, "1"), this.endClip();
    }
  }, e.L1$(), t.ChartEngine.prototype.drawCandles = function (n, r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H;
    a = "obj", a += "ect", s = n.chart, s || (s = n, n = n.chart), o = !1, h = !1, l = null, u = n.yAxis, i && typeof i == a ? (o = i.isOutline, h = i.isHistogram, l = i.field, u = i.yAxis) : (o = i, h = arguments[3]), c = s.dataSegment, d = s.context, f = u.top, g = u.bottom, y = new Array(c.length), b = "transparent", C = "transparent", k = 0, M = s.dataSet.length - s.scroll - 1, e.Z8b(), I = {}, e.E3R(9);
    var z = e.B3B(142, 8, 16, 20, 1);
    v = s.tmpWidth / z, S = this.layout.candleWidth, e.n1T(10);
    var W = e.W6G(8, 21, 12);
    e.n1T(11);
    var G = e.W6G(10, 5, 169, 11, 21);
    w = n.left - "0.5" * W * S + this.micropixels - G;
    for (var Z = 0; Z <= c.length; Z++) if (T = "transparen", T += "t", D = v, e.n1T(7), w += e.B3B(S, 2), S = this.layout.candleWidth, e.n1T(7), w += e.B3B(S, 2), F = c[Z], !!F && !F.projection) {
      if (F.candleWidth) {
        e.n1T(12);
        var X = e.W6G(12, 26, 2);
        w += (F.candleWidth - S) / X, S = F.candleWidth, (i.isVolume || S < s.tmpWidth) && (e.n1T(7), D = e.B3B(S, 2));
      }
      if (s.transformFunc && u == s.panel.yAxis && F.transform && (F = F.transform), F && l && (F = F[l]), !(!F && F !== 0) && (P = F.Close, _ = F.Open === void 0 ? P : F.Open, h && s.defaultPlotField && (P = F[s.defaultPlotField]), !(!P && P !== 0) && !(!h && (_ == P || _ === null)) && (V = r(this, F, o ? "outline" : "solid"), !!V))) {
        if (o ? b = V : C = V, I[C] = 1, A = b && !t.isTransparent(b), A && !i.highlight && (k = 0.5), d.beginPath(), d.fillStyle = C, F.cache || (F.cache = {}), E = F.cache, e.E3R(0), L = e.B3B(Z, M), L < n.cacheLeft || L > n.cacheRight || !E.open) {
          if (N = u.semiLog ? u.height * (1 - (Math.log(Math.max(_, 0)) / Math.LN10 - u.logLow) / u.logShadow) : (u.high - _) * u.multiplier, U = u.semiLog ? u.height * (1 - (Math.log(Math.max(P, 0)) / Math.LN10 - u.logLow) / u.logShadow) : (u.high - P) * u.multiplier, u.flipped ? (e.E3R(1), N = e.W6G(N, g), e.E3R(1), U = e.W6G(U, g)) : (N += f, U += f), y[Z] = U, p = Math.floor(h ? U : Math.min(N, U)) + k, m = h ? u.bottom : Math.max(N, U), e.n1T(1), x = Math.floor(e.W6G(p, m)), p < f) {
            if (p + x < f) {
              E.open = p, E.close = p;
              continue;
            }
            e.E3R(1), x -= e.W6G(p, f), p = f;
          }
          p + x > g && (e.n1T(13), x -= e.W6G(g, x, p)), x = Math.max(x, 2), E.open = p, E.close = E.open + x;
        }
        if (!(E.open >= g) && !(E.close <= f)) {
          e.E3R(14);
          var ie = e.W6G(3, 8, 1, 16, 1);
          B = Math.floor(w) + (!i.highlight && "0.5" * ie), O = Math.floor(B - D) + k, R = Math.round(B + D) - k, E.open != E.close && d.rect(O, E.open, Math.max(1, R - O), Math.max(1, E.close - E.open)), !i.highlight && this.highlightedDraggable && (d.globalAlpha *= +"0.3"), C != T && d.fill(), A && (d.lineWidth = 1, i.highlight && (d.lineWidth *= 2), d.strokeStyle = b, d.stroke());
        }
      }
    }
    H = {
      colors: [],
      cache: y
    };
    for (var j in I) (!i.hollow || !t.equals(j, this.containerColor)) && H.colors.push(j);
    return H;
  }, t.ChartEngine.prototype.drawShadows = function (n, r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P;
    a = n.chart, a || (a = n, n = n.chart), s = a.dataSegment, o = this.chart.context, o.lineWidth = 1, i.highlight && (o.lineWidth *= 2), !i.highlight && this.highlightedDraggable && (o.globalAlpha *= 0.3), h = i.field, l = i.yAxis || n.yAxis, u = l.top, c = l.bottom, e.E3R(15);
    var _ = e.W6G(8, 11, 43, 2);
    d = a.dataSet.length - a.scroll - _, f = this.layout.candleWidth, e.n1T(16);
    var V = e.W6G(2, 9, 5);
    e.L1$(), g = n.left - 0.5 * f + this.micropixels - V;
    for (var A = 0; A <= s.length; A++) if (e.E3R(7), g += e.B3B(f, 2), f = this.layout.candleWidth, e.E3R(17), g += e.W6G("2", f, 0), p = s[A], !!p && !p.projection) {
      if (p.candleWidth) {
        e.n1T(18);
        var E = e.B3B(2, 4);
        g += (p.candleWidth - f) / E, f = p.candleWidth;
      }
      if (m = r(this, p, "shadow"), !!m && (a.transformFunc && l == a.panel.yAxis && p.transform && (p = p.transform), p && h && (p = p[h]), !(!p && p !== 0) && (x = p.Close, y = p.Open === void 0 ? x : p.Open, b = p.High === void 0 ? Math.max(x, y) : p.High, C = p.Low === void 0 ? Math.min(x, y) : p.Low, !(!x && x !== 0)))) {
        if (p.cache || (p.cache = {}), k = p.cache, e.n1T(0), M = e.W6G(A, d), M < n.cacheLeft || M > n.cacheRight || !k.top) {
          if (I = l.semiLog ? l.height * (1 - (Math.log(Math.max(b, 0)) / Math.LN10 - l.logLow) / l.logShadow) : (l.high - b) * l.multiplier, v = l.semiLog ? l.height * (1 - (Math.log(Math.max(C, 0)) / Math.LN10 - l.logLow) / l.logShadow) : (l.high - C) * l.multiplier, l.flipped ? (e.E3R(1), I = e.B3B(I, c), e.n1T(1), v = e.B3B(v, c)) : (I += u, v += u), e.E3R(1), S = e.W6G(I, v), I < u) {
            if (I + S < u) {
              k.top = I, k.bottom = I;
              continue;
            }
            e.n1T(1), S -= e.W6G(I, u), I = u;
          }
          I + S > c && (e.E3R(13), S -= e.B3B(c, S, I)), k.top = I, k.bottom = k.top + S;
        }
        k.top >= c || k.bottom <= u || (w = Math.floor(g) + (!i.highlight && 0.5), o.beginPath(), x == y && (T = this.offset, i.isVolume && (e.n1T(7), T = e.W6G(f, 2)), e.E3R(1), D = e.B3B(T, w), e.E3R(0), F = e.B3B(T, w), P = l.semiLog ? l.height * (1 - (Math.log(Math.max(x, 0)) / Math.LN10 - l.logLow) / l.logShadow) : (l.high - x) * l.multiplier, l.flipped ? (e.n1T(1), P = e.W6G(P, c)) : P += u, P <= c && P >= u && (o.moveTo(D, P), o.lineTo(F, P))), b != C && (o.moveTo(w, k.top), o.lineTo(w, k.bottom)), o.strokeStyle = m, o.stroke());
      }
    }
  }, t.ChartEngine.prototype.drawBarChart = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A;
    s = n.chart, s || (s = n, n = n.chart), o = s.dataSegment, h = new Array(o.length), l = s.context, u = this.canvasStyle(r), u.width && parseInt(u.width, 10) <= 25 ? (e.n1T(19), l.lineWidth = Math.max(e.B3B(0, "1"), t.stripPX(u.width))) : l.lineWidth = 1, a.highlight && (l.lineWidth *= 2), !a.highlight && this.highlightedDraggable && (e.E3R(2), l.globalAlpha *= e.W6G(1, "0.3")), c = a.field, d = a.yAxis || n.yAxis, f = d.top, g = d.bottom, m = s.dataSet.length - s.scroll - 1, x = {}, e.E3R(1);
    var E = e.W6G(10, 12);
    y = s.tmpWidth / E, b = l.lineWidth / 2, C = this.layout.candleWidth, e.Z8b(), e.E3R(20);
    var L = e.B3B(5, 6, 16, 18);
    k = n.left - +"0.5" * C + this.micropixels - L;
    for (var N = 0; N <= o.length; N++) if (e.n1T(7), k += e.W6G(C, 2), C = this.layout.candleWidth, e.E3R(7), k += e.W6G(C, 2), M = o[N], !!M) {
      if (M.projection) break;
      if (M.candleWidth) {
        e.E3R(16);
        var U = e.B3B(4, 70, 18);
        k += (M.candleWidth - C) / U, C = M.candleWidth;
      }
      if (I = i(this, M), !!I && (e.E3R(21), x[I] = e.B3B("1", 0), l.strokeStyle = I, l.beginPath(), s.transformFunc && d == s.panel.yAxis && M.transform && (M = M.transform), M && c && (M = M[c]), !(!M && M !== 0) && (v = M.Close, S = M.Open === void 0 ? v : M.Open, w = M.High === void 0 ? Math.max(v, S) : M.High, T = M.Low === void 0 ? Math.min(v, S) : M.Low, !(!v && v !== 0)))) {
        if (M.cache || (M.cache = {}), D = M.cache, e.E3R(0), F = e.B3B(N, m), F < n.cacheLeft || F > n.cacheRight || !D.top) {
          if (P = this.pixelFromTransformedValue(w, n, d), _ = this.pixelFromTransformedValue(T, n, d), D.open = d.semiLog ? d.height * (1 - (Math.log(Math.max(S, 0)) / Math.LN10 - d.logLow) / d.logShadow) : (d.high - S) * d.multiplier, D.close = d.semiLog ? d.height * (1 - (Math.log(Math.max(v, 0)) / Math.LN10 - d.logLow) / d.logShadow) : (d.high - v) * d.multiplier, d.flipped ? (D.open = d.bottom - D.open, D.close = d.bottom - D.close) : (D.open += d.top, D.close += d.top), h[N] = D.close, e.E3R(1), p = e.W6G(P, _), P < f) {
            if (P + p < f) {
              D.top = P, D.bottom = P;
              continue;
            }
            e.E3R(1), p -= e.W6G(P, f), P = f;
          }
          P + p > g && (e.n1T(13), p -= e.W6G(g, p, P)), D.top = P, e.E3R(0), D.bottom = e.W6G(p, P);
        }
        V = Math.floor(k) + (!a.highlight && 0.5), D.top < g && D.bottom > f && M.High != M.Low && (l.moveTo(V, D.top - b), l.lineTo(V, D.bottom + b)), a.type != "hlc" && D.open > f && D.open < g && (l.moveTo(V, D.open), e.n1T(1), l.lineTo(e.B3B(y, V), D.open)), D.close > f && D.close < g && (l.moveTo(V, D.close), e.n1T(0), l.lineTo(e.W6G(y, V), D.close)), l.stroke();
      }
    }
    l.lineWidth = 1, A = {
      colors: [],
      cache: h
    };
    for (var B in x) t.equals(B, this.containerColor) || A.colors.push(B);
    return A;
  }, t.ChartEngine.prototype.drawWaveChart = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F;
    i = n.chart, a = i.dataSegment, s = new Array(a.length), o = i.context, r || (r = {}), e.L1$();
    function P(O) {
      return e.Z8b(), g.pixelFromTransformedValue(O, n, h);
    }
    h = r.yAxis || n.yAxis, this.startClip(n.name), o.beginPath(), l = !1, u = !1, c = n.yAxis.top, d = n.yAxis.bottom, f = n.left + Math.floor(-0.5 * this.layout.candleWidth + this.micropixels), g = this;
    for (var _ = 0; _ <= a.length; _++) if (f += this.layout.candleWidth, p = a[_], !!p) {
      if (p.projection) break;
      if (i.transformFunc && h == i.panel.yAxis && p.transform && (p = p.transform), p && r.field && (p = p[r.field]), !(!p && p !== 0) && (m = p.Close, x = p.Open === void 0 ? m : p.Open, y = p.High === void 0 ? Math.max(m, x) : p.High, b = p.Low === void 0 ? Math.min(m, x) : p.Low, !(!m && m !== 0))) {
        e.n1T(22);
        var V = e.B3B(8, 7, 12, 8);
        e.n1T(23);
        var A = e.B3B(338, 5, 11, 6);
        if (C = f - V * this.layout.candleWidth / A, k = P(x), k < c) {
          if (k = c, u) {
            o.moveTo(C, k);
            continue;
          }
          u = !0;
        } else if (k > d) {
          if (k = d, u) {
            o.moveTo(C, k);
            continue;
          }
          u = !0;
        } else u = !1;
        if (l) o.lineTo(C, k);else {
          l = !0, e.n1T(13);
          var E = e.B3B(6, 7, 0);
          M = i.dataSet.length - i.scroll - E, M < 0 ? o.moveTo(C, k) : M >= 0 && (I = i.dataSet[M], I.transform && (I = I.transform), v = I.Close, v = P(v), v = Math.min(Math.max(v, c), d), o.moveTo(n.left + (_ - 1) * this.layout.candleWidth + this.micropixels, v), o.lineTo(C, k)), o.moveTo(C, k);
        }
        e.E3R(24);
        var L = e.B3B(52, 14, 13, 14, 700);
        if (C += this.layout.candleWidth / L, x < m) k = P(b), k < c && (k = c), k > d && (k = d), o.lineTo(C, k), C += this.layout.candleWidth / 4, k = P(y), k < c && (k = c), k > d && (k = d), o.lineTo(C, k);else {
          k = P(y), k < c && (k = c), k > d && (k = d), o.lineTo(C, k), e.E3R(25);
          var N = e.W6G(1, 15, 13, 6);
          C += this.layout.candleWidth / N, k = P(b), k < c && (k = c), k > d && (k = d), o.lineTo(C, k);
        }
        e.n1T(1);
        var U = e.W6G(96, 128);
        C += this.layout.candleWidth / ("4" << U), k = P(m), s[_] = k, k < c && (k = c), k > d && (k = d), o.lineTo(C, k);
      }
    }
    if (S = this.canvasStyle("stx_line_chart"), S.width && parseInt(S.width, 10) <= 25) o.lineWidth = Math.max(1, t.stripPX(S.width));else {
      w = -444165339, T = -599740586, D = 2;
      for (var B = 1; e.o0(B.toString(), B.toString().length, 98038) !== w; B++) o.lineWidth = 0, D += 2;
      e.o0(D.toString(), D.toString().length, 24466) !== T && (o.lineWidth = 0), o.lineWidth = 1;
    }
    return r.highlight && (o.lineWidth *= 2), this.canvasColor("stx_line_chart"), r.color && (o.strokeStyle = r.color), !r.highlight && this.highlightedDraggable && (o.globalAlpha *= 0.3), o.stroke(), o.closePath(), F = {
      colors: [o.strokeStyle],
      cache: s
    }, this.endClip(), o.lineWidth = 1, F;
  }, t.ChartEngine.prototype.drawHistogram = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B;
    if (i = "ch", i += "art", !r || !r.length || (a = n.panel, a || (a = i), s = this.panels[a], !s)) return;
    for (o = n.yAxis ? n.yAxis : s.yAxis, h = n.type, l = this.chart.dataSegment, u = !1, c = 1, d = 1, g = 0; g < r.length; g++) u |= r[g].border_color_up && !t.isTransparent(r[g].border_color_up), u |= r[g].border_color_down && !t.isTransparent(r[g].border_color_down), c = r[g].opacity_up, d = r[g].opacity_down, !n.highlight && this.highlightedDraggable && (c *= 0.3, d *= 0.3);
    n.borders === !1 && (u = !1), n.name || (n.name = "Data"), p = o.multiplier, n.heightPercentage || (n.heightPercentage = 0.7), n.widthFactor || (n.widthFactor = 0.8), m = 0, x = 0;
    for (var O = 0; O < this.chart.maxTicks; O++) if (y = l[O], !!y) for (b = 0, g = 0; g < r.length; g++) C = y[r[g].field], (C || C === 0) && (k = "C", k += "los", k += "e", f = r[g].subField || this.chart.defaultPlotField || k, typeof C == "object" && C[f] && (C = C[f]), h == "stacked" ? b += C : b = C, b > m && (m = b), b < x && (x = b));
    if (m === 0 && x === 0) {
      this.displayErrorAsWatermark(a, this.translateIf(n.name + " Not Available"));
      return;
    }
    I = !1, n.bindToYAxis ? (o.baseline && (x = o.baseline.value, I = !0), M = Math.floor(this.pixelFromPrice(x, s, o)) + (o.flipped ? -0.5 : 0.5)) : (o.flipped ? (M = Math.floor(o.top) - 0.5, v = Math.floor(o.bottom) - 0.5) : (M = Math.floor(o.bottom) + 0.5, v = Math.floor(o.top) + 0.5), p = Math.abs(M - v) * n.heightPercentage / (m - x));
    function R(z, W, G, Z, X, ie, j, J, ae) {
      var se, ne, le, ue, oe, ce, Q, ee, re, de, he, fe, pe, ge, ve, be, _e, ye;
      Z || (Z = 1), w.globalAlpha = Z, w.beginPath(), e.E3R(0), e.L1$(), se = e.W6G(0.5, M), ne = Math.floor(P.pixelFromBar(0, s.chart) - P.layout.candleWidth / 2), le = ne;
      for (var we = 0; we < l.length; we++) {
        if (ue = "clust", ue += "ered", oe = "c", oe += "lu", oe += "ster", oe += "ed", ce = "objec", ce += "t", Q = F[we] || M, we === 0 && (se = Q), !l[we] || !l[we][z]) {
          se = Q, le += P.layout.candleWidth;
          continue;
        }
        if (ee = l[we], re = ee[z], typeof re == ce && re[W] && (re = re[W]), e.E3R(26), de = e.B3B(re, x, p), !isNaN(de)) {
          if (he = P.layout.candleWidth, ee.candleWidth && (he = ee.candleWidth, we === 0 && (ne = le = Math.floor(P.pixelFromBar(0, s.chart) - ee.candleWidth / 2))), fe = Math.floor(Q - de) + 0.5, fe > Q && !I && (fe = Q), ae && ae.indexOf(we) == -1 || !ae && (ie && ee.Close < ee.iqPrevClose || !ie && ee.Close >= ee.iqPrevClose)) {
            se = fe, le += he;
            continue;
          }
          pe = he / P.layout.candleWidth, T ? (e.n1T(27), ge = Math.round(e.W6G(le, pe, T, J, j)), e.n1T(0), ve = e.W6G(X ? 0 : S, ge), be = ge + Math.round(J * pe) - (X ? 0 : S)) : (e.E3R(27), ge = e.W6G(le, pe, T, J, j), ve = Math.round(ge) + (X ? 0 : S), be = Math.round(ge + J * pe) - (X ? 0 : S)), be - ve < 2 && (e.E3R(0), be = e.W6G(1, ve)), _e = X ? 0 : 0.5, ve % 1 == _e && (ve += 0.5), be % 1 == _e && (be += 0.5), w.moveTo(be, Q), M != Q && X && !T && F[we + 1] && w.moveTo(be, Math.max(fe, Math.min(Q, F[we + 1]))), w.lineTo(be, fe), w.lineTo(ve, fe), X && j ? (D[we] > fe || we === 0) && w.lineTo(ve, Math.min(Q, D[we])) : X && !T && h == oe ? we > 0 && D[we - 1] && D[we - 1] > fe && w.lineTo(ve, Math.min(Q, D[we - 1])) : X && !T ? (se > fe || we === 0) && w.lineTo(ve, Math.min(Q, se)) : w.lineTo(ve, Q), se = fe, le += he, (h != ue || X) && (D[we] = fe);
        }
      }
      X ? (ye = "au", ye += "t", ye += "o", w.strokeStyle = !G || G == ye ? P.defaultColor : G, w.stroke()) : (w.fillStyle = !G || G == "auto" ? P.defaultColor : G, w.fill()), w.closePath();
    }
    for (this.startClip(a), S = this.layout.candleWidth <= 1 || !u ? 0 : 0.5, w = this.chart.context, o.flipped && (w.translate(0, 2 * o.top), w.scale(1, -1)), T = Math.max(0, (1 - n.widthFactor) * this.layout.candleWidth / 2), D = new Array(l.length), F = [], P = this, _ = 1, g = 0; g < r.length; g++) {
      if (V = "stack", V += "e", V += "d", A = "clu", A += "stered", E = r[g], _ = this.layout.candleWidth * n.widthFactor, T && this.layout.candleWidth - _ <= 2 && (u = !1), L = 0, h == A && (L = g, _ /= r.length), f = E.subField || this.chart.defaultPlotField || "Close", typeof E.color_function == "function") {
        U = {};
        for (var H = 0; H < l.length; H++) l[H] && (N = E.color_function(l[H]), typeof N == "string" && (N = {
          fill_color: N,
          border_color: N
        }), N.hasOwnProperty("border_opacity") || (N.border_opacity = N.opacity), B = N.fill_color + "," + N.border_color, B in U ? U[B].positions.push(H) : (N.positions = [H], U[B] = N));
        for (B in U) N = U[B], R(E.field, f, N.fill_color, N.opacity, null, null, L, _, N.positions), R(E.field, f, N.border_color, N.border_opacity, !0, null, L, _, N.positions);
      } else R(E.field, f, E.fill_color_up, c, null, !0, L, _), R(E.field, f, E.fill_color_down, d, null, null, L, _), this.layout.candleWidth >= 2 && u && (R(E.field, f, E.border_color_up, c, !0, !0, L, _), R(E.field, f, E.border_color_down, d, !0, null, L, _));
      h == V && (F = t.shallowClone(D));
    }
    w.globalAlpha = 1, this.endClip();
  }, t.ChartEngine.prototype.scatter = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v;
    i = "Clos", i += "e", a = "stx_s", a += "catter_ch", a += "art", s = n.chart, o = s.dataSegment, h = new Array(o.length), l = this.chart.context, this.canvasColor(a), r || (r = {}), u = r.field || s.defaultPlotField, c = r.yAxis || n.yAxis, d = r.subField || s.defaultPlotField || i, this.startClip(n.name), l.beginPath(), l.lineWidth = r.lineWidth || 4, r.highlight && (l.lineWidth *= 2), !r.highlight && this.highlightedDraggable && (l.globalAlpha *= +"0.3"), e.Z8b(), r.color && (l.strokeStyle = r.color), f = c.top, g = c.bottom, p = this.layout.candleWidth, e.n1T(1);
    var S = e.W6G(16, 17);
    m = n.left - 0.5 * p + this.micropixels - S;
    for (var w = 0; w <= o.length; w++) if (e.E3R(7), m += e.B3B(p, 2), p = this.layout.candleWidth, e.E3R(7), m += e.B3B(p, 2), x = o[w], !!x) {
      if (x.candleWidth) {
        e.n1T(28);
        var T = e.W6G(22, 7, 1, 13, 18);
        m += (x.candleWidth - p) / T, p = x.candleWidth;
      }
      if (!x.projection) {
        y = "Sc", y += "atte", y += "r", s.transformFunc && c == s.panel.yAxis && x.transform && (x = x.transform), b = x[u], b && b[d] !== void 0 && (b = b[d]), b instanceof Array || (b = [b]), y in x && (b = x.Scatter);
        for (var D = 0; D < b.length; D++) !b[D] && b[D] !== 0 || (C = b[D], k = 0, b[D] instanceof Array && (C = b[D][0], k = b[D][2]), M = c.semiLog ? c.height * (1 - (Math.log(Math.max(C, 0)) / Math.LN10 - c.logLow) / c.logShadow) : (c.high - C) * c.multiplier, c.flipped ? (e.E3R(1), M = e.W6G(M, g)) : M += f, !(M < f) && (M > g || (I = 2, k && (e.E3R(2), I = e.W6G(k, p)), e.n1T(1), l.moveTo(e.W6G(I, m), M), e.E3R(0), l.lineTo(e.W6G(I, m), M), h[w] = M)));
      }
    }
    return l.stroke(), l.closePath(), v = {
      colors: [l.strokeStyle],
      cache: h
    }, this.endClip(), l.lineWidth = 1, v;
  };
};
ga = q => {
  var e = te,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h,
    l,
    u,
    c,
    d,
    f,
    g,
    p,
    m,
    x,
    y,
    b,
    C,
    k,
    M,
    I,
    v,
    S,
    w,
    T,
    D,
    F,
    P,
    _,
    V;
  t = "col", t += "or", n = "pa", n += "ttern", r = "li", r += "n", r += "eW", r += "idth", i = "fillCo", i += "l", i += "o", i += "r", a = "c", a += "olor", s = "l", s += "in", s += "eWid", s += "th", o = "c", o += "o", o += "l", o += "or", h = "pa", h += "t", h += "ter", h += "n", l = "li", l += "neWidth", u = "f", u += "o", u += "nt", c = "s", c += "o", c += "li", c += "d", d = "aut", d += "o", f = "so", f += "l", f += "i", f += "d", g = "a", g += "u", g += "t", g += "o", p = "a", p += "ut", p += "o", m = "so", m += "l", m += "i", m += "d", x = "a", x += "u", x += "t", x += "o", y = "s", y += "o", y += "lid", b = "s", b += "ol", b += "i", b += "d", C = "s", C += "oli", C += "d", k = "au", k += "to", M = "a", M += "uto", I = "a", I += "u", I += "t", I += "o", v = "a", v += "u", v += "t", v += "o", S = "s", S += "olid", w = "s", w += "ol", w += "i", w += "d", T = "a", T += "u", T += "t", T += "o", D = "so", D += "l", D += "id", F = "#7", F += "DA6", F += "F5", P = "u", P += "ndefin", P += "e", P += "d", _ = typeof _CIQ < "u" ? _CIQ : q.CIQ, V = typeof _timezoneJS !== P ? _timezoneJS : q.timezoneJS, _.ChartEngine.drawingTools = {}, _.ChartEngine.currentVectorParameters = {
    vectorType: null,
    pattern: "solid",
    lineWidth: 1,
    fillColor: F,
    currentColor: "auto",
    axisLabel: !0,
    fibonacci: {
      trend: {
        color: "auto",
        parameters: {
          pattern: "solid",
          opacity: 0.25,
          lineWidth: 1
        }
      },
      fibs: [{
        level: -0.786,
        color: "auto",
        parameters: {
          pattern: D,
          opacity: 0.25,
          lineWidth: 1
        }
      }, {
        level: -0.618,
        color: T,
        parameters: {
          pattern: w,
          opacity: +"0.25",
          lineWidth: 1
        },
        display: !0
      }, {
        level: -0.5,
        color: "auto",
        parameters: {
          pattern: S,
          opacity: 0.25,
          lineWidth: 1
        }
      }, {
        level: -0.382,
        color: v,
        parameters: {
          pattern: "solid",
          opacity: 0.25,
          lineWidth: 1
        },
        display: !0
      }, {
        level: -0.236,
        color: I,
        parameters: {
          pattern: "solid",
          opacity: 0.25,
          lineWidth: 1
        }
      }, {
        level: 0,
        color: "auto",
        parameters: {
          pattern: "solid",
          lineWidth: 1
        },
        display: !0
      }, {
        level: 0.236,
        color: M,
        parameters: {
          pattern: "solid",
          opacity: 0.25,
          lineWidth: 1
        }
      }, {
        level: 0.382,
        color: "auto",
        parameters: {
          pattern: "solid",
          opacity: 0.25,
          lineWidth: 1
        },
        display: !0
      }, {
        level: 0.5,
        color: k,
        parameters: {
          pattern: C,
          opacity: 0.25,
          lineWidth: 1
        },
        display: !0
      }, {
        level: 0.618,
        color: "auto",
        parameters: {
          pattern: b,
          opacity: 0.25,
          lineWidth: 1
        },
        display: !0
      }, {
        level: 0.786,
        color: "auto",
        parameters: {
          pattern: y,
          opacity: 0.25,
          lineWidth: 1
        }
      }, {
        level: 1,
        color: x,
        parameters: {
          pattern: "solid",
          lineWidth: 1
        },
        display: !0
      }, {
        level: 1.272,
        color: "auto",
        parameters: {
          pattern: m,
          opacity: 0.25,
          lineWidth: 1
        }
      }, {
        level: 1.382,
        color: "auto",
        parameters: {
          pattern: "solid",
          opacity: 0.25,
          lineWidth: 1
        },
        display: !0
      }, {
        level: 1.618,
        color: "auto",
        parameters: {
          pattern: "solid",
          opacity: 0.25,
          lineWidth: 1
        },
        display: !0
      }, {
        level: 2.618,
        color: p,
        parameters: {
          pattern: "solid",
          opacity: 0.25,
          lineWidth: 1
        }
      }, {
        level: 4.236,
        color: g,
        parameters: {
          pattern: f,
          opacity: 0.25,
          lineWidth: 1
        }
      }],
      extendLeft: !1,
      printLevels: !0,
      printValues: !1,
      timezone: {
        color: d,
        parameters: {
          pattern: c,
          opacity: 0.25,
          lineWidth: 1
        }
      }
    },
    annotation: {
      font: {
        style: null,
        size: null,
        weight: null,
        family: null
      }
    }
  }, _.ChartEngine.registerDrawingTool = function (A, E) {
    _.ChartEngine.drawingTools[A] = E;
  }, _.ChartEngine.prototype.setDrawingContainer = function (A) {
    var E, L, N;
    E = -919766201, e.Z8b(), L = 474510769, e.n1T(2), N = e.B3B(1, "2");
    for (var U = 1; e.o0(U.toString(), U.toString().length, 21071) !== E; U++) this.drawingContainer = A, N += 2;
    e.o0(N.toString(), N.toString().length, 72048) !== L && (this.drawingContainer = A);
  }, _.ChartEngine.prototype.exportDrawings = function () {
    var A;
    A = [];
    for (var E = 0; E < this.drawingObjects.length; E++) A.push(this.drawingObjects[E].serialize());
    return A;
  }, _.ChartEngine.prototype.abortDrawings = function (A) {
    var E;
    A !== !1 && (A = !0);
    for (var L = this.drawingObjects.length - 1; L >= 0; L--) E = this.drawingObjects[L], E.abort(!0), (A || !E.permanent) && (e.E3R(19), this.drawingObjects.splice(L, e.B3B(32, "1")));
  }, _.ChartEngine.prototype.importDrawings = function (A) {
    var E, L, N;
    if (_.Drawing) for (var U = 0; U < A.length; U++) E = A[U], E.name == "fibonacci" && (E.name = "retracement"), L = _.ChartEngine.drawingTools[E.name], L || _.Drawing[E.name] && (L = _.Drawing[E.name], _.ChartEngine.registerDrawingTool(E.name, L)), L && (N = new L(), N.reconstruct(this, E), this.drawingObjects.push(N));
  }, _.ChartEngine.prototype.clearDrawings = function (A, E) {
    e.L1$();
    var L, N, U, B, O, R;
    if (L = "v", L += "ect", L += "o", L += "r", E !== !1 && (E = !0), N = this.exportDrawings(), this.abortDrawings(E), A ? this.undoStamps = [] : this.undoStamp(N, this.exportDrawings()), this.changeOccurred(L), this.cancelTouchSingleClick = !0, _.clearCanvas(this.chart.tempCanvas, this), this.draw(), U = this.controls.mSticky, U) {
      B = -853282440, O = 2129878640, e.n1T(29), R = e.B3B(32, "2");
      for (var H = 1; e.o0(H.toString(), H.toString().length, 58773) !== B; H++) U.style.display = "", R += 2;
      e.Q_(R.toString(), R.toString().length, 4644) !== O && (U.style.display = ""), U.style.display = "none", U.children[0].innerHTML = "";
    }
  }, _.ChartEngine.prototype.createDrawing = function (A, E) {
    var L, N;
    if (_.Drawing) {
      L = new _.Drawing[A](), L.reconstruct(this, E), N = new _.Drawing[A](), N.stx = this, N.copyConfig();
      for (var U in N) L[U] = L[U] || N[U];
      return this.drawingObjects.push(L), e.L1$(), this.draw(), L;
    }
  }, _.ChartEngine.prototype.removeDrawing = function (A) {
    e.L1$();
    for (var E, L = 0; L < this.drawingObjects.length; L++) if (this.drawingObjects[L] == A) {
      E = "v", E += "ec", E += "t", E += "or", this.drawingObjects.splice(L, 1), this.changeOccurred(E), this.draw();
      return;
    }
  }, _.ChartEngine.prototype.undo = function () {
    var A, E;
    this.runPrepend("undo", arguments) || (e.L1$(), this.activeDrawing && (A = "st", A += "x_cr", A += "o", A += "sshair", E = "stx_cross", E += "hair_draw", E += "ing", this.activeDrawing.abort(), this.activeDrawing.hidden = !1, this.drawingSnapshot = null, this.activateDrawing(null), _.clearCanvas(this.chart.tempCanvas, this), this.draw(), this.controls.crossX.classList.replace(E, "stx_crosshair"), this.controls.crossY.classList.replace("stx_crosshair_drawing", A), _.ChartEngine.drawingLine = !1), this.runAppend("undo", arguments));
  }, _.ChartEngine.prototype.undoStamp = function (A, E) {
    var L;
    L = "u", L += "ndoS", L += "t", L += "amp", this.undoStamps.push(A), e.L1$(), this.dispatch(L, {
      before: A,
      after: E,
      stx: this
    });
  }, e.Z8b(), _.ChartEngine.prototype.undoLast = function () {
    this.activeDrawing ? this.undo() : this.undoStamps.length && (this.drawingObjects = [], this.importDrawings(this.undoStamps.pop()), this.changeOccurred("vector"), this.draw());
  }, _.ChartEngine.prototype.addDrawing = function (A) {
    var E;
    E = this.exportDrawings(), this.drawingObjects.push(A), this.undoStamp(E, this.exportDrawings());
  }, _.ChartEngine.prototype.repositionDrawing = function (A, E) {
    var L, N, U;
    L = this.panels[A.panelName], N = this.adjustIfNecessary(L, this.crosshairTick, this.valueFromPixel(this.backOutY(_.ChartEngine.crosshairY), L)), e.Z8b(), U = this.chart.tempCanvas, _.clearCanvas(U, this), E ? (this.drawingSnapshot = this.exportDrawings(), A.render(U.context)) : (A.reposition(U.context, A.repositioner, this.crosshairTick, N), this.drawingSnapshot && this.undoStamp(_.shallowClone(this.drawingSnapshot), this.exportDrawings()), this.drawingSnapshot = null), A.measure && A.measure();
  }, _.ChartEngine.prototype.activateRepositioning = function (A) {
    var E;
    E = "bloc", E += "k", this.repositioningDrawing = A, A && (this.draw(), this.repositionDrawing(A, !0)), this.chart.tempCanvas.style.display = A ? E : "none";
  }, _.ChartEngine.prototype.activateDrawing = function (A, E) {
    var L, N;
    L = "n", L += "o", L += "n", L += "e";
    function U(B) {
      e.L1$();
      var O;
      B.layout.studies && (O = B.layout.studies[E.name], O && !O.overlay && delete B.overlays[O.name]);
    }
    return E || (E = this.currentPanel), A ? (N = _.ChartEngine.drawingTools[A], N || _.Drawing[A] && (N = _.Drawing[A], _.ChartEngine.registerDrawingTool(A, N)), N && (this.activeDrawing = new N(), this.activeDrawing.construct(this, E), !this.charts[E.name] && this.activeDrawing.chartsOnly) ? (this.activeDrawing = null, U(this), !1) : (this.chart.tempCanvas.style.display = "block", e.Z8b(), this.controls.drawOk && (this.controls.drawOk.style.display = L), U(this), !0)) : (this.activeDrawing = null, this.chart.tempCanvas.style.display = "none", U(this), !1);
  }, _.ChartEngine.prototype.drawingClick = function (A, E, L) {
    var N, U, B, O, R, H;
    if (_.Drawing && A && this.openDialog === "" && !(!this.activeDrawing && !this.activateDrawing(this.currentVectorParameters.vectorType, A))) {
      if (this.activeDrawing) {
        if (this.userPointerDown && !this.activeDrawing.dragToDraw) {
          _.ChartEngine.drawingLine || this.activateDrawing(null);
          return;
        }
        return N = this.tickFromPixel(E, A.chart), U = this.panels[this.activeDrawing.panelName], B = this.adjustIfNecessary(U, N, this.valueFromPixel(L, U)), this.magnetizedPrice && (B = this.adjustIfNecessary(U, N, this.magnetizedPrice)), this.activeDrawing.click(this.chart.tempCanvas.context, N, B) ? this.activeDrawing && (O = "stx", O += "_crossha", O += "ir_drawi", O += "ng", R = "vec", R += "to", R += "r", _.ChartEngine.drawingLine = !1, _.clearCanvas(this.chart.tempCanvas, this), this.addDrawing(this.activeDrawing), this.activateDrawing(null), this.adjustDrawings(), this.draw(), this.changeOccurred(R), this.controls.crossX.classList.replace(O, "stx_crosshair"), this.controls.crossY.classList.replace("stx_crosshair_drawing", "stx_crosshair")) : (H = "stx_crosshai", H += "r_drawing", this.changeOccurred("drawing"), _.ChartEngine.drawingLine = !0, this.controls.crossX.classList.replace("stx_crosshair", H), this.controls.crossY.classList.replace("stx_crosshair", "stx_crosshair_drawing")), !0;
      }
      return !1;
    }
  }, _.ChartEngine.prototype.rightClickDrawing = function (A, E) {
    var L, N;
    this.runPrepend("rightClickDrawing", arguments) || A.permanent || (this.callbackListeners.drawingEdit.length ? this.dispatch("drawingEdit", {
      stx: this,
      drawing: A,
      forceEdit: E
    }) : (L = A.abort(), L || (N = this.exportDrawings(), this.removeDrawing(A), this.undoStamp(N, this.exportDrawings())), this.changeOccurred("vector")), this.runAppend("rightClickDrawing", arguments));
  }, _.ChartEngine.prototype.magnetize = function () {
    var A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue;
    if (A = "#3", A += "98d", A += "f", A += "f", E = "#398d", E += "f", E += "f", L = "C", L += "lo", L += "s", L += "e", this.magnetizedPrice = null, !!this.preferences.magnet && !this.runPrepend("magnetize", arguments) && !this.repositioningDrawing && (e.L1$(), N = this.currentVectorParameters.vectorType, !(!N || N == "projection" || N == "freeform") && !((N == "annotation" || N == "callout") && _.ChartEngine.drawingLine) && (U = this.currentPanel, B = U.chart, O = this.crosshairTick, !(O > B.dataSet.length) && (R = B.dataSet[O], !!R)))) {
      H = B.transformFunc && U.yAxis === B.yAxis, H && R.transform && (R = R.transform), W = this.getRenderedItems(), G = ["Open", "High", "Low", L], this.magneticHold && this.activeDrawing && this.activeDrawing.penDown ? G.indexOf(this.magneticHold) != -1 && W.indexOf("High") != -1 ? W = G : W = [this.magneticHold] : this.magneticHold = null, Z = 1000000000, X = parseFloat(this.preferences.magnet);
      for (var oe = 0; oe < W.length; oe++) if (ie = R[W[oe]], j = this.getYAxisByField(U, W[oe]), J = _.existsInObjectChain(R, W[oe]), J && (ie = J.obj[J.member]), (ie || ie === 0) && (ae = this.pixelFromTransformedValue(ie, U, j), Math.abs(this.cy - ae) < Z)) {
        if (Z = Math.abs(this.cy - ae), X && X <= Z) continue;
        this.magnetizedPrice = H ? this.valueFromPixel(ae, U) : ie, z = ae, this.magneticHold = W[oe];
      }
      se = this.pixelFromTick(O, B), ne = z, _.clearCanvas(B.tempCanvas, this), le = B.tempCanvas.context, le.beginPath(), e.n1T(2), le.lineWidth = e.W6G(1, "1"), e.n1T(0);
      var ce = e.B3B(5, 7);
      e.E3R(1);
      var Q = e.W6G(9, 12);
      ue = Math.max(this.layout.candleWidth, ce) / Q, le.arc(se, ne, Math.min(ue, 8), 0, 2 * Math.PI, !1), le.fillStyle = E, le.strokeStyle = A, le.fill(), le.stroke(), le.closePath(), B.tempCanvas.style.display = "block", this.anyHighlighted && this.container.classList.remove("stx-draggable"), this.activeDrawing && this.activeDrawing.move(le, this.crosshairTick, this.magnetizedPrice), this.runAppend("magnetize", arguments);
    }
  }, _.ChartEngine.prototype.changeVectorType = function (A) {
    e.L1$(), this.currentVectorParameters.vectorType = A, _.Drawing && _.Drawing.initializeSettings(this, A), _.ChartEngine.drawingLine && this.undo(), this.insideChart && this.doDisplayCrosshairs();
  }, _.ChartEngine.prototype.changeVectorParameter = function (A, E) {
    var L, N, U, B, O, R, H;
    if (L = "f", L += "ont", N = "u", N += "nd", N += "e", N += "fined", A == "axisLabel") E = E.toString() === "true" || Number(E);else if (A == "lineWidth") E = Number(E);else if (A == "fontSize") {
      e.n1T(30);
      var z = e.W6G(17, 1, 9, 17);
      E = parseInt(E, z) + "px";
    }
    if (U = this.currentVectorParameters, typeof U[A] !== N) return U[A] = E, !0;
    if (A.substr(0, 4) == L && (B = "de", B += "fault", A = A.substr(4).toLowerCase(), A == "family" && E.toLowerCase() == B && (E = null), U = U.annotation.font, typeof U[A] < "u")) return U[A] = E, !0;
    O = 2127006979, e.n1T(21), R = -e.W6G("28645622", 38), e.L1$(), H = 2;
    for (var W = 1; e.o0(W.toString(), W.toString().length, 18381) !== O; W++) return !1;
    if (e.o0(H.toString(), H.toString().length, 61934) !== R) return !0;
  }, _.ChartEngine.prototype.drawVectors = function () {
    var A, E, L, N, U, B;
    if (A = "drawVec", A += "tors", !this.vectorsShowing && !this.runPrepend(A, arguments)) {
      if (this.vectorsShowing = !0, !this.chart.hideDrawings && !this.highlightedDraggable) {
        for (E = {}, N = 0; N < this.drawingObjects.length; N++) U = this.drawingObjects[N], !U.hidden && this.repositioningDrawing !== U && (L = U.panelName, !(!this.panels[U.panelName] || this.panels[U.panelName].hidden) && (E[L] || (E[L] = []), E[L].push(U)));
        for (L in E) {
          for (this.startClip(L), B = E[L], N = 0; N < B.length; N++) B[N].render(this.chart.context);
          this.endClip();
        }
      }
      this.runAppend("drawVectors", arguments);
    }
  }, _.ChartEngine.prototype.adjustDrawings = function () {
    var A;
    e.Z8b();
    for (var E = 0; E < this.drawingObjects.length; E++) A = this.drawingObjects[E], this.panels[A.panelName] && A.adjust();
  }, _.Drawing = _.Drawing || function () {
    this.chartsOnly = !1, this.penDown = !1;
  }, _.Drawing.getDrawingParameters = function (A, E) {
    var L, N, U, B;
    try {
      L = new _.Drawing[E]();
    } catch {}
    if (!L) return null;
    L.stx = A, L.copyConfig(!0), N = {}, U = L.configs;
    for (var O = 0; O < U.length; O++) N[U[O]] = L[U[O]];
    return B = A.canvasStyle("stx_annotation"), B && N.font && (N.font.size = B.fontSize, N.font.family = B.fontFamily, N.font.style = B.fontStyle, N.font.weight = B.fontWeight), N;
  }, _.Drawing.saveConfig = function (A, E) {
    var L, N, U;
    L = "prefe", L += "rence", L += "s", E && (N = A.preferences, N.drawings || (N.drawings = {}), N.drawings[E] = {}, U = new _.Drawing[E](), U.stx = A, _.Drawing.copyConfig(U), U.configs.forEach(function (B) {
      N.drawings[E][B] = U[B];
    }), A.changeOccurred(L));
  }, _.Drawing.restoreDefaultConfig = function (A, E, L) {
    var N, U, B, O;
    N = "p", N += "refe", N += "re", N += "nces", L ? A.preferences.drawings = null : A.preferences.drawings[E] = null, A.changeOccurred(N), A.currentVectorParameters = _.clone(_.ChartEngine.currentVectorParameters), U = 913923695, B = 1851959448, e.n1T(2), O = e.B3B(1, "2");
    for (var R = 1; e.o0(R.toString(), R.toString().length, 75320) !== U; R++) A.currentVectorParameters.vectorType = E, O += 2;
    e.Z8b(), e.o0(O.toString(), O.toString().length, 86364) !== B && (A.currentVectorParameters.vectorType = E), A.currentVectorParameters.vectorType = E;
  }, _.Drawing.initializeSettings = function (A, E) {
    var L, N;
    L = _.Drawing[E], L && (N = new L(), N.initializeSettings && N.initializeSettings(A));
  }, _.Drawing.updateSource = function (A, E, L, N) {
    var U, B, O;
    if (U = "vec", e.Z8b(), U += "to", U += "r", !!E) {
      B = !1;
      for (var R in A.drawingObjects) O = A.drawingObjects[R], O.field && (L ? O.field == E ? (O.field = L, B = !0) : O.field.indexOf(E) > -1 && O.field.indexOf(E + "-") == -1 && (O.field = O.field.replace(E, L), B = !0) : (O.field.split("-->")[0] == E || O.panelName == E) && (O.panelName = N, B = !0));
      B && A.changeOccurred(U);
    }
  }, _.Drawing.prototype.copyConfig = function (A) {
    _.Drawing.copyConfig(this, A);
  }, _.Drawing.copyConfig = function (A, E) {
    e.L1$();
    var L, N, U, B, O, R, H, z, W;
    for (L = A.stx.currentVectorParameters, N = A.configs, U = 0; U < N.length; U++) O = "f", O += "ont", R = "para", R += "met", R += "ers", H = "col", H += "or", B = N[U], B == H ? A.color = L.currentColor : B == R ? A.parameters = _.clone(L.fibonacci) : B == O ? A.font = _.clone(L.annotation.font) : A[B] = L[B];
    if (E && (z = A.stx.preferences, z && z.drawings)) for (_.extend(A, z.drawings[L.vectorType]), U = 0; U < N.length; U++) W = "parameter", W += "s", B = N[U], B == "color" ? L.currentColor = A.color : B == W ? L.fibonacci = _.clone(A.parameters) : B == "font" ? L.annotation.font = _.clone(A.font) : L[B] = A[B];
  }, _.Drawing.prototype.dragToDraw = !1, _.Drawing.prototype.permanent = !1, _.Drawing.prototype.chartsOnly = !1, _.Drawing.prototype.abort = function (A) {}, _.Drawing.prototype.measure = function () {}, _.Drawing.prototype.construct = function (A, E) {
    this.stx = A, this.panelName = E.name;
  }, _.Drawing.prototype.render = function (A) {
    var E;
    E = "must imple", E += "ment render function!", console.warn(E);
  }, _.Drawing.prototype.click = function (A, E, L) {
    e.Z8b();
    var N;
    N = "must implement click func", N += "tion!", console.warn(N);
  }, _.Drawing.prototype.move = function (A, E, L) {
    console.warn("must implement move function!");
  }, _.Drawing.prototype.reposition = function (A, E, L, N) {}, _.Drawing.prototype.intersected = function (A, E, L) {
    console.warn("must implement intersected function!");
  }, _.Drawing.prototype.reconstruct = function (A, E) {
    var L;
    L = "mu", L += "st implement reconstruc", L += "t ", L += "function!", e.L1$(), console.warn(L);
  }, _.Drawing.prototype.serialize = function () {
    e.Z8b(), console.warn("must implement serialize function!");
  }, _.Drawing.prototype.adjust = function () {
    var A;
    A = "must", A += " ", A += "implement adjust function!", console.warn(A);
  }, _.Drawing.prototype.highlight = function (A) {
    return e.L1$(), A && !this.highlighted ? this.highlighted = A : !A && this.highlighted && (this.highlighted = A), this.highlighted;
  }, _.Drawing.prototype.littleCircleRadius = function () {
    var A;
    return A = 6, A;
  }, _.Drawing.prototype.littleCircle = function (A, E, L, N) {
    var U, B;
    this.permanent || (U = this.stx.defaultColor, B = _.chooseForegroundColor(U), e.L1$(), A.beginPath(), A.lineWidth = 1, A.arc(E, L, this.littleCircleRadius(), 0, 2 * Math.PI, !1), N ? A.fillStyle = U : A.fillStyle = B, A.strokeStyle = U, A.setLineDash([]), A.fill(), A.stroke(), A.closePath());
  }, _.Drawing.prototype.rotator = function (A, E, L, N) {
    var U, B, O;
    this.permanent || (U = this.littleCircleRadius(), B = this.stx.defaultColor, A.beginPath(), A.lineWidth = 2, N || (A.globalAlpha = 0.5), e.n1T(0), O = e.W6G(U, 4), A.arc(E, L, O, 0, 3 * Math.PI / 2, !1), e.E3R(31), A.moveTo(e.B3B(O, 2, E), e.W6G(2, L, e.E3R(0))), e.n1T(0), A.lineTo(e.W6G(O, E), L), e.E3R(32), A.lineTo(e.B3B(E, O, 2), e.W6G(2, L, e.n1T(0))), e.E3R(1), A.moveTo(e.W6G(2, E), e.W6G(2, L, "2", O, e.n1T(33))), e.n1T(1), A.lineTo(E, e.B3B(O, L)), e.E3R(1), A.lineTo(e.B3B(2, E), e.W6G(O, L, 2, e.E3R(34))), A.strokeStyle = B, A.stroke(), A.closePath(), A.globalAlpha = 1);
  }, _.Drawing.prototype.mover = function (A, E, L, N) {
    var U, B, O, R;
    if (!this.permanent) {
      U = this.littleCircleRadius(), B = this.stx.defaultColor, O = 5, e.E3R(0), R = e.B3B(1, U), A.save(), A.lineWidth = 2, A.strokeStyle = B, A.translate(E, L), N || (A.globalAlpha = 0.5);
      for (var H = 0; H < 4; H++) A.rotate(Math.PI / 2), A.beginPath(), A.moveTo(0, R), e.n1T(0), A.lineTo(0, e.B3B(O, R)), e.n1T(13), A.moveTo(-2, e.W6G(2, O, R)), e.n1T(0), A.lineTo(0, e.B3B(O, R)), e.E3R(13), A.lineTo(2, e.W6G(2, O, R)), A.closePath(), A.stroke();
      A.globalAlpha = 1, A.restore();
    }
  }, _.Drawing.prototype.resizer = function (A, E, L, N) {
    var U, B, O, R;
    if (!this.permanent) {
      U = this.littleCircleRadius(), B = this.stx.defaultColor, e.E3R(13);
      var H = e.W6G(51, 6, 50);
      e.n1T(20);
      var z = e.W6G(18, 65, 17, 128);
      O = H * Math.sqrt("2" >> z), e.E3R(0), R = e.W6G(1, U), A.save(), A.lineWidth = 2, A.strokeStyle = B, A.translate(E, L), A.rotate(-(E * L) / Math.abs(E * L) * Math.PI / 4), N || (e.E3R(1), A.globalAlpha = e.B3B(0, "0.5"));
      for (var W = 0; W < 2; W++) A.rotate(Math.PI), A.beginPath(), e.E3R(21), A.moveTo(e.B3B("0", 0), R), e.E3R(0), A.lineTo(0, e.W6G(O, R)), e.E3R(13), A.moveTo(-2, e.B3B(2, O, R)), e.E3R(0), A.lineTo(0, e.W6G(O, R)), e.E3R(35), A.lineTo(2, e.W6G(O, "2", R)), A.closePath(), A.stroke();
      A.globalAlpha = 1, A.restore();
    }
  }, _.Drawing.prototype.pointIntersection = function (A, E, L, N) {
    var U;
    if (U = this.stx.panels[this.panelName], !U) return !1;
    if (N) {
      if (A >= L.cx0 && A <= L.cx1 && E >= L.cy0 && E <= L.cy1) return !0;
    } else if (A >= L.x0 && A <= L.x1 && E >= Math.min(L.y0, L.y1) && E <= Math.max(L.y0, L.y1)) return !0;
    return !1;
  }, _.Drawing.prototype.setPoint = function (A, E, L, N) {
    var U, B, O, R, H, z, W, G, Z;
    if (e.L1$(), U = null, B = null, typeof E == "number" ? U = E : E.length >= 8 ? B = E : U = Number(E), (L || L === 0) && (e.E3R(0), this[e.W6G(A, "v")] = L), U !== null) {
      R = "t", R += "z", R += "o", O = this.stx.dateFromTick(U, N, !0), e.n1T(0), this[e.B3B(A, R)] = O.getTimezoneOffset(), e.n1T(0), this[e.W6G(A, "d")] = _.yyyymmddhhmmssmmm(O), H = 887880559, z = 424448928, W = 2;
      for (var X = 1; e.Q_(X.toString(), X.toString().length, 20518) !== H; X++) e.E3R(0), this[e.B3B(A, "p")] = [U, L], e.E3R(1), W += e.W6G(0, "2");
      e.Q_(W.toString(), W.toString().length, 1568) !== z && (e.n1T(2), this[e.B3B(A, "")] = [U, L]);
    } else B !== null && (O = _.strToDateTime(B), !this["tzo" + A] && this["tzo" + A] !== 0 && (e.E3R(0), this[e.B3B(A, "tzo")] = O.getTimezoneOffset()), e.E3R(0), this[e.B3B(A, "d")] = B, G = this["tzo" + A] - O.getTimezoneOffset(), O.setMinutes(O.getMinutes() + G), Z = !1, this.name != "freeform" && !_.ChartEngine.isDailyInterval(this.stx.layout.interval) && !O.getHours() && !O.getMinutes() && !O.getSeconds() && !O.getMilliseconds() && (Z = !0), e.E3R(0), this[e.B3B(A, "p")] = [this.stx.tickFromDate(_.yyyymmddhhmmssmmm(O), N, null, Z), L]);
  }, _.Drawing.prototype.getLineColor = function (A) {
    var E, L, N, U, B, O, R, H, z;
    if (A || (A = this.color), E = this.stx, L = A, this.highlighted) L = E.getCanvasColor("stx_highlight_vector");else if (_.isTransparent(L)) L = E.defaultColor;else if (L == "auto" && (L = E.defaultColor, this.field)) {
      for (N in E.layout.studies) if (U = E.layout.studies[N], B = U.outputs[U.outputMap[this.field]], B) {
        L = B.color || B;
        break;
      }
      for (N in E.chart.seriesRenderers) {
        R = E.chart.seriesRenderers[N];
        for (var W = 0; W < R.seriesParams.length; W++) {
          if (H = R.seriesParams[W], z = H.field, !z && !R.highLowBars && (z = this.defaultPlotField || "Close"), H.symbol && H.subField && (z += "-->" + H.subField), this.field == z) {
            L = H.color;
            break;
          }
          H.field && H.field == this.field.split("-->")[0] && (O = H.color);
        }
      }
      O && (L = O);
    }
    return L == "auto" && (L = E.defaultColor), L;
  }, _.Drawing.BaseTwoPoint = function () {
    this.p0 = null, this.p1 = null, this.color = "";
  }, _.inheritsFrom(_.Drawing.BaseTwoPoint, _.Drawing), _.Drawing.BaseTwoPoint.prototype.configs = [], _.Drawing.BaseTwoPoint.prototype.lineIntersection = function (A, E, L, N, U, B, O) {
    var R, H, z;
    return U || (U = this.p0), B || (B = this.p1), R = this.stx, !(U && B) || (H = _.convertBoxToPixels(R, this.panelName, L), H.x0 === void 0) ? !1 : (z = {
      x0: U[0],
      x1: B[0],
      y0: U[1],
      y1: B[1]
    }, O || (z = _.convertBoxToPixels(R, this.panelName, z)), _.boxIntersects(H.x0, H.y0, H.x1, H.y1, z.x0, z.y0, z.x1, z.y1, N));
  }, _.Drawing.BaseTwoPoint.prototype.boxIntersection = function (A, E, L) {
    return !(!this.p0 || !this.p1 || L.x0 > Math.max(this.p0[0], this.p1[0]) || L.x1 < Math.min(this.p0[0], this.p1[0]) || (e.Z8b(), L.y1 > Math.max(this.p0[1], this.p1[1]) || L.y0 < Math.min(this.p0[1], this.p1[1])));
  }, _.Drawing.BaseTwoPoint.prototype.accidentalClick = function (A, E) {
    var L, N, U, B, O, R, H, z;
    if (L = this.stx.panels[this.panelName], N = this.stx.pixelFromTick(this.p0[0], L.chart), U = this.stx.pixelFromTick(A, L.chart), B = this.stx.pixelFromValueAdjusted(L, this.p0[0], this.p0[1]), O = this.stx.pixelFromValueAdjusted(L, A, E), e.n1T(1), R = Math.abs(e.B3B(N, U)), e.E3R(1), H = Math.abs(e.B3B(B, O)), e.n1T(36), z = Math.sqrt(e.W6G(H, R, H, R)), z < 10) return this.penDown = !1, this.dragToDraw && this.stx.undo(), !0;
  }, _.Drawing.BaseTwoPoint.prototype.click = function (A, E, L) {
    var N;
    return this.copyConfig(), N = this.stx.panels[this.panelName], this.penDown ? (e.Z8b(), this.accidentalClick(E, L) ? this.dragToDraw : (e.n1T(37), this.setPoint(e.W6G(0, "1"), E, L, N.chart), this.penDown = !1, !0)) : (this.setPoint(0, E, L, N.chart), this.penDown = !0, !1);
  }, _.Drawing.BaseTwoPoint.prototype.adjust = function () {
    var A;
    A = this.stx.panels[this.panelName], A && (this.setPoint(0, this.d0, this.v0, A.chart), this.setPoint(1, this.d1, this.v1, A.chart));
  }, _.Drawing.BaseTwoPoint.prototype.move = function (A, E, L) {
    this.penDown && (this.copyConfig(), this.p1 = [E, L], this.render(A));
  }, _.Drawing.BaseTwoPoint.prototype.measure = function () {
    var A, E, L, N, U;
    e.Z8b(), this.p0 && this.p1 && (A = ".mS", A += "tickyInterior", this.stx.setMeasure(this.p0[1], this.p1[1], this.p0[0], this.p1[0], !0, this.name), E = this.stx.controls.mSticky, L = E && E.querySelector(A), L && (N = "<", N += "b", N += "r", N += ">", U = [], U.push(_.capitalize(this.name)), this.getYValue && U.push(this.field || this.stx.defaultPlotField || "Close"), U.push(L.innerHTML), L.innerHTML = U.join(N)));
  }, _.Drawing.BaseTwoPoint.prototype.reposition = function (A, E, L, N) {
    var U, B, O, R;
    U = "dra", U += "g", E && (B = this.stx.panels[this.panelName], O = E.tick - L, R = E.value - N, E.action == "move" ? (this.setPoint(0, E.p0[0] - O, E.p0[1] - R, B.chart), this.setPoint(1, E.p1[0] - O, E.p1[1] - R, B.chart), this.render(A)) : E.action == U && (this[E.point] = [L, N], this.setPoint(0, this.p0[0], this.p0[1], B.chart), this.setPoint(1, this.p1[0], this.p1[1], B.chart), this.render(A)));
  }, _.Drawing.BaseTwoPoint.prototype.drawDropZone = function (A, E, L, N, U) {
    var B, O, R, H, z, W;
    B = "#0080", e.L1$(), B += "00", O = this.stx.panels[this.panelName], O && (R = O.left, H = O.width, (N || N === 0) && (R = this.stx.pixelFromTick(N, O.chart)), (U || U === 0) && (H = this.stx.pixelFromTick(U, O.chart)), z = this.stx.pixelFromPrice(E, O), W = this.stx.pixelFromPrice(L, O), A.fillStyle = B, A.globalAlpha = 0.2, e.E3R(1), A.fillRect(R, z, e.W6G(R, H), e.W6G(z, W)), A.globalAlpha = 1);
  }, _.Drawing.annotation = function () {
    var A, E, L;
    this.name = "annotation", this.arr = [], this.w = 0, this.h = 0, e.n1T(21), this.padding = e.W6G("4", 4), this.text = "", A = -1533151026, E = 157738542, L = 2;
    for (var N = 1; e.o0(N.toString(), N.toString().length, 29106) !== A; N++) this.ta = 1, L += 2;
    e.Q_(L.toString(), L.toString().length, 82969) !== E && (this.ta = 7), this.ta = null, this.fontSize = 0, this.font = {};
  }, _.inheritsFrom(_.Drawing.annotation, _.Drawing.BaseTwoPoint), _.Drawing.annotation.prototype.getFontString = function () {
    var A, E;
    this.fontDef = {
      style: null,
      weight: null,
      size: "12px",
      family: null
    }, A = this.stx.canvasStyle("stx_annotation"), A && (A.fontStyle && (this.fontDef.style = A.fontStyle), A.fontWeight && (this.fontDef.weight = A.fontWeight), A.fontSize && (this.fontDef.size = A.fontSize), A.fontFamily && (this.fontDef.family = A.fontFamily)), this.font.style && (this.fontDef.style = this.font.style), this.font.weight && (this.fontDef.weight = this.font.weight), this.font.size && (this.fontDef.size = this.font.size), this.font.family && (this.fontDef.family = this.font.family), this.fontString = "", e.Z8b(), E = !0;
    for (var L in this.fontDef) this.fontDef[L] && (E ? E = !1 : this.fontString += " ", this.fontString += this.fontDef[L]);
  }, _.Drawing.annotation.prototype.configs = ["color", u], _.Drawing.annotation.prototype.measure = function () {}, _.Drawing.annotation.prototype.render = function (A) {
    var E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j;
    if (E = "a", E += "lp", E += "h", E += "abetic", !this.ta && (L = this.stx.panels[this.panelName], !!L)) {
      if (N = this.stx.pixelFromTick(this.p0[0], L.chart), U = this.stx.pixelFromValueAdjusted(L, this.p0[0], this.p0[1]), A.font = this.fontString, A.textBaseline = "middle", B = N, O = U, R = this.w, H = this.h, z = this.getLineColor(), this.stem && (this.stem.d ? (W = this.stx.pixelFromTick(this.stem.t), Z = this.stx.pixelFromValueAdjusted(L, this.stem.t, this.stem.v), e.n1T(38), G = e.W6G(B, R, 2), e.E3R(38), X = e.W6G(O, H, 2)) : this.stem.x && (W = B, Z = O, B += this.stem.x, O += this.stem.y, e.E3R(38), G = e.W6G(B, R, 2), e.n1T(38), X = e.B3B(O, H, 2)), A.beginPath(), this.borderColor ? A.strokeStyle = this.borderColor : A.strokeStyle = z, A.moveTo(W, Z), A.lineTo(G, X), A.stroke()), ie = A.lineWidth, this.highlighted ? (this.stx.canvasColor("stx_annotation_highlight_bg", A), e.n1T(1), A.fillRect(e.B3B(ie, B), e.B3B(H, ie, 2, O, e.n1T(39)), e.W6G(2, R, ie, e.E3R(40)), e.W6G(2, H, ie, e.E3R(40)))) : this.fillColor ? (A.fillStyle = this.fillColor, e.E3R(41), A.fillRect(B, e.W6G(2, O, H), R, H)) : this.stem && (A.fillStyle = this.stx.containerColor, e.n1T(42), A.fillRect(B, e.B3B(O, "2", H), R, H)), this.borderColor && (j = "stx_", j += "highligh", j += "t_vector", A.beginPath(), A.strokeStyle = this.highlighted ? this.stx.getCanvasColor(j) : this.borderColor, e.E3R(1), A.rect(e.B3B(ie, B), e.W6G(H, ie, 2, O, e.E3R(39)), e.W6G(2, R, ie, e.n1T(40)), e.B3B(2, H, ie, e.E3R(40))), A.stroke()), this.highlighted ? this.stx.canvasColor("stx_annotation_highlight", A) : A.fillStyle = z, O += this.padding / 2, !this.ta) for (var J = 0; J < this.arr.length; J++) A.fillText(this.arr[J], B + this.padding, O - H / 2 + this.fontSize / 2), O += this.fontSize + 2;
      A.textBaseline = E;
    }
  }, _.Drawing.annotation.prototype.onChange = function (A) {}, _.Drawing.annotation.prototype.edit = function (A, E) {
    var L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne;
    if (L = this.stx.panels[this.panelName], !L || (N = this.stx.controls.annotationSave, U = this.stx.controls.annotationCancel, !N || !U)) return;
    B = this.stx, O = this.ta, B.editingAnnotation = !0, B.undisplayCrosshairs(), B.openDialog = "annotation";
    function le(re) {
      return e.L1$(), function (de) {
        var he, fe, pe, ge, ve, be, _e, ye, we, Te, Pe, Le, Be, Ue, Ke;
        if (de) switch (he = de.keyCode, he) {
          case 27:
            re.stx.undo();
            return;
        }
        fe = re.stx, pe = re.ta, ge = pe.value.split(`
`), ve = 0, fe.chart.context.font = re.fontString;
        for (var Je = 0; Je < ge.length; Je++) be = fe.chart.context.measureText(ge[Je]).width, be > ve && (ve = be);
        e.E3R(1);
        var $e = e.W6G(10, 11);
        e.E3R(10);
        var ke = e.W6G(9, 19, 7);
        _e = (ge.length + $e) * (re.fontSize + ke), ve < 50 && (ve = 50), e.E3R(31), pe.style.width = e.W6G("px", 30, ve), e.n1T(0), pe.style.height = e.B3B("px", _e), ye = parseInt(_.stripPX(pe.style.top), 10), we = _.stripPX(pe.style.left), ve = pe.clientWidth, _e = pe.clientHeight, we + ve + 100 < re.stx.chart.canvasWidth ? (Te = "p", Te += "x", Pe = "p", Pe += "x", e.n1T(0), N.style.top = e.W6G("px", ye), e.E3R(0), U.style.top = e.B3B("px", ye), e.E3R(43), N.style.left = e.W6G(Pe, we, 10, ve), e.n1T(44), U.style.left = e.B3B(ve, "60", we, Te, 0)) : ye + _e + 30 < re.stx.chart.canvasHeight ? (Le = "p", Le += "x", Be = "p", Be += "x", e.n1T(43), N.style.top = e.W6G("px", ye, 10, _e), e.E3R(43), U.style.top = e.W6G(Be, ye, 10, _e), e.E3R(0), N.style.left = e.B3B("px", we), e.n1T(45), U.style.left = e.W6G(48, Le, we, "50")) : (Ue = "p", Ue += "x", Ke = "p", Ke += "x", e.E3R(32), N.style.top = e.W6G(ye, Ke, 35), e.E3R(32), U.style.top = e.W6G(ye, "px", 35), e.n1T(0), N.style.left = e.W6G("px", we), e.E3R(31), U.style.left = e.B3B(Ue, 50, we));
      };
    }
    O || (R = "a", R += "bsolut", R += "e", H = "Enter ", H += "Text", z = "pla", z += "c", z += "ehold", z += "er", W = "w", W += "rap", G = "stx_annota", G += "tion", O = this.ta = document.createElement("TEXTAREA"), O.className = G, O.onkeyup = le(this), O.onmouseup = Q(B), O.setAttribute(W, "hard"), _.isIOS7or8 && O.setAttribute(z, H), B.chart.container.appendChild(O), O.style.position = R, O.style.width = "100px", O.style.height = "20px", O.value = this.text, _.touchDevice && (O.ontouchstart = function (re) {
      e.L1$(), re.stopPropagation();
    })), Z = this, O.oninput = function (re) {
      re.inputType != "historyUndo" && re.inputType != "historyRedo" && Z.onChange(re);
    }, O.style.font = this.fontString, this.color && (this.color == "transparent" || this.color == "auto" ? (X = getComputedStyle(O), X && _.isTransparent(X.backgroundColor) ? O.style.color = B.defaultColor : O.style.color = "#000") : O.style.color = this.color), ie = B.pixelFromTick(this.p0[0], L.chart);
    function ue(re) {
      return e.L1$(), function (de) {
        var he;
        e.L1$(), he = re.stx, he.editingAnnotation = !1, he.undo(), he.cancelTouchSingleClick = !0;
      };
    }
    if (j = B.pixelFromValueAdjusted(L, this.p0[0], this.p0[1]), O.style.left = ie + 140 < B.chart.canvasRight ? ie + "px" : B.chart.canvasRight - 200 + "px", O.style.top = j + 60 < B.chart.canvasHeight ? j - (isNaN(this.h) ? this.defaultHeight : this.h / 2) + "px" : j - 60 + "px", this.name == "callout") {
      e.n1T(46);
      var oe = e.W6G(14, 2, 22, 152);
      O.style.left = _.stripPX(O.style.left) - (isNaN(this.w) ? this.defaultWidth : this.w / oe) + "px";
    }
    _.safeClickTouch(N, ce(this)), _.safeClickTouch(U, ue(this)), le(this)(), N.style.display = "inline-block", U.style.display = "inline-block", E && (B.drawingSnapshot = B.exportDrawings(), this.hidden = !0, B.draw(), B.activeDrawing = this, _.ChartEngine.drawingLine = !0, A = B.chart.tempCanvas.context, B.chart.tempCanvas.style.display = "block", this.w = O.clientWidth, this.h = O.clientHeight, _.clearCanvas(A.canvas, B), this.render(A), this.edit(A)), O.focus();
    function ce(re) {
      return e.Z8b(), function (de) {
        var he;
        re.ta.value !== "" && (re.text = re.ta.value, he = re.stx, he.editingAnnotation = !1, re.adjust(), he.drawingSnapshot ? he.undoStamp(_.shallowClone(he.drawingSnapshot), he.exportDrawings()) : he.addDrawing(re), he.undo(), he.cancelTouchSingleClick = !0, he.changeOccurred("vector"));
      };
    }
    function Q(re) {
      return e.Z8b(), function (de) {
        e.Z8b(), re.manageTouchAndMouse && _.ChartEngine.drawingLine && re.mouseup(de);
      };
    }
    if (_.isAndroid && !_.is_chrome && !_.isFF) {
      this.priorBottom = B.chart.container.style.bottom, e.n1T(19), J = e.W6G(32, "400"), e.n1T(47);
      var ee = e.W6G(7, 6, 4, 96);
      ae = B.resolveY(j) + ee, ae > _.pageHeight() - J && (se = _.pageHeight() - ae, e.E3R(1), ne = e.W6G(se, J), e.n1T(0), B.chart.container.style.bottom = e.W6G("px", ne));
    }
  }, _.Drawing.annotation.prototype.click = function (A, E, L) {
    var N;
    if (!(this.stx.overXAxis || this.stx.overYAxis)) return N = this.stx.panels[this.panelName], this.copyConfig(), this.setPoint(0, E, L, N.chart), this.adjust(), this.edit(A), e.L1$(), !1;
  }, _.Drawing.annotation.prototype.reposition = function (A, E, L, N) {
    var U, B, O;
    E && (U = this.stx.panels[this.panelName], e.Z8b(), B = E.tick - L, O = E.value - N, this.setPoint(0, E.p0[0] - B, E.p0[1] - O, U.chart), this.render(A));
  }, _.Drawing.annotation.prototype.intersected = function (A, E, L) {
    var N, U, B, O, R, H, z;
    if (N = this.stx.panels[this.panelName], !this.p0) return null;
    U = this.stx.pixelFromTick(this.p0[0], N.chart), e.n1T(16);
    var W = e.W6G(6, 71, 12);
    e.E3R(48);
    var G = e.W6G(2, 2, 7, 0, 9);
    return B = this.stx.pixelFromValueAdjusted(N, this.p0[0], this.p0[W]) - this.h / G, O = U + this.w, e.L1$(), R = B + this.h, this.stem && this.stem.x && (U += this.stem.x, O += this.stem.x, B += this.stem.y, R += this.stem.y), H = this.stx.pixelFromTick(A, N.chart), z = this.stx.pixelFromValueAdjusted(N, A, E), H + L.r >= U && H - L.r <= O && z + L.r >= B && z - L.r <= R ? (this.highlighted = !0, {
      p0: _.clone(this.p0),
      tick: A,
      value: E
    }) : !1;
  }, _.Drawing.annotation.prototype.abort = function () {
    var A, E;
    A = this.stx.controls.annotationSave, E = this.stx.controls.annotationCancel, A && (A.style.display = "none"), E && (E.style.display = "none"), this.ta && this.stx.chart.container.removeChild(this.ta), this.ta = null, this.stx.openDialog = "", this.stx.showCrosshairs(), this.stx.editingAnnotation = !1, _.clearCanvas(this.stx.chart.tempCanvas, this.stx), _.isAndroid && !_.is_chrome && !_.isFF && (this.stx.chart.container.style.bottom = this.priorBottom), _.fixScreen();
  }, _.Drawing.annotation.prototype.reconstruct = function (A, E) {
    this.stx = A, this.color = E.col, this.panelName = E.pnl, this.d0 = E.d0, this.tzo0 = E.tzo0, this.v0 = E.v0, this.text = A.escapeOnSerialize ? decodeURIComponent(E.text) : E.text, this.stem = E.stem, e.Z8b(), this.borderColor = E.bc, this.fillColor = E.bg, this.lineWidth = E.lw, this.pattern = E.ptrn, this.font = _.replaceFields(E.fnt, {
      st: "style",
      sz: "size",
      wt: "weight",
      fl: "family"
    }), this.font || (this.font = {}), this.adjust();
  }, _.Drawing.annotation.prototype.serialize = function () {
    var A, E, L, N;
    return A = {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      d0: this.d0,
      tzo0: this.tzo0,
      v0: this.v0,
      text: this.stx.escapeOnSerialize ? encodeURIComponent(this.text) : this.text
    }, this.font && (E = "f", E += "l", L = "s", L += "t", N = _.removeNullValues(_.replaceFields(this.font, {
      style: L,
      size: "sz",
      weight: "wt",
      family: E
    })), _.isEmpty(N) || (A.fnt = N)), this.stem && (A.stem = {
      d: this.stem.d,
      v: this.stem.v,
      x: this.stem.x,
      y: this.stem.y
    }), this.borderColor && (A.bc = this.borderColor), e.Z8b(), this.fillColor && (A.bg = this.fillColor), this.lineWidth && (A.lw = this.lineWidth), this.pattern && (A.ptrn = this.pattern), A;
  }, _.Drawing.annotation.prototype.renderText = function () {
    var A, E, L, N, U, B;
    if (this.getFontString(), A = this.stx.panels[this.panelName], !!A) {
      this.arr = this.text.split(`
`), E = 0, this.stx.chart.context.font = this.fontString;
      for (var O = 0; O < this.arr.length; O++) L = this.stx.chart.context.measureText(this.arr[O]).width, L > E && (E = L);
      if (E === 0) {
        e.n1T(1);
        var R = e.W6G(34, 36);
        E = R * this.defaultWidth;
      }
      this.fontSize = _.stripPX(this.fontDef.size), e.E3R(49);
      var H = e.B3B(14, 119, 9, 0, 15);
      N = this.arr.length * (this.fontSize + H), _.touchDevice && (N += 5), e.Z8b(), this.w = E + this.padding * 2, e.n1T(50);
      var z = e.W6G(20, 13, 252, 18);
      this.h = N + this.padding * z, e.n1T(51);
      var W = e.W6G(53, 4, 184, 9);
      U = this.stx.pixelFromTick(this.p0["0" >> W], A.chart) + E, e.E3R(0);
      var G = e.B3B(1, 0);
      B = this.stx.pixelFromValueAdjusted(A, this.p0[0], this.p0[G]) + N, this.p1 = [this.stx.tickFromPixel(U, A.chart), this.stx.valueFromPixel(B, A)], this.stem && this.stem.d && (this.stem.t = this.stx.tickFromDate(this.stem.d, A.chart));
    }
  }, _.Drawing.annotation.prototype.adjust = function () {
    e.L1$();
    var A;
    A = this.stx.panels[this.panelName], A && (this.setPoint(0, this.d0, this.v0, A.chart), this.renderText());
  }, _.Drawing.segment = function () {
    var A;
    A = "s", A += "e", A += "gm", A += "ent", this.name = A;
  }, _.inheritsFrom(_.Drawing.segment, _.Drawing.BaseTwoPoint), _.Drawing.segment.prototype.render = function (A) {
    var E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le;
    if (E = "n", e.L1$(), E += "on", E += "e", L = this.stx.panels[this.panelName], !!L) {
      if (N = this.stx.pixelFromTick(this.p0[0], L.chart), U = this.stx.pixelFromTick(this.p1[0], L.chart), B = this.stx.pixelFromValueAdjusted(L, this.p0[0], this.p0[1]), O = this.stx.pixelFromValueAdjusted(L, this.p1[0], this.p1[1]), R = this.lineWidth, H = this.getLineColor(), z = {
        pattern: this.pattern,
        lineWidth: R
      }, z.pattern == E && (z.pattern = "solid"), this.stx.plotLine(N, U, B, O, H, this.name, A, L, z), this.axisLabel && !this.repositioner) {
        if (W = "ver", W += "tical", G = "h", G += "orizontal", this.name == G) this.stx.endClip(), Z = this.p0[1], L.chart.transformFunc && (Z = L.chart.transformFunc(this.stx, L.chart, Z)), L.yAxis.priceFormatter ? Z = L.yAxis.priceFormatter(this.stx, L, Z) : Z = this.stx.formatYAxisPrice(Z, L), this.stx.createYAxisLabel(L, Z, B, H), this.stx.startClip(L.name);else if (this.name == W && this.p0[0] >= 0 && !this.stx.chart.xAxis.noDraw) {
          if (X = this.stx.dateFromTick(this.p0[0], L.chart, !0), _.ChartEngine.isDailyInterval(this.stx.layout.interval)) e.E3R(2), X.setHours(e.W6G(1, "0"), 0, e.B3B(64, "0", e.E3R(19)), e.W6G(0, "0", e.E3R(37)));else {
            e.E3R(16);
            var ue = e.W6G(1020, 1040, 2);
            j = X.getSeconds() * ue + X.getMilliseconds(), V.Date && this.stx.displayZone && (ie = new V.Date(X.getTime(), this.stx.displayZone), X = new Date(ie.getFullYear(), ie.getMonth(), ie.getDate(), ie.getHours(), ie.getMinutes()), X = new Date(X.getTime() + j));
          }
          if (J = _.mmddhhmm(_.yyyymmddhhmm(X)), L.chart.xAxis.formatter) J = L.chart.xAxis.formatter(X, this.name, null, null, J);else if (this.stx.internationalizer) {
            if (X.getHours() !== 0 || X.getMinutes() !== 0) {
              ae = this.stx.internationalizer.monthDay.format(X), e.n1T(52);
              var oe = e.B3B(8, 364016, 3, 124540, 1);
              e.E3R(31);
              var ce = e.B3B(2553, 13, 135);
              ae += (oe >= ce ? " " : "B") + this.stx.internationalizer.hourMinute.format(X);
            } else ae = this.stx.internationalizer.yearMonthDay.format(X);
            J = ae;
          }
          this.stx.endClip(), this.stx.createXAxisLabel({
            panel: L,
            txt: J,
            x: N,
            backgroundColor: H,
            color: null,
            pointed: !0,
            padding: 2
          }), this.stx.startClip(L.name);
        }
      }
      this.highlighted && this.name != "horizontal" && this.name != "vertical" && (se = "p", se += "0", ne = this.highlighted == se, le = this.highlighted == "p1", this.littleCircle(A, N, B, ne), this.littleCircle(A, U, O, le));
    }
  }, _.Drawing.segment.prototype.abort = function () {
    var A, E, L;
    A = 620935115, E = 41079425, L = 2;
    for (var N = 1; e.Q_(N.toString(), N.toString().length, 4240) !== A; N++) this.stx.setMeasure(null, null, null, null, !1), L += 2;
    e.Q_(L.toString(), L.toString().length, 97351) !== E && this.stx.setMeasure(1, 1, 1, 1, !0);
  }, _.Drawing.segment.prototype.intersected = function (A, E, L) {
    var N, U, B, O, R;
    if (N = "vertica", N += "l", !this.p0 || !this.p1) return null;
    if (U = this.name, U != "horizontal" && U != "vertical" && U != "gartley") {
      B = {
        0: this.p0,
        1: this.p1
      };
      for (var H in B) if (this.pointIntersection(B[H][0], B[H][1], L)) return e.n1T(0), this.highlighted = e.B3B(H, "p"), {
        action: "drag",
        point: "p" + H
      };
    }
    return (U == "horizontal" || U == N) && (U = "line"), O = this.lineIntersection(A, E, L, U), O ? (R = "m", R += "o", R += "ve", this.highlighted = !0, {
      action: R,
      p0: _.clone(this.p0),
      p1: _.clone(this.p1),
      tick: A,
      value: E
    }) : null;
  }, _.Drawing.segment.prototype.configs = ["color", l, h], _.Drawing.segment.prototype.copyConfig = function (A) {
    var E;
    E = "n", E += "one", _.Drawing.copyConfig(this, A), e.Z8b(), this.pattern == E && this.configs.indexOf("fillColor") == -1 && (this.pattern = "solid");
  }, _.Drawing.segment.prototype.reconstruct = function (A, E) {
    e.Z8b(), this.stx = A, this.color = E.col, this.panelName = E.pnl, this.pattern = E.ptrn, this.lineWidth = E.lw, this.d0 = E.d0, this.d1 = E.d1, this.tzo0 = E.tzo0, this.tzo1 = E.tzo1, this.v0 = E.v0, this.v1 = E.v1, this.adjust();
  }, _.Drawing.segment.prototype.serialize = function () {
    return e.L1$(), {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      ptrn: this.pattern,
      lw: this.lineWidth,
      d0: this.d0,
      d1: this.d1,
      tzo0: this.tzo0,
      tzo1: this.tzo1,
      v0: this.v0,
      v1: this.v1
    };
  }, _.Drawing.line = function () {
    var A;
    A = "l", A += "in", A += "e", this.name = A;
  }, _.inheritsFrom(_.Drawing.line, _.Drawing.segment), _.Drawing.line.prototype.dragToDraw = !1, _.Drawing.line.prototype.calculateOuterSet = function (A) {
    var E, L, N;
    if (!(this.p0[0] == this.p1[0] || this.p0[1] == this.p1[1] || _.ChartEngine.isDailyInterval(this.stx.layout.interval))) {
      E = {
        x0: this.p0[0],
        y0: this.p0[1],
        x1: this.p1[0],
        y1: this.p1[1]
      }, E.x0 > E.x1 && (E = {
        x0: this.p1[0],
        y0: this.p1[1],
        x1: this.p0[0],
        y1: this.p0[1]
      }), e.n1T(0);
      var U = e.B3B(950, 50);
      L = E.x0 - U, e.n1T(53);
      var B = e.B3B(14, 14000, 14, 194986);
      N = E.x1 + B, e.L1$(), this.v0B = _.yIntersection(E, L), this.v1B = _.yIntersection(E, N), this.d0B = this.stx.dateFromTick(L, A.chart), this.d1B = this.stx.dateFromTick(N, A.chart);
    }
  }, _.Drawing.line.prototype.click = function (A, E, L) {
    var N;
    if (N = this.stx.panels[this.panelName], e.Z8b(), !!N) return this.copyConfig(), this.penDown ? this.accidentalClick(E, L) ? this.dragToDraw : (e.E3R(19), this.setPoint(e.B3B(32, "1"), E, L, N.chart), this.calculateOuterSet(N), this.penDown = !1, !0) : (this.setPoint(0, E, L, N.chart), this.penDown = !0, !1);
  }, _.Drawing.line.prototype.reconstruct = function (A, E) {
    this.stx = A, this.color = E.col, this.panelName = E.pnl, this.pattern = E.ptrn, this.lineWidth = E.lw, this.v0 = E.v0, this.v1 = E.v1, this.d0 = E.d0, this.d1 = E.d1, this.tzo0 = E.tzo0, this.tzo1 = E.tzo1, E.d0B && (this.d0B = E.d0B, this.d1B = E.d1B, this.v0B = E.v0B, this.v1B = E.v1B), this.adjust();
  }, _.Drawing.line.prototype.serialize = function () {
    var A;
    return A = {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      ptrn: this.pattern,
      lw: this.lineWidth,
      d0: this.d0,
      d1: this.d1,
      tzo0: this.tzo0,
      tzo1: this.tzo1,
      v0: this.v0,
      v1: this.v1
    }, this.d0B && (A.d0B = this.d0B, A.d1B = this.d1B, A.v0B = this.v0B, A.v1B = this.v1B), e.Z8b(), A;
  }, _.Drawing.line.prototype.adjust = function () {
    e.Z8b();
    var A, E, L, N;
    if (A = this.stx.panels[this.panelName], !!A && (this.setPoint(0, this.d0, this.v0, A.chart), this.setPoint(1, this.d1, this.v1, A.chart), _.ChartEngine.isDailyInterval(this.stx.layout.interval) && this.d0B)) {
      this.setPoint(0, this.d0B, this.v0B, A.chart), e.E3R(21), E = -e.B3B("1829948246", 64), L = -423646143, N = 2;
      for (var U = 1; e.o0(U.toString(), U.toString().length, 82065) !== E; U++) this.setPoint(0, this.d1B, this.v1B, A.chart), e.n1T(1), N += e.B3B(0, "2");
      e.Q_(N.toString(), N.toString().length, 41088) !== L && this.setPoint(1, this.d1B, this.v1B, A.chart);
    }
  }, _.Drawing.horizontal = function () {
    this.name = "horizontal";
  }, _.inheritsFrom(_.Drawing.horizontal, _.Drawing.segment), _.Drawing.horizontal.prototype.dragToDraw = !1, _.Drawing.horizontal.prototype.measure = function () {}, _.Drawing.horizontal.prototype.click = function (A, E, L) {
    var N;
    if (N = this.stx.panels[this.panelName], e.L1$(), !!N) return this.copyConfig(), this.setPoint(0, E, L, N.chart), !0;
  }, _.Drawing.horizontal.prototype.intersected = function (A, E, L) {
    var N, U, B;
    return this.lineIntersection(A, E, L, "line") ? (N = this.stx, U = N.chart.dataSet.length, e.E3R(21), B = this.p0[e.B3B("1", 0)], this.highlighted = !0, {
      action: "move",
      p0: [U - 2, B],
      p1: [U - 1, B],
      tick: A,
      value: E
    }) : null;
  }, _.Drawing.horizontal.prototype.reconstruct = function (A, E) {
    this.stx = A, this.color = E.col, this.panelName = E.pnl, this.pattern = E.ptrn, this.lineWidth = E.lw, this.v0 = E.v0, this.d0 = E.d0, this.tzo0 = E.tzo0, this.axisLabel = E.al, this.adjust();
  }, _.Drawing.horizontal.prototype.serialize = function () {
    var A;
    return e.Z8b(), A = {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      ptrn: this.pattern,
      lw: this.lineWidth,
      v0: this.v0,
      d0: this.d0,
      tzo0: this.tzo0,
      al: this.axisLabel
    }, A;
  }, _.Drawing.horizontal.prototype.adjust = function () {
    var A;
    if (A = this.stx.panels[this.panelName], !!A) {
      this.setPoint(0, this.d0, this.v0, A.chart), e.n1T(54);
      var E = e.B3B(14, 20, 14, 1090, 119);
      e.Z8b(), e.n1T(19), this.p1 = [this.p0[0] + E, this.p0[e.B3B(64, "1")]];
    }
  }, _.Drawing.horizontal.prototype.configs = [o, s, "pattern", "axisLabel"], _.Drawing.vertical = function () {
    var A;
    e.L1$(), A = "ve", A += "rt", A += "ical", this.name = A;
  }, _.inheritsFrom(_.Drawing.vertical, _.Drawing.horizontal), _.Drawing.vertical.prototype.measure = function () {}, _.Drawing.vertical.prototype.intersected = _.Drawing.segment.prototype.intersected, _.Drawing.vertical.prototype.adjust = function () {
    var A, E, L, N;
    if (A = this.stx.panels[this.panelName], !!A) {
      this.setPoint(0, this.d0, this.v0, A.chart), E = -760042612, L = 40875000, N = 2;
      for (var U = 1; e.o0(U.toString(), U.toString().length, 97853) !== E; U++) {
        e.E3R(1);
        var B = e.B3B(13, 17);
        e.E3R(55);
        var O = e.W6G(7, 0, 3, 7);
        this.p1 = [this.p0[8], this.p0[B] - O], e.n1T(2), N += e.B3B(1, "2");
      }
      if (e.o0(N.toString(), N.toString().length, 22112) !== L) {
        e.n1T(56);
        var R = e.W6G(9, 2, 9, 18, 37);
        e.n1T(55);
        var H = e.W6G(1, 9, 7, 15);
        e.n1T(29), this.p1 = [this.p0[e.B3B(0, "0")], this.p0[R] + H];
      }
    }
  }, _.Drawing.measure = function () {
    this.name = "measure";
  }, _.inheritsFrom(_.Drawing.measure, _.Drawing.segment), _.Drawing.measure.prototype.click = function (A, E, L) {
    return e.L1$(), this.copyConfig(), this.penDown ? (this.stx.undo(), this.penDown = !1, !0) : (this.p0 = [E, L], this.penDown = !0, !1);
  }, _.Drawing.rectangle = function () {
    e.L1$(), this.name = "rectangle";
  }, _.inheritsFrom(_.Drawing.rectangle, _.Drawing.BaseTwoPoint), _.Drawing.rectangle.prototype.render = function (A) {
    e.L1$();
    var E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se;
    E = "a", E += "u", E += "t", E += "o", L = this.stx.panels[this.panelName], L && (N = this.stx.pixelFromTick(this.p0[0], L.chart), U = this.stx.pixelFromTick(this.p1[0], L.chart), B = this.stx.pixelFromValueAdjusted(L, this.p0[0], this.p0[1]), O = this.stx.pixelFromValueAdjusted(L, this.p1[0], this.p1[1]), R = Math.round(Math.min(N, U)) + 0.5, H = Math.min(B, O), z = Math.max(N, U) - R, W = Math.max(B, O) - H, G = this.color, this.highlighted && (Z = "stx_", Z += "h", Z += "ighlight_vector", G = this.stx.getCanvasColor(Z)), X = this.fillColor, X && !_.isTransparent(X) && X != E && (A.beginPath(), A.rect(R, H, z, W), A.fillStyle = X, A.globalAlpha = 0.2, A.fill(), A.closePath(), A.globalAlpha = 1), ie = {
      pattern: this.pattern,
      lineWidth: this.lineWidth
    }, this.highlighted && ie.pattern == "none" && (j = "sol", j += "i", j += "d", ie.pattern = j, ie.lineWidth == 0.1 && (e.E3R(1), ie.lineWidth = e.B3B(0, "1"))), this.stx.plotLine(N, U, B, B, G, "segment", A, L, ie), e.E3R(1), this.stx.plotLine(U, U, e.W6G(0.5, B), e.B3B(0.5, O, e.n1T(0)), G, "segment", A, L, ie), this.stx.plotLine(U, N, O, O, G, "segment", A, L, ie), e.E3R(0), this.stx.plotLine(N, N, e.B3B(0.5, O), e.W6G(0.5, B, e.E3R(1)), G, "segment", A, L, ie), this.highlighted && (J = "p", J += "0", ae = this.highlighted == J, se = this.highlighted == "p1", this.littleCircle(A, N, B, ae), this.littleCircle(A, U, O, se)));
  }, _.Drawing.rectangle.prototype.intersected = function (A, E, L) {
    var N;
    if (!this.p0 || !this.p1) return null;
    N = {
      0: this.p0,
      1: this.p1
    };
    for (var U in N) if (this.pointIntersection(N[U][0], N[U][1], L)) return e.E3R(0), this.highlighted = e.W6G(U, "p"), {
      action: "drag",
      point: "p" + U
    };
    return this.boxIntersection(A, E, L) ? (this.highlighted = !0, {
      action: "move",
      p0: _.clone(this.p0),
      p1: _.clone(this.p1),
      tick: A,
      value: E
    }) : null;
  }, _.Drawing.rectangle.prototype.configs = [a, i, r, n], _.Drawing.rectangle.prototype.reconstruct = function (A, E) {
    this.stx = A, this.color = E.col, this.fillColor = E.fc, this.panelName = E.pnl, this.pattern = E.ptrn, this.lineWidth = E.lw, this.d0 = E.d0, this.d1 = E.d1, this.tzo0 = E.tzo0, this.tzo1 = E.tzo1, this.v0 = E.v0, this.v1 = E.v1, this.adjust();
  }, _.Drawing.rectangle.prototype.serialize = function () {
    return e.L1$(), {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      fc: this.fillColor,
      ptrn: this.pattern,
      lw: this.lineWidth,
      d0: this.d0,
      d1: this.d1,
      tzo0: this.tzo0,
      tzo1: this.tzo1,
      v0: this.v0,
      v1: this.v1
    };
  }, _.Drawing.shape = function () {
    this.name = "shape", this.radians = 0, this.a = 0, this.rotating = !1, this.textMeasure = !1, this.configurator = "shape", this.dimension = [0, 0], this.points = [];
  }, _.inheritsFrom(_.Drawing.shape, _.Drawing.BaseTwoPoint), _.Drawing.shape.prototype.setRotationOnInitialDraw = !1, _.Drawing.shape.prototype.measure = function () {}, _.Drawing.shape.prototype.render = function (A) {
    var E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce, Q, ee, re;
    if (this.points.length && (E = this.stx.panels[this.panelName], !!E)) {
      if (L = this.stx.pixelFromTick(this.p0[0], E.chart), N = this.stx.pixelFromValueAdjusted(E, this.p0[0], this.p0[1]), this.p1) {
        if (U = this.stx.pixelFromTick(this.p1[0], E.chart), B = this.stx.pixelFromValueAdjusted(E, this.p1[0], this.p1[1]), A.globalAlpha = 0.5, A.fillStyle = "#000000", this.rotating) {
          if (e.E3R(57), this.radians = Math.atan(e.W6G(N, L, B, U)), U < L) this.radians += Math.PI;else if (B < N) {
            e.E3R(12);
            var de = e.W6G(14, 44, 3);
            this.radians += de * Math.PI;
          }
          e.E3R(58);
          var he = e.B3B(40, 20, 2, 4, 17);
          e.E3R(0);
          var fe = e.W6G(4, 1);
          this.a = parseInt((this.radians * 36 / Math.PI).toFixed(0), he) * fe, this.a %= 360, this.radians = this.a * Math.PI / 180, this.textMeasure && A.fillText(this.a + "\xB0", U + 10, B + 10);
        } else this.penDown && (this.sx = Math.max(1, parseFloat(Math.abs(2 * (U - L) / this.dimension[0]).toFixed(1))), U < L && (e.n1T(29), this.sx *= -e.B3B(0, "1")), this.sy = Math.max(1, parseFloat(Math.abs(2 * (B - N) / this.dimension[1]).toFixed(1))), B < N && (e.n1T(37), this.sy *= -e.B3B(0, "1")), this.textMeasure && A.fillText(this.sx + "x," + this.sy + "x", U + this.sx + 5, B + this.sy + 5));
        A.globalAlpha = 1;
      }
      typeof this.sx > "u" && (this.sx = this.sy = 1), O = this.lineWidth, O || (O = 1.1), R = {
        pattern: this.pattern,
        lineWidth: O
      }, this.highlighted && R.pattern == "none" && (R.pattern = "solid", R.lineWidth == 0.1 && (R.lineWidth = 1)), H = this.color, (H == "auto" || _.isTransparent(H)) && (H = this.stx.defaultColor), this.highlighted && (H = this.stx.getCanvasColor("stx_highlight_vector"), O == 0.1 && (O = 1.1)), z = this.fillColor, e.E3R(51);
      var pe = e.W6G(18, 19, 511, 9);
      for (O /= Math.abs(this.sx * this.sy) * pe / (Math.abs(this.sx) + Math.abs(this.sy)), A.save(), A.translate(L, N), A.rotate(this.radians), A.scale(this.sx, E.yAxis.flipped ? -this.sy : this.sy), Z = {
        x: (this.dimension[0] - 1) / 2,
        y: (this.dimension[1] - 1) / 2
      }, W = 0; W < this.points.length; W++) {
        for (A.beginPath(), G = 0; G < this.points[W].length; G++) this.points[W][G] == "M" ? (X = this.points[W][++G] - Z.x, ie = this.points[W][++G] - Z.y, A.moveTo(X, ie)) : this.points[W][G] == "L" ? (X = this.points[W][++G] - Z.x, ie = this.points[W][++G] - Z.y, A.lineTo(X, ie)) : this.points[W][G] == "Q" ? (j = this.points[W][++G] - Z.x, ae = this.points[W][++G] - Z.y, X = this.points[W][++G] - Z.x, ie = this.points[W][++G] - Z.y, A.quadraticCurveTo(j, ae, X, ie)) : this.points[W][G] == "B" && (j = this.points[W][++G] - Z.x, ae = this.points[W][++G] - Z.y, J = this.points[W][++G] - Z.x, se = this.points[W][++G] - Z.y, X = this.points[W][++G] - Z.x, ie = this.points[W][++G] - Z.y, A.bezierCurveTo(j, ae, J, se, X, ie));
        A.closePath(), z && !_.isTransparent(z) && z != "auto" && (A.fillStyle = z, A.fill()), H && this.pattern != "none" && (A.strokeStyle = H, A.lineWidth = O, A.setLineDash && (A.setLineDash(_.borderPatternToArray(O, this.pattern)), A.lineDashOffset = 0), A.stroke());
      }
      if (A.restore(), A.save(), A.translate(L, N), A.rotate(this.radians), this.highlighted) ne = "#0000", ne += "00", le = "p", le += "1", ue = this.highlighted == "p0", oe = this.highlighted == le, ce = this.highlighted == "p2", this.littleCircle(A, 0, 0, ue), this.mover(A, 0, 0, ue), this.littleCircle(A, this.sx * this.dimension[0] / 2, this.sy * this.dimension[1] / 2, oe), this.resizer(A, this.sx * this.dimension[0] / 2, this.sy * this.dimension[1] / 2, oe), this.littleCircle(A, this.sx * this.dimension[0] / 2, 0, ce), this.rotator(A, this.sx * this.dimension[0] / 2, 0, ce), A.globalAlpha = 0.5, A.fillStyle = ne, this.textMeasure && (A.fillText(this.sx + "x," + this.sy + "x", this.sx * this.dimension[0] / 2 + 12, this.sy * this.dimension[1] / 2 + 5), A.fillText(this.a + "\xB0", this.sx * this.dimension[0] / 2 + 12, 5)), A.globalAlpha = 1;else if (this.penDown) if (this.rotating) {
        Q = -1914562917, e.n1T(37), ee = -e.W6G(0, "1883689603"), re = 2;
        for (var ge = 1; e.Q_(ge.toString(), ge.toString().length, 11666) !== Q; ge++) this.rotator(A, this.sx / this.dimension[1] + 0, 4, !1), e.n1T(1), re += e.W6G(0, "2");
        e.Q_(re.toString(), re.toString().length, 93108) !== ee && this.rotator(A, this.sx / this.dimension[1] + 0, 4, !1), this.rotator(A, this.sx * this.dimension[0] / 2, 0, !0);
      } else this.resizer(A, this.sx * this.dimension[0] / 2, this.sy * this.dimension[1] / 2, !0);
      A.restore();
    }
  }, _.Drawing.shape.prototype.reposition = function (A, E, L, N) {
    var U, B, O, R, H, z, W, G, Z;
    if (U = "m", U += "ov", U += "e", !!E) {
      if (B = this.stx.panels[this.panelName], E.action == U) O = E.tick - L, R = E.value - N, this.setPoint(0, E.p0[0] - O, E.p0[1] - R, B.chart), this.render(A);else if (H = "rotat", H += "e", z = this.stx.pixelFromTick(this.p0[0], B.chart), W = this.stx.pixelFromValueAdjusted(B, this.p0[0], this.p0[1]), G = this.stx.pixelFromTick(L, B.chart), Z = this.stx.pixelFromValueAdjusted(B, L, N), E.action == "scale") this[E.point] = [L, N], this.sx = parseFloat((((G - z) * Math.cos(this.radians) + (Z - W) * Math.sin(this.radians)) / (this.dimension[0] / 2)).toFixed(1)), Math.abs(this.sx) < 1 && (this.sx /= Math.abs(this.sy)), this.sy = parseFloat((((Z - W) * Math.cos(this.radians) - (G - z) * Math.sin(this.radians)) / (this.dimension[1] / 2)).toFixed(1)), Math.abs(this.sy) < 1 && (this.sy /= Math.abs(this.sy)), this.render(A);else if (E.action == H) {
        if (this[E.point] = [L, N], e.n1T(57), this.radians = Math.atan(e.W6G(W, z, Z, G)), G < z) this.radians += Math.PI;else if (Z < W) {
          e.n1T(55);
          var X = e.W6G(14, 0, 3, 14);
          this.radians += X * Math.PI;
        }
        e.E3R(59);
        var ie = e.W6G(1, 10, 200, 20, 220);
        if (this.a = parseInt((this.radians * 36 / Math.PI).toFixed(0), ie) * 5, this.sx < 0) {
          e.E3R(60);
          var j = e.B3B(190, 18, 10, 18);
          this.a = this.a + j;
        }
        this.a %= 360, e.E3R(31);
        var J = e.W6G(147, 3, 30);
        this.radians = this.a * Math.PI / J, this.render(A);
      }
    }
  }, _.Drawing.shape.prototype.intersected = function (A, E, L) {
    var N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le;
    if (!this.p0) return null;
    if (this.stx.repositioningDrawing == this && this.stx.repositioningDrawing.repositioner) return this.stx.repositioningDrawing.repositioner;
    N = this.stx.panels[this.panelName], U = this.stx.pixelFromTick(this.p0[0], N.chart), B = this.stx.pixelFromValueAdjusted(N, this.p0[0], this.p0[1]), O = this.stx.pixelFromTick(A, N.chart), R = this.stx.pixelFromValueAdjusted(N, A, E), O -= U, R -= B, H = R, z = O, O = Math.cos(this.radians) * z + Math.sin(this.radians) * H, R = Math.cos(this.radians) * H - Math.sin(this.radians) * z, O /= this.sx, R /= this.sy, this.padding = _.ensureDefaults(this.padding || {}, {
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    }), W = this.padding.right + this.padding.left, G = this.padding.bottom + this.padding.top, Z = Math.pow(_.touchDevice ? 25 : 5 + this.littleCircleRadius(), 2), X = Math.abs(Z / (this.sx * this.sy)), ie = 3, e.n1T(1);
    var ue = e.W6G(3, 4);
    e.E3R(61);
    var oe = e.B3B(11, 2, 6, 5);
    e.E3R(62);
    var ce = e.B3B(1, 3, 9, 14, 12);
    e.n1T(63);
    var Q = e.W6G(7, 12, 23, 16);
    e.E3R(64);
    var ee = e.B3B(8, 3, 3, 10);
    e.n1T(46);
    var re = e.W6G(7, 12, 24, 12);
    e.E3R(20);
    var de = e.B3B(18, 6, 10, 0);
    j = Math.pow((this.dimension[0] - W + ie) / 2, 2) + Math.pow((this.dimension[ue] - G + ie) / oe, "2" * ce) > Math.pow(O - W / Q, ee) + Math.pow(R - G / re, de), e.n1T(0);
    var he = e.W6G(2, 0);
    e.n1T(65);
    var fe = e.W6G(18, 21, 13, 6, 20);
    J = (Z - (Math.pow(O * this.sx, he) + Math.pow(R * this.sy, fe))) / Math.abs(this.sx * this.sy), e.n1T(66);
    var pe = e.W6G(1, 2, 4);
    e.n1T(51);
    var ge = e.W6G(105, 7, 737, 14);
    e.n1T(25), e.Z8b();
    var ve = e.B3B(1, 10, 3, 8);
    e.E3R(1);
    var be = e.W6G(6, 8);
    e.E3R(67);
    var _e = e.W6G(12, 17, 1, 14, 12);
    ae = X - Math.pow(O - this.dimension[0] / pe, "2" >> ge) - Math.pow(R - this.dimension[ve] / be, _e), e.n1T(63);
    var ye = e.W6G(20, 7, 6, 17);
    e.E3R(18);
    var we = e.W6G(1, 3);
    e.n1T(68);
    var Te = e.W6G(4, 19, 20, 0, 14);
    return se = X - Math.pow(O - this.dimension[0] / ye, we) - Math.pow(R, Te), j ? ae >= se && ae >= J && ae > -1 ? (this.highlighted = "p1", {
      action: "scale"
    }) : se >= ae && se >= J && se > -1 ? (ne = "r", ne += "otat", ne += "e", le = "p", le += "2", this.highlighted = le, {
      action: ne
    }) : (this.highlighted = J > -1 ? "p0" : !0, {
      action: "move",
      p0: _.clone(this.p0),
      tick: A,
      value: E
    }) : null;
  }, _.Drawing.shape.prototype.configs = [t, "fillColor", "lineWidth", "pattern"], _.Drawing.shape.prototype.littleCircleRadius = function () {
    return 3;
  }, _.Drawing.shape.prototype.click = function (A, E, L) {
    var N;
    return this.points.length ? (this.copyConfig(), N = this.stx.panels[this.panelName], this.penDown ? (this.setPoint(1, E, L, N.chart), this.rotating || !this.setRotationOnInitialDraw ? (this.penDown = !1, this.rotating = !1, !0) : (this.rotating = !0, !1)) : (this.setPoint(0, E, L, N.chart), this.penDown = !0, !1)) : !1;
  }, _.Drawing.shape.prototype.adjust = function () {
    var A, E, L;
    if (A = this.stx.panels[this.panelName], !!A) {
      E = this.name + "_v" + (this.version || 0), _.Drawing[E] && (L = new _.Drawing[E](), this.name = L.name, this.dimension = L.dimension, this.padding = L.padding, this.points = L.points, this.version = L.version), this.setPoint(0, this.d0, this.v0, A.chart), e.E3R(18);
      var N = e.W6G(10, 15);
      e.n1T(16);
      var U = e.W6G(25, 364, 16);
      this.radians = Math.round(this.a / N) * Math.PI / U;
    }
  }, _.Drawing.shape.prototype.reconstruct = function (A, E) {
    this.stx = A, e.Z8b(), this.color = E.col, this.fillColor = E.fc, this.panelName = E.pnl, this.pattern = E.ptrn, this.lineWidth = E.lw, this.d0 = E.d0, this.v0 = E.v0, this.tzo0 = E.tzo0, this.a = E.a, this.sx = E.sx, this.sy = E.sy, this.version = E.ver, this.adjust();
  }, _.Drawing.shape.prototype.serialize = function () {
    return e.Z8b(), {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      fc: this.fillColor,
      ptrn: this.pattern,
      lw: this.lineWidth,
      d0: this.d0,
      v0: this.v0,
      tzo0: this.tzo0,
      a: this.a,
      sx: this.sx,
      sy: this.sy,
      ver: this.version
    };
  }, _.Drawing.arrow = function () {
    e.L1$(), this.name = "arrow", e.E3R(19), this.version = e.B3B(32, "1"), this.dimension = [11, 22], this.padding = {
      left: 0,
      right: 0,
      top: 11,
      bottom: 0
    }, e.E3R(29), this.points = [["M", e.W6G(0, "3"), 21, "L", 7, 21, "L", 7, 16, "L", 10, 16, "L", e.W6G(1, "5", e.n1T(2)), 11, "L", 0, 16, "L", 3, 16, "L", 3, 21]];
  }, _.inheritsFrom(_.Drawing.arrow, _.Drawing.shape), _.Drawing.getDrawingToolList = function (A) {
    var E, L;
    E = {}, L = {
      arrow_v0: !0,
      BaseTwoPoint: !0,
      fibonacci: !0,
      shape: !0
    }, _.extend(L, A);
    for (var N in _.Drawing) !L[N] && _.Drawing[N].prototype.render && (E[new _.Drawing[N]().name] = N);
    return E;
  };
};
xa = q => {
  var e, t;
  e = "undefi", e += "ne", e += "d", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.EaseMachine = function (n, r, i, a) {
    this.fc = n, this.ms = r, (i || i === 0) && this.reset(i, a);
  }, t.EaseMachine.prototype.reset = function (n, r) {
    var i;
    i = "o", i += "b", i += "ject", !n && n !== 0 && (n = this.currentValues), this.hasCompleted = !1, this.running = !1, te.L1$(), this.okayToRun = !0, te.E3R(69), this.useNameValuePairs = te.B3B(i, typeof r), this.startTime = Date.now(), this.useNameValuePairs ? (this.startValues = n, this.endValues = r) : (this.startValues = {
      default: n
    }, this.endValues = {
      default: r
    }), this.changeValues = {}, this.currentValues = {};
    for (var a in this.startValues) this.changeValues[a] = this.endValues[a] - this.startValues[a];
  }, te.Z8b(), t.EaseMachine.prototype.next = function () {
    var n;
    n = Date.now(), n >= this.startTime + this.ms && (n = this.startTime + this.ms, this.hasCompleted = !0, this.running = !1), this.currentValues = {};
    for (var r in this.changeValues) this.currentValues[r] = this.fc(n - this.startTime, this.startValues[r], this.changeValues[r], this.ms);
    return this.useNameValuePairs ? this.currentValues : this.currentValues.default;
  }, t.EaseMachine.prototype.hasCompleted = !0, t.EaseMachine.prototype.run = function (n, r, i, a) {
    var s;
    te.Z8b(), this.afid && cancelAnimationFrame(this.afid), r || r === 0 ? this.reset(r, i) : (i || i === 0) && this.reset(this.currentValues, i);
    function o() {
      var h;
      s.afid = null, s.okayToRun && (h = s.next(), n(h), !s.hasCompleted && (s.afid = requestAnimationFrame(o)));
    }
    s = this, this.running = !0, a ? this.afid = requestAnimationFrame(o) : o();
  }, t.EaseMachine.prototype.stop = function () {
    return this.afid && cancelAnimationFrame(this.afid), this.afid = null, this.okayToRun = !1, this.hasCompleted = !0, this.running = !1, typeof this.useNameValuePairs > "u" ? {} : this.useNameValuePairs ? this.currentValues : this.currentValues.default;
  }, t.ChartEngine.prototype.animations.zoom.isStub && (t.ChartEngine.prototype.animations.zoom = new t.EaseMachine(Math.easeOutCubic, 400));
};
va = q => {
  var e, t;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, t = function () {
    var n = te,
      r,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I;
    r = "\\";
    function v() {
      this.success = !1, this.errormsg = "", this.expression = "", this.pos = 0, this.tokennumber = 0, this.tokenprio = 0, this.tokenindex = 0, this.tmpprio = 0, this.ops1 = {
        sin: Math.sin,
        cos: Math.cos,
        tan: Math.tan,
        asin: Math.asin,
        acos: Math.acos,
        atan: Math.atan,
        sinh: H,
        cosh: se,
        tanh: ue,
        asinh: S,
        acosh: N,
        atanh: A,
        sqrt: Math.sqrt,
        log: Math.log,
        lg: L,
        log10: L,
        abs: Math.abs,
        ceil: Math.ceil,
        floor: Math.floor,
        round: Math.round,
        trunc: D,
        "-": U,
        exp: Math.exp
      }, this.ops2 = {
        "+": le,
        "-": P,
        "*": X,
        "/": G,
        "%": _,
        "^": Math.pow,
        ",": O,
        "||": ce,
        "==": W,
        "!=": ie,
        ">": ae,
        "<": B,
        ">=": w,
        "<=": j,
        and: R,
        or: V
      }, this.functions = {
        random: oe,
        fac: T,
        min: Math.min,
        max: Math.max,
        hypot: F,
        pyt: F,
        pow: Math.pow,
        atan2: Math.atan2,
        if: Z
      }, this.consts = {
        E: Math.E,
        PI: Math.PI
      };
    }
    function S(Q) {
      return Math.asinh ? Math.asinh(Q) : Q === -1 / 0 ? Q : Math.log(Q + Math.sqrt(Q * Q + 1));
    }
    function w(Q, ee) {
      return n.n1T(70), n.W6G(Q, ee);
    }
    function T(Q) {
      var ee;
      for (n.Z8b(), Q = Math.floor(Q), ee = Q; Q > 1;) n.E3R(71), ee = n.W6G(ee, --Q);
      return ee;
    }
    r += "\\", i = "\\";
    function D(Q) {
      return Math.trunc ? Math.trunc(Q) : Q < 0 ? Math.ceil(Q) : Math.floor(Q);
    }
    i += "'";
    function F() {
      var Q, ee;
      if (Math.hypot) return Math.hypot.apply(this, arguments);
      Q = 0, ee = arguments.length;
      for (var re = 0; re < ee; re++) {
        if (arguments[re] === Infinity || arguments[re] === -1 / 0) return Infinity;
        Q += arguments[re] * arguments[re];
      }
      return Math.sqrt(Q);
    }
    function P(Q, ee) {
      return n.n1T(1), n.L1$(), n.W6G(ee, Q);
    }
    a = "\\", a += "f", s = "\\";
    function _(Q, ee) {
      return n.E3R(72), n.B3B(Q, ee);
    }
    s += "t";
    function V(Q, ee) {
      return n.L1$(), !!(Q || ee);
    }
    o = "\\", o += "b", h = 0;
    function A(Q) {
      return n.Z8b(), Math.atanh ? Math.atanh(Q) : Math.log((1 + Q) / (1 - Q)) / 2;
    }
    l = 1, u = 2, c = 3;
    function E(Q) {
      ee.prototype = Q;
      function ee() {}
      return new ee();
    }
    d = 4;
    function L(Q) {
      return Math.log(Q) * Math.LOG10E;
    }
    f = /[\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, g = {
      "\b": o,
      "\t": s,
      "\n": "\\n",
      "\f": a,
      "\r": "\\r",
      "'": i,
      "\\": r
    };
    function N(Q) {
      return Math.acosh ? Math.acosh(Q) : Math.log(Q + Math.sqrt(Q * Q - 1));
    }
    e.extend(J.prototype, {
      simplify: function (Q) {
        var ee, re, de, he, fe, pe, ge, ve, be;
        for (Q = Q || {}, ee = [], re = [], pe = this.tokens.length, ve = 0, ve = 0; ve < pe; ve++) if (ge = this.tokens[ve], be = ge.type_, be === h) ee.push(ge);else if (be === c && ge.index_ in Q) ge = new z(h, 0, 0, Q[ge.index_]), ee.push(ge);else if (be === u && ee.length > 1) he = ee.pop(), de = ee.pop(), fe = this.ops2[ge.index_], n.n1T(2), ge = new z(h, 0, n.W6G(1, "0"), fe(de.number_, he.number_)), ee.push(ge);else if (be === l && ee.length > 0) de = ee.pop(), fe = this.ops1[ge.index_], ge = new z(h, 0, 0, fe(de.number_)), ee.push(ge);else {
          for (; ee.length > 0;) re.push(ee.shift());
          re.push(ge);
        }
        for (; ee.length > 0;) re.push(ee.shift());
        return new J(re, E(this.ops1), E(this.ops2), E(this.functions));
      },
      substitute: function (Q, ee) {
        var re, de, he, fe, pe, ge, ve, be;
        for (n.L1$(), ee instanceof J || (ee = new v().parse(String(ee))), re = [], de = this.tokens.length, fe = 0, fe = 0; fe < de; fe++) if (he = this.tokens[fe], pe = he.type_, pe === c && he.index_ === Q) for (var _e = 0; _e < ee.tokens.length; _e++) ge = ee.tokens[_e], ve = new z(ge.type_, ge.index_, ge.prio_, ge.number_), re.push(ve);else re.push(he);
        return be = new J(re, E(this.ops1), E(this.ops2), E(this.functions)), be;
      },
      evaluate: function (Q) {
        var ee, re, de, he, fe, pe, ge, ve, be;
        for (Q = Q || {}, ee = [], fe = this.tokens.length, ge = 0, ge = 0; ge < fe; ge++) if (pe = this.tokens[ge], ve = pe.type_, ve === h) ee.push(pe.number_);else if (ve === u) de = ee.pop(), re = ee.pop(), he = this.ops2[pe.index_], ee.push(he(re, de));else if (ve === c) {
          if (pe.index_ in Q) ee.push(Q[pe.index_]);else if (pe.index_ in this.functions) ee.push(this.functions[pe.index_]);else throw be = "undefined variabl", be += "e: ", new Error(be + pe.index_);
        } else if (ve === l) re = ee.pop(), he = this.ops1[pe.index_], ee.push(he(re));else if (ve === d) {
          if (re = ee.pop(), he = ee.pop(), he.apply && he.call) Object.prototype.toString.call(re) == "[object Array]" ? ee.push(he.apply(void 0, re)) : ee.push(he.call(void 0, re));else throw n.n1T(0), new Error(n.W6G(" is not a function", he));
        } else throw new Error("invalid Expression");
        if (ee.length > 1) throw new Error("invalid Expression (parity)");
        return ee[0];
      },
      toString: function (Q) {
        var ee, re, de, he, fe, pe, ge, ve, be;
        for (ee = [], fe = this.tokens.length, ge = 0, n.L1$(), ge = 0; ge < fe; ge++) if (pe = this.tokens[ge], ve = pe.type_, ve === h) ee.push(ne(pe.number_));else if (ve === u) de = ee.pop(), re = ee.pop(), he = pe.index_, Q && he == "^" ? (n.E3R(73), ee.push(n.W6G(re, de, ",", "Math.pow(", ")"))) : (n.E3R(73), ee.push(n.W6G(re, de, he, "(", ")")));else if (ve === c) ee.push(pe.index_);else if (ve === l) re = ee.pop(), he = pe.index_, he === "-" ? (n.E3R(43), ee.push(n.W6G(")", "(", re, he))) : (n.n1T(43), ee.push(n.W6G(")", he, re, "(")));else if (ve === d) re = ee.pop(), he = ee.pop(), n.E3R(43), ee.push(n.B3B(")", he, re, "("));else throw new Error("invalid Expression");
        if (ee.length > 1) throw be = "inv", be += "alid Expression (parity)", new Error(be);
        return ee[0];
      },
      variables: function () {
        var Q, ee, re;
        n.Z8b(), Q = this.tokens.length, ee = [];
        for (var de = 0; de < Q; de++) re = this.tokens[de], re.type_ === c && ee.indexOf(re.index_) == -1 && ee.push(re.index_);
        return ee;
      }
    }, !0);
    function U(Q) {
      return -Q;
    }
    function B(Q, ee) {
      var re, de, he;
      re = 358119599, n.n1T(21), de = -n.W6G("475069115", 25), he = 2;
      for (var fe = 1; n.o0(fe.toString(), fe.toString().length, 74617) !== re; fe++) return n.E3R(74), n.W6G(ee, Q);
      if (n.Q_(he.toString(), he.toString().length, 39909) !== de) return n.n1T(75), n.B3B(Q, ee);
    }
    function O(Q, ee) {
      var re;
      return re = "[ob", re += "ject Array]", Object.prototype.toString.call(Q) != re ? [Q, ee] : (Q = Q.slice(), Q.push(ee), Q);
    }
    v.parse = function (Q) {
      return new v().parse(Q);
    }, v.evaluate = function (Q, ee) {
      return n.Z8b(), v.parse(Q).evaluate(ee);
    }, v.Expression = J, v.values = {
      sin: Math.sin,
      cos: Math.cos,
      tan: Math.tan,
      asin: Math.asin,
      acos: Math.acos,
      atan: Math.atan,
      sinh: H,
      cosh: se,
      tanh: ue,
      asinh: S,
      acosh: N,
      atanh: A,
      sqrt: Math.sqrt,
      log: Math.log,
      lg: L,
      log10: L,
      abs: Math.abs,
      ceil: Math.ceil,
      floor: Math.floor,
      round: Math.round,
      trunc: D,
      random: oe,
      fac: T,
      exp: Math.exp,
      min: Math.min,
      max: Math.max,
      hypot: F,
      pyt: F,
      pow: Math.pow,
      atan2: Math.atan2,
      if: Z,
      E: Math.E,
      PI: Math.PI
    }, n.n1T(76), p = n.B3B("0", 1);
    function R(Q, ee) {
      return !!(Q && ee);
    }
    n.n1T(19), m = n.W6G(1, 1);
    function H(Q) {
      return n.Z8b(), Math.sinh ? Math.sinh(Q) : (Math.exp(Q) - Math.exp(-Q)) / 2;
    }
    n.n1T(76), x = n.B3B("2", 1), n.n1T(77), y = n.W6G(3, "3", 1);
    function z(Q, ee, re, de) {
      this.type_ = Q, this.index_ = ee || 0, this.prio_ = re || 0, this.number_ = de ?? 0, this.toString = function () {
        n.L1$();
        var he;
        switch (this.type_) {
          case h:
            return this.number_;
          case l:
          case u:
          case c:
            return this.index_;
          case d:
            return he = "CA", he += "LL", he;
          default:
            return "Invalid Token";
        }
      };
    }
    n.E3R(19), b = n.W6G(4, 1);
    function W(Q, ee) {
      return n.E3R(69), n.Z8b(), n.B3B(ee, Q);
    }
    function G(Q, ee) {
      return n.E3R(7), n.W6G(Q, ee);
    }
    function Z(Q, ee, re) {
      return n.L1$(), Q ? ee : re;
    }
    n.E3R(78), C = n.W6G(0, "5", 1);
    function X(Q, ee) {
      return n.E3R(2), n.W6G(ee, Q);
    }
    n.n1T(19), k = n.B3B(6, 1);
    function ie(Q, ee) {
      return n.E3R(79), n.W6G(ee, Q);
    }
    function j(Q, ee) {
      return n.E3R(74), n.W6G(ee, Q);
    }
    function J(Q, ee, re, de) {
      this.tokens = Q, this.ops1 = ee, this.ops2 = re, this.functions = de;
    }
    function ae(Q, ee) {
      return n.E3R(80), n.Z8b(), n.W6G(Q, ee);
    }
    n.n1T(19), M = n.B3B(7, 1), n.n1T(81), I = n.B3B("1", 8), e.extend(v.prototype, {
      parse: function (Q) {
        var ee, re, de, he, fe, pe, ge, ve, be, _e, ye;
        for (this.errormsg = "", this.success = !0, ee = [], re = [], this.tmpprio = 0, n.n1T(82), de = n.W6G(p, y, k, x), he = 0, this.expression = Q, this.pos = 0; this.pos < this.expression.length;) this.isOperator() ? this.isSign() && de & k ? (this.isNegativeSign() && (this.tokenprio = 2, this.tokenindex = "-", he++, this.addfunc(re, ee, l)), n.n1T(82), de = n.B3B(p, y, k, x)) : this.isComment() || (de & m || (pe = "un", pe += "expected o", pe += "perat", pe += "or", this.error_parsing(this.pos, pe)), he += 2, this.addfunc(re, ee, u), n.n1T(82), de = n.B3B(p, y, k, x)) : this.isNumber() ? (de & p || this.error_parsing(this.pos, "unexpected number"), fe = new z(h, 0, 0, this.tokennumber), re.push(fe), n.E3R(83), de = n.B3B(C, b, m)) : this.isString() ? ((de & p) === 0 && this.error_parsing(this.pos, "unexpected string"), fe = new z(h, 0, 0, this.tokennumber), re.push(fe), n.n1T(83), de = n.W6G(C, b, m)) : this.isLeftParenth() ? (de & y || this.error_parsing(this.pos, "unexpected \"(\""), de & M && (he += 2, n.n1T(1), this.tokenprio = -n.W6G(0, "2"), this.tokenindex = -1, this.addfunc(re, ee, d)), n.n1T(84), de = n.W6G(I, p, y, k, x)) : this.isRightParenth() ? (de & I ? (fe = new z(h, 0, 0, []), re.push(fe)) : de & b || this.error_parsing(this.pos, "unexpected \")\""), n.n1T(84), de = n.W6G(M, m, b, y, C)) : this.isComma() ? (de & C || this.error_parsing(this.pos, "unexpected \",\""), this.addfunc(re, ee, u), he += 2, n.E3R(82), de = n.W6G(p, y, k, x)) : this.isConst() ? (de & p || (ge = "une", ge += "xpected const", ge += "ant", this.error_parsing(this.pos, ge)), ve = new z(h, 0, 0, this.tokennumber), re.push(ve), n.E3R(83), de = n.B3B(C, b, m)) : this.isOp2() ? (de & x || this.error_parsing(this.pos, "unexpected function"), this.addfunc(re, ee, u), he += 2, de = y) : this.isOp1() ? (de & x || this.error_parsing(this.pos, "unexpected function"), this.addfunc(re, ee, l), he++, de = y) : this.isVar() ? (de & p || (be = "unexpected var", be += "iable", this.error_parsing(this.pos, be)), _e = new z(c, this.tokenindex, 0, 0), re.push(_e), n.n1T(84), de = n.B3B(M, m, b, y, C)) : this.isWhite() || (this.errormsg === "" ? this.error_parsing(this.pos, "unknown character") : this.error_parsing(this.pos, this.errormsg));
        for ((this.tmpprio < 0 || this.tmpprio >= 10) && this.error_parsing(this.pos, "unmatched \"()\""); ee.length > 0;) ye = ee.pop(), re.push(ye);
        return he + 1 !== re.length && this.error_parsing(this.pos, "parity"), new J(re, E(this.ops1), E(this.ops2), E(this.functions));
      },
      evaluate: function (Q, ee) {
        return this.parse(Q).evaluate(ee);
      },
      error_parsing: function (Q, ee) {
        throw n.Z8b(), this.success = !1, n.E3R(43), this.errormsg = n.B3B(ee, "parse error [column ", "]: ", Q), this.column = Q, new Error(this.errormsg);
      },
      addfunc: function (Q, ee, re) {
        var de;
        for (de = new z(re, this.tokenindex, this.tokenprio + this.tmpprio, 0); ee.length > 0 && de.prio_ <= ee[ee.length - 1].prio_;) Q.push(ee.pop());
        n.Z8b(), ee.push(de);
      },
      isNumber: function () {
        var Q, ee, re;
        for (Q = !1, ee = "", n.Z8b(); this.pos < this.expression.length && (re = this.expression.charCodeAt(this.pos), re >= 48 && re <= 57 || re === 46);) ee += this.expression.charAt(this.pos), this.pos++, this.tokennumber = parseFloat(ee), Q = !0;
        return Q;
      },
      unescape: function (Q, ee) {
        var re, de, he, fe;
        re = [], de = !1;
        for (var pe = 0; pe < Q.length; pe++) if (he = Q.charAt(pe), de) {
          switch (he) {
            case "'":
              re.push("'");
              break;
            case "\\":
              re.push("\\");
              break;
            case "/":
              re.push("/");
              break;
            case "b":
              re.push("\b");
              break;
            case "f":
              re.push("\f");
              break;
            case "n":
              re.push(`
`);
              break;
            case "r":
              re.push("\r");
              break;
            case "t":
              re.push("\t");
              break;
            case "u":
              fe = parseInt(Q.substring(pe + 1, pe + 5), 16), re.push(String.fromCharCode(fe)), pe += 4;
              break;
            default:
              throw n.E3R(0), this.error_parsing(n.W6G(pe, ee), n.B3B("'", he, "Illegal escape sequence: '\\", n.E3R(31)));
          }
          de = !1;
        } else he == "\\" ? de = !0 : re.push(he);
        return re.join("");
      },
      isString: function () {
        var Q, ee, re, de;
        if (Q = !1, ee = "", re = this.pos, n.L1$(), this.pos < this.expression.length && this.expression.charAt(this.pos) == "'") for (this.pos++; this.pos < this.expression.length;) if (de = this.expression.charAt(this.pos), de != "'" || ee.slice(-1) == "\\") ee += this.expression.charAt(this.pos), this.pos++;else {
          this.pos++, this.tokennumber = this.unescape(ee, re), Q = !0;
          break;
        }
        return Q;
      },
      isConst: function () {
        n.Z8b();
        var Q, ee;
        for (var re in this.consts) if (ee = re.length, Q = this.expression.substr(this.pos, ee), re === Q) return this.tokennumber = this.consts[re], this.pos += ee, !0;
        return !1;
      },
      isOperator: function () {
        var Q, ee, re, de, he, fe;
        if (Q = this.expression.charCodeAt(this.pos), Q === 43) this.tokenprio = 2, this.tokenindex = "+";else if (Q === 45) this.tokenprio = 2, this.tokenindex = "-";else if (Q === 62) this.expression.charCodeAt(this.pos + 1) === 61 ? (this.pos++, this.tokenprio = 1, this.tokenindex = ">=") : (this.tokenprio = 1, this.tokenindex = ">");else if (Q === 60) this.expression.charCodeAt(this.pos + 1) === 61 ? (this.pos++, this.tokenprio = 1, this.tokenindex = "<=") : (this.tokenprio = 1, this.tokenindex = "<");else if (Q === 124) {
          if (this.expression.charCodeAt(this.pos + 1) === 124) this.pos++, this.tokenprio = 1, this.tokenindex = "||";else return !1;
        } else if (Q === 61) {
          if (this.expression.charCodeAt(this.pos + 1) === 61) this.pos++, n.n1T(29), this.tokenprio = n.B3B(64, "1"), this.tokenindex = "==";else {
            ee = -1414612446, re = 1230962868, de = 2;
            for (var pe = 1; n.Q_(pe.toString(), pe.toString().length, 72850) !== ee; pe++) return !0;
            if (n.Q_(de.toString(), de.toString().length, 87230) !== re) return !1;
          }
        } else if (Q === 33) {
          if (this.expression.charCodeAt(this.pos + 1) === 61) he = "!", he += "=", this.pos++, this.tokenprio = 1, this.tokenindex = he;else return !1;
        } else if (Q === 97) {
          if (this.expression.charCodeAt(this.pos + 1) === 110 && this.expression.charCodeAt(this.pos + 2) === 100) this.pos++, this.pos++, this.tokenprio = 0, this.tokenindex = "and";else return !1;
        } else if (Q === 111) {
          if (this.expression.charCodeAt(this.pos + 1) === 114) fe = "o", fe += "r", this.pos++, this.tokenprio = 0, this.tokenindex = fe;else return !1;
        } else if (Q === 42 || Q === 8729 || Q === 8226) this.tokenprio = 3, this.tokenindex = "*";else if (Q === 47) this.tokenprio = 4, this.tokenindex = "/";else if (Q === 37) this.tokenprio = 4, this.tokenindex = "%";else if (Q === 94) n.n1T(21), this.tokenprio = n.W6G("5", 0), this.tokenindex = "^";else return !1;
        return this.pos++, !0;
      },
      isSign: function () {
        var Q;
        return n.Z8b(), Q = this.expression.charCodeAt(this.pos - 1), Q === 45 || Q === 43;
      },
      isPositiveSign: function () {
        var Q;
        return n.L1$(), Q = this.expression.charCodeAt(this.pos - 1), Q === 43;
      },
      isNegativeSign: function () {
        var Q;
        return Q = this.expression.charCodeAt(this.pos - 1), Q === 45;
      },
      isLeftParenth: function () {
        var Q;
        return n.L1$(), Q = this.expression.charCodeAt(this.pos), Q === 40 ? (this.pos++, this.tmpprio += 10, !0) : !1;
      },
      isRightParenth: function () {
        var Q;
        return n.L1$(), Q = this.expression.charCodeAt(this.pos), Q === 41 ? (this.pos++, this.tmpprio -= 10, !0) : !1;
      },
      isComma: function () {
        var Q;
        return Q = this.expression.charCodeAt(this.pos), Q === 44 ? (this.pos++, this.tokenprio = -1, this.tokenindex = ",", !0) : !1;
      },
      isWhite: function () {
        var Q;
        return Q = this.expression.charCodeAt(this.pos), Q === 32 || Q === 9 || Q === 10 || Q === 13 ? (this.pos++, !0) : !1;
      },
      isOp1: function () {
        var Q, ee;
        Q = "";
        for (var re = this.pos; re < this.expression.length && (ee = this.expression.charAt(re), !(ee.toUpperCase() === ee.toLowerCase() && (re === this.pos || ee != "_" && (ee < "0" || ee > "9")))); re++) Q += ee;
        return Q.length > 0 && Q in this.ops1 ? (this.tokenindex = Q, this.tokenprio = 5, this.pos += Q.length, !0) : !1;
      },
      isOp2: function () {
        var Q, ee;
        Q = "";
        for (var re = this.pos; re < this.expression.length && (ee = this.expression.charAt(re), !(ee.toUpperCase() === ee.toLowerCase() && (re === this.pos || ee != "_" && (ee < "0" || ee > "9")))); re++) Q += ee;
        return n.L1$(), Q.length > 0 && Q in this.ops2 ? (this.tokenindex = Q, this.tokenprio = 5, this.pos += Q.length, !0) : !1;
      },
      isVar: function () {
        var Q, ee;
        n.L1$(), Q = "";
        for (var re = this.pos; re < this.expression.length && (ee = this.expression.charAt(re), !(ee.toUpperCase() === ee.toLowerCase() && (re === this.pos || ee != "_" && (ee < "0" || ee > "9")))); re++) Q += ee;
        return Q.length > 0 ? (this.tokenindex = Q, this.tokenprio = 4, this.pos += Q.length, !0) : !1;
      },
      isComment: function () {
        var Q;
        if (n.L1$(), Q = this.expression.charCodeAt(this.pos - 1), Q === 47 && this.expression.charCodeAt(this.pos) === 42) {
          n.n1T(1);
          var ee = n.B3B(20, 22);
          return this.pos = this.expression.indexOf("*/", this.pos) + ee, this.pos === 1 && (this.pos = this.expression.length), !0;
        }
        return !1;
      }
    }, !0);
    function se(Q) {
      return Math.cosh ? Math.cosh(Q) : (Math.exp(Q) + Math.exp(-Q)) / 2;
    }
    function ne(Q) {
      return n.Z8b(), typeof Q == "string" ? (f.lastIndex = 0, f.test(Q) ? "'" + Q.replace(f, function (ee) {
        var re;
        return n.Z8b(), re = g[ee], typeof re == "string" ? re : "\\u" + ("0000" + ee.charCodeAt(0).toString(16)).slice(-4);
      }) + "'" : "'" + Q + "'") : Q;
    }
    function le(Q, ee) {
      return n.L1$(), Number(Q) + Number(ee);
    }
    function ue(Q) {
      return n.Z8b(), Math.tanh ? Math.tanh(Q) : Q === Infinity ? 1 : Q === -1 / 0 ? -1 : (Math.exp(Q) - Math.exp(-Q)) / (Math.exp(Q) + Math.exp(-Q));
    }
    function oe(Q) {
      n.n1T(85), n.L1$();
      var ee = n.W6G(7, 7, 4, 5);
      return Math.random() * (Q || ee);
    }
    function ce(Q, ee) {
      return n.E3R(31), n.B3B(ee, Q, "");
    }
    return v;
  }, e.computeEquationChart = function (n, r) {
    var i = te,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T;
    n = n.replace(/[:]/, "/"), i.E3R(1), a = i.B3B(0, "0");
    for (var D in r) s = "\\", s += "^", o = "\\", o += "$", h = new RegExp("\\[" + D.replace(/\[/g, "\\[").replace(/\]/g, "\\]").replace(/\$/g, o).replace(/\^/g, s).replace(/[+\-*/%()]/g, "\\$&") + "\\]", "g"), i.n1T(0), n = n.replace(h, i.B3B(a, "symbol")), a++;
    l = t().parse(n), u = [], c = {}, d = 0, g = null, i.Z8b(), p = !1, m = [];
    function F(A) {
      if (A.i++, r[A.s]) {
        if (A.i >= r[A.s].length) return 0;
        f = r[A.s][A.i];
      }
      return f.DT || (f.DT = e.strToDateTime(f.Date)), A.d = f.DT, 1;
    }
    for (D in r) x = {
      sym: D,
      map: r[D]
    }, r[D] ? m.unshift(x) : m.push(x);
    function P() {
      i.L1$();
      var A, E;
      A = null, E = null;
      for (var L in c) E ? c[L].d.getTime() < E.d.getTime() ? A = E = c[L] : c[L].d.getTime() > E.d.getTime() && (A = E) : E = c[L];
      return A ? F(A) ? -1 : 0 : 1;
    }
    for (var _ = 0; _ < m.length; _++) y = m[_], c[y.sym] = {
      i: 0,
      s: y.sym
    }, y.map ? (d++, f = y.map[0]) : d == 1 && (p = y.sym), f.DT || (f.DT = e.strToDateTime(f.Date)), c[y.sym].d = f.DT, g || (g = c[y.sym]);
    i.n1T(86), b = i.W6G(0, d), C = d == 1 && n.indexOf("%") == -1;
    e: for (; k = P(), !!k;) if (k == 1) {
      if (p) I = r[g.s][g.i][p], I && (I.Close || I.Close === 0) && (I = I.Close), v = l.evaluate({
        symbol0: r[g.s][g.i].Close,
        symbol1: I
      }), v = Number(v.toFixed(8)), M = {
        DT: g.d,
        Close: v,
        Adj_Close: v
      }, M[g.s] = r[g.s][g.i].Close, !isNaN(v) && v != Infinity && u.push(M);else {
        if (b) throw S = "N", S += "oExcept", S += "ion", w = l.evaluate({}), i.E3R(31), e.alert(i.W6G(w, "=", n)), {
          name: S,
          message: ""
        };
        a = 0, T = {
          Adj_Close: {},
          Close: {},
          Open: {},
          High: {},
          Low: {},
          Volume: {}
        };
        for (D in r) {
          for (var V in T) i.E3R(0), T[V][i.B3B(a, "symbol")] = r[D][c[D].i][V];
          a++;
        }
        M = {
          DT: g.d
        }, M.Adj_Close = l.evaluate(T.Adj_Close), M.Close = l.evaluate(T.Close), M.Open = l.evaluate(T.Open), M.Volume = l.evaluate(T.Volume), isNaN(M.Volume) && (i.n1T(19), M.Volume = i.W6G(32, "0")), C ? (M.High = l.evaluate(T.High), M.Low = l.evaluate(T.Low)) : (M.High = Math.max(M.Open, M.Close), M.Low = Math.min(M.Open, M.Close)), !isNaN(M.Close) && M.Close != Infinity && u.push(M), isNaN(M.High) || (M.High = Number(M.High.toFixed(8))), isNaN(M.Low) || (M.Low = Number(M.Low.toFixed(8))), isNaN(M.Open) || (M.Open = Number(M.Open.toFixed(8))), isNaN(M.Close) || (M.Close = Number(M.Close.toFixed(8))), isNaN(M.Adj_Close) ? M.Adj_Close = M.Close : M.Adj_Close = Number(M.Adj_Close.toFixed(8));
      }
      for (D in r) if (!F(c[D])) break e;
    }
    return u;
  };
};
ya = q => {
  var e, t;
  e = "u", e += "nde", e += "fine", e += "d", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.ChartEngine.prototype.setLocale = function (n, r) {
    var i, a, s, o, h, l, u, c, d;
    if (i = "nume", i += "r", i += "ic", a = "n", a += "ume", te.Z8b(), a += "r", a += "ic", s = "n", s += "um", s += "eric", o = "nu", o += "meri", o += "c", h = "nu", h += "meric", !(typeof Intl > "u")) {
      if (this.locale != n) this.locale = n;else return;
      for (u = this.internationalizer = {}, u.hourMinute = new Intl.DateTimeFormat(this.locale, {
        hour: "numeric",
        minute: h,
        hourCycle: "h23"
      }), u.hourMinuteSecond = new Intl.DateTimeFormat(this.locale, {
        hour: "numeric",
        minute: "numeric",
        second: o,
        hourCycle: "h23"
      }), u.mdhm = new Intl.DateTimeFormat(this.locale, {
        year: "2-digit",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit"
      }), u.monthDay = new Intl.DateTimeFormat(this.locale, {
        month: "numeric",
        day: s
      }), u.yearMonthDay = new Intl.DateTimeFormat(this.locale, {
        year: a,
        month: "numeric",
        day: i
      }), u.yearMonth = new Intl.DateTimeFormat(this.locale, {
        year: "numeric",
        month: "numeric"
      }), u.month = new Intl.DateTimeFormat(this.locale, {
        month: "short"
      }), u.numbers = new Intl.NumberFormat(this.locale), u.priceFormatters = [], r || (r = 8), l = 0; l < r + 1; l++) u.priceFormatters.push(new Intl.NumberFormat(this.locale, {
        maximumFractionDigits: l,
        minimumFractionDigits: l
      }));
      for (l = 0; l < 5; l++) c = l, d = l, l || (c = "", d = 2), te.n1T(0), u[te.B3B(c, "percent")] = new Intl.NumberFormat(this.locale, {
        style: "percent",
        minimumFractionDigits: d,
        maximumFractionDigits: d
      });
      t.I18N.createMonthArrays && t.I18N.createMonthArrays(this, u.month, this.locale);
    }
  }, t.I18N = function () {}, t.I18N.hereDoc = function (n) {
    return n.toString().replace(/^[^/]+\/\*!?/, "").replace(/\*\/[^/]+$/, "");
  }, t.I18N.language = "en", t.I18N.longMonths = {
    zh: !0
  }, t.I18N.reverseColorsByLocale = {
    zh: !0,
    ja: !0
  }, t.I18N.findAllTextNodes = function (n) {
    var r, i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k;
    if (n || (n = document.body), n == document.body && !document.querySelector(".ciq_stashed_texts")) {
      r = "input,textarea,.edit", r += "able_conte", r += "nt", i = document.createElement("div"), i.className = "ciq_stashed_texts", i.style.display = "none", n.appendChild(i), a = document.querySelectorAll(r);
      for (var M = 0; M < a.length; M++) s = a[M].getAttribute("placeholder"), s && (o = i.appendChild(document.createElement("translate")), o.setAttribute("original", s), o.placeholderFor = a[M], o.appendChild(document.createTextNode(s)));
    }
    for (h = document.createTreeWalker(n, NodeFilter.SHOW_TEXT, null, !1), l = h.nextNode(), u = new RegExp("^\\s*$"), te.Z8b(), c = new RegExp(`
|	|\f`, "g"), d = {}, f = {
      SCRIPT: !0,
      STYLE: !0,
      TEXTAREA: !0
    }; l;) g = l.nodeValue, u.test(g) || (p = l.parentNode, m = l.nextSibling, x = p.tagName, f[x] || (x != "TRANSLATE" ? (y = "t", y += "ra", y += "nsl", y += "ate", b = document.createElement(y), b.setAttribute("original", g), b.appendChild(l), p.insertBefore(b, m)) : g = p.getAttribute("original"), c.test(g) && (g = g.replace(c, "")), d[g] || (d[g] = []), d[g].push(l))), l = h.nextNode();
    if (n == document.body && (C = t.Studies ? t.Studies.studyLibrary : null, C)) for (var I in C) {
      if (d[I] === null && (d[I] = []), k = C[I], k.inputs) for (var v in k.inputs) d[v] || (d[v] = []);
      if (k.outputs) for (var S in k.outputs) d[S] || (d[S] = []);
    }
    return d;
  }, t.I18N.missingWordList = function (n) {
    var r, i, a, s, o, h, l;
    r = "S", r += "how a", r += "s ", r += "Underlay", te.L1$(), n || (n = t.I18N.language), i = t.I18N.findAllTextNodes(), a = {}, s = t.I18N.wordLists[n], s || (s = {}), o = function (p) {
      te.L1$(), typeof s[p] > "u" && (a[p] = "");
    };
    for (var u in i) o(u);
    if (!(t.Studies && t.Studies.studyLibrary)) return a;
    for (var c in t.Studies.studyLibrary) {
      h = t.Studies.studyLibrary[c], o(h.name);
      for (var d in h.inputs) switch (o(d), l = h.inputs[d], Object.prototype.toString.call(l)) {
        case "[object String]":
          o(l);
          break;
        case "[object Array]":
          for (var f = 0; f < l.length; ++f) o(l[f]);
          break;
      }
      for (var g in h.outputs) o(g);
    }
    return o("Show Zones"), o("OverBought"), o("OverSold"), o("Panel"), o(r), o("Y-Axis"), o("Invert Y-Axis"), a;
  }, t.I18N.printableMissingWordList = function (n) {
    var r;
    return r = JSON.stringify(t.I18N.missingWordList(n)), r = r.replace(/","/g, `",
"`), te.L1$(), r;
  }, t.I18N.translateUI = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f;
    if (i = "p", i += "u", n == i && (n = "pt"), !!t.I18N.wordLists && (n || (n = t.I18N.language), a = t.I18N.findAllTextNodes(r), s = t.I18N.wordLists[n], te.L1$(), !!s)) for (var g in a) {
      o = t.I18N.translateSections(g, s), h = a[g];
      for (var p = 0; p < h.length; p++) l = "origin", l += "al", u = h[p], c = u.parentNode, d = c.getAttribute(l), (o === "," || !o) && (o = d), f = c.placeholderFor, f ? f.placeholder = o : u.data = o;
    }
  }, t.I18N.translate = function (n, r) {
    var i, a;
    return r || (r = t.I18N.language), t.I18N.wordLists ? (i = t.I18N.wordLists[r], a = null, i && (a = t.I18N.translateSections(n, i) || n), a === "," ? n : a) : (console.log("Must include translations.js in order to use CIQ.I18N.translate()"), n);
  }, t.I18N.translateSections = function (n, r) {
    var i = te;
    i.L1$();
    var a, s, o;
    return a = "st", a += "ring", s = "\u200C", typeof n == a && n.indexOf(s) != -1 ? (i.n1T(31), n = n.replace(/([(),])/g, i.W6G(s, "$1", s)), o = n.split(s), o.forEach(function (h, l, u) {
      var c, d;
      if (c = h.match(/^(\s*).*\S(\s*)$/), d = r[h.trim()], d) {
        if (c) {
          i.E3R(87);
          var f = i.W6G(18, 16, 306, 17);
          i.n1T(53);
          var g = i.B3B(16, 18, 17, 269);
          d = c[f] + d + c[g];
        }
        u[l] = d;
      }
    }), o.join("")) : r[n];
  }, t.I18N.convertCSV = function (n) {
    var r, i, a, s, o, h, l, u, c, d;
    if (r = new RegExp("[\u201C\u201D]|[\u2018\u2019]", "g"), i = new RegExp("^(\")|(\")$", "g"), a = t.I18N.wordLists, te.Z8b(), n || (n = t.I18N.csv), !!n) {
      s = n.split(`
`), o = s[0], h = o.split(",");
      for (var f = 0; f < h.length; f++) l = h[f], a[l] || (a[l] = {});
      for (var g = 1; g < s.length; g++) {
        u = s[g].match(/(".*?"|[^",]+)(?=\s*,|\s*$)|(,(?=,))/g) || [], c = u[0], i.test(c) && (c = c.replace(i, "")), r.test(c) && (c = c.replace(r, "\""));
        for (var p = 1; p < u.length; p++) d = u[p], i.test(d) && (d = d.replace(i, "")), a[h[p]][c] = d;
      }
    }
  }, t.I18N.setLanguage = function (n, r, i, a, s) {
    s || (s = (n.uiContext || {}).topNode || document.body), r == "pu" && (r = "pt"), t.I18N.convertCSV(a), t.I18N.language = r, t.I18N.translateUI(r, s), i || (i = t.I18N.translate), n.translationCallback = i;
  }, t.I18N.setLocale = function (n, r, i, a, s) {
    var o = te,
      h,
      l,
      u,
      c,
      d,
      f,
      g;
    if (h = "s", h += "crip", h += "t", l = ".", l += "j", l += "s", u = "locale-data", u += "/js", u += "onp", o.L1$(), c = "u", c += "nde", c += "fined", t.xor(this.reverseColorsByLocale[r], this.reverseColorsByLocale[n.locale]) && this.reverseCandles(n), typeof Intl > "u" || !Intl.__addLocaleData) {
      n.setLocale(r, s), i && i(null);
      return;
    }
    a = typeof a == c ? u : a, o.n1T(43), d = o.B3B(l, a, r, "/"), f = document.createElement("SCRIPT"), f.async = !0, f.src = d, g = document.getElementsByTagName(h)[0], g.parentNode.insertBefore(f, g.nextSibling), f.onload = function () {
      o.Z8b(), n.setLocale(r, s), i && i(null);
    }, f.onerror = function () {
      i && i("cannot load script");
    };
  }, t.I18N.createMonthArrays = function (n, r, i) {
    var a, s, o, h, l, u;
    n.monthAbv = [], n.monthLetters = [], a = new Date(), s = !0, t.I18N.longMonths && t.I18N.longMonths[i] && (s = !1);
    for (var c = 0; c < 12; c++) if (te.E3R(19), a.setDate(te.W6G(64, "1")), a.setMonth(c), o = r.format(a), s) {
      h = "";
      for (var d = 0; d < o.length; d++) l = o.charAt(d), u = l.charCodeAt(0), !(u < 65) && (h += l);
      n.monthAbv[c] = h, n.monthLetters[c] = h[0];
    } else n.monthAbv[c] = o, n.monthLetters[c] = o;
  }, t.I18N.localize = function (n, r) {
    this.setLocale(n, r), this.setLanguage(n, r);
  }, t.I18N.reverseCandles = function (n) {
    var r, i, a;
    r = n.styles, i = n.cloneStyle(r.stx_candle_down), a = n.cloneStyle(r.stx_candle_up), r.stx_candle_up = i, r.stx_candle_down = a;
  }, t.I18N.wordLists = {
    en: {}
  }, t.I18N.languages = {
    en: "English"
  };
};
ba = q => {
  var e = te,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h,
    l;
  t = "<div cla", t += "ss=\"stx-float-date\" style=\"visibility: hid", t += "den;\"></d", t += "iv>", n = "<div class=\"stx_crossh", n += "air stx_cross", n += "hair_y\" style=\"display: none;\"></", n += "div>", r = "<div class=\"stx_drag_ok\"><div class=\"icon\"></div>", r += "<div class=\"field\"></div></div>", i = "<span class=\"stx-btn stx_annotation_save\" style=\"display: n", i += "one;\"", i += ">save</span>", a = "contex", a += "tmen", a += "u", s = "und", s += "ef", s += "ined", o = "undef", o += "in", o += "e", o += "d", h = typeof _CIQ !== o ? _CIQ : q.CIQ, h.ChartEngine.prototype.pointerEvents = {
    down: [],
    up: []
  }, h.ChartEngine.prototype.manageTouchAndMouse = !0, e.L1$(), h.ChartEngine.prototype.registerTouchAndMouseEvents = function () {
    var u, c, d, f, g, p, m, x, y, b, C, k, M, I;
    u = ".", u += "s", u += "tx-", u += "zoom-out", !this.touchAndMouseEventsRegistered && (this.touchAndMouseEventsRegistered = !0, c = this.controls.chartControls || document, d = c.querySelector(".stx-zoom-in"), f = c.querySelector(u), g = this.chart.container, e.L1$(), p = this, m = function (v, S, w) {
      p.addDomEventListener(g, v, T, w);
      function T(D) {
        p.mainSeriesRenderer && p.mainSeriesRenderer.nonInteractive || (e.Z8b(), S(D));
      }
    }, h.touchDevice ? h.isSurface ? (x = "po", x += "inte", x += "rup", y = "mo", y += "u", y += "s", y += "edown", b = "m", b += "ouse", b += "ent", b += "er", m("mousemove", function (v) {
      p.msMouseMoveProxy(v);
    }), m(b, function (v) {
      e.Z8b(), p.msMouseMoveProxy(v);
    }), m(y, function (v) {
      p.msMouseDownProxy(v);
    }), m("mouseup", function (v) {
      p.msMouseUpProxy(v);
    }), m("pointerdown", function (v) {
      return p.startProxy(v);
    }), m("pointermove", function (v) {
      e.Z8b(), p.moveProxy(v);
    }), m("pointerenter", function (v) {
      return p.moveProxy(v);
    }), m(x, function (v) {
      return p.endProxy(v);
    })) : (C = "pointerd", C += "own", h.isMobile || (k = "m", k += "ous", k += "edown", m("mousemove", function (v) {
      e.L1$(), p.iosMouseMoveProxy(v);
    }), m("mouseenter", function (v) {
      p.iosMouseMoveProxy(v);
    }), m(k, function (v) {
      e.Z8b(), p.iosMouseDownProxy(v);
    }), m("mouseup", function (v) {
      e.Z8b(), p.iosMouseUpProxy(v);
    })), m("touchstart", function (v) {
      e.Z8b(), p.touchstart(v);
    }), m("touchmove", function (v) {
      e.L1$(), p.touchmove(v);
    }), m("touchend", function (v) {
      p.touchend(v);
    }), m(C, function (v) {
      e.Z8b(), p.touchPointerType = v.pointerType;
    }), d && (d.removeAttribute("onMouseOver"), d.removeAttribute("onMouseOut")), f && (M = "onMou", M += "seOver", f.removeAttribute(M), f.removeAttribute("onMouseOut"))) : (m("mousemove", function (v) {
      e.L1$(), p.mousemove(v);
    }), m("mouseenter", function (v) {
      p.mousemove(v);
    }), m("mousedown", function (v) {
      e.Z8b(), p.mousedown(v);
    }), m("mouseup", function (v) {
      p.mouseup(v);
    })), I = h.wheelEvent, this.captureMouseWheelEvents && m(I, function (v) {
      e.Z8b(), p.mouseWheel(v);
    }, {
      passive: !1
    }));
  }, h.ChartEngine.prototype.mousedown = function (u) {
    var c, d, f, g, p, m, x, y, b, C, k;
    if (c = "d", c += "o", c += "w", c += "n", d = "mou", d += "s", d += "edown", !this.runPrepend(d, arguments) && (this.grabOverrideClick = !1, !!this.displayInitialized && this.displayCrosshairs && !this.repositioningDrawing && !this.editingAnnotation && !(u.button && u.button >= 2))) {
      if (f = this.container.getBoundingClientRect(), this.top = f.top, this.left = f.left, this.right = this.left + this.width, this.bottom = this.top + this.height, u.clientX >= this.left && u.clientX <= this.right && u.clientY >= this.top && u.clientY <= this.bottom) this.insideChart = !0;else {
        this.insideChart = !1;
        return;
      }
      if (this.currentPanel) {
        this.manageTouchAndMouse && u && u.preventDefault && this.captureTouchEvents && u.preventDefault(), this.mouseTimer = Date.now(), this.longHoldTookEffect = !1, this.hasDragged = !1, this.userPointerDown = !0, this.openDialog === "" && this.registerPointerEvent({
          x: u.clientX,
          y: u.clientY,
          time: this.mouseTimer
        }, c), g = this.currentPanel.chart;
        for (var M = 0; M < this.drawingObjects.length; M++) if (p = this.drawingObjects[M], p.highlighted && !p.permanent) {
          if (this.cloneDrawing) {
            m = h.ChartEngine.drawingTools[p.name], x = new m(), x.reconstruct(this, p.serialize()), this.drawingObjects.push(x), this.activateRepositioning(x), x.repositioner = p.repositioner;
            return;
          }
          if (y = this.currentVectorParameters.vectorType, !h.Drawing || !y || !h.Drawing[y] || !new h.Drawing[y]().dragToDraw) {
            this.activateRepositioning(p);
            return;
          }
        }
        e.Z8b(), this.mainSeriesRenderer;
        var {
          baselineHelper: I
        } = this;
        if (I.size) {
          b = 741177069, C = 572191023, k = 2;
          for (var v = 1; e.o0(v.toString(), v.toString().length, 14893) !== b; v++) {
            if (this.findBaselineHandle(u, !0)) return;
            k += 2;
          }
          if (e.o0(k.toString(), k.toString().length, 61838) !== C && this.findBaselineHandle(u, !1)) return;
        }
        if (this.controls.anchorHandles) {
          var {
            anchorHandles: S
          } = this.controls;
          for (var w in S) {
            var {
              handle: T,
              sd: D,
              highlighted: F
            } = S[w];
            if (F) {
              this.repositioningAnchorSelector = {
                sd: D
              }, T.classList.add("stx-grab");
              return;
            }
          }
        }
        this.drawingClick && (this.currentPanel.subholder === u.target && this.drawingClick(this.currentPanel, this.cx, this.cy), this.activeDrawing && this.activeDrawing.dragToDraw) || (this.grabbingScreen = !0, g.spanLock = !1, this.yToleranceBroken = !1, this.grabStartX = u.clientX, this.grabStartY = u.clientY, this.grabStartMicropixels = this.micropixels, this.grabStartScrollX = g.scroll, this.grabStartScrollY = this.currentPanel.yAxis.scroll, this.grabStartCandleWidth = this.layout.candleWidth, this.grabStartYAxis = this.whichYAxis(this.currentPanel), this.grabStartZoom = this.grabStartYAxis ? this.grabStartYAxis.zoom : 0, this.grabStartPanel = this.currentPanel, setTimeout(function (P) {
          return function () {
            P.grabbingHand();
          };
        }(this), 100), this.swipeStart && this.swipeStart(g), (this.longHoldTime || this.longHoldTime === 0) && this.startLongHoldTimer(), this.runAppend("mousedown", arguments));
      }
    }
  }, h.ChartEngine.prototype.mousemove = function (u) {
    var c, d;
    if (c = "m", c += "ousemo", c += "v", c += "e", d = u, h.ChartEngine.crosshairX = d.clientX, h.ChartEngine.crosshairY = d.clientY, d.type.toLowerCase().indexOf("enter") > -1) {
      this.positionCrosshairsAtPointer();
      return;
    }
    this.runPrepend(c, arguments) || this.displayInitialized && this.openDialog === "" && (this.baselineHelper.size && this.findBaselineHandle(d), this.grabbingScreen && d.buttons !== 1 && (this.cancelLongHold = !0, this.displayDragOK(), this.grabbingScreen = !1, this.findHighlights(!1, !0)), this.mousemoveinner(d.clientX, d.clientY), this.runAppend("mousemove", arguments));
  }, h.ChartEngine.prototype.mouseup = function (u) {
    e.Z8b();
    var c, d, f, g, p, m, x, y, b, C, k, M;
    if (c = "u", c += "p", d = "mo", d += "useup", !this.runPrepend(d, arguments)) {
      if (this.swipe.end = !0, this.cancelLongHold = !0, this.repositioningDrawing) {
        if (!this.currentVectorParameters.vectorType || Date.now() - this.mouseTimer > 250) {
          this.changeOccurred("vector"), h.clearCanvas(this.chart.tempCanvas, this), this.activateRepositioning(null), this.adjustDrawings(), this.draw();
          return;
        }
        this.activateRepositioning(null);
      }
      if (this.repositioningBaseline) {
        f = "mounta", f += "in";
        var {
          handle: I
        } = this.repositioningBaseline;
        this.repositioningBaseline = null, I.classList.remove("stx-grab"), g = this.mainSeriesRenderer || {}, g.params && g.params.baseline && g.params.type != f, this.draw();
        return;
      }
      if (this.repositioningAnchorSelector) {
        h.Studies.repositionAnchor(this, this.repositioningAnchorSelector.sd), this.repositioningAnchorSelector = null, Object.values(this.controls.anchorHandles).forEach(({
          handle: v
        }) => {
          var S;
          return e.L1$(), S = "s", S += "tx", S += "-g", S += "rab", v.classList.remove(S);
        }), this.findHighlights();
        return;
      }
      if (p = this.userPointerDown, this.userPointerDown = !1, !!this.displayInitialized) {
        if (m = this.backOutY(u.clientY), x = this.backOutX(u.clientX), y = u.which && u.which >= 2 || u.button && u.button >= 2, b = this.openDialog !== "", !b && !y && this.registerPointerEvent({
          x: u.clientX,
          y: u.clientY,
          time: Date.now()
        }, c), C = this.isDoubleClick(), this.grabbingScreen = !1, this.highlightedDraggable && (this.dragPlotOrAxis && this.dragPlotOrAxis(x, m), this.currentPanel = this.whichPanel(m)), k = this.currentPanel, this.grabStartYAxis = null, this.displayDragOK(), this.openDialog !== "") {
          this.insideChart && this.container.classList.remove("stx-drag-chart");
          return;
        }
        if (this.grabOverrideClick) {
          !this.overXAxis && !this.overYAxis && this.swipeRelease && this.swipeRelease(), this.container.classList.remove("stx-drag-chart"), this.grabOverrideClick = !1, this.doDisplayCrosshairs(), this.updateChartAccessories();
          return;
        }
        if (this.insideChart && this.container.classList.remove("stx-drag-chart"), h.ChartEngine.resizingPanel) {
          this.releaseHandle();
          return;
        }
        if (y || u.ctrlKey) return this.anyHighlighted && this.bypassRightClick !== !0 ? (this.rightClickHighlighted(), u.preventDefault && this.captureTouchEvents && u.preventDefault(), u.stopPropagation(), !1) : (this.dispatch("rightClick", {
          stx: this,
          panel: k,
          x,
          y: m
        }), !0);
        u.clientX < this.left || u.clientX > this.right || u.clientY < this.top || u.clientY > this.bottom || (M = k && k.subholder === u.target, C && (M || this.overYAxis || this.overXAxis) ? this.doubleClick({
          button: u.button,
          x,
          y: m
        }) : (p && M && ((!this.longHoldTookEffect || this.activeDrawing) && this.drawingClick(k, x, m), !this.longHoldTookEffect && this.activeMarker && this.activeMarker.click({
          cx: x,
          cy: m,
          panel: k
        })), !this.longHoldTookEffect && !this.activeDrawing && this.dispatch("tap", {
          stx: this,
          panel: k,
          x,
          y: m
        })), this.runAppend("mouseup", arguments));
      }
    }
  }, h.ChartEngine.prototype.registerPointerEvent = function (u, c) {
    e.L1$(), this.pointerEvents[c].length > 1 && this.pointerEvents[c].pop(), this.pointerEvents[c].unshift(u);
  }, h.ChartEngine.prototype.resetPointerEvent = function (u) {
    this.pointerEvents[u].splice(0);
  }, h.ChartEngine.prototype.isDoubleClick = function (u) {
    var c, d, f;
    c = u ? 1200 : 400;
    var {
      up: g,
      down: p
    } = this.pointerEvents;
    return this.cancelTouchSingleClick = !1, g.length < 2 || p.length < 2 ? !1 : (d = p[0].time - g[1].time < this.doubleClickTime && Math.pow(g[1].x - g[0].x, 2) + Math.pow(g[1].y - g[0].y, 2) <= c && g[1].time - p[1].time < this.longHoldTime && g[0].time - p[0].time < this.longHoldTime, d && (f = "do", f += "wn", this.resetPointerEvent("up"), this.resetPointerEvent(f), this.cancelTouchSingleClick = !0), d);
  }, h.ChartEngine.prototype.doubleClick = function (u, c, d) {
    var f;
    if (!this.runPrepend("doubleClick", arguments) && !this.editingAnnotation) {
      if (h.ChartEngine.drawingLine) return this.undo();
      e.Z8b(), !this.activeDrawing && (f = this.activeMarker && this.activeMarker.doubleClick({
        cx: c,
        cy: d,
        panel: this.currentPanel
      }), f || this.dispatch("doubleClick", {
        stx: this,
        button: u,
        x: c,
        y: d
      }), this.runAppend("doubleClick", arguments));
    }
  }, h.ChartEngine.prototype.handleMouseOut = function (u) {
    var c, d, f;
    if (u = u || window.event, !h.withinElement(this.chart.container, u.pageX, u.pageY)) {
      if (c = "handleMous", c += "eOu", c += "t", this.runPrepend("handleMouseOut", arguments)) return;
      this.grabbingScreen || this.findHighlights(null, !0), this.undisplayCrosshairs(), this.touches = [], this.touching = !1, this.activeDrawing && this.userPointerDown && (this.userPointerDown = !1, this.drawingLine = !1, d = this.backOutY(u.pageY), f = this.backOutX(u.pageX), this.drawingClick(this.currentPanel, f, d)), this.repositioningAnchorSelector && (this.repositioningAnchorSelector = null), this.insideChart = !1, this.overYAxis = !1, this.overXAxis = !1, this.displaySticky(), this.runAppend(c, arguments);
    }
  }, h.ChartEngine.prototype.startLongHoldTimer = function () {
    var u, c;
    u = this, this.cancelLongHold = !1, e.Z8b(), this.longHoldTimeout && clearTimeout(this.longHoldTimeout), c = function () {
      var d;
      d = "l", d += "o", d += "ngh", d += "old", !u.cancelLongHold && (u.longHoldTookEffect = !0, u.dispatch(d, {
        stx: u,
        panel: u.currentPanel,
        x: u.cx,
        y: u.cy
      }), e.L1$(), u.displayDragOK());
    }, this.longHoldTime ? this.longHoldTimeout = setTimeout(c, this.longHoldTime) : this.longHoldTime === 0 && c();
  }, h.ChartEngine.prototype.grabHandle = function (u) {
    var c;
    c = "s", c += "tx-gra", c += "b", !this.runPrepend("grabHandle", arguments) && u && (h.ChartEngine.crosshairY = u.top + this.top, h.ChartEngine.resizingPanel = u, u.handle.classList.add(c), this.runAppend("grabHandle", arguments));
  }, h.ChartEngine.prototype.grabbingHand = function () {
    var u;
    e.Z8b(), u = "stx-drag-cha", u += "rt", this.allowScroll && this.grabbingScreen && (h.touchDevice || this.container.classList.add(u));
  }, h.ChartEngine.prototype.releaseHandle = function () {
    if (this.runPrepend("releaseHandle", arguments)) return !0;
    h.clearCanvas(this.chart.tempCanvas, this), this.resizePanels(), h.ChartEngine.resizingPanel && h.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"), e.L1$(), h.ChartEngine.resizingPanel = null, this.runAppend("releaseHandle", arguments);
  }, h.ChartEngine.prototype.findHighlights = function (u, c) {
    var d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce, Q, ee;
    d = this.preferences[u ? "highlightsTapRadius" : "highlightsRadius"], this.highlightViaTap = u;
    var {
      cx: re,
      cy: de
    } = this;
    function he(Ke, Je, $e, ke, Ae, He) {
      var Ne, Ge, dt, je, mt, wt, kt, gt, et, ft, xt, Ee, tt, ut, Ye, pt, st, Ot, At, ot, Mt, St;
      if (Ne = this.chart, Ge = this.currentPanel, ke || (ke = Ge.yAxis), dt = $e.split("-->"), je = dt[0], e.E3R(19), mt = dt[e.B3B(0, "1")], mt || (mt = "Close"), wt = Ne.dataSegment[_], Ee = null, tt = null, ut = null, e.E3R(1), Ye = new Array(e.B3B(0, "3")), pt = Ae && Ae.caches[He], wt && pt) {
        for (et = pt[_], Ee = wt.tick, (et || et === 0) && (Ye[0] = 1), st = _ - 1; st >= 0; st--) if (pt[st] || pt[st] === 0) {
          ft = pt[st], e.n1T(88), tt = e.W6G(_, Ee, st), Ye[1] = 1;
          break;
        }
        for (st = _ + 1; st < Ne.dataSegment.length; st++) if (pt[st] || pt[st] === 0) {
          xt = pt[st], e.n1T(88), ut = e.B3B(_, Ee, st), Ye[2] = 1;
          break;
        }
      }
      if (tt === null && (kt = this.getPreviousBar.call(this, Ne, $e, _), kt && (tt = kt.tick, ft = _t(kt))), ut === null && (gt = this.getNextBar.call(this, Ne, $e, _), gt && (ut = gt.tick, xt = _t(gt))), tt === null && ut === null) return !1;
      if (pt || (et = _t(wt), ft = _t(kt), xt = _t(gt), Ee = wt.tick, kt && (tt = kt.tick), gt && (ut = gt.tick)), !ft && ft !== 0 && (e.E3R(29), ft = e.B3B(64, "0"), tt = 0), !xt && xt !== 0) if (et || et === 0 ? (xt = et, Ye[2] = Ye[0]) : (xt = ft, e.n1T(19), Ye[2] = Ye[e.B3B(0, "1")]), He && Ne.series[He].parameters.extendToEndOfDataSet) {
        e.n1T(25);
        var ii = e.W6G(1, 8, 3, 6);
        ut = Ne.dataSet.length - ii;
      } else ut = tt;
      !et && et !== 0 && (et = xt, Ee = ut, e.n1T(21), Ye[0] = Ye[e.W6G("2", 0)], ft === 0 && tt === 0 && (ft = et, tt = Ee, Ye[1] = Ye[0])), Ot = this.pixelFromTransformedValue.bind(this), At = this.valueFromPixel.bind(this), et = At(Ye[0] ? et : Ot(et, Ge, ke), Ge), ft = At(Ye[1] ? ft : Ot(ft, Ge, ke), Ge), xt = At(Ye[2] ? xt : Ot(xt, Ge, ke), Ge), ot = h.convertBoxToPixels(this, Ge.name, Je), Mt = h.convertBoxToPixels(this, Ge.name, {
        x0: tt,
        y0: ft,
        x1: Ee,
        y1: et
      }), St = h.convertBoxToPixels(this, Ge.name, {
        x0: Ee,
        y0: et,
        x1: ut,
        y1: xt
      });
      function _t(Ct) {
        var at;
        return e.L1$(), Ct ? (at = Ct[je], at && (at[mt] || at[mt] === 0) && (at = at[mt]), Ae && Ae.getBasis && (at += Ae.getBasis(Ct, je, mt)), !Ne.transformFunc || ke != Ne.yAxis ? at : Ct.transform && je in Ct.transform ? (at = Ct.transform[je], at && (at[mt] || at[mt] === 0) && (at = at[mt]), at) : Ne.transformFunc(this, Ne, at)) : null;
      }
      return !!(h.boxIntersects(ot.x0, ot.y0, ot.x1, ot.y1, Mt.x0, Mt.y0, Mt.x1, Mt.y1, "segment") || h.boxIntersects(ot.x0, ot.y0, ot.x1, ot.y1, St.x0, St.y0, St.x1, St.y1, "segment"));
    }
    if (e.L1$(), this.anyHighlighted = !1, !!this.currentPanel) {
      var {
        chart: fe
      } = this.currentPanel;
      if (this.activeDrawing && (c = !0), f = !1, g = null, p = c ? {} : {
        forceShow: !0,
        type: "drawing"
      }, m = {
        x0: this.tickFromPixel(re - d, fe),
        x1: this.tickFromPixel(re + d, fe),
        y0: this.valueFromPixel(de - d, this.currentPanel),
        y1: this.valueFromPixel(de + d, this.currentPanel),
        cx0: re - d,
        cx1: re + d,
        cy0: de - d,
        cy1: de + d,
        r: d
      }, this.repositioningDrawing && m.x1 - m.x0 < 2 ? (m.x1++, m.x0--) : m.x1 == m.x0 && (m.x0 -= 0.5, e.n1T(1), m.x1 += e.W6G(0, "0.5")), x = this.markerHelper && this.markerHelper.chartMap[fe.name] && this.markerHelper.chartMap[fe.name].markers, !fe.hideDrawings) for (var pe = this.drawingObjects.length - 1; pe >= 0; pe--) y = this.drawingObjects[pe], this.panels[y.panelName] && (this.repositioningDrawing && this.repositioningDrawing != y || (b = y.highlighted, C = y.panelName == this.currentPanel.name, y.repositioner = y.intersected(this.crosshairTick, this.crosshairValue, m), C = C && y.repositioner, !c && C ? (b ? (g = y, this.anyHighlighted && this.singleDrawingHighlight && (y.highlighted = !1), y.highlighted && y.highlighted != b && (f = !0)) : b != y.highlight(!0) && (g || (g = y), this.anyHighlighted && this.singleDrawingHighlight && (y.highlighted = !1), f = !0), this.anyHighlighted = !0) : b != y.highlight(!1) && (f = !0), y.highlighted && (p.noDelete = y.permanent, p.noEdit = !this.callbackListeners.drawingEdit.length)));
      for (k in this.layout.studies) M = this.layout.studies[k], M.prev = M.highlight, M.highlight = this.yaxisMatches(M, this.grabStartYAxis);
      for (k in fe.seriesRenderers) {
        w = fe.seriesRenderers[k], w.params.highlight = this.yaxisMatches(w, this.grabStartYAxis);
        for (var ge = 0; ge < w.seriesParams.length; ge++) S = w.seriesParams[ge], S.prev = S.highlight, S.highlight = w.params.highlight;
      }
      for (I = 0; x && I < x.length; I++) v = x[I], v.params.box && (this.activeMarker = null, v.prev = x[I].highlight, v.highlight = !1);
      if (this.markerHelper && (this.markerHelper.highlighted = []), this.highlightedDataSetField = null, this.highlightedDraggable = null, !c && !this.anyHighlighted && this.controls.anchorHandles) for (var ve in this.controls.anchorHandles) {
        T = this.controls.anchorHandles[ve];
        var {
          handle: be,
          sd: _e
        } = T;
        if (D = this.resolveX(re), F = this.resolveY(de), be) {
          var {
            left: ye,
            top: we,
            right: Te,
            bottom: Pe
          } = be.getBoundingClientRect();
          if (h.boxIntersects(ye, we, Te, Pe, D, F, D, F)) {
            P = "anchorHan", P += "dle", T.highlighted = !0, this.anyHighlighted = !0, f = !0, p = {
              message: _e.name,
              type: P
            };
            continue;
          }
          T.highlighted === !0 && (T.highlighted = !1, f = !0);
        }
      }
      if (!c && !this.anyHighlighted && fe.dataSegment && (_ = this.barFromPixel(re), _ >= 0 && _ < fe.dataSegment.length)) {
        for (k in this.overlays) if (M = this.overlays[k], M.panel == this.currentPanel.name && M.study.isHighlighted !== !1) {
          if (typeof M.study.isHighlighted == "function") {
            M.study.isHighlighted(this, re, de) && (M.highlight = !0, this.anyHighlighted = !0);
            continue;
          }
          if (A = fe.dataSegment[_], !!A) {
            for (var Le in M.outputMap) if (he.call(this, _, m, Le, M.getYAxis(this))) {
              M.name != M.panel && (this.anyHighlighted = !0), M.highlight = Le;
              break;
            }
            if (M.highlight) {
              this.highlightedDataSetField = Le;
              break;
            }
          }
        }
        for (k in fe.seriesRenderers) {
          if (this.highlightedDataSetField) break;
          if (E = fe.seriesRenderers[k], L = E.params.panel, E != this.mainSeriesRenderer && !(!E.params.highlightable && !this.currentVectorParameters.vectorType) && L == this.currentPanel.name) for (I = 0; I < E.seriesParams.length; I++) {
            if (N = "Clo", N += "se", S = E.seriesParams[I], U = S.field, !U && !E.highLowBars && (U = this.defaultPlotField || N), S.symbol && S.subField && (U += "-->" + S.subField), B = E.params.yAxis, !B && L && (B = this.panels[L].yAxis), E.params.step && _ > 0) {
              if (!E.caches[S.id] || (V = E.caches[S.id][_], !V && V !== 0)) continue;
              e.E3R(1), O = E.caches[S.id][e.W6G(1, _)], ((O || O === 0) && de + d >= V && de - d <= O || de - d <= V && de + d >= O) && (S.highlight = !0, this.anyHighlighted = !0);
            } else he.call(this, _, m, U, B, E, S.id) && (S.highlight = !0, this.anyHighlighted = !0);
            if (S.highlight) {
              this.highlightedDataSetField = U;
              break;
            }
          }
        }
      }
      H = this.preferences.dragging;
      for (k in this.overlays) M = this.overlays[k], M.highlight && (W = "s", W += "tudy", this.anyHighlighted = !0, G = M.inputs.display || M.name, G = this.translateIf(G), p = {
        message: G,
        noDelete: M.permanent,
        noEdit: !M.editFunction,
        type: W
      }, g = null, (H === !0 || H && H.study) && (R = M), z = M.getYAxis(this)), M.prev != M.highlight && (f = !0);
      for (k in fe.seriesRenderers) {
        Z = fe.seriesRenderers[k], X = Z.params.yAxis ? Z.params.yAxis.textStyle : null;
        for (var Be = 0; Be < Z.seriesParams.length; Be++) S = Z.seriesParams[Be], Z.params.highlightable && S.highlight && (ie = "a", ie += "u", ie += "to", this.anyHighlighted = !0, j = S.color || X, j == ie && (j = this.defaultColor), S.opacity && S.opacity !== 1 && (j = h.hexToRgba(h.colorToHex(j), parseFloat(S.opacity))), p = {
          message: S.display || S.symbol,
          backgroundColor: j,
          noDelete: S.permanent,
          type: "series"
        }, g = null, (H === !0 || H && H.series) && (R = Z, Z.params.highlight = !0), z = Z.getYAxis(this)), S.prev != S.highlight && (f = !0);
      }
      for (k in this.plugins) J = this.plugins[k], ae = {}, J.findHighlights && (ae = J.findHighlights(this, u, c), ae.somethingChanged && (f = !0), ae.anyHighlighted && (this.anyHighlighted = !0, p = ae.stickyArgs || {}));
      se = this.whichPanel(de), ne = this.whichYAxis(se, re), z || (z = ne), this.currentBaseline && (z = this.currentBaseline.getYAxis(this)), z && (z.highlight || (f = !0), z.highlight = !0), le = [];
      for (var Ue in this.panels) le = le.concat(this.panels[Ue].yaxisLHS).concat(this.panels[Ue].yaxisRHS);
      for (k = 0; k < le.length; k++) z == le[k] && !c || (le[k].highlight && (f = !0), le[k].highlight = !1);
      for (I = 0; x && I < x.length; I++) v = x[I], ue = v.params.box, ue && v.params.panelName === this.currentPanel.name && (oe = h.convertBoxToPixels(this, this.currentPanel.name, m), h.boxIntersects(oe.x0, oe.y0, oe.x1, oe.y1, ue.x0, ue.y0, ue.x1, ue.y1) && (this.activeMarker = v, v.highlight = !0, this.markerHelper.highlighted.push(v)), v.prev != v.highlight && (f = !0));
      if (f && (this.draw(), p.panel = se, this.anyHighlighted && !this.grabStartYAxis ? p.panel = se : p = {}, this.displaySticky(p), this.clearMeasure(), g && g.measure()), (H === !0 || H && H.yaxis) && ne && !ne.noDraw && (this.anyHighlight = !0, R = ne), this.anyHighlighted || this.setMeasure(), R && !se.noDrag) {
        if (ce = "stx-d", ce += "raggabl", ce += "e", this.longHoldTookEffect && !this.cancelLongHold) {
          if (R.params) {
            R.params.dependentOf && (R = fe.seriesRenderers[R.params.dependentOf], R.params.highlight = !0);
            for (k in fe.seriesRenderers) fe.seriesRenderers[k].params.dependentOf == R.params.name && (fe.seriesRenderers[k].params.highlight = !0);
          }
          if (this.highlightedDraggable = R, R.getDependents) {
            Q = R.getDependents(this, !0);
            for (k in this.overlays) M = this.overlays[k], Q.indexOf(M) > -1 && (M.highlight = !0);
          }
        }
        this.container.classList.add(ce);
      } else ee = "stx-dragga", ee += "ble", this.container.classList.remove(ee);
      this.highlightedDataSetField = this.adjustHighlightedDataSetField(this.highlightedDataSetField), this.displayDrawOK();
    }
  }, h.ChartEngine.prototype.rightClickHighlighted = function () {
    e.L1$(), !this.runPrepend("rightClickHighlighted", arguments) && (this.deleteHighlighted(!0), this.runAppend("rightClickHighlighted", arguments));
  }, h.ChartEngine.prototype.deleteHighlighted = function (u, c) {
    var d, f, g, p, m, x, y, b, C, k, M, I, v, S;
    if (d = "delet", d += "eHi", d += "g", d += "hlighted", !this.runPrepend("deleteHighlighted", arguments)) {
      if (this.cancelTouchSingleClick = !0, h.clearCanvas(this.chart.tempCanvas, this), f = this.bypassRightClick === !1, f || !this.bypassRightClick.drawing) for (var w = this.drawingObjects.length - 1; w >= 0; w--) g = this.drawingObjects[w], g.highlighted && (u ? this.rightClickDrawing(g, c) : g.permanent || (p = g.abort(), p || (m = this.exportDrawings(), this.drawingObjects.splice(w, 1), this.undoStamp(m, this.exportDrawings())), this.changeOccurred("vector")));
      if (f || !this.bypassRightClick.study) for (var T in this.overlays) x = this.overlays[T], (x.overlay || x.underlay) && x.highlight && !x.permanent && (u || c ? this.rightClickOverlay(T, c) : this.removeOverlay(T));
      if (y = this.currentPanel.chart, f || !this.bypassRightClick.series) {
        for (var D in y.seriesRenderers) if (b = y.seriesRenderers[D], b.params.highlightable) {
          C = this.panels[b.params.panel], k = C && C.yAxis.name;
          for (var F = b.seriesParams.length - 1; F >= 0; F--) M = b.seriesParams[F], (b.params.highlight || M.highlight) && !M.permanent && (b.removeSeries(M.id), b.seriesParams.length < 1 && (this.removeSeriesRenderer(b), b.params.name == k ? this.electNewPanelOwner(b.params.panel) : (this.checkForEmptyPanel(b.params.panel), I = this.getYAxisByName(C, b.params.name), I && (I.name = I.studies[0] || I.renderers[1]))));
        }
      }
      this.draw(), this.resizeChart(), this.clearMeasure(), v = this.controls.mSticky, v && (S = "no", S += "n", S += "e", v.style.display = S, v.children[0].innerHTML = ""), this.runAppend(d, arguments);
    }
  }, h.ChartEngine.prototype.displayDragOK = function (u) {
    var c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w;
    c = this.controls.dragOk;
    function T(F) {
      var P, _, V, A, E;
      if (P = this.translateIf(F.querySelector(".field").getAttribute("text")), _ = this.whichYAxis(this.whichPanel(this.cy), this.cx, this.cy), _ && _.dropzone == "all") {
        e.E3R(29), V = e.B3B(64, "1581196352"), A = -2123304105, E = 2;
        for (var L = 1; e.Q_(L.toString(), L.toString().length, 69353) !== V; L++) P /= "" / this.translateIf(_.name), E += 2;
        e.Q_(E.toString(), E.toString().length, 56984) !== A && (P += "-->" + this.translateIf(_.name));
      }
      F.querySelector(".field").innerHTML = P;
    }
    if (c) {
      if (u || (!this.tapForHighlighting || !this.touchingEvent || this.anyHighlighted) && this.findHighlights(this.highlightViaTap), d = this.highlightedDraggable, f = d && d.undraggable && d.undraggable(this), g = this.cx, p = this.cy, !u) {
        if (d && !f && this.longHoldTookEffect && !this.cancelLongHold) m = "stx-drag-c", m += "har", m += "t", x = "stx-d", x += "rag-axis", y = d.inputs && d.inputs.display || d.params && (d.params.display || d.params.name) || d.name, c.querySelector(".field").setAttribute("text", y), T.call(this, c), c.style.display = "inline-block", this.draw(), this.displaySticky(), this.grabStartYAxis ? this.container.classList.replace("stx-drag-chart", x) : this.container.classList.replace(m, "stx-drag-series");else {
          c.style.display = "none", this.draw(), this.container.classList.remove("stx-drag-series"), this.container.classList.remove("stx-drag-axis");
          for (var D in this.panels) {
            for (b = "lef", b += "t", C = "a", C += "l", C += "l", k = this.panels[D].subholder.classList, k.remove("dropzone"), k.remove(C), k.remove(b), k.remove("right"), k.remove("top"), k.remove("bottom"), M = 0; M < this.panels[D].yaxisLHS.length; M++) this.panels[D].yaxisLHS[M].dropzone = null;
            for (M = 0; M < this.panels[D].yaxisRHS.length; M++) this.panels[D].yaxisRHS[M].dropzone = null;
          }
        }
        this.draw();
      }
      d && (I = "p", I += "x", v = "p", v += "x", S = p + c.offsetHeight, w = Math.max(0, g - c.offsetWidth), e.E3R(0), c.style.top = e.W6G(v, S), e.n1T(0), c.style.left = e.B3B(I, w), T.call(this, c));
    }
  }, h.ChartEngine.prototype.displayDrawOK = function () {
    var u, c, d, f, g, p, m;
    u = this.controls.drawOk, u && h.Drawing && (c = "n", c += "o", c += "n", c += "e", d = h.Drawing[this.currentVectorParameters.vectorType], d && (d = new d()), this.highlightedDataSetField && d && d.getYValue ? (f = ".fie", f += "l", f += "d", g = "p", g += "x", u.style.display = "inline-block", p = this.cy + u.offsetHeight, m = this.cx - u.offsetWidth, e.n1T(0), u.style.top = e.W6G(g, p), e.n1T(0), u.style.left = e.W6G("px", m), u.querySelector(f).innerHTML = this.translateIf(this.highlightedDataSetField)) : u.style.display = c);
  }, h.ChartEngine.prototype.mouseWheel = function (u) {
    var c, d, f, g, p, m, x, y, b, C;
    if (c = "MozMousePixelS", c += "croll", d = "ve", d += "rt", d += "ical", !this.runPrepend("mouseWheel", arguments) && (u.preventDefault && u.preventDefault(), this.openDialog === "" && (f = u.deltaX, g = u.deltaY, Math.abs(g) > Math.abs(f) ? f = 0 : g = 0, this.lastMouseWheelEvent = Date.now(), !(Math.abs(f) === 0 && Math.abs(g) === 0)))) {
      if (this.allowSideswipe && f !== 0) {
        this.lastMove = "horizontal", p = f, p > 50 && (p = 50), p < -50 && (p = -50), this.grabbingScreen = !0, this.currentPanel || (this.currentPanel = this.chart.panel), this.grabStartX = h.ChartEngine.crosshairX, this.grabStartY = h.ChartEngine.crosshairY, this.grabStartScrollX = this.chart.scroll, this.grabStartScrollY = this.currentPanel.yAxis.scroll, this.grabStartMicropixels = this.micropixels, this.grabStartPanel = this.currentPanel, this.mousemoveinner(h.ChartEngine.crosshairX - p, h.ChartEngine.crosshairY), this.updateChartAccessories(), this.grabbingScreen = !1;
        return;
      }
      if (this.lastMove = d, !!this.allowZoom && this.displayInitialized) {
        if (!g) if (m = "m", m += "ous", m += "e", m += "wheel", h.wheelEvent == m) {
          e.n1T(1);
          var k = e.W6G(1, 0);
          e.n1T(0);
          var M = e.W6G(13, 27);
          if (g = k / M * u.wheelDelta, u.wheelDeltaX) {
            e.n1T(64);
            var I = e.W6G(9, 2, 2, 10);
            e.E3R(89);
            var v = e.W6G(18, 480, 76, 6, 34);
            f = -("1" | I) / v * u.wheelDeltaX;
          }
        } else g = u.detail;
        if (typeof u.deltaMode > "u" && (u.deltaMode = u.type == c ? 0 : 1), x = -g, u.deltaMode == 1 && (x *= 33), y = null, b = null, this.mouseWheelAcceleration && (C = Math.max(Math.pow(Math.abs(x), 0.3), 1), e.n1T(90), y = e.W6G("1", C, 0.1), e.n1T(40), b = e.B3B(0.2, 1, C)), this.zoomInitiatedByMouseWheel = !0, x > 0 ? this.reverseMouseWheel ? this.zoomOut(null, b) : this.zoomIn(null, y) : x < 0 && (this.reverseMouseWheel ? this.zoomIn(null, y) : this.zoomOut(null, b)), !this.runAppend("mouseWheel", arguments)) return !1;
      }
    }
  }, h.ChartEngine.handleContextMenu = function (u) {
    for (var c, d = 0; d < h.ChartEngine.registeredContainers.length; d++) if (c = h.ChartEngine.registeredContainers[d].stx, c && c.anyHighlighted) return u.preventDefault && u.preventDefault(), !1;
  }, typeof document != s && document.addEventListener(a, h.ChartEngine.handleContextMenu), h.ChartEngine.htmlControls = {
    annotationSave: i,
    annotationCancel: "<span class=\"stx-btn stx_annotation_cancel\" style=\"display: none; margin-left:10px;\">cancel</span>",
    mSticky: "<div class=\"stx_sticky\"> <span class=\"mStickyInterior\"></span> <span class=\"mStickyRightClick\"><span class=\"overlayEdit stx-btn\" style=\"display:none\"><span>&nbsp;</span></span> <span class=\"overlayTrashCan stx-btn\" style=\"display:none\"><span>&nbsp;</span></span> <span class=\"mouseDeleteInstructions\"><span>(</span><span class=\"mouseDeleteText\">right-click to delete</span><span class=\"mouseManageText\">right-click to manage</span><span class=\"dragAnchorText\">drag to change anchor time</span><span>)</span></span></span><span class=\"stickyLongPressText\">(long-press to drag)</span></div>",
    drawOk: "<div class=\"stx_draw_ok\"><div class=\"icon\"></div><div class=\"field\"></div></div>",
    dragOk: r,
    crossX: "<div class=\"stx_crosshair stx_crosshair_x\" style=\"display: none;\"></div>",
    crossY: n,
    chartControls: "<div class=\"stx_chart_controls\" style=\"display: none; bottom: 22px;\"><div class=\"chartSize\"><span class=\"stx-zoom-out\"></span><span class=\"stx-zoom-in\"></span></div></div>",
    home: "<div class=\"stx_jump_today\" style=\"display:none\"><span></span></div>",
    floatDate: t,
    handleTemplate: "<div class=\"stx-ico-handle\" style=\"display: none;\"><span></span></div> ",
    iconsTemplate: "<div class=\"stx-panel-control\"><div class=\"stx-panel-title\"></div><div class=\"stx-panel-legend\"></div><div class=\"stx-btn-panel\"><span class=\"stx-ico-up\"></span></div><div class=\"stx-btn-panel\"><span class=\"stx-ico-focus\"></span></div><div class=\"stx-btn-panel\"><span class=\"stx-ico-down\"></span></div><div class=\"stx-btn-panel\"><span class=\"stx-ico-edit\"></span></div><div class=\"stx-btn-panel\"><span class=\"stx-ico-close\"></span></div></div>",
    baselineHandle: "<div class=\"stx-baseline-handle\" style=\"display: none;\"></div>",
    notificationTray: "<div class=\"stx_notification_tray\"><template><div><span class=\"icon\"></span><span class=\"message\"></span></div></template></div>"
  }, h.ChartEngine.prototype.registerChartControl = function (u, c, d) {
    var f, g, p, m, x, y;
    if (f = this.controls, !(!f || !f.chartControls) && (e.L1$(), !f.chartControls.querySelector("." + u) && (g = null, p = f.chartControls.querySelector(".stx-zoom-in"), p))) return m = "stx-chart-co", m += "ntrol-button ", x = "<span class=\"stx-tool", x += "tip\">", y = "s", y += "p", y += "a", y += "n", g = document.createElement(y), e.n1T(31), g.innerHTML = e.B3B("</span>", c, x), e.n1T(0), g.className = e.W6G(u, m), p.parentNode.appendChild(g), d && h.safeClickTouch(g, d), h.touchDevice || this.makeModal(g), g;
  }, h.ChartEngine.prototype.zoomOut = function (u, c) {
    var d, f, g, p;
    if (this.runPrepend("zoomOut", arguments)) return;
    this.preferences.zoomOutSpeed ? c = this.preferences.zoomOutSpeed : c || (e.n1T(7), c = e.B3B(1, 0.7)), u && u.preventDefault && u.preventDefault(), this.cancelTouchSingleClick = !0, d = this;
    for (var m in this.charts) f = this.charts[m], g = f.width * c / this.layout.candleWidth, f.allowScrollFuture === !1 && f.allowScrollPast === !1 && g > f.dataSet.length && (g = f.dataSet.length), p = this.chart.width / g, this.layout.setSpan = null, this.layout.range = null, this.animations.zoom.run(x(f), this.layout.candleWidth, p);
    function x(y) {
      return e.L1$(), function (b) {
        if (e.Z8b(), d.zoomSet(b, y), d.animations.zoom.hasCompleted) {
          if (d.runAppend("zoomOut", arguments)) return;
          d.changeOccurred("layout"), d.continuousZoom && d.continuousZoom.execute(!0);
        }
      };
    }
  }, h.ChartEngine.prototype.zoomIn = function (u, c) {
    var d, f, g, p;
    if (this.runPrepend("zoomIn", arguments)) return;
    this.preferences.zoomInSpeed ? c = this.preferences.zoomInSpeed : c || (c = 0.7), u && u.preventDefault && u.preventDefault(), e.L1$(), this.cancelTouchSingleClick = !0;
    function m(b) {
      return function (C) {
        var k;
        if (e.Z8b(), d.zoomSet(C, b), d.animations.zoom.hasCompleted) {
          if (k = "l", k += "a", k += "y", k += "out", d.runAppend("zoomIn", arguments)) return;
          d.changeOccurred(k), d.continuousZoom && d.continuousZoom.execute();
        }
      };
    }
    d = this;
    for (var x in this.charts) {
      if (f = this.charts[x], g = f.width * c / this.layout.candleWidth, f.maxTicks - g < 1) {
        e.E3R(91);
        var y = e.B3B(6, 4, 10, 16, 3);
        g = f.maxTicks - y;
      }
      g < this.minimumZoomTicks && (g = this.minimumZoomTicks), p = this.chart.width / g, this.layout.setSpan = null, this.layout.range = null, this.animations.zoom.run(m(f), this.layout.candleWidth, p);
    }
  }, h.ChartEngine.prototype.createCrosshairs = function () {
    var u, c;
    e.L1$(), !this.runPrepend("createCrosshairs", arguments) && (!this.manageTouchAndMouse || this.mainSeriesRenderer && this.mainSeriesRenderer.nonInteractive || (u = this.controls.crossX, c = this.controls.crossY, u && (u.onmousedown || (u.onmousedown = function (d) {
      return d.preventDefault && d.preventDefault(), !1;
    })), c && (c.onmousedown || (c.onmousedown = function (d) {
      return d.preventDefault && d.preventDefault(), e.Z8b(), !1;
    })), this.runAppend("createCrosshairs", arguments)));
  }, l = !1, h.ChartEngine.prototype.mousemoveinner = h.ChartEngine.prototype.mousemoveinner || function (u, c) {
    l || console.error("interaction feature requires activating movement feature."), l = !0;
  };
};
Ca = q => {
  var e, t;
  e = "un", e += "d", e += "efin", e += "ed", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Marker || (t.ChartEngine.helpersToRegister.push(function (n) {
    te.L1$(), n.markerHelper = {
      chartMap: {},
      classMap: {},
      domMarkers: [],
      highlighted: []
    };
  }), t.ChartEngine.prototype.addToHolder = function (n) {
    var r, i, a, s;
    r = this.panels[n.params.panelName], r && (i = n.params, a = n.node, s = n.stxNodeCreator, s && s.prepareForHolder && (a = s.prepareForHolder(n)), i.chartContainer ? this.container.appendChild(n.node) : i.includeAxis ? r.holder.appendChild(n.node) : r.subholder.appendChild(a), n.chart = r.chart, s && s.addToHolder && s.addToHolder(n), s && s.expand && t.Marker.initializeScrollBehavior(s));
  }, t.ChartEngine.prototype.getMarkerArray = function (n, r) {
    var i, a;
    te.Z8b(), i = [];
    for (var s in this.markers) for (var o = 0; o < this.markers[s].length; o++) a = this.markers[s][o], n == "panelName" ? a.params.panelName == r && i.push(a) : n == "label" ? s == r && i.push(a) : n == "all" && i.push(a);
    return i;
  }, t.ChartEngine.prototype.removeFromHolder = function (n) {
    var r, i, a, s, o, h;
    if (r = this.panels[n.params.panelName], r && (n.node.parentNode == r.holder ? r.holder.removeChild(n.node) : n.node.parentNode == r.subholder ? r.subholder.removeChild(n.node) : n.node.parentNode == this.container && this.container.removeChild(n.node)), i = this.markers[n.params.label], !!i) {
      for (a = 0; a < i.length; a++) if (i[a] === n) {
        i.splice(a, 1);
        break;
      }
      if (s = this.markerHelper.chartMap[n.chart.name], s) {
        for (a = 0; a < s.markers.length; a++) if (s.markers[a] === n) {
          s.markers.splice(a, 1);
          break;
        }
      }
      if (o = this.markerHelper.classMap[n.className], o && (h = o[n.params.panelName], h)) {
        for (a = 0; a < h.length; a++) if (h[a] === n) {
          h.splice(a, 1);
          break;
        }
      }
    }
  }, t.ChartEngine.prototype.moveMarkers = function (n, r) {
    var i, a;
    i = this.getMarkerArray("panelName", n);
    for (var s = 0; s < i.length; s++) i[s].params.panelName = r;
    for (var o in this.markerHelper.classMap) a = this.markerHelper.classMap[o][n], a && (this.markerHelper.classMap[o][r] = a, delete this.markerHelper.classMap[o][n]);
  }, t.ChartEngine.prototype.establishMarkerTicks = function () {
    var n, r;
    n = this.markerHelper.chartMap;
    for (var i in n) if (r = n[i], r.dataSetLength != this.charts[i].dataSet.length) for (var a = 0; a < r.markers.length; a++) this.setMarkerTick(r.markers[a]);
  }, t.ChartEngine.prototype.futureTickIfDisplayed = function (n) {
    var r = te,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d;
    if (i = n.chart, !(i.dataSet.length < 1)) {
      a = i.xaxis[i.xaxis.length - 1].DT, r.n1T(46);
      var f = r.B3B(9, 4, 60020, 75045);
      if (a = new Date(a.getTime() - this.timeZoneOffset * f), !(n.params.x > a)) {
        s = i.maxTicks - i.dataSegment.length, o = i.dataSet.length + s, u = new Date(+i.dataSet[i.dataSet.length - 1].DT), c = this.standardMarketIterator(u, null, i), d = n.params.x.getTime();
        for (var g = i.dataSet.length; g < o; g++) if (h = u.getTime(), u = c.next(), l = u.getTime(), l == d) {
          n.tick = g;
          return;
        } else if (l > d && h < d) {
          r.E3R(1), n.tick = Math.max(r.B3B(1, g), 0);
          return;
        }
      }
    }
  }, t.ChartEngine.prototype.setMarkerTick = function (n) {
    var r, i, a, s, o, h, l;
    if (r = "m", te.Z8b(), r += "ast", r += "er", i = n.chart, n.params.xPositioner == r && n.params.x) {
      n.tick = Math.floor(n.params.x / this.layout.periodicity);
      return;
    } else if (n.params.xPositioner == "date" && n.params.x) {
      o = n.params.x.getTime();
      for (var u = 0; u < i.dataSet.length; u++) if (h = i.dataSet[u], s = h.DT.getTime(), a = s, u > 0 && (a = i.dataSet[u - 1].DT.getTime()), s == o) {
        n.tick = u;
        return;
      } else if (s > o && a < o) {
        te.E3R(1), n.tick = Math.max(te.W6G(1, u), 0);
        return;
      } else if (o < s) {
        n.tick = null;
        return;
      }
      if (i.dataSet.length < 1) return;
      l = new Date(+i.dataSet[u - 1].DT), l.getTime() < o && (n.params.future = !0), n.tick = null;
    }
  }, t.ChartEngine.prototype.positionMarkers = function () {
    te.Z8b();
    var n, r, i, a, s, o, h, l, u;
    if (n = "a", n += "ll", r = this, i = this.chart, !r.markerHelper) return;
    this.markerDelay || this.markerDelay === 0 ? this.markerTimeout || (this.markerTimeout = setTimeout(c, this.markerDelay)) : c();
    function c() {
      var f, g, p, m;
      if (!r.runPrepend("positionMarkers", arguments)) {
        r.markerTimeout = null;
        for (var x in r.markerHelper.classMap) for (var y in r.markerHelper.classMap[x]) f = r.markerHelper.classMap[x][y], g = r.panels[y], f.length && (p = {
          stx: r,
          arr: f,
          panel: g
        }, p.firstTick = g.chart.dataSet.length - g.chart.scroll, p.lastTick = p.firstTick + g.chart.dataSegment.length, m = f[0].constructor.placementFunction, m ? m(p) : r.defaultMarkerPlacement(p));
        r.runAppend("positionMarkers", arguments);
      }
    }
    if (a = this.getFirstLastDataRecord(i.dataSegment, "tick"), s = this.getFirstLastDataRecord(i.dataSegment, "tick", !0), !(!a || !s)) {
      o = this.getMarkerArray(n);
      for (var d = 0; d < o.length; d++) h = o[d], l = h.stxNodeCreator, a.tick <= h.tick && h.tick <= s.tick ? l && l.drawMarker && l.drawMarker(h) : h.attached && l.expand && (u = "hidd", u += "en", l.expand.style.visibility = u);
    }
  }, t.Marker = t.Marker || function (n) {
    var r, i, a, s, o, h;
    if (this.params = {
      xPositioner: "date",
      yPositioner: "value",
      panelName: "chart",
      permanent: !1,
      label: "generic",
      includeAxis: !1
    }, t.extend(this.params, n), this.params.node || (this.params.node = document.createElement("DIV")), r = this.params.stx, !r) {
      i = "Marker created ", i += "without ", i += "specifying stx", console.log(i);
      return;
    }
    this.className || (this.className = "CIQ.Marker"), t.derivedFrom(this.params.node, t.Marker.NodeCreator) ? (this.stxNodeCreator = this.params.node, this.node = this.stxNodeCreator.node) : this.node = this.params.node, a = this.params.label, r.markers[a] || (r.markers[a] = []), r.markers[a].push(this), s = r.panels[this.params.panelName], this.chart = s.chart, r.markerHelper.chartMap[this.chart.name] || (r.markerHelper.chartMap[this.chart.name] = {
      dataSetLength: 0,
      markers: []
    }), r.markerHelper.chartMap[this.chart.name].markers.push(this), te.L1$(), o = r.markerHelper.classMap[this.className], o || (o = r.markerHelper.classMap[this.className] = {}), o[this.params.panelName] || (o[this.params.panelName] = []), o[this.params.panelName].push(this), h = this.stxNodeCreator && this.stxNodeCreator.deferAttach, h || r.addToHolder(this), r.setMarkerTick(this), this.stxNodeCreator && this.stxNodeCreator.drawMarker && this.stxNodeCreator.drawMarker(this);
  }, t.Marker.prototype.remove = function () {
    this.params.stx.removeFromHolder(this);
  }, t.Marker.prototype.click = function (n) {
    var r;
    typeof arguments[0] == "number" && (n = {
      cx: arguments[0],
      cy: arguments[1],
      panel: arguments[3]
    });
    var {
      cx: i,
      cy: a,
      panel: s
    } = n;
    this.params.stx && (r = this.params.node, r.click && r.click(i, a, this, s));
  }, t.Marker.prototype.doubleClick = function ({
    cx: n,
    cy: r,
    panel: i
  }) {
    return te.L1$(), !1;
  }, t.Marker.prototype.render = function () {
    var n, r;
    n = [this], r = {
      stx: this.params.stx,
      arr: n,
      panel: this.params.stx.panels[this.params.panelName],
      showClass: this.showClass
    }, this.constructor.placementFunction(r);
  }, t.Marker.removeByLabel = function (n, r) {
    var i, a;
    i = n.getMarkerArray("label", r);
    for (var s = 0; s < i.length; s++) a = i[s], n.removeFromHolder(a), a.stxNodeCreator && a.stxNodeCreator.remove && a.stxNodeCreator.remove(a);
    n.draw();
  }, t.Marker.positionContentVerticalAndHorizontal = function (n) {
    var r = te,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y;
    if (i = ".stx-marker-exp", i += "and", a = n.querySelectorAll(i)[r.B3B(0, "0", r.n1T(19))], !(!a || !t.trulyVisible(a))) {
      s = a.offsetHeight, o = a.style, o.left = o.right = "", o.bottom = o.top = "", h = getComputedStyle(a), l = h.left, u = h.bottom, r.n1T(63);
      var b = r.B3B(13, 20, 32, 15);
      c = n.offsetLeft + parseInt(l, b), d = parseInt(u, 10), f = n.offsetTop - (d + s - n.offsetHeight), g = n.parentNode.offsetWidth, p = n.parentNode.offsetHeight, c + a.offsetWidth > g && (o.right = l, o.left = "auto"), n.offsetTop <= p ? f > p - s && (m = "a", m += "ut", m += "o", o.top = p - n.offsetTop - s + "px", o.bottom = m) : (r.n1T(0), o.top = r.W6G("px", p)), n.offsetTop + n.offsetHeight >= 0 ? f < 0 && (x = "au", x += "to", o.top = -n.offsetTop + "px", o.bottom = x) : (y = "0", y += "p", y += "x", o.bottom = y);
    }
  }, t.Marker.initializeScrollBehavior = function (n) {
    te.L1$();
    var {
      expand: r
    } = n;
    if (r) {
      r.addEventListener(t.wheelEvent, a => a.stopPropagation());
      var {
        scrollbarStyling: i
      } = t.UI || {};
      i ? i.refresh(r) : r.style.overflowY = "scroll";
    }
  }, t.ChartEngine.prototype.getBarBounds = function (n) {
    var r, i, a, s, o;
    return this.layout.chartType, r = this.layout.aggregationType, r == "pandf" ? i = {
      high: Math.max(n.pfOpen, n.pfClose),
      low: Math.min(n.pfOpen, n.pfClose)
    } : i = {
      high: n.High,
      low: n.Low
    }, n.markerHigh && (i.high = n.markerHigh), n.markerLow && (i.low = n.markerLow), n.Open === void 0 && (a = n.Close), n.High === void 0 && (s = Math.max(n.Open || a, n.Close)), n.Low === void 0 && (o = Math.min(n.Open || a, n.Close)), !i.high && i.high !== 0 && (i.high = s), !i.low && i.low !== 0 && (i.low = o), i;
  }, t.ChartEngine.prototype.defaultMarkerPlacement = function (n) {
    var r = te,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V;
    i = n.panel, a = n.yAxis ? n.yAxis : n.panel.yAxis, s = i.chart, o = n.stx, h = o.chart.highLowBars, l = s.defaultPlotField, (!l || h) && (l = "Close"), u = {};
    for (var A = 0; A < n.arr.length; A++) if (c = "candl", c += "e", d = "no", d += "ne", f = n.arr[A], g = f.params, !f.params.box) {
      if (p = f.node, f.clientWidth || (f.clientWidth = p.clientWidth), f.clientHeight || (f.clientHeight = p.clientHeight), m = null, x = g.xPositioner, y = g.yPositioner, b = f.tick, C = s.dataSet, k = f.clientWidth, x != d) {
        if (x == "bar" && g.x) {
          g.x < s.xaxis.length && (M = s.xaxis[g.x], M && (m = M.data)), r.E3R(18);
          var E = r.W6G(17, 18);
          p.style.left = Math.round(o.pixelFromBar(g.x, s) - k / 2) + E + "px";
        } else {
          if (!b && b !== 0) if (g.future && s.scroll < s.maxTicks) {
            if (o.futureTickIfDisplayed(f), b = f.tick, !b && b !== 0) {
              p.style.left = "-1000px";
              continue;
            }
          } else {
            p.style.left = "-1000px";
            continue;
          }
          if (b < C.length && (m = C[b]), f.leftpx = Math.round(o.pixelFromTick(b, s) - s.left - k / 2), f.rightEdge = f.leftpx + k, p.style.left = f.leftpx + "px", b < n.firstTick && f.rightEdge < s.left - 50) continue;
        }
        m || (m = C[C.length - 1]);
      } else if (y.indexOf(c) > -1 && (I = getComputedStyle(p).left, I && (v = o.barFromPixel(parseInt(I, 10), s), v >= 0 && (m = s.xaxis[v].data, !m)))) {
        r.E3R(92);
        var L = r.B3B(16, 6, 2, 2, 48);
        m = C[C.length - L];
      }
      if (p.style.top = "auto", S = g.y, w = f.clientHeight, y != "none") {
        D = "on", D += "_c", D += "andl", D += "e", r.E3R(1), r.W6G(20, 21), r.n1T(53);
        var N = r.W6G(17, 9249, 14, 147957);
        r.n1T(32);
        var U = r.W6G(6541, 1, 12);
        if (F = y + (71.29 <= N ? "-" : U) + p.style.left, P = g.chartContainer ? o.height : i.yAxis.bottom, _ = 0, r.n1T(2), V = r.W6G(1, "0"), typeof u[F] > "u" && (u[F] = 0), V = u[F], u[F] += w, y == "value" && (S || S === 0)) {
          r.n1T(55);
          var B = r.B3B(5, 0, 3, 5);
          _ = Math.round(P - o.pixelFromPrice(S, i, a) - w / B) + "px";
        } else if ((y == "below_candle" || y == "under_candle") && m) T = m[l], h && (T = o.getBarBounds(m)[a.flipped ? "high" : "low"]), _ = Math.round(P - o.pixelFromPrice(T, i, a) - w - V) + "px";else if (y == D && m) {
          if (T = m[l], h) {
            r.n1T(13);
            var O = r.W6G(16, 14, 4);
            T = (m.Low + m.High) / O;
          }
          r.n1T(93);
          var R = r.B3B(19, 83, 418, 8, 110);
          _ = Math.round(P - o.pixelFromPrice(T, i, a) - w / ("2" >> R) - V) + "px";
        } else y == "top" ? _ = Math.round(P - w - V - i.top) + "px" : y == "bottom" ? _ = Math.round(V) + "px" : m && (T = m[l], h && (T = o.getBarBounds(m)[a.flipped ? "low" : "high"]), _ = Math.round(P - o.pixelFromPrice(T, i, a) + V) + "px");
        p.style.bottom != _ && (p.style.bottom = _);
      }
      t.Marker.positionContentVerticalAndHorizontal(p);
    }
  }, t.Marker.NodeCreator = function () {}, t.Marker.NodeCreator.toNode = function () {
    return te.Z8b(), this.node;
  }, t.Marker.Simple = function (n) {
    var r, i, a, s, o, h, l, u;
    r = "st", r += "x-visual", i = "d", i += "i", i += "v", a = "s", a += "tx-m";
    function c() {
      te.L1$(), t.Marker.positionContentVerticalAndHorizontal(s);
    }
    a += "arke", a += "r", s = this.node = document.createElement("div"), s.className = a, s.classList.add(n.type), n.category && s.classList.add(n.category), o = t.newChild(s, i, r), t.newChild(s, "div", "stx-stem"), n.type == "callout" ? (l = t.newChild(o, "div", "stx-marker-content"), t.newChild(l, "h4", null, n.headline), h = t.newChild(l, "div", "stx-marker-expand"), t.newChild(h, "p", null, n.story)) : (u = "d", u += "i", u += "v", h = t.newChild(s, u, "stx-marker-expand"), t.newChild(h, "h4", null, n.headline), t.newChild(h, "p", null, n.story), t.safeClickTouch(h, function (d) {
      s.classList.toggle("highlight");
    })), t.safeClickTouch(o, function (d) {
      te.L1$(), s.classList.toggle("highlight"), setTimeout(c, 10);
    }), this.nodeType = "Simple", this.expand = h;
  }, t.inheritsFrom(t.Marker.Simple, t.Marker.NodeCreator, !1));
};
Sa = q => {
  var e, t, n, r, i, a, s, o;
  e = "u", e += "ndefined", t = typeof _CIQ < "u" ? _CIQ : q.CIQ, n = typeof _timezoneJS !== e ? _timezoneJS : q.timezoneJS, r = 3600000, i = r * 24, a = t.Market, t.Market = function (h) {
    var l = te,
      u,
      c,
      d,
      f,
      g,
      p,
      m;
    if (l.Z8b(), this.market_def = !1, this.rules = !1, this.normalHours = [], this.extraHours = [], this.class_name = "Market", n.Date ? this.tz_lib = n.Date : this.tz_lib = Date, this.market_tz = "", this.hour_aligned = !1, this.convertOnDaily = !1, this.enabled_by_default = !1, typeof h < "u" && h && !t.isEmpty(h)) {
      if (h.market_definition && (h = h.market_definition), h.rules && (this.rules = h.rules), h.market_tz && (this.market_tz = h.market_tz), h.convertOnDaily && (this.convertOnDaily = h.convertOnDaily), h.hour_aligned, this.hour_aligned = h.hour_aligned, typeof h.beginningDayOfWeek < "u") {
        u = 685433482, c = 1155061064, d = 2;
        for (var x = 1; l.o0(x.toString(), x.toString().length, 15289) !== u; x++) this.beginningDayOfWeek = h.beginningDayOfWeek, d += 2;
        l.o0(d.toString(), d.toString().length, 27972) !== c && (this.beginningDayOfWeek = h.beginningDayOfWeek), this.beginningDayOfWeek = h.beginningDayOfWeek;
      }
      typeof h.enabled_by_default < "u" && h.enabled_by_default instanceof Array && (this.enabled_by_default = h.enabled_by_default), f = 610131105, g = -835070716, p = 2;
      for (var y = 1; l.Q_(y.toString(), y.toString().length, 17266) !== f; y++) this.market_def = h, p += 2;
      l.o0(p.toString(), p.toString().length, 82382) !== g && (this.market_def = h), this.market_def.name === void 0 && (m = "no market name specif", m += "ied", this.market_def.name = m);
    } else return;
    t.Market._createTimeSegments(this), this.getSessionNames();
  }, t.Market.Symbology = function () {}, t.Market.Symbology.isForeignSymbol = function (h) {
    return te.Z8b(), !1;
  }, t.Market.Symbology.isFuturesSymbol = function (h) {
    return !1;
  }, t.Market.Symbology.isRateSymbol = function (h) {
    var l, u, c;
    l = -1448292758, u = 480833672, c = 2;
    for (var d = 1; te.Q_(d.toString(), d.toString().length, 11960) !== l; d++) return !0;
    if (te.Z8b(), te.o0(c.toString(), c.toString().length, 54459) !== u) return !1;
  }, t.Market.Symbology.isForexSymbol = function (h) {
    return !1;
  }, t.Market.Symbology.isForexMetal = function (h, l) {
    return !1;
  }, t.Market.Symbology.isForexFuturesSymbol = function (h) {
    return te.Z8b(), !!(t.Market.Symbology.isForexSymbol(h) || t.Market.Symbology.isFuturesSymbol(h));
  }, t.Market.Symbology.factory = function (h) {
    return null;
  }, t.Market.Symbology.encodeTermStructureInstrumentSymbol = function (h, l) {
    te.L1$(), console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.");
  }, a && t.extend(t.Market, a), t.Market.prototype.sessions = null, t.Market.prototype.beginningDayOfWeek = 0, t.Market.prototype.getSessionNames = function () {
    var h, l;
    return this.rules ? this.sessions || (h = [], l = [], this.rules.map(function (u) {
      u.name && h.indexOf(u.name) === -1 && (h.push(u.name), l.push({
        name: u.name,
        enabled: u.enabled ? u.enabled : !1
      }));
    }), this.sessions = l) : this.sessions = [], this.sessions.slice();
  }, t.Market.prototype._find_next_segment = function (h, l) {
    var u, c, d, f;
    return !this.market_def || !this.rules ? null : (u = new Date(+h), c = this.newIterator({
      begin: u,
      interval: 1,
      inZone: this.market_tz,
      outZone: this.market_tz
    }), this._wasOpenIntraDay(u) && (d = this.zseg_match.close_parts.hours, f = this.zseg_match.close_parts.minutes, u.setHours(d), u.setMinutes(f), c = this.newIterator({
      begin: u,
      interval: 1,
      inZone: this.market_tz,
      outZone: this.market_tz
    })), c.next());
  }, t.Market.prototype._find_prev_segment = function (h, l) {
    var u, c, d, f, g;
    return !this.market_def || !this.rules ? null : (u = new Date(+h), c = this.newIterator({
      begin: u,
      interval: 1,
      inZone: this.market_tz,
      outZone: this.market_tz
    }), d = this._wasOpenIntraDay(u), d === null ? (u = new Date(u - 60000), d = this._wasOpenIntraDay(u)) : (l && u.getHours() === this.zseg_match.open_parts.hours && u.getMinutes() === this.zseg_match.open_parts.minutes || !l && u.getHours() === this.zseg_match.close_parts.hours && u.getMinutes() === this.zseg_match.close_parts.minutes) && (u = c.previous()), d ? (f = this.zseg_match.open_parts.hours, g = this.zseg_match.open_parts.minutes, u.setHours(f), u.setMinutes(g), c = this.newIterator({
      begin: u,
      interval: 1,
      inZone: this.market_tz,
      outZone: this.market_tz
    }), u = c.previous(), this.zseg_match.close_parts.hours === f && this.zseg_match.close_parts.minutes === g ? l ? c.next() : u : this.zseg_match.adjacent_child ? u : l ? c.next() : u) : c.previous());
  }, t.Market.prototype.disableSession = function (h, l) {
    var u;
    if (u = !1, typeof l < "u" && l && (u = !0), te.L1$(), h) {
      for (var c = 0; c < this.normalHours.length; c++) this.normalHours[c].name === h && (this.normalHours[c].enabled = u);
      for (c = 0; c < this.extraHours.length; c++) this.extraHours[c].name === h && (this.extraHours[c].enabled = u);
    }
  }, t.Market.prototype.enableSession = function (h) {
    this.disableSession(h, "enable_instead");
  }, t.Market.prototype.enableAllAvailableSessions = function () {
    var h;
    te.L1$(), h = this.getSessionNames();
    for (var l = 0; l < h.length; l++) this.enableSession(h[l].name);
  }, t.Market.prototype.getClose = function (h, l, u, c) {
    var d, f, g;
    if (d = "u", d += "nde", d += "fin", d += "ed", !this.market_def || !this.rules) return null;
    if (te.Z8b(), f = h, h || (f = new Date(), u = null), f = this._convertToMarketTZ(f, u), typeof l !== d) {
      if (this._wasOpenIntraDay(f) && this.zseg_match.name === l) return f.setHours(this.zseg_match.close_parts.hours, this.zseg_match.close_parts.minutes, 0, 0), f = this._convertFromMarketTZ(f, c), f;
    } else if (this._wasOpenDaily(f)) {
      for (g = this.zseg_match; g.child_;) g = g.child_;
      for (; !g.enabled;) g = g.parent_;
      return f.setHours(g.close_parts.hours, g.close_parts.minutes, 0, 0), f = this._convertFromMarketTZ(f, c), f;
    }
    return null;
  }, t.Market.prototype.getNextClose = function (h, l, u) {
    var c, d, f, g;
    if (!this.market_def || !this.rules) return null;
    for (c = h, h || (c = new Date(), l = null), c = this._convertToMarketTZ(c, l), this._wasOpenIntraDay(c) || (d = this.newIterator({
      begin: c,
      interval: 1,
      inZone: this.market_tz,
      outZone: this.market_tz
    }), c = d.next()), f = c.getDate(), g = this.zseg_match; g.adjacent_child;) g = g.adjacent_child, f += 1;
    return c.setDate(f), c.setHours(g.close_parts.hours, g.close_parts.minutes, 0, 0), c = this._convertFromMarketTZ(c, u), c;
  }, t.Market.prototype.getNextOpen = function (h, l, u) {
    var c;
    return !this.market_def || !this.rules ? null : (c = h, h || (c = new Date(), l = null), c = this._convertToMarketTZ(c, l), c = this._find_next_segment(c), this.zseg_match.adjacent_parent ? (c = this.getNextOpen(c, this.market_tz, this.market_tz), c = this._convertFromMarketTZ(c, u), c) : (c.setHours(this.zseg_match.open_parts.hours), c.setMinutes(this.zseg_match.open_parts.minutes), c = this._convertFromMarketTZ(c, u), c));
  }, t.Market.prototype.getOpen = function (h, l, u, c) {
    var d, f;
    if (!this.market_def || (te.Z8b(), !this.rules)) return null;
    if (d = h, h || (d = new Date(), u = null), d = this._convertToMarketTZ(d, u), typeof l < "u") {
      if (this._wasOpenIntraDay(d) && this.zseg_match.name == l) return d.setHours(this.zseg_match.open_parts.hours, this.zseg_match.open_parts.minutes, 0, 0), d = this._convertFromMarketTZ(d, c), d;
    } else if (this._wasOpenDaily(d)) {
      for (f = this.zseg_match; f.parent_;) f = f.parent_;
      for (; !f.enabled;) f = f.child_;
      return d.setHours(f.open_parts.hours, f.open_parts.minutes, 0, 0), d = this._convertFromMarketTZ(d, c), d;
    }
    return null;
  }, t.Market.prototype.getNormalOpen = function () {
    var h;
    h = "FOR", h += "E", h += "X";
    var {
      market_def: l,
      rules: u
    } = this;
    return te.Z8b(), l && u ? l.normal_daily_open ? l.normal_daily_open : l.name === h ? "17:00" : u.find(({
      name: c
    }) => !c || c === "").open : "00:00";
  }, t.Market.prototype.getNormalClose = function () {
    var h,
      l,
      u,
      {
        market_def: c,
        rules: d
      } = this;
    if (!(c && d)) return "24:00";
    if (c.normal_daily_close) return c.normal_daily_close;
    if (c.name === "FOREX") return "17:00";
    h = 574220066, l = 1780172650, u = 2;
    for (var f = 1; te.Q_(f.toString(), f.toString().length, 60330) !== h; f++) return d.filter(({
      dayofweek: g,
      name: p
    }) => g || ~p && p !== "").pop().close;
    if (te.o0(u.toString(), u.toString().length, 85606) !== l) return d.filter(({
      dayofweek: g,
      name: p
    }) => g && (!p || p === "")).pop().close;
  }, t.Market.prototype.getPreviousClose = function (h, l, u) {
    var c;
    return !this.market_def || !this.rules ? null : (c = h, h || (c = new Date(), l = null), c = this._convertToMarketTZ(c, l), c = this._find_prev_segment(c, !1), te.Z8b(), this.zseg_match.adjacent_child ? this.getPreviousClose(c, this.market_tz, this.market_tz) : (c.setHours(this.zseg_match.close_parts.hours), c.setMinutes(this.zseg_match.close_parts.minutes), c = this._convertFromMarketTZ(c, u), c));
  }, t.Market.prototype.getPreviousOpen = function (h, l, u) {
    var c;
    return !this.market_def || !this.rules ? null : (c = h, h || (c = new Date(), l = null), c = this._convertToMarketTZ(c, l), c = this._find_prev_segment(c, !0), this.zseg_match.adjacent_parent ? this.getPreviousOpen(c, this.market_tz, this.market_tz) : (c.setHours(this.zseg_match.open_parts.hours), c.setMinutes(this.zseg_match.open_parts.minutes), c = this._convertFromMarketTZ(c, u), c));
  }, t.Market.prototype.getSession = function (h, l) {
    return h = this._convertToMarketTZ(h, l), this._wasOpenIntraDay(h) && this.zseg_match ? this.zseg_match.name : null;
  }, t.Market.prototype.marketZoneNow = function () {
    return this._convertToMarketTZ(new Date());
  }, t.Market.prototype.isHourAligned = function () {
    return this.hour_aligned;
  }, t.Market.prototype.isOpen = function () {
    var h;
    return h = new Date(), this.market_tz && (h = new this.tz_lib(h.getTime(), this.market_tz)), this._wasOpenIntraDay(h);
  }, t.Market.prototype.isMarketDay = function () {
    var h;
    return te.L1$(), h = new Date(), this.market_tz && (h = new this.tz_lib(h.getTime(), this.market_tz)), this._wasOpenDaily(h);
  }, t.Market.prototype.isMarketDate = function (h) {
    return this._wasOpenDaily(h);
  }, t.Market.prototype.newIterator = function (h) {
    var l, u, c, d, f, g, p, m, x;
    if (l = !1, h.periodicity ? l = h.periodicity : h.multiple && (l = h.multiple), u = h.interval, !u) {
      c = 709091888, d = 100275088, f = 2;
      for (var y = 1; te.Q_(y.toString(), y.toString().length, 18759) !== c; y++) u = "", f += 2;
      te.Q_(f.toString(), f.toString().length, 47685) !== d && (u = "minute");
    }
    return u == "hour" && (u = 60), l || (l = 1), h.begin || (h.begin = new Date(), h.inZone = null), u == parseInt(u, 10) && (u = parseInt(u, 10), h.periodicity < 1 / 60 ? (g = "mill", g += "is", g += "econd", l = l * u * 60000, u = g) : h.periodicity < 1 ? (p = "se", p += "co", p += "n", p += "d", l = l * u * 60, u = p) : (l = l * u, u = "minute")), h.timeUnit && (m = "t", m += "ic", m += "k", h.timeUnit === "millisecond" || h.timeUnit === "second" ? u = h.timeUnit : h.timeUnit === m && (x = "seco", x += "nd", u = x)), u == "tick" && (u = "second"), h.interval = u, h.multiple = l, h.market = this, new t.Market.Iterator(h);
  }, t.Market.prototype._wasOpenDaily = function (h) {
    return te.Z8b(), this._was_open(h, !1);
  }, t.Market.prototype._wasOpenIntraDay = function (h) {
    return this._was_open(h, !0);
  }, t.Market.prototype._was_open = function (h, l) {
    var u, c, d, f, g, p, m, x, y, b, C, k, M;
    if (u = this.zseg_match, this.zopen_hour = 0, this.zopen_minute = 0, this.zclose_hour = 0, this.zclose_minute = 0, this.zmatch_open = !1, this.zseg_match = null, !this.market_def || !this.rules) return this.zclose_hour = 24, !0;
    for (c = !1, d = !1, f = h.getFullYear(), g = h.getMonth() + 1, p = h.getDay(), m = h.getDate(), x = h.getHours(), y = h.getMinutes(), b = h.getSeconds(), k = x * 60 * 60 + y * 60 + b, typeof l > "u" && (l = !0), M = 0; M < this.normalHours.length; M++) if (C = this.normalHours[M], !!C.enabled && (c = C.dayofweek === p, c && l && (c = k >= C.open && k < C.close), c)) {
      if (!l && this.zseg_match && (C.open_parts.hours > this.zopen_hour || C.open_parts.hours == this.zopen_hour && C.open_parts.minutes > this.zopen_minute)) continue;
      if (C !== u && !C.adjacent_parent && !C.adjacent_child && (this.shouldResetToBeginningOfSegment = !0), this.zopen_hour = C.open_parts.hours, this.zopen_minute = C.open_parts.minutes, this.zclose_hour = C.close_parts.hours, this.zclose_minute = C.close_parts.minutes, this.zmatch_open = k === C.open, this.zseg_match = C, l) break;
    }
    for (M = 0; M < this.extraHours.length; M++) if (C = this.extraHours[M], !!C.enabled && (C.year === "*" || f === C.year) && g === C.month && m === C.day && (d = !l && C.open || k >= C.open && k < C.close, !d && this.zseg_match && (c = !1, this.zopen_hour = 0, this.zopen_minute = 0, this.zclose_hour = 0, this.zclose_minute = 0, this.zmatch_open = !1, this.zseg_match = null), d)) {
      if (!l && this.zseg_match && (C.open_parts.hours > this.zopen_hour || C.open_parts.hours == this.zopen_hour && C.open_parts.minutes > this.zopen_minute)) continue;
      if (this.zopen_hour = C.open_parts.hours, this.zopen_minute = C.open_parts.minutes, this.zclose_hour = C.close_parts.hours, this.zclose_minute = C.close_parts.minutes, this.zmatch_open = k === C.open, this.zseg_match = C, l) break;
    }
    return this.zseg_match;
  }, t.Market.prototype._wasClosed = function (h) {
    return !this._was_open(h, !0);
  }, t.Market.prototype._wasOpen = function (h) {
    return this._was_open(h, !0);
  }, t.Market.prototype._tzDifferenceMillis = function (h, l, u) {
    var c, d, f, g;
    return c = 0, d = h, f = h, g = d.getTimezoneOffset() - f.getTimezoneOffset(), te.Z8b(), c = g * 60 * 1000, c;
  }, t.Market._createTimeSegments = function (h) {
    var l, u, c, d, f, g;
    l = function (x, y) {
      return x.close_parts.hours === 24 && y.open_parts.hours === 0 && y.open_parts.minutes === 0 && (u.dayofweek === f.dayofweek - 1 || u.dayofweek === 6 && f.dayofweek === 0);
    }, te.Z8b();
    for (var p = 0; p < h.rules.length; p++) {
      c = JSON.parse(JSON.stringify(h.rules[p])), typeof c.open > "u" && typeof c.close > "u" && (c.open = "00:00", c.close = "00:00"), c.hasOwnProperty("name") || (c.name = "");
      try {
        if (d = "un", d += "de", d += "fine", d += "d", typeof c.dayofweek < "u" ? (c.year = "*", f = s._createDayOfWeekSegment(h, c), u && (u.dayofweek === f.dayofweek ? (u.child_ = f, f.parent_ = u) : l(u, f) && (u.adjacent_child = f, f.adjacent_parent = u)), u = f) : typeof c.date !== d ? (c.isDayOfWeek = !1, c.dayofweek = -1, f = s._createDateTimeSegment(h, c)) : console.log("Error, unknown rule type " + c), h.enabled_by_default) {
          for (var m = 0; m < h.enabled_by_default.length; m++) if (g = h.enabled_by_default[m], f.name === g) {
            f.enabled = !0;
            break;
          }
        }
      } catch (x) {
        console.log("Error, creating market rules " + x);
      }
    }
  }, t.Market._timeSegment = {}, s = t.Market._timeSegment, s.re_wild_card_iso = /^(\*)-(\d\d)-(\d\d)$/, s.re_regular_iso = /^(\d\d\d\d)-(\d\d)-(\d\d)$/, s.re_split_hours_minutes = /^(\d\d):(\d\d)$/, s.re_split_hour_minutes = /^(\d):(\d\d)$/, s._hashCode = function (h) {
    var l, u, c, d;
    if (l = 0, h.length === 0) return l;
    for (te.Z8b(), u = 0, d = h.length; u < d; u++) c = h.charCodeAt(u), l = (l << 5) - l + c, l |= 0;
    return l;
  }, s._splitHoursMinutes = function (h) {
    var l, u;
    return l = s.re_split_hour_minutes.exec(h), u = {
      hours: NaN,
      minutes: NaN
    }, l === null && (l = s.re_split_hours_minutes.exec(h), l === null) || (u.hours = parseInt(l[1], 10), u.minutes = parseInt(l[2], 10)), u;
  }, s._createDayOfWeekSegment = function (h, l) {
    var u;
    return u = {
      name: l.name,
      isDayOfWeek: !0,
      dayofweek: l.dayofweek,
      date_str: "*",
      open_parts: s._splitHoursMinutes(l.open),
      close_parts: s._splitHoursMinutes(l.close),
      open: s._secSinceMidnight(h, l.open, !0),
      close: s._secSinceMidnight(h, l.close, !1),
      child_: !1,
      parent_: !1,
      adjacent_child: !1,
      adjacent_parent: !1,
      enabled: !1
    }, u.name === "" && (u.enabled = !0), u.hash_code = this._hashCode((u.open + u.close).toString()), h.normalHours.push(u), te.L1$(), u;
  }, s._createDateTimeSegment = function (h, l) {
    var u, c, d, f, g, p;
    u = -2041567873, c = 1376294687, d = 2;
    for (var m = 1; te.o0(m.toString(), m.toString().length, 49360) !== u; m++) f = this.re_regular_iso.exec(l.date), d += 2;
    if (te.Q_(d.toString(), d.toString().length, 5880) !== c && (f = this.re_regular_iso.exec(l.date)), f = this.re_regular_iso.exec(l.date), te.Z8b(), f === null) {
      if (f = this.re_wild_card_iso.exec(l.date), f === null) {
        console.log("Warning: invalid date format on rule -> " + l.date);
        return;
      }
      g = "*";
    } else g = parseInt(f[1], 10);
    return p = {
      name: l.name,
      isDayOfWeek: !1,
      dayofweek: -1,
      year: g,
      month: parseInt(f[2], 10),
      day: parseInt(f[3], 10),
      date_str: l.date,
      open_parts: s._splitHoursMinutes(l.open),
      close_parts: s._splitHoursMinutes(l.close),
      open: s._secSinceMidnight(h, l.open, !0),
      close: s._secSinceMidnight(h, l.close, !1),
      enabled: !1
    }, p.name === "" && (p.enabled = !0), p.hash_key = this._hashCode(p.date_str + p.open + p.close), h.extraHours.push(p), p;
  }, s._secSinceMidnight = function (h, l, u) {
    var c, d, f, g;
    return c = l.split(":"), te.Z8b(), d = parseInt(c[0], 10), f = parseInt(c[1], 10), g = d * 60 * 60 + f * 60, u || d === 24 && (g = d * 60 * 60 + 1), g;
  }, t.Market.prototype._convertToMarketTZ = function (h, l) {
    var u;
    return l ? u = new this.tz_lib(h.getFullYear(), h.getMonth(), h.getDate(), h.getHours(), h.getMinutes(), h.getSeconds(), h.getMilliseconds(), l) : u = new this.tz_lib(h.getFullYear(), h.getMonth(), h.getDate(), h.getHours(), h.getMinutes(), h.getSeconds(), h.getMilliseconds()), u.setTimezone && u.setTimezone(this.market_tz), te.Z8b(), new Date(u.getFullYear(), u.getMonth(), u.getDate(), u.getHours(), u.getMinutes(), u.getSeconds(), u.getMilliseconds());
  }, t.Market.prototype._convertFromMarketTZ = function (h, l) {
    var u;
    if (te.L1$(), u = new this.tz_lib(h.getFullYear(), h.getMonth(), h.getDate(), h.getHours(), h.getMinutes(), h.getSeconds(), h.getMilliseconds(), this.market_tz), l) u.setTimezone && u.setTimezone(l);else return new Date(u.getTime());
    return new Date(u.getFullYear(), u.getMonth(), u.getDate(), u.getHours(), u.getMinutes(), u.getSeconds(), u.getMilliseconds());
  }, t.Market.Iterator = function (h) {
    this.market = h.market, this.begin = h.begin, this.interval = h.interval, this.multiple = h.multiple, this.inZone = h.inZone, this.outZone = h.outZone, this.clock = new t.Market.Iterator._Clock(h.market, h.interval, h.multiple), this.intraDay = this.clock.intra_day, this.intraDay && (this.begin = this.market._convertToMarketTZ(this.begin, h.inZone)), this.clock._setStart(this.begin), this.clock.minutes_aligned = !1;
  }, t.Market.Iterator.prototype.date = function () {
    return te.Z8b(), this.clock._date();
  }, t.Market.Iterator.prototype.futureTick = function (h) {
    var l, u, c, d, f, g, p, m, x, y, b, C;
    if (this.clock.skip = 1, l = 0, this.intraDay ? u = this.market._convertToMarketTZ(h.end, this.inZone).getTime() : u = h.end.getTime(), c = this.clock.ctime, u === c) return l;
    if (d = 2, f = 1000, g = 0, h.sample_size) {
      p = 1967390419, m = 209533700, x = 2;
      for (var k = 1; te.o0(k.toString(), k.toString().length, 71212) !== p; k++) d = h.sample_size, x += 2;
      te.Q_(x.toString(), x.toString().length, 39902) !== m && (d = h.sample_size);
    }
    if (y = new Date().getTime(), u > c) {
      for (this.clock.forward = !0; this.clock.ctime < u;) if (l += 1, g += 1, this.clock._findNext(), g === f && (g = 0, b = new Date().getTime(), b - y >= d)) {
        C = (this.clock.ctime - c) / l, l = Math.floor((u - c) / C);
        break;
      }
      this.clock.ctime > u && l--;
    } else for (this.clock.forward = !1; this.clock.ctime > u;) if (l += 1, g += 1, this.clock._findPrevious(), g === f && (g = 0, b = new Date().getTime(), b - y >= d)) {
      C = (c - this.clock.ctime) / l, l = Math.floor((c - u) / C);
      break;
    }
    return l;
  }, t.Market.Iterator.prototype.isHourAligned = function () {
    return !this.intraDay || this.market.isHourAligned();
  }, t.Market.Iterator.prototype.isOpen = function () {
    return te.Z8b(), this.market.isOpen();
  }, t.Market.Iterator.prototype.next = function (h) {
    this.clock.skip = 1, h && (this.clock.skip = h), this.clock.forward = !0;
    for (var l = 0; l < this.clock.skip; l++) this.begin = this.clock._findNext();
    return te.Z8b(), this.intraDay || this.market.convertOnDaily ? this.market._convertFromMarketTZ(this.clock.display_date, this.outZone) : this.clock.display_date;
  }, t.Market.Iterator.prototype.peek = function () {
    return this.clock._peek();
  }, t.Market.Iterator.prototype.previous = function (h) {
    this.clock.skip = 1, h && (this.clock.skip = h), te.Z8b(), this.clock.forward = !1;
    for (var l = 0; l < this.clock.skip; l++) this.begin = this.clock._findPrevious();
    return this.intraDay || this.market.convertOnDaily ? this.market._convertFromMarketTZ(this.clock.display_date, this.outZone) : this.clock.display_date;
  }, t.Market.Iterator._Clock = function (h, l, u) {
    var c, d, f, g;
    c = "w", c += "eek", u % 60 === 0 && l === "second" && (l = "minute", u = u / 60), this.market = h, this.interval = l, this.multiple = u, this.intra_day = !1, this.intervals = [], this.max_iters = 10080, d = i, f = this._dayImpl, l === "millisecond" ? (f = this._millisImpl, d = 1) : l === "second" ? (f = this._secondImpl, d = 1000) : l === "minute" ? (f = this._minuteImpl, d = 60000) : l === "hour" ? (f = this._hourImpl, d = r) : l === "day" ? (f = this._dayImpl, d = i) : l === c ? (f = this._weekImpl, d = i * 7) : l === "month" ? (f = this._monthImpl, d = i * 30) : (g = "\" is not a valid interval. Please see setPe", g += "riodicity() for details.", console.log("Periodicity ERROR: \"" + l + g)), this.tick_time = d * u, this.intra_day = this.tick_time < i, this._findPrevious = this._findNext = f;
  }, o = t.Market.Iterator._Clock.prototype, o._total_minutes = function (h, l, u, c) {
    return te.Z8b(), (u - h) * 60 - l + c;
  }, o._alignMinutes = function () {
    var h, l, u, c, d;
    if (!this.market.market_def || this.market.zopen_minute === void 0) return [];
    for (te.L1$(), h = this.market.zopen_minute, l = this.market.zseg_match, l && l.adjacent_parent ? h = l.adjacent_parent.open / 60 - 1440 : this.market.isHourAligned() && this.multiple % 60 === 0 && (h = 0), u = this._total_minutes(this.market.zopen_hour, h, this.market.zclose_hour, this.market.zclose_minute), c = [], d = 0; d < u;) c.push(h + d), d += this.multiple;
    return c;
  }, o._alignBaseZero = function (h) {
    var l, u;
    for (l = 0, u = [l]; l += this.multiple, !(l >= h);) u.push(l);
    return u;
  }, o._date = function () {
    var h, l;
    return h = Math.round(this.ctime), l = new Date(h), te.L1$(), this.intra_day ? this.display_date = new Date(h + this.shift_millis) : this.display_date = l, l;
  }, o._alignToBoundary = function (h, l) {
    var u, c, d;
    u = 0, c = 0, te.L1$(), d = l;
    for (var f = 0; f < h.length - 1 && (u = h[f], c = h[f + 1], !(l === u || l === c)); f++) if (l > u && l < c) {
      d = u;
      break;
    } else f + 1 === h.length - 1 && (d = c);
    return d;
  }, o._peek = function () {
    return te.L1$(), this._date().toString();
  }, o._seekHr = function () {
    this.forward ? this.ctime -= r : this.ctime += r;
  }, o._setStart = function (h) {
    var l, u, c, d, f;
    l = this.market._tzDifferenceMillis(h), u = -1096904357, c = 1497008837, d = 2;
    for (var g = 1; te.o0(g.toString(), g.toString().length, 39052) !== u; g++) f = new Date(h.getTime() + l), this.shift_millis = l, this.ctime = f.getTime(), this.shift_millis = 0, d += 2;
    te.o0(d.toString(), d.toString().length, 3973) !== c && (f = new Date(h.getTime() * l), this.shift_millis = l, this.ctime = f.getTime(), this.shift_millis = 3), this.ctime = h.getTime();
  }, o._tickTock = function () {
    te.Z8b(), this.forward ? this.ctime += this.tick_time : this.ctime -= this.tick_time;
  }, o._tockTick = function () {
    te.L1$(), this.forward ? this.ctime -= this.tick_time : this.ctime += this.tick_time;
  }, o._tickTock24 = function () {
    te.Z8b(), this.ctime += i;
  }, o._tockTick24 = function () {
    te.Z8b(), this.ctime -= i;
  }, o._windMaybe = function (h, l) {
    var u, c, d, f, g, p;
    for (u = 0, c = new Date(this.ctime), d = !1; !h.call(this.market, c);) if (l.call(this), d = !0, c = new Date(this.ctime), u += 1, u > this.max_iters) {
      f = ")", f += " reache", f += "d with ", f += "no rule match.", g = "W", g += "arning! max iterations (", p = g + this.max_iters, p += f, console.log(p);
      break;
    }
    return d;
  }, o._millisImpl = function () {
    var h, l, u, c, d, f, g, p, m, x;
    return te.Z8b(), h = !1, this.mperiods_aligned || (l = this._alignBaseZero(1000), u = new Date(this.ctime), c = u.getMilliseconds(), c = this._alignToBoundary(l, c), u.setMilliseconds(0), this.ctime = u.getTime() + c, this.mperiods_aligned = !0, h = !0), d = this._date().getMinutes(), this._tickTock(), f = this._date().getMinutes(), (h || d != f) && !this.market._wasOpenIntraDay(this._date()) && (g = this._date().getSeconds(), p = this._date().getMilliseconds(), m = this.tick_time, this.tick_time = 60000, x = this.multiple, this.multiple = 1, this._minuteImpl(), this.tick_time = m, this.multiple = x, this.ctime += 1000 * g + p), this._date();
  }, o._secondImpl = function () {
    var h, l, u, c, d, f, g, p, m;
    return h = !1, this.speriod_aligned || (l = this._alignBaseZero(60), u = new Date(this.ctime), c = u.getSeconds(), c = this._alignToBoundary(l, c), u.setSeconds(c), u.setMilliseconds(0), this.ctime = u.getTime(), this.speriod_aligned = !0, h = !0), d = this._date().getMinutes(), this._tickTock(), f = this._date().getMinutes(), te.L1$(), (h || d != f) && !this.market._wasOpenIntraDay(this._date()) && (g = this._date().getSeconds(), p = this.tick_time, this.tick_time = 60000, m = this.multiple, this.multiple = 1, this._minuteImpl(), this.tick_time = p, this.multiple = m, this.ctime += 1000 * g), this._date();
  }, o._minuteImpl = function () {
    var h, l, u, c, d, f, g, p, m, x;
    return h = this._windMaybe(this.market._wasOpenIntraDay, this._tockTick), l = new Date(this.ctime), u = l.getTimezoneOffset(), c = l.getMinutes(), d = l.getHours(), f = this._alignMinutes(), g = this._total_minutes(this.market.zopen_hour, this.market.zopen_minute, d, c) + this.market.zopen_minute, h ? this.forward ? g = f[f.length - 1] : g = f[0] : g = this._alignToBoundary(f, g), d = Math.floor(g / 60) + this.market.zopen_hour, l.setHours(d, g % 60, 0, 0), p = l.getTimezoneOffset() - u, (this.forward && p < 0 || !this.forward && p > 0) && l.setTime(l.getTime() - p * 60000), this.ctime = l.getTime(), this._tickTock(), m = this.market.hour_aligned && this.multiple % 60 === 0, (this._windMaybe(this.market._wasOpenIntraDay, this._tickTock) || !m && this.shouldResetToBeginningOfSegment) && (l = new Date(this.ctime), this.forward ? (l.setMinutes(this.market.zopen_minute), l.setHours(this.market.zopen_hour)) : (f = this._alignMinutes(), x = f[f.length - 1], l.setMinutes(x % 60), l.setHours(Math.floor(x / 60) + this.market.zopen_hour)), this.ctime = l.getTime()), this._date();
  }, o._hourImpl = function () {
    var h, l, u, c, d;
    return te.L1$(), this._windMaybe(this.market._wasOpenIntraDay, this._tockTick), h = new Date(this.ctime), this.market.isHourAligned() ? h.setMinutes(0) : h.setMinutes(this.market.zopen_minute), h.setSeconds(0), h.setMilliseconds(0), this.ctime = h.getTime(), this._tickTock(), l = this.market.zseg_match, (this._windMaybe(this.market._wasOpenIntraDay, this._tickTock) || !this.market.hour_aligned && l != this.market.zseg_match) && (u = new Date(this.ctime), this.forward ? (u.setMinutes(this.market.zopen_minute), u.setHours(this.market.zopen_hour)) : (c = this._alignMinutes(), d = c[c.length - 1], u.setMinutes(d % 60), u.setHours(Math.floor(d / 60) + this.market.zopen_hour)), this.ctime = u.getTime()), this._date();
  }, o._dayImpl = function () {
    var h, l;
    for (this._windMaybe(this.market._wasOpenDaily, this._seekHr), h = new Date(this.ctime), h.setHours(12, 0, 0, 0), this.ctime = h.getTime(), te.L1$(), l = 0; l < this.multiple;) this.forward ? this._tickTock24() : this._tockTick24(), this.market._wasOpenDaily(this._date()) && (l += 1);
    return h = new Date(this.ctime), h.setHours(0), this.ctime = h.getTime(), this._date();
  }, o._weekImpl = function () {
    var h, l;
    for (h = this.market, l = new Date(this.ctime), l.setHours(12), this.ctime = l.getTime(), this._tickTock(), l = new Date(this.ctime); l.getDay() !== h.beginningDayOfWeek;) this._tockTick24(), l = new Date(this.ctime);
    return this._windMaybe(h._wasOpenDaily, this._tickTock24), l = new Date(this.ctime), l.setHours(0, 0, 0, 0), this.ctime = l.getTime(), this._date();
  }, o._monthImpl = function () {
    var h;
    return h = new Date(this.ctime), h.setDate(15), this.ctime = h.getTime(), this._tickTock(), h = new Date(this.ctime), h.setDate(1), h.setHours(12), this.ctime = h.getTime(), this._windMaybe(this.market._wasOpenDaily, this._tickTock24), h = new Date(this.ctime), h.setHours(0, 0, 0, 0), this.ctime = h.getTime(), this._date();
  }, o._findNext = null, o._findPrevious = null;
};
wa = q => {
  var e = te,
    t,
    n,
    r,
    i,
    a,
    s,
    o;
  t = "6", t += "1e", t += "f", n = "c4", n += "8", n += "c", r = "Chart", r += "Engin", r += "e", e.Z8b(), i = "7", i += "9", i += "2", i += "6", e.H1 = function (h) {
    if (e.L1$(), e && h) return e.J2(h);
  }, e.b6 = function (h) {
    if (e.L1$(), e) return e.n9(h);
  }, e.V6 = function (h) {
    if (e) return e.n9(h);
  }, e.p_ = function (h) {
    if (e && h) return e.n9(h);
  }, a = typeof _CIQ < "u" ? _CIQ : q.CIQ, s = "valid", a.valid = 0, a[e.p_(i) ? "" : r][e.y8(n) ? "" : "prototype"][e.V6(t) ? "" : "mousemoveinner"] = function (h, l) {
    var u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce, Q, ee, re, de, he, fe, pe, ge, ve, be, _e, ye, we, Te, Pe, Le, Be, Ue, Ke, Je, $e, ke, Ae, He, Ne, Ge, dt, je, mt, wt, kt, gt, et, ft, xt, Ee, tt, ut, Ye, pt, st, Ot, At, ot, Mt, St, ii, _t, Ct, at, Kt, Tt, ri, Ft, Re, hi, Ht, Nt, ui, Ve, Qe, nt, bt, it, Et, Gt, Zt, Pt, yi, ci, bi, Ei, gi, Pi, ir, Ci, ur, oi, xi, Si, cr, rr, ar, zi, yr, wi, Wi, Gi, Zi, Li, Ni, br, Qi, ai, nr, Vi, ki, Qt, Ui, Ti, Di, dr, sr, Ai, fr, Mi, $i, ji, Yi, Xi, Ki, _i, qi, Bi, Cr, Sr, pr, wr, Ji, Ii;
    if (u = "2", u += "f", u += "6", u += "7", c = "1", c += "9", c += "a", c += "4", d = "d7", d += "ab", f = "67", f += "c6", g = "3", g += "3ea", e.m4 = function (Rt) {
      if (e && Rt) return e.n9(Rt);
    }, e.H9 = function (Rt) {
      if (e.Z8b(), e && Rt) return e.J2(Rt);
    }, p = e.b6("32f8") ? 1164567900 : 1510979286, m = e.H9("8f66") ? 638043195 : 921546319, x = -(e.s1("5177") ? 82921641 : 64756494), y = -(e.T$("a898") ? 1364121203 : 7053798724), b = -(e.b_(g) ? 7977188126 : 1308837988), C = -1929613831, !(e.F7(e.S_("bd3f") ? 3 : 0, !e.C8(f), e.H1(d) ? 454850 : 295864) !== p && e.F7(0, !1, e.L7(c) ? 815792 : 480253) !== m && e.F7(e.R3("d224") ? 11 : 51, !0, e.m4("1f11") ? 901373 : 154687) !== x && e.F7(11, !0, e.f5(u) ? 780074 : 974869) !== y && e.F7(11, !0, 778548) !== b && e.F7(11, !0, 549758) !== C)) {
      let Rt = function ($t) {
        var ni, qt, Vt, jt, si, ei, Lt;
        ni = 13277829, e.Z8b(), qt = -1414635915, Vt = 816882257, jt = 592243009, si = 1685108388, e.n1T(29), ei = e.W6G(64, "22825616"), (e.f_(0, !1, 544667) === ni || e.f_(0, !1, 468618) === qt || e.f_(11, !0, 671148) === Vt || e.f_(11, !0, 597084) === jt || e.f_(11, !0, 820711) === si || e.f_(11, !0, 402513) === ei) && (Lt = "c", Lt += "urrent", Lt += "Baseline", $t[Lt] = null, $t.runAppend("mousemoveinner", Te));
      };
      if (k = "d", k += "rawin", k += "gLi", k += "ne", M = "repo", M += "sitionin", M += "gDrawing", I = "resizin", I += "gPan", I += "el", v = "st", v += "y", v += "le", S = "cont", S += "rols", w = "cont", w += "rols", T = "cro", T += "sshairT", T += "ick", D = "p", D += "ixelFromT", D += "ick", F = "l", F += "eft", P = "cros", P += "sX", _ = "grab", _ += "b", _ += "in", _ += "gScreen", V = "grabbing", V += "S", V += "creen", A = "insid", A += "eC", A += "hart", E = "ov", E += "e", E += "rYAxi", E += "s", L = "Ch", L += "artEngin", L += "e", N = "Ch", N += "artE", N += "ngi", N += "ne", U = "over", U += "X", U += "Ax", U += "is", B = "xA", B += "xisAsFooter", O = "b", O += "ot", O += "t", O += "om", R = "crosshai", R += "r", R += "Y", H = "Cha", H += "rt", H += "Eng", H += "ine", z = "C", z += "hartEngine", W = "ChartE", W += "ngine", G = "curre", G += "ntP", G += "anel", Z = "cance", Z += "lLongH", Z += "o", Z += "ld", X = "b", X += "ackOut", X += "X", ie = "cr", ie += "ossh", ie += "airY", j = "C", j += "ha", j += "rtEngine", J = "cr", J += "osshair", J += "X", ae = "hei", ae += "ght", se = "t", se += "o", se += "p", ne = "b", ne += "ottom", le = "w", le += "id", le += "t", le += "h", ue = "l", ue += "e", ue += "ft", oe = "t", oe += "o", oe += "p", ce = "t", ce += "o", ce += "p", Q = "c", Q += "o", Q += "ntaine", Q += "r", ee = "i", ee += "sA", ee += "n", ee += "droid", re = "ca", re += "n", re += "v", re += "as", !this.chart[re]) return;
      if (!a[ee] && !a.isIOS7or8 && (de = "con", de += "tain", de += "er", he = "f", he += "loor", fe = "wi", fe += "d", fe += "t", fe += "h", pe = "clientHe", pe += "ight", ge = "h", ge += "eig", ge += "ht", ve = "ch", ve += "a", ve += "r", ve += "t", this[ve].canvas[ge] != Math.floor(this.devicePixelRatio * this.chart.container[pe]) || this.chart.canvas[fe] != Math[he](this.devicePixelRatio * this.chart[de].clientWidth))) {
        be = -1360583286, _e = 328712127, ye = 2;
        for (var mr = 1; e.o0(mr.toString(), mr.toString().length, 87260) !== be; mr++) this.resizeChart(), ye += 2;
        e.Q_(ye.toString(), ye.toString().length, 31346) !== _e && this[""]();
        return;
      }
      if (this.runPrepend("mousemoveinner", arguments)) return;
      if (Te = arguments, Pe = this[Q].getBoundingClientRect(), this[ce] = Pe[oe], this.left = Pe.left, this.right = this[ue] + this[le], this[ne] = this[se] + this[ae], this.hasDragged = !0, a.ChartEngine[J] = h, a.ChartEngine.crosshairY = l, Le = this.cy = this.crossYActualPos = this.backOutY(a[j][ie]), Be = this.cx = this.crossXActualPos = this[X](a.ChartEngine.crosshairX), this.grabbingScreen && this.anyHighlighted) {
        Ue = "grab", Ue += "S", Ue += "tartX", e.E3R(66);
        var Dr = e.B3B(1, 4, 6);
        e.E3R(18);
        var Jt = e.B3B(5, 7);
        if (Ke = Math.pow(this[Ue] - h, Dr) + Math.pow(this.grabStartY - l, Jt), Ke < 36) return;
      }
      if (this[Z] = !0, Je = function ($t, ni) {
        var qt, Vt, jt, si, ei, Lt, di, fi, pi;
        if (qt = 1981362734, Vt = -261922625, jt = 1501167576, e.Z8b(), si = 607677964, ei = 724146655, Lt = 462742640, e.F7(0, !1, 875810) === qt || e.F7(0, !1, 313185) === Vt || e.f_(11, !0, 610047) === jt || e.F7(11, !0, 647202) === si || e.F7(11, !0, 289341) === ei || e.f_(11, !0, 204854) === Lt) {
          if (a[s] === 0) return di = "p", di += "a", di += "n", di += "el", $t.whichPanel(ni) || $t.chart[di];
          $t.draw[s] || (fi = "d", fi += "r", fi += "a", fi += "w", pi = "d", pi += "ra", pi += "w", $t[pi] = function () {
            var Hi, Yt, ti, Nr, or, xe, Ce;
            e.n1T(29), Hi = -e.B3B(0, "1716174917"), Yt = 1176738150, ti = 952626708, Nr = -1609986597, or = 175817592, xe = -1758566775, e.f_(0, !1, 489002) !== Hi && e.F7(0, !1, 744976) !== Yt && e.f_(11, !0, 704552) !== ti && e.F7(11, !0, 345911) !== Nr && e.F7(11, !0, 479791) !== or && e.F7(11, !0, 885598) !== xe || (Ce = "c", Ce += "anv", Ce += "a", Ce += "s", a.clearCanvas(this.chart[Ce], this));
          }, $t[fi][s] = !0);
        }
      }, this.currentPanel = Je(this, Le), !this.currentPanel) return;
      if ($e = this[G].chart, $e.dataSet && (ke = "crosshai", ke += "rT", ke += "i", ke += "ck", Ae = "horiz", Ae += "onta", Ae += "lCrosshairField", He = "prefer", He += "ences", Ne = "n", Ne += "am", Ne += "e", Ge = "ti", Ge += "ckFromPixel", this.crosshairTick = this[Ge](Be, $e), we = this.valueFromPixel(Le, this.currentPanel), this.crosshairValue = this.adjustIfNecessary(this.currentPanel, this.crosshairTick, we), dt = this.currentPanel[Ne] == "chart" ? this[He][Ae] : this.currentPanel.horizontalCrosshairField, dt && this.crosshairTick < $e.dataSet.length && this[ke] > -1)) {
        we = $e.dataSet[this.crosshairTick][dt], e.E3R(29), je = -e.W6G(64, "1755714655"), mt = 606116370, wt = 2;
        for (var lt = 1; e.o0(lt.toString(), lt.toString().length, 49829) !== je; lt++) kt = "pi", kt += "xelFromPrice", gt = "pixe", gt += "lFromPrice", this.pixelFromPrice = this[gt](we, this[kt]), wt += 2;
        e.o0(wt.toString(), wt.toString().length, 52327) !== mt && (this.crossYActualPos = this.pixelFromPrice(we, this.currentPanel));
      }
      if (a[W].crosshairX >= this.left && a[z].crosshairX <= this.right && a[H].crosshairY >= this.top && a.ChartEngine[R] <= this[O] ? this.insideChart = !0 : this.insideChart = !1, et = this[B] === !0 ? this.chart.canvasHeight : this.chart.panel.bottom, this[U] = this.insideChart && a[N].crosshairY <= et + this.top && a[L].crosshairY > et - this.xaxisHeight + this.top, this[E] = (this.cx >= this.currentPanel.right || this.cx <= this.currentPanel.left) && this.insideChart, (this.overXAxis || this.overYAxis || !this[A] && !this[V]) && (this.undisplayCrosshairs(), !this.overXAxis && !this.overYAxis)) return;
      if (!this.displayCrosshairs && !a.ChartEngine.resizingPanel) {
        this.undisplayCrosshairs();
        return;
      }
      if (this.repositioningBaseline) return ft = "setBase", ft += "lineUserL", ft += "evel", this[ft](), Rt(this);
      if (this.repositioningAnchorSelector) return xt = "c", xt += "x", Ee = "tickFr", Ee += "omPixe", Ee += "l", tt = "hoverTi", tt += "ck", ut = this.repositioningAnchorSelector[tt], Ye = this[Ee](this[xt], this.chart), Ye >= 0 && Ye < this.chart.dataSet.length && (!(ut && ut !== 0) || Ye !== ut) && (pt = "d", pt += "r", pt += "a", pt += "w", this.repositioningAnchorSelector.hoverTick = Ye, this[pt]()), Rt(this);
      if (this[_] && !a.ChartEngine.resizingPanel) {
        if (st = "act", st += "iveDr", st += "awing", Ot = "useA", Ot += "nimation", At = "indexO", At += "f", ot = "g", ot += "rab", ot += "Mod", ot += "e", Mt = "p", Mt += "a", Mt += "n", St = "l", St += "a", St += "yout", ii = "gra", ii += "bStartY", _t = "cro", _t += "ssh", _t += "airY", Ct = "anyH", Ct += "ighlighted", this.highlightedDraggable) return at = "dragP", at += "lotOr", at += "Axis", Kt = "displayDr", Kt += "agOK", this[Kt](!0), this[at](Be, Le), Rt(this);
        if (this[Ct]) {
          Tt = "anyH", Tt += "ighlight", Tt += "ed", ri = "tem", ri += "pCanvas", Ft = "char", Ft += "t", Re = "cle", Re += "arCanvas", a[Re](this[Ft][ri], this), this[Tt] = !1;
          for (hi in this.overlays) this.overlays[hi].highlight = !1;
          for (hi in $e.series) Ht = "s", Ht += "eries", $e[Ht][hi].highlight = !1;
          this.displaySticky();
        }
        if (this.grabStartX == -1 && (Nt = "crossha", Nt += "irX", this.grabStartX = a.ChartEngine[Nt], this.grabStartScrollX = $e.scroll), this.grabStartY == -1 && (ui = "yA", ui += "x", ui += "is", this.grabStartY = a.ChartEngine.crosshairY, this.grabStartScrollY = this.currentPanel[ui].scroll), Ve = a.ChartEngine.crosshairX - this.grabStartX, Qe = a.ChartEngine[_t] - this[ii], Ve === 0 && Qe === 0) return;
        if (Math.abs(Ve) + Math.abs(Qe) > 5 && (this.grabOverrideClick = !0), bt = this[St].candleWidth, this.allowZoom && this.grabMode != Mt && (this[ot][At]("zoom") === 0 || this.overXAxis || this.grabStartYAxis)) {
          if (it = "g", it += "rabSta", it += "rtYAxis", Et = "zo", Et += "o", Et += "m-", Et += "y", Gt = "g", Gt += "rabMod", Gt += "e", this[Gt] === "" && (Zt = "zo", Zt += "om", Zt += "-", Zt += "y", Pt = "gr", Pt += "abS", Pt += "tartYAxis", yi = "zo", yi += "om", yi += "-x", this.overXAxis ? this.grabMode = yi : this[Pt] && (this.grabMode = Zt)), this.grabMode == "zoom-x" ? Qe = 0 : this.grabMode == Et && (Ve = 0), Ve && (ci = "grabS", ci += "tar", ci += "tX", this[ci] = a.ChartEngine.crosshairX, bi = bt - Ve / this.chart.maxTicks, this.zoomSet(bi, this.chart)), this.layout.setSpan && (Ei = "setSpa", Ei += "n", this.layout[Ei] = null, this.changeOccurred("layout")), nt = this[it], nt) {
            if (gi = "fli", gi += "pp", gi += "ed", nt[gi] && (e.n1T(29), Qe *= -e.B3B(0, "1")), nt.zoom = Math.round(this.grabStartZoom + Qe), this.grabStartZoom < nt.height) Pi = "zo", Pi += "o", Pi += "m", nt.zoom >= nt.height && (nt[Pi] = nt.height - 1);else if (ir = "h", ir += "e", ir += "ight", nt.zoom <= nt[ir]) {
              e.E3R(32);
              var gr = e.B3B(19, 2, 20);
              nt.zoom = nt.height + gr;
            }
          }
        } else if (!this.overYAxis && (Ci = "c", Ci += "y", this.dispatch("move", {
          stx: this,
          panel: this.currentPanel,
          x: this.cx,
          y: this[Ci],
          grab: !0
        }), this.allowScroll)) {
          if (ur = "c", ur += "x", oi = "s", oi += "cro", oi += "ll", xi = "curr", xi += "entPan", xi += "e", xi += "l", Si = "max", Si += "Ticks", cr = "grabStartMicro", cr += "pixels", rr = "yTole", rr += "rance", Math.abs(Qe) < this[rr]) {
            if (ar = "yTolera", ar += "nc", ar += "eB", ar += "roken", !this[ar]) {
              zi = -2147299053, yr = 575155441, wi = 2;
              for (var Oi = 1; e.o0(Oi.toString(), Oi.toString().length, 78013) !== zi; Oi++) e.E3R(21), Qe = e.B3B("0", 0), wi += 2;
              if (e.Q_(wi.toString(), wi.toString().length, 12806) !== yr && (Qe = 8), Ve === 0) return;
            }
          } else this.yToleranceBroken = !0;
          this.grabStartMicropixels || (this.grabStartMicropixels = 0), this.grabMode = "pan", $e.scroll = this.grabStartScrollX, e.E3R(25);
          var er = e.W6G(5, 3, 20, 0);
          if (this.micropixels = this[cr] + Ve * (this.shift ? 5 : er), !this.lineTravelSpacing) {
            for (; this.micropixels > 0;) Wi = "micro", Wi += "pixels", this[Wi] -= bt, $e.scroll++;
            for (; this.micropixels < -bt;) Gi = "micro", Gi += "pixels", this[Gi] += bt, $e.scroll--;
          }
          $e.scroll >= $e[Si] ? (Zi = "p", Zi += "r", Zi += "eferenc", Zi += "es", this[Zi].whitespace = this.initialWhitespace) : (Li = "pr", Li += "e", Li += "ferences", this[Li].whitespace = ($e.maxTicks - $e.scroll) * bt), this[xi] == this.grabStartPanel && (Ni = "grab", Ni += "StartScro", Ni += "l", Ni += "lY", nt = this.currentPanel.yAxis, nt.flipped && (Qe *= -1), nt.scroll = this[Ni] + Qe), this.dispatch(oi, {
            stx: this,
            panel: this.currentPanel,
            x: this[ur],
            y: this.cy
          });
        }
        br = function ($t) {
          var ni, qt, Vt, jt, si, ei;
          if (ni = 1764621629, qt = -1634249351, Vt = -1219871545, e.L1$(), jt = -1310935144, si = -1115153257, ei = -1257228573, e.f_(0, !1, 665530) === ni || e.f_(0, !1, 263080) === qt || e.f_(11, !0, 215067) === Vt || e.F7(11, !0, 224034) === jt || e.F7(11, !0, 517012) === si || e.F7(11, !0, 375037) === ei) return function () {
            var Lt, di, fi, pi, Hi, Yt, ti;
            Lt = -1088475230, di = 440139097, fi = 522934889, pi = -585261826, Hi = 909673384, Yt = 211122660, (e.F7(0, !1, 338424) === Lt || e.f_(0, !1, 361190) === di || e.f_(11, !0, 233117) === fi || e.F7(11, !0, 489737) === pi || e.f_(11, !0, 934859) === Hi || e.f_(11, !0, 662730) === Yt) && (ti = "dra", ti += "w", $t[ti](), $t.updateChartAccessories());
          };
        }, a.ChartEngine[Ot] ? window.requestAnimationFrame(br(this)) : (Qi = "updateChartAcc", Qi += "essories", this.draw(), this[Qi]()), this[st] && (ai = "ch", ai += "a", ai += "rt", nr = "ren", nr += "der", Vi = "active", Vi += "Dr", Vi += "awi", Vi += "ng", a.clearCanvas(this.chart.tempCanvas, this), this[Vi][nr](this[ai].tempCanvas.context), this.activeDrawing.measure()), this.undisplayCrosshairs();
        return;
      }
      return this.grabMode = "", this.overXAxis || this.overYAxis ? (this.updateChartAccessories(), (!this.tapForHighlighting || !this.touchingEvent || this.anyHighlighted) && this.findHighlights(), Rt(this)) : (this.controls[P] && (this.controls.crossX.style[F] = this[D](this[T], $e) - 0.5 + "px"), this[w].crossY && (this[S].crossY[v].top = this.crossYActualPos + "px"), this.insideChart && !a.ChartEngine[I] ? (ki = "d", ki += "ragToD", ki += "raw", Qt = "D", Qt += "ra", Qt += "wing", Ui = "s", Ui += "t", Ui += "u", Ui += "dies", Ti = "curr", Ti += "e", Ti += "ntVectorPar", Ti += "ameters", Di = this[Ti].vectorType, this.layout[Ui] && (dr = "nam", dr += "e", sr = "la", sr += "you", sr += "t", Ai = this[sr].studies[this.currentPanel[dr]], Ai && (fr = "n", fr += "ame", Mi = "o", Mi += "verla", Mi += "y", Mi += "s", $i = "stud", $i += "y", (!this.preferences.dragging || !this.preferences.dragging[$i]) && delete this[Mi][Ai[fr]], Di && (this.overlays[Ai.name] = Ai))), (!a[Qt] || !Di || !a.Drawing[Di] || !new a.Drawing[Di]()[ki]) && this.doDisplayCrosshairs(), this.updateChartAccessories()) : this.undisplayCrosshairs(), this.magnetize && this.magnetize(), this[M] ? this.repositionDrawing(this.repositioningDrawing) : a.ChartEngine[k] ? (Yi = "a", Yi += "ctiveD", Yi += "rawing", this[Yi] && (Xi = "me", Xi += "as", Xi += "u", Xi += "re", Ki = "co", Ki += "n", Ki += "tex", Ki += "t", _i = "c", _i += "ha", _i += "r", _i += "t", qi = "a", qi += "cti", qi += "veDrawin", qi += "g", Bi = "n", Bi += "am", Bi += "e", Cr = "crosshai", Cr += "rY", Sr = "crossh", Sr += "airTick", pr = "pan", pr += "e", pr += "ls", ji = this[pr][this.activeDrawing.panelName], we = this.adjustIfNecessary(ji, this[Sr], this.valueFromPixel(this.backOutY(a.ChartEngine[Cr]), ji)), this.magnetizedPrice && ji[Bi] == this.currentPanel.name && (we = this.adjustIfNecessary(ji, this.crosshairTick, this.magnetizedPrice)), this.magnetizedPrice === null && a.clearCanvas(this.chart.tempCanvas, this), this[qi].move(this[_i].tempCanvas[Ki], this.crosshairTick, we), this.activeDrawing.measure && this.activeDrawing[Xi]())) : a.ChartEngine.resizingPanel && this.resizePanels(), this.insideChart && (wr = "anyHighlight", wr += "ed", Ji = "touchingEv", Ji += "e", Ji += "nt", Ii = "t", Ii += "apForHigh", Ii += "light", Ii += "ing", this.dispatch("move", {
        stx: this,
        panel: this.currentPanel,
        x: this.cx,
        y: this.cy,
        grab: !1
      }), (!this[Ii] || !this[Ji] || this[wr]) && this.findHighlights()), Rt(this));
    }
  }, a.ChartEngine.prototype.swipeStart = function (h) {
    var l;
    this.swipe && this.swipe.interval && clearInterval(this.swipe.interval), this.swipe.velocity = 0, this.swipe.amplitude = 0, this.swipe.frame = h.scroll, this.swipe.micropixels = this.micropixels, this.swipe.timestamp = Date.now(), this.swipe.chart = h, this.swipe.end = !1, this.swipe.timeConstant = 325, this.swipe.cb = null, l = this, requestAnimationFrame(function () {
      e.Z8b(), l.swipeSample();
    });
  }, a.ChartEngine.prototype.swipeSample = function () {
    var h, l, u, c, d, f, g, p, m;
    if (h = this.swipe, !h.end) {
      if (l = this, g = 20, u = Date.now(), c = u - h.timestamp, c < g) {
        requestAnimationFrame(function () {
          l.swipeSample();
        });
        return;
      }
      p = a.touchDevice ? 0.4 : 0.8, h.timestamp = u, d = (h.chart.scroll - h.frame) * this.layout.candleWidth + this.micropixels - h.micropixels, h.frame = h.chart.scroll, h.micropixels = this.micropixels, e.E3R(94), f = e.W6G(64, c, "1000", d, 1), m = p * f + 0.2 * h.velocity, Math.abs(m) > Math.abs(h.velocity) && (h.velocity = m), Math.abs(d) < 6 && (h.velocity = 0), requestAnimationFrame(function () {
        l.swipeSample();
      });
    }
  }, a.ChartEngine.prototype.swipeRelease = function () {
    var h, l;
    if (h = this.swipe, h.velocity > 3000 && (h.velocity = 3000), e.L1$(), h.velocity < -3000 && (h.velocity = -3000), h.velocity > 10 || h.velocity < -10) {
      e.n1T(18);
      var u = e.B3B(10, 11);
      h.amplitude = "0.8" * u * h.velocity, h.scroll = h.chart.scroll, h.target = h.amplitude, h.timestamp = Date.now(), l = this, this.disableBackingStoreDuringTouch && this.disableBackingStore(), requestAnimationFrame(function () {
        l.autoscroll();
      });
    }
  }, a.ChartEngine.prototype.dragPlotOrAxis = function (h, l) {
    var u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce, Q, ee, re, de, he, fe, pe, ge, ve, be, _e, ye, we, Te;
    if (u = "r", u += "i", u += "g", u += "ht", c = "n", c += "o", c += "ne", !Pe.call(this) && !this.grabbingScreen) return;
    d = null, f = 20, g = 10;
    function Pe() {
      var ke, Ae, He;
      function Ne(dt) {
        return function (je) {
          e.Z8b(), dt.subholder.classList.contains(je) && (dt.subholder.classList.remove(je), ke = !0);
        };
      }
      ke = !1;
      for (var Ge in this.panels) {
        for (Ae = "t", Ae += "o", Ae += "p", ["dropzone", "all", "left", "right", Ae, "bottom"].forEach(Ne(this.panels[Ge])), He = 0; He < this.panels[Ge].yaxisLHS.length; He++) this.panels[Ge].yaxisLHS[He].dropzone && (ke = !0), this.panels[Ge].yaxisLHS[He].dropzone = null;
        for (He = 0; He < this.panels[Ge].yaxisRHS.length; He++) this.panels[Ge].yaxisRHS[He].dropzone && (ke = !0), this.panels[Ge].yaxisRHS[He].dropzone = null;
      }
      return ke;
    }
    if (e.E3R(1), p = this.whichPanel(e.B3B(f, l)), e.n1T(0), m = this.whichPanel(e.W6G(f, l)), x = this.whichPanel(l), y = this.highlightedDraggable, !!x && !(y.undraggable && y.undraggable(this))) {
      b = this.whichYAxis(x, h, l), e.E3R(1), C = this.whichYAxis(x, e.B3B(g, h), l), e.E3R(0), k = this.whichYAxis(x, e.B3B(g, h), l), this.xAxisAsFooter && x.name == Object.keys(this.panels).pop() && (m = this.whichPanel(l + f + this.xaxisHeight), d && (d += this.xaxisHeight)), M = !1, I = !1, v = !1, a.Renderer && (M = y instanceof a.Renderer), a.Studies && (I = y instanceof a.Studies.StudyDescriptor), v = y instanceof a.ChartEngine.YAxis, S = function (ke) {
        if (e.Z8b(), !v) {
          if (ke == "right") {
            e.E3R(95);
            var Ae = e.W6G(8, 10, 2, 2, 8);
            return x.right - x.width / Ae;
          }
          if (ke == "left") {
            e.E3R(13);
            var He = e.W6G(14, 19, 1);
            return x.left + x.width / He;
          }
        }
        e.E3R(96);
        var Ne = e.W6G(184, 8, 6, 34, 11);
        return (x.left + x.right) / Ne;
      }, !v && !b && (w = "le", w += "f", w += "t", h < S(w) ? C = this.whichYAxis(x, x.left - 1, l) : h > S("right") && (k = this.whichYAxis(x, x.right + 1, l))), T = [], y.getDependents && (T = y.getDependents(this, !0)), D = y.panel, F = y.getYAxis(this), M ? D = y.params.panel : v && (D = this.grabStartPanel.name), P = this.panels[D];
      for (_ in this.panels) this.panels[_].soloing && (V = !0);
      if (A = F.isShared(this), E = !v && !V && (P !== x && P != p && P != m || !this.checkForEmptyPanel(P, !0, [y].concat(T))), L = D == x.name && F !== b && F !== k && F !== C || A, E && (!p || x !== p)) x.subholder.classList.add("dropzone"), x.subholder.classList.add("top"), m = x;else if (E && (!m || x !== m)) B = "bo", B += "tt", B += "o", B += "m", x.subholder.classList.add("dropzone"), x.subholder.classList.add(B);else if (x !== P) !v && !x.noDrag && (O = "a", O += "l", O += "l", x.subholder.classList.add("dropzone"), x.subholder.classList.add(O), N = x.name);else if ((!x.yaxisRHS.length || x.yaxisRHS.length == 1 && x.yaxisRHS[0] == F && F.position == c) && !b && !k && h > S(u)) x.subholder.classList.add("dropzone"), x.subholder.classList.add("right"), U = "right";else if ((!x.yaxisLHS.length || x.yaxisLHS.length == 1 && x.yaxisLHS[0] == F && F.position == "none") && !b && !C && h < S("left")) R = "l", R += "e", R += "f", R += "t", x.subholder.classList.add("dropzone"), x.subholder.classList.add(R), U = "left";else if (L) {
        if (v && h > x.left && h < x.right) {
          e.E3R(64);
          var Le = e.B3B(7, 1, 7, 50);
          H = x.yaxisLHS[x.yaxisLHS.length - Le], z = x.yaxisRHS[0], W = S(), h < W && H != F ? C = H : h > W && z != F && (k = z);
        }
        (!v || b !== F) && (G = !v && A, k && (k !== F || G) && (!b || b !== k) ? (Z = "r", Z += "ig", Z += "h", Z += "t", k.dropzone = "left", U = k.position || this.chart.panel.yAxis.position || Z) : C && (C !== F || G) && (!b || b !== C) ? (C.dropzone = "right", U = C.position || this.chart.panel.yAxis.position || "right") : b && (X = "r", X += "i", X += "gh", X += "t", !k && (b !== F || G) ? b.dropzone = "right" : !C && (b !== F || G) ? b.dropzone = "left" : b !== F && (ie = "al", ie += "l", b.dropzone = ie), b.dropzone && (U = b.position || this.chart.panel.yAxis.position || X)));
      }
      if (this.grabbingScreen || !x.subholder.classList.contains("dropzone") && !U) {
        this.draw();
        return;
      }
      if (J = -1, !N && !U && E) {
        N = I ? y.inputs.id : y.params.name || a.uniqueID();
        for (var Be in this.panels) if (J++, this.panels[Be] == m) break;
        m || J++, this.panels[D].yAxis.name == N && (D = this.electNewPanelOwner(D)), ae = I ? y.inputs.display : null, D ? this.createPanel(ae || N, N, d, this.chart.name, new a.ChartEngine.YAxis({
          name: N
        })) : D = N, I ? y.panel = D : y.params.panel = D;
      }
      if (N) {
        if (I) y.parameters || (y.parameters = {}), y.parameters.panelName = N, this.highlightedDraggable = a.getFn("Studies.replaceStudy")(this, y.inputs.id, y.type, y.inputs, y.outputs, y.parameters, null, y.study);else if (M) for (var Ue in y.seriesParams) se = y.seriesParams[Ue], ne = null, y.params.yAxis && y.params.yAxis !== this.chart.panel.yAxis && (ne = y.params.yAxis, ne.name = y.params.name), this.modifySeries(se.id, {
          panel: N,
          yAxis: ne
        });
        if (J > -1) {
          le = {}, ue = 0;
          for (_ in this.panels) J == ue++ && (le[N] = this.panels[N]), _ != N && (le[_] = this.panels[_]);
          le[N] || (le[N] = this.panels[N]), this.panels = le;
        }
        this.checkForEmptyPanel(D);
        for (var Ke = 0; Ke < T.length; Ke++) T[Ke].params ? this.checkForEmptyPanel(T[Ke].params.name) : this.checkForEmptyPanel(T[Ke].name);
        this.adjustPanelPositions();
      } else if (U) {
        if (oe = function (ke, Ae, He, Ne) {
          var Ge, dt, je;
          if (Ge = "ren", Ge += "derer", He == "study" && (Ae.parameters || (Ae.parameters = {}), Ne ? Ae.parameters.yaxisDisplayValue = Ne.position : delete Ae.parameters.yaxisDisplayValue, dt = a.getFn("Studies.replaceStudy")(ke, Ae.inputs.id, Ae.type, Ae.inputs, Ae.outputs, Ae.parameters, Ae.panel, Ae.study)), He == Ge) for (var mt in Ae.seriesParams) je = Ae.seriesParams[mt], dt = ke.modifySeries(je.id, {
            panel: N,
            yAxis: Ne
          });
          return dt;
        }, ce = b && b.dropzone == "all", ce || (v ? (y.position = U, this.layout.studies && (Q = this.layout.studies[y.name], Q && (Q.parameters || (Q.parameters = {}), Q.parameters.yaxisDisplayValue = U))) : I ? this.highlightedDraggable = oe(this, y, "study", {
          position: U
        }) : M && oe(this, y, "renderer", new a.ChartEngine.YAxis({
          name: y.params.name || a.uniqueID(),
          position: U
        })), F = this.highlightedDraggable.getYAxis(this)), !A || !ce || v) {
          for (ee = F, ce && F == this.chart.panel.yAxis && (ee = b), j = 0; j < x.yaxisLHS.length; j++) if (x.yaxisLHS[j] == ee) {
            x.yaxisLHS.splice(j, 1);
            break;
          }
          for (j = 0; j < x.yaxisRHS.length; j++) if (x.yaxisRHS[j] == ee) {
            x.yaxisRHS.splice(j, 1);
            break;
          }
        }
        if (ce) {
          if (this.getYAxisByName(x, F.name) == x.yAxis && this.electNewPanelOwner(x, b), v) {
            if (he = F, fe = b, F == this.chart.panel.yAxis) {
              he = b, pe = -633645708, ge = -50080443, ve = 2;
              for (var Je = 1; e.Q_(Je.toString(), Je.toString().length, 19872) !== pe; Je++) fe = F, ve += 2;
              e.o0(ve.toString(), ve.toString().length, 35452) !== ge && (fe = F);
            }
            for (de in he.studies) be = "s", be += "tu", be += "dy", oe(this, this.layout.studies[he.studies[de]], be, fe === this.chart.panel.yAxis ? null : {
              position: fe.name
            });
            for (de in he.renderers) _e = "r", _e += "e", _e += "nde", _e += "rer", oe(this, this.chart.seriesRenderers[he.renderers[de]], _e, fe);
            this.highlightedDraggable = fe;
          } else I ? this.highlightedDraggable = oe(this, y, "study", {
            position: b.name
          }) : M && oe(this, y, "renderer", b);
        } else {
          for (ye = "n", ye += "on", ye += "e", F.position == ye && (F.width = a.ChartEngine.YAxis.prototype.width), F.position = U, re = U == "left" ? x.yaxisLHS : x.yaxisRHS, j = 0; j < re.length; j++) {
            if (re[j] !== F) if (re[j].dropzone == "left") re.splice(j, 0, F);else if (re[j].dropzone == "right") e.n1T(0), re.splice(e.B3B(1, j), 0, F);else continue;
            break;
          }
          j == re.length && re.push(F);
        }
      }
      for (var $e in this.panels) for (we = this.panels[$e], Te = we.yaxisLHS.concat(we.yaxisRHS), j = 0; j < Te.length; j++) Te[j].height = we.yAxis.height, this.calculateYAxisMargins(Te[j]);
      this.displayDragOK(), this.draw(), this.calculateYAxisPositions(), this.draw(), this.findHighlights(null, !0), this.savePanels();
    }
  }, o = !1, a.ChartEngine.prototype.findHighlights = a.ChartEngine.prototype.findHighlights || function (h, l) {
    var u;
    u = "mo", u += "vement feature requires activating interaction", u += " f", e.Z8b(), u += "eature.", o || console.error(u), o = !0;
  };
};
ka = q => {
  var e;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.NameValueStore = e.NameValueStore || function () {}, e.NameValueStore.prototype.toJSONIfNecessary = function (t) {
    var n;
    if (te.L1$(), t.constructor == String) return t;
    try {
      return n = JSON.stringify(t), n;
    } catch {
      var r;
      return r = "Cannot convert to JSON", r += ": ", te.E3R(0), console.log(te.W6G(t, r)), null;
    }
  }, e.NameValueStore.prototype.fromJSONIfNecessary = function (t) {
    te.L1$();
    var n;
    try {
      return n = JSON.parse(t), n;
    } catch {
      return t;
    }
  }, te.Z8b(), e.NameValueStore.prototype.get = function (t, n) {
    var r;
    r = e.localStorage.getItem(t), te.L1$(), n(null, this.fromJSONIfNecessary(r));
  }, e.NameValueStore.prototype.set = function (t, n, r) {
    e.localStorageSetItem(t, this.toJSONIfNecessary(n)), r && r(null);
  }, e.NameValueStore.prototype.remove = function (t, n) {
    te.L1$(), e.localStorage.removeItem(t), n && n(null);
  };
};
Ta = q => {
  var e = te,
    t;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.ChartEngine || (t.ChartEngine = function () {}), e.Z8b(), t.QuoteFeed = t.QuoteFeed || function () {}, t.QuoteFeed.prototype.fetch = function (n, r) {
    this.v2QuoteFeed || console.log("You must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()");
  }, t.QuoteFeed.prototype.announceError = function (n, r) {
    var i;
    n.suppressErrors || r.suppressAlert || n.startDate || n.endDate || r.error && (i = "Error fetching qu", i += "ote:", t.alert(i + r.error));
  }, t.QuoteFeed.prototype.multiFetch = function (n, r) {
    return n.length === 0 && r([]), e.L1$(), n[0].stx.driver.multiFetch(n, r);
  }, t.QuoteFeed.Subscriptions = function () {
    e.L1$(), this.subscriptions = [];
  }, t.inheritsFrom(t.QuoteFeed.Subscriptions, t.QuoteFeed), t.QuoteFeed.Subscriptions.prototype.checkSubscriptions = function (n) {
    var r, i, a, s, o, h;
    a = n.getSymbols({
      "breakout-equations": !0
    }), s = this, a = a.filter(function (c) {
      var d;
      return d = n.quoteDriver.getQuoteFeed(c), d && d.engine == s;
    });
    for (var l = 0; l < this.subscriptions.length; l++) this.subscriptions[l].match = !1;
    for (var u = 0; u < a.length; u++) for (i = a[u], o = i.interval, (o == "month" || o == "week") && !n.dontRoll && (o = "day"), i.interval = o, i.period = 1, i.match = !1, isNaN(i.interval) || (i.period = i.interval, i.interval = i.timeUnit, i.interval || (i.interval = "minute")), delete i.periodicity, delete i.timeUnit, delete i.setSpan, l = 0; l < this.subscriptions.length; l++) if (r = this.subscriptions[l], r.symbol == i.symbol && r.period == i.period && r.interval == i.interval) {
      i.match = !0, r.match = !0;
      break;
    } else r.symbol != i.symbol ? (h = "sym", h += "bol", i.reason != "period" && (i.reason = h), r.reason = "symbol") : (i.reason = "period", r.reason = "period");
    this.subscriptions = this.subscriptions.filter(function (c) {
      return e.L1$(), c.match || (c.stx || (c.stx = n), s.unsubscribe(c)), c.match;
    }), e.L1$(), a.forEach(function (c) {
      c.match || (c.stx || (c.stx = n), c.reason || (c.reason = "initialize"), c.symbol !== n.chart.symbol && (c.series = !0), s.subscribe(c), s.subscriptions.push(c));
    });
  }, t.QuoteFeed.Subscriptions.prototype.fetch = function (n, r) {
    var i;
    i = this, this.fetchFromSource(n, function (a) {
      a.error || i.checkSubscriptions(n.stx), e.Z8b(), r(a);
    });
  }, t.QuoteFeed.Subscriptions.prototype.subscribe = function (n) {
    e.L1$(), console.log("subscribe", n);
  }, t.QuoteFeed.Subscriptions.prototype.unsubscribe = function (n) {
    var r;
    r = "unsubscri", r += "be", console.log(r, n);
  }, t.QuoteFeed.Subscriptions.prototype.fetchFromSource = function (n, r) {
    console.log("Please provide implementation of fetchFromSource");
  }, t.QuoteFeed.prototype.requiresImmediateRefresh = function (n) {
    return e.L1$(), !1;
  }, t.ChartEngine.prototype.attachQuoteFeed = function (n, r, i) {
    var a, s, o, h, l, u, c, d, f;
    if (r || (r = {}), (typeof n.fetchInitialData == "function" || typeof n.fetchUpdateData == "function" || typeof n.fetchPaginationData == "function") && (a = "fun", a += "ct", a += "i", a += "on", s = "funct", s += "ion", typeof n.fetchPaginationData != "function" && typeof n.fetchUpdateData !== s && (r.noLoadMore = !0), n.v2QuoteFeed = !0, ["multiFetch", "announceError", "requiresImmediateRefresh"].forEach(function (m) {
      e.Z8b(), !n[m] && n[m] !== !1 && (n[m] = t.QuoteFeed.prototype[m]);
    }), typeof n.subscribe === a)) {
      o = 93989363, h = 71684921, l = 2;
      for (var g = 1; e.Q_(g.toString(), g.toString().length, 36493) !== o; g++) n.checkSubscriptions = t.QuoteFeed.Subscriptions.prototype.checkSubscriptions, e.E3R(37), l += e.B3B(0, "2");
      e.o0(l.toString(), l.toString().length, 91429) !== h && (n.checkSubscriptions = t.QuoteFeed.Subscriptions.prototype.checkSubscriptions), n.subscriptions = [];
    }
    if (r.maximumTicks || (r.maximumTicks = n.maxTicks ? n.maxTicks : 20000), (!r.bufferSize || r.bufferSize < 0) && (r.bufferSize = 0), r.bufferSize = Math.round(r.bufferSize), r.intervalTimer = null, this.quoteDriver) if (!i && this.quoteDriver.hasUnfilteredQuoteFeed) this.detachQuoteFeed();else {
      u = -29785150, c = -573191651, d = 2;
      for (var p = 1; e.o0(p.toString(), p.toString().length, 60499) !== u; p++) f = this.quoteDriver.hasUnfilteredQuoteFeed && this.quoteDriver.quoteFeeds.pop(), this.quoteDriver.quoteFeeds.push({
        engine: n,
        behavior: r,
        filter: i
      }), f && this.quoteDriver.quoteFeeds.push(f), d += 2;
      e.o0(d.toString(), d.toString().length, 7257) !== c && (f = this.quoteDriver.hasUnfilteredQuoteFeed || this.quoteDriver.quoteFeeds.pop(), this.quoteDriver.quoteFeeds.push({
        engine: n,
        behavior: r,
        filter: i
      }), f && this.quoteDriver.quoteFeeds.push(f)), this.quoteDriver.updateChartLoop(null, r);
    }
    e.L1$(), this.quoteDriver || (this.quoteDriver = new t.ChartEngine.Driver(this, n, r, i)), i || (this.quoteDriver.hasUnfilteredQuoteFeed = !0);
  }, t.ChartEngine.prototype.detachQuoteFeed = function (n) {
    var r;
    if (r = this.quoteDriver, !!r) {
      e.Z8b();
      for (var i = r.quoteFeeds.length - 1; i >= 0; i--) (!n || r.quoteFeeds[i].quoteFeed == n) && (r.die(r.quoteFeeds[i]), r.quoteFeeds.splice(i, 1));
      r.quoteFeeds.length ? n == r.quoteFeed && (r.quoteFeed = r.quoteFeeds[0].quoteFeed, r.behavior = r.quoteFeeds[0].behavior) : r = this.quoteDriver = null;
    }
  }, t.ChartEngine.Driver = function (n, r, i, a) {
    this.stx = n, i || (i = {}), this.quoteFeeds = [{
      engine: r,
      behavior: i,
      filter: a
    }], this.id = t.uniqueID(!0), this.behavior = i, this.quoteFeed = r, this.loadingNewChart = !1, this.updatingChart = !1, a || (this.hasUnfilteredQuoteFeed = !0), this.updateChartLoop();
  }, t.ChartEngine.Driver.prototype.die = function (n) {
    for (var r, i = 0; i < this.quoteFeeds.length; i++) (!n || this.quoteFeeds[i] == n) && (r = this.quoteFeeds[i].behavior, r.intervalTimer && (clearInterval(r.intervalTimer), r.intervalTimer = -1));
  }, t.ChartEngine.Driver.prototype.getQuoteFeed = function (n) {
    var r;
    n.symbolObject || (n.symbolObject = {
      symbol: n.symbol
    });
    for (var i = 0; i < this.quoteFeeds.length; i++) if (r = this.quoteFeeds[i], r.behavior.generator == n.symbolObject.generator && (!r.filter || r.filter(n))) return r;
    return e.Z8b(), null;
  }, t.ChartEngine.Driver.prototype.multiFetch = function (n, r) {
    var i, a, s;
    n.length === 0 && r([]), i = {
      counter: 0,
      finished: n.length,
      results: []
    };
    for (var o = 0; o < n.length; o++) a = n[o], a.stx.isEquationChart(a.symbol) ? t.fetchEquationChart(a, h(a, i, r)) : (s = this.getQuoteFeed(a), s && t.ChartEngine.Driver.fetchData(t.QuoteFeed.SERIES, s.engine, a, h(a, i, r)));
    function h(l, u, c) {
      return function (d) {
        var f;
        u.results.push({
          dataCallback: d,
          params: l
        }), u.counter++, u.counter >= u.finished && (f = u.results, u.results = [], c(f));
      };
    }
  }, t.ChartEngine.Driver.prototype.updateSubscriptions = function () {
    for (var n = 0; n < this.quoteFeeds.length; n++) this.quoteFeeds[n].checkSubscriptions && this.quoteFeeds[n].checkSubscriptions(this.stx);
  }, t.ChartEngine.Driver.prototype.loadDependents = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D;
    if (s = this, !a) {
      o = 0, h = [], l = [], u = function (V) {
        e.Z8b(), r && ++o >= s.quoteFeeds.length && r(null);
      }, c = function (V) {
        ++o < h.length || (e.L1$(), l.length || u(V), l.forEach(function (A) {
          e.Z8b(), s.loadDependents(n, u, i, A.behavior);
        }));
      }, s.quoteFeeds.forEach(function (V) {
        V.behavior.generator ? l.push(V) : h.push(V);
      }), h.forEach(function (V) {
        e.Z8b(), s.loadDependents(n, c, i, V.behavior);
      });
      return;
    }
    function F(V) {
      return function (A) {
        var E, L, N, U, B, O, R, H, z, W;
        E = null;
        for (var G = 0; G < A.length; G++) if (L = A[G], N = L.dataCallback.error, !N && N !== 0) {
          U = L.params.symbolObject, B = L.dataCallback, O = B.quotes, R = B.moreAvailable, H = B.upToDate, z = [], f.getSeries && (z = f.getSeries({
            symbolObject: U
          })), W = !1;
          for (var Z = 0; Z < z.length; Z++) m = z[Z], V || (n.future ? (m.upToDate = H === !0 ? !0 : H || O.length <= (L.params.startDate ? 1 : 0), f.isHistoricalModeSet && O.length < 2 && (m.mostRecentForwardAttempt = new Date())) : m.moreAvailable = R === !1 ? !1 : R || O.length > (L.params.endDate ? 1 : 0), m.loading = !1), W = m.parameters.fillGaps || W;
          O = s.cleanup(f, m, O, i, n, W), f.updateChartData(O, g, {
            secondarySeries: U.symbol,
            noCreateDataSet: !0,
            noCleanupDates: !0,
            allowReplaceOHL: !0
          }), O && O.length && (!E || E > O[0].DT) && (E = O[0].DT);
        }
        A.length && (f.createDataSet(null, null, {
          appending: n.originalState.update || n.future,
          appendToDate: E
        }), n.nodraw || f.draw(), i == t.QuoteFeed.INITIAL && s.resetRefreshInterval(a.refreshInterval, a)), r && r(null);
      };
    }
    f = n.stx, g = n.chart, p = g.series, f.masterData, y = [], b = {}, C = i == t.QuoteFeed.UPDATE, k = i == t.QuoteFeed.PAGINATION, M = t.shallowClone(n);
    for (d in p) if (m = p[d], I = m.parameters, !(!C && (!n.future && m.moreAvailable === !1 || n.future && m.upToDate === !0)) && !m.loading && I.loadData !== !1 && !((C || k) && (!m.endPoints || !Object.keys(m.endPoints).length)) && !(I.data && !I.data.useDefaultQuoteFeed) && (x = I.symbolObject, !!x.symbol && x.generator == a.generator && (M.symbolObject = x, M.symbol = x.symbol, v = this.getQuoteFeed(M), a == (v && v.behavior)))) {
      S = !0, C || (m.loading = !0);
      for (var P = 0; P < y.length; P++) t.symbolEqual(y[P], x) && (S = !1);
      S && (y.push(x), b[x.symbol] = m.endPoints);
    }
    w = [];
    for (var _ = 0; _ < y.length; _++) x = y[_], T = t.shallowClone(n.originalState), T.symbol = x.symbol, T.symbolObject = x, T.update || T.future ? (T.endDate || (T.endDate = n.endDate), T.startDate = b[x.symbol].end) : (T.startDate || (T.startDate = n.startDate), T.endDate = k && !n.future ? b[x.symbol].begin : n.endDate, T.ticks = n.ticks), w.push(T);
    if (!w.length && C) {
      D = {
        appending: n.appending || n.originalState.update
      }, D.appending && (D.appendToDate = n.startDate), f.createDataSet(null, null, D), n.nodraw || f.draw(), r && r(null);
      return;
    }
    this.multiFetch(w, F(C));
  }, t.ChartEngine.Driver.prototype.cleanup = function (n, r, i, a, s, o) {
    var h, l, u, c, d;
    return n.doCleanupDates(i, n.layout.interval), !s.missingBarsCreated && i && i.length && n.cleanupGaps && o !== !1 && (u = s.chart, r ? (u = r, l = r.parameters.symbol || r.id) : l = u.defaultPlotField, a == t.QuoteFeed.PAGINATION && !s.loadMoreReplace ? u.endPoints.begin && u.endPoints.begin > i[i.length - 1].DT && (c = n.getFirstLastDataRecord(n.masterData, l, !1), r && (c = c[l]), i.push(c), h = "pop") : a == t.QuoteFeed.UPDATE && u.endPoints.end && u.endPoints.end < i[0].DT && (d = n.getFirstLastDataRecord(n.masterData, l, !0), r && (d = d[l]), i.unshift(d), h = "shift"), i = n.doCleanupGaps(i, s.chart, {
      cleanupGaps: o,
      noCleanupDates: !0
    }), h && i[h]()), i;
  }, t.ChartEngine.Driver.prototype.updateChart = function (n) {
    var r, i, a, s, o, h, l, u, c;
    if (this.updatingChart || this.loadingNewChart) return;
    r = Object.keys(this.stx.charts).length, i = 0, e.L1$(), a = this.stx, s = a.layout.interval, o = a.layout.timeUnit;
    for (var d in a.charts) if (h = a.charts[d], !!h.symbol) {
      if (l = this.makeParams(h.symbol, h.symbolObject, h), u = this.getQuoteFeed(l), h.masterData && h.masterData.length && (l.startDate = h.endPoints.end), l.update = !0, l.originalState = t.shallowClone(l), n && n != l.behavior) {
        this.loadDependents(l, null, t.QuoteFeed.UPDATE, n);
        continue;
      }
      this.updatingChart = !0, c = f(this, l, h.symbol, u), a.isEquationChart(l.symbol) ? t.fetchEquationChart(l, c) : u && t.ChartEngine.Driver.fetchData(t.QuoteFeed.UPDATE, u.engine, l, c);
    }
    function f(g, p, m, x) {
      return p.behavior.prefetchAction && p.behavior.prefetchAction("updateChart"), e.Z8b(), function (y) {
        var b, C;
        if (i++, b = p.chart, b.masterData, m == b.symbol && s == a.layout.interval && o == a.layout.timeUnit && !a.isHistoricalMode()) y.error ? x && x.engine.announceError(p.originalState, y) : (C = y.quotes, C = g.cleanup(a, null, C, t.QuoteFeed.UPDATE, p), a.updateChartData(C, b, {
          noCreateDataSet: !0,
          noCleanupDates: !0
        }), b.attribution = y.attribution);else {
          g.updatingChart = !1;
          return;
        }
        i == r && (g.updatingChart = !1), p.behavior.callback && p.behavior.callback(p), g.loadDependents(p, null, t.QuoteFeed.UPDATE, p.behavior);
      };
    }
  }, t.ChartEngine.Driver.prototype.updateChartLoop = function (n, r) {
    var i, a;
    if (r || (r = this.behavior), r.intervalTimer != -1) {
      r.intervalTimer && clearInterval(r.intervalTimer), i = function (o, h) {
        return function () {
          h.noUpdate || o.updateChart(h);
        };
      };
      for (var s = 0; s < this.quoteFeeds.length; s++) a = this.quoteFeeds[s].behavior, r == a && !a.noUpdate && (!n && n !== 0 && (n = a.refreshInterval), n && (r.intervalTimer = setInterval(i(this, a), n * 1000)));
    }
  }, t.ChartEngine.Driver.prototype.resetRefreshInterval = function (n, r) {
    e.L1$(), (r || this.behavior).refreshInterval = n, this.updateChartLoop(null, r);
  }, t.ChartEngine.Driver.prototype.loadAll = function (n, r) {
    var i, a;
    function s() {
      return function (o) {
        var h;
        e.L1$(), o ? r(o) : !n.moreAvailable && n.upToDate ? r(null) : ++a > 20 ? (h = "error, moreAvaila", h += "ble no", h += "t implemented correctly in QuoteFeed", r(h)) : (n.loadingMore = !1, i.checkLoadMore(n, !0, !0, s(), !0));
      };
    }
    i = this, a = 0, s()();
  }, t.ChartEngine.Driver.prototype.checkLoadMore = function (n, r, i, a, s) {
    var o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F;
    if (o = this.stx, h = this, n.loadingMore || this.loadingNewChart) {
      n.initialScroll = n.scroll, a && a(null);
      return;
    }
    l = o.isHistoricalMode();
    function P(U) {
      return !U.endPoints.end || n.scroll - n.maxTicks + 1 < c.bufferSize || o.tickFromDate(U.endPoints.end, n, null, !0) - d.length + n.scroll - n.maxTicks + 2 < c.bufferSize;
    }
    if (l || (o.isHistoricalModeSet = !1), u = this.makeParams(n.symbol, n.symbolObject, n), o.currentlyImporting) {
      a && a(null);
      return;
    }
    function _(U) {
      n.loadingMore = !1, a && a(U);
    }
    c = u.behavior;
    function V(U) {
      return e.L1$(), !U.endPoints.begin || d.length - n.scroll < c.bufferSize || d.length - n.scroll - o.tickFromDate(U.endPoints.begin, n) < c.bufferSize;
    }
    function A(U, B) {
      return e.Z8b(), c.prefetchAction && c.prefetchAction("checkLoadMore"), function (O) {
        var R, H, z, W, G, Z, X, ie, j;
        if (R = U.stx, H = B.chart, B.symbol == H.symbol && M == R.layout.interval && I == R.layout.timeUnit) B.loadMore || (B.chart.loadingMore = !1), O.error ? (U.quoteFeed.announceError(B.originalState, O), B.chart.loadingMore = !1, a && a(O.error)) : (O.quotes || (O.quotes = []), z = O.quotes, W = H.masterData, z = U.cleanup(R, null, z, t.QuoteFeed.PAGINATION, B), z.length && H.masterData && H.masterData.length && (B.future ? (G = z[0], G.DT && G.DT == H.masterData[H.masterData.length - 1].DT && W.pop()) : (Z = z[z.length - 1], Z.DT && +Z.DT == +H.masterData[0].DT && z.pop())), B.future ? (O.upToDate ? H.upToDate = !0 : (O.upToDate === !1 || z.length > 1) && (H.upToDate = !1), R.isHistoricalModeSet && z.length < 2 && (H.mostRecentForwardAttempt = new Date())) : O.moreAvailable ? H.moreAvailable = !0 : O.moreAvailable === !1 || !z.length ? H.moreAvailable = !1 : H.moreAvailable = !0, U.tickMultiplier = z.length ? 2 : U.tickMultiplier * 2, X = z[0] ? z[0].DT : B.startDate, ie = z[0] ? z[z.length - 1].DT : B.endDate, (!H.endPoints.begin || H.endPoints.begin > X) && (H.endPoints.begin = X), (!H.endPoints.end || H.endPoints.end < ie) && (H.endPoints.end = ie), H.loadingMore = !1, B.loadMoreReplace ? R.setMasterData(z, H, {
          noCleanupDates: !0
        }) : B.future ? R.updateChartData(z, H, {
          noCreateDataSet: !0,
          noCleanupDates: !0
        }) : t.addMemberToMasterdata({
          stx: R,
          chart: H,
          data: z,
          fields: ["*"],
          noCleanupDates: !0
        }), B.future && (j = {
          appending: !0,
          appendToDate: z[0] && z[0].DT
        }), R.createDataSet(void 0, void 0, j), s || R.draw(), c.callback && c.callback(B), U.loadDependents(B, a, t.QuoteFeed.PAGINATION));else return;
      };
    }
    d = n.dataSet, e.E3R(0);
    var E = e.W6G(20, 980);
    e.n1T(46);
    var L = e.B3B(12, 3, 15, 55);
    if (g = E * (c.forwardPaginationRetryInterval || L), p = !1, m = !1, n.dataSet.length) for (var N in n.series) x = n.series[N], !x.loading && x.parameters.loadData !== !1 && (f = !x.mostRecentForwardAttempt || x.mostRecentForwardAttempt.getTime() + g < Date.now(), x.moreAvailable !== !1 && V(x) && (p = !0), f && !x.upToDate && P(x) && (m = !0));
    if (f = !n.mostRecentForwardAttempt || n.mostRecentForwardAttempt.getTime() + g < Date.now(), y = (V(n) || r) && n.moreAvailable !== !1, b = (P(n) || r) && !n.upToDate && f, C = y || p, k = o.isHistoricalModeSet && !C && (b || m), M = o.layout.interval, I = o.layout.timeUnit, v = !1, S = c.findHeadOfData || n.masterData && n.masterData.length, !c.noLoadMore && S && (k || !o.maxDataSetSize || n.dataSet.length < o.maxDataSetSize) && (C || k)) {
      if (n.initialScroll = n.scroll, n.loadingMore = !0, u = this.makeParams(n.symbol, n.symbolObject, n), u.pagination = !0, u.future = k, n.masterData && n.masterData.length ? (k ? u.startDate = n.endPoints.end : u.endDate = n.endPoints.begin, k && !u.startDate ? (T = "D", T += "T", w = o.getFirstLastDataRecord(n.masterData, T, !0), w && (u.startDate = w.DT)) : C && !u.endDate && (w = o.getFirstLastDataRecord(n.masterData, "DT"), w && (u.endDate = w.DT))) : u.endDate = new Date(), u.originalState = t.shallowClone(u), u.nodraw = s, !y && p || !b && m) {
        this.loadingMore = !0, this.loadDependents(u, _, t.QuoteFeed.PAGINATION), a && a(null);
        return;
      }
      o.fetchMaximumBars[o.layout.aggregationType] && (u.fetchMaximumBars = !0, !o.maxMasterDataSize || c.maximumTicks < o.maxMasterDataSize ? u.ticks = c.maximumTicks : u.ticks = o.maxMasterDataSize), D = A(this, u), o.isEquationChart(u.symbol) ? t.fetchEquationChart(u, D) : (k && (u.appending = !0), F = h.getQuoteFeed(u), F && t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION, F.engine, u, D)), v = !0;
    }
    !v && a && a(null);
  }, t.ChartEngine.Driver.prototype.extendHistoricalData = function ({
    from: n
  }, r = () => {}) {
    var i,
      a,
      {
        stx: s
      } = this,
      {
        chart: o,
        layout: h
      } = s,
      {
        masterData: l,
        dataSet: u
      } = o,
      {
        interval: c,
        timeUnit: d
      } = h;
    if (i = this.makeParams(o.symbol, o.symbolObject, o), a = this.getQuoteFeed(i), o.loadingMore || this.loadingNewChart || s.currentlyImporting || !l.length || !a || s.maxDataSetSize && u.length > s.maxDataSetSize) return r(null);
    o.loadingMore = !0, i.originalState = Object.assign({}, i);
    function f(g, p) {
      return function ({
        quotes: m,
        moreAvailable: x,
        error: y
      }) {
        var b;
        if (e.L1$(), b = "bo", b += "ole", b += "an", !(p.symbol !== o.symbol || c !== h.interval || d !== h.timeUnit)) {
          if (o.loadingMore = !1, y) return r(y);
          m = g.cleanup(s, null, m, t.QuoteFeed.PAGINATION, p), typeof x === b ? o.moreAvailable = x : o.moreAvailable = !!m.length, o.endPoints.begin = m[0].DT, t.addMemberToMasterdata({
            stx: s,
            chart: o,
            data: m,
            fields: ["*"],
            noCleanupDates: !0
          }), s.createDataSet(), s.draw();
        }
      };
    }
    i.startDate = n, i.endDate = l[0].DT, t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION, a.engine, i, f(this, i));
  }, t.ChartEngine.Driver.prototype.barsToFetch = function (n) {
    var r, i, a, s;
    return e.L1$(), r = "w", r += "eek", t.isValidNumber(this.tickMultiplier) || (this.tickMultiplier = 2), i = this.stx.layout.interval, a = n.stx.layout.periodicity, (i == "month" || i == r) && !this.stx.dontRoll && (a *= i == "week" ? 7 : 30), s = n.stx.chart.maxTicks * a, s * this.tickMultiplier;
  }, t.ChartEngine.Driver.determineStartDate = function (n, r, i) {
    return e.L1$(), this.determineStartOrEndDate(n, r, i, !0);
  }, t.ChartEngine.Driver.determineStartOrEndDate = function (n, r, i, a) {
    var s;
    return a || n.fetchMaximumBars ? s = n.startDate || r.previous(i) : s = n.future ? r.next(i) : new Date(), s;
  }, t.ChartEngine.Driver.prototype.makeParams = function (n, r, i) {
    var a, s, o, h, l, u, c, d, f;
    a = this.stx, e.Z8b(), s = a.layout.interval, o = this.barsToFetch({
      stx: a
    }), (s == "month" || s == "week") && !a.dontRoll && (h = "d", h += "a", h += "y", s = h), l = this.getQuoteFeed({
      interval: s,
      symbol: n,
      symbolObject: r
    }), u = l && l.behavior, c = t.shallowClone(u) || {}, c.behavior = u, d = !1, f = [], i.market && i.market.getSessionNames && (f = i.market.getSessionNames()), a.extendedHours ? a.extendedHours.filter ? d = !0 : (d = a.layout.extended, f = f.filter(function (p) {
      return p.enabled || a.layout.marketSessions[p.name];
    })) : f = f.filter(function (p) {
      return p.enabled;
    });
    for (var g = 0; g < f.length; g++) f[g] = f[g].name;
    return t.extend(c, {
      stx: a,
      symbol: n,
      symbolObject: r,
      chart: i,
      interval: s,
      extended: d,
      period: 1,
      ticks: o,
      additionalSessions: f,
      quoteDriverID: this.id
    }, !0), c.symbolObject || (c.symbolObject = {
      symbol: n
    }), isNaN(c.interval) || (c.period = parseInt(c.interval, 10), c.interval = a.layout.timeUnit, c.interval || (c.interval = "minute")), c;
  }, t.ChartEngine.Driver.prototype.newChart = function (n, r) {
    var i, a, s, o, h, l, u, c, d;
    i = this.stx;
    function f(g, p) {
      return c.prefetchAction && c.prefetchAction("newChart"), function (m) {
        var x, y, b, C;
        if (x = p.chart, y = m.quotes, b = !1, a == x.symbol && s == i.layout.interval && o == i.layout.timeUnit) g.loadingNewChart = !1, m.error ? u.engine.announceError(p.originalState, m) : (y = g.cleanup(i, null, y, t.QuoteFeed.INITIAL, p), i.setMasterData(y, x, {
          noCleanupDates: !0
        }), x.endPoints = {}, x.endPoints.begin = y[0] ? y[0].DT : p.startDate, x.endPoints.end = y[0] ? y[y.length - 1].DT : p.endDate, y ? (x.moreAvailable = m.moreAvailable !== !1, x.upToDate = m.upToDate) : (x.moreAvailable = !1, x.upToDate = !0), x.attribution = m.attribution, n.initializeChart && i.initializeChart(), i.createDataSet(), b = !0);else {
          r && r("orphaned");
          return;
        }
        e.Z8b();
        for (var k in x.series) x.series[k].endPoints = {}, x.series[k].moreAvailable = null, x.series[k].upToDate = null;
        C = x.masterData, C && C.length && (p.startDate = C[0].DT, p.endDate = C[C.length - 1].DT), c.callback && c.callback(p), g.loadDependents(p, function () {
          var M;
          M = "n", M += "e", M += "wChart", b && !p.nodraw && g.stx.home(), r && r(m.error), g.stx.dispatch(M, {
            stx: g.stx,
            symbol: g.stx.chart.symbol,
            symbolObject: g.stx.chart.symbolObject,
            moreAvailable: g.stx.chart.moreAvailable,
            upToDate: g.stx.chart.upToDate,
            quoteDriver: g
          }), g.resetRefreshInterval(c.refreshInterval, c);
        }, t.QuoteFeed.INITIAL);
      };
    }
    a = n.symbol, s = i.layout.interval, o = i.layout.timeUnit, h = n.chart, h.moreAvailable = null, h.upToDate = null, h.loadingMore = !1, h.attribution = null, l = this.makeParams(a, n.symbolObject, h), t.extend(l, n, !0), u = this.getQuoteFeed(l), c = l.behavior, (i.fetchMaximumBars[i.layout.aggregationType] || n.fetchMaximumBars) && (!i.maxMasterDataSize || c.maximumTicks < i.maxMasterDataSize ? l.ticks = c.maximumTicks : l.ticks = i.maxMasterDataSize, l.fetchMaximumBars = !0), this.loadingNewChart = !0, this.updatingChart = !1, l.originalState = t.shallowClone(l), d = f(this, l), this.stx.isEquationChart(l.symbol) ? t.fetchEquationChart(l, d) : u && t.ChartEngine.Driver.fetchData(t.QuoteFeed.INITIAL, u.engine, l, d);
  }, t.QuoteFeed.INITIAL = 1, t.QuoteFeed.UPDATE = 2, t.QuoteFeed.PAGINATION = 3, t.QuoteFeed.SERIES = 4, t.ChartEngine.Driver.fetchData = function (n, r, i, a) {
    if (!i.symbol) return a({
      quotes: []
    });
    r.v2QuoteFeed ? typeof r.subscribe != "function" ? t.ChartEngine.Driver.fetchDataInContext(n, r, i, a) : t.ChartEngine.Driver.fetchDataInContext(n, r, i, function (s) {
      s.error || this.checkSubscriptions(i.stx), a(s);
    }.bind(r)) : (i.stx.convertToDataZone(i.startDate), i.stx.convertToDataZone(i.endDate), r.fetch(i, a));
  }, t.ChartEngine.Driver.fetchDataInContext = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m;
    if (s = "fu", s += "nction", o = "funct", o += "ion", d = i.stx, !d.chart.market.newIterator) {
      console.error("quoteFeed feature requires first activating market feature.");
      return;
    }
    switch (n === t.QuoteFeed.SERIES && (i.series = !0, n = t.QuoteFeed.INITIAL, i.endDate && !i.startDate || i.future ? n = t.QuoteFeed.PAGINATION : i.startDate && !i.endDate && (n = t.QuoteFeed.UPDATE)), f = Math.min(i.ticks, i.maximumTicks), r.maxTicks && (f = Math.min(f, r.maxTicks)), g = i.symbolObject.masterSymbol || i.symbol, n) {
      case t.QuoteFeed.UPDATE:
        if (d.isHistoricalModeSet) {
          d.quoteDriver.updatingChart = !1;
          return;
        }
        i.startDate ? p = i.startDate : (p = new Date(), p.setHours(0, 0, 0, 0)), typeof r.fetchUpdateData === o && r.fetchUpdateData(g, d.convertToDataZone(p), i, a);
        break;
      case t.QuoteFeed.INITIAL:
        c = i.endDate || new Date(), h = {
          begin: c,
          interval: i.interval,
          periodicity: i.interval == "tick" ? d.chart.xAxis.futureTicksInterval : i.period,
          outZone: d.dataZone
        }, l = d.chart.market.newIterator(h), u = t.ChartEngine.Driver.determineStartDate(i, l, f), i.endDate && (c = i.endDate), typeof r.fetchInitialData == "function" && r.fetchInitialData(g, u, d.convertToDataZone(c), i, a);
        break;
      case t.QuoteFeed.PAGINATION:
        if (h = {
          begin: i.endDate || i.startDate,
          interval: i.interval,
          periodicity: i.interval == "tick" ? d.chart.xAxis.futureTicksInterval : i.period,
          outZone: d.dataZone
        }, l = d.chart.market.newIterator(h), m = t.ChartEngine.Driver.determineStartOrEndDate(i, l, f, !i.future), u = i.startDate || m, c = i.endDate || m, i.startDate ? i.stx.convertToDataZone(u) : i.stx.convertToDataZone(c), typeof r.fetchPaginationData === s) {
          if (d.maxMasterDataSize && d.maxMasterDataSize <= d.masterData.length) return;
          r.fetchPaginationData(g, u, c, i, function (x) {
            c >= Date.now() && (d.isHistoricalModeSet = !1), e.Z8b(), a && a(x);
          });
        }
        break;
      default:
        console.error("Illegal fetchData constant");
    }
  };
};
Da = q => {
  var e = te,
    t,
    n;
  t = "undef", t += "i", t += "ne", t += "d", n = typeof _CIQ !== t ? _CIQ : q.CIQ, n.ChartEngine.prototype.addSeries = function (r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D;
    s = "addS", s += "e", s += "ries", o = "dis", o += "play", h = "add-se", h += "ries", l = "a", l += "ddSeri";
    function F(_, V) {
      var A, E, L, N;
      if (A = i.renderer || "Lines", E = i.name || r, i.yAxis && !(i.yAxis instanceof n.ChartEngine.YAxis) && !M && (i.yAxis.name = E), !(!i.renderer && !i.name && !i.color && !i.chartType)) {
        if (L = _.getSeriesRenderer(E), !L) {
          if (N = {
            name: E,
            overChart: i.overChart !== !1,
            useChartLegend: !0
          }, i.chartType ? L = n.Renderer.produce(i.chartType, n.extend({
            highlightable: i.highlightable,
            dependentOf: i.dependentOf,
            panel: i.panel,
            yAxis: i.yAxis,
            baseline: i.baseline
          }, N)) : (n.ensureDefaults(i, N), L = new n.Renderer[A]({
            params: i
          })), !L) return;
          _.setSeriesRenderer(L);
        }
        L.attachSeries(r, i), i.loadData !== !1 && L.ready(), _.layout.symbols = _.getSymbols({
          "include-parameters": !0,
          "exclude-studies": !0
        }), _.changeOccurred("layout");
      }
    }
    if (l += "es", u = this.runPrepend(l, arguments), u) return u;
    c = r || null, d = r, r || (r = n.uniqueID()), i && i.panel === !0 && (i.panel = r), f = {
      parameters: i ? n.clone(i) : {},
      yValueCache: [],
      display: c,
      id: r,
      loading: i ? i.loadData !== !1 : !0
    };
    function P(_) {
      return function (V) {
        e.L1$();
        var A, E, L;
        A = "symbo", A += "lCha", A += "nge", V.error || (E = V.quotes, L = i.fillGaps, k.cleanupGaps || (L = !1), E = k.doCleanupGaps(E, k.chart, {
          cleanupGaps: L
        }), k.updateChartData(E, k.chart, {
          secondarySeries: d,
          noCreateDataSet: !0,
          noCleanupDates: !0,
          allowReplaceOHL: !0
        }), f.loading = !1, f.moreAvailable = V.moreAvailable, f.upToDate = V.upToDate, F(k)), i.action !== null && !x.length && k.dispatch(M ? "symbolImport" : A, {
          stx: k,
          symbol: _.symbol,
          symbolObject: _.symbolObject,
          action: i.action,
          id: f.id,
          parameters: i
        }), a && a.call(k, V.error, f);
      };
    }
    return f.parameters.yAxis = i && i.yAxis, i = f.parameters, i.symbol && (d = i.symbol), i.isComparison && (i.shareYAxis = !0), i.yAxis && !(i.yAxis instanceof n.ChartEngine.YAxis) && (i.yAxis = new n.ChartEngine.YAxis(i.yAxis)), n.ensureDefaults(i, {
      chartName: this.chart.name,
      symbolObject: {
        symbol: d
      },
      panel: this.chart.panel.name,
      fillGaps: !1,
      action: h
    }), o in i && (f.display = i.display), g = this.charts[i.chartName], p = i.symbolObject, d = i.symbol = p.symbol, f.display || (f.display = d || i.field), f.endPoints = {}, !i.gapDisplayStyle && i.gapDisplayStyle !== !1 && (i.gapDisplayStyle = i.gaps), i.isComparison && (m = "t", m += "r", m += "a", m += "nsparent", i.gapDisplayStyle === void 0 && (i.gapDisplayStyle = m)), x = this.getSeries({
      symbolObject: p,
      chart: g,
      includeMaster: !0
    }), y = i.panel, this.panels[y] ? !i.yAxis && !i.shareYAxis && (C = "no", C += "ne", i.yAxis = new n.ChartEngine.YAxis({
      name: r,
      position: C
    })) : (b = i.yAxis || new n.ChartEngine.YAxis(), b.name = r, this.createPanel(r, y, null, null, b), (!this.preferences.dragging || !this.preferences.dragging.series) && (i.highlightable = !1)), g.series[r] = f, k = this, M = this.currentlyImporting, i.isComparison && g.forcePercentComparison && i.panel == g.panel.name && (!i.yAxis || i.yAxis == g.yAxis) && this.setChartScale("percent"), I = g.masterData, I || (I = g.masterData = this.masterData = []), v = I.length, i.data && !i.data.useDefaultQuoteFeed ? (S = {
      symbol: d,
      symbolObject: p,
      action: i.action
    }, P(S)({
      quotes: i.data
    })) : x.length ? (f.endPoints = x[0].endPoints, f.loading = x[0].loading, F(this), a && setTimeout(function () {
      a.call(k, null, f);
    }, 0)) : this.quoteDriver && i.loadData !== !1 ? (w = this.quoteDriver, T = w.makeParams(d, p, g), v && (T.startDate = I[0].DT, T.endDate = this.isHistoricalMode() ? I[I.length - 1].DT : new Date()), T.stx.isEquationChart(T.symbol) ? n.fetchEquationChart(T, P(T)) : (D = w.getQuoteFeed(T), D && n.ChartEngine.Driver.fetchData(4, D.engine, T, P(T)))) : (F(this), a && a.call(this, null, f)), this.runAppend(s, arguments), f;
  }, n.ChartEngine.prototype.getSeries = function (r) {
    var i, a, s, o, h;
    i = r.chart ? r.chart : this.chart, a = i.series, s = r.symbolObject, s || (s = {
      symbol: r.symbol
    }), o = [], e.L1$();
    for (var l in a) h = a[l], n.symbolEqual(s, h.parameters.symbolObject) && o.push(h);
    return r.includeMaster && n.symbolEqual(s, i.symbolObject) && o.push({}), o;
  }, n.ChartEngine.prototype.modifySeries = function (r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C;
    if (s = "mod", s += "i", s += "fySeries", !this.runPrepend("modifySeries", arguments) && i && (typeof r == "string" ? (l = i.chartName ? this.charts[i.chartName] : this.chart, h = r, o = l.series[h]) : (o = r, h = o.id, l = this.charts[o.parameters.chartName]), !!o)) {
      n.extend(o.parameters, i, !0), this.getRendererFromSeries(h).modifyRenderer(i), u = o.parameters;
      for (var k in l.seriesRenderers) {
        d = l.seriesRenderers[k], f = d.params, g = d.seriesParams;
        for (var M = 0; M < g.length; ++M) if (p = g[M], m = this.panels[p.panel], x = m && m.yAxis.name, p.id === o.id) {
          u.panel === !0 && (u.panel = u.dependentOf || u.name), f.panel = u.panel, i.yAxis && (i.yAxis instanceof n.ChartEngine.YAxis || (i.yAxis = new n.ChartEngine.YAxis(i.yAxis)), f.yAxis = i.yAxis), u.panel != p.panel && f.name == x ? this.electNewPanelOwner(p.panel) : (y = this.getYAxisByName(u.panel, f.name), y && u.yAxis && y.name !== u.yAxis.name && (y.name = this.electNewYAxisOwner(y))), u.field || (u.field = null), d.attachSeries(h, n.ensureDefaults(u, p)), u.field || (u.field = u.subField), delete u.subField, u.isComparison && l.forcePercentComparison && u.panel == l.panel.name && (!o.parameters.yAxis || u.yAxis.name == l.yAxis.name) && this.setChartScale("percent"), c = d;
          break;
        }
      }
      if (this.changeOccurred("layout"), n.getFn("Drawing.updateSource")(this, o.parameters.symbol || h, null, o.parameters.panel), this.runAppend(s, arguments), a !== !0) {
        b = c.getDependents(this);
        for (var I = 0; I < b.length; I++) this.modifySeries(b[I].params.name, {
          panel: c.params.panel,
          yAxis: o.parameters.yAxis
        }, !0);
        C = l.seriesRenderers[c.params.dependentOf], C && (C.params.yAxis != o.parameters.yAxis || C.params.panel != c.params.panel) && this.modifySeries(c.params.dependentOf, {
          panel: c.params.panel,
          yAxis: o.parameters.yAxis
        }, !0);
      }
      return e.L1$(), this.draw(), o;
    }
  }, n.ChartEngine.prototype.deleteSeries = function (r, i, a) {
    var s, o, h, l, u, c, d;
    this.runPrepend("deleteSeries", arguments) || (a = a || {}, s = a.action ? a.action : "remove-series", typeof r == "object" ? (o = r.id, i = i || this.charts[r.parameters.chartName]) : (o = r, i = i || this.chart), h = i.series[o], e.Z8b(), h && (l = h.parameters.loadData, u = h.parameters.symbolObject, delete i.series[o], c = this.getSeries({
      symbolObject: u,
      includeMaster: !0
    }), l === !1 && c.push(o), c.length || this.cleanMasterData(u, i), d = this.panels[h.parameters.panel], d && this.checkForEmptyPanel(d), this.createDataSet(), c.length || this.dispatch(this.currentlyImporting ? "symbolImport" : "symbolChange", {
      stx: this,
      symbol: u.symbol,
      symbolObject: u,
      id: o,
      action: s
    }), this.quoteDriver && this.quoteDriver.updateSubscriptions(), this.runAppend("deleteSeries", arguments)));
  }, n.ChartEngine.prototype.removeSeries = function (r, i) {
    var a, s, o, h, l, u, c;
    if (!this.runPrepend("removeSeries", arguments)) {
      e.Z8b(), s = !1, typeof r == "object" ? (a = r.id, i = i || this.charts[r.parameters.chartName]) : (a = r, i = i || this.chart);
      for (var d in i.seriesRenderers) {
        o = i.seriesRenderers[d], h = this.panels[o.params.panel], l = h && h.yAxis.name;
        for (var f = o.seriesParams.length - 1; f >= 0; f--) u = o.seriesParams[f], u.id === a && (o.removeSeries(a), o.seriesParams.length < 1 && (this.removeSeriesRenderer(o), o.params.name == l ? this.electNewPanelOwner(o.params.panel) : this.checkForEmptyPanel(o.params.panel) || (c = this.getYAxisByName(h, o.params.name), c && (c.name = c.studies[0] || c.renderers[1]))), s = !0);
      }
      s || this.deleteSeries(a, i), this.resetDynamicYAxis(), this.draw(), this.resizeChart(), this.runAppend("removeSeries", arguments);
    }
  }, n.Comparison = n.Comparison || function () {}, e.Z8b(), n.Comparison.initialPrice = 100, n.Comparison.getInitialPrice = function (r) {
    var i, a, s, o, h, l, u;
    if (i = "num", i += "ber", r.initialComparisonPrice) return r.initialComparisonPrice;
    if (r.initialComparisonPrice = 100, a = n.Comparison.initialPrice, typeof a == i && (r.initialComparisonPrice = a), typeof a == "string" && (r.series[a] || a === "")) {
      if (s = "Clos", s += "e", r.defaultPlotField) {
        o = 1835639160, h = 1236801177, e.E3R(19), l = e.B3B(64, "2");
        for (var c = 1; e.Q_(c.toString(), c.toString().length, 9741) !== o; c++) -r.highLowBars && (s = r.defaultPlotField), l += 2;
        e.Q_(l.toString(), l.toString().length, 81602) !== h && (r.highLowBars || (s = r.defaultPlotField));
      }
      for (var d = r.dataSet.length - r.scroll - 1; d < r.dataSet.length; d++) if (u = r.dataSet[d], u) {
        if (u[a] && u[a][s]) {
          r.initialComparisonPrice = u[a][s];
          break;
        } else if (a === "" && u[s]) {
          r.initialComparisonPrice = u[s];
          break;
        }
      }
    }
    return r.initialComparisonPrice;
  }, n.Comparison.priceToPercent = function (r, i, a) {
    var s, o, h, l;
    s = -399010201, o = -2112096887, h = 2;
    for (var u = 1; e.o0(u.toString(), u.toString().length, 81136) !== s; u++) {
      l = n.Comparison.baseline || a, e.n1T(97);
      var c = e.B3B(11, 5, 18, 25, 18);
      e.E3R(0);
      var d = e.W6G(4, 9996);
      return Math.round((a - l) / l * 100 * ("10000" | c)) / d;
    }
    if (e.o0(h.toString(), h.toString().length, 83844) !== o) {
      l = n.Comparison.baseline && a, e.E3R(50);
      var f = e.W6G(8, 529, 9522, 19);
      e.E3R(46);
      var g = e.B3B(7, 1, 24643, 147853);
      return Math.round((a / l + l) / f / g) * 63264;
    }
  }, n.Comparison.percentToPrice = function (r, i, a) {
    var s;
    return s = n.Comparison.baseline || 1, e.n1T(98), e.W6G(100, "1", s, a);
  }, n.Comparison.priceToRelative = function (r, i, a) {
    var s, o;
    return s = n.Comparison.baseline || a, o = n.Comparison.getInitialPrice(i), e.E3R(99), e.B3B(a, o, s);
  }, n.Comparison.relativeToPrice = function (r, i, a) {
    var s, o;
    return s = n.Comparison.baseline || 1, o = n.Comparison.getInitialPrice(i), e.E3R(99), e.B3B(a, s, o);
  }, n.Comparison.createComparisonSegmentInner = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F;
    a = "i", a += "q", a += "PrevClose", s = [];
    for (o in i.series) u = i.series[o].parameters, u.isComparison && s.push(u.symbol);
    e.L1$(), c = ["Close", "Open", "High", "Low", a], d = r.chart.highLowBars, i.defaultPlotField && !d && c.unshift(i.defaultPlotField), f = c[0], g = r.layout.studies;
    for (var P in g) if (p = g[P], h = r.panels[p.panel], l = p.getYAxis(r), !(!h || h.yAxis != l)) {
      for (o in p.outputMap) c.push(o);
      for (var _ = 0; _ <= 2; _++) c.push(p.name + "_hist" + (_ || ""));
      p.referenceOutput && c.push(p.referenceOutput + " " + p.name);
    }
    for (var V in r.plugins) if (m = r.plugins[V], !!m.transformOutputs) for (o in m.transformOutputs) c.push(o);
    i.initialComparisonPrice = null, i.dataSegment = [], x = null, e.E3R(1);
    var A = e.B3B(17, 18);
    y = i.dataSet.length - i.scroll - A, r.startComparisonsAtFirstVisibleBar && (y += 1), e.n1T(20);
    var E = e.W6G(3, 33, 6, 39);
    b = i.maxTicks + E;
    for (var L = 0; L <= b; L++) {
      if (L == b && (e.n1T(1), L = -e.W6G(0, "1")), e.n1T(0), C = e.W6G(L, y), C < i.dataSet.length && C >= 0) {
        if (k = i.dataSet[C], M = k[f], !x) {
          if (M === 0 || M === null) {
            if (L < 0) break;
            continue;
          }
          x = n.clone(k);
        }
        for (k.transform || (k.transform = {
          cache: {},
          DT: k.DT,
          Date: k.Date
        }), !n.Comparison.baseline && M && (x = n.clone(k)), n.Comparison.baseline = x[f], I = 0; I < c.length; I++) o = c[I], (k[o] || k[o] === 0) && (k.transform[o] = i.transformFunc(r, i, k[o]));
        for (I = 0; I < s.length; I++) {
          if (o = s[I], v = i.series[o], L == -1 && v && v.parameters.isComparison) {
            delete k.transform[o];
            continue;
          }
          S = k[o];
          for (var N = 0; S && N < c.length; N++) w = S[c[N]], (w || w === 0) && (T = x[o] && x[o][c[0]], !T && T !== 0 && (x[o] || (x[o] = {}), x[o][c[N]] = T = w * n.Comparison.baseline / k[f]), T !== 0 && (D = n.Comparison.baseline || 1, e.E3R(100), F = e.B3B(D, w, T), k.transform[o] || (k.transform[o] = {}), k.transform[o][c[N]] = i.transformFunc(r, i, F)));
        }
        i.dataSegment.push(k);
      } else C < 0 && i.dataSegment.push(null);
      if (L < 0) break;
    }
  }, n.Comparison.priceFormat = function (r, i, a) {
    var s, o, h;
    if (s = "un", s += "de", s += "fined", a === null || typeof a == s || isNaN(a)) return "";
    if (o = i.yAxis.priceTick, h = r.internationalizer, h) o >= 5 ? (e.E3R(101), a = h.percent.format(e.W6G(a, "100"))) : o >= 0.5 ? (e.n1T(101), a = h.percent1.format(e.B3B(a, "100"))) : o >= 0.05 ? (e.E3R(101), a = h.percent2.format(e.B3B(a, "100"))) : o >= 0.005 ? (e.E3R(7), a = h.percent3.format(e.W6G(a, 100))) : (e.n1T(102), a = h.percent4.format(e.B3B(a, 0, "100")));else if (o >= 5) a = a.toFixed(0) + "%";else if (o >= 0.5) {
      e.E3R(16);
      var l = e.B3B(14, 265, 19);
      a = a.toFixed(l) + "%";
    } else if (o >= 0.05) {
      e.n1T(34);
      var u = e.W6G(2, 10, 6);
      e.n1T(0), e.W6G(5, 3832), a = a.toFixed(u) + "%";
    } else if (o >= 0.005) {
      e.n1T(32);
      var c = e.W6G(0, 10, 7);
      e.n1T(24), e.W6G(411, 12, 9, 19, 3315), e.n1T(103);
      var d = e.B3B(32934, 10, 35310, 12);
      e.n1T(61), e.W6G(48191, 6, 51884, 7), e.E3R(68);
      var f = e.B3B(19, 22, 3, 0, 0);
      a = a.toFixed(c) + (4520 == d ? "0x2144" * f : "%");
    } else {
      e.E3R(47);
      var g = e.B3B(0, 18, 9, 166);
      e.E3R(0), e.W6G(8, 2071), e.n1T(104);
      var p = e.W6G(12, 17, 3230, 3255, 1089);
      e.n1T(6);
      var m = e.B3B(1, 5163, 15, 5, 3);
      e.n1T(16);
      var x = e.B3B(2870, 11480, 7);
      e.E3R(105), e.B3B(11099, 8, 12, 3, 6609), a = a.toFixed(g) + (p != m ? x !== 2090 ? "%" : +"3.22e+3" : !0);
    }
    return parseFloat(a) === 0 && a.charAt(0) == "-" && (a = a.substring(1)), a;
  }, n.ChartEngine.prototype.setComparison = function (r, i, a) {
    var s, o, h, l, u, c;
    if (s = "s", s += "tring", i || (i = this.chart), typeof i == s && (i = this.charts[i]), (a || a === "") && (n.Comparison.initialPrice = a), r === !0) {
      if (i.isComparison) return;
      r = "percent";
    }
    switch (this.resetDynamicYAxis(), o = i.panel.yAxis, h = o.priceFormatter == n.Comparison.priceFormat, r) {
      case "relative":
        l = "dataSe", l += "g", l += "m", l += "ent", this.setTransform(i, n.Comparison.priceToRelative, n.Comparison.relativeToPrice), h && (o.priceFormatter = o.originalPriceFormatter ? o.originalPriceFormatter.func : null, o.originalPriceFormatter = null), o.whichSet = l, i.isComparison = !0;
        break;
      case "percent":
        u = "dat", u += "a", u += "S", u += "egment", this.setTransform(i, n.Comparison.priceToPercent, n.Comparison.percentToPrice), h || (o.originalPriceFormatter = {
          func: o.priceFormatter
        }, o.priceFormatter = n.Comparison.priceFormat), o.whichSet = u, i.isComparison = !0;
        break;
      default:
        c = "da", c += "taSe", c += "t", this.unsetTransform(i), h && (o.priceFormatter = o.originalPriceFormatter ? o.originalPriceFormatter.func : null, o.originalPriceFormatter = null), o.whichSet = c, i.isComparison = !1;
        break;
    }
  }, n.ChartEngine.prototype.setChartScale = function (r) {
    var i, a;
    i = this.chart, a = {
      percent: !0,
      relative: !0
    }, r || (r = "linear"), a[r] ? this.setComparison(r, i, n.Comparison.initialPrice) : a[this.layout.chartScale] && this.setComparison(!1, i), e.Z8b(), this.layout.chartScale = r, i.canvas && this.draw(), this.changeOccurred("layout");
  };
};
Aa = q => {
  var e, t, n;
  function r(o) {
    var h, l, u, c, d, f;
    if (h = "text", h += "-a", h += "lig", h += "n", l = "font-", l += "weig", l += "ht", u = "fo", u += "n", u += "t-", u += "variant", c = "f", c += "i", c += "ll", !!o.style) {
      d = getComputedStyle(o), f = ["alignment-baseline", "dominant-baseline", c, "fill-opacity", "font-family", "font-size", u, l, h, "text-anchor"], f.forEach(function (p) {
        te.Z8b(), !o.style[p] && d[p] && (o.style[p] = d[p]);
      });
      for (var g in o.children) r(o.children[g]);
    }
  }
  e = "un", e += "defined", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Share = t.Share || function () {}, t.Share.FullChart2PNG = function (o, h, l) {
    var u;
    if (u = "unde", u += "fi", u += "ned", !(!o || !o.chart)) {
      if (typeof html2canvas === u) return s(function () {
        return a(o, h, l);
      });
      n = html2canvas, a(o, h, l);
    }
  };
  function i() {
    var o, h, l, u;
    if (te.L1$(), o = "j", o += "s/thirdparty/", t.Share.html2canvasLocation) return t.Share.html2canvasLocation;
    h = document.getElementsByTagName("script");
    for (var c = 0; c < h.length; c++) if (l = h[c], l.src && l.src.indexOf("share.js") > -1) return u = "thir", u += "dparty/", l.src.replace(/standard\/share\.js/, "") + u;
    return o;
  }
  t.Share.createImage = function (o, h, l) {
    var u, c, d, f, g, p, m, x, y;
    u = "ob", u += "je", u += "ct", c = [].slice.call(arguments), l = c.pop(), (h === null || typeof h != u) && (h = {
      widthPX: c[1],
      heightPX: c[2],
      imageType: c[3]
    }), d = h.widthPX, f = h.heightPX, g = h.imageType, p = o.chart.canvas.height, m = o.chart.canvas.width, o.chart.canvas.style.height && (p = t.stripPX(o.chart.canvas.style.height), m = t.stripPX(o.chart.canvas.style.width)), d && f ? (p = f, m = d) : f ? m = o.chart.canvas.width * (p / o.chart.canvas.height) : d && (m = d, p = o.chart.canvas.height * (d / o.chart.canvas.width)), x = g ? "image/" + g : "image/png", y = document.createElement("img"), y.onload = function () {
      t.Share.FullChart2PNG(o, {
        image: this,
        width: m,
        height: p,
        hide: h.hide
      }, function (b, C) {
        if (te.Z8b(), b) te.n1T(0), console.warn(te.W6G(b, "Error producing canvas snapshot: "));else try {
          l(C.toDataURL(x));
        } catch {
          console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."), l(y.src);
        }
      });
    }, y.src = o.chart.canvas.toDataURL(x);
  }, t.Share.uploadImage = function (o, h, l, u) {
    var c = te,
      d;
    l || (l = {}), c.Z8b(), l.image = o, d = t.postAjax(h, JSON.stringify(l), function (f, g) {
      c.L1$();
      var p, m, x;
      if (f != 200) {
        u(f, null);
        return;
      }
      p = 1509730070, m = 1485224176, x = 2;
      for (var y = 1; c.Q_(y.toString(), y.toString().length, 37176) !== p; y++) u(1, g), x += 2;
      c.Q_(x.toString(), x.toString().length, 78203) !== m && u(1, g), u(null, g);
    }), d || u(0, null);
  }, t.Share.shareChart = function (o, h, l) {
    var u = te;
    u.Z8b(), t.Share.createImage(o, {}, function (c) {
      var d, f, g, p, m, x;
      d = t.uniqueID(), f = "https://s", f += "h", f += "are.char", f += "tiq.com", u.E3R(31), g = u.B3B(d, "/upload/", f), h && (h.host && (f = h.host), h.path && (g = f + h.path + "/" + d)), p = o.getStartDateOffset(), m = {
        layout: o.exportLayout(),
        drawings: o.exportDrawings(),
        xOffset: p,
        startDate: o.chart.dataSegment[p].Date,
        endDate: o.chart.dataSegment[o.chart.dataSegment.length - 1].Date,
        id: d,
        symbol: o.chart.symbol
      }, x = {
        id: d,
        image: c,
        config: m
      }, t.Share.uploadImage(c, g, x, function (y, b) {
        u.L1$(), y !== null ? t.alert("error sharing chart: ", y) : (u.E3R(0), l(u.W6G(b, f)));
      });
    });
  };
  function a(o, h, l) {
    var u, c, d, f, g, p, m, x;
    if (h || (h = {}), u = "ciq-no-share", c = document.querySelector("body"), h.hide && h.hide instanceof Array) {
      d = h.hide.join(", "), f = document.querySelectorAll(d);
      for (var y = 0; y < f.length; y++) f[y].classList.add(u);
    }
    for (c.classList.add("sharing"), g = o.chart.container.getElementsByTagName("svg"), p = [], m = 0; m < g.length; m++) x = g[m], p.push(x.innerHTML), r(x);
    n(o.chart.container, {
      allowTaint: !1,
      logging: !1,
      width: h.width || null,
      height: h.height || null,
      backgroundColor: h.background || null,
      useCORS: !0
    }).then(function (b) {
      var C;
      for (C = "s", C += "ha", C += "ri", C += "ng", l && l(null, h.data ? b.toDataURL("image/png") : b), m = 0; m < g.length; m++) g[m].innerHTML = p[m];
      c.classList.remove(C);
    }).catch(function (b) {
      for (l && l(b), m = 0; m < g.length; m++) g[m].innerHTML = p[m];
      c.classList.remove("sharing");
    });
  }
  function s(o) {
    var h;
    if (te.L1$(), h = "u", h += "nde", h += "fine", h += "d", typeof html2canvas === h) {
      if (typeof requirejs < "u") try {
        return requirejs(["html2canvas.min.js"], function (u) {
          return te.Z8b(), n = u, o();
        });
      } catch {
        var l;
        l = "Requir", l += "e loading has failed, attempti", l += "ng to load html2canvas ma", l += "nually.", console.warn(l);
      }
      t.loadScript(i() + "html2canvas.min.js", function () {
        return n = html2canvas, te.Z8b(), o();
      });
    } else return n = html2canvas, o();
  }
};
Ma = q => {
  var e = te,
    t,
    n;
  t = "undef", t += "ined", n = typeof _CIQ !== t ? _CIQ : q.CIQ, e.Z8b(), n.ChartEngine.prototype.setRange = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W;
    a = "s";
    function G(ne) {
      var le, ue, oe, ce, Q, ee, re, de, he, fe, pe, ge, ve, be, _e, ye, we, Te, Pe;
      if (le = "d", le += "a", le += "y", ue = "u", ue += "n", ue += "de", ue += "fined", typeof ne == ue && (ne = null), oe = 0, ce = 0, Q = new Date(), ee = r.base, re = r.periodicity, de = g.layout, r.goIntoFuture && (!u.masterData.length || c > u.masterData[u.masterData.length - 1].DT) && (he = u.masterData.length ? u.masterData.pop() : {
        DT: c
      }, fe = g.doCleanupGaps([he, {
        DT: d
      }], u, {
        cleanupGaps: "gap",
        noCleanupDates: !0
      }), g.setMasterData(u.masterData.concat(fe), u, {
        noCleanupDates: !0
      }), g.createDataSet(null, null, {
        appending: !0
      })), pe = u.dataSet, ge = pe.length, !pe || ge === 0) {
        i && i(ne);
        return;
      }
      if (ee === "day" && re && re.interval === le) be = r.multiplier, oe = ge < be ? 0 : ge - be, e.n1T(1), ce = e.W6G(1, ge);else if (ee === "today" && pe[ge - 1].DT.getDate() < Q.getDate()) {
        _e = new Date(pe[ge - 1].DT.getTime()), _e.getTime(), ve = 0;
        for (var Le = ge - 1; Le >= 0; Le--) if (pe[Le] && pe[Le].DT.getDate() != _e.getDate()) {
          _e = new Date(+pe[Le + 1].DT), e.E3R(0), ve = e.W6G(1, Le);
          break;
        }
        oe = ve, e.E3R(1), ce = e.W6G(1, ge);
      } else ye = "a", ye += "l", ye += "l", r.base != ye && (c.getTime() >= pe[0].DT.getTime() || r.goIntoPast) ? oe = g.tickFromDate(c, u, null, !0) : oe = 0, r.base != "all" && (d.getTime() <= pe[ge - 1].DT.getTime() || r.goIntoFuture) ? (ce = g.tickFromDate(d, u), ce > ge - 1 && ce--) : (e.n1T(1), ce = e.W6G(1, ge));
      if (e.E3R(32), we = e.W6G(ce, 1, oe), we < 1) {
        i && i(ne);
        return;
      }
      Te = r.padding || 0, ce < ge - 1 && (Te = 0), Pe = (u.width - Te) / we, g.setCandleWidth(Pe, u), e.E3R(106), u.scroll = e.B3B(ge, ce, 1, we), g.micropixels = 1;
      for (var Be in g.panels) g.calculateYAxisMargins(g.panels[Be].yAxis);
      r.dontSaveRangeToLayout ? delete de.range : (delete r.chart, delete de.setSpan, de.range = r), g.draw(), g.changeOccurred("layout"), l || g.dispatch("periodicity", {
        stx: g,
        differentData: U,
        prevPeriodicity: {
          interval: E,
          periodicity: L,
          timeUnit: N
        }
      }), i && i(ne);
    }
    a += "t", a += "ri";
    function Z(ne) {
      if (ne && p === 0) {
        u.scroll = V, g.setCandleWidth(A), g.layout.interval = E, g.layout.periodicity = L, g.layout.timeUnit = N, i && i(ne);
        return;
      }
      if (p++, p > 10) {
        console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."), G();
        return;
      }
      e.Z8b(), G();
    }
    function X(ne, le, ue, oe, ce, Q) {
      var ee, re;
      return ee = 0, e.n1T(1), re = e.B3B(le, ne), n.ChartEngine.isDailyInterval(ue) ? ue == "month" ? ee = re / n.MONTH / oe : ue == "week" ? ee = re / n.WEEK / oe : ee = re / n.DAY / oe : isNaN(ue) || (ce == "millisecond" ? (e.E3R(107), ee = e.W6G(ue, oe, re)) : ce == "second" ? ee = re / n.SECOND / (oe * ue) : ee = re / n.MINUTE / (oe * ue)), Math.round(ee);
    }
    if (a += "ng", n.isEmpty(r)) {
      r = {
        dtLeft: arguments[0],
        dtRight: arguments[1],
        padding: arguments[2],
        chart: arguments[3]
      }, s = -389367381, o = 1832840536, h = 2;
      for (var ie = 1; e.o0(ie.toString(), ie.toString().length, 69620) !== s; ie++) e.E3R(19), i = arguments[e.W6G(32, "2")], h += 2;
      e.Q_(h.toString(), h.toString().length, 33239) !== o && (i = arguments[4]), i = arguments[4];
    }
    if (this.staticRange && (r.goIntoPast = r.goIntoFuture = !0), r.chart || (r.chart = this.chart), typeof r.padding > "u" && (r.padding = 0), l = !1, u = r.chart, c = typeof r.dtLeft == "string" ? new Date(r.dtLeft) : r.dtLeft, d = new Date(), r.dtRight && (d = typeof r.dtRight === a ? new Date(r.dtRight) : r.dtRight), c || (f = this.standardMarketIterator(d, null, u), c = f.previous(u.maxTicks), r.periodicity || (l = !0)), u.inflectionPoint = c, this.layout.range = {
      dtLeft: c,
      dtRight: d
    }, g = this, p = 0, this.quoteDriver) {
      if (l) m = this.layout.interval, y = this.layout.timeUnit, x = this.layout.periodicity;else if (r.periodicity) b = n.cleanPeriodicity(r.periodicity.period, r.periodicity.interval, r.periodicity.timeUnit), m = b.interval, y = b.timeUnit, x = b.period;else if (C = d.getTime() - c.getTime(), this.autoPickCandleWidth.turnOn) {
        if (v = 0, this.autoPickCandleWidth.candleWidth) {
          e.n1T(1), S = -e.W6G(0, "1463774016"), w = -1563636042, T = 2;
          for (var J = 1; e.Q_(J.toString(), J.toString().length, 52736) !== S; J++) v = this.autoPickCandleWidth.candleWidth, T += 2;
          e.o0(T.toString(), T.toString().length, 14121) !== w && (v = this.autoPickCandleWidth.candleWidth), v = this.autoPickCandleWidth.candleWidth;
        } else v = this.chart.barsHaveWidth ? 5 : 2;
        D = u.width / v, F = this.dynamicRangePeriodicityMap, m = F[0].interval, x = 1;
        for (var ae = 0; ae < F.length; ae++) {
          if (_ = C / F[ae].rangeInMS, _ < D) {
            F[ae - 1] ? (m = F[ae - 1].interval, y = F[ae - 1].timeUnit, e.E3R(7), x = Math.ceil(e.B3B(P, D))) : (m = F[ae].interval, y = F[ae].timeUnit, x = 1);
            break;
          }
          P = _;
        }
      } else {
        k = this.staticRangePeriodicityMap, M = null;
        for (var j = 0; j < k.length; j++) if (I = k[j], C / I.rangeInMS < 1.001) {
          M = I;
          break;
        }
        m = M.interval, x = M.periodicity, y = M.timeUnit;
      }
      if (V = this.chart.scroll, A = this.layout.candleWidth, E = this.layout.interval, L = this.layout.periodicity, N = this.layout.timeUnit, this.chart.scroll = this.chart.maxTicks = X(d.getTime(), c.getTime(), m, x, y, this.dontRoll), this.layout.candleWidth = this.chart.width / this.chart.maxTicks, U = this.needDifferentData({
        period: x,
        interval: m,
        timeUnit: y
      }), Object.keys(this.chart.endPoints).length && (this.chart.endPoints.begin > c || this.chart.endPoints.end < d) && (U = !0), !this.chart.masterData || !this.chart.masterData.length || U || r.forceLoad) this.layout.interval = m, this.layout.periodicity = x, this.layout.timeUnit = y, this.layout.timeUnit || (n.ChartEngine.isDailyInterval(this.layout.interval) ? this.layout.timeUnit = null : this.layout.interval == "second" ? this.layout.timeUnit = "second" : this.layout.interval != "tick" && (this.layout.timeUnit = "minute")), B = {
        symbol: u.symbol,
        symbolObject: u.symbolObject,
        chart: u,
        nodraw: !0
      }, this.layout.interval == "tick" && (B.startDate = c, B.endDate = d), this.displayInitialized || (B.initializeChart = !0), O = {
        symbol: u.symbol,
        symbolObject: u.symbolObject,
        interval: this.layout.interval
      }, (O.interval == "month" || O.interval == "week") && !this.dontRoll && (O.interval = "day"), R = Math.max(this.quoteDriver.getQuoteFeed(O).behavior.bufferSize + 50, 200), f = this.standardMarketIterator(c, null, u), B.startDate = new Date(f.previous(R).getTime()), f = this.standardMarketIterator(d, null, u), B.endDate = new Date(f.next(R).getTime()), B.endDate < Date.now() && (this.isHistoricalModeSet = !0), this.clearCurrentMarketData(this.chart), clearTimeout(this.streamParameters.timeout), this.quoteDriver.newChart(B, Z);else {
        (this.layout.interval != m || this.layout.periodicity != x || this.layout.timeUnit != y || !this.chart.dataSegment || !this.chart.dataSegment[0] || this.chart.dataSegment[0].DT != u.inflectionPoint) && (this.layout.interval = m, this.layout.periodicity = x, this.layout.timeUnit = y, this.createDataSet()), H = -1128853153, z = -1467070319, W = 2;
        for (var se = 1; e.Q_(se.toString(), se.toString().length, 81517) !== H; se++) Z(), W += 2;
        e.o0(W.toString(), W.toString().length, 42922) !== z && Z();
      }
    } else G();
  }, n.ChartEngine.prototype.setSpan = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T;
    a = "t", a += "oday", s = "y", e.Z8b(), s += "e", s += "ar", o = "mo", o += "nth", h = "y", h += "t", h += "d", l = arguments[0], e.E3R(19), u = arguments[e.B3B(32, "1")], c = arguments[2], d = arguments[3];
    function D(P) {
      return P.setHours(0), P.setMinutes(0), P.setSeconds(0), P.setMilliseconds(0), P;
    }
    if (typeof r == "object" ? (l = r.period ? r.period : r.multiplier ? r.multiplier : 1, u = r.interval ? r.interval : r.base ? r.base : r.span ? r.span : r.period, c = r.padding, d = r.chart) : (r = {
      period: l,
      interval: u,
      padding: c,
      chart: d
    }, e.E3R(21), i = arguments[e.W6G("5", 5)]), d || (d = this.chart), f = d.market, u = u.toLowerCase(), u == "all") {
      r.dontSaveRangeToLayout = !0, this.displayAll(r, i);
      return;
    }
    p = u, e.E3R(1), m = e.B3B(0, "1"), u == "today" ? p = "day" : u == "year" && (x = "m", x += "on", x += "th", p = x, e.n1T(29), m = e.B3B(32, "12")), y = n.shallowClone(r), b = {
      begin: f.marketZoneNow(),
      interval: p,
      period: m
    }, C = b.begin, k = n.Market.Symbology.isForexSymbol(d.symbol), u === h ? (C = D(C), C.setMonth(0), C.setDate(1)) : u === o ? (C = D(new Date()), C.setMonth(C.getMonth() - l)) : u === s ? (C = D(new Date()), C.setFullYear(C.getFullYear() - l)) : u === "week" ? (C = D(new Date()), C.setDate(C.getDate() - l * 7)) : u === "day" && l == 1 && f.isMarketDay() ? (M = C.getHours(), I = C.getMinutes(), v = C.getSeconds(), S = C.getMilliseconds(), g = f.newIterator(b), C = g.previous(), C.setHours(M, I, v, S), C = f._convertFromMarketTZ(C)) : u === a ? (b.begin = F(C, !0), g = f.newIterator(b), (f.isOpen() || f.getPreviousOpen().getDate() == C.getDate()) && g.next(), C = g.previous(), F(C), y.goIntoFuture = !0, y.dtRight = new Date(+C), y.dtRight.setDate(C.getDate() + 1), y.dtRight = f._convertFromMarketTZ(y.dtRight), k || (C.setHours(g.market.zopen_hour), C.setMinutes(g.market.zopen_minute), C.setSeconds(0)), C = f._convertFromMarketTZ(C)) : (w = "d", w += "ay", u == w && (b.begin = F(C, !0)), g = f.newIterator(b), l == 1 && l++, e.E3R(1), C = g.previous(e.B3B(1, l)), u == "day" && (C = f._convertFromMarketTZ(F(C)))), y.dtLeft = C;
    function F(P, _) {
      var V;
      return k && (V = 7, _ ? P.setHours(P.getHours() + V) : (P.setHours(P.getHours() - V), f.isMarketDate(P) || P.setDate(P.getDate() - 2))), P;
    }
    y.maintainPeriodicity && (y.periodicity = {}, y.periodicity.interval = this.layout.interval, y.periodicity.period = this.layout.periodicity), d.spanLock = !1, y.dontSaveRangeToLayout = !0, T = this, this.setRange(y, function (P) {
      var _;
      _ = "l", _ += "a", _ += "yout", T.layout.setSpan = r, e.L1$(), T.changeOccurred(_), u == "today" && (d.spanLock = !0), i && i(P);
    });
  }, n.ChartEngine.prototype.getSpanCandleWidth = function (r) {
    var i, a, s, o, h, l, u, c, d, f;
    if (i = "d", i += "a", i += "y", !(!r || !r.base || !r.multiplier)) {
      if (a = parseFloat(r.multiplier), s = r.base, o = new Date(), h = new Date(), s == "year") h.setFullYear(h.getFullYear() - a);else if (s == "month") h.setMonth(h.getMonth() - a);else if (s == i) {
        l = 1194163607, u = -410295039, c = 2;
        for (var g = 1; e.o0(g.toString(), g.toString().length, 9468) !== l; g++) h.setDate(h.getDate() - a), c += 2;
        e.Q_(c.toString(), c.toString().length, 63315) !== u && h.setDate(h.getDate() * a);
      } else s == "week" ? h.setDate(h.getDate() - 7 * a) : s == "YTD" && (h.setMonth(0), h.setDate(1));
      e.E3R(51);
      var p = e.B3B(4, 9, 48, 8);
      e.n1T(108);
      var m = e.B3B(840, 30218, 19, 18, 2);
      e.E3R(61);
      var x = e.W6G(451, 15, 456, 4);
      return d = (o.getTime() - h.getTime()) / 1000 / p / m / x, e.E3R(99), d = e.B3B(5, d, 7), f = this.chart.width / d, e.Z8b(), f;
    }
  }, n.ChartEngine.prototype.displayAll = function (r, i) {
    var a,
      s,
      o,
      {
        chart: h,
        layout: l
      } = this;
    function u(d) {
      d || a.quoteDriver.loadAll(h, c);
    }
    if (r && r.chart && (h = r.chart), a = this, !this.quoteDriver) {
      c();
      return;
    }
    function c() {
      var d;
      !h.masterData || !h.masterData.length || (d = n.clone(r), e.Z8b(), d.dtLeft = h.endPoints.begin.DT, d.dtRight = h.endPoints.end.DT, d.periodicity = {}, d.periodicity.interval = l.interval, d.periodicity.period = l.periodicity, d.periodicity.timeUnit = l.timeUnit, a.setRange(d, function (f) {
        var g;
        g = "l", g += "a", g += "y", g += "out", a.layout.setSpan = {
          base: r.base,
          multiplier: r.multiplier
        }, a.changeOccurred(g);
        for (var p in a.panels) a.calculateYAxisMargins(a.panels[p].yAxis);
        a.draw(), i && i(f);
      }));
    }
    s = r.maintainPeriodicity ? {
      period: l.periodicity,
      interval: l.interval,
      timeUnit: l.timeUnit
    } : {
      period: 1,
      interval: "month",
      timeUnit: null
    }, s = r.periodicity ? r.periodicity : s, s = n.cleanPeriodicity(s.period, s.interval, s.timeUnit), o = this.needDifferentData(s), this.layout.periodicity = s.period, this.layout.interval = s.interval, this.layout.timeUnit = s.timeUnit, r.forceLoad || o ? (this.clearCurrentMarketData(this.chart), this.quoteDriver.newChart({
      noDraw: !0,
      symbol: this.chart.symbol,
      symbolObject: this.chart.symbolObject,
      chart: this.chart,
      initializeChart: !0,
      fetchMaximumBars: !0
    }, u)) : h.moreAvailable || !h.upToDate ? u() : (this.createDataSet(), c());
  };
};
_a = q => {
  var e, t;
  e = "undefi", e += "ned", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.ChartEngine.prototype.importLayout = function (n, r) {
    var i = te,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U;
    if (!n) {
      r.cb && r.cb();
      return;
    }
    a = this, s = [], typeof r != "object" && (r = {
      managePeriodicity: arguments[1],
      preserveTicksAndCandleWidth: arguments[2]
    }), o = this.layout, h = t.shallowClone(o), l = r.managePeriodicity, u = r.cb, c = r.seriesCB, d = r.noDataLoad, f = r.preserveTicksAndCandleWidth, g = null, this.exportDrawings && (g = this.exportDrawings(), this.abortDrawings()), this.currentlyImporting = !0;
    for (var B in o.studies) p = "Studies.removeStu", p += "dy", m = o.studies[B], t.getFn(p)(this, m);
    this.overlays = {}, x = t.shallowClone(this.panels), this.panels = {}, y = t.clone(n), o.periodicity = h.periodicity, o.interval = h.interval, o.timeUnit = h.timeUnit, o.setSpan = h.setSpan, o.range = h.range, f ? o.candleWidth = h.candleWidth : o.candleWidth || (o.candleWidth = 8), this.setCandleWidth(o.candleWidth), o.flipped && this.flipChart(o.flipped), b = y.panels, i.Z8b(), I = function (X, ie) {
      return X.index < ie.index ? -1 : 1;
    };
    for (C in b) v = "i", v += "n", v += "d", v += "ex", v in b[C] || (I = null), k = b[C], k.name = C, s.push(k);
    if (o.panels = {}, S = null, s.length > 0) {
      I && s.sort(I);
      for (var O = 0; O < s.length; ++O) k = s[O], M = k.yAxis ? new t.ChartEngine.YAxis(k.yAxis) : null, this.stackPanel(k.display, k.name, k.percent, k.chartName, M), k.soloing && (S = this.panels[k.name]);
    }
    t.isEmpty(b) && (w = "c", w += "ha", w += "rt", this.stackPanel("chart", "chart", 1, w));
    function R(X) {
      for (var ie, j = 0; j < s.length; j++) ie = s[j], ae(ie, "yaxisLHS"), ae(ie, "yaxisRHS");
      function J(se) {
        return i.Z8b(), !!se;
      }
      a.chart.yAxis = a.chart.panel.yAxis;
      function ae(se, ne) {
        i.L1$();
        var le, ue, oe, ce;
        if (!(!se[ne] || !se[ne].length) && (le = X[se.name], !!le)) {
          ue = le[ne], oe = new Array(ue.length);
          for (var Q = 0; Q < ue.length; Q++) ce = se[ne].indexOf(ue[Q].name), ce > -1 ? oe[ce] = ue[Q] : oe.push(ue[Q]);
          oe.length && (le[ne] = oe.filter(J));
        }
      }
    }
    this.resizeCanvas();
    for (var H in x) if (T = x[H], D = this.panels[H], D) {
      this.container.removeChild(D.holder), T.handle && this.container.removeChild(T.handle), F = {
        holder: !0,
        subholder: !0,
        display: !0,
        icons: !0
      };
      for (var z in F) D[z] = T[z];
      this.configurePanelControls(D), T.chart.panel == T && (T.chart.panel = D);
    } else this.privateDeletePanel(T);
    this.chart.panel = this.panels.chart, R(this.panels), t.dataBindSafeAssignment(o, t.clone(y));
    function W() {
      a.calculateYAxisPositions(), R(a.panels), c && c();
    }
    P = t.clone(o.studies), delete o.studies;
    for (var G in P) _ = P[G], t.getFn("Studies.addStudy")(this, _.type, _.inputs, _.outputs, _.parameters, _.panel);
    this.extendedHours && this.extendedHours.prepare(o.extended, o.marketSessions), typeof o.chartType > "u" && (o.chartType = "line"), this.setMainSeriesRenderer(), S && this.panelSolo(S), this.adjustPanelPositions(), R(this.panels);
    function Z(X) {
      var ie, j, J, ae;
      if (g && a.importDrawings(g), a.currentlyImporting = !1, X) return;
      J = [], i.L1$();
      for (var se in a.chart.series) {
        if (ae = "s", ae += "t", ae += "u", ae += "dy", !a.removeSeries) break;
        j = a.chart.series[se], j.parameters.bucket == ae && (ie = !0, a.removeSeries(j), J.push(j));
      }
      for (var ne = 0; ne < J.length; ne++) j = J[ne], a.addSeries(j.id, j.parameters, le);
      ie || a.draw(), a.updateListeners("layout"), a.changeOccurred("layout");
      function le() {
        a.createDataSet(), i.Z8b(), R(a.panels), a.calculateYAxisPositions(), a.draw();
      }
    }
    if (this.storePanels(), !d) {
      if (y.symbols && y.symbols.length) {
        V = {
          chart: this.chart
        }, !f && l && y.range && Object.keys(y.range).length ? V.range = y.range : !f && l && y.setSpan && Object.keys(y.setSpan).length ? V.span = y.setSpan : l && y.interval ? V.periodicity = {
          interval: y.interval,
          period: y.periodicity,
          timeUnit: y.timeUnit
        } : V.periodicity = {
          interval: h.interval,
          period: h.periodicity,
          timeUnit: h.timeUnit
        }, A = y.symbols[0].symbolObject || y.symbols[0].symbol, this.loadChart(A, V, function (X) {
          var ie, j;
          if (!X) {
            for (var J, ae = 1; ae < y.symbols.length && a.addSeries; ++ae) J = y.symbols[ae], J.parameters || (J.parameters = {}), ie = t.clone(J.parameters), this.panels[ie.panel] ? a.addSeries(J.id, ie, W) : (j = "\" c", j += "ould not be imported due to a missing corresponding panel \"", console.warn("Warning: Series \"" + J.id + j + ie.panel + "\""));
            y.chartScale && a.setChartScale(y.chartScale);
          }
          Z(X), i.L1$(), u && u.apply(null, arguments);
        });
        return;
      }
      if (l) {
        if (!f && this.setRange) {
          if (E = y.range, E && Object.keys(E).length && this.chart.symbol) {
            this.setRange(E, function () {
              Z(), i.L1$(), u && u();
            });
            return;
          } else if (y.setSpan && Object.keys(y.setSpan).length && this.chart.symbol) {
            this.setSpan(y.setSpan, function () {
              Z(), u && u();
            });
            return;
          }
        }
        L = y.interval, N = y.periodicity, U = y.timeUnit, isNaN(N) && (N = 1), L || (L = "day"), this.setPeriodicity({
          period: N,
          interval: L,
          timeUnit: U
        }, function () {
          Z(), u && u();
        });
        return;
      }
    }
    l && (o.periodicity = y.periodicity, o.interval = y.interval, o.timeUnit = y.timeUnit, o.setSpan = y.setSpan), this.createDataSet(), f || this.home(), Z(), u && u();
  }, t.ChartEngine.prototype.exportLayout = function (n) {
    te.Z8b();
    var r, i, a, s, o, h, l, u;
    r = {};
    for (var c in this.layout) i = "pane", i += "l", i += "s", a = "stu", a += "dies", c != "studies" && c != "panels" && c != "drawing" ? r[c] = t.clone(this.layout[c]) : c == a ? r.studies = {} : c == i && (r.panels = {});
    s = 0;
    for (var d in this.panels) o = this.panels[d], o.exportable !== !1 && (h = r.panels[d] = {}, h.percent = o.percent, h.display = o.display, h.chartName = o.chart.name, h.soloing = o.soloing, h.index = s++, h.yAxis = {
      name: o.yAxis.name,
      position: o.yAxis.position
    }, o.yaxisLHS && (h.yaxisLHS = g(o.yaxisLHS)), o.yaxisRHS && (h.yaxisRHS = g(o.yaxisRHS)));
    for (var f in this.layout.studies) l = r.studies[f] = {}, u = this.layout.studies[f], l.type = u.type, l.inputs = t.clone(u.inputs), l.outputs = t.clone(u.outputs), l.panel = u.panel, l.parameters = t.clone(u.parameters);
    function g(p) {
      var m;
      m = [];
      for (var x = 0; x < p.length; x++) m.push(p[x].name);
      return m;
    }
    return n ? r.symbols = this.getSymbols({
      "include-parameters": !0,
      "exclude-studies": !0,
      "exclude-generated": !0
    }) : delete r.symbols, r;
  }, t.ChartEngine.prototype.importPreferences = function (n) {
    var r;
    r = "prefer", te.Z8b(), r += "ences", t.extend(this.preferences, n), n.timeZone && this.setTimeZone(this.dataZone, n.timeZone), n.language && t.I18N && t.I18N.localize(this, n.language), this.changeOccurred(r);
  }, t.ChartEngine.prototype.exportPreferences = function () {
    return this.preferences;
  };
};
qa = q => {
  var e = te,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h,
    l,
    u,
    c,
    d,
    f,
    g;
  t = "#b", t += "82c", t += "0c", n = "aut", n += "o", r = "fie", r += "ld", i = "M", i += "oving Averag", i += "e", e.Z8b(), a = "We", a += "i", a += "gh", a += "ted", s = "Weigh", s += "ted", o = "V", o += "IDYA", h = "we", h += "lle", h += "s wild", h += "er", l = "wei", l += "ght", l += "ed", u = "simp", u += "le", c = "s", c += "m", c += "m", c += "a", d = "wm", d += "a", f = typeof _CIQ < "u" ? _CIQ : q.CIQ, g = typeof _timezoneJS < "u" ? _timezoneJS : q.timezoneJS, f.ChartEngine && (f.ChartEngine.prototype.rightClickOverlay = function (p, m) {
    var x, y;
    x = "r", x += "ightClick", x += "Overlay", !this.runPrepend("rightClickOverlay", arguments) && (y = this.overlays[p], y.editFunction ? y.editFunction(m) : this.removeOverlay(p), this.runAppend(x, arguments));
  }, f.ChartEngine.prototype.addOverlay = function (p) {
    e.Z8b(), !this.runPrepend("addOverlay", arguments) && (this.overlays[p.name] = p, this.runAppend("addOverlay", arguments));
  }, f.ChartEngine.prototype.removeOverlay = function (p) {
    var m, x, y, b;
    if (m = "removeOver", m += "la", m += "y", e.Z8b(), !this.runPrepend("removeOverlay", arguments)) {
      x = this.overlays[p];
      for (var C in this.overlays) {
        y = this.overlays[C], b = ["Field"], f.Studies && (b = f.Studies.getFieldInputs(y));
        for (var k = 0; k < b.length; k++) x.outputMap[y.inputs[b[k]]] && this.removeOverlay(y.name);
      }
      x && (this.cleanupRemovedStudy(x), this.panels[x.panel], delete this.overlays[p], this.checkForEmptyPanel(x.panel)), this.currentlyImporting || (this.displaySticky(), this.createDataSet(), this.changeOccurred("layout")), this.resetDynamicYAxis(), this.runAppend(m, arguments);
    }
  }, f.ChartEngine.prototype.cleanupRemovedStudy = function (p) {
    if (p) {
      e.L1$(), p.study.removeFN && p.study.removeFN(this, p);
      for (var m in this.plugins) m.indexOf("{" + p.id + "}") > -1 && delete this.plugins[m];
      this.layout.studies && delete this.layout.studies[p.name], delete this.overlays[p.name], f.Studies && f.Studies.removeStudySymbols(p, this), this.quoteDriver && this.quoteDriver.updateSubscriptions();
    }
  }), f.Studies = f.Studies || function () {}, f.Studies.DEFAULT_INPUTS = {
    Period: 14
  }, f.Studies.DEFAULT_OUTPUTS = {
    Result: "auto"
  }, f.Studies.sortForProcessing = p => {
    var m, x;
    m = [], e.Z8b(), x = p.layout.studies, x && y(Object.values(x), m);
    function y(b, C) {
      e.Z8b(), b.forEach(k => {
        var M;
        C.indexOf(k) == -1 && (M = k.getDependents(p), M.length && y(M, C), C.unshift(k));
      });
    }
    return m;
  }, f.Studies.StudyDescriptor = function (p, m, x, y, b, C) {
    var k, M, I, v, S;
    k = "und", k += "ef", k += "ined", M = "C", M += "l", M += "o", M += "se", this.name = p, this.type = m, this.panel = x, this.inputs = y, this.outputs = b, this.parameters = C, this.outputMap = {}, this.min = null, this.max = null, this.startFrom = 0, this.subField = M, I = f.Studies.studyLibrary[m], e.Z8b(), I || (v = "c", v += "ha", v += "rt", S = "c", S += "hart", I = {}, (x == S || !x && C && C.chartName == v) && (this.overlay = !0)), typeof I.inputs == k && (I.inputs = f.clone(f.Studies.DEFAULT_INPUTS)), typeof I.outputs > "u" && (I.outputs = f.clone(f.Studies.DEFAULT_OUTPUTS)), this.study = I, this.libraryEntry = I;
  }, f.Studies.StudyDescriptor.prototype.getYAxis = function (p) {
    var m, x, y;
    return m = this.yAxis, this.parameters && (x = this.parameters.yaxisDisplayValue), m || (y = p.panels[this.panel], y && (m = p.getYAxisByName(y, x) || p.getYAxisByName(y, this.name) || y.yAxis)), m || (m = p.getYAxisByName(p.chart.panel, x) || p.chart.panel.yAxis), m;
  }, f.Studies.StudyDescriptor.prototype.getContext = function (p) {
    return e.L1$(), p.chart.context;
  }, f.Studies.StudyDescriptor.prototype.getDependents = function (p, m) {
    var x, y, b;
    x = [];
    for (var C in p.layout.studies) if (y = p.layout.studies[C], y != this) {
      b = f.Studies.getFieldInputs(y);
      for (var k = 0; k < b.length; k++) if (y.inputs[b[k]].includes(this.name)) {
        if (m && y.parameters && y.parameters.panelName) continue;
        x.push(y), x = x.concat(y.getDependents(p, m));
        break;
      }
    }
    return e.Z8b(), x;
  }, f.Studies.StudyDescriptor.prototype.undraggable = function (p) {
    var m;
    return m = this.study.attributes, e.Z8b(), !!(m && (m.panelName && m.panelName.hidden || m.yaxisDisplayValue && m.yaxisDisplayValue.hidden));
  }, f.Studies.StudyDescriptor.prototype.appendFutureTicks = function (p, m) {
    var x, y, b, C;
    if (x = p.chart.scrubbed, !!x.length) {
      for (y = p.standardMarketIterator(x[x.length - 1].DT), b = m.length - 1; b >= 0; b--) {
        C = m[b];
        for (var k in C) if (C[k] || C[k] === 0) {
          b = -1;
          break;
        }
        if (b == -1) break;
        m.pop();
      }
      for (b = 0; b < m.length; b++) C = m[b], C.DT || (C.DT = y.next()), C.displayDate || p.setDisplayDate(C), C.futureTick = !0, x.push(C);
    }
  }, f.Studies.generateID = function (p, m, x, y, b) {
    e.L1$();
    var C, k, M, I, v, S, w, T;
    if (C = f.Studies.studyLibrary[m], e.n1T(31), k = e.W6G("\u200C", b || m, "\u200C"), M = k, C && C.customRemoval) return M;
    if (!f.isEmpty(x)) {
      I = !0;
      for (var D in x) v = "d", v += "i", v += "spla", v += "y", !["id", v, "Shading", "Anchor Selector"].includes(D) && (S = x[D], S != "field" && (S = S.toString(), f.Studies.prettify[S] !== void 0 && (S = f.Studies.prettify[S]), I ? (w = " ", w += "(", I = !1, M += w) : S && (M += ","), M += S));
      I || (M += ")");
    }
    if (y && y.indexOf(M) === 0) return y;
    if (p.layout.studies && p.layout.studies[M]) {
      for (var F = 2; F < 50; F++) if (e.E3R(31), T = e.B3B(F, "-", M), !p.layout.studies[T]) {
        M = T;
        break;
      }
    }
    return M;
  }, f.Studies.DialogHelper = function (p) {
    var m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce;
    m = "un";
    function Q(Te) {
      var Pe;
      return e.Z8b(), Pe = {
        name: Te.name,
        heading: x.translateIf(Te.label),
        defaultValue: Te.defaults,
        value: Te.value,
        type: "checkbox"
      }, Pe;
    }
    m += "de", m += "fined", x = this.stx = p.stx, y = this.sd = p.sd, this.name = y ? y.type : p.name, this.signal = 1, this.inputs = [], this.outputs = [], this.parameters = [], b = this.libraryEntry = y ? y.study : f.Studies.studyLibrary[p.name], typeof b.inputs == m && (b.inputs = f.clone(f.Studies.DEFAULT_INPUTS)), typeof b.outputs > "u" && (b.outputs = f.clone(f.Studies.DEFAULT_OUTPUTS));
    function ee(Te, Pe) {
      this.attributes[Te] || (this.attributes[Te] = {}), e.Z8b(), Pe && (this.attributes[Te].hidden = !0);
    }
    C = y && x.panels[y.panel] ? x.panels[y.panel] : x.chart.panel, k = C.chart, this.title = x.translateIf(b.name), this.attributes = f.clone(b.attributes), this.attributes || (this.attributes = {});
    for (var re in this.attributes) {
      M = this.attributes[re];
      for (var de in M) typeof M[de] == "function" && (M[de] = M[de].call(y));
    }
    I = [], v = x.layout.studies, S = [], y && (S = Array.prototype.concat(y, y.getDependents(x)));
    for (var he in v) if (!(S.indexOf(v[he]) > -1)) for (var fe in v[he].outputMap) I.push(fe);
    for (var pe in b.inputs) if (w = {}, this.inputs.push(w), w.name = pe, w.heading = x.translateIf(pe), T = b.inputs[pe], y && y.inputs && typeof y.inputs[pe] < "u" && y.inputs[pe] !== null ? w.value = y.inputs[pe] : w.value = b.inputs[pe], w.defaultInput = b.inputs[pe], this.attributes[pe] || (this.attributes[pe] = f.Studies.inputAttributeDefaultGenerator(w.defaultInput)), T.constructor == Number) w.type = "number";else if (T.constructor == String) {
      if (D = f.Studies.movingAverageHelper(x, w.defaultInput), D) w.type = "select", w.defaultInput = D, F = f.Studies.movingAverageHelper(x, w.value), F || (F = w.value), w.value = F, w.options = f.Studies.movingAverageHelper(x, "options");else if (T == "field") {
        P = "fie", P += "ld", _ = "oh", _ += "lc", _ += "/4", V = "hl", V += "c", V += "/3", A = "hl/", A += "2", w.type = "select", w.options = {}, E = ["Open", "High", "Low", "Close", "Adj_Close", A, V, "hlcc/4", _, k.defaultPlotField].concat(I);
        for (var ge = 0; ge < E.length; ge++) L = E[ge], w.options[L] = x.translateIf(L);
        w.value == P && (w.value = "Close"), w.defaultInput == "field" && (w.defaultInput = "Close");
      } else N = "yyyy-mm-", N += "dd", w.type = "text", this.attributes[pe].placeholder == N ? w.type = "date" : this.attributes[pe].placeholder == "hh:mm:ss" && (w.type = "time");
    } else if (T.constructor == Boolean) w.type = "checkbox", (w.value === !0 || w.value == "true" || w.value == "on") && (w.value = !0);else if (T.constructor == Array) {
      U = "sel", U += "ec", U += "t", w.type = U, w.options = {};
      for (var ve = 0; ve < T.length; ve++) w.options[T[ve]] = x.translateIf(T[ve]);
      w.value.constructor == Array && (w.value = w.value[0]), this.attributes[pe].defaultSelected ? w.defaultInput = this.attributes[pe].defaultSelected : w.defaultInput = T[0];
    }
    this.dateTimeInputs = [];
    for (var be = 0; be < this.inputs.length; be++) if (B = this.inputs[be], B.type == "date") {
      O = B.name.substring(0, B.name.indexOf(" Date"));
      for (var _e = 0; _e < this.inputs.length; _e++) if (R = this.inputs[_e], R.type == "time" && R.name == O + " Time") {
        this.dateTimeInputs.push(O);
        break;
      }
    }
    e.Z8b(), this.adjustInputTimesForDisplayZone();
    for (pe in b.outputs) H = "a", H += "u", H += "t", H += "o", z = {
      name: pe,
      heading: x.translateIf(pe)
    }, z.color = z.defaultOutput = b.outputs[pe], y && y.outputs && y.outputs[pe] && (z.color = y.outputs[pe]), z.color == H && (z.color = x.defaultColor), this.outputs.push(z);
    W = y ? y.parameters : null, b.parameters && (G = b.parameters.init, G && (G.studyOverZonesEnabled !== void 0 && (X = "stu", X += "dyOve", X += "r", X += "Zones", Z = {
      name: X,
      heading: x.translateIf("Show Zones"),
      defaultValue: G.studyOverZonesEnabled,
      value: G.studyOverZonesEnabled
    }, W && (W.studyOverZonesEnabled || W.studyOverZonesEnabled === !1) && (Z.value = W.studyOverZonesEnabled), Z.type = "checkbox", this.parameters.push(Z)), G.studyOverBoughtValue !== void 0 && (ie = "t", ie += "e", ie += "x", ie += "t", j = "s", j += "tud", j += "yOverB", j += "ought", Z = {
      name: j,
      heading: x.translateIf("OverBought"),
      defaultValue: G.studyOverBoughtValue,
      value: G.studyOverBoughtValue,
      defaultColor: G.studyOverBoughtColor,
      color: G.studyOverBoughtColor
    }, W && W.studyOverBoughtValue && (Z.value = W.studyOverBoughtValue), W && W.studyOverBoughtColor && (Z.color = W.studyOverBoughtColor), Z.color == "auto" && (Z.color = x.defaultColor), Z.type = ie, this.parameters.push(Z)), G.studyOverSoldValue !== void 0 && (Z = {
      name: "studyOverSold",
      heading: x.translateIf("OverSold"),
      defaultValue: G.studyOverSoldValue,
      value: G.studyOverSoldValue,
      defaultColor: G.studyOverSoldColor,
      color: G.studyOverSoldColor
    }, W && W.studyOverSoldValue && (Z.value = W.studyOverSoldValue), W && W.studyOverSoldColor && (Z.color = W.studyOverSoldColor), Z.color == "auto" && (Z.color = x.defaultColor), Z.type = "text", this.parameters.push(Z)), this.attributes.studyOverBoughtValue || (this.attributes.studyOverBoughtValue = {}), this.attributes.studyOverSoldValue || (this.attributes.studyOverSoldValue = {}))), J = this.panelSelect = p.panelSelect, ae = this.axisSelect = p.axisSelect;
    function ye(Te) {
      var Pe, Le, Be;
      Pe = {}, Le = Te.defaults, e.L1$(), Be = {
        name: Te.name,
        heading: x.translateIf(Te.label),
        defaultValue: Le[0],
        value: Te.value,
        options: Pe,
        type: "select"
      };
      for (var Ue = 0; Ue < Le.length; Ue++) Pe[Le[Ue]] = x.translateIf(Le[Ue]);
      return Te.color !== void 0 && (Be.defaultColor = x.defaultColor, Be.color = Te.color), Be;
    }
    p.addWhenDone && (ae = J = !1), (ae || J) && (se = "p", se += "anelName", ne = "flipp", ne += "edE", ne += "nabl", ne += "ed", y || (y = f.Studies.addStudy(x, p.name, null, null, {
      calculateOnly: !0
    }), f.Studies.removeStudy(x, y)), J && (le = "pane", le += "l", le += "N", le += "ame", ue = "Pan", ue += "el", this.parameters.push(ye({
      label: ue,
      name: le,
      defaults: function () {
        var Te, Pe, Le;
        Te = "New ", Te += "pa", Te += "ne", Te += "l", Pe = "A", Pe += "u", Pe += "to", e.Z8b(), Le = [], Le.push(Pe);
        for (var Be in x.panels) (Be != y.panel || !W || !W.panelName) && Le.push(we(Be));
        return x.checkForEmptyPanel(y.panel, !0, y) || Le.push(Te), Le;
      }(),
      value: W && W.panelName ? we(W.panelName) : "Auto"
    }), Q({
      label: "Show as Underlay",
      name: "underlay",
      defaults: !1,
      value: y.underlay || y.parameters && y.parameters.underlayEnabled
    }))), oe = x.getYAxisByName(C, y.name), ae && (ce = "d", ce += "efa", ce += "ult", this.parameters.push(ye({
      label: "Y-Axis",
      name: "yaxisDisplay",
      defaults: function () {
        e.L1$();
        var Te, Pe, Le, Be;
        Te = "sha", Te += "r", Te += "e", Te += "d", Pe = "ri", Pe += "ght", Le = C.yaxisLHS.concat(C.yaxisRHS), Be = [], Be.push("default", Pe, "left", "none", Te);
        for (var Ue = 0; Ue < Le.length; Ue++) Le[Ue] != oe && Be.push(Le[Ue].name);
        return Be;
      }(),
      value: W && W.yaxisDisplayValue || oe && oe.position || (y.panel != y.name ? "shared" : C.yAxis.position || ce),
      color: oe && oe.textStyle ? oe.textStyle : "auto"
    }), Q({
      label: "Invert Y-Axis",
      name: "flipped",
      defaults: !1,
      value: W ? W.flippedEnabled : oe ? oe.flipped : !1
    }))), ee.call(this, ne, !oe && y.panel != y.name), ee.call(this, "underlayEnabled", b.underlay), ee.call(this, se, b.seriesFN === null), ee.call(this, "yaxisDisplayValue", b.seriesFN === null || b.yAxis && b.yAxis.noDraw));
    function we(Te) {
      var Pe, Le;
      Pe = "a";
      function Be(Ke, Je) {
        return e.Z8b(), "Panel " + Je.toString();
      }
      if (Pe += "li", Pe += "as", J == Pe) {
        Le = 1;
        for (var Ue in x.panels) {
          if (Ue == Te) return Be(Ue, Le);
          Le++;
        }
      }
      return Te;
    }
  }, f.Studies.DialogHelper.prototype.updateStudy = function (p) {
    var m, x, y, b, C, k, M;
    m = {}, x = this.sd, y = this.libraryEntry, y || (y = {}), e.L1$(), x || (x = y), m.inputs = f.clone(x.inputs);
    function I(w) {
      var T;
      if (this.panelSelect == "alias" && (T = F(w), T)) {
        for (var D in this.stx.panels) if (! --T) return D;
      }
      function F(P) {
        var _;
        return _ = P.match(/.* (\d)/), _ && _[1];
      }
      return w;
    }
    if (m.outputs = f.clone(x.outputs), m.parameters = f.clone(x.parameters), this.adjustInputTimesForDisplayZone(p), p.parameters && p.parameters.panelName) {
      b = -25704933, C = 470363144, k = 2;
      for (var v = 1; e.o0(v.toString(), v.toString().length, 85323) !== b; v++) p.parameters.panelName = I.call(this, p.parameters.panelName), k += 2;
      e.Q_(k.toString(), k.toString().length, 25947) !== C && (p.parameters.panelName = I.call(this, p.parameters.panelName));
    }
    f.extend(m, p), m.parameters || (m.parameters = {}), m.inputs && m.inputs.id ? x = f.Studies.replaceStudy(this.stx, m.inputs.id, this.name, m.inputs, m.outputs, m.parameters, null, x.study) : x = f.Studies.addStudy(this.stx, this.name, m.inputs, m.outputs, m.parameters, null, x.study), M = new f.Studies.DialogHelper({
      stx: this.stx,
      sd: x,
      axisSelect: this.axisSelect,
      panelSelect: this.panelSelect
    });
    for (var S in M) S != "signal" && (this[S] = M[S]);
    this.signal *= -1;
  }, f.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone = function (p) {
    var m, x, y, b, C, k, M, I, v;
    if (this.stx.displayZone) for (var S = 0; S < this.dateTimeInputs.length; S++) {
      for (m = this.dateTimeInputs[S], k = "", p && p.inputs && (M = " D", M += "ate", e.n1T(0), y = p.inputs[e.W6G(M, m)], e.E3R(0), b = p.inputs[e.B3B(" Time", m)], y && (k = y), b && (k += b)), x = 0; x < this.inputs.length; x++) C = this.inputs[x], !y && y !== "" && C.name == m + " Date" ? k = C.value + k : !b && b !== "" && C.name == m + " Time" && (k += C.value);
      if (k = k.replace(/\D/g, ""), k.length < 12) return;
      if (I = f.strToDateTime(k), !isNaN(I.valueOf())) if (p) p.inputs || (p.inputs = {}), v = f.convertTimeZone(I, this.stx.displayZone), e.n1T(0), p.inputs[e.B3B(" Date", m)] = f.yyyymmdd(v), e.n1T(0), p.inputs[e.B3B(" Time", m)] = f.hhmmss(v);else for (v = f.convertTimeZone(I, null, this.stx.displayZone), x = 0; x < this.inputs.length; x++) C = this.inputs[x], C.name == m + " Date" && (C.value = f.yyyymmdd(v)), C.name == m + " Time" && (C.value = f.hhmmss(v));
    }
  }, f.Studies.prepareStudy = function (p, m, x) {
    var y;
    if (y = "und", y += "efin", y += "ed", typeof m.calculateFN == y && (m.useRawValues = !0), f.isEmpty(x.outputMap)) for (var b in x.outputs) m.useRawValues ? x.outputMap[b] = b : (e.n1T(0), e.W6G(6, 2498), e.n1T(30), e.W6G(41, 41, 31, 1), e.E3R(109), e.B3B(93875, 2, 2, 99378, 14), e.E3R(13), e.B3B(10, 6, 2384), x.outputMap[b + " " + x.name] = b);
  }, f.Studies.rejiggerDerivedStudies = function (p, m, x) {
    var y, b, C, k, M, I, v;
    y = m.name, m.panel, b = m.getDependents(p);
    for (var S = 0; S < b.length; S++) if (C = b[S], k = f.clone(C.inputs), M = k.id, !!M) {
      I = f.Studies.getFieldInputs(C);
      for (var w = 0; w < I.length; w++) k[I[w]] = k[I[w]].replace(y, x);
      v = f.Studies.replaceStudy(p, M, C.type, k, C.outputs, f.extend(C.parameters, {
        rejiggering: !0
      }), null, C.study), delete v.parameters.rejiggering;
    }
  }, f.Studies.removeStudySymbols = function (p, m) {
    if (e.L1$(), p.series) for (var x in p.series) m.deleteSeries(p.series[x], null, {
      action: "remove-study"
    });
  }, f.Studies.replaceStudy = function (p, m, x, y, b, C, k, M) {
    var I, v, S, w;
    C || (C = {}), m && (C.replaceID = m), m = C.replaceID, I = p.layout.studies[m], f.Studies.removeStudySymbols(I, p), I.attribution && p.removeFromHolder(I.attribution.marker), p.quoteDriver && p.quoteDriver.updateSubscriptions(), y && (y.id == y.display && delete y.display, delete y.id), v = f.Studies.addStudy(p, x, y, b, C, k, M), v.highlight = I.highlight, v.uniqueId = I.uniqueId, w = {};
    for (S in p.layout.studies) S == m ? w[v.name] = v : w[S] = p.layout.studies[S];
    p.layout.studies = w, w = {};
    for (S in p.overlays) S == m ? (v.overlay || v.underlay) && (w[v.name] = v) : w[S] = p.overlays[S];
    return p.overlays = w, !p.overlays[v.name] && (v.overlay || v.underlay) && p.addOverlay(v), p.checkForEmptyPanel(I.panel), C.rejiggering || (p.initializeDisplay(p.chart), f.Studies.rejiggerDerivedStudies(p, I, v.inputs.id, v.panel), p.changeOccurred("layout"), !p.currentlyImporting && !C.calculateOnly && v.chart.dataSet && p.createDataSet(null, v.chart), p.draw()), e.L1$(), f.transferObject(I, v), p.layout.studies[v.name] = I, p.overlays[v.name] = I, p.chart.state.studies.sorted = null, I;
  }, f.Studies.addStudy = function (p, m, x, y, b, C, k) {
    var M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z;
    if (M = k || f.Studies.studyLibrary[m], b || (b = {}), M) {
      if (M.inputs) {
        I = f.clone(M.inputs);
        for (var W in I) I[W] instanceof Array && (M.attributes && M.attributes[W] && M.attributes[W].defaultSelected ? I[W] = M.attributes[W].defaultSelected : I[W] = I[W][0]);
        x = f.extend(I, x);
      }
      M.outputs && (y = f.extend(f.clone(M.outputs), y)), v = M.parameters, v && v.init && (b = f.extend(f.clone(v.init), b)), v && !b.display && (b.display = v.display);
    }
    if (x || (x = f.clone(f.Studies.DEFAULT_INPUTS)), y || (y = f.clone(f.Studies.DEFAULT_OUTPUTS)), b.chartName || (b.chartName = "chart"), (b.panelName == "Auto" || b.panelName == "Default panel") && (b.panelName = ""), x.Period < 1 && (x.Period = 1), S = null, p.layout.studies || (p.layout.studies = {}), M && M.initializeFN ? S = M.initializeFN(p, m, x, y, b, C, k) : S = f.Studies.initializeFN(p, m, x, y, b, C, k), !S) {
      e.E3R(0), console.log(e.W6G(m, "CIQ.Studies.addStudy: initializeFN() returned null for "));
      return;
    }
    if (k = S.study, S.chart = p.charts[b.chartName], S.type = m, S.permanent = k.permanent, S.customLegend = k.customLegend, S.uniqueId = f.uniqueID(), f.Studies.prepareStudy(p, k, S), w = p.chart.state.studies, w || (w = p.chart.state.studies = {}), w.sorted = null, b.replaceID ? (T = !0, delete b.replaceID) : (p.layout.studies[S.inputs.id] = S, (S.overlay || S.underlay) && p.addOverlay(S), !p.currentlyImporting && !b.calculateOnly && S.chart.dataSet && p.createDataSet(null, S.chart)), p.quoteDriver && p.quoteDriver.updateSubscriptions(), b.calculateOnly) return D = "lay", D += "out", p.changeOccurred(D), S;
    if (F = p.panels[S.panel], P = !1, _ = !(S.overlay || S.underlay), _ && k.horizontalCrosshairFieldFN && (F.horizontalCrosshairField = k.horizontalCrosshairFieldFN(p, S)), p.editCallback) P = !0;else if (_) {
      V = -124964779, A = -961034134, E = 2;
      for (var G = 1; e.o0(G.toString(), G.toString().length, 4398) !== V; G++) p.callbackListeners.studyPanelEdit && p.callbackListeners.studyPanelEdit.length && (P = !0), E += 2;
      e.o0(E.toString(), E.toString().length, 55832) !== A && (p.callbackListeners.studyPanelEdit || p.callbackListeners.studyPanelEdit.length) && (P = !1);
    } else p.callbackListeners.studyOverlayEdit && p.callbackListeners.studyOverlayEdit.length && (P = !0);
    if (P) {
      b.editMode = !0, L = !1;
      for (var Z in S.inputs) if (N = "dis", N += "p", N += "l", N += "ay", Z != "id" && Z != N) {
        L = !0;
        break;
      }
      if (!L) for (var X in S.outputs) {
        L = !0;
        break;
      }
      if (L) {
        if (U = "u", U += "ndef", U += "i", U += "ned", typeof S.study.edit != U) S.study.edit && (B = function (j, J, ae, se) {
          return e.Z8b(), function () {
            f.clearCanvas(j.chart.tempCanvas, j), e.L1$(), J.study.edit(J, {
              stx: j,
              inputs: ae,
              outputs: se,
              parameters: b
            });
          };
        }(p, S, x, y), p.setPanelEdit(F, B), S.editFunction = B);else if (!_) B = function (j, J, ae, se, ne) {
          return e.L1$(), function (le) {
            f.clearCanvas(j.chart.tempCanvas, j), j.dispatch("studyOverlayEdit", {
              stx: j,
              sd: J,
              inputs: ae,
              outputs: se,
              parameters: ne,
              forceEdit: le
            });
          };
        }(p, S, x, y, b), S.editFunction = B;else if (p.editCallback) O = "ch", O += "a", O += "r", O += "t", B = function (j, J, ae, se) {
          return function () {
            var ne;
            e.Z8b(), ne = j.editCallback(j, J), f.clearCanvas(j.chart.tempCanvas, j), f.Studies.studyDialog(j, m, ne, {
              inputs: ae,
              outputs: se,
              parameters: b
            });
          };
        }(p, S, x, y), F.name != O && p.setPanelEdit(F, B);else if (B = function (j, J, ae, se, ne) {
          return function () {
            e.L1$(), f.clearCanvas(j.chart.tempCanvas, j), j.dispatch("studyPanelEdit", {
              stx: j,
              sd: J,
              inputs: ae,
              outputs: se,
              parameters: ne
            });
          };
        }(p, S, x, y, b), F.name != "chart") {
          p.setPanelEdit(F, B), e.n1T(21), R = e.W6G("455373141", 64), H = 407877541, z = 2;
          for (var ie = 1; e.o0(ie.toString(), ie.toString().length, 87943) !== R; ie++) S.editFunction = B, z += 2;
          e.Q_(z.toString(), z.toString().length, 41380) !== H && (S.editFunction = B);
        }
      }
    }
    return p.changeOccurred("layout"), T || p.draw(), S;
  }, f.Studies.removeStudy = function (p, m) {
    var x, y, b, C;
    x = p.panels[m.panel], y = x && x.yAxis.name, (m.overlay || m.underlay) && p.removeOverlay(m.name), b = p.panels[m.panel], m.attribution && p.removeFromHolder(m.attribution.marker), delete p.layout.studies[m.name], b && !p.checkForEmptyPanel(b) && (y == m.name && p.electNewPanelOwner(b), C = p.getYAxisByName(m.panel, m.name), C && (C.name = C.studies[1] || C.renderers[0])), p.draw(), p.resizeChart();
  }, f.Studies.getPanelFromFieldName = function (p, m) {
    var x, y, b, C, k;
    if (x = f.Studies.getFieldInputs(m), !x.length || (y = p.layout.studies, !y)) return null;
    b = {};
    for (var M in y) for (var I in y[M].outputMap) b[I] = y[M].panel;
    for (var v = 0; v < x.length; v++) if (C = m.inputs[x[v]], C && (k = b[C], k)) return k;
    return null;
  }, f.Studies.createLibraryHash = function () {
    return Object.keys(f.Studies.studyLibrary).join("|");
  }, f.Studies.displayStudies = function (p, m, x) {
    e.L1$();
    var y, b, C, k, M, I, v, S, w, T, D, F, P, _;
    if (x && (m.studyLibraryHash = f.Studies.createLibraryHash()), y = p.layout.studies, !!y) {
      b = {}, b[m.name] = !0;
      for (var V in y) if (C = y[V], k = C.study, !!k && (M = C.underlay || C.parameters && C.parameters.underlayEnabled, !(x && !M || !x && M))) {
        if (I = f.clone(k.renderer), I && !(I instanceof Array) && (I = [I]), v = p.panels[C.panel], v) {
          if (v.chart != m || v.hidden) continue;
          b[v.name] || (S = C.permanent || !p.manageTouchAndMouse, v.closeX ? S && (v.closeX.style.display = "none") : v.close && S && (v.close.style.display = "none"), v.edit && S && (v.edit.style.display = "none"), b[v.name] = S);
        } else {
          p.currentlyImporting && delete y[V];
          continue;
        }
        if (w = C.chart.dataSegment, C.panel == C.parameters.chartName && (!C.parameters || !C.parameters.panelName) && (T = f.Studies.getPanelFromFieldName(p, C), T && C.panel != T && (C.panel = T)), typeof k.seriesFN > "u") {
          if (I) {
            C.overlay || f.Studies.createYAxis(p, C, w, v);
            for (var A = 0; A < I.length; A++) {
              D = I[A];
              for (var E in C.outputMap) C.outputMap[E] == D.field && (D.field = E);
              if (D.field) {
                if (D.panel = C.panel, F = D.binding, F) for (var L in F) P = f.Studies.determineColor(C.outputs[F[L]]), P && P != "auto" && (D[L] = P);
                D.yAxis = null, _ = f.Renderer.produce(D.type, D), _.stx = p, _.attachSeries(null, D).draw();
              }
            }
          } else f.Studies.displaySeriesAsLine(p, C, w);
          v && f.Studies.displayError(p, C);
        } else k.seriesFN && v && (k.seriesFN(p, C, w), f.Studies.displayError(p, C));
      }
    }
  }, f.Studies.displayError = function (p, m, x) {
    var y, b;
    if (m.error) {
      if (y = x && x.panel ? x.panel : m.panel, b = m.error === !0 ? p.translateIf("Not enough data to compute ") + p.translateIf(m.study.name) : p.translateIf(m.error), x && (x.h !== "center" || x.v !== "bottom")) {
        p.watermark(y, x);
        return;
      }
      p.displayErrorAsWatermark(y, b);
    }
  }, f.Studies.calculateMinMaxForDataPoint = function (p, m, x) {
    var y, b, C;
    y = Number.MAX_VALUE, e.n1T(110);
    var k = e.B3B(3, 7, 14, 17, 19);
    b = Number.MAX_VALUE * k;
    for (var M = 0; M < x.length; M++) C = x[M][m], !(C === null || typeof C > "u") && (isNaN(C) || (y = Math.min(C, y), b = Math.max(C, b)));
    return e.L1$(), {
      min: y,
      max: b
    };
  }, f.Studies.getYAxisParameters = function (p, m) {
    var x, y, b, C, k, M, I, v;
    x = {}, y = p.layout.studies && p.layout.studies[m.name], y && (b = y.study, b.yaxis || b.yAxisFN ? x.noDraw = !0 : (b.parameters && b.parameters.excludeYAxis && (x.noDraw = !0), x.ground = b.yAxis && b.yAxis.ground, m && (C = "b", C += "ypa", C += "ss", b.range != C && (b.range == "0 to 100" ? x.range = [0, 100] : b.range == "-1 to 1" ? (e.E3R(29), x.range = [-e.W6G(64, "1"), 1]) : (k = "0 t", k += "o max", b.range == k ? x.range = [0, Math.max(0, m.high)] : (b.centerline || b.centerline === 0) && (x.range = [Math.min(b.centerline, m.low), Math.max(b.centerline, m.high)]))), x.range && (m.low = x.range[0], m.high = x.range[1]), y.min && (m.min = y.min), y.max && (m.max = y.max), y.parameters && y.parameters.studyOverZonesEnabled && (x.noDraw = !0)))), M = 281996196, I = 1076603234, e.E3R(37), v = e.B3B(0, "2");
    for (var S = 1; e.Q_(S.toString(), S.toString().length, 81679) !== M; S++) return x;
    if (e.Q_(v.toString(), v.toString().length, 46749) !== I) return x;
  }, f.Studies.doPostDrawYAxis = function (p, m) {
    var x, y, b, C, k;
    for (var M in p.layout.studies) x = p.layout.studies[M], y = p.panels[x.panel], !(!y || y.hidden) && (b = x.getYAxis(p), b == m && (C = x.study, m.name == x.name && (C.yaxis && C.yaxis(p, x), C.yAxisFN && C.yAxisFN(p, x)), f.Studies.drawZones(p, x), x.error || (k = C.centerline, (k || k === 0 || k !== null && m.highValue > 0 && m.lowValue < 0) && f.Studies.drawHorizontal(p, x, null, k || 0, m))));
  }, f.Studies.displaySeriesAsLine = function (p, m, x) {
    e.L1$();
    var y;
    if (x.length && (y = p.panels[m.panel], !(!y || y.hidden))) for (var b in m.outputMap) f.Studies.displayIndividualSeriesAsLine(p, m, y, b, x);
  }, f.Studies.displaySeriesAsHistogram = function (p, m, x) {
    var y, b, C, k, M, I, v, S, w, T, D, F;
    if (y = "overl", y += "aid", !!x.length && (b = p.panels[m.panel], !!b && !b.hidden)) {
      C = [];
      for (var P in m.outputMap) k = m.outputs[m.outputMap[P]], k && (M = 0.3, typeof k == "object" && (M = k.opacity, k = k.color), I = {
        field: P,
        fill_color_up: k,
        border_color_up: k,
        fill_color_down: k,
        border_color_down: k
      }, m.underlay && (I.opacity_up = I.opacity_down = M || 0.3), C.push(I));
      v = m.getYAxis(p), S = m.inputs, w = S.WidthFactor, m.study && m.study.parameters && (T = "u", T += "ndefi", T += "ned", D = m.study.parameters, typeof D.widthFactor !== T && (w = D.widthFactor)), F = {
        name: m.name,
        type: S.HistogramType ? S.HistogramType : y,
        panel: m.panel,
        yAxis: v,
        widthFactor: w || 0.5,
        bindToYAxis: !0,
        highlight: m.highlight
      }, e.Z8b(), p.drawHistogram(F, C);
    }
  }, f.Studies.displayIndividualSeriesAsLine = function (p, m, x, y, b) {
    var C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L;
    if (C = "au", C += "t", C += "o", x.height || (x.height = x.bottom - x.top), k = m.getContext(p), M = m.outputs[m.outputMap[y]], !!M) {
      if (k.save(), typeof M == "string" && (M = {
        color: M,
        width: 1
      }), k.lineWidth = M.width || 1, I = M.color, I == C && (I = p.defaultColor), k.strokeStyle = I, v = M.pattern, k.setLineDash(f.borderPatternToArray(k.lineWidth, v)), k.lineDashOffset = 0, S = 0, w = m.study, T = m.getYAxis(p), S = p.decimalPlacesFromPriceTick(T.priceTick), (m.overlay || m.underlay) && (S = null), (T.decimalPlaces || T.decimalPlaces === 0) && (S = T.decimalPlaces), D = null, m.parameters && (D = m.parameters.label), e.L1$(), F = w.parameters, F || (F = {}), P = F.plotType == "step", m.series) for (var N in m.series) _ = m.series[N].parameters.type, _ && (e.E3R(69), P = e.W6G("step", _));
      F.noLabels && (D = !1), !m.noSlopes && m.noSlopes !== !1 && (m.noSlopes = F.noSlopes), !m.extendToEnd && m.extendToEnd !== !1 && (m.extendToEnd = F.extendToEnd), V = D || p.preferences.labels && D !== !1, A = m.gaplines, A === !1 && (A = "transparent"), E = m.inputs.Symbol, L = A ? p.getGapColorFunction(E, y, M, A) : null, p.plotDataSegmentAsLine(y, x, {
        yAxis: T,
        skipTransform: p.panels[m.panel].name != m.chart.name,
        label: V,
        labelDecimalPlaces: S,
        noSlopes: m.noSlopes,
        step: P,
        alignStepToSide: m.alignStepToSide,
        extendToEndOfLastBar: m.extendToEndOfLastBar,
        width: m.lineWidth,
        extendToEndOfDataSet: m.extendToEnd,
        gapDisplayStyle: A,
        highlight: m.highlight
      }, L), w.appendDisplaySeriesAsLine && w.appendDisplaySeriesAsLine(p, m, b, y, x), k.restore();
    }
  }, f.Studies.drawHorizontal = function (p, m, x, y, b, C) {
    var k, M, I;
    k = p.panels[m.panel], M = p.getBackgroundCanvas().context, k && (e.Z8b(), C || (C = b.textStyle), I = p.pixelFromPrice(y, k, b), I > b.top && I < b.bottom && p.plotLine(k.left, k.right, I, I, C, "segment", M, !1, {
      opacity: C && C.opacity ? C.opacity : 0.5
    }));
  }, f.Studies.displayHistogramWithSeries = function (p, m, x) {
    var y;
    p.panels[m.panel], e.L1$(), y = 0.5, m.underlay && (y = 0.3), f.Studies.createHistogram(p, m, x, !1, y), f.Studies.displaySeriesAsLine(p, m, x);
  }, f.Studies.drawZones = function (p, m, x) {
    var y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W;
    if (y = "s", y += "tr", y += "oke", !(!m.parameters || !m.parameters.studyOverZonesEnabled)) {
      b = parseFloat(m.parameters.studyOverSoldValue), C = parseFloat(m.parameters.studyOverBoughtValue), k = m.parameters.studyOverSoldColor, M = m.parameters.studyOverBoughtColor, I = m.zoneOutput, I || (I = "Result"), v = f.Studies.determineColor(m.outputs[I]), (!v || v == "auto" || f.isTransparent(v)) && (v = p.defaultColor), k || (k = v), (!k || k == "auto" || f.isTransparent(k)) && (k = p.defaultColor), M || (M = v), (!M || M == "auto" || f.isTransparent(M)) && (M = p.defaultColor), S = p.panels[m.panel], w = m.getYAxis(p), T = w.displayBorder, p.axisBorders === !1 && (T = !1), p.axisBorders === !0 && (T = !0), w.width === 0 && (T = !1), D = p.getYAxisCurrentPosition(w, S), e.n1T(69), F = e.B3B("left", D), P = w.justifyRight, !P && P !== !1 && (p.chart.yAxis.justifyRight || p.chart.yAxis.justifyRight === !1 ? P = p.chart.yAxis.justifyRight : P = F), e.n1T(1);
      var G = e.W6G(20, 21);
      if (_ = Math.round(w.left + (F ? w.width : 0)) + "0.5" * G, V = T ? 3 : 0, A = p.getBackgroundCanvas().context, E = A.fillStyle, A.globalAlpha = 0.2, p.startClip(S.name, !0), A.beginPath(), L = Math.round(p.pixelFromPrice(C, S, w)) + 0.5, A.strokeStyle = M, A.moveTo(S.left, L), A.lineTo(S.right, L), A.stroke(), A.closePath(), A.beginPath(), N = Math.round(p.pixelFromPrice(b, S, w)) + 0.5, A.strokeStyle = k, A.moveTo(S.left, N), A.lineTo(S.right, N), A.stroke(), A.closePath(), U = new f.Plotter(), U.newSeries("border", y, p.canvasStyle("stx_grid_border")), T && (B = F ? _ - V : _ - 0.5, O = F ? _ + 0.5 : _ + V, U.moveTo("border", B, L), U.lineTo("border", O, L), U.moveTo("border", B, N), U.lineTo("border", O, N)), A.fillStyle = E, R = {
        skipTransform: p.panels[m.panel].name != m.chart.name,
        panelName: m.panel,
        band: I + " " + m.name,
        yAxis: w,
        opacity: 0.3
      }, !m.highlight && p.highlightedDraggable && (R.opacity *= 0.3), f.preparePeakValleyFill(p, f.extend(R, {
        threshold: C,
        direction: w.flipped ? -1 : 1,
        color: M
      })), f.preparePeakValleyFill(p, f.extend(R, {
        threshold: b,
        direction: w.flipped ? 1 : -1,
        color: k
      })), A.globalAlpha = 1, (!m.study || !m.study.yaxis) && (T && (H = "b", H += "o", H += "rder", z = Math.round(w.bottom) + 0.5, U.moveTo("border", _, w.top), U.lineTo(H, _, z), U.draw(A, "border")), w.width !== 0)) {
        if (p.canvasFont("stx_yaxis", A), p.canvasColor("stx_yaxis", A), A.textAlign = P ? "right" : "left", F) {
          e.E3R(111);
          var Z = e.B3B(2, 2, 9, 3);
          W = w.left + Z, P && (W = w.left + w.width - V - 3);
        } else {
          e.E3R(112);
          var X = e.W6G(12, 7, 7, 7, 22);
          W = w.left + V + X, P && (W = w.left + w.width);
        }
        A.fillStyle = M, A.fillText(C, W, L), A.fillStyle = k, A.fillText(b, W, N), A.fillStyle = E;
      }
      p.endClip(), A.globalAlpha = 1, w.name == m.name && (w.yAxisPlotter = new f.Plotter());
    }
  }, f.Studies.createHistogram = function (p, m, x, y, b) {
    var C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G;
    C = p.panels[m.panel], k = m.getContext(p), M = m.getYAxis(p), p.startClip(C.name), I = p.layout.candleWidth - 2, I < 2 && (I = 1), v = p.pixelFromPrice(0, C, M), M.min > 0 && (v = p.pixelFromPrice(M.min, C, M)), y && (v = Math.floor(C.top + C.height / 2)), S = m.name + "_hist", p.canvasColor("stx_histogram"), w = k.fillStyle, (b || b === 0) && (k.globalAlpha = b), !m.highlight && p.highlightedDraggable && (k.globalAlpha *= 0.3), T = null, D = null, F = 2010765569, P = -1805973782, _ = 2;
    for (var Z = 1; e.Q_(Z.toString(), Z.toString().length, 41082) !== F; Z++) V = m.outputs, _ += 2;
    e.o0(_.toString(), _.toString().length, 320) !== P && (V = m.outputs);
    for (var X = 0; X < x.length; X++) if (A = "Negat", A += "ive B", A += "ar", E = "I", E += "ncre", E += "asing Bar", L = "Decreasin", L += "g Bar", N = x[X], !!N) {
      if (N.candleWidth && (I = Math.floor(Math.max(1, N.candleWidth - 2))), U = Math.floor(p.pixelFromBar(X, C.chart) - I / 2), B = Math.floor(I), T === null) {
        e.n1T(113);
        var ie = e.B3B(12, 4, 2, 25);
        O = p.tickFromPixel(U, C.chart) - ie, O < 0 ? T = D : T = p.pixelFromPrice(p.chart.dataSet[O][S], C, M) - v;
      } else T = D;
      D = p.pixelFromPrice(N[S], C, M) - v, R = f.Studies.determineColor(V[L]), H = f.Studies.determineColor(V[E]), z = f.Studies.determineColor(V["Positive Bar"]), W = f.Studies.determineColor(V[A]), G = M.flipped, k.fillStyle = w, R && (G ? D < T : D > T) ? k.fillStyle = R : H && (G ? D > T : D < T) ? k.fillStyle = H : z && (G ? D > 0 : D < 0) ? k.fillStyle = z : W && (G ? D < 0 : D > 0) && (k.fillStyle = W), k.fillRect(U, v, B, Math.floor(D));
    }
    k.globalAlpha = 1, p.endClip();
  }, f.Studies.prettify = {
    Close: "C",
    Open: "O",
    High: "H",
    Low: "L",
    simple: "ma",
    exponential: "ema",
    triangular: "tma",
    VIDYA: "vdma",
    weighted: d,
    "welles wilder": c,
    true: "y",
    false: "n"
  }, f.Studies.prettyRE = /^.*\((.*?)\).*$/, f.Studies.prettyDisplay = function (p) {
    var m, x;
    if (m = f.Studies.prettyRE.exec(p), !m) return p;
    if (x = m[1], x) {
      for (var y in f.Studies.prettify) x = x.replace(y, f.Studies.prettify[y]);
      p = p.replace(m[1], x);
    }
    return e.L1$(), p;
  }, f.Studies.getFieldInputs = function (p) {
    var m, x;
    m = [], x = p.study.inputs, e.L1$();
    for (var y in x) x[y] == "field" && m.push(y);
    return m;
  }, f.Studies.initializeFN = function (p, m, x, y, b, C, k) {
    var M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H;
    if (x || (x = {}), b || (b = {}), x.id || (x.id = f.Studies.generateID(p, m, x, b.replaceID, b.display)), x.display || (x.display = x.id), M = new f.Studies.StudyDescriptor(x.id, m, x.id, x, y, b), x.Period && (M.days = Math.max(1, parseInt(M.inputs.Period, 10))), k ? (k.inputs || (k.inputs = M.study.inputs), k.outputs || (k.outputs = M.study.outputs), M.study = k) : k = M.study, k.display && (x.display = k.display), typeof b.panelName == "string" && (C = b.panelName), (C == x.id || C && !p.panelExists(C)) && (M.underlay = M.overlay = !1), (C == "Own panel" || C == "New panel") && (C = null), I = M.overlay || x.Overlay || M.overlay !== !1 && k.overlay, v = M.underlay || x.Underlay || M.underlay !== !1 && k.underlay, I && b.underlayEnabled && (v = !0), v && (M.underlay = !0), !v && p.chart.panel && C == p.chart.panel.name && (I = !0), I && (M.overlay = !0), S = p.preferences.dragging, (S === !0 || S && S.study) && (M.overlay = !0), C ? b.panelName = C : !I && !v && (C = x.id), b.calculateOnly) return (I || v) && (p.panels[b.panelName] ? M.panel = b.panelName : M.panel = f.Studies.getPanelFromFieldName(p, M) || b.chartName), M;
    if (w = {}, T = p.layout.studies[b.replaceID], T && (w = {
      outputMap: f.clone(T.outputMap),
      panel: T.panel
    }), M.panel = "", C ? (D = f.Studies.smartMovePanel(p, M.inputs, C, b.replaceID, b.panelName == "New panel"), D && (M.panel = D.name)) : (I || v) && (M.panel = f.Studies.getPanelFromFieldName(p, M) || b.chartName), M.panel || (F = k.panelHeight || null, P = k.yAxis || {}, P.name = M.inputs.id, M.panel = M.inputs.id, p.createPanel(M.inputs.display, M.panel, F, b.chartName, new f.ChartEngine.YAxis(P))), M.parameters && M.parameters.panelName && (M.parameters.panelName = M.panel), _ = p.panels[M.panel], V = f.Studies.smartCreateYAxis(p, _, M.inputs.id, b.yaxisDisplayValue, b.yAxis || k.yAxis), A = k ? f.clone(k.yAxis) : null, E = A || V, E && (E.ground && (E.initialMarginBottom = 0), (E.initialMarginTop || E.initialMarginTop === 0 || E.initialMarginBottom || E.initialMarginBottom === 0) && p.calculateYAxisMargins(E), E.name == b.replaceID && (E.name = M.inputs.id)), V) {
      e.n1T(2), L = e.W6G(1, "1717487771"), e.E3R(29), N = -e.B3B(0, "470424313"), U = 2;
      for (var z = 1; e.Q_(z.toString(), z.toString().length, 83525) !== L; z++) B = "n", B += "o", B += "ne", V.width = V.position == B ? 0 : f.ChartEngine.YAxis.prototype.width, U += 2;
      e.Q_(U.toString(), U.toString().length, 42452) !== N && (V.width = V.position !== "" ? 2 : f.ChartEngine.YAxis.prototype.width), b.yaxisDisplayValue == "shared" || b.yaxisDisplayValue == "default" ? delete b.yaxisDisplayValue : A ? f.ensureDefaults(V, A) : V.name == M.name && (!b.yaxisDisplayColor || b.yaxisDisplayColor == "auto" ? delete V.textStyle : V.textStyle = f.colorToHex(b.yaxisDisplayColor), V.justifyRight = null, V.flipped = b.flippedEnabled), V != _.yAxis ? V.displayGridLines = !1 : V != p.chart.yAxis && (V.displayGridLines = p.displayGridLinesInStudies);
    }
    if (p.calculateYAxisPositions(), T) {
      O = "ve", O += "ctor", R = !1;
      for (var W in p.drawingObjects) H = p.drawingObjects[W], w.outputMap && w.outputMap.hasOwnProperty(H.field) ? (H.field = H.field.replace(b.replaceID, M.inputs.id), M.parameters && M.parameters.panelName ? H.panelName = M.parameters.panelName : H.panelName = M.panel, R = !0) : w.panel && w.panel == H.panelName && (H.panelName = H.panelName.replace(b.replaceID, M.inputs.id), R = !0);
      R && p.changeOccurred(O);
    }
    return M;
  }, f.Studies.smartMovePanel = function (p, m, x, y, b) {
    var C, k, M, I;
    return k = m.id, y && (C = p.layout.studies[y]), C && (M = p.panels[C.panel], M && M.yAxis.name == y && ((b || x != y) && !p.checkForEmptyPanel(M.name, !0, C) ? (p.electNewPanelOwner(M), I = C.getYAxis(p), I.name == y && p.electNewYAxisOwner(I)) : (x == y || !p.panels[x]) && (k != M.name && p.modifyPanel(M, {
      name: k,
      display: m.display
    }), x = k))), p.panels[x];
  }, f.Studies.smartCreateYAxis = function (p, m, x, y, b) {
    var C, k, M, I;
    return C = p.getYAxisByName(m, x), !y && b && (y = b.position), (y == "default" || y == "shared" || y == m.yAxis.name) && (y = ""), ["left", "right", "none"].indexOf(y) > -1 ? (!C || C.isShared(p) ? (k = b || {}, f.extend(k, {
      name: x,
      position: y
    }), !C && !p.currentlyImporting && m != m.chart.panel && !m.yAxis.studies.length && !m.yAxis.renderers.length ? (C = m.yAxis, f.extend(C, k)) : (M = C == m.yAxis, C && (C.name = p.electNewYAxisOwner(C)), C = p.addYAxis(m, new f.ChartEngine.YAxis(k)), M && (m.yAxis = C))) : C.position = y, C) : y ? (I = p.getYAxisByName(m, y), I && C == m.yAxis && !C.isShared(p) && (m.yAxis = I), C && C.isShared(p) ? C.name = p.electNewYAxisOwner(C) : C !== m.yAxis && p.deleteYAxisIfUnused(m, C), I) : (C && (C.isShared(p) ? C.name = p.electNewYAxisOwner(C) : (delete C.position, C !== m.yAxis && p.deleteYAxisIfUnused(m, C))), p.resizeChart(), m.yAxis);
  }, f.Studies.calculateVolume = function (p, m) {
    var x, y, b;
    if (m.type == "vol undr") {
      if (!p || !p.chart.dataSet) return;
      x = p.layout, y = m.parameters.removeStudy, b = x.volumeUnderlay, x.volumeUnderlay = !y, b != x.volumeUnderlay && p.changeOccurred("layout"), y && f.Studies.removeStudy(p, m);
    }
    m.outputMap = {}, e.Z8b(), m.outputMap.Volume = "";
  }, f.Studies.MA = function (p, m, x, y, b, C, k, M) {
    var I;
    I = new f.Studies.StudyDescriptor(b + " " + k.name, "ma", k.panel), I.chart = k.chart, I.days = parseInt(m, 10), I.startFrom = k.startFrom, M && (I.subField = M), I.inputs = {}, p && (I.inputs.Type = p), x && (I.inputs.Field = x), y && (I.inputs.Offset = parseInt(y, 10)), f.Studies.calculateMovingAverage(C, I);
  }, f.Studies.movingAverage = {
    conversions: {
      ma: "simple",
      sma: u,
      ema: "exponential",
      tma: "triangular",
      vdma: "vidya",
      wma: l,
      smma: h
    },
    translations: {
      simple: "Simple",
      exponential: "Exponential",
      triangular: "Triangular",
      vidya: o,
      weighted: s,
      "welles wilder": "Welles Wilder"
    },
    typeMap: {
      ema: "Exponential",
      exponential: "Exponential",
      tma: "Triangular",
      triangular: "Triangular",
      vdma: "VIDYA",
      vidya: "VIDYA",
      wma: a,
      weighted: "Weighted",
      smma: "Exponential",
      "welles wilder": "Exponential"
    }
  }, f.Studies.movingAverageHelper = function (p, m) {
    var x;
    if (m == "options") {
      x = {};
      for (var y in f.Studies.movingAverage.translations) x[y] = p.translateIf(f.Studies.movingAverage.translations[y]);
      return x;
    }
    return f.Studies.movingAverage.conversions[m];
  }, f.Studies.createVolumeChart = function (p, m, x) {
    var y, b, C, k, M, I, v, S, w, T, D, F, P, _, V;
    y = "r", y += "gb(184, 44, 12)", b = "_", b += "d", b += "own", C = "c", C += "olor", k = "_u", k += "p", M = "Down ", M += "Volume", I = m.panel, m.inputs, v = m.underlay, m.overlay, S = f.Studies.determineColor(m.outputs["Up Volume"]), w = f.Studies.determineColor(m.outputs[M]), T = v ? "stx_volume_underlay" : "stx_volume", e.n1T(0), p.setStyle(e.W6G(k, T), C, S), e.E3R(0), p.setStyle(e.W6G("_down", T), "color", w), D = [{
      field: m.volumeField || "Volume",
      fill_color_up: p.canvasStyle(T + "_up").color,
      border_color_up: p.canvasStyle(T + "_up").borderLeftColor,
      opacity_up: p.canvasStyle(T + "_up").opacity,
      fill_color_down: p.canvasStyle(T + "_down").color,
      border_color_down: p.canvasStyle(T + b).borderLeftColor,
      opacity_down: p.canvasStyle(T + "_down").opacity,
      color_function: m.colorFunction
    }], F = D[0], !v && F.border_color_down === y && (P = "#", P += "00000", P += "0", F.border_color_down = "#000000", F.border_color_up = P), _ = m.getYAxis(p), V = {
      name: "Volume",
      panel: I,
      yAxis: _,
      widthFactor: 1,
      bindToYAxis: !0,
      highlight: m.highlight
    }, f.extend(V, m.study.parameters), f.extend(V, m.parameters), p.colorByCandleDirection && !m.colorFunction && (F.color_function = function (A) {
      e.Z8b();
      var E, L;
      return E = A.Open, L = A.Close, {
        fill_color: E > L ? F.fill_color_down : F.fill_color_up,
        border_color: E > L ? F.border_color_down : F.border_color_up,
        opacity: E > L ? F.opacity_down : F.opacity_up
      };
    }), p.drawHistogram(V, D);
  }, f.Studies.calculateStandardDeviation = function (p, m) {
    var x, y, b, C, k, M, I, v, S, w, T, D, F, P, _;
    if (x = m.chart.scrubbed, x.length < m.days + 1) {
      m.error = !0;
      return;
    }
    y = m.inputs.Field, (!y || y == "field") && (y = "Close"), b = m.inputs["Moving Average Type"], b || (b = m.inputs.Type), f.Studies.MA(b, m.days, y, m.inputs.Offset, "_MA", p, m), C = 0, e.E3R(19), k = e.W6G(0, "0"), M = 0, I = Number(m.inputs["Standard Deviations"]), I < 0 && (I = 2), e.L1$(), v = m.name;
    for (var V in m.outputs) e.E3R(31), v = e.B3B(v, " ", V);
    for (S = m.startFrom - 1, T = 0; S >= 0 && T < m.days; S--, T++) w = x[S][y], w && typeof w == "object" && (w = w[m.subField]), isNaN(w) && (e.E3R(37), w = e.W6G(0, "0")), C += Math.pow(w, 2), k += w;
    for (S = m.startFrom; S < x.length; S++) if (D = "_M", D += "A ", F = "ob", F += "jec", F += "t", P = x[S], w = P[y], w && typeof w == F && (w = w[m.subField]), !w && w !== 0 && (w = 0), C += Math.pow(w, 2), k += w, !(S < m.days - 1) && (S >= m.days && (_ = x[S - m.days][y], _ && typeof _ == "object" && (_ = _[m.subField]), isNaN(_) && (_ = 0), C -= Math.pow(_, 2), k -= _), M = P[D + m.name], M || M === 0)) {
      e.E3R(10);
      var A = e.B3B(6, 18, 10);
      e.n1T(1);
      var E = e.W6G(18, 20);
      P[v] = Math.sqrt((C + m.days * Math.pow(M, A) - E * M * k) / m.days) * I;
    }
  }, f.Studies.calculateMovingAverage = function (p, m) {
    var x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B;
    if (x = "simp", e.Z8b(), x += "le", y = "s", y += "m", y += "a", !!m.chart.scrubbed) {
      if (b = m.inputs.Type, (b == "ma" || b == y || !b) && (b = x), C = f.Studies.movingAverage.typeMap, b in C) return f.Studies["calculateMovingAverage" + C[b]](p, m);
      if (b !== "simple") return;
      k = m.chart.scrubbed, M = 0, I = [], v = m.name;
      for (var O in m.outputs) e.E3R(31), v = e.W6G(v, " ", O);
      for (S = m.inputs.Field, (!S || S == "field") && (S = "Close"), w = parseInt(m.inputs.Offset, 10), isNaN(w) && (w = 0), P = m.startFrom, _ = w, T = m.startFrom - 1; T >= 0; T--) if (V = "o", V += "bj", V += "e", V += "ct", D = k[T][S], D && typeof D == V && (D = D[m.subField]), !(!D && D !== 0)) {
        if (_ > 0) {
          _--, P = T;
          continue;
        }
        if (I.length == m.days - 1) break;
        M += D, I.unshift(D);
      }
      for (I.length < m.days - 1 && (I = [], P = 0), A = [], T = P; T < k.length; T++) {
        if (E = "o", E += "bjec", E += "t", L = k[T], D = L[S], D && typeof D == E && (D = D[m.subField]), N = T + w >= 0 && T + w < k.length, U = N ? k[T + w] : null, !D && D !== 0) {
          U ? U[v] = null : T + w >= k.length && (F = {}, F[v] = null, A.push(F));
          continue;
        }
        M += D, I.push(D), I.length > m.days && (M -= I.shift()), B = I.length == m.days ? M / m.days : null, U ? U[v] = B : T + w >= k.length && (F = {}, F[v] = B, A.push(F));
      }
      m.appendFutureTicks(p, A);
    }
  }, f.Studies.calculateMovingAverageExponential = function (p, m) {
    var x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U;
    x = "we", x += "lles", x += " w", x += "ilder", y = m.inputs.Type, b = m.chart.scrubbed, C = 0, k = 0, M = 0, e.E3R(1);
    var B = e.W6G(20, 22);
    e.n1T(13);
    var O = e.W6G(31, 13, 19);
    if (I = B / (m.days + O), y === x || y === "smma") {
      e.n1T(47);
      var R = e.W6G(2, 7, 7, 36);
      I = R / m.days;
    }
    v = null, S = m.name;
    for (var H in m.outputs) e.n1T(31), S = e.B3B(S, " ", H);
    for (w = m.inputs.Field, (!w || w == "field") && (w = "Close"), T = parseInt(m.inputs.Offset, 10), isNaN(T) && (T = 0), P = m.startFrom, _ = T, D = m.startFrom - 1; D >= 0; D--) if (F = b[D][S], !(!F && F !== 0)) {
      if (v === null && (v = F), M = m.days, _ <= 0) break;
      _--, P = D;
    }
    for (v === null && (v = P = 0), V = [], D = P; D < b.length; D++) A = b[D], F = A[w], F && typeof F == "object" && (F = F[m.subField]), E = D + T >= 0 && D + T < b.length, L = E ? b[D + T] : null, !F && F !== 0 ? N = null : (M == m.days - 1 ? (C += F, k = C / m.days, N = k) : M < m.days - 1 ? (C += F, e.n1T(114), k = e.B3B("1", 0, M, C), N = null) : M === 0 ? (C += F, k = C, N = null) : (v || v === 0) && (e.n1T(47), k = e.W6G(F, v, I, v), N = k), v = k, M++), L ? L[S] = N : D + T >= b.length && (U = {}, U[S] = N, V.push(U));
    m.appendFutureTicks(p, V);
  }, f.Studies.calculateMovingAverageVIDYA = function (p, m) {
    var x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N;
    m.inputs.Type, x = m.chart.scrubbed, e.E3R(13);
    var U = e.B3B(9, 10, 0);
    y = 2 / (m.days + U), b = null, C = m.name;
    for (var B in m.outputs) e.n1T(31), C = e.B3B(C, " ", B);
    for (k = m.inputs.Field, (!k || k == "field") && (k = "Close"), e.L1$(), m.std = new f.Studies.StudyDescriptor(m.name, "sdev", m.panel), m.std.chart = m.chart, m.std.days = 5, m.std.startFrom = m.startFrom, m.std.inputs = {
      Field: k,
      "Standard Deviations": 1,
      Type: "ma"
    }, m.std.outputs = {
      _STD: null
    }, f.Studies.calculateStandardDeviation(p, m.std), f.Studies.MA("ma", 20, "_STD " + m.name, 0, "_MASTD", p, m), M = parseInt(m.inputs.Offset, 10), isNaN(M) && (M = 0), w = m.startFrom, T = M, I = m.startFrom - 1; I >= 0; I--) if (v = x[I][C], !(!v && v !== 0)) {
      if (b === null && (b = v), T <= 0) break;
      T--, w = I;
    }
    for (b === null && (b = w = 0), D = [], I = w; I < x.length; I++) {
      if (F = "_S", F += "TD", F += " ", P = "_MA", P += "S", P += "T", P += "D ", _ = "o", _ += "bject", V = x[I], v = V[k], v && typeof v == _ && (v = v[m.subField]), A = I + M >= 0 && I + M < x.length, E = A ? x[I + M] : null, !v && v !== 0) {
        E ? E[C] = null : I + M >= x.length && (S = {}, S[C] = null, D.push(S));
        continue;
      }
      !V[P + m.name] && V["_MASTD " + m.name] !== 0 || (L = V[F + m.name] / V["_MASTD " + m.name], e.n1T(115), N = e.B3B(v, L, 0, L, y, "1", y, b), b = N, I < m.days && (N = null), E ? E[C] = N : I + M >= x.length && (S = {}, S[C] = N, D.push(S)));
    }
    m.appendFutureTicks(p, D);
  }, f.Studies.calculateMovingAverageTriangular = function (p, m) {
    var x, y, b, C, k, M, I, v, S, w, T, D, F;
    x = "T", x += "RI2", y = "T", y += "R", y += "I1 ", b = "si", b += "mpl", b += "e", C = "T", C += "R", C += "I", C += "1", k = m.chart.scrubbed, M = m.inputs.Field, (!M || M == "field") && (M = "Close"), I = Math.ceil(m.days / 2), f.Studies.MA("simple", I, M, 0, C, p, m), m.days % 2 === 0 && I++, f.Studies.MA(b, I, y + m.name, 0, x, p, m), v = m.name;
    for (var P in m.outputs) e.E3R(31), v = e.B3B(v, " ", P);
    S = parseInt(m.inputs.Offset, 10), isNaN(S) && (S = 0), w = S;
    for (var _ = m.startFrom - 1; _ >= 0; _--) if (T = k[_][v], !(!T && T !== 0)) {
      if (w > 0) {
        w--;
        continue;
      }
      break;
    }
    for (D = [], _++; _ < k.length; _++) _ + S >= 0 && (_ + S < k.length ? (e.n1T(0), k[e.W6G(S, _)][v] = k[_]["TRI2 " + m.name]) : (F = {}, F[v] = k[_]["TRI2 " + m.name], D.push(F)));
    m.appendFutureTicks(p, D);
  }, f.Studies.calculateMovingAverageWeighted = function (p, m) {
    var x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E;
    x = m.chart.scrubbed, y = 0, b = 0, C = m.inputs.Field, (!C || C == "field") && (C = "Close"), e.E3R(16);
    var L = e.W6G(19, 265, 14);
    e.n1T(116);
    var N = e.B3B(3, 14, 14, 5, 8);
    k = m.days * (m.days + "1" * L) / N, M = m.name;
    for (var U in m.outputs) e.n1T(31), M = e.B3B(M, " ", U);
    for (I = parseInt(m.inputs.Offset, 10), isNaN(I) && (I = 0), T = [], D = m.startFrom, F = I, v = m.startFrom - 1; v >= 0; v--) if (S = x[v][C], S && typeof S == "object" && (S = S[m.subField]), !(!S && S !== 0)) {
      if (F > 0) {
        F--, D = v;
        continue;
      }
      if (T.length == m.days - 1) break;
      T.unshift(S);
    }
    for (e.L1$(), T.length < m.days - 1 && (T = [], D = 0), v = 0; v < T.length; v++) {
      e.E3R(117);
      var B = e.W6G(0, 18, 14, 5);
      y += (v + B) * T[v], b += T[v];
    }
    for (P = [], v = D; v < x.length; v++) {
      if (_ = x[v], S = _[C], S && typeof S == "object" && (S = S[m.subField]), V = v + I >= 0 && v + I < x.length, A = V ? x[v + I] : null, !S && S !== 0) {
        A ? A[M] = null : v + I >= x.length && (w = {}, w[M] = null, P.push(w));
        continue;
      }
      T.push(S), T.length > m.days && (y -= b, b -= T.shift()), y += T.length * S, b += S, E = v < m.days - 1 ? null : y / k, A ? A[M] = E : v + I >= x.length && (w = {}, w[M] = E, P.push(w));
    }
    m.appendFutureTicks(p, P);
  }, f.Studies.calculateStudyATR = function (p, m) {
    var x, y, b, C, k, M, I, v, S;
    if (x = m.chart.scrubbed, y = m.days, x.length < y + 1) {
      m.error = !0;
      return;
    }
    b = 0, e.Z8b(), C = m.name;
    for (var w = Math.max(m.startFrom, 1); w < x.length; w++) if (k = "T", k += "rue Ran", k += "g", k += "e ", M = "Su", M += "m", M += " True Range ", I = x[w], e.E3R(1), v = x[e.B3B(1, w)], S = I.trueRange, v[M + C] && (e.E3R(0), b = v[e.W6G(C, "Sum True Range ")]), b += S, w > y && (e.n1T(1), b -= x[e.B3B(y, w)][e.W6G(C, "True Range ", e.n1T(0))]), e.E3R(0), I[e.W6G(C, k)] = S, e.n1T(0), I[e.W6G(C, "Sum True Range ")] = b, w == y) e.n1T(0), I[e.B3B(C, "ATR ")] = e.W6G(b, y, e.E3R(7));else if (w > y) {
      e.n1T(16);
      var T = e.W6G(6, 17, 3);
      e.E3R(0), I[e.W6G(C, "ATR ")] = (v["ATR " + C] * (y - T) + S) / y;
    }
  }, f.Studies.displayPSAR2 = function (p, m, x) {
    var y, b, C, k, M, I, v, S, w, T, D, F, P;
    y = p.panels[m.panel], b = m.getYAxis(p), C = b == p.chart.panel.yAxis, e.Z8b(), p.startClip(y.name), k = m.getContext(p), M = m.inputs["Plot Type"] == "squarewave";
    for (var _ in m.outputs) {
      e.n1T(0), e.W6G(1698, 142), I = _ + " " + m.name, k.beginPath(), v = p.layout.candleWidth, S = Math.max(3, Math.floor(p.chart.tmpWidth / 2));
      for (var V = 0; V < x.length; V++) w = x[V], !(!w || !w[I] && w[I] !== 0) && (w.candleWidth && (v = w.candleWidth), C && w.transform && (w = w.transform), T = p.pixelFromBar(V, y.chart), M && (e.n1T(7), T -= e.W6G(v, 2)), D = p.pixelFromTransformedValue(w[m.referenceOutput ? m.referenceOutput + " " + m.name : I], y, b), (V === 0 || !x[V - 1] || !x[V - 1][I] && x[V - 1][I] !== 0) && k.moveTo(T, D), M ? (k.lineTo(T, D), e.E3R(0), k.lineTo(e.W6G(v, T), D), x[V + 1] && (e.E3R(0), F = x[e.B3B(1, V)], C && F.transform && (F = F.transform), !F[I] && F[I] !== 0 && (e.n1T(0), k.lineTo(e.W6G(v, T), p.pixelFromTransformedValue(F[m.referenceOutput ? m.referenceOutput + " " + m.name : I], p.panels[m.panel], b))))) : (e.n1T(41), k.moveTo(e.W6G(2, T, S), D), e.E3R(38), k.lineTo(e.B3B(T, S, 2), D)));
      k.lineWidth = 1, m.highlight && (k.lineWidth = 3), P = f.Studies.determineColor(m.outputs[_]), P == "auto" && (P = p.defaultColor), k.strokeStyle = P, !m.highlight && p.highlightedDraggable && (e.E3R(1), k.globalAlpha *= e.W6G(0, "0.3")), k.stroke(), k.closePath(), k.lineWidth = 1;
    }
    p.endClip();
  }, f.Studies.inputAttributeDefaultGenerator = function (p) {
    e.Z8b();
    var m, x, y;
    if (!p && p !== 0) return {};
    if (p.constructor == Number) {
      if (Math.floor(p) == p) {
        m = 1219071532, x = -1225312637, y = 2;
        for (var b = 1; e.o0(b.toString(), b.toString().length, 58569) !== m; b++) return p < 6 ? {
          min: 5,
          step: 2
        } : {
          step: 9
        };
        return e.Q_(y.toString(), y.toString().length, 15706) !== x ? p >= 7 ? {
          min: 0,
          step: 7
        } : {
          step: 7
        } : p > 0 ? {
          min: 1,
          step: 1
        } : {
          step: 1
        };
      }
      return p > 0 ? {
        min: 0,
        step: 0.01
      } : {
        step: 0.01
      };
    }
    return {};
  }, f.Studies.getMarketOffset = function ({
    stx: p,
    localQuoteDate: m,
    shiftToDateBoundary: x
  }) {
    var y, b, C, k, M, I;
    arguments.length > 1 && (p = arguments[0], m = arguments[1], y = arguments[2]);
    var {
      symbol: v
    } = p.chart;
    return b = f.getFn("Market.Symbology.isForexMetal")(v), y === void 0 && (C = "Market.Symbology.is", C += "ForexSymbol", y = f.getFn(C)(v)), p.chart.market ? k = y ? "America/New_York" : p.chart.market.market_tz : k = null, M = new Date(m.getTime() + m.getTimezoneOffset() * 60000), (!k || k.indexOf("UTC") == -1) && (M = f.convertTimeZone(M, "UTC", k)), I = new Date(M.getFullYear(), M.getMonth(), M.getDate(), M.getHours(), M.getMinutes(), M.getSeconds(), M.getMilliseconds()).getTime() - m.getTime(), x && y && (e.n1T(118), I += e.W6G(0, b ? 6 : 7, 60, 60, "1000")), I;
  }, f.Studies.getStudyList = function (p) {
    e.L1$();
    var m, x;
    m = {}, x = {}, f.extend(x, p);
    for (var y in f.Studies.studyLibrary) x[y] || (m[f.Studies.studyLibrary[y].name] = y);
    return m;
  }, f.Studies.determineColor = function (p) {
    if (p) {
      if (typeof p == "object") return p.color;
    } else return null;
    return p;
  }, f.Studies.calculateGenericEnvelope = function (p, m, x, y, b, C) {
    var k, M, I, v, S, w, T, D;
    k = "C", k += "lose", x || (x = 0), C || (e.E3R(1), C = e.B3B(0, "0")), (!y || y == "field") && (y = k), b || (b = y), M = m.chart.scrubbed, I = m.inputs.Field, (!I || I === "field") && (I = "Close");
    for (var F = m.startFrom; M && F < M.length; F++) v = M[F], v && v[y] && (S = v[I], S && typeof S == "object" && (S = S.Close), w = v[y], w && typeof w == "object" && (w = w[m.subField]), T = v[b], T && typeof T == "object" && (T = T[m.subField]), e.E3R(119), D = e.B3B(C, x, T), e.n1T(0), v[m.type + " Top " + m.name] = e.W6G(D, w), e.E3R(1), v[m.type + " Bottom " + m.name] = e.W6G(D, w), v[m.type + " Median " + m.name] = w, v["Bandwidth " + m.name] = w ? 200 * D / w : 0, e.n1T(120), v["%b " + m.name] = e.B3B(D, 64, w, 1, "50", S));
  }, f.Studies.displayChannel = function (p, m, x) {
    var y, b, C, k, M, I, v;
    if (e.L1$(), m.inputs["Channel Fill"]) {
      y = {
        panelName: m.panel
      };
      for (var S in m.outputs) if (b = "M", b += "ed", b += "ian", C = "L", C += "o", C += "w", k = "H", k += "i", k += "g", k += "h", M = "T", M += "o", M += "p", I = S.split(" ").pop(), I == M || I == k) {
        e.n1T(13);
        var w = e.W6G(7, 8, 0);
        e.E3R(121), e.W6G(11, 926902, 6039, 19, 14), e.n1T(122);
        var T = e.W6G(86618, 6188, 15, 2);
        e.n1T(50);
        var D = e.B3B(11, 288, 587, 12);
        e.E3R(123);
        var F = e.B3B(5243, 107, 10, 2, 525);
        e.n1T(50);
        var P = e.B3B(20, 107100, 529570, 5);
        y.topBand = S + (+"503.43" === "8340" * w ? T <= 2690 ? D : F == 5161 ? P : 4.62 : " ") + m.name;
      } else I == "Bottom" || I == C ? y.bottomBand = S + " " + m.name : (I == b || I == "Channel") && (y.color = f.Studies.determineColor(m.outputs[S]));
      m.parameters && m.parameters.opacity ? y.opacity = m.parameters.opacity : y.opacity = 0.2, v = p.panels[m.panel], y.skipTransform = v.name != m.chart.name, y.yAxis = m.getYAxis(p), !m.highlight && p.highlightedDraggable && (y.opacity *= +"0.3"), f.prepareChannelFill(p, y);
    }
    f.Studies.displaySeriesAsLine(p, m, x);
  }, f.Studies.initAnchorHandle = function (p, m) {
    var {
      handle: x
    } = m;
    x || (e.L1$(), p.controls.anchorHandles || (p.controls.anchorHandles = {}), p.controls.anchorHandles[m.uniqueId] ? ({
      handle: x
    } = p.controls.anchorHandles[m.uniqueId]) : (x = document.createElement("div"), x.classList.add("stx_anchor_handle"), x.setAttribute(m.uniqueId, ""), p.controls.anchorHandles[m.uniqueId] = {
      handle: x,
      sd: m
    }, p.controls.chartControls.parentElement.appendChild(x)), m.anchorHandle = x);
  }, f.Studies.removeAnchorHandle = function (p, m) {
    var {
      handle: x
    } = (p.controls.anchorHandles || {})[m.uniqueId] || {};
    x && (delete p.controls.anchorHandles[m.uniqueId], x.remove());
  }, f.Studies.repositionAnchor = function (p, m) {
    var x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      {
        currentAnchorTime: S,
        uniqueId: w
      } = m,
      {
        hoverTick: T
      } = p.repositioningAnchorSelector || {},
      {
        dataSet: D,
        market: F
      } = p.chart,
      {
        anchorHandles: P
      } = p.controls;
    if (x = {}, T || T === 0) {
      if (y = "YYYY-M", y += "M-dd", T >= D.length || (b = !m.inputs["Anchor Date"], C = D[T].DT, k = f.Studies.getMarketOffset({
        stx: p,
        localQuoteDate: C,
        shiftToDateBoundary: !0
      }), b && new Date(C.getTime() + k).getDate() !== new Date(S.getTime() + k).getDate())) return;
      F.market_def && (C = new g.Date(C, F.market_def.market_tz)), M = !b && f.dateToStr(C, y), I = f.dateToStr(C, "HH:mm:ss"), x = {
        "Anchor Time": I
      }, M && (x["Anchor Date"] = M);
    }
    v = f.Studies.replaceStudy(p, m.inputs.id, m.type, Object.assign(m.inputs, x), m.outputs, m.parameters, m.panel), P[w].sd = v, p.draw();
  }, f.Studies.displayAnchorHandleAndLine = function (p, m, x) {
    var y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E;
    y = "p", y += "x", b = (p.repositioningAnchorSelector || {}).sd === m;
    var {
        hoverTick: L
      } = b && p.repositioningAnchorSelector,
      {
        chart: N,
        panels: U,
        xaxisHeight: B
      } = p,
      {
        market: O = {},
        symbol: R
      } = N;
    C = U[m.panel];
    var {
        top: H,
        bottom: z,
        right: W,
        left: G,
        height: Z
      } = C,
      {
        inputs: X,
        anchorHandle: ie,
        currentAnchorTime: j
      } = m,
      {
        backgroundColor: J,
        borderLeftColor: ae
      } = p.canvasStyle("stx_anchor_handle"),
      [se, ne, le = 0] = (X["Anchor Time"] || "").split(":");
    k = !X["Anchor Date"], M = f.getFn("Market.Symbology.isForexSymbol")(R), I = (L || L === 0) && (p.chart.dataSet[L] || {}).DT, v = f.Studies.getMarketOffset({
      stx: p,
      localQuoteDate: x[x.length - 1].DT,
      shiftToDateBoundary: !0
    }), S = I && k && new Date(I.getTime() + v).getDate() !== new Date(j.getTime() + v).getDate();
    var {
        highlighted: ue
      } = p.controls.anchorHandles[m.uniqueId],
      [oe, ce] = O.getNormalOpen().split(":").map(be => parseInt(be));
    w = be => {
      var _e;
      return _e = be ? p.tickFromDate(be, null, null, !0) : L, [p.pixelFromTick(_e, N), _e];
    }, T = k ? new Date(x[x.length - 1].DT) : f.strToDate(X["Anchor Date"]), O.market_def && (T = new g.Date(T, O.market_def.market_tz)), e.L1$(), T.setHours(se, ne, le), D = M && (T.getHours() > oe || T.getHours() === oe && T.getMinutes() >= ce), D && T.setDate(T.getDate() - 1);
    var [Q] = w(),
      [ee, re] = w(T);
    F = new Date(T), F.setHours(...O.getNormalClose().split(":")), D && F.setDate(F.getDate() + 1);
    var [de] = F && w(F) || [];
    if (k && (ee > W || de > W)) {
      P = new Date(T);
      do P.setDate(P.getDate() - 1); while (O && !O.isMarketDate(P));
      var [he, fe] = w(P);
      he > G && (T = P, ee = he, re = fe);
    }
    _ = {
      y0: H,
      y1: z,
      type: "line",
      confineToPanel: C
    }, p.plotLine(Object.assign(_, {
      x0: ee,
      x1: ee,
      color: J,
      pattern: "solid",
      lineWidth: ue ? 3 : 2,
      opacity: 1
    })), p.plotLine(Object.assign(_, {
      x0: Q,
      x1: Q,
      color: S ? ae : J,
      pattern: [6, 6],
      lineWidth: 2,
      opacity: S ? 0.5 : 1
    })), e.n1T(11);
    var pe = e.B3B(17, 10, 96, 8, 0);
    ie.style.height = [8, Z / 4, 50].sort((be, _e) => (e.L1$(), e.n1T(1), e.W6G(_e, be)))[pe] + y;
    var {
      height: ge,
      width: ve
    } = ie.getBoundingClientRect();
    V = Math.round(z) === p.height ? B : 0, A = C.name === "chart" ? 35 : 0, e.n1T(124), E = e.B3B(ge, "10", A, V), e.E3R(32), ie.style.top = e.W6G(z, "px", E), ie.style.left = L || L === 0 ? Q : ee - ve / 2 + "px", m.currentAnchorTime = T, m.currentAnchorTick = re;
  }, f.Studies.studyScriptLibrary = {}, f.Studies.studyLibrary = f.Studies.studyLibrary || {}, f.extend(f.Studies.studyLibrary, {
    ma: {
      name: i,
      overlay: !0,
      calculateFN: f.Studies.calculateMovingAverage,
      inputs: {
        Period: 50,
        Field: r,
        Type: "ma",
        Offset: 0
      },
      outputs: {
        MA: "#FF0000"
      }
    },
    "STD Dev": {
      name: "Standard Deviation",
      calculateFN: f.Studies.calculateStandardDeviation,
      inputs: {
        Period: 14,
        Field: "field",
        "Standard Deviations": 2,
        "Moving Average Type": "ma"
      },
      attributes: {
        "Standard Deviations": {
          min: 0.1,
          step: +"0.1"
        }
      }
    },
    "True Range": {
      name: "True Range",
      calculateFN: f.Studies.calculateStudyATR,
      inputs: {},
      outputs: {
        "True Range": n
      }
    },
    volume: {
      name: "Volume Chart",
      range: "0 to max",
      yAxis: {
        ground: !0,
        initialMarginTop: 0,
        zoom: 0
      },
      seriesFN: f.Studies.createVolumeChart,
      calculateFN: f.Studies.calculateVolume,
      inputs: {},
      outputs: {
        "Up Volume": "#8cc176",
        "Down Volume": t
      }
    }
  });
};
Ia = q => {
  var e;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.ChartEngine.Driver ? (e.ChartEngine.Driver.Lookup = function (t) {}, e.ChartEngine.Driver.Lookup.prototype.acceptText = function (t, n, r, i) {
    this.cb;
  }) : console.error("symbolLookupBase feature requires first activating quoteFeed feature.");
};
Fa = q => {
  var e;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.ThemeHelper = e.ThemeHelper || function (t) {
    var n, r, i, a;
    n = "stx_cand", n += "l", n += "e_up", r = "stx_ca", r += "ndle_shadow_ev", r += "en", this.params = t, i = t.stx, a = "#", a += "FF", a += "F", a += "FFF", i.chart.container && (a = getComputedStyle(i.chart.container).backgroundColor, e.isTransparent(a) && (a = i.containerColor)), this.settings.chart.Background.color = e.hexToRgba(a), this.settings.chart["Grid Lines"].color = e.hexToRgba(i.canvasStyle("stx_grid").color), this.settings.chart["Grid Dividers"].color = e.hexToRgba(i.canvasStyle("stx_grid_dark").color), this.settings.chart["Axis Text"].color = e.hexToRgba(i.canvasStyle("stx_xaxis").color), this.settings.chartTypes["Candle/Bar"].up.color = e.hexToRgba(i.canvasStyle("stx_candle_up").color), this.settings.chartTypes["Candle/Bar"].down.color = e.hexToRgba(i.canvasStyle("stx_candle_down").color), this.settings.chartTypes["Candle/Bar"].up.wick = e.hexToRgba(i.canvasStyle("stx_candle_shadow_up").color), this.settings.chartTypes["Candle/Bar"].down.wick = e.hexToRgba(i.canvasStyle("stx_candle_shadow_down").color), this.settings.chartTypes["Candle/Bar"].even.wick = e.hexToRgba(i.canvasStyle(r).color), this.settings.chartTypes["Candle/Bar"].up.border = e.hexToRgba(i.canvasStyle("stx_candle_up").borderLeftColor), this.settings.chartTypes["Candle/Bar"].down.border = e.hexToRgba(i.canvasStyle("stx_candle_down").borderLeftColor), e.isTransparent(i.canvasStyle(n).borderLeftColor) && (this.settings.chartTypes["Candle/Bar"].up.border = null), e.isTransparent(i.canvasStyle("stx_candle_down").borderLeftColor) && (this.settings.chartTypes["Candle/Bar"].down.border = null), this.settings.chartTypes.Line.color = e.hexToRgba(i.canvasStyle("stx_line_chart").color), this.settings.chartTypes.Mountain.color = e.hexToRgba(i.canvasStyle("stx_mountain_chart").backgroundColor), this.settings.chartTypes.Mountain.basecolor = e.hexToRgba(i.canvasStyle("stx_mountain_chart").color);
  }, e.ThemeHelper.prototype.settings = {
    chart: {
      Background: {
        color: null
      },
      "Grid Lines": {
        color: null
      },
      "Grid Dividers": {
        color: null
      },
      "Axis Text": {
        color: null
      }
    },
    chartTypes: {
      "Candle/Bar": {
        up: {
          color: null,
          wick: null,
          border: null
        },
        down: {
          color: null,
          wick: null,
          border: null
        },
        even: {
          color: null,
          wick: null,
          border: null
        }
      },
      Line: {
        color: null
      },
      Mountain: {
        color: null,
        basecolor: null
      }
    }
  }, e.ThemeHelper.prototype.update = function (t) {
    var n, r, i, a, s, o, h, l, u, c, d, f, g, p;
    n = "c", n += "o", n += "lor", r = "stx_mount", r += "ain_chart", i = "back", i += "groundColor", a = "bord", a += "e", a += "rTopColor", s = "stx_mountain_char", s += "t", o = "c", o += "o", o += "l", o += "or", h = "stx_shado", h += "w_do", h += "wn", l = "colo", l += "r", u = "c", u += "ol", u += "o", u += "r", c = "stx_", c += "candle_", c += "d", c += "own", d = "Axis", d += " Text", t || (t = this.params.stx), f = {
      stx_candle_up: {
        stx_candle_up: !0,
        stx_bar_up: !0,
        stx_hollow_candle_up: !0,
        stx_line_up: !0,
        stx_baseline_up: !0
      },
      stx_candle_down: {
        stx_candle_down: !0,
        stx_bar_down: !0,
        stx_hollow_candle_down: !0,
        stx_line_down: !0,
        stx_baseline_down: !0
      },
      stx_candle_even: {
        stx_hollow_candle_even: !0,
        stx_bar_even: !0
      },
      stx_shadow_up: {
        stx_candle_shadow_up: !0
      },
      stx_shadow_down: {
        stx_candle_shadow_down: !0
      },
      stx_shadow_even: {
        stx_candle_shadow_even: !0
      },
      stx_line_chart: {
        stx_bar_chart: !0,
        stx_line_chart: !0
      },
      stx_grid: {
        stx_grid: !0
      },
      stx_grid_dark: {
        stx_grid_dark: !0
      },
      stx_xaxis: {
        stx_xaxis_dark: !0,
        stx_xaxis: !0,
        stx_yaxis: !0,
        stx_yaxis_dark: !0,
        stx_grid_border: !0
      },
      stx_mountain_chart: {
        stx_mountain_chart: !0
      },
      stx_market_session: {
        stx_market_session: !0
      }
    }, te.Z8b(), t.chart.container.style.backgroundColor = this.settings.chart.Background.color, t.defaultColor = "", m("stx_grid", "color", this.settings.chart["Grid Lines"].color);
    function m(x, y, b) {
      te.L1$();
      var C;
      C = f[x];
      for (var k in C) t.setStyle(k, y, b);
    }
    m("stx_grid_dark", "color", this.settings.chart["Grid Dividers"].color), m("stx_xaxis", "color", this.settings.chart[d].color), g = this.settings.chartTypes["Candle/Bar"], g.even || (p = "stx_candle_shadow_e", p += "v", p += "en", g.even = {
      color: null,
      wick: e.hexToRgba(t.canvasStyle(p).color),
      border: null
    }), m("stx_candle_up", "color", g.up.color), m(c, u, g.down.color), m("stx_candle_even", l, g.even.color), m("stx_shadow_up", "color", g.up.wick), m(h, o, g.down.wick), m("stx_shadow_even", "color", g.even.wick), t.setStyle("stx_candle_up", "borderLeftColor", g.up.border), t.setStyle("stx_candle_down", "borderLeftColor", g.down.border), m("stx_line_chart", "color", this.settings.chartTypes.Line.color), t.setStyle(s, a, e.hexToRgba(this.settings.chartTypes.Mountain.color, 1)), t.setStyle("stx_mountain_chart", i, e.hexToRgba(this.settings.chartTypes.Mountain.color, 0.5)), t.setStyle(r, n, e.hexToRgba(this.settings.chartTypes.Mountain.basecolor, 0.01)), t.draw();
  }, e.ChartEngine.prototype.setThemeSettings = function (t) {
    var n, r, i;
    n = "t", n += "heme", this.styles = {}, this.chart.container.style.backgroundColor = "", this.defaultColor = "", t && (r = new e.ThemeHelper({
      stx: this
    }), r.settings = t, r.update()), this.updateListeners(n), this.changeOccurred("theme"), this.displayInitialized && (i = "them", i += "e", this.headsUpHR(), this.clearPixelCache(), this.updateListeners(i), this.draw());
  };
};
Ea = q => {
  var e = te,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h,
    l,
    u,
    c,
    d,
    f,
    g,
    p,
    m,
    x,
    y,
    b,
    C,
    k,
    M,
    I,
    v,
    S,
    w,
    T,
    D,
    F,
    P,
    _,
    V,
    A,
    E,
    L,
    N,
    U,
    B,
    O,
    R,
    H,
    z,
    W,
    G,
    Z,
    X,
    ie,
    j,
    J,
    ae,
    se,
    ne,
    le,
    ue,
    oe,
    ce,
    Q,
    ee,
    re,
    de,
    he,
    fe,
    pe,
    ge,
    ve,
    be,
    _e,
    ye,
    we,
    Te,
    Pe,
    Le,
    Be,
    Ue,
    Ke,
    Je,
    $e,
    ke,
    Ae,
    He,
    Ne,
    Ge,
    dt,
    je,
    mt,
    wt,
    kt,
    gt,
    et,
    ft,
    xt,
    Ee,
    tt,
    ut,
    Ye,
    pt,
    st,
    Ot,
    At,
    ot,
    Mt,
    St,
    ii,
    _t,
    Ct,
    at,
    Kt,
    Tt,
    ri,
    Ft,
    Re,
    hi,
    Ht,
    Nt,
    ui,
    Ve,
    Qe,
    nt,
    bt,
    it,
    Et,
    Gt,
    Zt,
    Pt,
    yi,
    ci,
    bi,
    Ei,
    gi,
    Pi,
    ir,
    Ci,
    ur,
    oi,
    xi,
    Si,
    cr,
    rr,
    ar,
    zi,
    yr,
    wi,
    Wi,
    Gi,
    Zi,
    Li,
    Ni,
    br,
    Qi,
    ai,
    nr,
    Vi,
    ki,
    Qt,
    Ui,
    Ti,
    Di,
    dr,
    sr,
    Ai,
    fr,
    Mi,
    $i,
    ji,
    Yi,
    Xi,
    Ki,
    _i,
    qi,
    Bi,
    Cr,
    Sr,
    pr,
    wr,
    Ji,
    Ii,
    mr,
    Dr,
    Jt,
    lt;
  t = "Su", t += "n>=", t += "2", t += "2", n = "S", n += "un>", n += "=1", r = "Sun>", r += "=", r += "2", i = "S", i += "un", i += ">=", i += "9", a = "M", a += "ay", s = "o", s += "n", s += "l", s += "y", o = "O", o += "c", o += "t", h = "ma", h += "x", l = "M", l += "a", l += "r", u = "ma", u += "x", c = "S", c += "un>", c += "=8", d = "M", d += "a", d += "r", f = "m", f += "a", f += "x", g = "lastS", g += "u", g += "n", p = "m", p += "a", p += "x", m = "S", m += "un", m += ">=8", x = "M", x += "a", x += "r", y = "M", y += "a", y += "r", b = "m", b += "a", b += "x", C = "last", C += "Sun", k = "J", k += "a", k += "n", M = "on", M += "l", M += "y", I = "last", I += "Sun", v = "Ap", v += "r", S = "S", S += "e", S += "p", w = "2", w += "0", T = "De", T += "c", D = "O", e.L1$(), D += "ct", F = "Su", F += "n", F += ">=1", P = "Su", P += "n", P += ">=", P += "1", _ = "A", _ += "pr", V = "m", V += "ax", A = "Su", A += "n", A += ">=1", E = "m", E += "ax", L = "M", L += "a", L += "r", N = "m", N += "a", N += "x", U = "O", U += "c", U += "t", B = "m", B += "a", B += "x", O = "o", O += "nly", R = "Sat", R += ">=", R += "24", H = "Oc", H += "t", z = "m", z += "a", z += "x", W = "Ma", W += "r", G = "l", G += "a", G += "stThu", Z = "lastSu", Z += "n", X = "M", X += "a", X += "r", ie = "2", ie += "0", j = "o", j += "n", j += "l", j += "y", J = "2", J += "1", ae = "S", ae += "ep", se = "lastSu", se += "n", ne = "las", ne += "tSun", le = "M", le += "ar", ue = "m", ue += "a", ue += "x", oe = "+", oe += "0", oe += "2", ce = "M", ce += "ar", Q = "ma", Q += "x", ee = "S", ee += "un>", ee += "=", ee += "1", re = "A", re += "p", re += "r", de = "Ap", de += "r", he = "A", he += "p", he += "r", fe = "o", fe += "n", fe += "l", fe += "y", pe = "onl", pe += "y", ge = "o", ge += "nl", ge += "y", ve = "on", ve += "ly", be = "o", be += "nl", be += "y", _e = "o", _e += "n", _e += "l", _e += "y", ye = "1", ye += "7", we = "M", we += "a", we += "y", Te = "Asia", Te += "/Riya", Te += "dh", Pe = "Europe/M", Pe += "osco", Pe += "w", Le = "Europe/B", Le += "u", Le += "charest", Be = "U", Be += "r", Be += "uguay", Ue = "-", Ue += "04", Ue += "/", Ue += "-03", Ke = "P", Ke += "a", Ke += "ra", Je = "C", Je += "O", $e = "Bra", $e += "zil", ke = "E", ke += "S", ke += "T", Ae = "C", Ae += "u", Ae += "b", Ae += "a", He = "C", He += "%", He += "s", He += "T", Ne = "C", Ne += "R", Ge = "C", Ge += "%", Ge += "sT", dt = "Me", dt += "xico", je = "C", je += "S", je += "T", mt = "MS", mt += "T", wt = "H", wt += "ST", kt = "P", kt += "%s", kt += "T", gt = "Europe/Bel", gt += "grade", et = "E", et += "U", ft = "+1", ft += "2", xt = "+", xt += "1", xt += "1", Ee = "+", Ee += "0", Ee += "9", tt = "+", tt += "0", tt += "7", ut = "+", ut += "0", ut += "7", Ye = "+", Ye += "0", Ye += "6", pt = "+", pt += "0", pt += "4", st = "+", st += "0", st += "4", Ot = "M", Ot += "SK", At = "E", At += "U", ot = "E", ot += "U", Mt = "EE%", Mt += "sT", St = "E", St += "U", ii = "A", ii += "%", ii += "s", ii += "T", _t = "E", _t += "U", Ct = "C-", Ct += "E", Ct += "ur", at = "E", at += "U", Kt = "I", Kt += "ST/GMT", Tt = "G", Tt += "MT/B", Tt += "ST", ri = "E", ri += "tc", ri += "/UTC", Ft = "+", Ft += "13", Ft += "/", Ft += "+14", Re = "Ch", Re += "at", Re += "ham", hi = "N", hi += "Z", Ht = "Ch", Ht += "ST", Nt = "AC", Nt += "%sT", ui = "A", ui += "S", Ve = "A", Ve += "W", Ve += "%s", Ve += "T", Qe = "+0", Qe += "4", nt = "+", nt += "0", nt += "7", bt = "E", bt += "E%s", bt += "T", it = "+", it += "0", it += "3", Et = "M", Et += "ong", Et += "ol", Gt = "Mong", Gt += "ol", Zt = "+", Zt += "0", Zt += "8", Pt = "E", Pt += "E", Pt += "%sT", yi = "ALM", yi += "T", ci = "EE", ci += "%sT", bi = "Jord", bi += "an", Ei = "I", Ei += "r", Ei += "an", gi = "E", gi += "E", gi += "%sT", Pi = "EU", Pi += "Asia", ir = "C", ir += "%sT", Ci = "H", Ci += "K%", Ci += "s", Ci += "T", ur = "C", ur += "%s", ur += "T", oi = "P", oi += "R", oi += "C", xi = "Tu", xi += "n", xi += "i", xi += "sia", Si = "S", Si += "A", cr = "Mo", cr += "rocco", rr = "EE", rr += "%", rr += "s", rr += "T", ar = "-0", ar += "1", zi = "Pacific", zi += "/A", zi += "pi", zi += "a", yr = "Pacific/Tongat", yr += "apu", wi = "Asia/Ka", wi += "mcha", wi += "tka", Wi = "Australia/Br", Wi += "isbane", Gi = "Austra", Gi += "lia/Adela", Gi += "ide", Zi = "Australia", Zi += "/Perth", Li = "Asi", Li += "a/Ulaanbaat", Li += "ar", Ni = "A", Ni += "sia/", Ni += "Irkut", Ni += "sk", br = "Asia/Hong_K", br += "ong", Qi = "A", Qi += "sia/Kar", Qi += "a", Qi += "chi", ai = "A", ai += "sia/Ka", ai += "bul", nr = "Eur", nr += "ope", nr += "/Samara", Vi = "A", Vi += "sia/Duba", Vi += "i", ki = "Asia/", ki += "Tehran", Qt = "Europe/Vo", Qt += "lgograd", Ui = "E", Ui += "urope/", Ui += "Moscow", Ti = "As", Ti += "ia/", Ti += "Jeru", Ti += "salem", Di = "As", Di += "ia/Be", Di += "ir", Di += "ut", dr = "Asia/Nic", dr += "osia", sr = "Afric", sr += "a/Johannes", sr += "burg", Ai = "Afric", Ai += "a/Cai", Ai += "ro", fr = "Euro", fr += "pe/Kaliningrad", Mi = "Euro", Mi += "pe/Brussels", $i = "Europe/Be", $i += "lg", $i += "rad", $i += "e", ji = "Europe", ji += "/Amsterdam", Yi = "Af", Yi += "r", Yi += "ica/Cas", Yi += "ablanca", Xi = "Euro", Xi += "pe/Dublin", Ki = "UT", Ki += "C", _i = "At", _i += "lan", _i += "tic/Cape_Verde", qi = "A", qi += "tlan", qi += "tic/Azores", Bi = "Amer", Bi += "ic", Bi += "a/Punta_Arenas", Cr = "America/Argentina/Bueno", Cr += "s", Cr += "_Aires", Sr = "Am", Sr += "erica/Puerto_Rico", pr = "America/Asun", pr += "c", pr += "ion", wr = "America/Port-", wr += "au", wr += "-Prince", Ji = "America/", Ji += "Reg", Ji += "ina", Ii = "America/Cos", Ii += "ta", Ii += "_", Ii += "Rica", mr = "Pacific/Pago_Pa", mr += "go", Dr = "u", Dr += "nde", Dr += "f", Dr += "ined", Jt = typeof _CIQ !== Dr ? _CIQ : q.CIQ, lt = typeof _timezoneJS < "u" ? _timezoneJS : q.timezoneJS, Jt.timeZoneMap = {
    "(UTC-11:00) American Samoa, Midway Island": mr,
    "(UTC-10:00) Hawaii": "Pacific/Honolulu",
    "(UTC-09:00) Alaska": "America/Juneau",
    "(UTC-08:00) Pacific Time (US and Canada), Tijuana": "America/Los_Angeles",
    "(UTC-07:00) Arizona": "America/Phoenix",
    "(UTC-07:00) Chihuahua, Mazatlan": "America/Chihuahua",
    "(UTC-07:00) Mountain Time (US and Canada)": "America/Denver",
    "(UTC-06:00) Central America": Ii,
    "(UTC-06:00) Central Time (US and Canada)": "America/Chicago",
    "(UTC-06:00) Guadalajara, Mexico City, Monterrey": "America/Mexico_City",
    "(UTC-06:00) Saskatchewan": Ji,
    "(UTC-05:00) Bogota, Lima, Quito, Rio Branco": "America/Bogota",
    "(UTC-05:00) Eastern Time (US and Canada)": "America/New_York",
    "(UTC-05:00) Havana": "America/Havana",
    "(UTC-05:00) Port-au-Prince": wr,
    "(UTC-04:00) Asuncion": pr,
    "(UTC-04:00) Santiago": "America/Santiago",
    "(UTC-04:00) Caracas": "America/Caracas",
    "(UTC-04:00) Atlantic Time (Canada)": "America/Halifax",
    "(UTC-04:00) Georgetown, La Paz, Manaus, San Juan": Sr,
    "(UTC-03:30) Newfoundland and Labrador": "America/St_Johns",
    "(UTC-03:00) Cancun, Jamaica, Panama": "America/Panama",
    "(UTC-03:00) Buenos Aires": Cr,
    "(UTC-03:00) Punta Arenas": Bi,
    "(UTC-03:00) Montevideo": "America/Montevideo",
    "(UTC-03:00) Sao Paulo": "America/Sao_Paulo",
    "(UTC-02:00) Mid-Atlantic": "Atlantic/South_Georgia",
    "(UTC-01:00) Azores": qi,
    "(UTC-01:00) Cape Verde Islands": _i,
    "(UTC) Greenwich Mean Time, Reykjavik": Ki,
    "(UTC) Dublin": Xi,
    "(UTC) Lisbon, London": "Europe/London",
    "(UTC+01:00) Algiers, Tunis": "Africa/Tunis",
    "(UTC+01:00) Casablanca": Yi,
    "(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna": ji,
    "(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague": $i,
    "(UTC+01:00) Brussels, Copenhagen, Madrid, Paris": Mi,
    "(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb": "Europe/Sarajevo",
    "(UTC+02:00) Kaliningrad": fr,
    "(UTC+02:00) Athens, Bucharest": "Europe/Bucharest",
    "(UTC+02:00) Cairo": Ai,
    "(UTC+02:00) Harare, Johannesburg": sr,
    "(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius": "Europe/Helsinki",
    "(UTC+02:00) Cyprus": dr,
    "(UTC+02:00) Beirut": Di,
    "(UTC+02:00) Damascus": "Asia/Damascus",
    "(UTC+02:00) Jerusalem": Ti,
    "(UTC+02:00) Amman": "Asia/Amman",
    "(UTC+03:00) Istanbul": "Europe/Istanbul",
    "(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh": "Asia/Riyadh",
    "(UTC+03:00) Minsk, Moscow, Kirov, Simferopol": Ui,
    "(UTC+03:00) Volgograd": Qt,
    "(UTC+03:00) Nairobi": "Africa/Nairobi",
    "(UTC+03:30) Tehran": ki,
    "(UTC+04:00) Baku": "Asia/Baku",
    "(UTC+04:00) Dubai, Muscat": Vi,
    "(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk": nr,
    "(UTC+04:30) Kabul": ai,
    "(UTC+05:00) Karachi, Tashkent": Qi,
    "(UTC+05:00) Yekaterinburg": "Asia/Yekaterinburg",
    "(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi": "Asia/Kolkata",
    "(UTC+05:45) Kathmandu": "Asia/Kathmandu",
    "(UTC+06:00) Almaty": "Asia/Almaty",
    "(UTC+06:00) Omsk": "Asia/Omsk",
    "(UTC+06:00) Astana, Dhaka": "Asia/Dhaka",
    "(UTC+06:30) Yangon": "Asia/Yangon",
    "(UTC+07:00) Bangkok, Jakarta, Vietnam": "Asia/Bangkok",
    "(UTC+07:00) Hovd": "Asia/Hovd",
    "(UTC+07:00) Krasnoyarsk": "Asia/Krasnoyarsk",
    "(UTC+07:00) Novokuznetsk": "Asia/Novokuznetsk",
    "(UTC+07:00) Barnaul, Novosibirsk, Tomsk": "Asia/Novosibirsk",
    "(UTC+08:00) Beijing, Chongqing, Hong Kong SAR": br,
    "(UTC+08:00) Brunei, Kuala Lumpur, Singapore": "Asia/Kuala_Lumpur",
    "(UTC+08:00) Irkutsk": Ni,
    "(UTC+08:00) Choibalsan, Ulaanbaatar": Li,
    "(UTC+08:00) Manila, Taipei": "Asia/Taipei",
    "(UTC+08:00) Perth": Zi,
    "(UTC+08:45) Eucla": "Australia/Eucla",
    "(UTC+09:00) Osaka, Sapporo, Tokyo": "Asia/Tokyo",
    "(UTC+09:00) Pyongyang": "Asia/Pyongyang",
    "(UTC+09:00) Seoul": "Asia/Seoul",
    "(UTC+09:00) Chita, Khandyga, Yakutsk": "Asia/Yakutsk",
    "(UTC+09:30) Adelaide": Gi,
    "(UTC+09:30) Darwin": "Australia/Darwin",
    "(UTC+10:00) Brisbane": Wi,
    "(UTC+10:00) Canberra, Melbourne, Sydney": "Australia/Sydney",
    "(UTC+10:00) Guam, Port Moresby": "Pacific/Guam",
    "(UTC+10:00) Ust-Nera, Vladivostok": "Asia/Vladivostok",
    "(UTC+11:00) Noumea, Solomon Islands": "Pacific/Noumea",
    "(UTC+11:00) Magadan": "Asia/Magadan",
    "(UTC+11:00) Sakhalin, Srednekolymsk": "Asia/Srednekolymsk",
    "(UTC+12:00) Anadyr, Kamchatka": wi,
    "(UTC+12:00) Auckland, Wellington": "Pacific/Auckland",
    "(UTC+12:00) Fiji": "Pacific/Fiji",
    "(UTC+12:45) Chatham": "Pacific/Chatham",
    "(UTC+13:00) Tonga": yr,
    "(UTC+13:00) Samoa": zi,
    "(UTC+14:00) Kiritimati": "Pacific/Kiritimati"
  }, function () {
    var gr, Oi, er, Rt, $t, ni, qt, Vt, jt, si, ei, Lt, di, fi, pi, Hi, Yt, ti, Nr;
    gr = "Septembe", gr += "r", Oi = "Aug", Oi += "us", Oi += "t", er = "J", er += "u", er += "n", er += "e", Rt = "M", Rt += "a", Rt += "y", $t = "Saturd", $t += "ay", ni = "We", ni += "d", ni += "nesday", qt = "Tue", qt += "s", qt += "da", qt += "y", Vt = "un", Vt += "defined", jt = typeof window !== Vt ? window : null, si = jt || (typeof global < "u" ? global : {}), lt.VERSION = "0.4.11", ei = si.$ || si.jQuery || si.Zepto, Lt = si.fleegix, di = lt.Days = ["Sunday", "Monday", qt, ni, "Thursday", "Friday", $t], fi = lt.Months = ["January", "February", "March", "April", Rt, er, "July", Oi, gr, "October", "November", "December"], pi = {}, Hi = {}, Yt = {};
    for (var or = 0; or < fi.length; or++) pi[fi[or].substr(0, 3)] = or;
    for (or = 0; or < di.length; or++) Hi[di[or].substr(0, 3)] = or;
    ti = function (xe, Ce) {
      var De, Fe, Me, ze;
      if (De = "nu", De += "m", De += "b", De += "er", typeof xe !== De) throw e.E3R(0), e.B3B(xe, "not a number: ");
      if (e.n1T(80), Fe = e.W6G(xe, 1000), Me = xe.toString(), ze = Me.length, Fe && ze > Ce) return e.E3R(1), Me.substr(e.B3B(Ce, ze), ze);
      for (Me = [Me]; ze < Ce;) Me.unshift("0"), ze++;
      return Me.join("");
    }, Nr = function (xe) {
      var Ce, De, Fe, Me, ze;
      if (Ce = "G", Ce += "E", Ce += "T", De = "t", De += "ex", De += "t", Fe = "g", Fe += "e", e.L1$(), Fe += "t", Me = "un", Me += "defined", !!xe) {
        if (!xe.url) throw new Error("URL must be specified");
        if ("async" in xe || (xe.async = !0), (!Lt || typeof Lt.xhr > "u") && (!ei || typeof ei.ajax === Me)) throw ze = "Please use the Fleegix.js XH", ze += "R module, jQuery ajax, Zepto ajax, or define y", ze += "our own transport mechanism for downloa", ze += "ding zone files.", new Error(ze);
        return xe.async ? Lt && Lt.xhr ? Lt.xhr.send({
          url: xe.url,
          method: Fe,
          handleSuccess: xe.success,
          handleErr: xe.error
        }) : ei.ajax({
          url: xe.url,
          dataType: De,
          method: Ce,
          error: xe.error,
          success: xe.success
        }) : Lt && Lt.xhr ? Lt.xhr.doReq({
          url: xe.url,
          async: !1
        }) : ei.ajax({
          url: xe.url,
          async: !1,
          dataType: "text"
        }).responseText;
      }
    }, lt.ruleCache = {}, lt.Date = function () {
      var xe, Ce, De, Fe, Me, ze, rt, zt, mi;
      if (xe = "stri", xe += "ng", e.Z8b(), Ce = "[objec", Ce += "t A", Ce += "rray", Ce += "]", this === lt) throw "timezoneJS.Date object must be constructed with 'new'";
      switch (De = Array.prototype.slice.apply(arguments), Fe = null, Me = null, ze = [], rt = !1, Object.prototype.toString.call(De[0]) === Ce && (De = De[0]), typeof De[De.length - 1] === xe && (rt = Date.parse(De[De.length - 1].replace(/GMT[+-]\d+/, "")), (isNaN(rt) || rt === null) && (Me = De.pop())), zt = !1, De.length) {
        case 0:
          Fe = new Date();
          break;
        case 1:
          Fe = new Date(De[0]), typeof De[0] == "string" && De[0].search(/[+-][0-9]{4}/) == -1 && De[0].search(/Z/) == -1 && De[0].search(/T/) == -1 && (zt = !0);
          break;
        case 2:
          e.n1T(29), Fe = new Date(De[e.B3B(0, "0")], De[1]), zt = !0;
          break;
        default:
          for (var xr = 0; xr < 7; xr++) ze[xr] = De[xr] || 0;
          Fe = new Date(ze[0], ze[1], ze[2], ze[3], ze[4], ze[5], ze[6]), zt = !0;
          break;
      }
      if (isNaN(Fe.getTime())) throw mi = "Inva", mi += "lid d", mi += "ate", new Error(mi);
      this._useCache = !1, this._tzInfo = {}, this._day = 0, this.year = 0, this.month = 0, this.date = 0, this.hours = 0, this.minutes = 0, this.seconds = 0, this.milliseconds = 0, this.timezone = Me || null, zt ? this.setFromDateObjProxy(Fe) : this.setFromTimeProxy(Fe.getTime(), Me);
    }, Jt.extend(lt.Date.prototype, {
      getDate: function () {
        return this.date;
      },
      getDay: function () {
        return this._day;
      },
      getFullYear: function () {
        return this.year;
      },
      getMonth: function () {
        return this.month;
      },
      getYear: function () {
        e.E3R(51);
        var xe = e.B3B(19000, 14, 264128, 2);
        return this.year - xe;
      },
      getHours: function () {
        return e.Z8b(), this.hours;
      },
      getMilliseconds: function () {
        return e.L1$(), this.milliseconds;
      },
      getMinutes: function () {
        return e.Z8b(), this.minutes;
      },
      getSeconds: function () {
        return e.Z8b(), this.seconds;
      },
      getUTCDate: function () {
        return e.L1$(), this.getUTCDateProxy().getUTCDate();
      },
      getUTCDay: function () {
        return this.getUTCDateProxy().getUTCDay();
      },
      getUTCFullYear: function () {
        return e.Z8b(), this.getUTCDateProxy().getUTCFullYear();
      },
      getUTCHours: function () {
        return e.Z8b(), this.getUTCDateProxy().getUTCHours();
      },
      getUTCMilliseconds: function () {
        return e.L1$(), this.getUTCDateProxy().getUTCMilliseconds();
      },
      getUTCMinutes: function () {
        return this.getUTCDateProxy().getUTCMinutes();
      },
      getUTCMonth: function () {
        return e.Z8b(), this.getUTCDateProxy().getUTCMonth();
      },
      getUTCSeconds: function () {
        return e.L1$(), this.getUTCDateProxy().getUTCSeconds();
      },
      getTime: function () {
        e.n1T(125);
        var xe = e.B3B(30, 10, 10, 30);
        e.n1T(1);
        var Ce = e.B3B(13, 1013);
        return this._timeProxy + this.getTimezoneOffset() * xe * Ce;
      },
      getTimezone: function () {
        return this.timezone;
      },
      getTimezoneOffset: function () {
        return e.L1$(), this.getTimezoneInfo().tzOffset;
      },
      getTimezoneAbbreviation: function () {
        return this.getTimezoneInfo().tzAbbr;
      },
      getTimezoneInfo: function () {
        var xe;
        return this._useCache ? this._tzInfo : (this.timezone ? xe = this.timezone === "Etc/UTC" || this.timezone === "Etc/GMT" ? {
          tzOffset: 0,
          tzAbbr: "UTC"
        } : lt.timezone.getTzInfo(this._timeProxy, this.timezone) : xe = {
          tzOffset: this.getLocalOffset(),
          tzAbbr: null
        }, this._tzInfo = xe, this._useCache = !0, xe);
      },
      getUTCDateProxy: function () {
        var xe;
        return xe = new Date(this._timeProxy), xe.setUTCMinutes(xe.getUTCMinutes() + this.getTimezoneOffset()), e.Z8b(), xe;
      },
      setDate: function (xe) {
        return this.setAttribute("date", xe), this.getTime();
      },
      setFullYear: function (xe, Ce, De) {
        var Fe, Me;
        return Fe = "ye", Fe += "a", Fe += "r", e.Z8b(), De !== void 0 && this.setAttribute("date", 1), this.setAttribute(Fe, xe), Ce !== void 0 && (Me = "m", Me += "ont", Me += "h", this.setAttribute(Me, Ce)), De !== void 0 && this.setAttribute("date", De), this.getTime();
      },
      setMonth: function (xe, Ce) {
        return e.Z8b(), this.setAttribute("month", xe), Ce !== void 0 && this.setAttribute("date", Ce), this.getTime();
      },
      setYear: function (xe) {
        return xe = Number(xe), 0 <= xe && xe <= 99 && (xe += 1900), this.setUTCAttribute("year", xe), e.Z8b(), this.getTime();
      },
      setHours: function (xe, Ce, De, Fe) {
        var Me, ze, rt;
        return Me = "h", Me += "ou", Me += "rs", this.setAttribute(Me, xe), Ce !== void 0 && this.setAttribute("minutes", Ce), De !== void 0 && (ze = "se", ze += "c", ze += "ond", ze += "s", this.setAttribute(ze, De)), e.Z8b(), Fe !== void 0 && (rt = "milliseco", rt += "nds", this.setAttribute(rt, Fe)), this.getTime();
      },
      setMinutes: function (xe, Ce, De) {
        var Fe, Me;
        return e.Z8b(), Fe = "mi", Fe += "nu", Fe += "tes", this.setAttribute(Fe, xe), Ce !== void 0 && (Me = "s", Me += "eco", Me += "nd", Me += "s", this.setAttribute(Me, Ce)), De !== void 0 && this.setAttribute("milliseconds", De), this.getTime();
      },
      setSeconds: function (xe, Ce) {
        return e.L1$(), this.setAttribute("seconds", xe), Ce !== void 0 && this.setAttribute("milliseconds", Ce), this.getTime();
      },
      setMilliseconds: function (xe) {
        return this.setAttribute("milliseconds", xe), this.getTime();
      },
      setTime: function (xe) {
        var Ce;
        if (isNaN(xe)) throw Ce = "Uni", Ce += "ts must ", Ce += "be ", Ce += "a number.", new Error(Ce);
        return this.setFromTimeProxy(xe, this.timezone), this.getTime();
      },
      setUTCFullYear: function (xe, Ce, De) {
        var Fe, Me, ze;
        return Fe = "yea", Fe += "r", De !== void 0 && (Me = "da", Me += "t", Me += "e", this.setUTCAttribute(Me, 1)), this.setUTCAttribute(Fe, xe), Ce !== void 0 && this.setUTCAttribute("month", Ce), De !== void 0 && (ze = "dat", ze += "e", this.setUTCAttribute(ze, De)), this.getTime();
      },
      setUTCMonth: function (xe, Ce) {
        return this.setUTCAttribute("month", xe), Ce !== void 0 && this.setUTCAttribute("date", Ce), e.L1$(), this.getTime();
      },
      setUTCDate: function (xe) {
        var Ce;
        return Ce = "da", Ce += "te", this.setUTCAttribute(Ce, xe), this.getTime();
      },
      setUTCHours: function (xe, Ce, De, Fe) {
        return this.setUTCAttribute("hours", xe), Ce !== void 0 && this.setUTCAttribute("minutes", Ce), De !== void 0 && this.setUTCAttribute("seconds", De), Fe !== void 0 && this.setUTCAttribute("milliseconds", Fe), this.getTime();
      },
      setUTCMinutes: function (xe, Ce, De) {
        var Fe, Me;
        return this.setUTCAttribute("minutes", xe), Ce !== void 0 && (Fe = "s", Fe += "ec", Fe += "onds", this.setUTCAttribute(Fe, Ce)), De !== void 0 && (Me = "mil", Me += "l", Me += "isecond", Me += "s", this.setUTCAttribute(Me, De)), this.getTime();
      },
      setUTCSeconds: function (xe, Ce) {
        var De;
        return e.Z8b(), this.setUTCAttribute("seconds", xe), Ce !== void 0 && (De = "mill", De += "iseconds", this.setUTCAttribute(De, Ce)), this.getTime();
      },
      setUTCMilliseconds: function (xe) {
        return this.setUTCAttribute("milliseconds", xe), this.getTime();
      },
      setFromDateObjProxy: function (xe) {
        this.year = xe.getFullYear(), this.month = xe.getMonth(), this.date = xe.getDate(), this.hours = xe.getHours(), this.minutes = xe.getMinutes(), this.seconds = xe.getSeconds(), e.L1$(), this.milliseconds = xe.getMilliseconds(), this._day = xe.getDay(), this._dateProxy = xe, this._timeProxy = Date.UTC(this.year, this.month, this.date, this.hours, this.minutes, this.seconds, this.milliseconds), this._useCache = !1;
      },
      setFromTimeProxy: function (xe, Ce) {
        var De, Fe;
        e.L1$(), De = new Date(xe), Fe = Ce ? lt.timezone.getTzInfo(xe, Ce, !0).tzOffset : De.getTimezoneOffset(), De.setTime(xe + (De.getTimezoneOffset() - Fe) * 60000), this.setFromDateObjProxy(De);
      },
      setAttribute: function (xe, Ce) {
        var De, Fe, Me;
        if (De = "Fu", De += "llY", De += "e", De += "ar", isNaN(Ce)) throw new Error("Units must be a number.");
        Fe = this._dateProxy, Me = xe === "year" ? De : xe.substr(0, 1).toUpperCase() + xe.substr(1), Fe["set" + Me](Ce), this.setFromDateObjProxy(Fe);
      },
      setUTCAttribute: function (xe, Ce) {
        var De, Fe, Me;
        if (De = "Full", De += "Year", isNaN(Ce)) throw new Error("Units must be a number.");
        Fe = xe === "year" ? De : xe.substr(0, 1).toUpperCase() + xe.substr(1), Me = this.getUTCDateProxy(), Me["setUTC" + Fe](Ce), Me.setUTCMinutes(Me.getUTCMinutes() - this.getTimezoneOffset()), this.setFromTimeProxy(Me.getTime() + this.getTimezoneOffset() * 60000, this.timezone);
      },
      setTimezone: function (xe) {
        var Ce;
        e.L1$(), Ce = this.getTimezoneInfo().tzOffset, this.timezone = xe, this._useCache = !1, this.setUTCMinutes(this.getUTCMinutes() - this.getTimezoneInfo().tzOffset + Ce);
      },
      removeTimezone: function () {
        this.timezone = null, this._useCache = !1;
      },
      valueOf: function () {
        return e.L1$(), this.getTime();
      },
      clone: function () {
        return e.L1$(), this.timezone ? new lt.Date(this.getTime(), this.timezone) : new lt.Date(this.getTime());
      },
      toGMTString: function () {
        var xe;
        return xe = "EEE, dd MMM yyyy HH:m", xe += "m:s", xe += "s Z", this.toString(xe, "Etc/GMT");
      },
      toLocaleStringIntl: function () {},
      toLocaleDateString: function () {},
      toLocaleTimeString: function () {},
      toSource: function () {},
      toISOString: function () {
        var xe;
        xe = "Etc", xe += "/", xe += "UT", xe += "C", e.E3R(126), e.W6G(94092, 6, 47046, 7833), e.E3R(1);
        var Ce = e.W6G(39156, 45682);
        e.n1T(46);
        var De = e.W6G(8, 1, 4733, 33134);
        e.n1T(13), e.W6G(2296, 16, 3420), e.n1T(127);
        var Fe = e.B3B(4, 1060, 19, 75260);
        e.E3R(1);
        var Me = e.W6G(5, 3891);
        e.E3R(53);
        var ze = e.W6G(20, 61677, 18, 1227915);
        e.E3R(32);
        var rt = e.B3B(26, 10, 4);
        return this.toString("yyyy-MM-ddTHH:mm:ss.SSS", xe) + (Ce >= 196 ? De >= Fe ? Me : ze > 9655 ? "0x373" | rt : "Z" : "Z");
      },
      toJSON: function () {
        return this.toISOString();
      },
      toDateString: function () {
        return this.toString("EEE MMM dd yyyy");
      },
      toTimeString: function () {
        var xe;
        return xe = "H:", xe += "mm k", this.toString(xe);
      },
      toString: function (xe, Ce) {
        var De, Fe, Me, ze;
        return xe || (xe = "yyyy-MM-ddTHH:mm:ss.SSS"), De = xe, Fe = Ce ? lt.timezone.getTzInfo(this.getTime(), Ce) : this.getTimezoneInfo(), Me = this, Ce && (Me = this.clone(), Me.setTimezone(Ce)), ze = Me.getHours(), De.replace(/a+/g, function () {
          return e.L1$(), "k";
        }).replace(/y+/g, function (rt) {
          return ti(Me.getFullYear(), rt.length);
        }).replace(/d+/g, function (rt) {
          return e.Z8b(), ti(Me.getDate(), rt.length);
        }).replace(/m+/g, function (rt) {
          return ti(Me.getMinutes(), rt.length);
        }).replace(/s+/g, function (rt) {
          return e.Z8b(), ti(Me.getSeconds(), rt.length);
        }).replace(/S+/g, function (rt) {
          return e.L1$(), ti(Me.getMilliseconds(), rt.length);
        }).replace(/h+/g, function (rt) {
          return e.L1$(), ti(ze % 12 === 0 ? 12 : ze % 12, rt.length);
        }).replace(/M+/g, function (rt) {
          var zt, mi;
          return zt = Me.getMonth(), mi = rt.length, mi > 3 ? lt.Months[zt] : mi > 2 ? lt.Months[zt].substring(0, mi) : (e.n1T(0), ti(e.W6G(1, zt), mi));
        }).replace(/k+/g, function () {
          var rt, zt;
          return rt = "A", rt += "M", ze >= 12 ? (zt = "P", zt += "M", ze > 12 && (ze -= 12), zt) : rt;
        }).replace(/H+/g, function (rt) {
          return e.L1$(), ti(ze, rt.length);
        }).replace(/E+/g, function (rt) {
          return e.L1$(), di[Me.getDay()].substring(0, rt.length);
        }).replace(/Z+/gi, function () {
          return Fe.tzAbbr;
        });
      },
      toUTCString: function () {
        return e.L1$(), this.toGMTString();
      },
      civilToJulianDayNumber: function (xe, Ce, De) {
        var Fe, Me, ze;
        Ce++, Ce > 12 && (e.E3R(7), Fe = parseInt(e.B3B(Ce, 12), 10), e.E3R(72), Ce = e.W6G(Ce, 12), xe += Fe), Ce <= 2 && (xe -= 1, Ce += 12), e.E3R(7), Fe = Math.floor(e.B3B(xe, 100)), e.E3R(128);
        var rt = e.B3B(10, 13, 5);
        Me = rt - Fe + Math.floor(Fe / 4), e.n1T(13);
        var zt = e.B3B(13, 9, 4720);
        e.E3R(109);
        var mi = e.W6G(30, 2, 15, 0, 14);
        e.n1T(117);
        var xr = e.W6G(1508, 14, 25, 5);
        return ze = Math.floor(365.25 * (xe + zt)) + Math.floor(30.6001 * (Ce + mi)) + De + Me - xr, ze;
      },
      getLocalOffset: function () {
        return this._dateProxy.getTimezoneOffset();
      }
    }, !0), lt.timezone = new function () {
      var xe, Ce, De, Fe, Me, ze, rt, zt, mi, xr, zr, Wr, Xr, Vr, Kr, Jr, vt, is, rs;
      xe = "euro", xe += "p", xe += "e", Ce = "et";
      function as(qe, Ie) {
        return e.n1T(1), e.Z8b(), -Math.ceil(e.W6G(qe, Ie));
      }
      Ce += "cetera", De = "austral", De += "asi", De += "a", Fe = "eur", Fe += "o", Fe += "p", Fe += "e", Me = "eur", Me += "o", Me += "p", Me += "e";
      function pl(qe) {
        var Ie, Se, We, Oe;
        if (qe[3]) return Ie = parseInt(qe[3], 10), Se = 11, We = 31, qe[4] && (Se = pi[qe[4].substr(0, 3)], We = parseInt(qe[5], 10) || 1), Oe = qe[6] ? ta(qe[6]) : [0, 0, 0], [Ie, Se, We, Oe[0], Oe[1], Oe[2]];
      }
      ze = "euro";
      function ns(qe) {
        throw e.L1$(), e.E3R(31), new Error(e.W6G("' is either incorrect, or not loaded in the timezone registry.", qe, "Timezone '"));
      }
      function ml(qe, Ie, Se, We) {
        var Oe, Xe, It, li, tr, Ri, kr, Mr, Ar, ia, ra, Ur, lr, Br, Zr, Fr;
        if (Oe = "n", Oe += "umbe", Oe += "r", Xe = typeof qe === Oe ? new Date(qe) : qe, It = Ie[1], li = Ie[0], tr = It.match(/^([0-9]):([0-9][0-9])$/), tr) {
          Ri = "J", Ri += "a", Ri += "n", kr = "m", kr += "a", kr += "x", e.E3R(0);
          var vl = e.B3B(9, 1);
          e.n1T(126);
          var yl = e.W6G(12, 16, 3, 40);
          e.E3R(129);
          var bl = e.W6G(1, 17, 13, 2);
          e.E3R(0);
          var Cl = e.W6G(9, 1);
          return e.E3R(19), [-1000000, kr, "-", Ri, 1, [0, 0, e.B3B(0, "0")], parseInt(tr[1], vl) * yl + parseInt(tr[bl], Cl), "-"];
        }
        if (Mr = function (Wt, yt, Ut) {
          var ct, Dt;
          if (e.n1T(29), ct = e.W6G(64, "0"), yt === "u" || yt === "g" || yt === "z") e.E3R(37), ct = e.W6G(0, "0");else if (yt === "s") ct = li;else if (yt === "w" || !yt) ct = as(li, Ut[6]);else throw Dt = "unknown typ", Dt += "e ", e.E3R(0), new Error(e.W6G(yt, Dt));
          return e.E3R(2), ct *= e.W6G(1000, 60), new Date(Wt.getTime() + ct);
        }, Ar = function (Wt, yt) {
          var Ut, ct, Dt, Xt, vr, Fi, vi, aa, Hr;
          return Ut = Wt[0], ct = Wt[1], Dt = ct[5], e.Z8b(), Yt[Ut] || (Yt[Ut] = {}), Yt[Ut][ct] ? Xt = Yt[Ut][ct] : (isNaN(ct[4]) ? (vr = "la", vr += "s", vr += "t", ct[4].substr(0, 4) === vr ? (aa = "<", aa += "=", Xt = new Date(Date.UTC(Ut, pi[ct[3]] + 1, 1, Dt[0] - 24, Dt[1], Dt[2], 0)), Fi = Hi[ct[4].substr(4, 3)], vi = aa) : (Xt = new Date(Date.UTC(Ut, pi[ct[3]], ct[4].substr(5), Dt[0], Dt[1], Dt[2], 0)), Fi = Hi[ct[4].substr(0, 3)], vi = ct[4].substr(3, 2)), Hr = Xt.getUTCDay(), vi === ">=" ? Xt.setUTCDate(Xt.getUTCDate() + (Fi - Hr + (Fi < Hr ? 7 : 0))) : Xt.setUTCDate(Xt.getUTCDate() + (Fi - Hr - (Fi > Hr ? 7 : 0)))) : Xt = new Date(Date.UTC(Ut, pi[ct[3]], ct[4], Dt[0], Dt[1], Dt[2], 0)), Yt[Ut][ct] = Xt), yt && (Xt = Mr(Xt, Dt[3], yt)), Xt;
        }, ia = function (Wt, yt) {
          var Ut, ct, Dt, Xt, vr;
          Ut = 1670062876, ct = -1303779376, Dt = 2;
          for (var Fi = 1; e.Q_(Fi.toString(), Fi.toString().length, 48644) !== Ut; Fi++) Xt = [], Dt += 2;
          e.o0(Dt.toString(), Dt.toString().length, 52058) !== ct && (Xt = []);
          for (var vi = 0; yt && vi < yt.length; vi++) vr = "o", vr += "nly", yt[vi][0] <= Wt && (yt[vi][1] >= Wt || yt[vi][0] === Wt && yt[vi][1] === vr || yt[vi][1] === "max") && Xt.push([Wt, yt[vi]]);
          return Xt;
        }, e.Z8b(), ra = function (Wt, yt, Ut) {
          var ct, Dt, Xt, vr, Fi;
          Wt instanceof Date ? Ut && (Wt = Mr(Wt, Se ? "u" : "w", Ut)) : (ct = Wt[0], Dt = Wt[1], Wt = !Ut && Yt[ct] && Yt[ct][Dt] ? Yt[ct][Dt] : Ar(Wt, Ut)), yt instanceof Date ? Ut && (yt = Mr(yt, Se ? "u" : "w", Ut)) : (ct = yt[0], Dt = yt[1], yt = !Ut && Yt[ct] && Yt[ct][Dt] ? Yt[ct][Dt] : Ar(yt, Ut)), e.n1T(1), Xt = e.B3B(0, "1157621632"), vr = 820427953, e.Z8b(), Fi = 2;
          for (var vi = 1; e.Q_(vi.toString(), vi.toString().length, 89689) !== Xt; vi++) Wt = Number(Wt), yt = Number(yt), Fi += 2;
          return e.o0(Fi.toString(), Fi.toString().length, 76928) !== vr && (Wt = Number(Wt), yt = Number(yt)), e.n1T(1), e.W6G(yt, Wt);
        }, Ur = Xe.getUTCFullYear(), Br = lt.ruleCache[We], Br || (Br = lt.ruleCache[We] = {}), lr = Br[Ur], lr || (e.E3R(1), lr = ia(e.W6G(1, Ur), vt.rules[It]), lr = lr.concat(ia(Ur, vt.rules[It])), lr.sort(ra), Br[Ur] = lr), !lr || !lr.length) return null;
        for (var Or = lr.length - 1; Or >= 0; Or--) if (Or > 0 ? (e.n1T(1), Zr = lr[e.W6G(1, Or)][1]) : Zr = null, Fr = lr[Or], Fr[2] || (Fr[2] = Ar(Fr, Zr)), ra(Xe, Fr, Zr) >= 0) return Fr[1];
        return null;
      }
      ze += "pe", rt = "eur", rt += "op", rt += "e";
      function gl(qe, Ie) {
        e.Z8b();
        var Se, We, Oe, Xe;
        return Se = "%", Se += "s", We = qe[2], We.indexOf(Se) > -1 ? (Oe = "%", Oe += "s", Ie ? Xe = Ie[7] === "-" ? "" : Ie[7] : Xe = "S", We.replace(Oe, Xe)) : We.indexOf("/") > -1 ? We.split("/", 2)[Ie && Ie[6] ? 1 : 0] : We;
      }
      zt = "eu", zt += "r", zt += "o", zt += "pe", mi = "e";
      function ss(qe) {
        var Ie, Se;
        Ie = ta(qe), Se = qe.charAt(0) === "-" ? -1 : 1, e.n1T(111);
        var We = e.W6G(61, 5, 900, 225);
        e.E3R(13);
        var Oe = e.W6G(9, 6, 4);
        e.n1T(130);
        var Xe = e.W6G(2082, 17, 9, 9, 15);
        e.n1T(53);
        var It = e.B3B(4, 30, 8, 110);
        e.n1T(61);
        var li = e.B3B(12033, 13, 13000, 20);
        return Ie = Se * (((Ie[0] * We + Ie[Oe]) * Xe + Ie[It]) * li), e.E3R(131), e.B3B(Ie, 1000, 60);
      }
      mi += "uro", mi += "pe", xr = "australa", xr += "s", xr += "ia", zr = "a";
      function xl(qe, Ie) {
        var Se;
        e.E3R(132);
        var We = e.B3B(3, 111, 162);
        e.n1T(55);
        var Oe = e.W6G(21912, 131488, 8212, 16);
        e.n1T(103);
        var Xe = e.B3B(51975, 9, 55456, 6);
        return Se = vt.zoneFileBasePath + (We === Oe ? Xe : "/") + qe, !Ie || !Ie.async ? vt.parseZones(vt.transport({
          url: Se,
          async: !1
        })) : vt.transport({
          async: !0,
          url: Se,
          success: function (It) {
            var li;
            return li = "f", li += "unction", vt.parseZones(It) && typeof Ie.callback === li && Ie.callback();
          },
          error: function () {
            var It;
            throw It = "' zone", It += "in", It += "f", It += "o files", e.n1T(31), e.Z8b(), new Error(e.W6G(It, Se, "Error retrieving '"));
          }
        });
      }
      zr += "si", zr += "a", Wr = "a";
      function Gr(qe) {
        var Ie, Se, We, Oe, Xe;
        if (Ie = rs[qe], Ie) return Ie;
        if (Se = qe.split("/")[e.B3B(0, "0", e.n1T(29))], We = is[Se], We) return We;
        if (Oe = vt.zones[qe], typeof Oe == "string") return Gr(Oe);
        if (!vt.loadedZones.backward) return Xe = "bac", Xe += "kwa", Xe += "r", Xe += "d", vt.loadZoneFile(Xe), Gr(qe);
        e.L1$(), ns(qe);
      }
      Wr += "ustralasi", Wr += "a", Xr = "afric", Xr += "a", Vr = "n", Vr += "or", Vr += "thameri", Vr += "ca", Kr = "northameric", Kr += "a", Jr = "etcet", Jr += "era", vt = this, is = {
        Etc: Jr,
        EST: "northamerica",
        MST: "northamerica",
        HST: "northamerica",
        EST5EDT: Kr,
        CST6CDT: Vr,
        MST7MDT: "northamerica",
        PST8PDT: "northamerica",
        America: ["northamerica", "southamerica"],
        Pacific: "australasia",
        Atlantic: "europe",
        Africa: "africa",
        Indian: Xr,
        Antarctica: "antarctica",
        Asia: "asia",
        Australia: Wr,
        Europe: "europe",
        WET: "europe",
        CET: "europe",
        MET: "europe",
        EET: "europe"
      }, rs = {
        "Pacific/Honolulu": "northamerica",
        "Atlantic/Bermuda": "northamerica",
        "Atlantic/Cape_Verde": "africa",
        "Atlantic/St_Helena": "africa",
        "Indian/Kerguelen": "antarctica",
        "Indian/Chagos": "asia",
        "Indian/Maldives": zr,
        "Indian/Christmas": xr,
        "Indian/Cocos": "australasia",
        "America/Danmarkshavn": "europe",
        "America/Scoresbysund": "europe",
        "America/Godthab": "europe",
        "America/Thule": mi,
        "Asia/Istanbul": "europe",
        "Asia/Yekaterinburg": "europe",
        "Asia/Omsk": zt,
        "Asia/Novosibirsk": "europe",
        "Asia/Krasnoyarsk": rt,
        "Asia/Irkutsk": ze,
        "Asia/Yakutsk": Me,
        "Asia/Vladivostok": "europe",
        "Asia/Sakhalin": Fe,
        "Asia/Magadan": "europe",
        "Asia/Kamchatka": "europe",
        "Asia/Anadyr": "europe",
        "Africa/Ceuta": "europe",
        GMT: "etcetera",
        "Europe/Nicosia": "asia"
      }, this.zoneFileBasePath = null, this.zoneFiles = ["africa", "antarctica", "asia", De, "backward", Ce, xe, "northamerica", "pacificnew", "southamerica"], this.loadingSchemes = {
        PRELOAD_ALL: "preloadAll",
        LAZY_LOAD: "lazyLoad",
        MANUAL_LOAD: "manualLoad"
      }, this.getRegionForTimezone = Gr, this.loadingScheme = this.loadingSchemes.LAZY_LOAD, this.loadedZones = {};
      function ea(qe, Ie) {
        e.Z8b();
        var Se, We, Oe, Xe, It, li, tr, Ri, kr;
        for (Se = "nu", Se += "mber", We = typeof qe === Se ? qe : new Date(+qe).getTime(), Oe = Ie, Xe = vt.zones[Oe]; typeof Xe == "string";) Oe = Xe, Xe = vt.zones[Oe];
        if (!Xe) {
          if (vt.loadedZones.backward) {
            if (Oe && Oe !== Ie) return vt.lazyLoadZoneFiles(Oe), ea(qe, Oe);
          } else {
            It = 1707983578, li = 1049167361, tr = 2;
            for (var Mr = 1; e.o0(Mr.toString(), Mr.toString().length, 57358) !== It; Mr++) vt.loadZoneFile(""), tr += 2;
            return e.o0(tr.toString(), tr.toString().length, 8852) !== li && vt.loadZoneFile("backward"), ea(qe, Ie);
          }
          ns(Oe);
        }
        if (Xe.length === 0) throw Ri = "No Zone fou", Ri += "nd", Ri += " ", Ri += "for '", e.E3R(43), new Error(e.B3B(qe, Ri, "' on ", Ie));
        for (var Ar = Xe.length - 1; Ar >= 0 && (kr = Xe[Ar], !(kr[3] && We > kr[3])); Ar--);
        return e.E3R(0), Xe[e.B3B(1, Ar)];
      }
      this.zones = {}, this.rules = {}, this.init = function (qe) {
        var Ie, Se, We;
        Ie = "northa", Ie += "m", Ie += "erica", Se = {
          async: !0
        }, We = this.loadingScheme === this.loadingSchemes.PRELOAD_ALL ? this.zoneFiles : this.defaultZoneFile || Ie;
        for (var Oe in qe) Se[Oe] = qe[Oe];
        return this.loadZoneFiles(We, Se);
      }, this.loadZoneFiles = function (qe, Ie) {
        e.L1$();
        var Se, We;
        if (e.E3R(37), We = e.B3B(0, "0"), typeof qe == "string") return this.loadZoneFile(qe, Ie);
        Ie = Ie || {}, Se = Ie.callback, Ie.callback = function () {
          We++, We === qe.length && typeof Se == "function" && Se();
        };
        for (var Oe = 0; Oe < qe.length; Oe++) this.loadZoneFile(qe[Oe], Ie);
      }, this.loadZoneFile = function (qe, Ie) {
        var Se;
        if (Se = "un", Se += "de", Se += "f", Se += "ined", typeof this.zoneFileBasePath === Se) throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");
        if (!this.loadedZones[qe]) return this.loadedZones[qe] = !0, e.L1$(), xl(qe, Ie);
      }, this.loadZoneJSONData = function (qe, Ie) {
        e.Z8b();
        var Se;
        return Se = function (We) {
          We = JSON.parse(We);
          for (var Oe in We.zones) vt.zones[Oe] = We.zones[Oe];
          for (var Xe in We.rules) vt.rules[Xe] = We.rules[Xe];
        }, Ie ? Se(vt.transport({
          url: qe,
          async: !1
        })) : vt.transport({
          url: qe,
          success: Se
        });
      }, this.loadZoneDataFromObject = function (qe) {
        if (qe) {
          for (var Ie in qe.zones) vt.zones[Ie] = qe.zones[Ie];
          for (var Se in qe.rules) vt.rules[Se] = qe.rules[Se];
        }
      }, this.getAllZones = function () {
        var qe;
        qe = [];
        for (var Ie in this.zones) qe.push(Ie);
        return qe.sort();
      }, this.parseZones = function (qe) {
        e.L1$();
        var Ie, Se, We, Oe, Xe, It, li, tr;
        if (!qe) return !1;
        Ie = qe.split(`
`), Se = [], We = "", Xe = null, It = null;
        for (var Ri = 0; Ri < Ie.length; Ri++) if (Oe = Ie[Ri], Oe.match(/^\s/) && (li = "Z", li += "o", li += "ne", li += " ", e.E3R(31), Oe = e.W6G(Oe, Xe, li)), Oe = Oe.split("#")[0], Oe.length > 3) switch (Se = Oe.split(/\s+/), We = Se.shift(), We) {
          case "Zone":
            if (Xe = Se.shift(), vt.zones[Xe] || (vt.zones[Xe] = []), Se.length < 3) break;
            Se.splice(3, Se.length, pl(Se)), Se[3] && (Se[3] = Date.UTC.apply(null, Se[3])), Se[0] = -ss(Se[0]), vt.zones[Xe].push(Se);
            break;
          case "Rule":
            It = Se.shift(), vt.rules[It] || (vt.rules[It] = []), Se[0] = parseInt(Se[0], 10), Se[1] = parseInt(Se[1], 10) || Se[1], Se[5] = ta(Se[5]), Se[6] = ss(Se[6]), vt.rules[It].push(Se);
            break;
          case "Link":
            if (vt.zones[Se[1]]) {
              tr = ". Cannot create link of a preexisted zone", tr += ".", e.n1T(18);
              var kr = e.B3B(4, 5);
              throw new Error("Error with Link " + Se[kr] + tr);
            }
            isNaN(Se[0]) ? vt.zones[Se[1]] = Se[0] : vt.zones[Se[1]] = parseInt(Se[0], 10);
            break;
        }
        return !0;
      }, this.transport = Nr, this.getTzInfo = function (qe, Ie, Se) {
        var We, Oe, Xe, It;
        return this.lazyLoadZoneFiles(Ie), We = ea(qe, Ie), Oe = +We[0], e.L1$(), Xe = ml(qe, We, Se, Ie), Xe && (Oe = as(Oe, Xe[6])), It = gl(We, Xe), {
          tzOffset: Oe,
          tzAbbr: It
        };
      }, this.lazyLoadZoneFiles = function (qe) {
        var Ie;
        if (e.L1$(), this.loadingScheme === this.loadingSchemes.LAZY_LOAD) {
          if (Ie = Gr(qe), !Ie) throw new Error("Not a valid timezone ID.");
          this.loadZoneFiles(Ie);
        }
      };
      function ta(qe) {
        var Ie, Se;
        return Ie = /(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/, Se = qe.match(Ie), Se[1] = parseInt(Se[1], 10), Se[2] = Se[2] ? parseInt(Se[2], 10) : 0, Se[3] = Se[3] ? parseInt(Se[3], 10) : 0, Se.slice(1, 5);
      }
    }();
  }.call(typeof window < "u" ? window : void 0), lt.timezone.loadingScheme = lt.timezone.loadingSchemes.MANUAL_LOAD, lt.timezone.loadZoneDataFromObject({
    zones: {
      "Atlantic/Cape_Verde": [[60, "-", ar, null]],
      "Africa/Cairo": [[-120, "Egypt", rr, null]],
      "Africa/Nairobi": [[-180, "-", "EAT", null]],
      "Africa/Casablanca": [[0, cr, "+00/+01", 1540695600000], [-60, "Morocco", "+01/+00", null]],
      "Africa/Windhoek": [[-120, "Namibia", "%s", null]],
      "Africa/Johannesburg": [[-120, Si, "SAST", null]],
      "Africa/Tunis": [[-60, xi, "CE%sT", null]],
      "Antarctica/Troll": [[0, "Troll", "%s", null]],
      "Asia/Kabul": [[-270, "-", "+0430", null]],
      "Asia/Baku": [[-240, "Azer", "+04/+05", null]],
      "Asia/Dhaka": [[-360, "Dhaka", "+06/+07", null]],
      "Asia/Yangon": [[-390, "-", "+0630", null]],
      "Asia/Shanghai": [[-480, oi, ur, null]],
      "Asia/Hong_Kong": [[-480, "HK", Ci, null]],
      "Asia/Taipei": [[-480, "Taiwan", ir, null]],
      "Asia/Nicosia": [[-120, Pi, gi, null]],
      "Asia/Kolkata": [[-330, "-", "IST", null]],
      "Asia/Tehran": [[-210, Ei, "+0330/+0430", null]],
      "Asia/Jerusalem": [[-120, "Zion", "I%sT", null]],
      "Asia/Tokyo": [[-540, "Japan", "J%sT", null]],
      "Asia/Amman": [[-120, bi, ci, null]],
      "Asia/Almaty": [[-360, "-", yi, null]],
      "Asia/Seoul": [[-540, "ROK", "K%sT", null]],
      "Asia/Pyongyang": [[-510, "-", "KST", 1525476600000], [-540, "-", "KST", null]],
      "Asia/Beirut": [[-120, "Lebanon", Pt, null]],
      "Asia/Kuala_Lumpur": [[-480, "-", Zt, null]],
      "Asia/Hovd": [[-420, Gt, "+07/+08", null]],
      "Asia/Ulaanbaatar": [[-480, Et, "+08/+09", null]],
      "Asia/Kathmandu": [[-345, "-", "+0545", null]],
      "Asia/Karachi": [[-300, "Pakistan", "PK%sT", null]],
      "Asia/Hebron": [[-120, "Palestine", "EE%sT", null]],
      "Asia/Riyadh": [[-180, "-", it, null]],
      "Asia/Damascus": [[-120, "Syria", bt, null]],
      "Asia/Bangkok": [[-420, "-", nt, null]],
      "Asia/Dubai": [[-240, "-", Qe, null]],
      "Australia/Darwin": [[-570, "Aus", "AC%sT", null]],
      "Australia/Perth": [[-480, "AW", Ve, null]],
      "Australia/Eucla": [[-525, "AW", "+0845/+0945", null]],
      "Australia/Brisbane": [[-600, "AQ", "AE%sT", null]],
      "Australia/Adelaide": [[-570, ui, Nt, null]],
      "Australia/Hobart": [[-600, "AT", "AE%sT", null]],
      "Australia/Melbourne": [[-600, "AV", "AE%sT", null]],
      "Australia/Sydney": [[-600, "AN", "AE%sT", null]],
      "Australia/Lord_Howe": [[-630, "LH", "+1030/+11", null]],
      "Pacific/Fiji": [[-720, "Fiji", "+12/+13", null]],
      "Pacific/Guam": [[-600, "-", Ht, null]],
      "Pacific/Kiritimati": [[-840, "-", "+14", null]],
      "Pacific/Noumea": [[-660, "NC", "+11/+12", null]],
      "Pacific/Auckland": [[-720, hi, "NZ%sT", null]],
      "Pacific/Chatham": [[-765, Re, "+1245/+1345", null]],
      "Pacific/Pago_Pago": [[660, "-", "SST", null]],
      "Pacific/Apia": [[-780, "WS", "+13/+14", null]],
      "Pacific/Tongatapu": [[-780, "Tonga", Ft, null]],
      "Etc/UTC": [[0, "-", "UTC", null]],
      UTC: ri,
      "Europe/London": [[0, "EU", Tt, null]],
      "Europe/Dublin": [[0, "Eire", Kt, null]],
      WET: [[0, at, "WE%sT", null]],
      CET: [[-60, "C-Eur", "CE%sT", null]],
      MET: [[-60, Ct, "ME%sT", null]],
      EET: [[-120, _t, "EE%sT", null]],
      "Europe/Brussels": [[-60, "EU", "CE%sT", null]],
      "America/Thule": [[240, "Thule", ii, null]],
      "Europe/Helsinki": [[-120, St, Mt, null]],
      "Europe/Paris": [[-60, ot, "CE%sT", null]],
      "Europe/Berlin": [[-60, "EU", "CE%sT", null]],
      "Europe/Amsterdam": [[-60, "EU", "CE%sT", null]],
      "Atlantic/Azores": [[60, At, "-01/+00", null]],
      "Europe/Bucharest": [[-120, "EU", "EE%sT", null]],
      "Europe/Kaliningrad": [[-120, "-", "EET", null]],
      "Europe/Moscow": [[-180, "-", Ot, null]],
      "Europe/Volgograd": [[-180, "-", "+03", 1540692000000], [-240, "-", st, 1609034400000], [-180, "-", "+03", null]],
      "Europe/Samara": [[-240, "-", pt, null]],
      "Asia/Yekaterinburg": [[-300, "-", "+05", null]],
      "Asia/Omsk": [[-360, "-", Ye, null]],
      "Asia/Novosibirsk": [[-420, "-", "+07", null]],
      "Asia/Novokuznetsk": [[-420, "-", ut, null]],
      "Asia/Krasnoyarsk": [[-420, "-", tt, null]],
      "Asia/Irkutsk": [[-480, "-", "+08", null]],
      "Asia/Yakutsk": [[-540, "-", Ee, null]],
      "Asia/Vladivostok": [[-600, "-", "+10", null]],
      "Asia/Magadan": [[-660, "-", "+11", null]],
      "Asia/Srednekolymsk": [[-660, "-", xt, null]],
      "Asia/Kamchatka": [[-720, "-", ft, null]],
      "Europe/Belgrade": [[-60, et, "CE%sT", null]],
      "Europe/Sarajevo": gt,
      "Europe/Istanbul": [[-180, "-", "+03", null]],
      "America/New_York": [[300, "US", "E%sT", null]],
      "America/Chicago": [[360, "US", "C%sT", null]],
      "America/Denver": [[420, "US", "M%sT", null]],
      "America/Los_Angeles": [[480, "US", kt, null]],
      "America/Juneau": [[540, "US", "AK%sT", null]],
      "Pacific/Honolulu": [[600, "-", wt, null]],
      "America/Phoenix": [[420, "-", mt, null]],
      "America/St_Johns": [[210, "Canada", "N%sT", null]],
      "America/Halifax": [[240, "Canada", "A%sT", null]],
      "America/Regina": [[360, "-", je, null]],
      "America/Mexico_City": [[360, dt, Ge, null]],
      "America/Chihuahua": [[420, "Mexico", "M%sT", null]],
      "America/Costa_Rica": [[360, Ne, He, null]],
      "America/Havana": [[300, Ae, "C%sT", null]],
      "America/Port-au-Prince": [[300, "Haiti", "E%sT", null]],
      "America/Panama": [[300, "-", ke, null]],
      "America/Puerto_Rico": [[240, "-", "AST", null]],
      "America/Argentina/Buenos_Aires": [[180, "Arg", "-03/-02", null]],
      "America/Sao_Paulo": [[180, $e, "-03/-02", null]],
      "America/Santiago": [[240, "Chile", "-04/-03", null]],
      "America/Punta_Arenas": [[240, "Chile", "-04/-03", 1480809600000], [180, "-", "-03", null]],
      "America/Bogota": [[300, Je, "-05/-04", null]],
      "America/Asuncion": [[240, Ke, Ue, null]],
      "Atlantic/South_Georgia": [[120, "-", "-02", null]],
      "America/Montevideo": [[180, Be, "-03/-02", null]],
      "America/Caracas": [[240, "-", "-04", null]],
      "Europe/Athens": Le,
      "Europe/Simferopol": Pe,
      "Asia/Rangoon": "Asia/Yangon",
      "Atlantic/Reykjavik": "UTC",
      "Asia/Kuwait": "Asia/Riyadh",
      "Asia/Muscat": Te,
      "Asia/Istanbul": "Europe/Istanbul"
    },
    rules: {
      Egypt: [],
      Morocco: [[2013, 2018, "-", "Oct", "lastSun", [3, 0, 0, null], 0, "-"], [2014, 2018, "-", "Mar", "lastSun", [2, 0, 0, null], 60, "-"], [2017, "only", "-", we, "21", [3, 0, 0, null], 0, "-"], [2017, "only", "-", "Jul", "2", [2, 0, 0, null], 60, "-"], [2018, "only", "-", "May", "13", [3, 0, 0, null], 0, "-"], [2018, "only", "-", "Jun", ye, [2, 0, 0, null], 60, "-"], [2019, "only", "-", "May", "5", [3, 0, 0, null], -60, "-"], [2019, "only", "-", "Jun", "9", [2, 0, 0, null], 0, "-"], [2020, _e, "-", "Apr", "19", [3, 0, 0, null], -60, "-"], [2020, be, "-", "May", "31", [2, 0, 0, null], 0, "-"], [2021, "only", "-", "Apr", "11", [3, 0, 0, null], -60, "-"], [2021, ve, "-", "May", "16", [2, 0, 0, null], 0, "-"], [2022, ge, "-", "Mar", "27", [3, 0, 0, null], -60, "-"], [2022, pe, "-", "May", "8", [2, 0, 0, null], 0, "-"], [2023, "only", "-", "Mar", "19", [3, 0, 0, null], -60, "-"], [2023, fe, "-", he, "30", [2, 0, 0, null], 0, "-"], [2024, "only", "-", "Mar", "10", [3, 0, 0, null], -60, "-"], [2024, "only", "-", de, "14", [2, 0, 0, null], 0, "-"], [2025, "only", "-", "Feb", "23", [3, 0, 0, null], -60, "-"], [2025, "only", "-", re, "6", [2, 0, 0, null], 0, "-"]],
      Namibia: [[1994, 2017, "-", "Sep", ee, [2, 0, 0, null], 0, "CAT"], [1995, 2017, "-", "Apr", "Sun>=1", [2, 0, 0, null], -60, "WAT"]],
      SA: [],
      Tunisia: [],
      Troll: [[2005, Q, "-", ce, "lastSun", [1, 0, 0, "u"], 120, oe], [2004, ue, "-", "Oct", "lastSun", [1, 0, 0, "u"], 0, "+00"]],
      EUAsia: [[1981, "max", "-", le, ne, [1, 0, 0, "u"], 60, "S"], [1996, "max", "-", "Oct", se, [1, 0, 0, "u"], 0, "-"]],
      Azer: [],
      Dhaka: [],
      PRC: [],
      HK: [],
      Taiwan: [],
      Iran: [[2017, 2019, "-", "Mar", "21", [24, 0, 0, null], 60, "-"], [2017, 2019, "-", "Sep", "21", [24, 0, 0, null], 0, "-"], [2020, "only", "-", "Mar", "20", [24, 0, 0, null], 60, "-"], [2020, "only", "-", ae, "20", [24, 0, 0, null], 0, "-"], [2021, 2023, "-", "Mar", J, [24, 0, 0, null], 60, "-"], [2021, 2023, "-", "Sep", "21", [24, 0, 0, null], 0, "-"], [2024, j, "-", "Mar", "20", [24, 0, 0, null], 60, "-"], [2024, "only", "-", "Sep", ie, [24, 0, 0, null], 0, "-"], [2025, 2027, "-", "Mar", "21", [24, 0, 0, null], 60, "-"], [2025, 2027, "-", "Sep", "21", [24, 0, 0, null], 0, "-"]],
      Zion: [[2013, "max", "-", X, "Fri>=23", [2, 0, 0, null], 60, "D"], [2013, "max", "-", "Oct", Z, [2, 0, 0, null], 0, "S"]],
      Japan: [],
      Jordan: [[2014, "max", "-", "Mar", G, [24, 0, 0, null], 60, "S"], [2014, "max", "-", "Oct", "lastFri", [0, 0, 0, "s"], 0, "-"]],
      ROK: [],
      Lebanon: [[1993, "max", "-", W, "lastSun", [0, 0, 0, null], 60, "S"], [1999, z, "-", H, "lastSun", [0, 0, 0, null], 0, "-"]],
      Mongol: [],
      Pakistan: [],
      Palestine: [[2016, 2018, "-", "Mar", "Sat>=24", [1, 0, 0, null], 60, "S"], [2016, 2018, "-", "Oct", R, [1, 0, 0, null], 0, "-"], [2019, "only", "-", "Mar", "29", [0, 0, 0, null], 60, "S"], [2019, O, "-", "Oct", "Sat>=24", [0, 0, 0, null], 60, "-"], [2020, "max", "-", "Mar", "Sat>=24", [0, 0, 0, null], 60, "S"], [2020, B, "-", U, "Sat>=24", [1, 0, 0, null], 60, "-"]],
      Syria: [[2012, N, "-", L, "lastFri", [0, 0, 0, null], 60, "S"], [2009, "max", "-", "Oct", "lastFri", [0, 0, 0, null], 0, "-"]],
      Aus: [],
      AW: [],
      AQ: [],
      AS: [[2008, E, "-", "Apr", "Sun>=1", [2, 0, 0, "s"], 0, "S"], [2008, "max", "-", "Oct", A, [2, 0, 0, "s"], 60, "D"]],
      AT: [[2001, "max", "-", "Oct", "Sun>=1", [2, 0, 0, "s"], 60, "D"], [2008, V, "-", "Apr", "Sun>=1", [2, 0, 0, "s"], 0, "S"]],
      AV: [[2008, "max", "-", "Apr", "Sun>=1", [2, 0, 0, "s"], 0, "S"], [2008, "max", "-", "Oct", "Sun>=1", [2, 0, 0, "s"], 60, "D"]],
      AN: [[2008, "max", "-", _, P, [2, 0, 0, "s"], 0, "S"], [2008, "max", "-", "Oct", "Sun>=1", [2, 0, 0, "s"], 60, "D"]],
      LH: [[2008, "max", "-", "Apr", F, [2, 0, 0, null], 0, "-"], [2008, "max", "-", D, "Sun>=1", [2, 0, 0, null], 30, "-"]],
      Fiji: [[2014, 2018, "-", "Nov", "Sun>=1", [2, 0, 0, null], 60, "-"], [2015, "max", "-", "Jan", "Sun>=12", [3, 0, 0, null], 0, "-"], [2019, "only", "-", "Nov", "Sun>=8", [2, 0, 0, null], 60, "-"], [2020, "only", "-", T, w, [2, 0, 0, null], 60, "-"], [2021, "max", "-", "Nov", "Sun>=8", [2, 0, 0, null], 60, "-"]],
      NC: [],
      NZ: [[2007, "max", "-", S, "lastSun", [2, 0, 0, "s"], 60, "D"], [2008, "max", "-", "Apr", "Sun>=1", [2, 0, 0, "s"], 0, "S"]],
      Chatham: [[2007, "max", "-", "Sep", "lastSun", [2, 45, 0, "s"], 60, "-"], [2008, "max", "-", v, "Sun>=1", [2, 45, 0, "s"], 0, "-"]],
      WS: [[2012, "max", "-", "Apr", "Sun>=1", [4, 0, 0, null], 0, "-"], [2012, "max", "-", "Sep", I, [3, 0, 0, null], 60, "-"]],
      Tonga: [[2016, "only", "-", "Nov", "Sun>=1", [2, 0, 0, null], 60, "-"], [2017, M, "-", k, "Sun>=15", [3, 0, 0, null], 0, "-"]],
      Eire: [[1981, "max", "-", "Mar", "lastSun", [1, 0, 0, "u"], 0, "-"], [1996, "max", "-", "Oct", C, [1, 0, 0, "u"], -60, "-"]],
      EU: [[1981, "max", "-", "Mar", "lastSun", [1, 0, 0, "u"], 60, "S"], [1996, b, "-", "Oct", "lastSun", [1, 0, 0, "u"], 0, "-"]],
      "C-Eur": [[1981, "max", "-", y, "lastSun", [2, 0, 0, "s"], 60, "S"], [1996, "max", "-", "Oct", "lastSun", [2, 0, 0, "s"], 0, "-"]],
      Thule: [[2007, "max", "-", x, "Sun>=8", [2, 0, 0, null], 60, "D"], [2007, "max", "-", "Nov", "Sun>=1", [2, 0, 0, null], 0, "S"]],
      US: [[2007, "max", "-", "Mar", m, [2, 0, 0, null], 60, "D"], [2007, "max", "-", "Nov", "Sun>=1", [2, 0, 0, null], 0, "S"]],
      Canada: [[2007, "max", "-", "Mar", "Sun>=8", [2, 0, 0, null], 60, "D"], [2007, "max", "-", "Nov", "Sun>=1", [2, 0, 0, null], 0, "S"]],
      Mexico: [[2002, "max", "-", "Apr", "Sun>=1", [2, 0, 0, null], 60, "D"], [2002, p, "-", "Oct", g, [2, 0, 0, null], 0, "S"]],
      CR: [],
      Cuba: [[2012, "max", "-", "Nov", "Sun>=1", [0, 0, 0, "s"], 0, "S"], [2013, f, "-", d, c, [0, 0, 0, "s"], 60, "D"]],
      Haiti: [[2017, u, "-", l, "Sun>=8", [2, 0, 0, null], 60, "D"], [2017, h, "-", "Nov", "Sun>=1", [2, 0, 0, null], 0, "S"]],
      Arg: [],
      Brazil: [[2008, 2017, "-", o, "Sun>=15", [0, 0, 0, null], 60, "-"], [2016, 2019, "-", "Feb", "Sun>=15", [0, 0, 0, null], 0, "-"], [2018, s, "-", "Nov", "Sun>=1", [0, 0, 0, null], 60, "-"]],
      Chile: [[2016, 2018, "-", a, "Sun>=9", [3, 0, 0, "u"], 0, "-"], [2016, 2018, "-", "Aug", i, [4, 0, 0, "u"], 60, "-"], [2019, "max", "-", "Apr", r, [3, 0, 0, "u"], 0, "-"], [2019, "max", "-", "Sep", "Sun>=2", [4, 0, 0, "u"], 60, "-"]],
      CO: [],
      Para: [[2010, "max", "-", "Oct", n, [0, 0, 0, null], 60, "-"], [2013, "max", "-", "Mar", t, [0, 0, 0, null], 0, "-"]],
      Uruguay: []
    }
  });
};
Pa = q => {
  var e, t;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.ChartEngine.prototype.touchSingleClick = function (r, i, a) {
    te.Z8b();
    var s, o;
    return s = this, o = arguments, function () {
      te.Z8b(), function () {
        var h, l, u, c, d, f;
        if (!this.cancelTouchSingleClick) {
          if (h = "touchSing", h += "leClick", this.runPrepend(h, o) || this.editingAnnotation || (this.clicks = {
            s1MS: -1,
            e1MS: -1,
            s2MS: -1,
            e2MS: -1
          }, !this.displayCrosshairs) || !this.displayInitialized || this.openDialog !== "" || i < this.left || i > this.right || a < this.top || a > this.bottom) return;
          l = this.backOutY(e.ChartEngine.crosshairY), u = this.backOutX(e.ChartEngine.crosshairX), this.currentPanel = this.whichPanel(l), c = this.currentVectorParameters.vectorType, (!e.Drawing || !c || !e.Drawing[c] || !new e.Drawing[c]().dragToDraw) && (this.drawingClick(this.currentPanel, u, l) || n(this, i, a), this.currentVectorParameters.vectorType || (d = "t", d += "a", d += "p", f = this.activeMarker && this.activeMarker.click({
            cx: u,
            cy: l,
            panel: this.currentPanel
          }), f || this.dispatch(d, {
            stx: this,
            panel: this.currentPanel,
            x: u,
            y: l
          })));
        }
        this.runAppend("touchSingleClick", o);
      }.apply(s, o);
    };
  }, e.ChartEngine.prototype.touchDoubleClick = function (r, i, a) {
    var s, o;
    if (s = "double", s += "T", s += "ap", te.Z8b(), !this.runPrepend("touchDoubleClick", arguments) && !this.editingAnnotation) {
      if (e.ChartEngine.drawingLine) return this.undo();
      this.activeDrawing || (n(this, i, a), o = this.activeMarker && this.activeMarker.doubleClick({
        cx: i,
        cy: a,
        panel: this.currentPanel
      }), o || this.dispatch(s, {
        stx: this,
        finger: r,
        x: i,
        y: a
      }), this.runAppend("touchDoubleClick", arguments));
    }
  }, e.ChartEngine.prototype.startProxy = function (r) {
    if (this.touchPointerType = r.pointerType, this.touchPointerType != "touch") {
      this.mouseMode = !0;
      return;
    }
    this.mouseMode = !1, this.touches[this.touches.length] = {
      pointerId: r.pointerId,
      pageX: r.clientX,
      pageY: r.clientY,
      clientX: r.clientX,
      clientY: r.clientY
    }, this.changedTouches = [{
      pointerId: r.pointerId,
      pageX: r.clientX,
      pageY: r.clientY,
      clientX: r.clientX,
      clientY: r.clientY
    }], this.touches.length == 1 && (this.gesturePointerId = r.pointerId), this.touchstart(r);
  }, e.ChartEngine.prototype.moveProxy = function (r) {
    if (r.pointerType && r.pointerType != "touch") {
      this.mouseMode = !0;
      return;
    }
    this.mouseMode = !1, this.touchmove(r);
  };
  function n(r, i, a) {
    te.Z8b();
    var s;
    r.layout.crosshair || (e.ChartEngine.crosshairY = 0, e.ChartEngine.crosshairX = 0, r.cx = r.backOutX(0), r.cy = r.backOutY(0), r.findHighlights(null, !0), e.ChartEngine.crosshairY = a, e.ChartEngine.crosshairX = i, s = r.container.getBoundingClientRect(), r.top = s.top, r.left = s.left, r.right = r.left + r.width, r.bottom = r.top + r.height, r.cx = r.backOutX(i), r.cy = r.backOutY(a), r.currentPanel && r.currentPanel.chart.dataSet && (r.crosshairTick = r.tickFromPixel(r.cx, r.currentPanel.chart), r.crosshairValue = r.adjustIfNecessary(r.currentPanel, r.crosshairTick, r.valueFromPixel(r.cy, r.currentPanel))), r.headsUpHR()), r.findHighlights(!0), r.draw();
  }
  e.ChartEngine.prototype.endProxy = function (r) {
    var i;
    if (this.touchPointerType != "touch") {
      this.mouseMode = !0;
      return;
    }
    this.mouseMode = !1, i = this.touches.length;
    for (var a = 0; a < this.touches.length; a++) if (this.touches[a].pointerId == r.pointerId) {
      this.touches.splice(a, 1);
      break;
    }
    if (a == i) {
      this.touches = [], this.grabbingScreen = !1, this.touching = !1;
      return;
    }
    this.changedTouches = [{
      pointerId: r.pointerId,
      pageX: r.clientX,
      pageY: r.clientY,
      clientX: r.clientX,
      clientY: r.clientY
    }], this.touchend(r);
  }, e.ChartEngine.prototype.msMouseMoveProxy = function (r) {
    this.touches.length || !this.mouseMode || this.mousemove(r);
  }, e.ChartEngine.prototype.msMouseDownProxy = function (r) {
    te.Z8b(), this.mouseMode && this.mousedown(r);
  }, e.ChartEngine.prototype.msMouseUpProxy = function (r) {
    te.Z8b(), this.mouseMode && this.mouseup(r);
  }, e.ChartEngine.prototype.iosMouseMoveProxy = function (r) {
    this.touching || this.mousemove(r);
  }, e.ChartEngine.prototype.iosMouseDownProxy = function (r) {
    if (this.touching) {
      this.mouseMode = !1;
      return;
    }
    this.mouseMode = !0, this.mousedown(r);
  }, e.ChartEngine.prototype.iosMouseUpProxy = function (r) {
    this.touching || (te.L1$(), this.mouseup(r));
  }, e.ChartEngine.prototype.touchmove = function (r) {
    var i = te,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      B,
      O,
      R,
      H,
      z,
      W,
      G;
    if (a = "to", a += "uch", a += "m", a += "ove", s = "non", s += "e", !!this.displayInitialized && this.openDialog === "" && e.ChartEngine.ignoreTouch !== !0) {
      if (o = [], (!this.overYAxis || this.controls && this.controls.crossX && this.controls.crossX.style.display != s) && (r && r.preventDefault && r.cancelable && this.captureTouchEvents && r.preventDefault(), r && r.stopPropagation()), h = new Date().getTime(), this.clicks.s2MS == -1) {
        if (this.clicks.e1MS = h, this.clicks.e1MS - this.clicks.s1MS < 25) return;
      } else if (this.clicks.e2MS = h, this.clicks.e2MS - this.clicks.s2MS < 25) return;
      if (r.pointerType || (r.pointerType = this.touchPointerType), e.isSurface) {
        if (this.mouseMode) return;
        r.pointerId || (r.pointerId = this.gesturePointerId);
        for (var Z = 0; Z < this.touches.length; Z++) if (this.touches[Z].pointerId == r.pointerId) {
          if (l = Math.abs(this.touches[Z].pageX - r.clientX), u = Math.abs(this.touches[Z].pageY - r.clientY), i.E3R(36), c = Math.sqrt(i.B3B(u, l, u, l)), !c || (this.clicks.e1MS = new Date().getTime(), this.clicks.e1MS - this.clicks.s1MS < 50) || this.touches[Z].pageX == r.clientX && this.touches[Z].pageY == r.clientY) return;
          this.touches[Z].pageX = this.touches[Z].clientX = r.clientX, this.touches[Z].pageY = this.touches[Z].clientY = r.clientY;
          break;
        }
        if (Z === 0 ? this.movedPrimary = !0 : this.movedSecondary = !0, Z == this.touches.length) return;
        this.changedTouches = [{
          pointerId: r.pointerId,
          pageX: r.clientX,
          pageY: r.clientY,
          clientX: r.clientX,
          clientY: r.clientY
        }], o = this.touches.length ? this.touches : this.changedTouches;
      } else o = r.touches, this.changedTouches = r.changedTouches;
      if (!(o.length == 1 && Math.pow(this.clicks.x - o[0].clientX, 2) + Math.pow(this.clicks.y - o[0].clientY, 2) <= 16) && (d = this.crosshairXOffset, f = this.crosshairYOffset, g = this.currentVectorParameters.vectorType && this.currentVectorParameters.vectorType !== "", p = !this.layout.crosshair && !g && !this.touchNoPan, (r.pointerType == "pen" || p || this.activeDrawing && this.activeDrawing.name == "freeform") && (d = f = 0), !this.runPrepend(a, arguments))) {
        if (e.ChartEngine.resizingPanel) {
          y = o[0], m = y.clientX, x = y.clientY, i.n1T(0), this.mousemoveinner(i.B3B(d, m), i.W6G(f, x));
          return;
        }
        if (this.moveB != -1 && (this.touchMoveTime = new Date()), this.moveA = this.moveB, this.moveB = o[0].pageX, o.length == 1 && !this.twoFingerStart) C = o[0], m = C.clientX, x = C.clientY, this.pinchingScreen = 0, i.E3R(0), this.mousemoveinner(i.W6G(d, m), i.W6G(f, x)), k = this.whichPanel(x), M = this.xAxisAsFooter === !0 ? this.chart.canvasHeight : this.chart.panel.bottom, this.overXAxis = x <= this.top + M && x >= M - this.xaxisHeight + this.top && this.insideChart, k ? this.overYAxis = (m >= k.right || m <= k.left) && this.insideChart : this.overYAxis = !1;else if (o.length == 2 && this.allowZoom) {
          if (!this.displayCrosshairs) return;
          if (I = o[0], v = I.clientX, S = I.clientY, w = o[1], T = w.clientX, D = w.clientY, i.E3R(133), b = Math.sqrt(i.B3B(D, v, S, D, T, v, S, T)), this.pinchingCenter = (Math.min(v, T) - Math.max(v, T)) / 2, F = Math.round(this.gestureStartDistance - b), p && (this.pinchingScreen = 5), this.clearPixelCache(), this.pinchingScreen < 2) {
            if (e.isSurface && (!this.movedPrimary || !this.movedSecondary)) return;
            if (v < this.pt.x1 && T < this.pt.x2 || v > this.pt.x1 && T > this.pt.x2 || S < this.pt.y1 && D < this.pt.y2 || S > this.pt.y1 && D > this.pt.y2) this.pinchingScreen = 0;else if (this.pinchingScreen++, this.pinchingScreen < 2) return;
          }
          if (this.pt = {
            x1: v,
            x2: T,
            y1: S,
            y2: D
          }, this.pinchingScreen === 0) P = "p", P += "a", P += "n", this.grabMode = P, i.E3R(0), this.mousemoveinner(i.W6G(d, v), i.B3B(f, S)), this.gestureStartDistance = b;else {
            if (_ = Math.asin((Math.max(D, S) - Math.min(D, S)) / b), Math.abs(F) < 12 && !p) {
              if (this.moveCount++, this.moveCount == 4) {
                this.pinchingScreen = 0, this.moveCount = 0;
                return;
              }
            } else this.moveCount = 0;
            if (_ < 1 || !this.goneVertical && _ < 1.37) {
              if (!this.currentPanel) return;
              V = this.currentPanel.chart, this.goneVertical = !1, b = this.pt.x2 - this.pt.x1, A = this.grabStartValues.t2 - this.grabStartValues.t1, i.E3R(91);
              var X = i.B3B(1, 5, 33, 12, 9);
              if (E = this.grabStartValues.t1 + A / X, i.n1T(7), L = i.B3B(b, A), V.allowScrollFuture === !1 && V.allowScrollPast === !1 && (L = Math.max(L, V.width / V.dataSet.length)), N = this.layout.candleWidth, this.setCandleWidth(L, V), V.maxTicks < this.minimumZoomTicks) {
                this.setCandleWidth(N, V);
                return;
              }
              this.micropixels = 0, U = this.pixelFromTick(Math.round(E), V), i.E3R(20);
              var ie = i.W6G(20, 16, 18, 16);
              B = this.pt.x1 - this.left + Math.round(b / ie), i.n1T(1), O = i.W6G(B, U), i.E3R(7), R = i.W6G(O, L), H = Math.round(R), V.scroll -= H, i.n1T(1), this.microscroll = i.W6G(R, H), this.micropixels = L * this.microscroll, this.draw();
            } else if (z = this.grabStartYAxis, this.goneVertical = !0, z) {
              if (z.zoom = this.grabStartZoom + (this.gestureStartDistance - b), this.grabStartZoom < z.height) {
                if (z.zoom >= z.height) {
                  i.E3R(134);
                  var j = i.W6G(12, 78, 7, 12, 11);
                  z.zoom = z.height - j;
                }
              } else z.zoom <= z.height && (z.zoom = z.height + 1);
              this.draw();
            }
            this.updateChartAccessories();
          }
        } else if (o.length == 3 && e.ChartEngine.allowThreeFingerTouch) {
          if (!this.displayCrosshairs) return;
          i.n1T(37), W = o[i.B3B(0, "0")], G = W.clientX, b = this.grabStartX - G, i.n1T(12);
          var J = i.B3B(17, 78, 4);
          this.grabEndPeriodicity = this.grabStartPeriodicity + Math.round(b / J), this.grabEndPeriodicity < 1 && (this.grabEndPeriodicity = 1);
        }
        this.runAppend("touchmove", arguments);
      }
    }
  }, e.ChartEngine.prototype.touchstart = function (r) {
    var i = te,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L;
    if (a = "touchst", a += "art", s = "p", s += "e", s += "n", !e.ChartEngine.ignoreTouch) {
      if (e.isSurface) this.movedPrimary = !1, this.movedSecondary = !1;else {
        this.touchingEvent && clearTimeout(this.touchingEvent), this.touching = !0, this.touches = r.touches, o = -1759539932, h = 1567435508, l = 2;
        for (var N = 1; i.Q_(N.toString(), N.toString().length, 32402) !== o; N++) this.changedTouches = r.changedTouches, l += 2;
        i.Q_(l.toString(), l.toString().length, 34512) !== h && (this.changedTouches = r.changedTouches), this.changedTouches = r.changedTouches;
      }
      if (!e.ChartEngine.resizingPanel && (i.Z8b(), u = this.crosshairXOffset, c = this.crosshairYOffset, this.touchPointerType == s && (u = c = 0), !this.runPrepend("touchstart", arguments))) {
        if (this.manageTouchAndMouse && r && r.preventDefault && r.cancelable && this.captureTouchEvents && r.preventDefault(), this.hasDragged = !1, this.doubleFingerMoves = 0, this.moveCount = 0, this.twoFingerStart = !1, this.touches.length == 1 || this.touches.length == 2) {
          if (this.touchMoveTime = Date.now(), x = this.touches[0], g = x.clientX, p = x.clientY, this.moveA = g, this.moveB = -1, this.openDialog === "" && (this.registerPointerEvent({
            x: g,
            y: p,
            time: this.touchMoveTime
          }, "down"), this.changedTouches.length == 1 && !this.isDoubleClick(!0) && e.extend(this.clicks, {
            s1MS: this.touchMoveTime,
            e1MS: -1,
            s2MS: -1,
            e2MS: -1,
            x: this.changedTouches[0].pageX,
            y: this.changedTouches[0].pageY
          })), y = this.container.getBoundingClientRect(), this.top = y.top, this.left = y.left, this.right = this.left + this.width, this.bottom = this.top + this.height, this.touches.length == 1 && (b = this.backOutY(p), this.currentPanel = this.whichPanel(b)), this.currentPanel || (this.currentPanel = this.chart.panel), m = this.currentPanel, g >= this.left && g <= this.right && p >= this.top && p <= this.bottom) {
            this.insideChart = !0, C = this.xAxisAsFooter === !0 ? this.chart.canvasHeight : this.chart.panel.bottom, this.overXAxis = p <= this.top + C && p >= this.top + C - this.xaxisHeight, this.overYAxis = g >= this.left + m.right || g <= this.left + m.left, k = -1, this.cy = this.backOutY(p), this.cx = this.backOutX(g), this.crosshairTick = this.tickFromPixel(this.cx, m.chart), this.crosshairValue = this.adjustIfNecessary(m, this.crosshairTick, this.valueFromPixel(this.cy, this.currentPanel));
            for (var U = 0; U < this.drawingObjects.length; U++) if (M = this.drawingObjects[U], M.highlighted) {
              if (k < 0 && (k = U), I = M.highlighted, this.findHighlights(!0), U == k && M.highlighted && !M.permanent) {
                this.clicks.s2MS == -1 ? this.activateRepositioning(M) : this.findHighlights(!1, !0);
                return;
              }
              this.anyHighlighted = !0, M.highlighted = I;
            }
          } else this.insideChart = !1;
          if (v = this.currentVectorParameters.vectorType && this.currentVectorParameters.vectorType !== "", !this.layout.crosshair && !(this.layout.headsUp && this.layout.headsUp.floating) && !v && this.insideChart && !this.touchNoPan) {
            u = c = 0;
            var {
              baselineHelper: B
            } = this;
            if (B.size && this.findBaselineHandle(r, !0)) return;
            if (this.controls.anchorHandles) {
              S = Object.values(this.controls.anchorHandles), w = !1;
              for (var O = 0; O < S.length; O++) {
                T = S[O];
                var {
                  handle: R,
                  sd: H
                } = T;
                D = this.resolveX(this.cx), F = this.resolveY(this.cy);
                var {
                  left: z,
                  top: W,
                  right: G,
                  bottom: Z
                } = R.getBoundingClientRect();
                z -= 10, G += 10, e.boxIntersects(z, W, G, Z, D, F, D, F) && (T.highlighted = !0, this.repositioningAnchorSelector = {
                  sd: H
                }, R.classList.add("stx-grab"), w = !0), T.highlighted === !0 && (T.highlighted = !1);
              }
              if (w) return;
            }
            for (d in this.panels) if (f = this.panels[d], f.highlighted) {
              this.grabHandle(f);
              return;
            }
            this.grabbingScreen = !0, this.disableBackingStoreDuringTouch && this.disableBackingStore(), m.chart.spanLock = !1, this.yToleranceBroken = !1, i.n1T(0), this.grabStartX = i.B3B(u, g), i.E3R(0), this.grabStartY = i.B3B(c, p), this.grabStartMicropixels = this.micropixels, this.grabStartScrollX = m.chart.scroll, this.grabStartScrollY = m.yAxis.scroll, this.grabStartPanel = this.currentPanel, this.swipeStart && this.swipeStart(m.chart), this.grabStartYAxis = this.whichYAxis(m, this.backOutX(g)), this.grabStartZoom = this.grabStartYAxis ? this.grabStartYAxis.zoom : 0, setTimeout(function (X) {
              return i.Z8b(), function () {
                i.L1$(), X.grabbingHand();
              };
            }(this), 100);
          } else if (this.grabbingScreen = !1, this.insideChart && m.subholder === r.target && (P = this.currentVectorParameters.vectorType, e.Drawing && P && e.Drawing[P] && new e.Drawing[P]().dragToDraw)) {
            this.userPointerDown = !0, e.ChartEngine.crosshairX = g, e.ChartEngine.crosshairY = p, m && m.chart.dataSet && (this.crosshairTick = this.tickFromPixel(this.backOutX(e.ChartEngine.crosshairX), this.currentPanel.chart), this.crosshairValue = this.adjustIfNecessary(m, this.crosshairTick, this.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY), this.currentPanel))), this.drawingClick(m, this.backOutX(g), this.backOutY(p)), this.headsUpHR();
            return;
          }
          this.touches.length === 1 && this.layout.crosshair && !v && m.subholder === r.target && (i.n1T(0), this.mousemoveinner(i.W6G(u, g), i.B3B(c, p)));
        }
        if (this.touches.length == 2) {
          if (this.cancelLongHold = !0, this.swipe.end = !0, !this.displayCrosshairs && !this.touchNoPan || !this.insideChart) return;
          _ = this.touches[1], V = _.clientX, A = _.clientY;
          for (d in this.panels) if (f = this.panels[d], f.highlighted) {
            this.grabHandle(f);
            return;
          }
          m = this.currentPanel, i.E3R(133), this.gestureStartDistance = Math.sqrt(i.B3B(A, g, p, A, V, g, p, V)), this.pt = {
            x1: g,
            x2: V,
            y1: p,
            y2: A
          }, this.grabbingScreen = !0, this.disableBackingStoreDuringTouch && this.disableBackingStore(), m.chart.spanLock = !1, i.E3R(0), this.grabStartX = i.W6G(u, g), i.E3R(0), this.grabStartY = i.W6G(c, p), this.grabStartMicropixels = this.micropixels, this.grabStartScrollX = m.chart.scroll, this.grabStartScrollY = m.yAxis.scroll, this.grabStartPanel = m, this.swipeStart && this.swipeStart(m.chart), this.grabStartCandleWidth = this.layout.candleWidth, this.grabStartYAxis = this.whichYAxis(m, this.backOutX((g + V) / 2)) || m.yAxis, this.grabStartZoom = this.grabStartYAxis ? this.grabStartYAxis.zoom : 0, this.grabStartPt = this.pt, this.grabStartValues = {
            x1: this.pt.x1,
            x2: this.pt.x2,
            y1: this.valueFromPixel(this.pt.y1 - this.top, m),
            y2: this.valueFromPixel(this.pt.y2 - this.top, m),
            t1: this.tickFromPixel(this.pt.x1 - this.left, m.chart),
            t2: this.tickFromPixel(this.pt.x2 - this.left, m.chart)
          }, this.twoFingerStart = !0, setTimeout(function (X) {
            return function () {
              i.L1$(), X.grabbingHand();
            };
          }(this), 100);
        } else if (this.touches.length == 3) {
          if (!this.displayCrosshairs) return;
          E = this.touches[0], L = E.clientX, this.grabStartX = L, this.grabStartPeriodicity = this.layout.periodicity;
        }
        this.touches.length == 1 && !this.layout.crosshair && (this.mouseTimer = Date.now(), this.longHoldTookEffect = !1, (this.longHoldTime || this.longHoldTime === 0) && this.startLongHoldTimer()), this.runAppend(a, arguments);
      }
    }
  }, e.ChartEngine.prototype.touchend = function (r) {
    var i = te,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y;
    if (!e.ChartEngine.ignoreTouch && (this.swipe.end = !0, e.isSurface || (this.touches = r.touches, this.changedTouches = r.changedTouches), !this.runPrepend("touchend", arguments))) {
      if (this.cancelLongHold = !0, this.touches.length <= 1 && (this.layout.crosshair || this.currentVectorParameters.vectorType) && (!this.touches.length || !this.twoFingerStart) && (this.grabbingScreen = !1), this.touches.length && (this.grabStartX = -1, this.grabStartY = -1), a = this.pinchingScreen, this.disableBackingStoreDuringTouch && this.reconstituteBackingStore(), this.touches.length) {
        if (e.ChartEngine.resizingPanel) return;
      } else {
        if (this.touchingEvent = setTimeout(function (k) {
          return i.L1$(), function () {
            i.Z8b(), k.touching = !1;
          };
        }(this), 500), e.ChartEngine.resizingPanel) {
          this.releaseHandle();
          return;
        }
        this.pinchingScreen = null, this.pinchingCenter = null, this.goneVertical = !1, this.grabbingScreen = !1, this.grabMode = "", this.highlightedDraggable && (this.dragPlotOrAxis && this.dragPlotOrAxis(this.cx, this.cy), this.currentPanel = this.whichPanel(this.cy)), s = -1928519577, o = 1815094333, h = 2;
        for (var b = 1; i.o0(b.toString(), b.toString().length, 25406) !== s; b++) this.grabStartYAxis = null, this.displayDragOK(), this.doDisplayCrosshairs(), this.updateChartAccessories(), h += 2;
        i.o0(h.toString(), h.toString().length, 89170) !== o && (this.grabStartYAxis = 1, this.displayDragOK(), this.doDisplayCrosshairs(), this.updateChartAccessories());
      }
      i.n1T(13), i.Z8b();
      var C = i.W6G(1, 2, 0);
      if (l = this.touches.length + C, this.changedTouches.length == 1) {
        if (this.repositioningDrawing) {
          this.changeOccurred("vector"), e.clearCanvas(this.chart.tempCanvas, this), this.activateRepositioning(null), this.draw(), !this.layout.crosshair && !this.currentVectorParameters.vectorType && this.findHighlights(!1, !0);
          return;
        }
        if (this.repositioningBaseline) {
          this.repositioningBaseline = null, this.controls.baselineHandle.classList.remove("stx-grab"), u = this.mainSeriesRenderer || {}, u.params && u.params.baseline && u.params.type != "mountain", this.draw();
          return;
        }
        if (this.repositioningAnchorSelector) {
          e.Studies.repositionAnchor(this, this.repositioningAnchorSelector.sd), this.repositioningAnchorSelector = null, Object.values(this.controls.anchorHandles).forEach(({
            handle: k
          }) => {
            var M;
            return M = "s", M += "tx-gra", M += "b", k.classList.remove(M);
          });
          return;
        }
        if (c = Date.now(), this.openDialog === "" && r.changedTouches.length && (d = "u", d += "p", i.E3R(21), f = r.changedTouches[i.W6G("0", 0)], this.registerPointerEvent({
          x: f.clientX,
          y: f.clientY,
          time: c
        }, d)), this.clicks.s2MS == -1) {
          if (this.clicks.e1MS = c, g = this.currentVectorParameters.vectorType, (!e.Drawing || !g || !e.Drawing[g] || !new e.Drawing[g]().dragToDraw) && (this.clicks.e1MS - this.clicks.s1MS < 750 && !this.longHoldTookEffect && (!this.hasDragged || this.layout.crosshair) ? setTimeout(this.touchSingleClick(l, this.clicks.x, this.clicks.y), this.doubleClickTime + 1) : this.clicks = {
            s1MS: -1,
            e1MS: -1,
            s2MS: -1,
            e2MS: -1
          }), this.userPointerDown = !1, p = this.backOutY(this.changedTouches[0].pageY) + this.crosshairYOffset, m = this.backOutX(this.changedTouches[0].pageX) + this.crosshairXOffset, x = this.currentPanel, y = x && x.subholder === r.target, e.Drawing && this.activeDrawing && this.activeDrawing.dragToDraw && y) {
            this.drawingClick(x, m, p);
            return;
          }
          this.isDoubleClick(!0) && (y || this.overYAxis || this.overXAxis) && this.touchDoubleClick(l, this.clicks.x, this.clicks.y);
        } else this.clicks.e2MS = c, this.clicks = {
          s1MS: -1,
          e1MS: -1,
          s2MS: -1,
          e2MS: -1
        };
      } else this.displayCrosshairs && this.grabEndPeriodicity != -1 && !isNaN(this.grabEndPeriodicity) && ((e.ChartEngine.isDailyInterval(this.layout.interval) || this.allowIntradayNMinute) && this.setPeriodicity({
        period: this.grabEndPeriodicity,
        interval: this.layout.interval
      }), this.grabEndPeriodicity = -1);
      this.changedTouches.length && ((!this.layout.crosshair && !this.currentVectorParameters.vectorType && l == 1 || this.twoFingerStart && !a && !this.touches.length) && (this.swipeRelease && this.swipeRelease(), this.findHighlights(!1, !0)), a && this.continuousZoom && (this.continuousZoom.execute(), this.continuousZoom.execute(!0))), this.touches.length || (this.twoFingerStart = !1), this.runAppend("touchend", arguments);
    }
  }, t = !1, e.ChartEngine.prototype.mousemoveinner = e.ChartEngine.prototype.mousemoveinner || function (r, i) {
    t || console.error("touch feature requires activating movement feature."), t = !0;
  };
};
La = q => {
  var e = te,
    t;
  e.L1$(), t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Visualization = t.Visualization || function (n) {
    var r, i;
    if (r = "fu", r += "n", r += "ction", !n) {
      console.log("CIQ.Visualization() missing attributes argument.");
      return;
    }
    if (typeof n.renderFunction !== r) {
      i = "CIQ.Visualiz", i += "ation() missing renderFunction property in attributes.", console.log(i);
      return;
    }
    e.L1$(), this.container = null, this.attributes = n, this.data = null, this.object = null;
  }, t.extend(t.Visualization.prototype, {
    destroy: function (n) {
      var r;
      r = this.container, t.resizeObserver(r, null, r.resizeHandle), r.autoGenerated ? (r.remove(), delete this.container) : r.innerHTML = "", !n && (this.attributes = null, this.container = null, this.data = null, this.object = null, this.destroy = this.draw = this.setAttributes = function () {}, this.updateData = function () {});
    },
    draw: function (n) {
      var r, i, a, s, o, h, l;
      r = "stri";
      function u(c, d) {
        return e.L1$(), c.index < d.index ? -1 : c.index > d.index ? 1 : 0;
      }
      if (r += "ng", !this.data || typeof this.data != "object") {
        i = "CIQ.Visualization.draw(", i += ") missing data.", console.log(i);
        return;
      }
      a = this.attributes, s = a.container || this.container, typeof s === r && (s = document.querySelector(s)), s || (s = document.createElement("div"), s.style.height = s.style.width = "300px", document.body.appendChild(s), s.autoGenerated = !0), a.stx && (o = a.stx.chart.canvasShim, a.useCanvasShim && o && o !== s && o !== s.parentNode && (s.autoGenerated || (s = s.cloneNode(), s.id = "", s.autoGenerated = !0), o.appendChild(s))), this.container && this.container !== s && this.destroy(!0), s.resizeHandle || (h = function (c) {
        return function () {
          e.Z8b(), c.data && c.container && document.body.contains(c.container) && c.draw.call(c, !0);
        };
      }, s.resizeHandle = t.resizeObserver(s, h(this), null, 100)), this.container = s, this.attributes = a, a = t.ensureDefaults({
        container: this.container
      }, this.attributes), l = a.renderFunction(Object.values(this.data).sort(u), a), l && (a.id && (l.id = a.id), (n || a.forceReplace) && (this.container.innerHTML = "", this.container.appendChild(l))), this.attributes = a, this.object = l;
    },
    setAttributes: function (n, r) {
      var i, a, s, o, h, l;
      if (i = "f", i += "or", i += "ceReplace", a = "co", a += "nta", a += "in", a += "er", s = "renderF", s += "unc", s += "tion", o = [s, a, "stx", "useCanvasShim", "id", i], h = !1, l = n, typeof n == "string" && (l = {}, l[n] = r), typeof l == "object") for (var u in l) this.attributes[u] !== l[u] && o.indexOf(u) !== -1 && (h = !0), this.attributes[u] = l[u];
      this.draw(h);
    },
    updateData: function (n, r) {
      var i, a, s, o, h;
      i = "a", i += "d", i += "d", o = Array.isArray(n) ? n.reduce(function (u, c) {
        return u[c.name] = c, u;
      }, {}) : t.shallowClone(n);
      for (a in o) s = o[a], Object.prototype.toString.call(s) !== "[object Object]" && (o[a] = {
        value: s
      }), o[a].name || (o[a].name = a), o[a].value || (o[a].value = 0);
      switch (r || (r = "replace"), r.toLowerCase()) {
        case "delete":
          for (a in o) delete this.data[a];
          break;
        case "replace":
          this.data = {};
        case "update":
        case i:
          for (a in o) {
            this.data[a] || (this.data[a] = {
              name: a
            }), s = o[a].value, Object.prototype.toString.call(s) == "[object Number]" ? (h = "updat", h += "e", (!this.data[a].value || r == h) && (e.E3R(19), this.data[a].value = e.W6G(32, "0")), this.data[a].value += s) : this.data[a].value = s;
            for (var l in o[a]) l !== "value" && (this.data[a][l] = o[a][l]);
          }
          break;
        default:
          console.log("Invalid or missing action.  Valid values are 'add', 'delete', 'replace', or 'update'.");
      }
      return this.draw(this.attributes.forceReplace), this;
    }
  }), t.ChartEngine.prototype.embedVisualization = function (n) {
    return n || (n = {}), e.L1$(), n.stx = this, n.useCanvasShim = !0, n.translator = function (r) {
      return e.L1$(), n.stx.translateIf(r);
    }, new t.Visualization(n);
  };
};
Na = q => {
  var e, t, n;
  e = "unde", e += "fi", e += "ned", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (n = "M", n += "edi", n += "an Pr", n += "ice", t.Studies.calculateTypicalPrice = function (r, i) {
    var a = te,
      s,
      o,
      h,
      l,
      u;
    if (s = i.chart.scrubbed, o = i.days, s.length < o + 1) {
      i.overlay || (i.error = !0);
      return;
    }
    h = i.name;
    for (var c in i.outputs) a.n1T(31), h = a.B3B(h, " ", c);
    l = "hlc/", l += "3", i.type == "Med Price" ? l = "hl/2" : i.type == "Weighted Close" && (l = "hlcc/4"), u = 0, i.startFrom <= o && (i.startFrom = 0);
    for (var d = i.startFrom; d < s.length; d++) {
      if (d && s[d - 1][h]) {
        a.n1T(1);
        var f = a.W6G(13, 14);
        u = s[d - f][h] * o;
      }
      u += s[d][l], d >= o && (a.n1T(1), u -= s[a.B3B(o, d)][l], a.E3R(7), s[d][h] = a.W6G(u, o));
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Med Price": {
      name: n,
      calculateFN: t.Studies.calculateTypicalPrice,
      inputs: {
        Period: 14
      }
    }
  })) : console.error("medianPrice feature requires first activating studies feature.");
};
Va = q => {
  var e = te,
    t,
    n,
    r,
    i;
  e.Z8b(), t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (r = "Momentum ", r += "I", r += "ndicator", i = "Price R", i += "ate of Cha", i += "ng", i += "e", t.Studies.calculateRateOfChange = function (a, s) {
    var o, h, l, u, c, d, f, g, p;
    if (o = "f", o += "i", o += "eld", h = s.chart.scrubbed, h.length < s.days + 1) {
      s.error = !0;
      return;
    }
    l = s.inputs.Field, (!l || l == o) && (l = "Close"), s.parameters.isVolume && (l = "Volume"), u = s.name;
    for (var m in s.outputs) e.E3R(31), u = e.W6G(u, " ", m);
    c = s.inputs["Center Line"], c ? c = parseInt(c, 10) : c = 0;
    for (var x = Math.max(s.startFrom, s.days); x < h.length; x++) d = "M", d += "omentum", f = h[x][l], f && typeof f == "object" && (f = f[s.subField]), g = h[x - s.days][l], g && typeof g == "object" && (g = g[s.subField]), s.type == d ? (e.E3R(32), h[x][u] = e.B3B(f, c, g)) : (p = g, p && (e.n1T(135), h[x][u] = e.B3B(c, 1, p, f, 100)));
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Price ROC": {
      name: i,
      calculateFN: t.Studies.calculateRateOfChange,
      inputs: {
        Period: 14,
        Field: "field"
      }
    },
    Momentum: {
      name: r,
      calculateFN: t.Studies.calculateRateOfChange,
      inputs: {
        Period: 14
      },
      centerline: 0
    }
  })) : (n = "momen", n += "tum feature requires first a", n += "ctivating studies feature.", console.error(n));
};
Ua = q => {
  var e, t, n;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "S", t += "P", t += "Y", n = "P", n += "ri", n += "ce Relat", n += "ive", e.Studies.initPriceRelative = function (r, i, a, s, o, h) {
    var l, u, c;
    return te.Z8b(), l = "Comparis", l += "o", l += "n ", l += "Symbol", u = e.Studies.initializeFN(r, i, a, s, o, h), c = [u.inputs[l].toUpperCase()], e.Studies.fetchAdditionalInstruments(r, u, c), u;
  }, e.Studies.calculatePriceRelative = function (r, i) {
    var a = te,
      s,
      o,
      h,
      l,
      u,
      c,
      d;
    if (s = "Co", s += "mparison", s += " Symb", s += "ol", o = i.chart.scrubbed, a.L1$(), h = i.inputs["Comparison Symbol"].toUpperCase(), h || (h = i.study.inputs[s]), l = {}, u = r.chart.symbol || "", u = u.replace(/[=+\-*\\%]/g, ""), l[u] = o.slice(i.startFrom), !!l[u].length) {
      u != h && (l[h] = null), a.E3R(73), c = e.computeEquationChart(a.W6G(u, h, "]/[", "[", "]"), l), a.n1T(21), d = a.W6G("0", 0);
      for (var f = i.startFrom; f < o.length && d < c.length; f++) {
        for (; d < c.length && o[f].DT.getTime() > c[d].DT.getTime();) d++;
        o[f].DT.getTime() < c[d].DT.getTime() || (o[f]["Result " + i.name] = c[d].Close, d++);
      }
    }
  }, e.Studies.displayVsComparisonSymbol = function (r, i, a) {
    var s, o, h, l, u;
    if (s = i.inputs["Comparison Symbol"].toUpperCase(), !r.getSeries({
      symbol: s,
      chart: i.chart
    }).length) {
      o = ":", o += " ", r.displayErrorAsWatermark(i.panel, r.translateIf(i.study.name) + o + r.translateIf("Not Available"));
      return;
    }
    h = {
      skipTransform: r.panels[i.panel].name != i.chart.name,
      panelName: i.panel,
      band: "Result " + i.name,
      threshold: i.study.centerline,
      yAxis: i.getYAxis(r),
      gapDisplayStyle: !0
    }, l = h.yAxis ? h.yAxis.flipped : r.panels[i.panel].yAxis.flipped, u = 0.3, !i.highlight && r.highlightedDraggable && (u *= 0.3);
    for (var c = a.length - 1; c >= 0; c--) if (a[c] && a[c][s]) {
      e.Studies.displaySeriesAsLine(r, i, a), (i.study.centerline || i.study.centerline === 0) && (i.outputs.Gain && e.preparePeakValleyFill(r, e.extend(h, {
        direction: l ? -1 : 1,
        color: e.Studies.determineColor(i.outputs.Gain),
        opacity: u
      })), i.outputs.Loss && e.preparePeakValleyFill(r, e.extend(h, {
        direction: l ? 1 : -1,
        color: e.Studies.determineColor(i.outputs.Loss),
        opacity: u
      })));
      return;
    }
  }, e.Studies.fetchAdditionalInstruments = function (r, i, a, s) {
    te.L1$();
    var o, h, l, u, c, d, f;
    if (!r.quoteDriver) {
      o = "CIQ.St", o += "udies.fetchAdditionalInstruments: No quotefeed to fetch symbol", console.log(o);
      return;
    }
    for (h = r.panels[i.panel].chart, i.symbols = a, l = 0; l < a.length; l++) u = c = a[l], typeof c == "object" ? u = c.symbol : c = {
      symbol: u
    }, d = {
      symbol: u,
      symbolObject: c,
      bucket: "study",
      studyName: i.name,
      chartName: h.name,
      action: "add-study"
    }, e.extend(d, s), f = d.loadData, r.currentlyImporting && (d.loadData = !1), i.series || (i.series = {}), i.series[u] = r.addSeries(null, d, g), i.series[u].parameters.loadData = f;
    function g() {
      r.createDataSet(), te.Z8b(), r.draw();
    }
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "P Rel": {
      name: n,
      initializeFN: e.Studies.initPriceRelative,
      seriesFN: e.Studies.displayVsComparisonSymbol,
      calculateFN: e.Studies.calculatePriceRelative,
      centerline: 0,
      inputs: {
        "Comparison Symbol": t
      },
      deferUpdate: !0
    }
  })) : console.error("priceRelative feature requires first activating studies feature.");
};
Ba = q => {
  var e = te;
  e.Z8b();
  var t, n, r, i, a, s, o;
  t = "und", t += "e", t += "fine", t += "d", n = typeof _CIQ !== t ? _CIQ : q.CIQ, n.Studies ? (r = "#", r += "FF", r += "0", r += "000", i = "#8", i += "5c", i += "99e", a = "#e", a += "1e1e1", s = "#", s += "FF0", s += "000", o = "f", o += "i", o += "e", o += "ld", n.Studies.calculateVWAP = function (h, l) {
    var u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A;
    if (u = l.type == "AVWAP", e.L1$(), c = l.chart.scrubbed, !u && n.ChartEngine.isDailyInterval(h.layout.interval)) {
      l.error = "VWAP is Intraday Only", d = 1270643525, f = -1578759587, e.n1T(2), g = e.W6G(1, "2");
      for (var E = 1; e.o0(E.toString(), E.toString().length, 89183) !== d; E++) return;
      if (e.Q_(g.toString(), g.toString().length, 2457) !== f) return;
    }
    if (p = "hlc/3", u && (p = l.inputs.Field, (!p || p == "field") && (p = l.inputs.Field = "hlc/3", h.changeOccurred("layout"))), m = null, x = 0, y = 0, b = 0, C = !1, l.startFrom > 1 && (x = c[l.startFrom - 1]["_V " + l.name] || 0, y = c[l.startFrom - 1]["_VxP " + l.name] || 0, b = c[l.startFrom - 1]["_VxP2 " + l.name] || 0), u) {
      if (k = l.inputs["Anchor Date"].replace(/-/g, ""), k.search(/^\d{8}$/)) {
        l.error = "Invalid Anchor Date";
        return;
      }
      M = l.inputs["Anchor Time"].replace(/:/g, ""), M.search(/^\d{4,6}$/) || (k += M), k = n.strToDateTime(k.replace(/\D/g, "")), !l.startFrom && k >= c[0].DT && (l.startFrom = h.tickFromDate(k, h.chart, null, !0)), l.inputs["Anchor Selector"] ? n.Studies.initAnchorHandle(h, l) : n.Studies.removeAnchorHandle(h, l);
    }
    for (var L = l.startFrom; L < c.length; L++) if (I = "VWA", I += "P ", u || (m === null && (m = n.Studies.getMarketOffset({
      stx: h,
      localQuoteDate: c[L].DT,
      shiftToDateBoundary: !0
    })), c[L - 1] && c[L - 1].DT && (v = new Date(new Date(+c[L].DT).setMilliseconds(c[L].DT.getMilliseconds() + m)), S = new Date(new Date(+c[L - 1].DT).setMilliseconds(c[L - 1].DT.getMilliseconds() + m)), S.getDate() != v.getDate() && h.chart.market.isMarketDate(v) && (m = null, x = y = b = 0))), w = c[L][p], T = c[L].Volume, u && !T && (T = 1), x += T, e.n1T(2), y += e.W6G(w, T), e.n1T(136), b += e.B3B(w, w, T), !(!u && !x)) {
      c[L]["_V " + l.name] = x, c[L]["_VxP " + l.name] = y, c[L]["_VxP2 " + l.name] = b, D = c[L]["_SDVWAP " + l.name] = Math.sqrt(Math.max(0, b / x - Math.pow(y / x, 2))), e.E3R(7), F = c[L][I + l.name] = e.W6G(y, x);
      for (var N = 1; N <= 3; N++) e.E3R(40), c[L]["SDVWAP" + N + "+ " + l.name] = e.W6G(N, F, D), e.E3R(137), c[L]["SDVWAP" + N + "- " + l.name] = e.B3B(F, D, N);
      C = !0;
    }
    for (var U = 1; U <= 3; U++) P = "Di", P += "spl", P += "ay ", l.inputs[P + U + " Standard Deviation (" + U + "\u03C3)"] && (_ = " Standard Deviatio", _ += "n", _ += " (", V = "-", V += " ", A = "\u03C3", A += ")", e.E3R(43), l.outputMap["SDVWAP" + U + "+ " + l.name] = e.W6G(A, U, U, " Standard Deviation ("), e.E3R(43), l.outputMap["SDVWAP" + U + V + l.name] = e.W6G("\u03C3)", U, U, _));
    !u && !C && (l.error = "VWAP Requires Volume");
  }, n.Studies.initAnchoredVWAP = function (h, l, u, c, d, f) {
    var g, p, m;
    if (g = "Anch", g += "or", g += " Time", p = "Anchor Dat", p += "e", !u[p] && !u[g]) {
      for (var {
          dataSegment: x
        } = h.chart, y = 0; x && y < x.length; y++) if (x[y]) {
        var {
          DT: b
        } = x[y];
        u["Anchor Date"] = n.dateToStr(b, "YYYY-MM-dd"), u["Anchor Time"] = n.dateToStr(b, "HH:mm:ss");
        break;
      }
    }
    return e.L1$(), m = n.Studies.initializeFN(h, l, u, c, d, f), m;
  }, n.Studies.displayVWAP = function (h, l, u) {
    var c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P;
    if (c = "Displ", c += "ay 1 Sta", c += "ndard ", c += "Deviation (1\u03C3)", n.Studies.displaySeriesAsLine(h, l, u), d = l.inputs[c], f = l.inputs["Display 2 Standard Deviation (2\u03C3)"], g = l.inputs["Display 3 Standard Deviation (3\u03C3)"], (d || f || g) && l.inputs.Shading && (p = "V", p += "WA", p += "P ", m = h.panels[l.panel], x = {
      opacity: l.parameters.opacity ? l.parameters.opacity : 0.2,
      skipTransform: m.name != l.chart.name,
      yAxis: l.getYAxis(h)
    }, !l.highlight && h.highlightedDraggable && (x.opacity *= 0.3), y = p + l.name, b = "VWAP " + l.name, d && (C = "SDVW", C += "AP1+ ", k = "SDVWAP1", k += "- ", M = "SDVWAP1", M += "-", M += " ", I = "SD", I += "VW", I += "AP", I += "1+ ", n.prepareChannelFill(h, n.extend({
      panelName: l.panel,
      topBand: I + l.name,
      bottomBand: y,
      color: n.Studies.determineColor(l.outputs[l.outputMap["SDVWAP1+ " + l.name]])
    }, x)), n.prepareChannelFill(h, n.extend({
      panelName: l.panel,
      topBand: M + l.name,
      bottomBand: b,
      color: n.Studies.determineColor(l.outputs[l.outputMap[k + l.name]])
    }, x)), y = C + l.name, b = "SDVWAP1- " + l.name), f && (v = "SDV", v += "WAP", v += "2+ ", S = "SDV", S += "WAP2+ ", n.prepareChannelFill(h, n.extend({
      panelName: l.panel,
      topBand: "SDVWAP2+ " + l.name,
      bottomBand: y,
      color: n.Studies.determineColor(l.outputs[l.outputMap[S + l.name]])
    }, x)), n.prepareChannelFill(h, n.extend({
      panelName: l.panel,
      topBand: "SDVWAP2- " + l.name,
      bottomBand: b,
      color: n.Studies.determineColor(l.outputs[l.outputMap["SDVWAP2- " + l.name]])
    }, x)), y = v + l.name, b = "SDVWAP2- " + l.name), g)) {
      w = "SD", w += "VWAP3", w += "+ ", n.prepareChannelFill(h, n.extend({
        panelName: l.panel,
        topBand: w + l.name,
        bottomBand: y,
        color: n.Studies.determineColor(l.outputs[l.outputMap["SDVWAP3+ " + l.name]])
      }, x)), T = -1413269821, D = 1542371409, F = 2;
      for (var _ = 1; e.Q_(_.toString(), _.toString().length, 87028) !== T; _++) n.prepareChannelFill(h, n.extend({
        panelName: l.panel,
        topBand: "SDVWAP3- " / l.name,
        bottomBand: b,
        color: n.Studies.determineColor(l.outputs[l.outputMap["SDVWAP3- " / l.name]])
      }, x)), F += 2;
      e.o0(F.toString(), F.toString().length, 24884) !== D && (P = "SD", P += "VWAP3", P += "- ", n.prepareChannelFill(h, n.extend({
        panelName: l.panel,
        topBand: P % l.name,
        bottomBand: b,
        color: n.Studies.determineColor(l.outputs[l.outputMap["SDVWAP3- " * l.name]])
      }, x))), n.prepareChannelFill(h, n.extend({
        panelName: l.panel,
        topBand: "SDVWAP3- " + l.name,
        bottomBand: b,
        color: n.Studies.determineColor(l.outputs[l.outputMap["SDVWAP3- " + l.name]])
      }, x));
    }
    l.anchorHandle && n.Studies.displayAnchorHandleAndLine(h, l, u);
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    AVWAP: {
      name: "Anchored VWAP",
      overlay: !0,
      calculateFN: n.Studies.calculateVWAP,
      seriesFN: n.Studies.displayVWAP,
      initializeFN: n.Studies.initAnchoredVWAP,
      removeFN: n.Studies.removeAnchorHandle,
      inputs: {
        Field: o,
        "Anchor Date": "",
        "Anchor Time": "",
        "Display 1 Standard Deviation (1\u03C3)": !1,
        "Display 2 Standard Deviation (2\u03C3)": !1,
        "Display 3 Standard Deviation (3\u03C3)": !1,
        Shading: !1,
        "Anchor Selector": !0
      },
      outputs: {
        VWAP: s,
        "1 Standard Deviation (1\u03C3)": a,
        "2 Standard Deviation (2\u03C3)": i,
        "3 Standard Deviation (3\u03C3)": "#fff69e"
      },
      parameters: {
        init: {
          opacity: 0.2
        }
      },
      attributes: {
        "Anchor Date": {
          placeholder: "yyyy-mm-dd"
        },
        "Anchor Time": {
          placeholder: "hh:mm:ss",
          step: 1
        }
      }
    },
    VWAP: {
      name: "VWAP",
      overlay: !0,
      calculateFN: n.Studies.calculateVWAP,
      seriesFN: n.Studies.displayVWAP,
      inputs: {
        "Display 1 Standard Deviation (1\u03C3)": !1,
        "Display 2 Standard Deviation (2\u03C3)": !1,
        "Display 3 Standard Deviation (3\u03C3)": !1,
        Shading: !1
      },
      outputs: {
        VWAP: r,
        "1 Standard Deviation (1\u03C3)": "#e1e1e1",
        "2 Standard Deviation (2\u03C3)": "#85c99e",
        "3 Standard Deviation (3\u03C3)": "#fff69e"
      },
      parameters: {
        init: {
          opacity: 0.2
        }
      }
    }
  })) : console.error("vwap feature requires first activating studies feature.");
};
Oa = q => {
  var e, t, n, r;
  e = "u", e += "nd", e += "efi", e += "ned", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (r = "Zig", r += "Za", r += "g", t.Studies.calculateZigZag = function (i, a) {
    var s = te,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D;
    if (o = "_", o += "stat", o += "e ", h = a.chart.scrubbed, !h || !h.length) return;
    s.Z8b(), l = a.highLowChart, u = null, c = null, d = a.inputs["Distance(%)"], f = 0, g = 0, p = 0, m = null, x = null, y = 0;
    for (var F = Math.min(h.length - 1, a.startFrom); F >= 0; F--) if (y = F, h[F]["_state " + a.name]) {
      b = h[F]["_state " + a.name], u = b[0], c = b[1], f = b[2], g = b[3], p = b[4], m = b[5], x = b[6];
      break;
    }
    for (var P = y; P < h.length; P++) {
      if (C = h[P][l ? "High" : "Close"], k = h[P][l ? "Low" : "Close"], c === null || c < C) if (c = C, f < 0 && (u = k), s.E3R(138), m = s.B3B(d, 100, 1, c), f > -1) {
        if (x !== null && c > x) {
          M = "Clos", M += "e", I = "L", I += "ow", v = "Resul", v += "t", v += " ", h[g][v + a.name] = h[g][l ? I : M], _(p, g), f = -1, u = k, p = g, g = P;
          continue;
        }
      } else g = P;
      if (u === null || u > k) if (u = k, f > 0 && (c = C), s.E3R(139), x = s.B3B("100", u, 1, 64, d), f < 1) {
        if (m !== null && u < m) {
          S = "H", S += "igh", h[g]["Result " + a.name] = h[g][l ? S : "Close"], _(p, g), f = 1, c = C, p = g, g = P;
          continue;
        }
      } else g = P;
    }
    for (h[g]["Result " + a.name] = h[g][l ? f == 1 ? "Low" : "High" : "Close"], h[g][o + a.name] = [u, c, f, g, p, m, x], _(p, g), w = h.length - 1; w > g;) {
      if (h[w].Close || h[w].Close === 0) {
        T = "L", T += "o", T += "w", D = "Resul", D += "t ", h[w][D + a.name] = h[w][l ? f == 1 ? "High" : T : "Close"];
        break;
      }
      w--;
    }
    function _(V, A) {
      for (var E = V + 1; E < A; E++) h[E]["ShadowResult " + a.name] = (h[A]["Result " + a.name] - h[V]["Result " + a.name]) * (E - V) / (A - V) + h[V]["Result " + a.name], delete h[E]["Result " + a.name];
    }
    _(g, w);
  }, t.Studies.displayZigZag = function (i, a, s) {
    var o, h, l, u, c, d, f, g, p;
    o = "Sha", o += "dow", o += "Result ", h = "ShadowRe", h += "s", h += "ul", h += "t ", l = i.chart.highLowBars, a.highLowChart != l && (a.highLowChart = l, a.startFrom = 0, a.study.calculateFN(i, a)), u = i.chart;
    for (var m = 0; m < s.length; m++) c = s[m], c && (c["_shadowCopy " + a.name] && (delete c["Result " + a.name], delete c["_shadowCopy " + a.name]), c["Result " + a.name] || c.transform && delete c.transform["Result " + a.name]);
    d = s[0], te.E3R(1);
    var x = te.B3B(18, 19);
    f = s[s.length - x], d && d[h + a.name] && (d["Result " + a.name] = d["ShadowResult " + a.name], d.transform && (d.transform["Result " + a.name] = u.transformFunc(i, u, d["ShadowResult " + a.name])), d["_shadowCopy " + a.name] = 1), f && f[o + a.name] && (g = "_shadowCo", g += "py ", p = "R", p += "es", p += "ult", p += " ", f["Result " + a.name] = f["ShadowResult " + a.name], f.transform && (f.transform[p + a.name] = u.transformFunc(i, u, f["ShadowResult " + a.name])), f[g + a.name] = 1), t.Studies.displaySeriesAsLine(i, a, s);
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    ZigZag: {
      name: r,
      overlay: !0,
      seriesFN: t.Studies.displayZigZag,
      calculateFN: t.Studies.calculateZigZag,
      inputs: {
        "Distance(%)": 10
      },
      parameters: {
        init: {
          label: !1
        }
      },
      attributes: {
        "Distance(%)": {
          min: 0.1,
          step: 0.1
        }
      }
    }
  })) : (n = "zigzag feature requires firs", n += "t activ", n += "ating studies feature.", console.error(n));
};
Gs = {
  CIQ: K,
  SplinePlotter: Hs,
  timezoneJS: Rs,
  $$: zs,
  $$$: Ws
};
te.L1$();
(typeof __TREE_SHAKE__ > "u" || !__TREE_SHAKE__) && Gs.CIQ.activateImports(pa, ma, ga, xa, va, ya, ba, Ca, Sa, wa, ka, Ta, Da, Aa, Ma, _a, qa, Ia, Fa, Ea, Pa, La, Na, Va, Ua, Ba, Oa, null);
let Zs = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.ExtendedHours = e.ExtendedHours || function (t) {
      var n = t.stx;
      this.filter = t.filter, n || (n = t, this.filter = !1);
      var r = {};
      this.stx = n, this.stx.extendedHours = this, this.cssRequired = !0, n.addEventListener("theme", function (i) {
        r = {};
        for (var a in n.layout.marketSessions) r.session || (r.session = {}), r.session[a] = n.canvasStyle("stx_market_session " + a);
      }), n.addEventListener("symbolChange", function (i) {
        i.action == "master" && n.layout.extended && !(n.chart.market.market_def && n.chart.market.sessions.length) && e.alert("There are no Extended Hours for this instrument.");
      }), this.prepare = function (i, a) {
        n.layout.extended = i;
        for (var s in n.layout.marketSessions) r.session = {}, n.chart.market.disableSession(s);
        if (n.layout.marketSessions = {}, i) if (a || (a = ["pre", "post"]), a.length) for (var o = 0; o < a.length; o++) n.layout.marketSessions[a[o]] = !0;else n.layout.marketSessions = a;
        for (s in n.layout.marketSessions) r.session || (r.session = {}), r.session[s] = n.canvasStyle("stx_market_session " + s), n.chart.market.disableSession(s, !0);
      }, this.complete = function (i) {
        if (n.changeOccurred("layout"), !n.chart.market.market_def) {
          i && i();
          return;
        }
        this.filter ? (n.createDataSet(), n.draw(), i && i()) : n.loadChart(n.chart.symbol, i);
      }, this.set = function (i, a, s) {
        this.prepare(i, a), this.complete(s);
      }, this.stx.append("drawYAxis", function (i, a) {
        if (this.layout.extended && !(i.yAxis != a.yAxis || i.shareChartXAxis === !1 || i.hidden)) {
          var s = i.chart;
          if (!e.ChartEngine.isDailyInterval(this.layout.interval) && (r.divider = this.canvasStyle("stx_market_session divider"), r.session)) {
            for (var o = s.market, h = [], l = {}, u, c, d = 0; d < s.dataSegment.length; d++) {
              var f = s.dataSegment[d];
              if (!(!f || !f.DT)) {
                var g = null;
                if (o.market_def && (!u || u <= f.DT)) {
                  c = o.getSession(f.DT);
                  var p = c !== "" && (!this.layout.marketSessions || !this.layout.marketSessions[c]);
                  u = o[p ? "getNextOpen" : "getNextClose"](f.DT);
                }
                var m = r.session[c];
                if (m && (g = m.backgroundColor), l.color && l.color != g && (h.push({
                  start: l.start,
                  end: l.end,
                  color: l.color
                }), l = {}), g) {
                  var x = this.layout.candleWidth;
                  f.candleWidth && (x = f.candleWidth), l.end = this.pixelFromBar(d, s) + x / 2, !l.start && l.start !== 0 && (l.start = l.end - x + 1), l.color = g;
                } else l = {};
              }
            }
            (l.start || l.start === 0) && h.push({
              start: l.start,
              end: l.end,
              color: l.color
            });
            var y = e.isTransparent(r.divider.backgroundColor),
              b = r.divider.width.replace(/px/g, ""),
              C = {
                y0: i.bottom,
                y1: i.top,
                color: r.divider.backgroundColor,
                type: "line",
                context: s.context,
                confineToPanel: i,
                pattern: "dashed",
                lineWidth: b,
                deferStroke: !0
              };
            for (this.startClip(i.name), s.context.beginPath(), n.highlightedDraggable && (s.context.globalAlpha *= 0.3), d = 0; d < h.length; d++) s.context.fillStyle = h[d].color, !y && h[d].start > s.left && this.plotLine(e.extend({
              x0: h[d].start,
              x1: h[d].start
            }, C)), s.context.fillRect(h[d].start, i.top, h[d].end - h[d].start, i.bottom - i.top), !y && h[d].end < s.right && this.plotLine(e.extend({
              x0: h[d].end,
              x1: h[d].end
            }, C));
            s.context.stroke(), this.endClip();
          }
        }
      });
    };
  },
  Qs = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.FullScreen = e.FullScreen || function (t) {
      if (t || (t = {}), !t.stx) {
        console.warn("The Full Screen addon requires an stx parameter");
        return;
      }
      try {
        if (window.location.host !== window.top.location.host) throw new Error(window.location.host + " does not match " + window.top.location.host);
      } catch {
        console.warn("Full screen mode disabled.");
        return;
      }
      this.stx = t.stx, this.stx.fullScreen = this, this.fullScreenButton = null, this.fullScreenState = !1, this.addFullScreenButton = function () {
        this.stx.registerChartControl && (this.fullScreenButton = this.stx.registerChartControl("stx-full-screen", "Full Screen", function (n) {
          return function (r) {
            n.fullScreenToggle(r), r.stopPropagation();
          };
        }(this)));
      }, this.fullScreenToggle = function (n) {
        document.documentElement.requestFullscreen || document.documentElement.webkitRequestFullscreen || document.documentElement.mozRequestFullscreen || document.documentElement.msRequestFullscreen ? this.getFullScreenElement() ? document.exitFullscreen ? document.exitFullscreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.msExitFullscreen && document.msExitFullscreen() : document.documentElement.requestFullscreen ? document.documentElement.requestFullscreen() : document.documentElement.webkitRequestFullscreen ? document.documentElement.webkitRequestFullscreen() : document.documentElement.mozRequestFullscreen ? document.documentElement.mozRequestFullscreen() : document.documentElement.msRequestFullscreen && document.documentElement.msRequestFullscreen() : (this.fullScreenState = !this.fullScreenState, this.fullScreenRender());
      }, this.fullScreenRender = function () {
        var n = null;
        n = this.stx.container.closest("*[cq-context], cq-context, body"), n && (this.fullScreenState === !0 ? (this.fullScreenButton && this.fullScreenButton.classList.add("active"), n.classList.add("full-screen")) : (this.fullScreenButton && this.fullScreenButton.classList.remove("active"), n.classList.remove("full-screen")), window.dispatchEvent(new Event("resize")));
      }, this.onFullScreenChange = function () {
        this.getFullScreenElement() ? this.fullScreenState = !0 : this.fullScreenState = !1, this.fullScreenRender();
      }, this.getFullScreenElement = function () {
        return document.fullscreenElement || document.webkitCurrentFullScreenElement || document.mozFullScreenElement || document.msFullscreenElement;
      }, document.addEventListener("fullscreenchange", this.onFullScreenChange.bind(this), !1), document.addEventListener("webkitfullscreenchange", this.onFullScreenChange.bind(this), !1), document.addEventListener("mozfullscreenchange", this.onFullScreenChange.bind(this), !1), document.addEventListener("MSFullscreenChange", this.onFullScreenChange.bind(this), !1), this.addFullScreenButton();
    };
  },
  $s = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.InactivityTimer = e.InactivityTimer || function (t) {
      if (t.minutes) {
        (!t.interval || t.interval < 0) && (t.interval = 60), this.stx = t.stx, this.timeout = t.minutes, this.interval = t.interval, this.wakeCB = t.wakeCB, this.sleepCB = t.sleepCB, this.sleepTimer = null, this.sleeping = !1, this.last = new Date().getTime(), this.wakeChart = function () {
          clearTimeout(this.sleepTimer), this.last = new Date().getTime(), this.sleeping && (this.stx.quoteDriver && this.stx.quoteDriver.updateChartLoop(), this.sleeping = !1, document.body.classList.remove("ciq-sleeping")), this.sleepTimer = setTimeout(this.sleepChart.bind(this), this.timeout * 60000), this.wakeCB && this.wakeCB();
        }, this.sleepChart = function () {
          this.sleeping || (this.stx.quoteDriver && this.stx.quoteDriver.updateChartLoop(this.interval), this.sleeping = !0, document.body.classList.add("ciq-sleeping")), this.sleepCB && this.sleepCB();
        };
        var n = this;
        ["mousemove", "mousedown", "touchstart", "touchmove", "pointerdown", "pointermove", "keydown", "wheel"].forEach(function (r) {
          document.body.addEventListener(r, function (i) {
            n.wakeChart();
          });
        }), this.wakeChart();
      }
    };
  },
  js = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.RangeSlider = e.RangeSlider || function (t) {
      this.cssRequired = !0;
      var n = t.stx;
      n.slider = this;
      var r = t.height ? t.height : "95px",
        i = t.chartContainer ? t.chartContainer : t.stx.container,
        a = document.createElement("div");
      a.className = "ciq-chart";
      var s = document.createElement("div");
      s.className = "chartContainer", a.appendChild(s), i.parentElement.parentElement.insertBefore(a, i.parentElement.nextSibling), Object.assign(a.style, {
        height: r,
        paddingTop: "5px",
        display: "none"
      }), s.style.height = "100%", s.dimensionlessCanvas = !0;
      var o = this.slider = new e.ChartEngine({
        container: s,
        preferences: {
          labels: !1,
          whitespace: 0
        }
      });
      o.xaxisHeight = 30, o.manageTouchAndMouse = !1, o.minimumCandleWidth = 0, o.chart.panel.subholder.style.cursor = "ew-resize";
      var h = o.chart.panel.yAxis;
      h.drawCurrentPriceLabel = !1, Object.defineProperty(h, "position", {
        get: function () {
          return n.slider.yAxisPosition || n.chart.panel.yAxis.position;
        },
        set: function (d) {
          n.slider.yAxisPosition = d;
        }
      });
      const {
        get: l,
        set: u
      } = Object.getOwnPropertyDescriptor(e.ChartEngine.YAxis.prototype, "width");
      Object.defineProperty(h, "width", {
        get: function () {
          return Math.max(l.call(h), n.chart.yAxis.width);
        },
        set: function (d) {
          u.call(h, d);
        }
      }), e.extend(h, t.yAxis), o.chart.baseline.userLevel = !1, o.controls.home && (o.controls.home.style.width = 0), o.initializeChart();
      var c = o.chart.panel.subholder;
      this.updateStyles = function (d, f, g) {
        n.setStyle(d, f, g), this.style = n.canvasStyle("stx_range_slider shading");
      }, this.display = function (d) {
        if (n.layout.rangeSlider !== d) {
          n.layout.rangeSlider = d, n.changeOccurred("layout");
          return;
        }
        a.style.display = d ? "" : "none", n.resizeChart(), window.dispatchEvent(new Event("resize")), d && (o.resizeChart(), o.initializeChart(), o.draw(), this.drawSlider());
      }, this.setSymbol = function (d) {
        o.chart.panel.display = o.chart.symbol = d, o.setMainSeriesRenderer(), o.resizeChart(), this.adjustRange(n.chart), o.draw(), this.drawSlider();
      }, this.acceptLayoutChange = function (d) {
        var f = !1;
        o.layout.rangeSlider !== d.rangeSlider && n.slider.display(d.rangeSlider);
        var g = ["chartType", "aggregationType", "periodicity", "interval", "timeUnit", "chartScale", "rangeSlider", "flipped", "extended", "marketSessions", "kagi", "rangebars", "renko", "priceLines", "pandf"];
        g.forEach(function (p) {
          e.equals(o.layout[p], d[p]) || (o.layout[p] = d[p], f = !0);
        }), e.trulyVisible(a) && f && (o.setMainSeriesRenderer(), o.draw(), this.drawSlider());
      }, this.adjustRange = function (d) {
        if (d.dataSet && !(!d.endPoints || !d.endPoints.begin)) {
          var f = o.chart;
          if (f.width) {
            var g = 0,
              p = 0;
            if (n.quoteDriver) {
              var m = {
                symbol: d.symbol,
                symbolObject: d.symbolObject,
                interval: n.layout.interval
              };
              (m.interval == "month" || m.interval == "week") && !n.dontRoll && (m.interval = "day");
              var x = n.quoteDriver.getQuoteFeed(m).behavior;
              x && x.bufferSize && (d.moreAvailable && (g = x.bufferSize), n.isHistoricalMode() && (p = x.bufferSize));
            }
            f.baseline.defaultLevel = d.baseline.actualLevel, f.scroll = Math.max(0, d.dataSet.length - n.tickFromDate(d.endPoints.begin) - g) + 1, f.maxTicks = f.scroll - p + 1, o.layout.candleWidth = f.width / f.maxTicks;
          }
        }
      }, this.copyData = function (d) {
        if (d.dataSet) {
          var f = o.chart;
          f.masterData = o.masterData = d.masterData, f.dataSet = d.dataSet, f.state = d.state, o.draw(), this.drawSlider();
        }
      }, this.calculateYAxisPosition = function () {
        var d = o.chart.panel,
          f = o.getYAxisCurrentPosition(d.yAxis, d);
        f != d.yAxis.position && o.calculateYAxisPositions();
      }, this.drawSlider = function () {
        if (e.trulyVisible(a) && !(!n.chart.dataSet || !n.chart.dataSet.length)) {
          var d = this.style;
          d || (d = this.style = n.canvasStyle("stx_range_slider shading"));
          var f = n.chart.panel,
            g = o.chart.context,
            p = o.chart.segmentImage || [],
            m = o.layout.candleWidth / 2,
            x = o.tickLeft = Math.max(n.tickFromPixel(f.left + m), 0),
            y = o.tickRight = Math.min(n.tickFromPixel(f.right - m), n.chart.dataSet.length - 1),
            b = o.pixelLeft = o.pixelFromTick(x) - (p[x] ? p[x].candleWidth / 2 : m),
            C = o.pixelRight = o.pixelFromTick(y) + (p[y] ? p[y].candleWidth / 2 : m),
            k = c.offsetLeft,
            M = k + c.offsetWidth;
          g.save(), g.beginPath(), g.fillStyle = d.backgroundColor, g.fillRect(k, c.offsetTop, b - k, c.offsetHeight), g.fillRect(M, c.offsetTop, C - M, c.offsetHeight), g.strokeStyle = d.borderTopColor, g.lineWidth = parseInt(d.borderWidth, 10), g.moveTo(b, c.offsetTop), g.lineTo(b, c.offsetTop + c.offsetHeight), g.moveTo(C, c.offsetTop), g.lineTo(C, c.offsetTop + c.offsetHeight), g.stroke(), g.beginPath(), g.lineWidth = parseInt(d.width, 10), g.lineCap = "round", g.moveTo(b, c.offsetTop + c.offsetHeight / 4), g.lineTo(b, c.offsetTop + 3 * c.offsetHeight / 4), g.moveTo(C, c.offsetTop + c.offsetHeight / 4), g.lineTo(C, c.offsetTop + 3 * c.offsetHeight / 4), g.stroke(), g.restore();
        }
      }, n.addEventListener("layout", function (d) {
        d.stx.slider.acceptLayoutChange(d.stx.layout);
      }), n.addEventListener("preferences", function (d) {
        const {
          language: f
        } = d.stx.preferences;
        e.I18N && o.preferences.language != f && e.I18N.setLocale(o, f), o.preferences.language = f, o.draw();
      }), n.addEventListener("symbolChange", function (d) {
        d.action == "master" && d.stx.slider.setSymbol(d.symbol);
      }), n.addEventListener("symbolImport", function (d) {
        d.action == "master" && d.stx.slider.setSymbol(d.symbol), d.stx.slider.acceptLayoutChange(d.stx.layout);
      }), n.addEventListener("theme", function (d) {
        if (o.clearPixelCache(), o.styles = {}, o.chart.container.style.backgroundColor = "", e.ThemeHelper) {
          var f = new e.ThemeHelper({
            stx: d.stx
          });
          f.params.stx = o, f.update();
        }
      }), n.append("createDataSet", function () {
        this.slider.adjustRange(this.chart), this.slider.copyData(this.chart);
      }), n.append("draw", function () {
        e.trulyVisible(a) && o.chart.dataSet && (this.slider.adjustRange(this.chart), this.slider.calculateYAxisPosition(), o.draw(), this.slider.drawSlider());
      }), n.prepend("resizeChart", function () {
        var d = i.parentElement,
          f = d.parentElement;
        parseFloat(getComputedStyle(d).height) - parseFloat(getComputedStyle(i).height);
        var g = e.elementDimensions(f).height,
          p = f.querySelectorAll(".chartContainer");
        Array.from(p).forEach(function (m) {
          m !== i && e.trulyVisible(m) && (g -= e.elementDimensions(m, {
            border: 1,
            padding: 1,
            margin: 1
          }).height);
        }), d.style.height = g + "px", this.layout.rangeSlider ? (o.chart.breakpoint !== this.chart.breakpoint && o.notifyBreakpoint(this.chart.breakpoint), a.style.display = "", o.resizeChart(), o.initializeChart(), o.draw(), this.slider.drawSlider()) : a.style.display = "none";
      }), ["mousedown", "touchstart", "pointerdown"].forEach(function (d) {
        c.addEventListener(d, function (f) {
          var g = o.backOutX(f.pageX);
          if (!(!g && g !== 0)) {
            g -= f.target.offsetLeft, o.startDrag = g, o.startPixelLeft = o.pixelLeft, o.startPixelRight = o.pixelRight;
            var p = n.slider.style;
            p || (p = n.slider.style = n.canvasStyle("stx_range_slider shading"));
            var m = parseInt(p.borderLeftWidth, 10);
            g += this.offsetLeft, g < o.pixelRight - m && (o.needsLeft = !0), g > o.pixelLeft + m && (o.needsRight = !0), !e.touchDevice && o.needsLeft && o.needsRight && f.target.classList.add("stx-drag-chart");
          }
        }, {
          passive: !1
        });
      }), ["mouseup", "mouseover", "touchend", "pointerup"].forEach(function (d) {
        c.addEventListener(d, function (f) {
          const {
            which: g,
            type: p
          } = f;
          g === 1 && p !== "pointerup" && p !== "mouseup" || (f.target.classList.remove("stx-drag-chart"), o.chart.panel.subholder.style.cursor = "ew-resize", o.startDrag = null, o.needsLeft = !1, o.needsRight = !1);
        });
      }), ["mousemove", "touchmove", "pointermove"].forEach(function (d) {
        c.addEventListener(d, function (f) {
          var g = o.startDrag;
          if (!(!g && g !== 0)) {
            var p = f.touches,
              m = (p && p.length ? o.backOutX(p[0].pageX) : o.backOutX(f.pageX)) - f.target.offsetLeft;
            if (!(!m && m !== 0)) {
              m -= g;
              var x = o.tickLeft,
                y = o.tickRight,
                b = o.startPixelLeft,
                C = o.startPixelRight,
                k = o.needsLeft,
                M = o.needsRight;
              if (k) b + m < o.chart.left && (m = o.chart.left - b), M && C + m >= o.chart.right && (m = o.chart.right - C, o.isHome() || (m += o.layout.candleWidth / 2)), x = o.tickFromPixel(b + m), M && (y = x + o.tickRight - o.tickLeft);else if (M) y = Math.min(o.tickFromPixel(C + m), n.chart.dataSet.length - 1);else return;
              var I = n.chart.width / (y - x + 1);
              y >= x && I >= n.minimumCandleWidth && (o.tickLeft = x, o.tickRight = y, n.chart.scroll = n.chart.dataSet.length - x, (!k || !M) && n.setCandleWidth(I), n.micropixels = 0, n.draw());
            }
          }
        }, {
          passive: !1
        });
      }), this.adjustRange(n.chart), this.copyData(n.chart);
    };
  },
  Ys = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.Shortcuts = e.Shortcuts || function ({
      stx: t,
      width: n = 580,
      windowForEachChart: r = !0,
      config: i
    } = {}) {
      if (!t) {
        console.warn("The Shortcuts addon requires an stx parameter");
        return;
      }
      this.stx = t, this.width = n, this.windowForEachChart = r, this.content = this.getShortcutContent(i), this.enclosingContainer = t.container.querySelector(".stx-subholder"), this.ensureMessagingAvailable(t), this.enableUI(t), this.cssRequired = !0, t.shortcuts = this;
    }, e.Shortcuts.prototype.enableUI = function (t) {
      t && e.UI && setTimeout(() => {
        const n = t.uiContext.getAdvertised("Layout");
        n.showShortcuts = (r, i) => this.toggle(i);
      });
    }, e.Shortcuts.prototype.ensureMessagingAvailable = function (t) {
      setTimeout(() => {
        const n = t.uiContext.topNode;
        n.querySelector("cq-floating-window") || n.append(document.createElement("cq-floating-window"));
      });
    }, e.Shortcuts.prototype.getShortcutContent = function (t) {
      const n = (t.drawingTools || []).filter(l => l.shortcut).map(({
          label: l,
          shortcut: u
        }) => `<div class="ciq-shortcut">
					<div>${l}</div>
					<div><span>Alt</span> + <span>${u.toUpperCase()}</span></div>
				</div>`).join(""),
        r = l => l.charCodeAt(l.length - 1) < 127,
        i = l => l === " + " ? "<span>+</span>" : l.split("+").map(u => u && u !== " " ? "<span>" + u + "</span>" : "").join(" + "),
        a = l => l.map(u => u.replace(/Arrow|Key|Digit|^ | $/g, "")).map(u => u.replace(/\+/, " + ")).reduce((u, c) => !u.includes(c) && r(c) ? u.concat(c) : u, []).map(i).join("<br>"),
        s = this.stx.container.closest("cq-context"),
        o = l => s.hasAttribute(l.toLowerCase() + "-active"),
        h = (t.hotkeyConfig && t.hotkeyConfig.hotkeys || []).map(({
          label: l,
          action: u,
          commands: c,
          extension: d
        }) => d && !o(d) ? "" : `<div class="ciq-shortcut"><div>${l || u}</div><div>${a(c)}</div></div>`).join("");
      return `
		<div class="ciq-shortcut-container">
			<div>
				<div><b>Drawing tools shortcuts</b></div>
				<div>${n}</div>
			</div>
			<hr>
			<div>
				<div><b>Hotkeys</b></div>
				<div>${h}</div>
			</div>
		</div>
	`;
    }, e.Shortcuts.prototype.toggle = function (t) {
      this.stx.dispatch("floatingWindow", {
        type: "shortcut",
        title: "Shortcuts",
        content: this.content,
        container: this.enclosingContainer,
        onClose: () => this.closed = !0,
        width: this.width,
        status: t,
        tag: this.windowForEachChart ? void 0 : "shortcut"
      });
    };
  },
  Xs = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.TableView = e.TableView || function ({
      stx: n,
      minColumnWidth: r = "84px",
      coverUIMaxWidth: i = 400,
      coverContainer: a,
      usePreviousCloseForChange: s = !0
    } = {}) {
      if (!n) {
        console.warn("The TableView addon requires an stx parameter");
        return;
      }
      this.stx = n, this.viewAdditionalColumns = !1, this.minColumnWidth = r, this.coverUIMaxWidth = i, this.coverContainer = a, this.usePreviousCloseForChange = s, this.builder = t, this.listeners = [], n.tableView = this, this.cssRequired = !0, e.UI && e.UI.observeProperty("uiContext", n, ({
        value: o
      }) => {
        o && setTimeout(() => {
          this.subscribeToChanges(o);
          const h = e.getFromNS(o.config, "hotkeyConfig.hotkeys", []).find(({
            action: l
          }) => l === "tableView");
          h && (h.action = () => {
            const {
              tableView: l
            } = document.body.keystrokeHub.context.stx;
            if (l) return l.toggle(), !0;
          });
        });
      });
    }, e.TableView.prototype.open = function (n) {
      n && (this.params = n);
      const {
        config: r = {},
        onClose: i
      } = this.params || {};
      if (this.view && this.close(!1), r.minColumnWidth = this.minColumnWidth, r.coverUIMaxWidth = this.coverUIMaxWidth, r.coverContainer = this.coverContainer, this.onClose = i, this.view = this.builder.createTable(this.stx, r), !this.view) return;
      e.I18N && e.I18N.translateUI(null, this.view);
      const {
          stx: a
        } = this,
        s = this.close.bind(this);
      setTimeout(() => this.removeCloseListener = h(this));
      const o = e.getFromNS(a, "uiContext.config.scrollbarStyling");
      o && (o.refresh(this.view.querySelector("tbody")), o.refresh(this.view.querySelector(".ciq-data-table-wrapper"), {
        suppressScrollY: !0
      }));
      function h(l) {
        const u = a.uiContext.topNode,
          c = p => p.closest(".ciq-data-table-container"),
          d = ({
            target: p
          }) => !c(p) && s();
        u.addEventListener("click", d);
        const f = p => {
          if (p.code === "Escape") {
            const {
              tableView: m
            } = document.body.keystrokeHub.context.stx;
            m && (m.close(), p.preventDefault());
          }
        };
        document.body.addEventListener("keydown", f);
        const g = e.getFn("UI.getUIManager")();
        return g && (l.view.show = l.view.hide = function () {}, g.openMenu(l.view, {})), () => {
          u.removeEventListener("click", d), document.body.removeEventListener("keydown", f), g && g.closeMenu(l.view);
        };
      }
    }, e.TableView.prototype.close = function (n = !0) {
      this.view && (this.view.remove(), this.view = null), n && this.onClose && this.onClose(), this.removeCloseListener && (this.removeCloseListener(), this.removeCloseListener = null);
    }, e.TableView.prototype.toggle = function () {
      this[this.view ? "close" : "open"]();
    }, e.TableView.prototype.subscribeToChanges = function (n, r = "channels.tableView") {
      const {
          channelSubscribe: i,
          channelWrite: a
        } = e.UI.BaseComponent.prototype,
        {
          channels: {
            tableView: s = r
          } = {}
        } = n.config || {},
        {
          stx: o
        } = this;
      i(s, h => {
        h ? o.tableView.open({
          onClose: () => {
            a(s, !1, o);
          }
        }) : o.tableView.close();
      }, o);
    };
    function t() {}
    t.colHeaders = {
      date: {
        label: "Date"
      },
      open: {
        label: "Open"
      },
      high: {
        label: "High"
      },
      low: {
        label: "Low"
      },
      close: {
        label: "Close"
      },
      pctChange: {
        label: "% Change",
        cls: "ciq-extra"
      },
      pctChangeVsAvg: {
        label: "% Change vs Average",
        cls: "ciq-extra"
      },
      volume: {
        label: "Volume",
        cls: "ciq-extra"
      }
    }, t.percentDecimalPlaces = 2, t.createTable = function (n, r = {}) {
      if (!n.chart || !n.chart.dataSegment) return;
      const {
          builder: i
        } = n.tableView,
        {
          getChartData: a,
          dataToHtml: s,
          dataToCsv: o,
          downloadCsv: h,
          getDateFormatter: l,
          getValueFormatter: u,
          getVolumeFormatter: c,
          getFilenameFormatter: d,
          getSeriesDataNames: f,
          getStudyDataNames: g,
          getChartCover: p
        } = i,
        m = Object.assign({}, this.colHeaders);
      if (n.chart.highLowBars || (delete m.open, delete m.high, delete m.low), !n.tableView.viewAdditionalColumns) for (let L in m) m[L].cls && delete m[L];
      const x = Object.values(m).map(L => L.label),
        y = f(n);
      y.forEach(L => m[L] = {
        label: L
      });
      const b = g(n);
      b.forEach(L => {
        x.includes(L) || (m[L] = {
          label: L
        });
      });
      const C = y.concat(b),
        {
          dateFormatter: k = l(n),
          valueFormatter: M = u(n),
          percentFormatter: I = u(n, this.percentDecimalPlaces),
          volumeFormatter: v = c(n),
          fileNameFormatter: S = d(n),
          minColumnWidth: w = "84px"
        } = r,
        T = a(n, {
          dateFormatter: k,
          valueFormatter: M,
          percentFormatter: I,
          volumeFormatter: v,
          additionalDataFields: C
        }),
        D = p(n, r),
        {
          symbolDisplay: F,
          symbol: P
        } = n.chart,
        _ = i.getCoverToolbar({
          symbol: F || P,
          viewAdditionalColumns: n.tableView.viewAdditionalColumns,
          copyFn: A,
          downloadFn: E,
          toggleAdditionalColumnsFn: () => {
            const {
              tableView: L
            } = n;
            L.viewAdditionalColumns = !L.viewAdditionalColumns, L.open();
          },
          closeFn: () => n.tableView.close()
        });
      D.appendChild(_);
      const V = s(T, {
        colHeaders: m,
        minColumnWidth: w
      });
      return D.appendChild(V), D;
      function A() {
        const L = document.createElement("textArea");
        document.body.appendChild(L), L.textContent = o(T, {
          colHeaders: m
        }), L.select(), document.execCommand("copy"), L.remove(), n.dispatch("notification", "copytoclipboard");
      }
      function E() {
        const L = o(T, {
            colHeaders: m
          }),
          N = S(L);
        h(L, N);
      }
    }, t.dataToHtml = function (n, {
      colHeaders: r,
      minColumnWidth: i
    }) {
      const a = Object.keys(r).length,
        s = `calc((100% - ${10 + a * 4}px ) / ${a})`,
        o = Object.entries(r).map(([, {
          label: c
        }], d) => `<th
			scope="col"
			style="width: ${s};"
			>${c.replace("(", "  (")}</th>`),
        h = n.map(c => `<tr>${Object.keys(r).map((f, g) => {
          const p = c[f];
          return g === 0 ? `<th scope="row"
								style="width: ${s}"
								>${p}</th>` : `<td style="width: ${s}">${p}</td>`;
        }).join("")}</tr>`),
        l = document.createElement("div");
      l.classList.add("ciq-data-table-wrapper");
      const u = i ? `calc(${a} * ${i})` : "";
      return l.innerHTML = `
		<table class="header-fixed"	${u ? `style="min-width: ${u}"` : ""}>
		<thead>${o.join("")}</thead>
		<tbody>${h.join("")}</tbody>
		</table>`, l;
    }, t.dataToCsv = function (n, {
      colHeaders: r,
      colSeparator: i = "\t"
    }) {
      const a = Object.entries(r).map(([, {
          label: o
        }]) => `"${o}"`).join(i),
        s = n.map(o => Object.keys(r).map(h => `"${o[h]}"`).join(i));
      return `${a}
${s.join(`
`)}`;
    }, t.downloadCsv = function (n, r = "filename") {
      const i = new Blob([n], {
          type: "text/csv;charset=utf-8;"
        }),
        a = document.createElement("a");
      a.href = window.URL.createObjectURL(i, {
        type: "text/plain"
      }), a.download = `${r}.csv`, a.style.display = "none", document.body.appendChild(a), a.click(), document.body.removeChild(a);
    }, t.getChartData = function (n, {
      dateFormatter: r,
      valueFormatter: i,
      percentFormatter: a,
      volumeFormatter: s,
      additionalDataFields: o
    }) {
      const h = n.chart.dataSegment.filter(f => f !== null),
        {
          usePreviousCloseForChange: l
        } = n.tableView;
      let u = [],
        c = 0;
      const d = h.reduce((f, {
        Close: g,
        iqPrevClose: p,
        Open: m
      }) => {
        const x = l ? p : m;
        return typeof g > "u" || Number.isNaN(g) || typeof x > "u" || Number.isNaN(x) ? f : (c++, f + (g - x) / x);
      }, 0) / c;
      return h.forEach((f, g) => {
        const {
            DT: p,
            displayDate: m,
            High: x,
            Low: y,
            Open: b,
            Close: C,
            iqPrevClose: k,
            Volume: M
          } = f,
          I = l ? k : b,
          v = (C - I) / I,
          S = m || (n.displayZone ? e.convertTimeZone(p, n.dataZone, n.displayZone) : p),
          w = {
            DT: p,
            date: r(S),
            open: i(b),
            close: i(C),
            change: i(C - I),
            pctChange: a(v * 100),
            pctChangeVsAvg: a((v - d) * 100),
            high: i(x),
            low: i(y),
            volume: s(M)
          };
        o.forEach(T => {
          let D = f[T];
          if (D == null) {
            w[T] = "";
            return;
          }
          typeof D == "object" && (D = D.Close), w[T] = i(D);
        }), u.push(w);
      }), u.sort((f, g) => g.DT - f.DT), u;
    }, t.getDateFormatter = function (n) {
      return (r, i) => r ? e.displayableDate(n, n.chart, r, !0) : "";
    }, t.getValueFormatter = function (n, r) {
      const {
        chart: {
          panel: i,
          yAxis: a
        },
        layout: {
          chartScale: s
        }
      } = n;
      let o;
      return a.originalPriceFormatter && a.originalPriceFormatter.func ? o = h => a.originalPriceFormatter.func(n, i, h, r) : a.priceFormatter && s != "percent" && s != "relative" ? o = h => a.priceFormatter(n, i, h, r) : o = h => n.formatYAxisPrice(h, i, r), h => o(h).replace(/^-*0\.0*$/, "0");
    }, t.getVolumeFormatter = function (n) {
      return r => {
        if (r == null) return "";
        if (n.internationalizer) return n.internationalizer.priceFormatters[0].format(r);
        const i = r.toString().split(".");
        return i[0] = i[0].replace(/\B(?=(\d{3})+(?!\d))/g, ","), i[0];
      };
    }, t.getFilenameFormatter = function (n) {
      return r => {
        const i = n.chart.symbolDisplay || n.chart.symbol;
        let a, s;
        if (r) {
          const o = r.split(`
`);
          o.length > 1 && ([, a = ""] = o[1].match(/^"([^"]*)"/) || [], [, s = ""] = o[o.length - 1].match(/^"([^"]*)"/) || [], a = a.replace(/:/g, ".").replace(/\//g, "-"), s = s.replace(/:/g, ".").replace(/\//g, "-"));
        }
        return `${i}${a ? ` (${a} _ ${s})` : ""}`;
      };
    }, t.getChartCover = function (n, {
      coverUIMaxWidth: r,
      coverContainer: i
    }) {
      const a = i && document.querySelector(i) || (n.uiContext && n.container.offsetWidth < r ? n.uiContext.topNode : n.container.parentElement.parentElement),
        s = document.createElement("div");
      return Object.assign(s.style, {
        top: 0,
        left: 0,
        right: 0,
        bottom: 0
      }), s.classList.add("ciq-data-table-container"), a.appendChild(s), s;
    }, t.getCoverToolbar = function ({
      symbol: n,
      viewAdditionalColumns: r,
      copyFn: i,
      downloadFn: a,
      toggleAdditionalColumnsFn: s,
      closeFn: o
    }) {
      const h = document.createElement("div");
      h.classList.add("ciq-data-table-toolbar"), h.innerHTML = `
		<div class="ciq-data-table-title"></div>
		<button class="ciq-data-table-copy">${this.copyLabel}</button>
		<button class="ciq-data-table-download">${this.downloadLabel}</button>
		<button class="ciq-data-table-additionalColumns">${this.getAdditionalColumnLabel(r)}</button>
		<cq-close />
	`;
      const l = h.querySelector(".ciq-data-table-title");
      l.textContent = n;
      const u = h.querySelector(".ciq-data-table-copy");
      i ? u.addEventListener("click", i) : u.style.display = "none";
      const c = h.querySelector(".ciq-data-table-download");
      a ? c.addEventListener("click", function () {
        c.blur(), a();
      }) : c.style.display = "none";
      const d = h.querySelector(".ciq-data-table-additionalColumns");
      return s ? d.addEventListener("click", s) : d.style.display = "none", h.close = o, h;
    }, t.copyLabel = "Copy", t.downloadLabel = "Download", t.getAdditionalColumnLabel = function (n) {
      return `<span>${n ? "- " : "+ "}</span>Additional columns`;
    }, t.getStudyDataNames = function (n) {
      return Object.values(n.layout.studies || {}).map(r).reduce((a, s) => a.concat(s), []);
      function r(a) {
        return Object.keys(a.outputMap).filter(i);
      }
      function i(a) {
        return n.chart.dataSegment.some(s => s && s[a]);
      }
    }, t.getSeriesDataNames = function (n) {
      return Object.values(n.chart.seriesRenderers || {}).filter(r => r.params.name !== "_main_series").map(r => r.seriesParams.map(({
        symbol: i
      }) => i)).reduce((r, i) => r.concat(i), []);
    };
  },
  Ks = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.Marker ? e.Tooltip = e.Tooltip || function (t) {
      if (!e.Marker) {
        console.warn("CIQ.Tooltip addon requires CIQ.Marker module to be enabled.");
        return;
      }
      this.cssRequired = !0;
      const {
          stx: n,
          ohl: r,
          change: i,
          volume: a,
          series: s,
          studies: o,
          interpolation: h,
          showOverBarOnly: l,
          showBarHighlight: u = !0,
          useDataZone: c
        } = t,
        {
          container: d
        } = n.chart;
      let f = d.querySelector("stx-hu-tooltip");
      f || (f = document.createElement("stx-hu-tooltip"), d.appendChild(f));
      let g = d.querySelector(".stx-hu-tooltip-highlight");
      g || (g = document.createElement("div"), g.classList.add("stx-hu-tooltip-highlight"), d.appendChild(g)), e.Marker.Tooltip = function (x) {
        this.className || (this.className = "CIQ.Marker.Tooltip"), this.highlightEl = g, x.label = "tooltip", e.Marker.call(this, x);
      }, e.inheritsFrom(e.Marker.Tooltip, e.Marker, !1), e.Marker.Tooltip.sameBar = function (x, y) {
        return !(!x || !y || +x.DT != +y.DT || x.Close != y.Close || x.Open != y.Open || x.Volume != y.Volume);
      }, e.Marker.Tooltip.placementFunction = function (x) {
        if (!p()) {
          for (var y = 30, b = x.stx, C = 0; C < x.arr.length; C++) {
            var k = x.arr[C],
              M = b.barFromPixel(b.cx),
              I = b.chart.dataSegment[M],
              v,
              S = !0,
              w,
              T;
            if (I != "undefined" && I && I.DT && (v = !0, I.High && (w = b.pixelFromPrice(I.High)), I.Low && (T = b.pixelFromPrice(I.Low)), b.chart.highLowBars || I.Close && (w = b.pixelFromPrice(I.Close) - 15, T = b.pixelFromPrice(I.Close) + 15), l && !(b.cy >= w && b.cy <= T) && (S = !1)), !(b.insideChart && !b.openDialog && !b.activeDrawing && !b.grabbingScreen && v && S)) {
              g.style.display = "none", k.node.style.left = "-50000px", k.node.style.right = "auto", k.lastBar = {};
              return;
            }
            if (e.Marker.Tooltip.sameBar(b.chart.dataSegment[M], k.lastBar) && M != b.chart.dataSegment.length - 1) return;
            k.lastBar = b.chart.dataSegment[M];
            var D = k.lastBar.candleWidth || b.layout.candleWidth;
            parseInt(getComputedStyle(k.node).width, 10) + b.chart.panel.left + y + D < b.backOutX(e.ChartEngine.crosshairX) ? (k.node.style.left = "auto", k.node.style.right = Math.round(d.clientWidth - b.pixelFromBar(M) + y) + "px") : (k.node.style.left = Math.round(b.pixelFromBar(M) + y) + "px", k.node.style.right = "auto");
            var F = parseInt(getComputedStyle(k.node).height, 10),
              P = Math.round(e.ChartEngine.crosshairY - b.top - F / 2);
            if (P + F > b.height && (P = b.height - F), P < 0 && (P = 0), k.node.style.top = P + "px", u && !b.layout.crosshair) {
              const A = k.lastBar.candleWidth || b.layout.candleWidth,
                E = b.pixelFromBar(M) - A / 2;
              let L = A;
              E + L > b.chart.width && (L = b.chart.width - E), g.style.display = "block", g.style.left = E + "px", g.style.width = L + "px";
            } else g.style.display = "none";
          }
          var _ = b.overXAxis,
            V = b.overYAxis;
          b.overXAxis = b.overYAxis = !1, b.overXAxis = _, b.overYAxis = V;
        }
      };
      function p() {
        const {
            headsUp: x
          } = n.layout,
          y = !!n.huTooltip,
          b = typeof x != "object",
          C = x === !1,
          k = x && (x === "floating" || x.floating);
        if (y && (!(k || b) || C)) {
          const {
              huTooltip: M
            } = n,
            {
              node: I
            } = M || {};
          return I && (I.style.left = "-50000px", I.style.right = "auto", M.lastBar = {}, M.highlightEl && (M.highlightEl.style.display = "none")), !0;
        }
        return !1;
      }
      function m() {
        if (!p()) {
          var x = this.barFromPixel(this.cx),
            y = this.chart.dataSegment[x];
          if (!y) {
            this.positionMarkers();
            return;
          }
          if (!(e.Marker.Tooltip.sameBar(y, this.huTooltip.lastBar) && x != this.chart.dataSegment.length - 1)) {
            var b = this.huTooltip.node;
            Array.from(b.parentElement.querySelectorAll("[auto]")).forEach(function (le) {
              le.remove();
            }), Array.from(b.parentElement.querySelectorAll("stx-hu-tooltip-field-value")).forEach(function (le) {
              le.innerHTML = "";
            });
            var C = this.chart.panel,
              k = C.yAxis,
              M = {},
              I = [];
            if (I.push({
              member: "DT",
              display: "DT",
              panel: C,
              yAxis: k
            }), I.push({
              member: "Close",
              display: "Close",
              panel: C,
              yAxis: k
            }), M.DT = M.Close = 1, i && e.ChartEngine.isDailyInterval(this.layout.interval) && I.push({
              member: "Change",
              display: "Change",
              panel: C,
              yAxis: k
            }), r && (I.push({
              member: "Open",
              display: "Open",
              panel: C,
              yAxis: k
            }), I.push({
              member: "High",
              display: "High",
              panel: C,
              yAxis: k
            }), I.push({
              member: "Low",
              display: "Low",
              panel: C,
              yAxis: k
            }), M.Open = M.High = M.Low = 1), a && (I.push({
              member: "Volume",
              display: "Volume",
              panel: null,
              yAxis: null
            }), M.Volume = 1), s) {
              var v = this.chart.seriesRenderers;
              for (var S in v) {
                var w = v[S];
                if (w !== this.mainSeriesRenderer) {
                  C = this.panels[w.params.panel], k = w.params.yAxis, !k && w.params.shareYAxis && (k = C.yAxis);
                  for (var T = 0; T < w.seriesParams.length; T++) {
                    var D = w.seriesParams[T],
                      F = D.symbol,
                      P = D.field;
                    F ? P && F != P && (F = e.createObjectChainNames(F, P)[0]) : F = P;
                    var _ = D.display || D.symbol || D.field;
                    F && !M[_] && (I.push({
                      member: F,
                      display: _,
                      panel: C,
                      yAxis: k,
                      isSeries: !0
                    }), M[_] = 1);
                  }
                }
              }
            }
            if (o) for (var V in this.layout.studies) {
              var A = this.layout.studies[V];
              C = this.panels[A.panel], k = C && A.getYAxis(this);
              for (var E in this.layout.studies[V].outputMap) E && !M[E] && (I.push({
                member: E,
                display: E,
                panel: C,
                yAxis: k
              }), M[E] = 1);
              M[V + "_hist"] || (I.push({
                member: V + "_hist",
                display: V + "_hist",
                panel: C,
                yAxis: k
              }), I.push({
                member: V + "_hist1",
                display: V + "_hist1",
                panel: C,
                yAxis: k
              }), I.push({
                member: V + "_hist2",
                display: V + "_hist2",
                panel: C,
                yAxis: k
              }), M[V + "_hist"] = 1);
            }
            for (var L = 0; L < I.length; L++) {
              var N = I[L],
                U = N.member,
                B = N.display,
                O = U == "DT";
              O && !c && !e.ChartEngine.isDailyInterval(n.layout.interval) && (U = "displayDate"), C = N.panel, k = N.yAxis;
              var R = null;
              k && (!C || C !== C.chart.panel ? k.decimalPlaces || k.decimalPlaces === 0 ? R = k.decimalPlaces : (k.maxDecimalPlaces || k.maxDecimalPlaces === 0) && (R = k.maxDecimalPlaces) : (R = Math.max(k.printDecimalPlaces, C.chart.decimalPlaces), (k.maxDecimalPlaces || k.maxDecimalPlaces === 0) && (R = Math.min(R, k.maxDecimalPlaces))));
              var H = null,
                z = e.existsInObjectChain(y, U);
              z ? H = z.obj[z.member] : U == "Change" && (H = y.Close - y.iqPrevClose);
              var W = B.replace(/^(Result )(.*)/, "$2");
              if (h && I[L].isSeries && (H === null || typeof H > "u")) {
                var G = this.valueFromInterpolation(x, W, "Close", C, k);
                if (G === null) break;
                H = G;
              }
              if ((H || H === 0) && (O || typeof H != "object" || H.Close || H.Close === 0)) {
                var Z = "";
                (H.Close || H.Close === 0) && (H = H.Close), H.constructor == Number ? k ? k.originalPriceFormatter && k.originalPriceFormatter.func ? Z = k.originalPriceFormatter.func(this, C, H, R) : k.priceFormatter && k.priceFormatter != e.Comparison.priceFormat ? Z = k.priceFormatter(this, C, H, R) : Z = this.formatYAxisPrice(H, C, R, k) : Z = H : H.constructor == Date ? O && this.controls.floatDate && this.controls.floatDate.innerHTML ? this.chart.xAxis.noDraw ? Z = "N/A" : Z = e.displayableDate(this, C.chart, H) : (Z = e.yyyymmdd(H), e.ChartEngine.isDailyInterval(this.layout.interval) || (Z += " " + H.toTimeString().substr(0, 8))) : Z = H;
                var X = b.querySelector("stx-hu-tooltip-field[field=\"" + W + "\"]");
                if (X) {
                  X.querySelector("stx-hu-tooltip-field-value").innerHTML = Z;
                  var ie = X.querySelector("stx-hu-tooltip-field-name");
                  ie.innerHTML === "" && (ie.innerHTML = this.translateIf(W));
                } else {
                  var j = document.createElement("stx-hu-tooltip-field");
                  j.setAttribute("auto", !0);
                  var J = document.createElement("stx-hu-tooltip-field-name");
                  J.innerHTML = this.translateIf(W), j.appendChild(J);
                  var ae = document.createElement("stx-hu-tooltip-field-value");
                  ae.innerHTML = Z, j.appendChild(ae), b.appendChild(j);
                }
              } else {
                var se = b.querySelector("stx-hu-tooltip-field[field=\"" + W + "\"]");
                if (se) {
                  var ne = se.querySelector("stx-hu-tooltip-field-name");
                  ne.innerHTML !== "" && (se.querySelector("stx-hu-tooltip-field-value").innerHTML = "n/a");
                }
              }
            }
            this.huTooltip.render();
          }
        }
      }
      n.append("deleteHighlighted", function () {
        this.huTooltip.lastBar = {}, this.headsUpHR();
      }), n.append("headsUpHR", m), n.append("createDataSegment", m), n.huTooltip = new e.Marker.Tooltip({
        stx: n,
        xPositioner: "bar",
        chartContainer: !0,
        node: f
      });
    } : console.error("tooltip addon requires first activating markers feature.");
  },
  Js = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.Animation = e.Animation || function (t) {
      if (!t) throw new Error("Invalid constructor arguments.");
      var n, r, i;
      if (t instanceof e.ChartEngine ? (n = arguments[0], r = arguments[1], i = arguments[2]) : (n = t.stx, r = t.animationParameters, i = t.easeMachine), !n) return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");
      var a = {
        stayPut: !1,
        ticksFromEdgeOfScreen: 5,
        granularity: 1000000
      };
      r = e.extend(a, r), a.tension && (n.chart.tension = r.tension), n.tickAnimator = i || new e.EaseMachine(Math.easeOutCubic, 1000);
      var s = new e.EaseMachine(Math.easeInOutCubic, 1000),
        o = ["#0298d3", "#19bcfc", "#5dcffc", "#9ee3ff"],
        h = 0,
        l = 20,
        u = 0,
        c = !1,
        d = null;
      function f() {
        c = !1, d = null;
      }
      n.addEventListener(["symbolChange", "layout"], function (g) {
        f();
      }), n.prepend("updateCurrentMarketData", function (g, p, m, x) {
        p || (p = this.chart), x && x.fromTrade && (p.closePendingAnimation || p.closePendingAnimation === 0) && (x.finalClose = p.closePendingAnimation);
      }), n.prepend("updateChartData", function (g, p, m) {
        var x = this;
        if (p || (p = x.chart), !p || !p.defaultChartStyleConfig || p.defaultChartStyleConfig == "none" || m !== void 0 && (m.animationEntry || m.secondarySeries) || !p.dataSegment) return;
        function y(O) {
          if (p.masterData) for (var R = p.masterData.length - 1; R >= 0; R--) {
            var H = p.masterData[R];
            if (H.Close || H.Close === 0) {
              H.Close = O.Close, O.LastSize && (H.LastSize = O.LastSize), O.LastTime && (H.LastTime = O.LastTime), x.updateCurrentMarketData({
                Close: H.Close,
                DT: H.DT,
                LastSize: H.LastSize,
                LastTime: H.LastTime
              }), x.createDataSet(null, null, {
                appending: !0
              });
              return;
            }
          }
        }
        function b() {
          if (p.animatingHorizontalScroll && (p.animatingHorizontalScroll = !1, x.micropixels = x.nextMicroPixels = x.previousMicroPixels, p.lastTickOffset = 0), p.closePendingAnimation !== null) {
            var O = p.closePendingAnimation;
            p.closePendingAnimation = null, y({
              Close: O
            });
          }
        }
        var C = x.tickAnimator,
          k = this.mainSeriesRenderer && this.mainSeriesRenderer.supportsAnimation;
        if (k) {
          if (!C) {
            console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");
            return;
          }
          if (this.prevSymbol != p.symbol && (this.prevQuote = 0, p.closePendingAnimation = null, this.prevSymbol = p.symbol), b(), C.stop(), g.length > 2) return;
        }
        var M = e.clone(m);
        M || (M = {}), M.animationEntry = !0, M.bypassGovernor = !0, M.noCreateDataSet = !1, M.appending = !0, M.firstLoop = !0;
        var I = this.chart.symbol,
          v = this.layout.periodicity,
          S = this.layout.interval,
          w = this.layout.timeUnit;
        function T(O, R, H) {
          return function (z) {
            var W = z.Close;
            if (!p.dataSet.length || I != p.symbol || v != x.layout.periodicity || S != x.layout.interval || w != x.layout.timeUnit) {
              C.stop(), b();
              return;
            }
            var G = e.clone(O);
            G.Adj_Close = null, G.Close = Math.round(W * r.granularity) / r.granularity, H ? (!G.Open && G.Open !== 0 && (G.Open = G.Close), !G.High && G.High !== 0 && (G.High = Math.max(G.Open, G.Close)), !G.Low && G.Low !== 0 && (G.Low = Math.min(G.Open, G.Close))) : (O.Close > R.High && (G.High = G.Close), O.Close < R.Low && (G.Low = G.Close)), p.animatingHorizontalScroll && (x.micropixels = z.micropixels, p.lastTickOffset = z.lineOffset), M.updateDataSegmentInPlace = !C.hasCompleted;
            var Z = [G];
            H && x.layout.interval !== "tick" && Z.unshift(R), x.updateChartData(Z, p, M), M.firstLoop = !1, C.hasCompleted && b();
          };
        }
        if (k) {
          var D = g[g.length - 1];
          this.prevQuote = this.currentQuote();
          var F = !1,
            P = !1;
          if (v == 1 && g.length == 2) {
            this.prevQuote = g[0];
            var _ = p.dataSet.length;
            y(this.prevQuote), _ == p.dataSet.length && (P = !0);
          }
          if (!D || !D.Close || !this.prevQuote || !this.prevQuote.Close) return !1;
          if (this.extendedHours && p.market.market_def) {
            var V = D.DT;
            if (e.ChartEngine.isDailyInterval(S)) c = !p.market.isMarketDate(V);else if (!d || d <= V) {
              var A = p.market.getSession(V);
              c = A !== "" && (!this.layout.marketSessions || !this.layout.marketSessions[A]), d = p.market[c ? "getNextOpen" : "getNextClose"](V);
            }
            if (c) return this.draw(), !1;
          }
          var E = v;
          S == "second" || w == "second" ? E *= 1000 : (S == "minute" || w == "minute") && (E *= 60000), isNaN(S) || (E *= S), S == "day" || w == "day" ? F = D.DT.getDate() != this.prevQuote.DT.getDate() : S == "week" || w == "week" ? F = D.DT.getDate() >= this.prevQuote.DT.getDate() + 7 : S == "month" || w == "month" ? F = D.DT.getMonth() != this.prevQuote.DT.getMonth() : F = D.DT.getTime() >= this.prevQuote.DT.getTime() + E;
          var L = !this.mainSeriesRenderer || !this.mainSeriesRenderer.standaloneBars,
            N = 0;
          if (F) if (this.animations.zoom.hasCompleted) {
            var U = this.layout.candleWidth;
            if (p.scroll <= p.maxTicks) for (; this.micropixels > 0;) p.scroll++, this.micropixels -= U;
            p.scroll <= p.maxTicks ? (this.previousMicroPixels = this.micropixels, this.nextMicroPixels = this.micropixels + U, N = U * -1, p.dataSegment.length < p.maxTicks - r.ticksFromEdgeOfScreen && !r.stayPut && (this.nextMicroPixels = this.micropixels, p.scroll++), p.animatingHorizontalScroll = L, p.previousDataSetLength = p.dataSet.length) : P || p.scroll++;
          } else return !1;
          p.closePendingAnimation = D.Close;
          var B = F && !L ? D.Open : this.prevQuote.Close;
          return C.run(T(D, e.clone(this.prevQuote), F), {
            Close: B,
            micropixels: this.nextMicroPixels,
            lineOffset: N
          }, {
            Close: D.Close,
            micropixels: this.micropixels,
            lineOffset: 0
          }), !0;
        }
      }), n.prepend("renderYAxis", function (g) {
        if (this.grabbingScreen || !this.isHome()) return;
        var p = this.mainSeriesRenderer && this.mainSeriesRenderer.supportsAnimation;
        if (!p) return;
        var m = g.panel,
          x = m.yAxis;
        if (e.Comparison && x.priceFormatter == e.Comparison.priceFormat) return;
        function y(k) {
          return function (M) {
            g.animatedLow = M.low, g.animatedHigh = M.high, k.draw();
          };
        }
        if (!g.prevLowValue && g.prevLowValue !== 0 && (g.prevLowValue = g.animatedLow = g.lowValue), !g.prevHighValue && g.prevHighValue !== 0 && (g.prevHighValue = g.animatedHigh = g.highValue), s.running || (g.animatingVerticalScroll = !1), g.prevLowValue >= g.lowValue && g.prevHighValue <= g.highValue) {
          g.animatingVerticalScroll && (x.highValue = g.animatedHigh, x.lowValue = g.animatedLow);
          return;
        }
        if (s.running && s.stop(), !(!g.lowValue && !g.highValue)) {
          var b = g.prevLowValue,
            C = g.prevHighValue;
          g.prevLowValue = g.lowValue, g.prevHighValue = g.highValue, g.animatingVerticalScroll = !0, s.run(y(this), {
            low: b,
            high: C
          }, {
            low: g.lowValue,
            high: g.highValue
          }), x.lowValue = g.animatedLow, x.highValue = g.animatedHigh;
        }
      }), n.append("draw", function () {
        if (!c && this.chart.dataSet && this.chart.dataSet.length && this.mainSeriesRenderer && this.mainSeriesRenderer.supportsAnimation) {
          u % l === 0 && (h++, u = 0), u++;
          var g = this.chart.context,
            p = this.chart.panel,
            m = this.currentQuote();
          if (!m) return;
          var x = m.Close,
            y = this.pixelFromTick(m.tick, this.chart);
          this.chart.lastTickOffset && (y = y + this.chart.lastTickOffset);
          var b = this.pixelFromPrice(x, p);
          this.chart.yAxis.left > y && this.chart.yAxis.top <= b && this.chart.yAxis.bottom >= b && (h >= o.length && (h = 0), g.beginPath(), g.moveTo(y, b), g.arc(y, b, 2 + h * 1.07, 0, Math.PI * 2, !1), g.fillStyle = o[h], g.fill());
        }
      });
    };
  },
  eo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.ContinuousZoom = e.ContinuousZoom || function (t) {
      this.cssRequired = !0, this.update(t), this.stx.continuousZoom = this, this.addSmartZoomButton = function () {
        var n = this.stx.registerChartControl && this.stx.registerChartControl("stx-smart-zoom", "SmartZoom (Alt + 0)", function (r) {
          return function (i) {
            r.smartZoomToggle(i), i.stopPropagation();
          };
        }(this));
        n && (this.stx.addEventListener("layout", function (r) {
          r.stx.layout.smartzoom === !0 ? n.classList.add("active") : n.classList.remove("active");
        }), this.stx.addEventListener("symbolImport", function (r) {
          r.stx.layout.smartzoom === !1 && n.classList.remove("active");
        }));
      }, this.smartZoomToggle = function (n) {
        this.smartZoomEnable(!this.stx.layout.smartzoom);
      }, this.smartZoomEnable = function (n) {
        this.stx.layout.smartzoom = n, this.stx.changeOccurred("layout");
      }, this.addSmartZoomButton(), this.smartZoomEnable(!0);
    }, e.ContinuousZoom.prototype.update = function (t) {
      t || (t = {}), this.stx = t.stx, this.periodicities = t.periodicities, this.boundaries = t.boundaries;
    }, e.ContinuousZoom.prototype.execute = function (t) {
      function n(f) {
        var g = f.period || f.periodicity,
          p = f.interval,
          m = f.timeUnit || "minute";
        switch (isNaN(p) && (m = p, p = 1), m) {
          case "month":
            p *= 4.35;
          case "week":
            p *= 7;
          case "day":
            p *= 1440;
          case "minute":
            p *= 60;
          case "second":
            break;
          case "millisecond":
            p /= 1000;
            break;
          default:
            return null;
        }
        return g * p;
      }
      if (!(!this.stx || !this.stx.layout.smartzoom)) {
        var r = this.periodicities,
          i = this.boundaries,
          a = this.stx,
          s = a.layout,
          o = a.chart;
        if (!(!r || !i) && (!t && i.maxCandleWidth && s.candleWidth > i.maxCandleWidth || t && i.minCandleWidth && s.candleWidth < i.minCandleWidth || !t && i.minTicks && o.maxTicks < i.minTicks || t && i.maxTicks && o.maxTicks > i.maxTicks)) {
          for (var h = {
              value: t ? Number.MAX_VALUE : 0
            }, l = n(s), u = 0; u < r.length; u++) {
            var c = n(r[u]);
            (c > l && c < h.value && t || c < l && c > h.value && !t) && (h = {
              value: c,
              periodicity: r[u]
            });
          }
          var d = h.periodicity;
          d && a.setRange({
            dtLeft: o.xaxis[0].DT,
            dtRight: o.xaxis[o.xaxis.length - 1].DT,
            dontSaveRangeToLayout: !0,
            periodicity: d
          });
        }
      }
    };
  },
  to = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.Outliers = e.Outliers || function (t) {
      if (t || (t = {}), !t.stx) {
        console.warn("The Outliers addon requires an stx parameter");
        return;
      }
      Array.isArray(t.altColors) || (t.altColors = ["#323390", "#66308f", "#0073ba", "#f4932f", "#0056a4", "#00a99c", "#00a553", "#ea1d2c", "#e9088c", "#fff126", "#912a8e", "#ee652e", "#00afed", "#8ec648"]), this.stx = t.stx, this.stx.outliers = this, this.cssRequired = !0, this.multiplier = t.multiplier || 3, this.altColors = t.altColors, this.axisData = {}, this.stx.addEventListener("layout", function (r) {
        Object.keys(r.stx.outliers.axisData).forEach(function (i) {
          this.removeAllMarkers(this.axisData[i]), delete this.axisData[i];
        }.bind(r.stx.outliers));
      }), this.processDataSet = function (r, i, a) {
        if (!r.length || r.length <= 1) return !1;
        var s = [0, 0];
        if (!this.axisData[a.name]) {
          var o = "",
            h = -1;
          Object.keys(this.axisData).forEach(function (u) {
            this.axisData[u].panel.name == i.name && h++;
          }.bind(this)), h > -1 && h < this.altColors.length && (o = this.altColors[h]), this.axisData[a.name] = {
            axis: a,
            panel: i,
            displayState: "none",
            isFlipped: !1,
            originalZoom: a.zoom,
            markerColor: o,
            markers: {},
            axisMarkers: {}
          };
        }
        var l = this.axisData[a.name];
        return Object.assign(l, this.find(r)), this.refreshMarkerArray(l), this.refreshMarkers(l), (l.displayState === "low" || l.displayState === "all") && l.outlierMin !== null ? s[0] = l.outlierMin : s[0] = l.trendMin, (l.displayState === "high" || l.displayState === "all") && l.outlierMax !== null ? s[1] = l.outlierMax : s[1] = l.trendMax, s;
      }, this.find = function (r) {
        if (!(!r.length || r.length <= 0)) {
          var i = function (C, k) {
              return {
                quote: C.quote,
                DT: C.quote.DT,
                value: C.value,
                position: k
              };
            },
            a = null,
            s = null,
            o = null,
            h = null,
            l = null,
            u = null,
            c = [],
            d = r.slice();
          d.sort(function (C, k) {
            return C.value - k.value;
          });
          var f = d.length,
            g = d[Math.floor(f / 4)].value,
            p = d[Math.floor(f * 0.75)].value,
            m = p - g;
          a = g - m * this.multiplier, s = p + m * this.multiplier;
          for (var x = 0; x < f; x++) {
            var y = d[x],
              b = d[f - (x + 1)];
            if (y.value <= a && c.push(i(y, "low")), b.value >= s && c.push(i(b, "high")), l === null && y.value <= a && (l = y.value), u === null && b.value >= s && (u = b.value), o === null && y.value > a && (o = y.value), h === null && b.value < s && (h = b.value), o !== null && h !== null) break;
          }
          return {
            minValue: a,
            maxValue: s,
            trendMin: o,
            trendMax: h,
            outlierMin: l,
            outlierMax: u,
            activeOutliers: c
          };
        }
      }, this.refreshMarkerArray = function (r) {
        this.deprecateMarkers(r);
        var i = r.markers;
        r.activeOutliers.forEach(function (a) {
          var s = a.DT.getTime().toString();
          i[s] || (i[s] = {
            isFresh: !0,
            type: "quote",
            value: a.value,
            marker: this.markOutlier(a, a.position, r)
          }), i[s].isFresh = !0;
        }.bind(this)), r.outlierMax !== null && (i.axisHigh || (i.axisHigh = {
          isFresh: !0,
          type: "axis",
          value: r.outlierMax,
          marker: this.markAxis("high", r)
        }), i.axisHigh.isFresh = !0), r.outlierMin !== null && (i.axisLow || (i.axisLow = {
          isFresh: !0,
          type: "axis",
          value: r.outlierMin,
          marker: this.markAxis("low", r)
        }), i.axisLow.isFresh = !0);
      }, this.setDisplayState = function (r, i) {
        r != "high" && r != "low" && r != "all" && (r = "none");
        var a = r;
        i.displayState == "all" && r == "high" ? a = "low" : i.displayState == "all" && r == "low" ? a = "high" : i.displayState == "high" && r == "low" || i.displayState == "low" && r == "high" ? a = "all" : i.displayState == r && (a = "none"), i.displayState = a, i.axis.zoom = i.originalZoom, this.refreshMarkers(i), this.stx.draw();
      }, this.deprecateMarkers = function (r) {
        var i = function (a) {
          a.marker && !a.isFresh ? (a.marker.remove && a.marker.remove(), a.marker = null) : a.isFresh = !1;
        };
        Object.keys(r.markers).forEach(function (a) {
          i(this.markers[a]), this.markers[a].marker || delete this.markers[a];
        }.bind(r));
      }, this.removeAllMarkers = function (r) {
        Object.keys(r.markers).forEach(function (i) {
          var a = r.markers[i].marker;
          a && (a.remove && a.remove(), a = null), a || delete r.markers[i];
        });
      }, this.updateMarkerVisibility = function () {
        Object.keys(this.markers).forEach(function (r) {
          this.displayState == "all" || this.markers[r].marker.node.classList.contains(this.displayState) ? this.markers[r].marker.node.style.display = "none" : this.markers[r].marker.node.style.display = "block";
        }.bind(this));
      }, this.refreshAxisMarkers = function (r, i) {
        var a = !1;
        r.classList.contains("high") && (a = !0);
        var s = i.axis.top;
        (!i.isFlipped && !a || i.isFlipped && a) && (s = i.axis.bottom - 50), r.classList.contains("nano") && (s = i.axis.top + i.axis.height / 2 - 22);
        var o = Math.floor(i.axis.left).toString() + "px",
          h = Math.floor(s).toString() + "px",
          l = a ? i.outlierMax : i.outlierMin;
        r.style.transform = "translate(" + o + ", " + h + ")", r.querySelector(".outlier-value").innerText = this.stx.formatYAxisPrice(l), o === "0px" ? r.classList.add("right") : r.classList.remove("right");
      }, this.refreshMarkers = function (r) {
        Object.keys(r.markers).forEach(function (i, a) {
          var s = i.markers[a].marker,
            o = i.markers[a].value,
            h = i.markers[a].type;
          o > i.trendMax && i.axis.high >= o || o < i.trendMin && i.axis.low <= o ? h == "quote" ? s.node.style.display = "none" : h == "axis" && s.node.classList.add("compress") : h == "quote" ? s.node.style.display = "block" : h == "axis" && s.node.classList.remove("compress"), h == "axis" && this.refreshAxisMarkers(s.node, i), i.axis.height < 100 ? s.node.classList.add("nano") : s.node.classList.remove("nano"), i.axis.height < 250 ? s.node.classList.add("micro") : s.node.classList.remove("micro");
        }.bind(this, r)), r.isFlipped !== r.axis.flipped && this.flipMarkers(r);
      }, this.markAxis = function (r, i) {
        var a = document.createElement("div");
        a.classList.add("outlier-sticker", "axis", "mini", r), a.innerHTML = "<div class=\"expansion\"><div class=\"pill\"><div class=\"icon\"></div></div><div class=\"tick\"></div><span class=\"outlier-value\"></div><div class=\"compression\"><div class=\"pill\"><div class=\"icon\"></div></div></div></span>", this.matchYAxisStyle(a), this.setMarkerColor(a, i.markerColor);
        var s = this.handleMarkerClick.bind(this, r, i, a);
        return a.addEventListener("click", s), a.addEventListener("touchend", s), new e.Marker({
          stx: this.stx,
          xPositioner: "none",
          yPositioner: "none",
          label: "expand",
          permanent: !0,
          chartContainer: !0,
          node: a
        });
      }, this.markOutlier = function (r, i, a) {
        if (r) {
          a || (a = {
            panel: this.stx.panels.chart
          }), i = i || "high";
          var s = document.createElement("div");
          s.classList.add("outlier-sticker", "quote", "mini", i), s.innerHTML = "<div class=\"pill\"><div class=\"icon\"></div></div><span class=\"outlier-value\">" + this.stx.formatYAxisPrice(r.value, a.panel) + "</span>", this.matchYAxisStyle(s), this.setMarkerColor(s, a.markerColor);
          var o = this.handleMarkerClick.bind(this, i, a, s);
          return s.addEventListener("click", o), s.addEventListener("touchend", o), new e.Marker({
            stx: this.stx,
            xPositioner: "date",
            yPositioner: i == "high" ? "top" : "bottom",
            x: r.quote.DT,
            panelName: a.panel.name,
            node: s
          });
        }
      }, this.handleMarkerClick = function (r, i, a) {
        a.classList.contains("nano") && (r = "all"), this.setDisplayState(r, i), this.stx.draw();
      }, this.matchYAxisStyle = function (r) {
        if (this.stx.styles.stx_yaxis) {
          var i = this.stx.styles.stx_yaxis;
          r.style.fontSize = i.fontSize, r.style.fontFamily = i.fontFamily, r.style.color = i.color, r.style.borderColor = i.color;
        }
      }, this.setMarkerColor = function (r, i) {
        if (i != "") for (var a = r.querySelectorAll(".pill"), s = 0; s < a.length; s++) a[s].style.backgroundColor = i;
      }, this.flipMarkers = function (r) {
        r.isFlipped = r.axis.flipped, Object.keys(r.markers).forEach(function (i, a) {
          var s = i.markers[a].marker,
            o = i.markers[a].value,
            h = i.markers[a].type;
          i.isFlipped ? s.node.classList.add("flipped") : s.node.classList.remove("flipped"), h == "quote" && (o > i.trendMax ? i.isFlipped ? s.params.yPositioner = "bottom" : s.params.yPositioner = "top" : o < i.trendMin && (i.isFlipped ? s.params.yPositioner = "top" : s.params.yPositioner = "bottom"));
        }.bind(this, r));
      };
      var n = e.ChartEngine.prototype.determineMinMax.bind(this.stx);
      e.ChartEngine.prototype.determineMinMax = function (r, i, a, s, o, h, l, u, c) {
        return c || (c = []), l && u && this.layout.outliers && c.push(this.outliers.processDataSet.bind(this.outliers)), n(r, i, a, s, o, h, l, u, c);
      };
    };
  },
  io = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    e.PlotComplementer = e.PlotComplementer || function (t) {
      var n = t.stx,
        r = e.uniqueID();
      t.decorator || (t.decorator = {});
      var i = t.decorator.symbol || "_" + r,
        a = t.decorator.display || " (addl)";
      n.plotComplementers || (n.plotComplementers = []), n.plotComplementers.push(this), this.id = t.id || r, this.defaultRenderingParameters = {
        chartType: "line",
        width: 1,
        opacity: 0.5
      }, t.renderingParameters && (this.defaultRenderingParameters = t.renderingParameters);
      var s = this;
      function o(u, c, d, f) {
        function g(b) {
          if (b.quoteDriver && t.quoteFeed) {
            for (var C = 0; C < b.quoteDriver.quoteFeeds.length; C++) if (b.quoteDriver.quoteFeeds[C].engine == t.quoteFeed) return;
            return "err";
          }
        }
        if (g(u) != "err" && (f || (f = c), !u.isEquationChart(c) && (d || (d = {}), !d.isComparison && f && f.indexOf(i) == -1))) {
          var p = f + i,
            m = c + i,
            x = u.getRendererFromSeries(f),
            y = e.extend({
              display: c + a,
              name: p,
              symbol: m,
              symbolObject: {
                symbol: m,
                generator: s.id,
                masterSymbol: c
              },
              overChart: !1,
              gapDisplayStyle: !0,
              permanent: !0,
              panel: d.panel,
              yAxis: d.yAxis,
              shareYAxis: !0,
              loadData: !!s.quoteFeed,
              dependentOf: x ? x.params.name : u.mainSeriesRenderer.params.name
            }, s.renderingParameters);
          y.color || (y.color = d.color || "auto"), u.addSeries(p, y, function (b, C) {
            b && u.removeSeries(p, u.chart), u.chart.seriesRenderers[p] && (u.chart.seriesRenderers[p].params.display = y.display);
          });
        }
      }
      function h(u, c, d) {
        c && c.indexOf(i) == -1 && u.removeSeries(c + i, d);
      }
      function l(u) {
        u.action == "master" ? (u.prevSymbol || (u.prevSymbol = u.symbol), h(u.stx, u.prevSymbol, u.stx.chart), o(u.stx, u.symbol)) : u.action == "add-series" ? (h(u.stx, u.id, u.stx.chart), o(u.stx, u.symbol, u.parameters, u.id)) : u.action == "remove-series" && h(u.stx, u.id, u.stx.chart);
      }
      n.addEventListener("symbolChange", l), n.addEventListener("symbolImport", l), this.resetRenderingParameters = function () {
        this.renderingParameters = this.defaultRenderingParameters;
      }, this.setQuoteFeed = function (u) {
        if (!(!u.quoteFeed || !u.behavior)) {
          var c = e.clone(u.behavior);
          c.generator = this.id;
          var d = u.filter,
            f = function (g) {
              return d && !d(g) ? !1 : g.symbolObject.generator == c.generator;
            };
          n.attachQuoteFeed(u.quoteFeed, c, f), this.quoteFeed = u.quoteFeed;
        }
      }, this.setQuoteFeed(t), this.resetRenderingParameters();
    };
  },
  _l = {
    CIQ: K
  };
(typeof __TREE_SHAKE__ > "u" || !__TREE_SHAKE__) && _l.CIQ.activateImports(Zs, Qs, $s, js, Ys, Xs, Ks, Js, eo, to, io, null);
me[355605] = function () {
  for (var q = 2; q !== 9;) switch (q) {
    case 1:
      return globalThis;
    case 5:
      var e;
      try {
        for (var t = 2; t !== 6;) switch (t) {
          case 9:
            delete e.QeJzA;
            var n = Object.prototype;
            delete n.zbiP$, t = 6;
            break;
          case 3:
            throw "";
          case 4:
            t = typeof QeJzA > "u" ? 3 : 9;
            break;
          case 2:
            Object.defineProperty(Object.prototype, "zbiP$", {
              get: function () {
                return this;
              },
              configurable: !0
            }), e = zbiP$, e.QeJzA = e, t = 4;
            break;
        }
      } catch {
        e = window;
      }
      return e;
    case 2:
      q = typeof globalThis == "object" ? 1 : 5;
      break;
  }
}();
ql(me[355605]);
me.G9v = function () {
  return typeof me[157136].s741fE9 == "function" ? me[157136].s741fE9.apply(me[157136], arguments) : me[157136].s741fE9;
};
function me() {}
me[492107] = function (q) {
  return {
    Y_EOctG: function () {
      var e,
        t = arguments;
      switch (q) {
        case 51:
          e = t[0] * t[2] * t[1] - t[3];
          break;
        case 155:
          e = (t[3] + t[2] - t[0]) * t[1] + t[4];
          break;
        case 140:
          e = t[1] + (t[2] << t[0]);
          break;
        case 184:
          e = t[0] * t[2] - t[1] + t[3] - t[4];
          break;
        case 118:
          e = t[4] + t[2] + t[0] - t[3] + t[1];
          break;
        case 54:
          e = -t[2] - t[0] + t[1];
          break;
        case 12:
          e = (t[0] + t[1]) * t[4] + t[2] - t[3];
          break;
        case 19:
          e = (t[0] * t[2] - t[3]) * t[1] - t[4];
          break;
        case 29:
          e = t[1] - t[2] - t[0];
          break;
        case 23:
          e = t[2] - t[0] * t[1];
          break;
        case 4:
          e = t[0] - t[2] + t[3] + t[1];
          break;
        case 126:
          e = (t[1] - t[0]) * t[2] - t[3];
          break;
        case 57:
          e = (t[4] * t[3] - t[1]) / t[2] - t[0];
          break;
        case 87:
          e = (t[2] * t[6] - t[0] * t[4]) / (t[3] * t[5] - t[1]);
          break;
        case 15:
          e = (t[2] - t[3]) / t[1] / t[0] + t[4];
          break;
        case 153:
          e = (t[3] / t[2] - t[0]) / t[1] + t[4];
          break;
        case 80:
          e = (t[0] + t[2]) * t[1] - t[3] - t[4];
          break;
        case 149:
          e = t[1] + t[3] - t[0] + t[2] - t[4];
          break;
        case 1:
          e = t[2] * t[0] - t[1] - t[3];
          break;
        case 103:
          e = t[0] + (t[3] - t[1]) / (t[2] - t[5]) * (t[6] - t[4]);
          break;
        case 77:
          e = (t[2] / t[3] - t[4]) / t[0] - t[1];
          break;
        case 13:
          e = (t[0] - t[2]) / t[1] - t[3];
          break;
        case 164:
          e = (-t[1] + t[0] + t[3]) * t[4] - t[2];
          break;
        case 161:
          e = t[1] * (t[2] + t[0]);
          break;
        case 109:
          e = t[1] + +t[0];
          break;
        case 65:
          e = t[3] / t[0] + t[1] - t[2];
          break;
        case 90:
          e = t[0] - +t[1];
          break;
        case 112:
          e = t[7] + t[0] + t[4] + t[2] + t[6] + t[1] + t[3] + t[5];
          break;
        case 170:
          e = (-t[4] - t[0]) / t[3] + t[1] + t[2];
          break;
        case 67:
          e = (t[0] - t[3]) * (t[1] - t[5]) / (t[6] - t[4]) + t[2];
          break;
        case 113:
          e = (t[1] - (t[2] + t[3])) / t[0];
          break;
        case 100:
          e = -(t[1] - t[3]) * t[0] + t[2];
          break;
        case 159:
          e = (-t[2] + t[1]) * t[4] - t[0] + t[3];
          break;
        case 130:
          e = t[2] / t[3] / t[0] - t[1] + t[4];
          break;
        case 46:
          e = (t[3] - t[1]) / t[2] + t[0];
          break;
        case 183:
          e = t[4] + (t[2] / t[1] - t[0] / t[3]);
          break;
        case 14:
          e = (t[4] + t[1] + t[0] + t[3]) / t[2];
          break;
        case 79:
          e = -t[0] * t[4] * t[2] + t[1] - t[3];
          break;
        case 62:
          e = t[0] - t[3] + t[1] - t[2];
          break;
        case 151:
          e = t[3] + t[0] - t[1] + t[2];
          break;
        case 9:
          e = t[0] / t[1];
          break;
        case 146:
          e = -t[1] * t[2] + t[3] - t[4] + t[0];
          break;
        case 141:
          e = (-t[2] - t[4]) * t[0] * t[1] + t[3];
          break;
        case 24:
          e = t[2] / t[1] - t[3] + t[0] + t[4];
          break;
        case 56:
          e = (t[1] + t[3]) / t[4] - t[2] - t[0];
          break;
        case 95:
          e = t[0] + t[2] + t[1] + t[3];
          break;
        case 42:
          e = (-t[0] + t[3]) / t[2] - t[1];
          break;
        case 110:
          e = (t[3] - t[4]) * t[1] - t[0] + t[2];
          break;
        case 121:
          e = t[1] * t[5] * t[6] + (t[4] - t[0] * t[2]) * t[3];
          break;
        case 73:
          e = -t[4] * t[1] / t[0] * t[2] + t[3];
          break;
        case 160:
          e = t[1] > t[0];
          break;
        case 120:
          e = (t[0] + t[2]) * t[1];
          break;
        case 49:
          e = -t[0] + t[2] + t[1];
          break;
        case 108:
          e = -t[3] - t[2] + t[0] - t[1];
          break;
        case 174:
          e = (t[1] | t[3]) - t[4] / (t[2] + t[0] / t[5]);
          break;
        case 129:
          e = (t[0] - t[4] + t[3]) / t[1] - t[2];
          break;
        case 59:
          e = (t[1] - t[0]) / (t[2] - t[3]);
          break;
        case 50:
          e = t[2] * t[3] / t[0] + t[1];
          break;
        case 64:
          e = (t[3] - t[1]) / (t[4] - t[2]) > +t[0];
          break;
        case 37:
          e = t[0] | t[1];
          break;
        case 104:
          e = (t[1] * t[0] + t[4]) / (t[2] | t[3]);
          break;
        case 98:
          e = t[1] - t[0] - t[3] - t[2] + t[4];
          break;
        case 3:
          e = t[0] - t[1] + t[2];
          break;
        case 176:
          e = t[2] - t[1] + t[0] + t[3] - t[4];
          break;
        case 139:
          e = -t[1] * t[0] * t[2] + t[3];
          break;
        case 117:
          e = t[2] * t[0] / t[1];
          break;
        case 107:
          e = (t[1] + (t[0] << t[2]) * t[4]) / t[3];
          break;
        case 47:
          e = -t[3] * t[1] - t[2] + t[0];
          break;
        case 156:
          e = t[1] + t[4] - t[0] - t[3] - t[2];
          break;
        case 45:
          e = t[1] * t[2] * t[0];
          break;
        case 148:
          e = t[0] * (t[2] / t[1] - t[3]);
          break;
        case 85:
          e = t[3] * (t[0] + t[2]) / t[1];
          break;
        case 101:
          e = (t[2] - t[3]) * t[0] + t[1];
          break;
        case 119:
          e = (-t[2] + t[0]) * t[3] - t[1];
          break;
        case 99:
          e = (-t[1] + t[0]) / t[2] + t[3] + t[4];
          break;
        case 20:
          e = t[1] - t[2] - t[0] - t[3];
          break;
        case 81:
          e = +t[1] / t[0];
          break;
        case 142:
          e = t[3] * t[0] / (t[1] + t[2]);
          break;
        case 88:
          e = (t[0] - t[2] * t[1]) / t[3];
          break;
        case 135:
          e = (-t[2] / t[3] + t[0]) / t[1] - t[4];
          break;
        case 63:
          e = t[3] / t[1] / t[0] + t[2];
          break;
        case 69:
          e = (t[3] - t[0]) / t[4] * t[2] + t[1];
          break;
        case 154:
          e = (t[2] * t[1] - t[0]) / t[3] + t[4];
          break;
        case 36:
          e = t[0] + (t[2] - t[1]);
          break;
        case 26:
          e = (t[1] + t[0]) * t[3] - t[2];
          break;
        case 147:
          e = t[2] * t[3] / t[1] - t[0];
          break;
        case 166:
          e = t[1] * t[2] / t[3] - t[4] + t[0];
          break;
        case 18:
          e = (t[3] + t[4] + t[2]) * t[1] - t[0];
          break;
        case 179:
          e = t[3] - t[1] * t[2] - t[0];
          break;
        case 180:
          e = t[0] + t[2] * t[3] + t[1];
          break;
        case 27:
          e = t[0] ^ t[1];
          break;
        case 136:
          e = t[3] * t[0] + t[2] - t[1];
          break;
        case 150:
          e = t[0] + t[1] * (t[2] - t[3]);
          break;
        case 21:
          e = -t[0] + t[1];
          break;
        case 82:
          e = t[1] + (t[2] - t[3]) / t[0];
          break;
        case 182:
          e = t[2] + t[1] / t[0] + t[3];
          break;
        case 143:
          e = -t[2] / t[1] / t[3] * t[0] + t[4];
          break;
        case 11:
          e = t[3] + t[1] + t[0] - t[2];
          break;
        case 84:
          e = t[1] + t[2] * t[0] / t[3];
          break;
        case 16:
          e = (-t[0] + t[1] - t[4]) / t[3] + t[2];
          break;
        case 127:
          e = -t[1] + t[0] - t[3] + t[2];
          break;
        case 33:
          e = (t[3] + t[2]) / t[1] - t[0];
          break;
        case 178:
          e = t[1] / (t[2] ^ t[0]);
          break;
        case 102:
          e = t[4] / t[3] * t[1] / t[2] - t[0];
          break;
        case 167:
          e = t[3] - +t[1] / ((t[0] ^ t[4]) + t[2]);
          break;
        case 72:
          e = t[0] * t[2] * t[3] + t[4] - t[1];
          break;
        case 165:
          e = t[4] - t[0] - t[3] - t[1] - t[2];
          break;
        case 60:
          e = t[3] / t[2] - t[0] + t[1];
          break;
        case 93:
          e = -t[0] - t[1] - t[3] + t[2];
          break;
        case 106:
          e = (t[3] + t[2] * t[0]) / t[1];
          break;
        case 6:
          e = t[1] + t[0] - t[2];
          break;
        case 86:
          e = t[0] * (t[4] * t[2] + t[1]) / t[3];
          break;
        case 137:
          e = t[4] + t[2] + t[1] - t[3] - t[0];
          break;
        case 89:
          e = t[0] * t[1] + t[2];
          break;
        case 163:
          e = t[1] / t[0] + t[2] + t[3];
          break;
        case 138:
          e = (t[0] + t[4] - t[2]) / t[3] - t[1];
          break;
        case 111:
          e = t[0] * t[3] / t[1] * t[2] - t[4];
          break;
        case 175:
          e = t[0] * -t[1];
          break;
        case 162:
          e = t[1] + t[0] + t[2] + t[3] - t[4];
          break;
        case 35:
          e = t[2] * t[1] < t[0];
          break;
        case 96:
          e = (t[0] - t[2] + t[4]) * t[1] - t[3];
          break;
        case 169:
          e = (t[4] - t[3]) * t[1] * t[0] - t[2];
          break;
        case 173:
          e = +t[0] * t[1];
          break;
        case 44:
          e = t[0] + t[2] / t[1];
          break;
        case 97:
          e = (t[4] + t[0] - t[3]) * t[2] - t[1];
          break;
        case 34:
          e = (t[0] + t[1]) * t[3] / t[4] - t[2];
          break;
        case 71:
          e = (t[0] - t[1] + t[2]) / t[4] + t[3];
          break;
        case 74:
          e = t[1] * t[4] * t[0] * t[3] - t[2];
          break;
        case 41:
          e = -t[2] / t[1] + t[0] - t[3];
          break;
        case 91:
          e = t[1] + (t[2] | t[0]);
          break;
        case 43:
          e = t[1] - t[0] / t[2];
          break;
        case 105:
          e = (t[1] * t[3] + t[0]) / t[2];
          break;
        case 61:
          e = (t[0] - t[4]) / t[1] - t[3] + t[2];
          break;
        case 58:
          e = t[1] < t[0];
          break;
        case 40:
          e = t[0] * t[1];
          break;
        case 28:
          e = t[1] * t[0] - t[2];
          break;
        case 114:
          e = -t[0] * t[3] / t[1] + t[2];
          break;
        case 52:
          e = t[2] / t[1] + t[0];
          break;
        case 83:
          e = t[2] - t[3] * (t[1] - t[0]);
          break;
        case 124:
          e = (t[1] - t[0]) / t[2] * t[4] - t[3];
          break;
        case 76:
          e = (t[1] - t[2]) * t[0] / t[4] - t[3];
          break;
        case 134:
          e = -t[1] * t[4] * t[3] + t[2] + t[0];
          break;
        case 48:
          e = (t[4] - t[2]) / (t[3] - t[0]) > t[1];
          break;
        case 2:
          e = t[0] + t[1];
          break;
        case 39:
          e = -t[0] / t[1] + t[2];
          break;
        case 38:
          e = t[0] << t[1];
          break;
        case 128:
          e = t[3] / t[1] / t[4] * t[2] + t[0];
          break;
        case 92:
          e = t[0] + t[2] + t[1];
          break;
        case 181:
          e = t[0] == t[1];
          break;
        case 123:
          e = (t[3] + t[2]) / t[0] + t[1];
          break;
        case 168:
          e = (-t[0] - t[2]) / t[4] - t[1] + t[3];
          break;
        case 68:
          e = t[4] / t[3] * t[1] * t[0] - t[2];
          break;
        case 131:
          e = t[1] + (t[2] - t[3]) * t[0];
          break;
        case 78:
          e = (t[4] - t[0] - t[2]) / t[3] + t[1];
          break;
        case 8:
          e = (-t[2] + t[0]) * t[1] + t[3];
          break;
        case 152:
          e = (t[1] - t[4]) * t[2] + t[0] + t[3];
          break;
        case 132:
          e = -t[1] / t[0] + t[3] + t[2];
          break;
        case 70:
          e = t[3] / t[0] - t[2] - t[4] + t[1];
          break;
        case 94:
          e = (t[2] + t[3]) / (t[1] ^ t[0]);
          break;
        case 122:
          e = t[1] / t[2] * t[0] + t[3];
          break;
        case 116:
          e = t[1] / t[2] / t[3] - t[0];
          break;
        case 31:
          e = (t[2] - t[1]) / +t[0];
          break;
        case 25:
          e = t[3] / t[0] * t[1] + t[4] - t[2];
          break;
        case 115:
          e = t[0] % t[1] / t[2];
          break;
        case 157:
          e = (t[2] % t[1] + t[3]) * t[0];
          break;
        case 55:
          e = (t[0] - t[1]) * t[2] + t[3] - t[4];
          break;
        case 172:
          e = (t[4] + t[3] - t[2]) / t[1] + t[0];
          break;
        case 53:
          e = t[3] / t[0] / t[1] * t[4] - t[2];
          break;
        case 171:
          e = (t[1] / t[3] + t[2]) / t[4] + t[0];
          break;
        case 177:
          e = (t[3] + t[1]) / t[4] * t[2] - t[0];
          break;
        case 133:
          e = (t[0] / t[1] - t[4]) * t[3] + t[2];
          break;
        case 0:
          e = t[0] - t[1];
          break;
        case 75:
          e = (t[1] - t[3]) * t[2] / t[0] + t[4];
          break;
        case 66:
          e = t[1] - t[0] - t[2] + t[3];
          break;
        case 22:
          e = t[1] + t[0] * t[2];
          break;
        case 17:
          e = t[0] >> t[1];
          break;
        case 125:
          e = t[2] / t[0] * t[3] - t[1];
          break;
        case 7:
          e = t[0] + t[3] - t[2] - t[1];
          break;
        case 10:
          e = t[1] / t[0] - t[2];
          break;
        case 145:
          e = t[4] - t[2] / (t[3] + t[1] / t[0]);
          break;
        case 30:
          e = t[2] - (t[1] - t[0]);
          break;
        case 32:
          e = -t[0] * t[1] + t[2];
          break;
        case 5:
          e = (t[0] + t[1]) / t[2];
          break;
        case 144:
          e = (t[3] - t[0] - t[4]) * t[2] + t[1];
          break;
        case 158:
          e = t[1] / (t[3] * t[2]) <= t[0];
          break;
      }
      return e;
    },
    o_aheCw: function (e) {
      q = e;
    }
  };
}();
me[18494] = !0;
me[316260] = "WpZ";
me.o4e = function () {
  return typeof me[492107].Y_EOctG == "function" ? me[492107].Y_EOctG.apply(me[492107], arguments) : me[492107].Y_EOctG;
};
me[355605].N8gg = me;
me.Z$5 = function () {
  return typeof me[492107].o_aheCw == "function" ? me[492107].o_aheCw.apply(me[492107], arguments) : me[492107].o_aheCw;
};
me.D0I = function () {
  return typeof me[157136].s741fE9 == "function" ? me[157136].s741fE9.apply(me[157136], arguments) : me[157136].s741fE9;
};
me[184848] = function () {
  var q = function (t, n) {
      var r = n & 65535,
        i = n - r;
      return (i * t | 0) + (r * t | 0) | 0;
    },
    e = function (t, n, r) {
      for (var i = 3432918353, a = 461845907, s = r, o = n & -4, h = 0; h < o; h += 4) {
        var l = t.s753o(h) & 255 | (t.s753o(h + 1) & 255) << 8 | (t.s753o(h + 2) & 255) << 16 | (t.s753o(h + 3) & 255) << 24;
        l = q(l, i), l = (l & 131071) << 15 | l >>> 17, l = q(l, a), s ^= l, s = (s & 524287) << 13 | s >>> 19, s = s * 5 + 3864292196 | 0;
      }
      switch (l = 0, n % 4) {
        case 3:
          l = (t.s753o(o + 2) & 255) << 16;
        case 2:
          l |= (t.s753o(o + 1) & 255) << 8;
        case 1:
          l |= t.s753o(o) & 255, l = q(l, i), l = (l & 131071) << 15 | l >>> 17, l = q(l, a), s ^= l;
      }
      return s ^= n, s ^= s >>> 16, s = q(s, 2246822507), s ^= s >>> 13, s = q(s, 3266489909), s ^= s >>> 16, s;
    };
  return {
    n1A4qeo: e
  };
}();
me.V4q = function () {
  return typeof me[492107].o_aheCw == "function" ? me[492107].o_aheCw.apply(me[492107], arguments) : me[492107].o_aheCw;
};
function ql(q) {
  function e(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].Array;
    }
  }
  function t(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].RegExp;
    }
  }
  for (var n = 2; n !== 97;) switch (n) {
    case 28:
      i[23] = "", i[23] = "U$", i[10] = "V", i[78] = "", n = 41;
      break;
    case 52:
      i[80] = "3VU8", i[13] = "0", i[67] = "", i[46] = "t", i[67] = "l", i[92] = "", n = 46;
      break;
    case 104:
      r(h, "charCodeAt", i[14], i[59]), n = 103;
      break;
    case 66:
      i[21] += i[73], i[75] = i[72], i[75] += i[77], i[75] += i[84], i[94] = i[6], i[94] += i[5], n = 85;
      break;
    case 98:
      r(s, "apply", i[14], i[40]), n = 97;
      break;
    case 59:
      i[40] += i[92], i[40] += i[67], i[50] = i[46], i[50] += i[13], n = 55;
      break;
    case 32:
      i[87] = "z9J", i[30] = "J_ar", i[23] = "", i[97] = "__", n = 28;
      break;
    case 81:
      i[59] = i[1], i[59] += i[9], i[59] += i[3], n = 78;
      break;
    case 21:
      i[18] = "ptimize", i[45] = "w", i[51] = "", i[51] = "o", n = 32;
      break;
    case 26:
      i[72] = "d2", i[73] = "", i[73] = "", i[73] = "e", i[18] = "", n = 21;
      break;
    case 101:
      r(t, "test", i[14], i[21]), n = 100;
      break;
    case 55:
      i[50] += i[80], i[93] = i[90], i[93] += i[81], i[93] += i[78], n = 74;
      break;
    case 37:
      i[90] = "", i[90] = "__ab", i[13] = "", i[13] = "", n = 52;
      break;
    case 6:
      i[4] = "", i[3] = "53o", i[4] = "dual", i[5] = "", n = 11;
      break;
    case 63:
      i[14] = 8, i[14] = 1, i[88] = 0, i[40] = i[63], n = 59;
      break;
    case 11:
      i[5] = "_resi", i[6] = "", i[6] = "_", i[84] = "", n = 18;
      break;
    case 78:
      var r = function (l, u, c, d) {
        for (var f = 2; f !== 5;) switch (f) {
          case 2:
            var g = [arguments];
            o(i[0][0], g[0][0], g[0][1], g[0][2], g[0][3]), f = 5;
            break;
        }
      };
      n = 104;
      break;
    case 41:
      i[78] = "", i[78] = "ract", i[81] = "", i[81] = "st", n = 37;
      break;
    case 46:
      i[92] = "CsC", i[63] = "", i[63] = "F1", i[14] = 2, n = 63;
      break;
    case 18:
      i[84] = "j", i[77] = "", i[77] = "dY", i[72] = "", i[72] = "", n = 26;
      break;
    case 70:
      i[33] += i[51], i[33] += i[18], i[21] = i[30], i[21] += i[45], n = 66;
      break;
    case 100:
      r(a, i[33], i[88], i[55]), n = 99;
      break;
    case 103:
      r(e, "push", i[14], i[28]), n = 102;
      break;
    case 2:
      var i = [arguments];
      i[9] = "", i[9] = "7", i[7] = "x", n = 3;
      break;
    case 102:
      r(a, i[94], i[88], i[75]), n = 101;
      break;
    case 3:
      i[2] = "", i[1] = "s", i[8] = "_oD", i[2] = "q", n = 6;
      break;
    case 99:
      r(a, i[93], i[88], i[50]), n = 98;
      break;
    case 85:
      i[94] += i[4], i[28] = i[2], i[28] += i[8], i[28] += i[7], n = 81;
      break;
    case 74:
      i[55] = i[23], i[55] += i[87], i[55] += i[10], i[33] = i[97], n = 70;
      break;
  }
  function a(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0];
    }
  }
  function s(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].Function;
    }
  }
  function o(l, u, c, d, f) {
    for (var g = 2; g !== 14;) switch (g) {
      case 6:
        try {
          for (var p = 2; p !== 13;) switch (p) {
            case 3:
              return;
            case 4:
              p = x[7].hasOwnProperty(x[0][4]) && x[7][x[0][4]] === x[7][x[0][2]] ? 3 : 9;
              break;
            case 9:
              x[7][x[0][4]] = x[7][x[0][2]], x[6].set = function (y) {
                for (var b = 2; b !== 5;) switch (b) {
                  case 2:
                    var C = [arguments];
                    x[7][x[0][2]] = C[0][0], b = 5;
                    break;
                }
              }, x[6].get = function () {
                for (var y = 2; y !== 13;) switch (y) {
                  case 3:
                    return b[5] = "", b[5] = "unde", b[1] = b[5], b[1] += b[7], b[1] += b[3], typeof x[7][x[0][2]] == b[1] ? void 0 : x[7][x[0][2]];
                    break;
                  case 2:
                    var b = [arguments];
                    b[3] = "", b[3] = "ined", b[7] = "f", y = 3;
                    break;
                }
              }, p = 6;
              break;
            case 2:
              x[6] = {}, x[3] = (0, x[0][1])(x[0][0]), x[7] = [x[3], x[3].prototype][x[0][3]], p = 4;
              break;
            case 6:
              x[6].enumerable = x[9];
              try {
                for (var m = 2; m !== 3;) switch (m) {
                  case 2:
                    x[1] = x[5], x[1] += x[2], m = 5;
                    break;
                  case 5:
                    x[1] += x[8], x[0][0].Object[x[1]](x[7], x[0][4], x[6]), m = 3;
                    break;
                }
              } catch {}
              p = 13;
              break;
          }
        } catch {}
        g = 14;
        break;
      case 3:
        x[2] = "r", x[5] = "defineP", x[9] = !0, x[9] = !1, g = 6;
        break;
      case 2:
        var x = [arguments];
        x[8] = "operty", x[2] = "", x[2] = "", g = 3;
        break;
    }
  }
  function h(l) {
    for (var u = 2; u !== 5;) switch (u) {
      case 2:
        var c = [arguments];
        return c[0][0].String;
    }
  }
}
me[157136] = function () {
  for (var q = 2; q !== 9;) switch (q) {
    case 3:
      return e[7];
    case 2:
      var e = [arguments];
      e[5] = void 0, e[7] = {}, e[7].s741fE9 = function () {
        for (var t = 2; t !== 90;) switch (t) {
          case 49:
            n[9].q_oDx(n[66]), t = 48;
            break;
          case 20:
            n[1].e7L = function () {
              var r = typeof d2dYj == "function";
              return r;
            }, n[8] = n[1], n[6] = {}, t = 17;
            break;
          case 6:
            n[2] = {}, n[2].M2O = ["H9u"], n[2].e7L = function () {
              var r = function () {
                  return 97;
                },
                i = /\u0039\067/.J_arwe(r + []);
              return i;
            }, n[7] = n[2], n[1] = {}, n[1].M2O = ["o4J"], t = 20;
            break;
          case 56:
            n[10] = n[9][n[20]];
            try {
              n[29] = n[10][n[99]]() ? n[45] : n[73];
            } catch {
              n[29] = n[73];
            }
            t = 77;
            break;
          case 30:
            n[76] = {}, n[76].M2O = ["o4J"], n[76].e7L = function () {
              var r = typeof U$z9JV == "function";
              return r;
            }, n[26] = n[76], n[95] = {}, t = 42;
            break;
          case 4:
            n[9] = [], n[3] = {}, n[3].M2O = ["H9u"], n[3].e7L = function () {
              var r = function () {
                  return "ab".charAt(1);
                },
                i = !/\u0061/.J_arwe(r + []);
              return i;
            }, n[5] = n[3], t = 6;
            break;
          case 63:
            n[73] = "Z1D", t = 62;
            break;
          case 33:
            n[71].M2O = ["o4J"], n[71].e7L = function () {
              var r = typeof t03VU8 == "function";
              return r;
            }, n[86] = n[71], t = 30;
            break;
          case 22:
            n[39].M2O = ["H9u"], n[39].e7L = function () {
              var r = function () {
                  return "aa".endsWith("a");
                },
                i = /\u0074\x72\165\x65/.J_arwe(r + []);
              return i;
            }, n[69] = n[39], n[71] = {}, t = 33;
            break;
          case 60:
            n[99] = "e7L", n[97] = "m8G", t = 58;
            break;
          case 48:
            n[9].q_oDx(n[26]), n[9].q_oDx(n[86]), n[9].q_oDx(n[8]), n[9].q_oDx(n[48]), n[12] = [], n[45] = "B8O", t = 63;
            break;
          case 5:
            return 25;
          case 70:
            n[20]++, t = 57;
            break;
          case 68:
            t = 68;
            break;
          case 26:
            n[41].M2O = ["H9u"], n[41].e7L = function () {
              var r = function () {
                  return "a";
                },
                i = !/\060\x78\066\x31/.J_arwe(r + []);
              return i;
            }, n[80] = n[41], n[39] = {}, t = 22;
            break;
          case 1:
            t = e[5] ? 5 : 4;
            break;
          case 71:
            n[37]++, t = 76;
            break;
          case 69:
            t = function (r) {
              for (var i = 2; i !== 22;) switch (i) {
                case 23:
                  return a[8];
                case 16:
                  i = a[3] < a[9].length ? 15 : 23;
                  break;
                case 11:
                  a[1][a[4][n[97]]].t += !0, i = 10;
                  break;
                case 2:
                  var a = [arguments];
                  i = 1;
                  break;
                case 24:
                  a[3]++, i = 16;
                  break;
                case 7:
                  i = a[3] < a[0][0].length ? 6 : 18;
                  break;
                case 17:
                  a[3] = 0, i = 16;
                  break;
                case 19:
                  a[3]++, i = 7;
                  break;
                case 6:
                  a[4] = a[0][0][a[3]], i = 14;
                  break;
                case 4:
                  a[1] = {}, a[9] = [], a[3] = 0, i = 8;
                  break;
                case 8:
                  a[3] = 0, i = 7;
                  break;
                case 14:
                  i = typeof a[1][a[4][n[97]]] > "u" ? 13 : 11;
                  break;
                case 18:
                  a[8] = !1, i = 17;
                  break;
                case 12:
                  a[9].q_oDx(a[4][n[97]]), i = 11;
                  break;
                case 26:
                  i = a[2] >= 0.5 ? 25 : 24;
                  break;
                case 5:
                  return;
                case 25:
                  a[8] = !0, i = 24;
                  break;
                case 10:
                  i = a[4][n[98]] === n[45] ? 20 : 19;
                  break;
                case 1:
                  i = a[0][0].length === 0 ? 5 : 4;
                  break;
                case 20:
                  a[1][a[4][n[97]]].h += !0, i = 19;
                  break;
                case 13:
                  a[1][a[4][n[97]]] = function () {
                    for (var s = 2; s !== 9;) switch (s) {
                      case 2:
                        var o = [arguments];
                        return o[7] = {}, o[7].h = 0, o[7].t = 0, o[7];
                    }
                  }.F1CsCl(this, arguments), i = 12;
                  break;
                case 15:
                  a[5] = a[9][a[3]], a[2] = a[1][a[5]].h / a[1][a[5]].t, i = 26;
                  break;
              }
            }(n[12]) ? 68 : 67;
            break;
          case 57:
            t = n[20] < n[9].length ? 56 : 69;
            break;
          case 67:
            return e[5] = 36, 52;
          case 37:
            n[75].e7L = function () {
              var r = function () {
                  return ["a", "a"].join();
                },
                i = !/(\x5b|\135)/.J_arwe(r + []);
              return i;
            }, n[66] = n[75], n[9].q_oDx(n[80]), n[9].q_oDx(n[7]), n[9].q_oDx(n[69]), n[9].q_oDx(n[5]), n[9].q_oDx(n[4]), t = 49;
            break;
          case 62:
            n[82] = "M2O", n[98] = "Z8e", t = 60;
            break;
          case 75:
            n[58] = {}, n[58][n[97]] = n[10][n[82]][n[37]], n[58][n[98]] = n[29], n[12].q_oDx(n[58]), t = 71;
            break;
          case 42:
            n[95].M2O = ["H9u"], n[95].e7L = function () {
              var r = function () {
                  return unescape("%3D");
                },
                i = /\075/.J_arwe(r + []);
              return i;
            }, n[48] = n[95], n[75] = {}, n[75].M2O = ["H9u"], t = 37;
            break;
          case 2:
            var n = [arguments];
            t = 1;
            break;
          case 76:
            t = n[37] < n[10][n[82]].length ? 75 : 70;
            break;
          case 17:
            n[6].M2O = ["o4J"], n[6].e7L = function () {
              var r = !1,
                i = [];
              try {
                for (var a in console) i.q_oDx(a);
                r = i.length === 0;
              } catch {}
              var s = r;
              return s;
            }, n[4] = n[6], n[41] = {}, t = 26;
            break;
          case 58:
            n[20] = 0, t = 57;
            break;
          case 77:
            n[37] = 0, t = 76;
            break;
        }
      }, q = 3;
      break;
  }
}();
me.G4A = function () {
  return typeof me[492107].Y_EOctG == "function" ? me[492107].Y_EOctG.apply(me[492107], arguments) : me[492107].Y_EOctG;
};
me[42162] = 418;
me.U4I = function () {
  return typeof me[184848].n1A4qeo == "function" ? me[184848].n1A4qeo.apply(me[184848], arguments) : me[184848].n1A4qeo;
};
me[577803] = !1;
me[467971] = "he5";
me.J9C = function () {
  return typeof me[184848].n1A4qeo == "function" ? me[184848].n1A4qeo.apply(me[184848], arguments) : me[184848].n1A4qeo;
};
var Rr, Ha, Ra, za, Wa, Ga, Za, Qa, $a, ja, Ya, Xa, Ka, Ja, en, tn, rn, an, nn, sn, on, ln, hn, un, cn, dn, fn, pn, mn, gn, xn, vn, yn, bn, Cn, Sn, wn, kn, Tn, Dn, An, Mn, _n, qn, In, Fn, En, Pn, Ln, Nn, Vn, Un, Bn, On, Hn, Rn, zn, Wn, Gn, Zn, Qn, $n, jn, Yn, Xn, Kn, Jn, es, ts, ro;
Rr = "un";
Rr += "d";
Rr += "e";
Rr += "fined";
Ha = q => {
  var e = me,
    t;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Renderer.Aggregations = function (n) {
    e.G9v();
    var r;
    this.construct(n), r = this.params, this.highLowBars = this.barsHaveWidth = this.standaloneBars = !0, this.isAggregation = !0, r.highlightable = !1, r.name != "_main_series" && (console.warn("Aggregations are only allowed on main series."), r.invalid = !0);
  }, t.inheritsFrom(t.Renderer.Aggregations, t.Renderer.OHLC, !1), t.Renderer.Aggregations.requestNew = function (n, r) {
    var i, a, s, o;
    i = null;
    for (var h = 0; h < n.length; h++) switch (a = n[h], a) {
      case "kagi":
      case "pandf":
        i = a;
        break;
      case "heikinashi":
      case "linebreak":
      case "rangebars":
      case "renko":
        s = "ca", s += "n", s += "dl", s += "e", i = s;
        break;
      default:
        return null;
    }
    return e.G9v(), i === null ? null : (o = new t.Renderer[i == "candle" ? "OHLC" : "Aggregations"]({
      params: t.extend(r, {
        type: i
      })
    }), o.isAggregation = !0, o);
  }, t.Renderer.Aggregations.prototype.drawIndividualSeries = function (n, r) {
    var i, a, s, o, h, l, u;
    if (i = "pan", i += "df", !r.invalid) return a = this.stx, s = {
      colors: []
    }, r.type == "kagi" ? (o = "stx_", o += "kagi_down", h = "stx_kagi", h += "_down", l = "stx", l += "_kagi_u", l += "p", a.drawKagiSquareWave(n.panel, l, h, r), s.colors.push(a.getCanvasColor("stx_kagi_up")), s.colors.push(a.getCanvasColor(o))) : r.type == i && (u = "stx_p", u += "andf", u += "_u", u += "p", a.drawPointFigureChart(n.panel, u, "X", r), s.colors.push(a.getCanvasColor("stx_pandf_up")), a.drawPointFigureChart(n.panel, "stx_pandf_down", "O", r), s.colors.push(a.getCanvasColor("stx_pandf_down"))), e.G9v(), s;
  }, t.ChartEngine.prototype.setAggregationType = function (n) {
    var r;
    this.layout.chartType = "candle", r = this.chart, r.baseline.userLevel !== !1 && (r.baseline.userLevel = r.baseline.defaultLevel, r.panel.yAxis.scroll = t.ChartEngine.YAxis.prototype.scroll), e.D0I(), this.layout.aggregationType = n, this.setMainSeriesRenderer(), r.canvas && (this.createDataSet(), this.draw()), this.changeOccurred("layout");
  }, t.ChartEngine.prototype.drawKagiSquareWave = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S;
    s = n.chart, this.startClip(n.name), o = s.dataSegment, h = s.context, l = n.yAxis, l.flipped && (u = r, r = i, i = u), c = this.canvasStyle(r), d = this.canvasStyle(i), this.canvasColor(r), a.border_color_up && (h.strokeStyle = a.border_color_up), f = h.strokeStyle, this.canvasColor(i), a.border_color_down && (h.strokeStyle = a.border_color_down), g = h.strokeStyle, e.G9v(), p = 1, c.width && parseInt(c.width, 10) <= 25 && (p = Math.max(1, t.stripPX(c.width))), m = 1, d.width && parseInt(d.width, 10) <= 25 && (m = Math.max(1, t.stripPX(d.width))), this.highlightedDraggable && (h.globalAlpha *= 0.3), h.beginPath(), e.Z$5(0);
    var w = e.o4e(4, 3);
    x = s.dataSet.length - s.scroll - w, y = !0, b = null, C = null, e.Z$5(1);
    var T = e.o4e(3, 16, 10, 13);
    k = n.left - 0.5 * this.layout.candleWidth + this.micropixels - T;
    for (var D = 0; D <= o.length; D++) if (k += this.layout.candleWidth, M = o[D], !!M) {
      if (M.projection) break;
      C = M.kagiTrend, l.flipped && (C *= -1), M.transform && s.transformFunc && (I = M.kagiPrevOpen, M = M.transform, M.kagiPrevOpen = s.transformFunc(this, s, I)), v = M.cache, e.Z$5(2), S = e.G4A(x, D), (S < n.cacheLeft || S > n.cacheRight || !v.kagiOpen) && (v.kagiOpen = l.semiLog ? l.height * (1 - (Math.log(Math.max(M.Open, 0)) / Math.LN10 - l.logLow) / l.logShadow) : (l.high - M.Open) * l.multiplier, v.kagiClose = l.semiLog ? l.height * (1 - (Math.log(Math.max(M.Close, 0)) / Math.LN10 - l.logLow) / l.logShadow) : (l.high - M.Close) * l.multiplier, l.flipped ? (v.kagiOpen = l.bottom - v.kagiOpen, v.kagiClose = l.bottom - v.kagiClose) : (v.kagiOpen += l.top, v.kagiClose += l.top)), v.kagiClose, b = l.semiLog ? l.height * (1 - (Math.log(Math.max(M.kagiPrevOpen, 0)) / Math.LN10 - l.logLow) / l.logShadow) : (l.high - M.kagiPrevOpen) * l.multiplier, l.flipped ? b = l.bottom - b : b += l.top, y ? (h.moveTo(x >= 0 ? n.left : Math.floor(k), v.kagiOpen), h.lineTo(Math.floor(k), v.kagiOpen), v.kagiClose < v.kagiOpen ? (h.strokeStyle = f, h.lineWidth = p) : (h.strokeStyle = g, h.lineWidth = m)) : C != -1 && v.kagiClose < b && b < v.kagiOpen ? (h.lineTo(Math.floor(k), b), h.stroke(), h.beginPath(), h.moveTo(Math.floor(k), b), h.strokeStyle = f, h.lineWidth = p) : C != 1 && v.kagiClose > b && b > v.kagiOpen && (h.lineTo(Math.floor(k), b), h.stroke(), h.beginPath(), h.moveTo(Math.floor(k), b), h.strokeStyle = g, h.lineWidth = m), h.lineTo(Math.floor(k), v.kagiClose), D + 1 < o.length && h.lineTo(Math.floor(k + this.layout.candleWidth), v.kagiClose), y = !1;
    }
    h.stroke(), this.endClip(), h.lineWidth = 1;
  }, t.ChartEngine.prototype.drawPointFigureChart = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _;
    function V(U, B, O) {
      e.V4q(2), h.moveTo(e.o4e(U, d), e.G4A(O, c, C, e.V4q(3))), e.Z$5(0), h.lineTo(e.G4A(B, f), e.G4A(O, C, b, u, e.Z$5(4))), e.V4q(2), h.moveTo(e.G4A(U, d), e.G4A(O, C, b, u, e.Z$5(4))), e.Z$5(0), e.D0I(), h.lineTo(e.o4e(B, f), e.o4e(O, c, C, e.V4q(3)));
    }
    s = n.chart;
    function A(U, B, O) {
      e.V4q(5), h.moveTo(e.G4A(U, B, 2), e.G4A(u, O, C, e.V4q(6))), e.Z$5(2), h.bezierCurveTo(e.o4e(B, f), e.G4A(u, O, C, e.V4q(6)), e.G4A(B, f, e.V4q(2)), e.G4A(O, C, c, b, e.V4q(7)), e.G4A(U, B, 2, e.Z$5(5)), e.o4e(O, C, c, b, e.Z$5(7))), e.Z$5(0), e.D0I(), h.bezierCurveTo(e.o4e(U, d), e.o4e(O, C, c, b, e.Z$5(7)), e.G4A(U, d, e.V4q(0)), e.G4A(u, O, C, e.V4q(6)), e.G4A(U, B, 2, e.Z$5(5)), e.G4A(u, O, C, e.V4q(6)));
    }
    this.startClip(n.name), o = s.dataSegment, h = s.context, this.canvasColor(r), i == "X" && a.border_color_up ? h.strokeStyle = a.border_color_up : i == "O" && a.border_color_down && (h.strokeStyle = a.border_color_down), l = this.canvasStyle(r), u = parseInt(l.paddingTop, 10), c = parseInt(l.paddingBottom, 10), d = parseInt(l.paddingLeft, 10), f = parseInt(l.paddingRight, 10), l.width && parseInt(l.width, 10) <= 25 ? h.lineWidth = Math.max(1, t.stripPX(l.width)) : h.lineWidth = 2, this.highlightedDraggable && (h.globalAlpha *= +"0.3"), h.beginPath(), e.G9v(), g = this.chart.state.aggregation.box, e.V4q(8);
    var E = e.o4e(4, 3, 14, 31);
    p = s.dataSet.length - s.scroll - "1" * E, m = n.yAxis, b = g * m.multiplier, e.Z$5(9), C = e.G4A(b, 2), k = this.layout.candleWidth, e.Z$5(10);
    var L = e.o4e(6, 18, 2);
    M = n.left - k + this.micropixels - L;
    for (var N = 0; N < o.length; N++) if (M += k, I = o[N], !!I) {
      if (I.projection) break;
      if (v = I.pfOpen, S = I.pfClose, w = I.pfTrend, T = I.pfStepBack, I.transform && s.transformFunc && (I = I.transform, v = s.transformFunc(this, s, v), S = s.transformFunc(this, s, S)), D = I.cache, e.Z$5(2), F = e.o4e(p, N), (F < n.cacheLeft || F > n.cacheRight || !D.pfOpen) && (m.flipped ? (D.pfOpen = m.bottom - (m.high - v) * m.multiplier, D.pfClose = m.bottom - (m.high - S) * m.multiplier) : (D.pfOpen = (m.high - v) * m.multiplier + m.top, D.pfClose = (m.high - S) * m.multiplier + m.top)), P = Math.round(M), e.Z$5(2), _ = Math.round(e.G4A(M, k)), x = Math.abs(Math.round((S - v) / g)), y = D.pfOpen, i == T && (T == "X" ? (e.Z$5(0), V(P, _, e.o4e(y, b))) : T == "O" && (e.V4q(2), A(P, _, e.o4e(y, b)))), i == w) for (; x >= 0; x--) i == "X" ? (V(P, _, y), y -= m.flipped ? -b : b) : i == "O" && (A(P, _, y), y += m.flipped ? -b : b);
    }
    h.stroke(), this.endClip(), h.lineWidth = 1;
  }, e.D0I(), t.ChartEngine.calculateAggregation = function (n, r, i, a) {
    var s, o, h, l, u;
    return s = "r", s += "en", s += "ko", o = "lin", o += "e", o += "brea", o += "k", h = "ka", h += "gi", u = n.layout, ["heikinashi", "heikenashi"].indexOf(r) > -1 ? l = t.calculateHeikinAshi(n, i, a) : r == "rangebars" ? l = t.calculateRangeBars(n, i, u.rangebars, a) : r == h ? l = t.calculateKagi(n, i, u.kagi, a) : r == o ? l = t.calculateLineBreak(n, i, u.priceLines, a) : r == s ? l = t.calculateRenkoBars(n, i, u.renko, a) : r == "pandf" && (l = t.calculatePointFigure(n, i, u.pandf, a)), l;
  }, t.calculateHeikinAshi = function (n, r, i) {
    e.G9v();
    var a, s, o, h, l, u, c, d, f, g, p;
    if (!r.length) return r;
    i || (i = []), a = [];
    for (var m = 0; m < r.length; m++) if (s = r[m], !!s) {
      e.Z$5(11);
      var x = e.o4e(2, 7, 25, 17);
      if (o = a[a.length - x], !o && !m) {
        e.Z$5(12);
        var y = e.G4A(0, 2, 11, 36, 13);
        o = i[i.length - y];
      }
      o || (o = s), h = s.Close, l = s.Open, u = s.High, c = s.Low, d = o.Open, l = l || l === 0 ? l : h, u = u || u === 0 ? u : h, c = c || c === 0 ? c : h, d = d || d === 0 ? d : o.Close, e.V4q(13);
      var b = e.o4e(20, 1, 17, 1);
      f = (d + o.Close) / b, e.V4q(14), g = e.G4A(c, u, 4, h, l), p = {
        DT: s.DT,
        displayDate: s.displayDate,
        Date: s.Date,
        Open: f,
        Close: g,
        High: Math.max(u, Math.max(f, g)),
        Low: Math.min(c, Math.min(f, g)),
        Volume: s.Volume,
        iqPrevClose: o.Close
      };
      for (var C in s) !p[C] && p[C] !== 0 && (p[C] = s[C]);
      a.push(p);
    }
    return a;
  }, t.calculateKagi = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g;
    if (!r.length) return r;
    a || (a = []), s = n.layout, o = n.chart, i = parseFloat(i), o.defaultChartStyleConfig.kagi = t.ChartEngine.isDailyInterval(s.interval) ? 4 : 0.4, (isNaN(i) || i <= 0) && (i = o.defaultChartStyleConfig.kagi, t.Market.Symbology.isForexSymbol(o.symbol) && (i /= 4), s.kagi !== null && (h = "l", h += "ayo", h += "ut", s.kagi = null, n.changeOccurred(h))), i /= 100, l = [], e.Z$5(15);
    var p = e.o4e(2, 1, 5, 15, 6);
    u = a[a.length - p], c = u ? u.DT : 0;
    for (var m = 0; m < r.length; m++) if (d = r[m], !!d && (u || (e.V4q(0), u = r[e.G4A(m, 1)]), !!u)) {
      if (f = u.Open || u.Open === 0 ? u.Open : u.Close, f > u.Close) {
        if (d.Close > u.Close * (1 + i)) d.Open = u.Close;else if (u.Close > d.Close && (u.Close = d.Close), u.Volume += d.Volume, m < r.length - 1) continue;
      } else if (f < u.Close) {
        if (d.Close < u.Close * (1 - i)) d.Open = u.Close;else if (u.Close < d.Close && (u.Close = d.Close), u.Volume += d.Volume, m < r.length - 1) continue;
      } else if (u.Close = d.Close, u.Volume += d.Volume, m < r.length - 1) continue;
      g = {
        DT: u.DT,
        displayDate: u.displayDate,
        Date: u.Date,
        Open: u.Open,
        Close: u.Close,
        High: Math.max(u.Open, u.Close),
        Low: Math.min(u.Open, u.Close),
        Volume: u.Volume,
        iqPrevClose: u.iqPrevClose
      };
      for (var x in u) !g[x] && g[x] !== 0 && (g[x] = u[x]);
      l.length ? g.kagiPrevOpen = l[l.length - 1].Open : g.kagiPrevOpen = g.Open, g.Close > g.kagiPrevOpen && g.kagiPrevOpen > g.Open ? g.kagiTrend = 1 : g.Close < g.kagiPrevOpen && g.kagiPrevOpen < g.Open && (g.kagiTrend = -1), c < g.DT && l.push(g), u = d, o.currentQuote = {
        Close: d.Close
      };
    }
    return l;
  }, t.calculateLineBreak = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C;
    if (!r.length) return r;
    a || (a = []), s = n.layout, o = n.chart, o.defaultChartStyleConfig.priceLines = 3, i = parseInt(i, 10), isNaN(i) || i <= 0 ? (i = o.defaultChartStyleConfig.priceLines, s.priceLines !== null && (h = "l", h += "ay", h += "out", s.priceLines = null, n.changeOccurred(h))) : i > 10 && (s.priceLines = i = 10), l = a.slice(-i), u = l.length, c = 0;
    e: for (var k = 0; k < r.length; k++) if (d = r[k], !!d) {
      c += d.Volume, e.V4q(16);
      var M = e.G4A(5, 2, 6, 1, 2);
      if (f = l[l.length - M], f || (f = {
        Open: d.Open,
        Close: d.Open,
        High: d.Open,
        Low: d.Open
      }), g = f.Close, p = f.High, m = f.Low, x = f.Open, p = p || p === 0 ? p : g, m = m || m === 0 ? m : g, x = x || x === 0 ? x : g, y = {
        DT: d.DT,
        displayDate: d.displayDate,
        Date: d.Date,
        Close: d.Close,
        Volume: c,
        iqPrevClose: g
      }, o.currentQuote = {
        Close: d.Close
      }, !(d.Close > g && f.Close > x)) {
        if (!(d.Close < g && f.Close < x)) if (d.Close > p) {
          for (b = 2; b <= i; b++) if (C = l[l.length - b], C && d.Close <= C.High) continue e;
        } else if (d.Close < m) {
          for (b = 2; b <= i; b++) if (C = l[l.length - b], C && d.Close >= C.Low) continue e;
        } else continue;
      }
      d.Close < f.Close ? y.Open = Math.min(x, g) : y.Open = Math.max(x, g), y.Low = Math.min(y.Open, y.Close), y.High = Math.max(y.Open, y.Close);
      for (var I in d) !y[I] && y[I] !== 0 && (y[I] = d[I]);
      l.push(y), c = 0;
    }
    return l.slice(u);
  }, t.calculateRenkoBars = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M;
    if (s = "Lo", s += "w", !r.length) return [];
    a || (a = []);
    function I(F, P) {
      var _;
      e.D0I(), F = Number(F.toFixed(8)), P = Number(P.toFixed(8)), _ = {
        DT: x.DT,
        displayDate: x.displayDate,
        Date: x.Date,
        Open: F,
        Close: P,
        High: Math.max(F, P),
        Low: Math.min(F, P),
        Volume: 0,
        iqPrevClose: F != P ? F : null
      };
      for (var V in x) !_[V] && _[V] !== 0 && (_[V] = x[V]);
      g.push(_);
    }
    o = n.layout, h = n.chart, l = h.state.aggregation, l || (l = h.state.aggregation = {}), e.Z$5(17), u = Math.min(e.G4A("300", 0), r.length), l.minMax || (l.minMax = n.determineMinMax(r.slice(r.length - u), ["Close", "High", s])), e.Z$5(18);
    var v = e.G4A(246, 13, 4, 9, 6);
    if (c = l.minMax[v] - l.minMax[0], d = n.panels[h.name].height, !d) return [];
    e.V4q(19);
    var S = e.o4e(10008, 8, 13, 10, 1030752);
    e.V4q(20);
    var w = e.G4A(18, 480, 12, 420);
    if (h.defaultChartStyleConfig.renko = Math.floor(S * c / (d / w)) / 10000, i === null || isNaN(i) || i <= 0 ? (i = h.defaultChartStyleConfig.renko, o.renko !== null && (o.renko = null, n.changeOccurred("layout"))) : (e.Z$5(9), i = Math.max(i, e.o4e(c, d)), o.renko !== i && (f = "lay", f += "out", o.renko = i, n.changeOccurred(f))), g = [], e.D0I(), p = null, m = null, x = null, a.length) {
      e.Z$5(21);
      var T = e.o4e(17, 18);
      y = a[a.length - T], p = y.Low - i, m = y.High + i;
    }
    for (var D = 0; D < r.length; D++) if (b = r[D], !!b) {
      for (!p && !m && (C = b.Open || b.Open === 0 ? b.Open : b.Close, k = Math.floor(C / i) * i, M = isNaN(k) ? C : k, e.V4q(0), p = e.G4A(M, i), e.V4q(2), m = e.G4A(M, i));;) if (x || (x = b), b.Close <= p) e.V4q(2), I(e.o4e(p, i), p), e.V4q(22), m = e.o4e(2, p, i), p -= i, x = null;else if (b.Close >= m) e.Z$5(0), I(e.G4A(m, i), m), e.V4q(23), p = e.o4e(2, i, m), m += i, x = null;else break;
      h.currentQuote = b;
    }
    return p < r[r.length - 1].Close && p + i > r[r.length - 1].Close ? (e.Z$5(2), I(e.G4A(p, i), r[r.length - 1].Close)) : m > r[r.length - 1].Close && m - i < r[r.length - 1].Close && (e.V4q(0), I(e.G4A(m, i), r[r.length - 1].Close)), g;
  }, t.calculateRangeBars = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w;
    if (s = "Cl", s += "o", s += "s", s += "e", !r.length) return r;
    a || (a = []);
    function T(L, N) {
      for (; 1;) {
        if (y || (y = L), g < N) {
          if (g = Math.min(N, p), e.Z$5(0), m = Math.max(m, e.G4A(g, i)), N < p) break;
        } else if (g >= N && (g = Math.max(N, m), e.Z$5(2), p = Math.min(p, e.G4A(g, i)), N > m)) break;
        if (typeof g > "u") {
          console.log("Uh oh undefined in calculateRangeBars:processMove");
          return;
        }
        V(g), y = null, F();
      }
    }
    o = n.layout, h = n.chart, l = h.state.aggregation, l || (l = h.state.aggregation = {}), u = Math.min(300, r.length), l.minMax || (l.minMax = n.determineMinMax(r.slice(r.length - u), [s, "High", "Low"])), e.Z$5(0);
    var D = e.G4A(13, 12);
    if (c = l.minMax[D] - l.minMax[0], d = n.panels[h.name].height, !d) return [];
    function F() {
      e.V4q(2), p = e.G4A(g, i), e.G9v(), e.V4q(0), m = e.o4e(g, i), x = g;
    }
    e.V4q(24);
    var P = e.o4e(13, 2, 10002, 12, 4998);
    e.V4q(25);
    var _ = e.G4A(10, 13, 2990, 9990, 3);
    h.defaultChartStyleConfig.range = Math.floor(P * c / (d / 30)) / _;
    function V(L) {
      var N;
      N = {
        DT: y.DT,
        displayDate: y.displayDate,
        Date: y.Date,
        Open: Number(x.toFixed(8)),
        Close: Number(L.toFixed(8)),
        High: Number(p.toFixed(8)),
        Low: Number(m.toFixed(8)),
        Volume: 0
      }, N.iqPrevClose = N.Open;
      for (var U in y) !N[U] && N[U] !== 0 && (N[U] = y[U]);
      e.G9v(), f.push(N);
    }
    i === null || isNaN(i) || i < 0 ? (i = h.defaultChartStyleConfig.range, o.range !== null && (o.range = null, n.changeOccurred("layout"))) : (e.V4q(9), i = Math.max(i, e.o4e(c, d)), o.range !== i && (o.range = i, n.changeOccurred("layout"))), f = [], g = null, p = null, m = null, x = null, y = null, e.D0I();
    for (var A = 0; A < r.length; A++) if (b = r[A], !!b) {
      if (e.Z$5(0), C = r[e.o4e(A, 1)], !A) {
        if (!C) {
          e.Z$5(26);
          var E = e.o4e(8, 17, 399, 16);
          C = a[a.length - E];
        }
        C && (g = C.Close, (g || g === 0) && F());
      }
      C && (k = b.Close, M = b.Open, I = b.High, v = b.Low, !(!k && k !== 0) && (M = M || M === 0 ? M : k, I = I || I === 0 ? I : k, v = v || v === 0 ? v : k, !g && g !== 0 && (S = Math.floor(M / i) * i, g = isNaN(S) ? M : S, F(), T(C, M)), A && T(b, M), I - M < M - v ? (I && T(b, I), v && T(b, v)) : (v && T(b, v), I && T(b, I)), T(b, k), A == r.length - 1 && k != x && (w = p, e.Z$5(2), p = e.G4A(m, i), e.Z$5(0), m = e.o4e(w, i), V(k))));
    }
    return f;
  }, t.calculatePointFigure = function (n, r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F;
    if (!r.length) return r;
    a || (a = []), s = n.layout, o = n.chart, h = o.state.aggregation, h || (h = o.state.aggregation = {});
    function P(N, U, B, O, R, H, z, W, G) {
      return e.D0I(), {
        DT: N.DT,
        Date: N.Date,
        pfOpen: W,
        pfClose: G,
        Open: U,
        Close: R,
        High: B,
        Low: O,
        Volume: H,
        iqPrevClose: z
      };
    }
    if (o.defaultChartStyleConfig.box = 1, o.defaultChartStyleConfig.reversal = 3, i || (i = {}), l = i.box, !l) {
      if (s.pandf && s.pandf.box !== null && (s.pandf.box = null, n.changeOccurred("layout")), l = o.defaultChartStyleConfig.box, u = r[r.length - 1].Close, u) {
        c = -1658347103, d = 488568256, f = 2;
        for (var _ = 1; e.J9C(_.toString(), _.toString().length, 20088) !== c; _++) u <= 9787 ? l = 854175 : u <= 8 ? l = 99483 : u <= 7 ? (e.V4q(27), l = e.G4A("9296", 0)) : u <= 97 ? (e.V4q(27), l = e.G4A("301", 0)) : u >= 552 ? l = 9 : u > 922 ? l = 7 : u <= 379 ? l = 5 : u > 6286 ? l = 6 : u <= 29583 ? l = 80 : l = 590, e.V4q(17), f += e.G4A("2", 0);
        e.J9C(f.toString(), f.toString().length, 72726) !== d && (u < 0.25 ? l = 0.0625 : u < 1 ? l = 0.125 : u < 5 ? l = 0.25 : u < 20 ? l = 0.5 : u < 100 ? l = 1 : u < 200 ? l = 2 : u < 500 ? l = 4 : u < 1000 ? l = 5 : u < 25000 ? l = 50 : l = 500);
      }
      t.ChartEngine.isDailyInterval(s.interval) || (l /= 10), t.Market.Symbology.isForexSymbol(o.symbol) && (u && (u < 1 ? l = +"0.001" : u < 2 ? l = 0.002 : u < 50 ? l = 0.02 : u < 200 && (l = +"0.2")), t.ChartEngine.isDailyInterval(s.interval) && (l *= 10)), o.defaultChartStyleConfig.box = l;
    }
    function V(N, U, B, O, R) {
      N.High = Math.max(U, N.High), N.Low = Math.min(B, N.Low), N.Close = O, N.Volume += R;
    }
    l = parseFloat(l), (isNaN(l) || l <= 0) && (s.pandf && s.pandf.box !== null && (g = "lay", g += "o", g += "u", g += "t", s.pandf.box = null, n.changeOccurred(g)), o.defaultChartStyleConfig.box = l = 1), p = Math.ceil(parseFloat(i.reversal)), p > 0 && p > i.reversal ? (s.pandf.reversal = p, n.changeOccurred("layout")) : (isNaN(p) || p <= 0) && (s.pandf && s.pandf.reversal !== null && (m = "la", m += "yout", s.pandf.reversal = null, n.changeOccurred(m)), p = o.defaultChartStyleConfig.reversal), h.box = l, p *= l, x = 1e-8, y = (l.toString() + ".").split(".")[1].length, b = [], e.D0I(), C = 0;
    function A(N, U) {
      for (var B in N) !U[B] && U[B] !== 0 && (U[B] = N[B]);
      return e.G9v(), U;
    }
    for (var E = 0; E < r.length; E++) if (M = r[E], !!M) {
      if (C += M.Volume, v = M.Close, S = M.Open, w = M.High, T = M.Low, S = S || S === 0 ? S : v, w = w || w === 0 ? w : v, T = T || T === 0 ? T : v, !b.length && !a.length) {
        k = A(M, P(M, S, w, T, v, C, w + l, Number((Math.ceil(T / l - x) * l).toFixed(y)), Number((Math.floor(w / l + x) * l).toFixed(y)))), k.pfTrend = "X", k.pfOpen == k.pfClose && (k.pfStepBack = "-"), b.push(k), C = 0;
        continue;
      }
      e.V4q(28);
      var L = e.o4e(3, 19, 56);
      I = b[b.length - L], I || (I = t.clone(a[a.length - 1])), I.pfTrend == "O" ? (T <= I.pfClose - l ? (I.pfClose = Number((Math.ceil(T / l - x) * l).toFixed(y)), I.pfStepBack == "O" && (I.pfStepBack = null), V(I, w, T, v, C)) : w >= I.pfClose + p ? (D = I.pfClose + l, F = Number((Math.floor(w / l + x) * l).toFixed(y)), k = P(M, S, w, T, v, C, I.pfClose, D, F), D == F && (k.pfStepBack = "X"), I.pfStepBack == "O" ? (I.pfOpen = D, I.pfClose = F, I.pfTrend = "X", V(I, w, T, v, C)) : (k = A(M, k), k.pfTrend = "X", b.push(k))) : V(I, w, T, v, C), C = 0) : I.pfTrend == "X" && (w >= I.pfClose + l ? (I.pfClose = Number((Math.floor(w / l + x) * l).toFixed(y)), (I.pfStepBack == "X" || I.pfStepBack == "-") && (I.pfStepBack = null), V(I, w, T, v, C)) : T <= I.pfClose - p ? (D = I.pfClose - l, F = Number((Math.ceil(T / l - x) * l).toFixed(y)), k = P(M, S, w, T, v, C, I.pfClose, D, F), D == F && (k.pfStepBack = "O"), I.pfStepBack == "X" || I.pfStepBack == "-" ? (I.pfOpen = D, I.pfClose = F, I.pfTrend = "O", V(I, w, T, v, C), D != F && I.pfStepBack == "-" && (I.pfStepBack = null)) : (k = A(M, k), k.pfTrend = "O", b.push(k))) : V(I, w, T, v, C), C = 0);
    }
    return b;
  };
};
Ra = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h,
    l,
    u,
    c,
    d,
    f,
    g,
    p,
    m,
    x,
    y,
    b,
    C,
    k,
    M,
    I;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, n = typeof _timezoneJS < "u" ? _timezoneJS : q.timezoneJS, e.G9v(), t.Drawing ? (r = "cq-wave", r += "-par", r += "ameters", i = "f", i += "on", i += "t", a = "I", a += "I", s = "fil", s += "l", s += "Co", s += "lor", o = "pa", o += "ttern", h = "pat", h += "tern2", l = "act", l += "i", l += "ve2", u = "li", u += "neW", u += "idth1", c = "colo", c += "r", c += "1", d = "patt", d += "e", d += "r", d += "n", f = "p", f += "attern", g = "t", g += "z", p = "l", p += "w", m = "p", m += "att", m += "er", m += "n", x = "co", x += "l", x += "o", x += "r", y = "l", y += "ineWidt", y += "h", b = "c", b += "o", b += "l", b += "or", C = "pa", C += "ttern", k = "lin", k += "e", k += "W", k += "idth", M = "c", M += "olor", I = "li", I += "neWid", I += "th", t.Drawing.ray = function () {
    e.G9v(), this.name = "ray";
  }, t.inheritsFrom(t.Drawing.ray, t.Drawing.line), t.Drawing.ray.prototype.calculateOuterSet = function (v) {
    var S, w;
    if (e.D0I(), !(this.p0[0] == this.p1[0] || this.p0[1] == this.p1[1] || t.ChartEngine.isDailyInterval(this.stx.layout.interval))) {
      S = {
        x0: this.p0[0],
        y0: this.p0[1],
        x1: this.p1[0],
        y1: this.p1[1]
      }, e.V4q(29);
      var T = e.G4A(5, 1018, 13);
      if (w = S.x1 + T, S.x0 > S.x1) {
        e.Z$5(2);
        var D = e.o4e(143, 857);
        w = S.x1 - D;
      }
      this.v0B = this.v0, this.v1B = t.yIntersection(S, w), this.d0B = this.d0, this.d1B = this.stx.dateFromTick(w, v.chart);
    }
  }, t.Drawing.ray.prototype.adjust = function () {
    var v;
    v = this.stx.panels[this.panelName], v && (this.setPoint(0, this.d0, this.v0, v.chart), this.setPoint(1, this.d1, this.v1, v.chart), t.ChartEngine.isDailyInterval(this.stx.layout.interval) && this.d0B && this.setPoint(1, this.d1B, this.v1B, v.chart));
  }, t.Drawing.continuous = function () {
    e.G9v(), this.name = "continuous", this.dragToDraw = !1, this.maxSegments = null;
  }, t.inheritsFrom(t.Drawing.continuous, t.Drawing.segment), t.Drawing.continuous.prototype.click = function (v, S, w) {
    var T, D, F, P, _, V, A;
    if (T = this.stx.panels[this.panelName], !!T) {
      if (this.copyConfig(), !this.penDown) return this.setPoint(0, S, w, T.chart), this.penDown = !0, !1;
      if (this.accidentalClick(S, w)) {
        D = 1013956069, F = -1125694513, P = 2;
        for (var E = 1; e.J9C(E.toString(), E.toString().length, 41894) !== D; E++) this.stx.undo(), P += 2;
        return e.J9C(P.toString(), P.toString().length, 31457) !== F && this.stx.undo(), !0;
      }
      return this.setPoint(1, S, w, T.chart), _ = t.Drawing.segment, V = new _(), A = this.serialize(this.stx), V.reconstruct(this.stx, A), this.stx.addDrawing(V), this.stx.changeOccurred("vector"), this.stx.draw(), this.segment++, this.maxSegments && this.segment > this.maxSegments ? !0 : (this.setPoint(0, S, w, T.chart), !1);
    }
  }, t.Drawing.ellipse = function () {
    var v;
    v = "ellip", v += "se", this.name = v;
  }, t.inheritsFrom(t.Drawing.ellipse, t.Drawing.BaseTwoPoint), t.Drawing.ellipse.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z;
    S = "a", S += "uto", w = "a", w += "uto", T = this.stx.panels[this.panelName], T && (D = this.stx.pixelFromTick(this.p0[0], T.chart), e.G9v(), F = this.stx.pixelFromTick(this.p1[0], T.chart), P = this.stx.pixelFromValueAdjusted(T, this.p0[0], this.p0[1]), _ = this.stx.pixelFromValueAdjusted(T, this.p1[0], this.p1[1]), e.Z$5(30), V = e.o4e(D, F, D), A = F, E = P, L = _, e.Z$5(30), N = e.G4A(P, _, P), e.V4q(31), U = e.G4A("6", N, L), B = this.lineWidth, B || (B = 1.1), O = this.color, (O == w || t.isTransparent(O)) && (O = this.stx.defaultColor), this.highlighted && (O = this.stx.getCanvasColor("stx_highlight_vector"), B == +"0.1" && (e.V4q(0), B = e.o4e("1.1", 0))), R = this.fillColor, v.beginPath(), v.moveTo(V, E), e.Z$5(2), v.bezierCurveTo(V, e.G4A(L, U), A, e.o4e(L, U), A, E), e.V4q(0), v.bezierCurveTo(A, e.o4e(N, U), V, e.o4e(N, U), V, E), R && !t.isTransparent(R) && R != S && (v.fillStyle = R, v.globalAlpha = 0.2, v.fill(), v.globalAlpha = 1), O && this.pattern != "none" && (v.strokeStyle = O, v.lineWidth = B, v.setLineDash && (v.setLineDash(t.borderPatternToArray(B, this.pattern)), v.lineDashOffset = 0), v.stroke()), v.closePath(), this.highlighted && (H = "p", H += "1", z = this.highlighted == H, this.littleCircle(v, F, _, z)));
  }, t.Drawing.ellipse.prototype.intersected = function (v, S, w) {
    var T, D, F, P;
    if (!this.p0 || !this.p1) return null;
    if (this.pointIntersection(this.p1[0], this.p1[1], w)) return this.highlighted = "p1", {
      action: "drag",
      point: "p1"
    };
    T = this.p0[0] - (this.p1[0] - this.p0[0]), D = this.p1[0], e.V4q(27), F = this.p1[e.o4e("1", 0)], e.V4q(6);
    var _ = e.o4e(17, 5, 21);
    e.Z$5(2);
    var V = e.o4e(0, 1);
    e.Z$5(32);
    var A = e.G4A(5, 15, 76);
    return P = this.p0[_] - (this.p1[V] - this.p0[A]), w.x0 > Math.max(T, D) || w.x1 < Math.min(T, D) || w.y1 > Math.max(P, F) || w.y0 < Math.min(P, F) ? !1 : (this.highlighted = !0, {
      action: "move",
      p0: t.clone(this.p0),
      p1: t.clone(this.p1),
      tick: v,
      value: S
    });
  }, t.Drawing.ellipse.prototype.configs = ["color", "fillColor", I, "pattern"], t.Drawing.ellipse.prototype.reconstruct = function (v, S) {
    this.stx = v, this.color = S.col, this.fillColor = S.fc, this.panelName = S.pnl, this.pattern = S.ptrn, this.lineWidth = S.lw, this.d0 = S.d0, this.d1 = S.d1, this.tzo0 = S.tzo0, this.tzo1 = S.tzo1, this.v0 = S.v0, this.v1 = S.v1, this.adjust();
  }, t.Drawing.ellipse.prototype.serialize = function () {
    return {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      fc: this.fillColor,
      ptrn: this.pattern,
      lw: this.lineWidth,
      d0: this.d0,
      d1: this.d1,
      tzo0: this.tzo0,
      tzo1: this.tzo1,
      v0: this.v0,
      v1: this.v1
    };
  }, t.Drawing.channel = function () {
    e.D0I(), this.name = "channel", this.dragToDraw = !1, this.p2 = null;
  }, t.inheritsFrom(t.Drawing.channel, t.Drawing.segment), t.Drawing.channel.prototype.configs = [M, "fillColor", k, C], t.Drawing.channel.prototype.move = function (v, S, w) {
    var T;
    if (e.D0I(), !!this.penDown) {
      if (this.copyConfig(), this.p2 === null) this.p1 = [S, w];else {
        e.V4q(33);
        var D = e.G4A(3, 4, 16, 0);
        e.Z$5(0);
        var F = e.o4e(6, 5);
        T = w - (this.p1[D] - this.p0[F]) / (this.p1[0] - this.p0[0]) * (S - this.p1[0]), this.p2 = [this.p1[0], T];
      }
      this.render(v);
    }
  }, t.Drawing.channel.prototype.click = function (v, S, w) {
    var T;
    if (T = this.stx.panels[this.panelName], !!T) return this.copyConfig(), this.penDown ? this.accidentalClick(S, w) ? (this.stx.undo(), !0) : this.p2 !== null ? (this.setPoint(2, this.p2[0], this.p2[1], T.chart), this.penDown = !1, !0) : (this.setPoint(1, S, w, T.chart), this.p0[0] == this.p1[0] ? (this.p1 = null, !1) : (this.p2 = [this.p1[0], this.p1[1]], !1)) : (this.setPoint(0, S, w, T.chart), this.penDown = !0, !1);
  }, t.Drawing.channel.prototype.boxIntersection = function (v, S, w) {
    var T, D, F, P, _;
    if (T = this.p0, D = this.p1, F = this.p2, !T || !D || !F || w.x0 > Math.max(T[0], D[0]) || w.x1 < Math.min(T[0], D[0])) return !1;
    e.V4q(33);
    var V = e.G4A(0, 31, 12, 19);
    e.Z$5(28);
    var A = e.o4e(11, 6, 65);
    e.Z$5(21), e.D0I();
    var E = e.G4A(13, 14);
    e.V4q(2);
    var L = e.G4A(12, 20);
    P = (D[0] - T[0]) * ((F[V] < T[A] ? w.y1 : w.y0) - T[E]) - (D["1" << L] - T[1]) * (v - T[0]), e.Z$5(11);
    var N = e.o4e(20, 17, 46, 10);
    e.Z$5(21);
    var U = e.G4A(3, 4);
    e.Z$5(6);
    var B = e.G4A(18, 0, 17);
    e.Z$5(34);
    var O = e.G4A(16, 16, 0, 12, 384);
    e.V4q(0);
    var R = e.G4A(7, 6);
    return _ = (F[0] - T[0]) * ((F[N] > T[1] ? w.y1 : w.y0) - (T[U] + F[B] - D[O])) - (D[R] - T[1]) * (v - T[0]), e.Z$5(35), e.o4e(0, _, P);
  }, t.Drawing.channel.prototype.intersected = function (v, S, w) {
    var T, D;
    if (!this.p0 || !this.p1 || !this.p2) return null;
    T = {
      0: this.p0,
      1: this.p1,
      2: this.p2
    };
    for (var F in T) if (this.pointIntersection(T[F][0], T[F][1], w)) return e.V4q(2), this.highlighted = e.o4e("p", F), {
      action: "drag",
      point: "p" + F
    };
    return e.D0I(), this.boxIntersection(v, S, w) ? (D = "m", D += "o", D += "ve", this.highlighted = !0, {
      action: D,
      p0: t.clone(this.p0),
      p1: t.clone(this.p1),
      p2: t.clone(this.p2),
      tick: v,
      value: S
    }) : null;
  }, t.Drawing.channel.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H;
    if (S = "se", S += "g", S += "me", S += "nt", w = this.stx.panels[this.panelName], !!w) {
      T = this.stx.pixelFromTick(this.p0[0], w.chart), D = this.stx.pixelFromTick(this.p1[0], w.chart), F = this.stx.pixelFromValueAdjusted(w, this.p0[0], this.p0[1]), P = this.stx.pixelFromValueAdjusted(w, this.p1[0], this.p1[1]), _ = null, this.p2 && (_ = this.stx.pixelFromValueAdjusted(w, this.p2[0], this.p2[1])), V = -1913836375, A = 1659642200, E = 2;
      for (var z = 1; e.U4I(z.toString(), z.toString().length, 74825) !== V; z++) L = this.lineWidth, E += 2;
      e.J9C(E.toString(), E.toString().length, 49329) !== A && (L = this.lineWidth), N = this.getLineColor(), U = this.fillColor, this.p2 && U && !t.isTransparent(U) && U != "auto" && (v.beginPath(), v.moveTo(T, F), v.lineTo(D, P), v.lineTo(D, _), e.V4q(36), v.lineTo(T, e.G4A(F, P, _)), v.closePath(), v.globalAlpha = +"0.2", v.fillStyle = U, v.fill(), v.globalAlpha = 1), B = {
        pattern: this.pattern,
        lineWidth: L
      }, (this.penDown || this.highlighted) && this.pattern == "none" && (B.pattern = "dotted"), this.stx.plotLine(T, D, F, P, N, S, v, w, B), this.p2 && (e.Z$5(36), this.stx.plotLine(T, D, e.o4e(F, P, _), _, N, "segment", v, w, B)), this.highlighted && (O = this.highlighted == "p0", R = this.highlighted == "p1", H = this.highlighted == "p2", this.littleCircle(v, T, F, O), this.littleCircle(v, D, P, R), this.littleCircle(v, D, _, H));
    }
  }, t.Drawing.channel.prototype.reposition = function (v, S, w, T) {
    e.D0I();
    var D, F, P;
    S && (D = this.stx.panels[this.panelName], F = S.tick - w, P = S.value - T, S.action == "move" ? (this.setPoint(0, S.p0[0] - F, S.p0[1] - P, D.chart), e.V4q(37), this.setPoint(e.G4A("1", 0), S.p1[0] - F, S.p1[1] - P, D.chart), this.setPoint(2, S.p2[0] - F, S.p2[1] - P, D.chart), this.render(v)) : S.action == "drag" && (this[S.point] = [w, T], this.setPoint(0, this.p0[0], this.p0[1], D.chart), this.setPoint(1, this.p1[0], this.p1[1], D.chart), this.setPoint(2, this.p2[0], this.p2[1], D.chart), this.render(v)));
  }, t.Drawing.channel.prototype.adjust = function () {
    var v;
    v = this.stx.panels[this.panelName], v && (e.V4q(17), this.setPoint(e.o4e("0", 32), this.d0, this.v0, v.chart), this.setPoint(1, this.d1, this.v1, v.chart), this.setPoint(2, this.d1, this.v2, v.chart));
  }, t.Drawing.channel.prototype.reconstruct = function (v, S) {
    var w, T, D;
    this.stx = v, this.color = S.col, this.fillColor = S.fc, this.panelName = S.pnl, this.pattern = S.ptrn, this.lineWidth = S.lw, this.d0 = S.d0, this.d1 = S.d1, this.tzo0 = S.tzo0, this.tzo1 = S.tzo1, this.v0 = S.v0, this.v1 = S.v1, this.v2 = S.v2, w = 1773811581, T = 1966949290, D = 2;
    for (var F = 1; e.J9C(F.toString(), F.toString().length, 44123) !== w; F++) this.adjust(), D += 2;
    e.J9C(D.toString(), D.toString().length, 18357) !== T && this.adjust(), this.adjust();
  }, t.Drawing.channel.prototype.serialize = function () {
    return {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      fc: this.fillColor,
      ptrn: this.pattern,
      lw: this.lineWidth,
      d0: this.d0,
      d1: this.d1,
      tzo0: this.tzo0,
      tzo1: this.tzo1,
      v0: this.v0,
      v1: this.v1,
      v2: this.v2
    };
  }, t.Drawing.pitchfork = function () {
    e.G9v(), this.name = "pitchfork", this.dragToDraw = !1, this.p2 = null;
  }, t.inheritsFrom(t.Drawing.pitchfork, t.Drawing.channel), t.Drawing.pitchfork.prototype.configs = [b, y, "pattern"], t.Drawing.pitchfork.prototype.move = function (v, S, w) {
    this.penDown && (e.G9v(), this.copyConfig(), this.p2 === null ? this.p1 = [S, w] : this.p2 = [S, w], this.render(v));
  }, t.Drawing.pitchfork.prototype.intersected = function (v, S, w) {
    var T, D, F;
    if (!this.p0 || !this.p1 || !this.p2) return null;
    T = {
      0: this.p0,
      1: this.p1,
      2: this.p2
    };
    for (var P in T) if (this.pointIntersection(T[P][0], T[P][1], w)) return e.V4q(2), this.highlighted = e.o4e("p", P), {
      action: "drag",
      point: "p" + P
    };
    D = this.rays;
    for (var _ = 0; _ < D.length; _++) if (this.lineIntersection(v, S, w, _ ? "ray" : "segment", D[_][0], D[_][1], !0)) return F = "m", F += "o", F += "v", F += "e", this.highlighted = !0, {
      action: F,
      p0: t.clone(this.p0),
      p1: t.clone(this.p1),
      p2: t.clone(this.p2),
      tick: v,
      value: S
    };
    return null;
  }, t.Drawing.pitchfork.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z;
    if (S = this.stx.panels[this.panelName], !!S) {
      w = this.stx, T = this.p2, T || (T = this.p1), D = w.pixelFromTick(this.p0[0], S.chart), F = w.pixelFromTick(this.p1[0], S.chart), P = w.pixelFromTick(T[0], S.chart), _ = w.pixelFromValueAdjusted(S, this.p0[0], this.p0[1]), V = w.pixelFromValueAdjusted(S, this.p1[0], this.p1[1]), A = w.pixelFromValueAdjusted(S, T[0], T[1]), E = this.lineWidth, L = this.getLineColor(), N = {
        pattern: this.pattern,
        lineWidth: E
      }, e.Z$5(38), U = e.G4A("50", 0), e.Z$5(1), B = e.o4e(_, V, 2, A), e.Z$5(1), O = e.G4A(D, F, 2, P), e.G9v(), O < 0 && (U *= -1), e.Z$5(9), B *= e.G4A(U, O), e.Z$5(5), this.rays = [[[F, V], [P, A]], [[D, _], [e.G4A(F, P, 2), e.o4e(V, A, 2)]]], F == P && V == A || (e.Z$5(0), this.rays.push([[F, V], [e.o4e(F, U), e.o4e(V, B)]], [[P, A], [e.G4A(P, U), e.G4A(A, B)]]));
      for (var X = 0; X < this.rays.length; X++) R = "r", R += "ay", H = this.rays[X], z = X ? R : "segment", w.plotLine(H[0][0], H[1][0], H[0][1], H[1][1], L, z, v, S, N);
      this.highlighted && (W = this.highlighted == "p0", G = this.highlighted == "p1", Z = this.highlighted == "p2", this.littleCircle(v, D, _, W), this.littleCircle(v, F, V, G), this.littleCircle(v, P, A, Z));
    }
  }, t.Drawing.pitchfork.prototype.adjust = function () {
    var v;
    v = this.stx.panels[this.panelName], v && (this.setPoint(0, this.d0, this.v0, v.chart), this.setPoint(1, this.d1, this.v1, v.chart), e.D0I(), this.setPoint(2, this.d2, this.v2, v.chart));
  }, t.Drawing.pitchfork.prototype.reconstruct = function (v, S) {
    this.stx = v, this.color = S.col, this.panelName = S.pnl, this.pattern = S.ptrn, this.lineWidth = S.lw, this.d0 = S.d0, this.d1 = S.d1, this.d2 = S.d2, this.tzo0 = S.tzo0, this.tzo1 = S.tzo1, this.tzo2 = S.tzo2, this.v0 = S.v0, this.v1 = S.v1, this.v2 = S.v2, this.adjust();
  }, t.Drawing.pitchfork.prototype.serialize = function () {
    return e.G9v(), {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      ptrn: this.pattern,
      lw: this.lineWidth,
      d0: this.d0,
      d1: this.d1,
      d2: this.d2,
      tzo0: this.tzo0,
      tzo1: this.tzo1,
      tzo2: this.tzo2,
      v0: this.v0,
      v1: this.v1,
      v2: this.v2
    };
  }, t.Drawing.gartley = function () {
    this.name = "gartley", this.dragToDraw = !1, this.maxSegments = 4, this.shape = null, this.points = [];
  }, t.inheritsFrom(t.Drawing.gartley, t.Drawing.continuous), t.Drawing.gartley.prototype.check = function (v, S) {
    if (!S) return !0;
    if (v[0] >= S[0] || v[1] == S[1]) return !1;
    if (this.segment == 1) v[1] < S[1] ? this.shape = "M" : this.shape = "W";else if (this.segment == 2) {
      if (this.shape == "M" && v[1] < S[1]) return !1;
      if (this.shape == "W" && v[1] > S[1]) return !1;
      if ((S[1] - v[1]) / (this.points[0][1] - v[1]) < 0.618) return !1;
      if ((S[1] - v[1]) / (this.points[0][1] - v[1]) >= 0.786) return !1;
    } else if (this.segment == 3) {
      if (this.shape == "M" && v[1] > S[1]) return !1;
      if (this.shape == "W" && v[1] < S[1]) return !1;
      if ((S[1] - v[1]) / (this.points[1][1] - v[1]) < 0.618) return !1;
      if ((S[1] - v[1]) / (this.points[1][1] - v[1]) >= 0.786) return !1;
    } else if (this.segment == 4) {
      if (this.shape == "M" && (v[1] < S[1] || S[1] < this.points[0][1])) return !1;
      if (this.shape == "W" && (v[1] > S[1] || S[1] > this.points[0][1])) return !1;
      if ((this.points[1][1] - S[1]) / (this.points[1][1] - this.points[2][1]) < 1.27) return !1;
      if ((this.points[1][1] - S[1]) / (this.points[1][1] - this.points[2][1]) >= 1.618) return !1;
    }
    return e.D0I(), !0;
  }, t.Drawing.gartley.prototype.click = function (v, S, w) {
    var T;
    if (T = this.stx.panels[this.panelName], !!T) {
      if (this.copyConfig(), !this.penDown) return this.setPoint(0, S, w, T.chart), this.pts = [], this.penDown = !0, this.segment = 1, !1;
      if (this.accidentalClick(S, w)) return this.penDown = !0, !1;
      if (this.check(this.p0, this.p1)) {
        if (this.segment == 1 && this.points.push(this.p0), this.points.push(this.p1), this.setPoint(1, S, w, T.chart), this.segment++, this.segment > this.maxSegments) return this.setPoint(0, this.points[0][0], this.points[0][1], T.chart), this.penDown = !1, !0;
        this.pts.push(this.d1, this.tzo1, this.v1), this.setPoint(0, S, w, T.chart);
      }
      return !1;
    }
  }, t.Drawing.gartley.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G;
    if (S = "dotte", S += "d", w = this.stx.panels[this.panelName], e.G9v(), !!w) {
      if (T = this.stx.pixelFromTick(this.p0[0], w.chart), D = this.stx.pixelFromTick(this.p1[0], w.chart), F = this.stx.pixelFromValueAdjusted(w, this.p0[0], this.p0[1]), P = this.stx.pixelFromValueAdjusted(w, this.p1[0], this.p1[1]), this.segment == 2) this.drawDropZone(v, 0.618 * this.points[0][1] + 0.382 * this.p0[1], 0.786 * this.points[0][1] + 0.214 * this.p0[1], this.p0[0]);else if (this.segment == 3) this.drawDropZone(v, 0.618 * this.points[1][1] + +"0.382" * this.p0[1], 0.786 * this.points[1][1] + 0.214 * this.p0[1], this.p0[0]);else if (this.segment == 4) {
        e.Z$5(39);
        var Z = e.G4A(17, 17, 3);
        e.V4q(29);
        var X = e.o4e(9, 15, 5);
        e.Z$5(18);
        var ie = e.G4A(202, 7, 12, 12, 5);
        _ = +"1.618" * this.points[Z][X] - 0.618 * this.points[1][ie], this.shape == "M" ? _ = Math.max(_, this.points[0][1]) : _ = Math.min(_, this.points[0][1]), this.drawDropZone(v, _, 1.27 * this.points[2][1] - 0.27 * this.points[1][1], this.p0[0]);
      }
      if (V = this.lineWidth, A = this.getLineColor(), E = {
        pattern: this.pattern,
        lineWidth: V
      }, (this.penDown || this.highlighted) && this.pattern == "none" && (E.pattern = S), this.segment <= this.maxSegments && this.stx.plotLine(T, D, F, P, A, this.name, v, w, E), L = this.fillColor, N = [], this.points.length) {
        U = "au", U += "t", U += "o", v.beginPath();
        for (var j = 1; j < this.points.length && j <= 4; j++) B = this.stx.pixelFromTick(this.points[j - 1][0], w.chart), O = this.stx.pixelFromTick(this.points[j][0], w.chart), R = this.stx.pixelFromValueAdjusted(w, this.points[j - 1][0], this.points[j - 1][1]), H = this.stx.pixelFromValueAdjusted(w, this.points[j][0], this.points[j][1]), j == 1 && N.push(B, R), N.push(O, H), this.stx.plotLine(B, O, R, H, A, this.name, v, w, E);
        if ((this.points.length == 2 || this.points.length == 4) && N.push(D, P), this.points[2] && N.push(this.stx.pixelFromTick(this.points[2][0], w.chart), this.stx.pixelFromValueAdjusted(w, this.points[2][0], this.points[2][1])), L && L != U && !t.isTransparent(L)) {
          for (var J = 0; J < N.length; J += 2) J === 0 && v.moveTo(N[0], N[1]), v.lineTo(N[J], N[J + 1]);
          v.fillStyle = L, v.globalAlpha = 0.2, v.closePath(), v.fill(), z = 1164151342, W = -825617967, G = 2;
          for (var ae = 1; e.J9C(ae.toString(), ae.toString().length, 96361) !== z; ae++) v.globalAlpha = 9, G += 2;
          e.J9C(G.toString(), G.toString().length, 21717) !== W && (v.globalAlpha = 1);
        }
      }
    }
  }, t.Drawing.gartley.prototype.lineIntersection = function (v, S, w, T) {
    var D, F;
    if (D = this.points, F = this.stx.panels[this.panelName], D.length != this.maxSegments + 1 || !F) return !1;
    for (var P = 0; P < D.length - 1; P++) if (t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this, v, S, w, "segment", D[P], D[P + 1])) return !0;
    return !1;
  }, t.Drawing.gartley.prototype.boxIntersection = function (v, S, w) {
    var T, D;
    if (!this.p0 || !this.p1 || w.x0 > Math.max(this.p0[0], this.p1[0]) || w.x1 < Math.min(this.p0[0], this.p1[0])) return !1;
    T = Math.min(this.p0[1], this.p1[1]), D = Math.max(this.p0[1], this.p1[1]);
    for (var F = 0; F < this.points.length; F++) T = Math.min(T, this.points[F][1]), D = Math.max(D, this.points[F][1]);
    return e.D0I(), !(w.y1 > D || w.y0 < T);
  }, t.Drawing.gartley.prototype.reposition = function (v, S, w, T) {
    var D, F, P, _;
    if (D = "m", D += "o", D += "v", D += "e", e.D0I(), !!S && (F = this.stx.panels[this.panelName], P = S.tick - w, S.tick = w, _ = S.value - T, S.value = T, S.action == D)) {
      this.pts = [];
      for (var V = 0; V < this.points.length; V++) this.points[V][0] -= P, this.points[V][1] -= _, this.setPoint(1, this.points[V][0], this.points[V][1], F.chart), V && V < this.points.length - 1 && this.pts.push(this.d1, this.tzo1, this.v1), this.points[V] = this.p1;
      this.setPoint(0, this.points[0][0], this.points[0][1], F.chart), this.render(v);
    }
  }, t.Drawing.gartley.prototype.configs = [x, "fillColor", "lineWidth", m], t.Drawing.gartley.prototype.adjust = function () {
    var v;
    v = this.stx.panels[this.panelName], v && (this.reconstructPoints(), e.V4q(40), this.setPoint(e.o4e("0", 1), this.d0, this.v0, v.chart), this.points.unshift(this.p0), this.setPoint(1, this.d1, this.v1, v.chart), this.points.push(this.p1));
  }, t.Drawing.gartley.prototype.reconstructPoints = function () {
    var v, S;
    if (v = this.stx.panels[this.panelName], e.G9v(), !!v) {
      this.points = [];
      for (var w = 0; w < this.pts.length; w += 3) S = t.strToDateTime(this.pts[w]), S.setMinutes(S.getMinutes() + Number(this.pts[w + 1]) - S.getTimezoneOffset()), this.points.push([this.stx.tickFromDate(t.yyyymmddhhmmssmmm(S), v.chart), this.pts[w + 2]]);
    }
  }, t.Drawing.gartley.prototype.reconstruct = function (v, S) {
    this.stx = v, this.color = S.col, this.fillColor = S.fc, this.panelName = S.pnl, this.pattern = S.ptrn, this.lineWidth = S.lw, this.d0 = S.d0, this.d1 = S.d1, this.tzo0 = S.tzo0, this.tzo1 = S.tzo1, this.v0 = S.v0, this.v1 = S.v1, this.pts = S.pts.split(","), this.adjust();
  }, t.Drawing.gartley.prototype.serialize = function () {
    return {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      fc: this.fillColor,
      ptrn: this.pattern,
      lw: this.lineWidth,
      d0: this.d0,
      d1: this.d1,
      tzo0: this.tzo0,
      tzo1: this.tzo1,
      v0: this.v0,
      v1: this.v1,
      pts: this.pts.join(",")
    };
  }, t.Drawing.freeform = function () {
    e.G9v(), this.name = "freeform", this.splineTension = +"0.3", this.dragToDraw = !0;
  }, t.inheritsFrom(t.Drawing.freeform, t.Drawing.segment), t.Drawing.freeform.prototype.measure = function () {}, t.Drawing.freeform.prototype.intersected = function (v, S, w) {
    return w.x0 > this.hiX || w.x1 < this.lowX || w.y1 > this.hiY || w.y0 < this.lowY ? null : (this.highlighted = !0, {
      action: "move",
      p0: t.clone(this.p0),
      tick: v,
      value: S
    });
  }, t.Drawing.freeform.prototype.reposition = function (v, S, w, T) {
    var D, F, P;
    S && (D = this.stx.panels[this.panelName], e.D0I(), F = S.tick - w, P = S.value - T, S.action == "move" && (this.setPoint(0, S.p0[0] - F, S.p0[1] - P, D.chart), this.adjust(), this.render(v)));
  }, t.Drawing.freeform.prototype.click = function (v, S, w) {
    var T, D, F;
    if (T = this.stx.panels[this.panelName], e.G9v(), !!T) return this.penDown === !1 ? (D = "point", D += "e", D += "r", this.copyConfig(), this.startX = Math.round(this.stx.resolveX(this.stx.pixelFromTick(S, T.chart))), this.startY = Math.round(this.stx.resolveY(this.stx.pixelFromValueAdjusted(T, S, w))), F = this.stx.dateFromTick(S, T.chart, !0), this.d0 = t.yyyymmddhhmmssmmm(F), this.tzo0 = F.getTimezoneOffset(), this.v0 = w, this.p0 = [t.ChartEngine.crosshairX - this.startX, t.ChartEngine.crosshairY - this.startY], e.V4q(0), this.nodes = [this.p0[0], this.p0[e.G4A("1", 0)]], this.pNodes = [this.p0], this.candleWidth = this.stx.layout.candleWidth, this.multiplier = T.yAxis.multiplier, this.interval = this.stx.layout.interval, this.periodicity = this.stx.layout.periodicity, this.tempSplineTension = this.splineTension, this.splineTension = -1, document.body.style.cursor = D, this.penDown = !0, !1) : (this.penDown = !1, this.splineTension = this.tempSplineTension, document.body.style.cursor = "auto", !0);
  }, t.Drawing.freeform.prototype.move = function (v, S, w) {
    e.G9v();
    var T, D;
    if (this.penDown) return T = this.stx.panels[this.panelName], D = this.stx.dateFromTick(S, T.chart, !0), this.d1 = t.yyyymmddhhmmssmmm(D), this.tzo1 = D.getTimezoneOffset(), this.v1 = w, this.p1 = [t.ChartEngine.crosshairX - this.startX, T.yAxis.flipped ? this.startY - t.ChartEngine.crosshairY : t.ChartEngine.crosshairY - this.startY], this.pNodes.length > 2 && (this.p1[0] == this.pNodes[this.pNodes.length - 2][0] && this.p1[0] == this.pNodes[this.pNodes.length - 1][0] ? (this.pNodes.length--, this.nodes.length -= 2) : this.p1[1] == this.pNodes[this.pNodes.length - 2][1] && this.p1[1] == this.pNodes[this.pNodes.length - 1][1] && (this.pNodes.length--, this.nodes.length -= 2)), this.nodes.push(this.p1[0], this.p1[1]), this.pNodes.push(this.p1), this.render(v), !1;
  }, t.Drawing.freeform.prototype.intervalRatio = function (v, S, w, T, D, F) {
    var P, _, V, A, E, L;
    function N(H, z) {
      return t.Market.Symbology.isForexSymbol(z) ? (e.Z$5(38), e.o4e("1440", 0)) : 390;
    }
    if (P = 0, v == S) P = 1;else if (!isNaN(v) && !isNaN(S)) e.V4q(9), P = e.o4e(v, S);else if (isNaN(v)) {
      if (_ = "w", _ += "e", _ += "e", _ += "k", V = "mo", V += "nth", v == V) A = "we", A += "ek", S == A ? P = O() : S == "day" ? P = R() : isNaN(S) || (P = R() * N(D, F) / S);else if (v == _) {
        if (E = "m", E += "on", E += "th", S == E) {
          e.Z$5(2);
          var U = e.G4A(0, 1);
          P = U / O();
        }
        S == "day" ? P = B() : isNaN(S) || (P = B() * N(D, F) / S);
      } else v == "day" && (L = "w", L += "ee", L += "k", S == L ? P = 1 / B() : S == "month" ? P = 1 / R() : isNaN(S) || (P = N(D, F) / S));
    } else isNaN(v) || (S == "month" ? P = v / (R() * N(D, F)) : S == "week" ? P = v / (B() * N(D, F)) : S == "day" && (P = v / N(D, F)));
    function B(H, z) {
      return 5;
    }
    function O(H, z) {
      return 5;
    }
    e.V4q(9), P *= e.G4A(w, T);
    function R(H, z) {
      return e.D0I(), 30;
    }
    return P;
  }, t.Drawing.freeform.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N;
    if (S = this.stx.panels[this.panelName], !!S && (w = this.intervalRatio(this.interval, this.stx.layout.interval, this.periodicity, this.stx.layout.periodicity, this.d0, S.chart.symbol), w !== 0)) {
      T = this.stx.layout.candleWidth / this.candleWidth, D = S.yAxis.multiplier / this.multiplier, e.V4q(17), this.setPoint(e.o4e("0", 0), this.d0, this.v0, S.chart), F = this.stx.pixelFromTick(this.p0[0], S.chart), P = this.stx.pixelFromValueAdjusted(S, this.p0[0], this.p0[1]), _ = [], V = this.lineWidth, A = this.getLineColor(), E = {
        pattern: this.pattern,
        lineWidth: V
      };
      for (var U = 0; U < this.pNodes.length; U++) {
        L = w * T * this.pNodes[U][0] + F, e.Z$5(41);
        var B = e.o4e(6, 1, 4, 1);
        N = D * this.pNodes[U][B], S.yAxis.flipped ? (e.V4q(0), N = e.o4e(P, N)) : N += P, _.push(L, N);
      }
      _.length && (this.splineTension < 0 ? this.stx.connectTheDots(_, A, this.name, v, S, E) : this.stx.plotSpline(_, this.splineTension, A, this.name, v, !0, E));
    }
  }, t.Drawing.freeform.prototype.adjust = function () {
    var v, S, w, T, D, F, P, _;
    if (v = this.stx.panels[this.panelName], !!v) {
      S = [this.nodes[0], this.nodes[1]], this.pNodes = [S], this.lowX = this.nodes[0], this.hiX = this.nodes[0], this.lowY = this.nodes[1], this.hiY = this.nodes[1];
      for (var V = 2; V < this.nodes.length; V += 2) e.V4q(2), w = [this.nodes[V], this.nodes[e.o4e(V, 1)]], this.pNodes.push(w), this.lowX = Math.min(this.lowX, w[0]), this.hiX = Math.max(this.hiX, w[0]), this.lowY = Math.max(this.lowY, w[1]), this.hiY = Math.min(this.hiY, w[1]);
      T = this.intervalRatio(this.interval, this.stx.layout.interval, this.periodicity, this.stx.layout.periodicity, this.d0, v.chart.symbol), T !== 0 && (D = this.stx.layout.candleWidth / this.candleWidth, F = v.yAxis.multiplier / this.multiplier, this.setPoint(0, this.d0, this.v0, v.chart), P = this.stx.pixelFromTick(this.p0[0], v.chart), _ = this.stx.pixelFromValueAdjusted(v, this.p0[0], this.p0[1]), this.lowX = this.stx.tickFromPixel(Math.floor(T * D * this.lowX) + P, v.chart), this.hiX = this.stx.tickFromPixel(Math.ceil(T * D * this.hiX) + P, v.chart), v.yAxis.flipped ? (this.lowY = this.stx.valueFromPixel(_ - Math.floor(F * this.lowY), v), this.hiY = this.stx.valueFromPixel(_ - Math.ceil(F * this.hiY), v)) : (this.lowY = this.stx.valueFromPixel(Math.floor(F * this.lowY) + _, v), this.hiY = this.stx.valueFromPixel(Math.ceil(F * this.hiY) + _, v)));
    }
  }, t.Drawing.freeform.prototype.serialize = function () {
    return {
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      ptrn: this.pattern,
      lw: this.lineWidth,
      cw: Number(this.candleWidth.toFixed(4)),
      mlt: Number(this.multiplier.toFixed(4)),
      d0: this.d0,
      tzo0: this.tzo0,
      v0: this.v0,
      inter: this.interval,
      pd: this.periodicity,
      nodes: this.nodes
    };
  }, t.Drawing.freeform.prototype.reconstruct = function (v, S) {
    this.stx = v, this.color = S.col, this.panelName = S.pnl, this.pattern = S.ptrn, this.lineWidth = S.lw, this.candleWidth = S.cw, this.multiplier = S.mlt, this.d0 = S.d0, this.tzo0 = S.tzo0, this.v0 = S.v0, this.interval = S.inter, this.periodicity = S.pd, this.nodes = S.nodes, this.adjust();
  }, t.Drawing.callout = function () {
    this.name = "callout", this.arr = [], e.Z$5(40), this.w = e.G4A("0", 1), this.h = 0, this.padding = 4, this.text = "", this.ta = null, this.fontSize = 0, this.font = {}, this.stemEntry = "", this.defaultWidth = 50, this.defaultHeight = 10;
  }, t.inheritsFrom(t.Drawing.callout, t.Drawing.annotation), t.Drawing.callout.prototype.configs = ["color", "fillColor", "lineWidth", "pattern", "font"], t.Drawing.callout.prototype.copyConfig = function (v) {
    t.Drawing.copyConfig(this, v), this.borderColor = this.color;
  }, t.Drawing.callout.prototype.move = function (v, S, w) {
    this.penDown && (this.copyConfig(), this.p0 = [S, w], e.D0I(), this.render(v));
  }, t.Drawing.callout.prototype.onChange = function (v) {
    var S, w, T;
    S = this.stx.panels[this.panelName], e.G9v(), S && (w = v.target, this.w = w.clientWidth, this.h = w.clientHeight, T = this.context || this.stx.chart.tempCanvas.context, t.clearCanvas(T.canvas, this.stx), this.render(T), this.edit(T));
  }, t.Drawing.callout.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J;
    if (S = "st", S += "x_highligh", e.D0I(), S += "t_ve", S += "ctor", w = "a", w += "uto", this.context = v, T = this.stx.panels[this.panelName], !!T && (D = this.stx.pixelFromTick(this.p0[0], T.chart), F = this.stx.pixelFromValueAdjusted(T, this.p0[0], this.p0[1]), !isNaN(F))) {
      v.font = this.fontString, v.textBaseline = "top", P = D, _ = F, e.V4q(42);
      var ae = e.o4e(5, 2, 1, 9);
      V = this.w / ae, e.V4q(39);
      var se = e.G4A(5, 1, 7);
      if (A = this.h / ("2" | se), this.penDown && (V = this.defaultWidth, A = this.defaultHeight, A || (A = this.fontSize)), E = this.lineWidth, E || (E = +"1.1"), L = this.color, (L == "auto" || t.isTransparent(L)) && (L = this.stx.defaultColor), N = this.borderColor, (N == w || t.isTransparent(N)) && (N = this.stx.defaultColor), this.highlighted && (N = this.stx.getCanvasColor(S)), O = Math.min(Math.min(V, A) / 2, 8), this.stem && (this.stem.t ? (U = this.stx.pixelFromTick(this.stem.t), B = this.stx.pixelFromValueAdjusted(T, this.stem.t, this.stem.v)) : this.stem.x && (U = P, B = _, P += this.stem.x, _ += this.stem.y), R = "", U >= P + V ? (e.V4q(2), e.G4A(P, V), R = "r") : U > P - V && U < P + V ? R = "c" : U <= P - V && (e.Z$5(0), e.G4A(P, V), R = "l"), B >= _ + A ? (e.Z$5(2), e.G4A(_, A), R += "b") : B > _ - A && B < _ + A ? R += "m" : B <= _ - A && (e.Z$5(0), e.G4A(_, A), R += "t"), this.stemEntry = R, R != "cm" && (U = Math.round(U), B = Math.round(B))), this.highlighted ? this.stx.canvasColor("stx_annotation_highlight_bg", v) : this.fillColor ? (v.fillStyle = this.fillColor, v.globalAlpha = 0.4) : this.stem && (v.fillStyle = this.stx.containerColor), v.strokeStyle = N, v.setLineDash && (v.setLineDash(t.borderPatternToArray(E, this.pattern)), v.lineDashOffset = 0), N) {
        if (H = "l", H += "b", z = "c", z += "b", W = "r", W += "m", G = "r", G += "t", v.beginPath(), v.lineWidth = E, e.V4q(6), v.moveTo(e.G4A(V, P, O), e.G4A(_, A, e.Z$5(0))), this.stemEntry != G ? (e.V4q(2), v.quadraticCurveTo(e.G4A(P, V), e.G4A(_, A, e.Z$5(0)), e.o4e(P, V, e.Z$5(2)), e.o4e(_, A, O, e.V4q(3)))) : (v.lineTo(U, B), e.V4q(2), v.lineTo(e.G4A(P, V), e.o4e(_, A, O, e.Z$5(3)))), e.Z$5(2), v.lineTo(e.o4e(P, V), e.o4e(O, _, 2, e.V4q(43))), this.stemEntry == W && v.lineTo(U, B), e.V4q(2), v.lineTo(e.o4e(P, V), e.o4e(_, 2, O, e.V4q(44))), e.Z$5(2), v.lineTo(e.o4e(P, V), e.G4A(A, _, O, e.V4q(6))), this.stemEntry != "rb") e.V4q(2), v.quadraticCurveTo(e.G4A(P, V), e.o4e(_, A, e.Z$5(2)), e.G4A(V, P, O, e.Z$5(6)), e.o4e(_, A, e.V4q(2)));else {
          Z = 1994356795, X = 1351785284, e.Z$5(0), ie = e.G4A("2", 0);
          for (var ne = 1; e.J9C(ne.toString(), ne.toString().length, 48794) !== Z; ne++) v.lineTo(U, B), e.V4q(45), v.lineTo(e.G4A(O, P, V), e.o4e(_, A, e.V4q(40))), e.V4q(17), ie += e.o4e("2", 32);
          e.U4I(ie.toString(), ie.toString().length, 23999) !== X && (v.lineTo(U, B), e.Z$5(6), v.lineTo(e.G4A(V, P, O), e.o4e(_, A, e.Z$5(2))));
        }
        e.Z$5(44), v.lineTo(e.G4A(P, 2, O), e.G4A(_, A, e.Z$5(2))), this.stemEntry == z && v.lineTo(U, B), e.Z$5(43), v.lineTo(e.o4e(O, P, 2), e.o4e(_, A, e.V4q(2))), e.Z$5(3), v.lineTo(e.o4e(P, V, O), e.o4e(_, A, e.V4q(2))), this.stemEntry != H ? (e.V4q(0), v.quadraticCurveTo(e.G4A(P, V), e.o4e(_, A, e.V4q(2)), e.o4e(P, V, e.V4q(0)), e.G4A(A, _, O, e.Z$5(6)))) : (v.lineTo(U, B), e.Z$5(0), v.lineTo(e.G4A(P, V), e.o4e(A, _, O, e.V4q(6)))), e.Z$5(0), v.lineTo(e.G4A(P, V), e.o4e(_, 2, O, e.Z$5(44))), this.stemEntry == "lm" && v.lineTo(U, B), e.Z$5(0), v.lineTo(e.G4A(P, V), e.G4A(O, _, 2, e.V4q(43))), e.V4q(0), v.lineTo(e.G4A(P, V), e.G4A(_, A, O, e.Z$5(3))), this.stemEntry != "lt" ? (e.Z$5(0), v.quadraticCurveTo(e.G4A(P, V), e.o4e(_, A, e.V4q(0)), e.o4e(P, V, O, e.Z$5(3)), e.o4e(_, A, e.Z$5(0)))) : (v.lineTo(U, B), e.V4q(3), v.lineTo(e.o4e(P, V, O), e.o4e(_, A, e.Z$5(0)))), e.Z$5(43), v.lineTo(e.G4A(O, P, 2), e.o4e(_, A, e.V4q(0))), this.stemEntry == "ct" && v.lineTo(U, B), e.Z$5(44), v.lineTo(e.G4A(P, 2, O), e.G4A(_, A, e.Z$5(0))), e.V4q(6), v.lineTo(e.G4A(V, P, O), e.G4A(_, A, e.V4q(0))), v.fill(), v.globalAlpha = 1, this.pattern != "none" && v.stroke();
      }
      if (this.highlighted ? this.stx.canvasColor("stx_annotation_highlight", v) : v.fillStyle = L, _ += this.padding, !this.ta) for (var le = 0; le < this.arr.length; le++) v.fillText(this.arr[le], P - V + this.padding, _ - A), _ += this.fontSize;
      v.textBaseline = "alphabetic", this.highlighted && !this.noHandles && (j = "p", j += "0", J = this.highlighted == j, this.littleCircle(v, U, B, J));
    }
  }, t.Drawing.callout.prototype.click = function (v, S, w) {
    var T;
    if (!(this.stx.overXAxis || this.stx.overYAxis)) return T = this.stx.panels[this.panelName], this.copyConfig(), this.setPoint(0, S, w, T.chart), this.penDown ? (this.adjust(), e.G9v(), this.edit(v), this.penDown = !1, !1) : (this.stem = {
      d: this.d0,
      v: this.v0
    }, this.penDown = !0, this.adjust(), !1);
  }, t.Drawing.callout.prototype.reposition = function (v, S, w, T) {
    var D, F, P, _, V, A;
    if (S) {
      if (D = this.stx.panels[this.panelName], F = S.tick - w, P = S.value - T, S.stem) {
        if (S.action == "drag") {
          e.Z$5(17), _ = e.G4A("1733752645", 64), V = 1834312097, A = 2;
          for (var E = 1; e.U4I(E.toString(), E.toString().length, 43682) !== _; E++) this.stem = {
            d: this.stx.dateFromTick(w, D.chart, !1),
            v: T
          }, A += 2;
          e.U4I(A.toString(), A.toString().length, 76317) !== V && (this.stem = {
            d: this.stx.dateFromTick(w, D.chart, !0),
            v: T
          });
        } else S.action == "move" && (this.setPoint(0, S.p0[0] - F, S.p0[1] - P, D.chart), this.stem = {
          d: this.stx.dateFromTick(this.stx.tickFromDate(S.stem.d, D.chart) - F),
          v: S.stem.v - P
        });
        this.adjust();
      } else this.setPoint(0, S.p0[0] - F, S.p0[1] - P, D.chart);
      this.render(v);
    }
  }, t.Drawing.callout.prototype.lineIntersection = function (v, S, w, T) {
    var D, F, P, _, V, A, E, L, N, U, B, O, R;
    if (D = "s", D += "tr", D += "ing", F = this.stx.panels[this.panelName], P = this.stem, _ = this.p0, V = this.stx, !_ || !P || !F) return !1;
    if (A = P.t || this.stx.tickFromDate(P.d, F.chart), E = {
      x0: _[0],
      x1: A,
      y0: _[1],
      y1: P.v
    }, L = t.convertBoxToPixels(V, this.panelName, E), N = L.x0, e.D0I(), U = L.y0, B = L.x1, O = L.y1, typeof this.stemEntry == D) {
      if (this.stemEntry.indexOf("l") > -1) {
        e.V4q(6);
        var H = e.G4A(16, 1, 15);
        N -= this.w / H;
      } else if (this.stemEntry.indexOf("r") > -1) {
        e.Z$5(0);
        var z = e.G4A(9, 7);
        N += this.w / z;
      }
      if (this.stemEntry.indexOf("t") > -1) {
        e.Z$5(46);
        var W = e.o4e(63, 2, 46, 48);
        U -= this.h / ("2" << W);
      } else if (this.stemEntry.indexOf("b") > -1) {
        e.Z$5(47);
        var G = e.o4e(100, 5, 8, 18);
        U += this.h / G;
      }
    }
    return R = t.convertBoxToPixels(V, this.panelName, w), t.boxIntersects(R.x0, R.y0, R.x1, R.y1, N, U, B, O, T);
  }, t.Drawing.callout.prototype.intersected = function (v, S, w) {
    var T, D, F, P, _, V, A, E;
    if (T = this.stx.panels[this.panelName], !this.p0) return null;
    if (this.pointIntersection(this.stem.t, this.stem.v, w)) return this.highlighted = "p0", {
      action: "drag",
      stem: !0
    };
    e.Z$5(6);
    var L = e.G4A(4, 0, 2);
    D = this.stx.pixelFromTick(this.p0[0], T.chart) - this.w / L, e.V4q(0);
    var N = e.o4e(12, 11);
    e.Z$5(46);
    var U = e.o4e(1, 15, 23, 38);
    return F = this.stx.pixelFromValueAdjusted(T, this.p0[0], this.p0[N]) - this.h / U, P = D + this.w, _ = F + this.h, this.stem && this.stem.x && (D += this.stem.x, P += this.stem.x, F += this.stem.y, _ += this.stem.y), V = this.stx.pixelFromTick(v, T.chart), A = this.stx.pixelFromValueAdjusted(T, v, S), V + w.r >= D && V - w.r <= P && A + w.r >= F && A - w.r <= _ ? (this.highlighted = !0, {
      p0: t.clone(this.p0),
      tick: v,
      value: S
    }) : (E = this.lineIntersection(v, S, w, "segment"), e.G9v(), E ? (this.highlighted = !0, {
      action: "move",
      stem: t.clone(this.stem),
      p0: t.clone(this.p0),
      tick: v,
      value: S
    }) : null);
  }, t.Drawing.fibonacci = function () {
    e.D0I(), this.name = "fibonacci", this.configurator = "fibonacci";
  }, t.inheritsFrom(t.Drawing.fibonacci, t.Drawing.BaseTwoPoint), t.Drawing.fibonacci.mapping = {
    trend: "t",
    color: "c",
    parameters: "p",
    pattern: "pt",
    opacity: "o",
    lineWidth: p,
    level: "l",
    extendLeft: "e",
    printLevels: "pl",
    printValues: "pv",
    timezone: g,
    display: "d"
  }, e.V4q(40), t.Drawing.fibonacci.prototype.recommendedLevels = [-0.618, -0.382, 0, 0.382, e.G4A("0.5", 1), 0.618, 1, 1.382, 1.618], t.Drawing.fibonacci.prototype.configs = ["color", "fillColor", "lineWidth", f, "parameters"], t.Drawing.fibonacci.prototype.initializeSettings = function (v) {
    var S, w;
    if (S = this.recommendedLevels, S && !v.currentVectorParameters.fibonacci.fibsAlreadySet) {
      w = v.currentVectorParameters.fibonacci.fibs;
      for (var T = 0; T < w.length; T++) {
        delete w[T].display;
        for (var D = 0; D < S.length; D++) w[T].level == S[D] && (w[T].display = !0);
      }
    }
  }, t.Drawing.fibonacci.prototype.setOuter = function () {
    var v, S, w, T, D, F, P, _, V, A, E, L, N, U;
    if (v = this.stx, S = v.panels[this.panelName], !!S) {
      w = Math.max(this.p0[1], this.p1[1]), T = Math.min(this.p0[1], this.p1[1]), e.Z$5(0), D = e.o4e(w, T), this.outer = {
        p0: t.clone(this.p0),
        p1: t.clone(this.p1)
      }, F = v.pixelFromValueAdjusted(S, this.p0[0], this.p0[1]), P = v.pixelFromValueAdjusted(S, this.p1[0], this.p1[1]), _ = v.pixelFromTick(this.p0[0], S.chart), V = v.pixelFromTick(this.p1[0], S.chart), A = 0, E = 1;
      for (var B = 0; B < this.parameters.fibs.length; B++) L = this.parameters.fibs[B], !(L.level >= A && L.level <= E || !L.display) && (N = v.pixelFromValueAdjusted(S, this.p0[0], P < F ? w - D * L.level : T + D * L.level), U = t.xIntersection({
        x0: _,
        x1: V,
        y0: F,
        y1: P
      }, N), L.level < A ? (A = L.level, this.outer.p1[1] = v.valueFromPixel(N, S), this.outer.p1[0] = v.tickFromPixel(U, S.chart)) : L.level > E && (E = L.level, this.outer.p0[1] = v.valueFromPixel(N, S), e.V4q(17), this.outer.p0[e.o4e("0", 64)] = v.tickFromPixel(U, S.chart)));
    }
  }, t.Drawing.fibonacci.prototype.click = function (v, S, w) {
    var T;
    if (T = this.stx.panels[this.panelName], !!T) return this.copyConfig(), this.penDown ? this.accidentalClick(S, w) ? this.dragToDraw : (this.setPoint(1, S, w, T.chart), this.setOuter(), this.parameters = t.clone(this.parameters), this.penDown = !1, !0) : (this.setPoint(0, S, w, T.chart), this.penDown = !0, !1);
  }, t.Drawing.fibonacci.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce, Q, ee, re, de, he, fe, pe;
    if (S = "so", S += "l", S += "i", S += "d", w = this.stx.panels[this.panelName], !!w && (T = w.yAxis, !!this.p1)) {
      D = Math.max(this.p0[1], this.p1[1]), F = Math.min(this.p0[1], this.p1[1]), P = T.flipped ? F - D : D - F, _ = this.stx.pixelFromTick(this.p0[0], w.chart), V = this.stx.pixelFromTick(this.p1[0], w.chart), A = this.stx.pixelFromValueAdjusted(w, this.p0[0], this.p0[1]), E = this.stx.pixelFromValueAdjusted(w, this.p1[0], this.p1[1]), L = Math.min(E, A), N = Math.max(E, A), e.Z$5(0), U = e.o4e(N, L), e.Z$5(48), B = e.o4e(_, 0, A, V, E), O = {
        color: "auto",
        parameters: {
          pattern: S,
          opacity: 0.25,
          lineWidth: 1
        }
      }, this.parameters.trend || (this.parameters.trend = O), R = this.getLineColor(this.parameters.trend.color), v.textBaseline = "middle", this.stx.canvasFont("stx_yaxis", v), e.Z$5(2);
      var ge = e.o4e(1, 9);
      H = v.measureText("161.8%").width + ge, z = Number.MAX_VALUE, W = Number.MAX_VALUE, e.Z$5(29);
      var ve = e.G4A(5, 18, 14);
      G = Number.MAX_VALUE * ve, e.Z$5(49);
      var be = e.o4e(15, 5, 9);
      Z = Number.MAX_VALUE * be, X = this.color, (X == "auto" || t.isTransparent(X)) && (X = this.stx.defaultColor), this.rays = [];
      for (var _e = 0; _e < this.parameters.fibs.length; _e++) if (ie = "l", ie += "e", ie += "f", ie += "t", v.textAlign = ie, v.fillStyle = X, j = this.parameters.fibs[_e], !!j.display) {
        if (J = this.stx.pixelFromValueAdjusted(w, this.p0[0], E < A ? D - P * j.level : F + P * j.level), ae = t.xIntersection({
          x0: _,
          x1: V,
          y0: A,
          y1: E
        }, J), se = this.parameters.extendLeft ? 0 : ae, ne = w.left + w.width, this.parameters.printLevels) {
          e.Z$5(50);
          var ye = e.G4A(13078, 999, 1006, 13);
          e.Z$5(11);
          var we = e.o4e(19, 13, 36, 14);
          e.V4q(51), e.o4e(95880, 18, 6, 10349400), e.V4q(6);
          var Te = e.o4e(19, 967, 15);
          e.V4q(52);
          var Pe = e.G4A(214, 111, 888);
          e.V4q(53), e.G4A(8, 3, 33600, 122400, 8), e.V4q(2);
          var Le = e.o4e(765, 8419);
          le = Math.round(j.level * ye) / we + (132.98 <= Te ? "%" : Pe > Le ? !1 : "U"), ne -= H, this.parameters.printValues && (ue = "stx_ya", ue += "x", ue += "i", ue += "s", v.fillStyle = X, this.stx.canvasFont(ue, v)), ne < se && (v.textAlign = "right"), v.fillText(le, ne, J), ne < se ? ne += 5 : ne -= 5;
        }
        this.parameters.printValues && ae < w.width && (oe = this.stx.transformedPriceFromPixel(J, w), T.priceFormatter ? oe = T.priceFormatter(this.stx, w, oe) : oe = this.stx.formatYAxisPrice(oe, w), v == this.stx.chart.context && this.stx.endClip(), this.stx.createYAxisLabel(w, oe, J, X, null, v), v == this.stx.chart.context && this.stx.startClip(w.name)), ce = j.color, (ce == "auto" || t.isTransparent(ce)) && (ce = this.color), (ce == "auto" || t.isTransparent(ce)) && (ce = this.stx.defaultColor), Q = j.color, (Q == "auto" || t.isTransparent(Q)) && (Q = this.fillColor), (Q == "auto" || t.isTransparent(Q)) && (Q = this.stx.defaultColor), v.fillStyle = Q, ee = t.clone(j.parameters), this.highlighted && (ee.opacity = 1), this.stx.plotLine(se, ne, J, J, this.highlighted ? R : ce, "segment", v, w, ee), this.rays.push([[se, J], [ne, J]]), v.globalAlpha = 0.05, v.beginPath(), v.moveTo(ne, J), v.lineTo(se, J), se ? v.lineTo(V, E) : v.lineTo(se, E), v.lineTo(ne, E), typeof Q < "u" && v.fill(), v.globalAlpha = 1, J < W && (z = ae, W = J), J > Z && (G = ae, Z = J);
      }
      for (var Be = 0; Be <= 1; Be++) re = B ? N - U * Be : L + U * Be, re = Math.round(re), re < W && (z = t.xIntersection({
        x0: _,
        x1: V,
        y0: A,
        y1: E
      }, re), W = re), re > Z && (G = t.xIntersection({
        x0: _,
        x1: V,
        y0: A,
        y1: E
      }, re), Z = re);
      de = t.clone(this.parameters.trend.parameters), this.highlighted && (de.opacity = 1), this.stx.plotLine(z, G, W, Z, R, "segment", v, w, de), this.highlighted && (he = "p", he += "1", fe = this.highlighted == "p0", pe = this.highlighted == he, this.littleCircle(v, _, A, fe), this.littleCircle(v, V, E, pe));
    }
  }, t.Drawing.fibonacci.prototype.reposition = function (v, S, w, T) {
    S && (t.Drawing.BaseTwoPoint.prototype.reposition.apply(this, arguments), this.adjust());
  }, t.Drawing.fibonacci.prototype.intersected = function (v, S, w) {
    var T, D, F, P, _, V, A;
    if (T = this.p0, D = this.p1, !T || !D) return null;
    F = {
      0: T,
      1: D
    };
    for (var E in F) if (this.pointIntersection(F[E][0], F[E][1], w)) return P = "dr", P += "a", P += "g", e.V4q(2), this.highlighted = e.G4A("p", E), {
      action: P,
      point: "p" + E
    };
    if (_ = this.outer, V = this.rays, A = _ && this.lineIntersection(v, S, w, "segment", _.p0, _.p1), !A) {
      for (var L = 0; L < V.length; L++) if (this.lineIntersection(v, S, w, "ray", V[L][0], V[L][1], !0)) {
        A = !0;
        break;
      }
    }
    return A ? (this.highlighted = !0, {
      action: "move",
      p0: t.clone(T),
      p1: t.clone(D),
      tick: v,
      value: S
    }) : null;
  }, t.Drawing.fibonacci.prototype.reconstruct = function (v, S) {
    S = t.replaceFields(S, t.reverseObject(t.Drawing.fibonacci.mapping)), this.stx = v, this.parameters = S.parameters, this.parameters || (this.parameters = t.clone(this.stx.currentVectorParameters.fibonacci)), this.color = S.col, this.fillColor = S.fc, this.panelName = S.pnl, e.G9v(), this.d0 = S.d0, this.d1 = S.d1, this.d2 = S.d2, this.tzo0 = S.tzo0, this.tzo1 = S.tzo1, this.tzo2 = S.tzo2, this.v0 = S.v0, this.v1 = S.v1, this.v2 = S.v2, this.adjust();
  }, t.Drawing.fibonacci.prototype.adjust = function () {
    var v;
    v = this.stx.panels[this.panelName], v && (this.setPoint(0, this.d0, this.v0, v.chart), e.G9v(), this.setPoint(1, this.d1, this.v1, v.chart), this.setOuter());
  }, t.Drawing.fibonacci.prototype.serialize = function () {
    e.G9v();
    var v;
    return v = {
      name: this.name,
      parameters: this.parameters,
      pnl: this.panelName,
      col: this.color,
      fc: this.fillColor,
      d0: this.d0,
      d1: this.d1,
      d2: this.d2,
      tzo0: this.tzo0,
      tzo1: this.tzo1,
      tzo2: this.tzo2,
      v0: this.v0,
      v1: this.v1,
      v2: this.v2
    }, t.replaceFields(v, t.Drawing.fibonacci.mapping);
  }, t.Drawing.retracement = function () {
    this.name = "retracement";
  }, t.inheritsFrom(t.Drawing.retracement, t.Drawing.fibonacci), t.Drawing.fibprojection = function () {
    e.D0I(), this.name = "fibprojection", this.dragToDraw = !1, this.p2 = null;
  }, t.inheritsFrom(t.Drawing.fibprojection, t.Drawing.fibonacci), t.Drawing.fibprojection.prototype.recommendedLevels = [0, 0.618, 1, 1.272, +"1.618", 2.618, 4.236], t.Drawing.fibprojection.prototype.click = function (v, S, w) {
    var T;
    if (T = this.stx.panels[this.panelName], e.D0I(), !!T) return this.copyConfig(), this.penDown ? this.accidentalClick(S, w) ? (this.stx.undo(), !0) : this.p2 !== null ? (this.setPoint(2, this.p2[0], this.p2[1], T.chart), this.parameters = t.clone(this.parameters), !0) : (this.setPoint(1, S, w, T.chart), this.p2 = [this.p1[0], this.p1[1]], !1) : (this.setPoint(0, S, w, T.chart), this.penDown = !0, !1);
  }, t.Drawing.fibprojection.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce, Q;
    if (S = "seg", S += "ment", w = "m", w += "id", w += "dl", w += "e", T = "so", T += "lid", D = this.stx.panels[this.panelName], !!D && (F = D.yAxis, !!this.p1)) {
      e.Z$5(54);
      var ee = e.o4e(17, 30, 12);
      e.V4q(55);
      var re = e.G4A(9, 2, 5, 5, 39);
      P = this.p1[ee] - this.p0[re], _ = this.stx.pixelFromTick(this.p0[0], D.chart), V = this.stx.pixelFromTick(this.p1[0], D.chart), A = this.stx.pixelFromValueAdjusted(D, this.p0[0], this.p0[1]), E = this.stx.pixelFromValueAdjusted(D, this.p1[0], this.p1[1]), L = null, N = null, this.p2 && (L = this.stx.pixelFromTick(this.p2[0], D.chart), N = this.stx.pixelFromValueAdjusted(D, this.p2[0], this.p2[1])), U = {
        color: "auto",
        parameters: {
          pattern: T,
          opacity: 0.25,
          lineWidth: 1
        }
      }, this.parameters.trend || (this.parameters.trend = U), B = this.getLineColor(this.parameters.trend.color), v.textBaseline = w, this.stx.canvasFont("stx_yaxis", v), e.V4q(54);
      var de = e.o4e(9, 21, 2);
      if (O = v.measureText("161.8%").width + de, R = this.color, (R == "auto" || t.isTransparent(R)) && (R = this.stx.defaultColor), this.p2) {
        this.rays = [];
        for (var he = 0; he < this.parameters.fibs.length; he++) if (H = "und", H += "e", H += "fine", H += "d", z = "a", z += "u", z += "to", W = "l", W += "e", W += "f", W += "t", v.textAlign = W, v.fillStyle = R, G = this.parameters.fibs[he], !!G.display) {
          if (Z = this.stx.pixelFromValueAdjusted(D, this.p2[0], this.p2[1] + P * G.level), X = t.xIntersection({
            x0: _,
            x1: V,
            y0: A,
            y1: E
          }, Z), ie = this.parameters.extendLeft ? 0 : _, j = D.left + D.width, this.parameters.printLevels) {
            e.V4q(56);
            var fe = e.G4A(17987, 19000, 16, 3, 1);
            e.Z$5(32);
            var pe = e.G4A(2, 15, 40);
            e.Z$5(29), e.o4e(0, 9517, 3), e.V4q(0);
            var ge = e.G4A(5980, 15);
            e.Z$5(57);
            var ve = e.G4A(2060650, 10, 1, 20, 103320);
            e.Z$5(0);
            var be = e.G4A(3295, 5);
            J = Math.round(G.level * fe) / pe + (429.5 >= ge ? ve : +"208.81" < be ? "%" : "S"), j -= O, this.parameters.printValues && (v.fillStyle = R, this.stx.canvasFont("stx_yaxis", v)), j < ie && (v.textAlign = "right"), v.fillText(J, j, Z), j < ie ? j += 5 : j -= 5;
          }
          this.parameters.printValues && X < D.width && (ae = this.stx.transformedPriceFromPixel(Z, D), F.priceFormatter ? ae = F.priceFormatter(this.stx, D, ae) : ae = this.stx.formatYAxisPrice(ae, D), v == this.stx.chart.context && this.stx.endClip(), this.stx.createYAxisLabel(D, ae, Z, R, null, v), v == this.stx.chart.context && this.stx.startClip(D.name)), se = G.color, (se == z || t.isTransparent(se)) && (se = this.color), (se == "auto" || t.isTransparent(se)) && (se = this.stx.defaultColor), ne = G.color, (ne == "auto" || t.isTransparent(ne)) && (ne = this.fillColor), (ne == "auto" || t.isTransparent(ne)) && (ne = this.stx.defaultColor), v.fillStyle = ne, le = t.clone(G.parameters), this.highlighted && (le.opacity = 1), this.stx.plotLine(ie, j, Z, Z, this.highlighted ? B : se, "segment", v, D, le), this.rays.push([[ie, Z], [j, Z]]), e.Z$5(40), v.globalAlpha = e.G4A("0.05", 1), v.beginPath(), v.moveTo(j, Z), v.lineTo(ie, Z), ie ? v.lineTo(_, N) : v.lineTo(ie, N), v.lineTo(j, N), typeof ne != H && v.fill(), v.globalAlpha = 1;
        }
      }
      ue = t.clone(this.parameters.trend.parameters), this.highlighted && (ue.opacity = 1), this.stx.plotLine(_, V, A, E, B, S, v, D, ue), this.p2 && this.stx.plotLine(V, L, E, N, B, "segment", v, D, ue), e.G9v(), this.highlighted && (oe = this.highlighted == "p0", ce = this.highlighted == "p1", Q = this.highlighted == "p2", this.littleCircle(v, _, A, oe), this.littleCircle(v, V, E, ce), this.littleCircle(v, L, N, Q));
    }
  }, t.Drawing.fibprojection.prototype.move = function (v, S, w) {
    this.penDown && (this.copyConfig(), this.p2 === null ? this.p1 = [S, w] : this.p2 = [S, w], this.render(v));
  }, t.Drawing.fibprojection.prototype.reposition = function (v, S, w, T) {
    var D, F, P;
    S && (D = this.stx.panels[this.panelName], F = S.tick - w, P = S.value - T, S.action == "move" ? (this.setPoint(0, S.p0[0] - F, S.p0[1] - P, D.chart), this.setPoint(1, S.p1[0] - F, S.p1[1] - P, D.chart), this.setPoint(2, S.p2[0] - F, S.p2[1] - P, D.chart), this.render(v)) : S.action == "drag" && (this[S.point] = [w, T], e.Z$5(38), this.setPoint(e.G4A("0", 64), this.p0[0], this.p0[1], D.chart), this.setPoint(1, this.p1[0], this.p1[1], D.chart), this.setPoint(2, this.p2[0], this.p2[1], D.chart), this.render(v)));
  }, t.Drawing.fibprojection.prototype.intersected = function (v, S, w) {
    var T, D, F, P, _, V, A, E;
    if (T = this.p0, D = this.p1, F = this.p2, !T || !D || !F) return null;
    P = {
      0: T,
      1: D,
      2: F
    };
    for (var L in P) if (this.pointIntersection(P[L][0], P[L][1], w)) return e.V4q(2), this.highlighted = e.o4e("p", L), {
      action: "drag",
      point: "p" + L
    };
    if (_ = this.rays, V = this.lineIntersection(v, S, w, "segment", T, D) || this.lineIntersection(v, S, w, "segment", D, F), e.G9v(), !V) {
      for (var N = 0; N < _.length; N++) if (A = "r", A += "a", A += "y", this.lineIntersection(v, S, w, A, _[N][0], _[N][1], !0)) {
        V = !0;
        break;
      }
    }
    return V ? (E = "m", E += "o", E += "v", E += "e", this.highlighted = !0, {
      action: E,
      p0: t.clone(T),
      p1: t.clone(D),
      p2: t.clone(F),
      tick: v,
      value: S
    }) : null;
  }, t.Drawing.fibprojection.prototype.adjust = function () {
    var v;
    v = this.stx.panels[this.panelName], v && (this.setPoint(0, this.d0, this.v0, v.chart), this.setPoint(1, this.d1, this.v1, v.chart), this.setPoint(2, this.d2, this.v2, v.chart));
  }, t.Drawing.fibarc = function () {
    e.G9v(), this.name = "fibarc";
  }, t.inheritsFrom(t.Drawing.fibarc, t.Drawing.fibonacci), t.Drawing.fibarc.prototype.recommendedLevels = [0.382, 0.5, 0.618, 1], t.Drawing.fibarc.prototype.setOuter = function () {
    var v, S, w, T, D, F, P;
    v = this.stx.panels[this.panelName], v && (this.outer = {
      p0: t.clone(this.p0),
      p1: t.clone(this.p1)
    }, S = this.stx.pixelFromValueAdjusted(v, this.p0[0], this.p0[1]), w = this.stx.pixelFromValueAdjusted(v, this.p1[0], this.p1[1]), T = this.stx.pixelFromTick(this.p0[0], v.chart), D = this.stx.pixelFromTick(this.p1[0], v.chart), e.Z$5(28), F = e.o4e(S, 2, w), P = t.xIntersection({
      x0: T,
      x1: D,
      y0: S,
      y1: w
    }, F), this.outer.p0[1] = this.stx.valueFromPixel(F, v), this.outer.p0[0] = this.stx.tickFromPixel(P, v.chart));
  }, t.Drawing.fibarc.prototype.intersected = function (v, S, w) {
    var T, D, F, P, _, V, A, E, L, N;
    if (T = this.stx.panels[this.panelName], !!T) {
      if (D = this.p0, F = this.p1, P = this.outer, !D || !F) return null;
      _ = {
        0: D,
        1: F
      };
      for (var U in _) if (this.pointIntersection(_[U][0], _[U][1], w)) return e.Z$5(2), this.highlighted = e.G4A("p", U), {
        action: "drag",
        point: "p" + U
      };
      return this.lineIntersection(v, S, w, "segment", P.p0, P.p1) ? (this.highlighted = !0, {
        action: "move",
        p0: t.clone(D),
        p1: t.clone(F),
        tick: v,
        value: S
      }) : (V = {
        x0: D[0],
        x1: F[0],
        y0: D[1],
        y1: F[1]
      }, A = t.convertBoxToPixels(this.stx, this.panelName, V), E = {
        x: Math.abs(Math.sqrt(2) * (A.x1 - A.x0)),
        y: Math.abs(Math.sqrt(2) * (A.y1 - A.y0))
      }, L = this.stx.pixelFromTick(v, T.chart), N = this.stx.pixelFromValueAdjusted(T, v, S), L + w.r < A.x1 - E.x || L - w.r > A.x1 + E.x || N + w.r < A.y1 - E.y || N - w.r > A.y1 + E.y || A.y0 < A.y1 && N - w.r > A.y1 || A.y0 > A.y1 && N + w.r < A.y1 ? null : (this.highlighted = !0, {
        action: "move",
        p0: t.clone(this.p0),
        p1: t.clone(this.p1),
        tick: v,
        value: S
      }));
    }
  }, t.Drawing.fibarc.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne;
    if (S = "le", S += "f", S += "t", w = "a", w += "uto", T = "st", T += "x_y", T += "ax", T += "is", D = this.stx.panels[this.panelName], !!D && (F = D.yAxis, !!this.p1)) {
      P = this.stx.pixelFromTick(this.p0[0], D.chart), _ = this.stx.pixelFromTick(this.p1[0], D.chart), V = this.stx.pixelFromValueAdjusted(D, this.p0[0], this.p0[1]), A = this.stx.pixelFromValueAdjusted(D, this.p1[0], this.p1[1]), e.V4q(58), E = e.o4e(V, A), e.Z$5(59), L = Math.abs(e.o4e(V, A, _, P)), N = this.getLineColor(this.parameters.trend.color), v.textBaseline = "middle", this.stx.canvasFont(T, v), U = this.color, (U == w || t.isTransparent(U)) && (U = this.stx.defaultColor);
      for (var le = 0; le < this.parameters.fibs.length; le++) if (B = "n", B += "on", B += "e", O = "au", O += "to", v.fillStyle = U, R = this.parameters.fibs[le], !(R.level < 0 || !R.display)) {
        e.V4q(26);
        var ue = e.o4e(14, 2, 239, 15);
        e.V4q(29);
        var oe = e.G4A(0, 3, 2);
        e.Z$5(60);
        var ce = e.G4A(13, 1, 1, 14);
        H = Math.abs(this.p1[ue] - this.p0[oe]) * Math.sqrt(ce) * R.level, e.V4q(47);
        var Q = e.o4e(57, 7, 16, 6);
        e.V4q(0);
        var ee = e.G4A(21, 20);
        e.V4q(61);
        var re = e.o4e(0, 10, 17, 17, 10);
        e.V4q(62);
        var de = e.o4e(0, 10, 5, 4);
        if (z = this.p1[1] + H * (E ? Q : ee) * (F.flipped ? re : de), W = this.stx.pixelFromValueAdjusted(D, this.p0[0], z), G = t.xIntersection({
          x0: P,
          x1: _,
          y0: V,
          y1: A
        }, W), this.parameters.printLevels) {
          Z = "cen", Z += "t", Z += "e", Z += "r", v.textAlign = Z, e.Z$5(28);
          var he = e.o4e(9, 8000, 71000);
          e.V4q(28), e.G4A(13, 59410, 767760), e.V4q(2);
          var fe = e.o4e(4617, 13);
          e.V4q(51);
          var pe = e.o4e(3980, 4, 5, 75610);
          e.V4q(50);
          var ge = e.o4e(14874, 9932, 9916, 3);
          e.Z$5(63);
          var ve = e.o4e(8, 3, 715, 3432);
          e.Z$5(3);
          var be = e.o4e(784, 15, 5499);
          X = Math.round(R.level * he) / 10 + (fe >= pe ? "%" : ge <= ve ? be : 5146), this.parameters.printValues && (v.fillStyle = U, this.stx.canvasFont("stx_yaxis", v)), v.fillText(X, _, Math.round(W - 5));
        }
        v.textAlign = "left", this.parameters.printValues && G < D.width && (ie = z, F.priceFormatter ? ie = F.priceFormatter(this.stx, D, ie) : ie = this.stx.formatYAxisPrice(ie, D), v == this.stx.chart.context && this.stx.endClip(), this.stx.createYAxisLabel(D, ie, W, U, null, v), v == this.stx.chart.context && this.stx.startClip(D.name)), j = R.color, (j == "auto" || t.isTransparent(j)) && (j = this.color), (j == "auto" || t.isTransparent(j)) && (j = this.stx.defaultColor), v.strokeStyle = this.highlight ? N : j, J = R.color, (J == "auto" || t.isTransparent(J)) && (J = this.fillColor), (J == O || t.isTransparent(J)) && (J = this.stx.defaultColor), v.fillStyle = J, v.globalAlpha = this.highlighted ? 1 : R.parameters.opacity, v.lineWidth = R.parameters.lineWidth, v.setLineDash && (v.setLineDash(t.borderPatternToArray(v.lineWidth, R.parameters.pattern)), v.lineDashOffset = 0), v.save(), v.beginPath(), e.Z$5(9), v.scale(e.o4e(1, L), 1), e.Z$5(40), v.arc(e.G4A(_, L), A, Math.abs(W - A), 0, Math.PI, !E), this.pattern != B && v.stroke(), v.globalAlpha = 0.05, v.fill(), v.restore(), v.setLineDash && v.setLineDash([]), v.globalAlpha = 1;
      }
      e.G9v(), v.textAlign = S, ae = t.clone(this.parameters.trend.parameters), this.highlighted && (ae.opacity = 1), e.Z$5(28), this.stx.plotLine(_, e.o4e(P, 2, _), A, e.o4e(V, 2, A), N, "segment", v, D, ae), this.highlighted && (se = this.highlighted == "p0", ne = this.highlighted == "p1", this.littleCircle(v, P, V, se), this.littleCircle(v, _, A, ne));
    }
  }, t.Drawing.fibfan = function () {
    e.D0I(), this.name = "fibfan";
  }, t.inheritsFrom(t.Drawing.fibfan, t.Drawing.fibonacci), t.Drawing.fibfan.prototype.recommendedLevels = [0, 0.382, 0.5, 0.618, 1], t.Drawing.fibfan.prototype.setOuter = function () {}, t.Drawing.fibfan.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne;
    if (S = "stx_ya", S += "xi", S += "s", w = "m", w += "i", w += "dd", w += "le", T = this.stx.panels[this.panelName], !!T && (D = T.yAxis, !!this.p1)) {
      F = this.stx.pixelFromTick(this.p0[0], T.chart), P = this.stx.pixelFromTick(this.p1[0], T.chart), _ = this.stx.pixelFromValueAdjusted(T, this.p0[0], this.p0[1]), V = this.stx.pixelFromValueAdjusted(T, this.p1[0], this.p1[1]), A = Math.min(V, _), E = Math.max(V, _), e.Z$5(0), e.o4e(E, A), e.Z$5(64), e.G4A("0", _, F, V, P), L = this.getLineColor(this.parameters.trend.color), v.textBaseline = w, this.stx.canvasFont(S, v), e.Z$5(65);
      var le = e.G4A(30, 6, 1, 150);
      N = v.measureText("161.8%").width + le, e.Z$5(66), e.G4A(5, 2, 7, 9), U = this.color, (U == "auto" || t.isTransparent(U)) && (U = this.stx.defaultColor), this.rays = [];
      for (var ue = 0; ue < this.parameters.fibs.length; ue++) if (B = "s", B += "e", B += "gment", O = "a", O += "u", O += "t", O += "o", R = "a", R += "u", R += "t", R += "o", v.fillStyle = U, H = this.parameters.fibs[ue], !!H.display && (z = this.stx.pixelFromValueAdjusted(T, this.p0[0], (this.p0[1] - this.p1[1]) * H.level + this.p1[1]), W = t.xIntersection({
        x0: P,
        x1: P,
        y0: _,
        y1: V
      }, z), G = T.left, P > F && (G += T.width), e.V4q(67), Z = e.o4e(G, z, _, F, F, _, W), !(F > G - (this.parameters.printLevels ? N + 5 : 0) && P > F) && !(F < G + (this.parameters.printLevels ? N + 5 : 0) && P < F))) {
        if (this.parameters.printLevels) {
          e.V4q(68);
          var oe = e.o4e(10, 20, 99000, 6, 3000);
          e.Z$5(26);
          var ce = e.G4A(7, 9565, 9564, 2);
          X = Math.round(H.level * oe) / 10 + (ce >= 2701 ? "%" : "B"), P > F ? (G -= N, v.textAlign = "left") : (G += N, v.textAlign = "right"), this.parameters.printValues && (v.fillStyle = U, this.stx.canvasFont("stx_yaxis", v)), e.Z$5(67), Z = e.o4e(G, z, _, F, F, _, W), v.fillText(X, G, Z), P > F ? G -= 5 : G += 5;
        }
        v.textAlign = "left", this.parameters.printValues && W < T.width && (ie = this.stx.transformedPriceFromPixel(z, T), D.priceFormatter ? ie = D.priceFormatter(this.stx, T, ie) : ie = this.stx.formatYAxisPrice(ie, T), v == this.stx.chart.context && this.stx.endClip(), this.stx.createYAxisLabel(T, ie, z, U, null, v), v == this.stx.chart.context && this.stx.startClip(T.name)), j = H.color, (j == R || t.isTransparent(j)) && (j = this.color), (j == "auto" || t.isTransparent(j)) && (j = this.stx.defaultColor), J = H.color, (J == "auto" || t.isTransparent(J)) && (J = this.fillColor), (J == O || t.isTransparent(J)) && (J = this.stx.defaultColor), v.fillStyle = J, this.parameters.printLevels && (e.V4q(67), Z = e.o4e(G, z, _, F, F, _, W)), ae = t.clone(H.parameters), this.highlighted && (ae.opacity = 1), this.stx.plotLine(F, G, _, Z, this.highlighted ? L : j, B, v, T, ae), this.rays.push([[F, _], [G, Z]]), v.globalAlpha = 0.05, v.beginPath(), v.moveTo(G, Z), v.lineTo(F, _), v.lineTo(G, _), v.fill(), v.globalAlpha = 1;
      }
      this.highlighted && (se = this.highlighted == "p0", ne = this.highlighted == "p1", this.littleCircle(v, F, _, se), this.littleCircle(v, P, V, ne));
    }
  }, t.Drawing.fibtimezone = function () {
    var v;
    v = "f", e.D0I(), v += "ibti", v += "mezone", this.name = v;
  }, t.inheritsFrom(t.Drawing.fibtimezone, t.Drawing.fibonacci), t.Drawing.fibtimezone.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J;
    if (S = "s", S += "egment", w = "c", w += "enter", T = "a", T += "ut", e.G9v(), T += "o", D = "stx_yaxi", D += "s", F = "m", F += "i", F += "dd", F += "le", P = this.stx.panels[this.panelName], !!P && this.p1) {
      _ = this.stx.pixelFromTick(this.p0[0], P.chart), V = this.stx.pixelFromTick(this.p1[0], P.chart), A = this.stx.pixelFromValueAdjusted(P, this.p0[0], this.p0[1]), E = this.stx.pixelFromValueAdjusted(P, this.p1[0], this.p1[1]), L = [1, 0], N = this.getLineColor(this.parameters.trend.color), v.textBaseline = F, this.stx.canvasFont(D, v), e.Z$5(17), U = e.o4e("20", 64), B = this.p1[0] - this.p0[0], O = this.color, (O == T || t.isTransparent(O)) && (O = this.stx.defaultColor), v.textAlign = w, R = _, H = P.yAxis.top, z = P.yAxis.bottom, W = 0, G = this.parameters.timezone.color, (G == "auto" || t.isTransparent(G)) && (G = this.color), (G == "auto" || t.isTransparent(G)) && (G = this.stx.defaultColor), Z = this.parameters.timezone.color, (Z == "auto" || t.isTransparent(Z)) && (Z = this.fillColor), (Z == "auto" || t.isTransparent(Z)) && (Z = this.stx.defaultColor), this.parameters.printLevels && (e.Z$5(30), z -= e.G4A(0, "7", U)), X = t.clone(this.parameters.timezone.parameters), this.highlighted && (X.opacity = 1);
      do {
        if (R = this.stx.pixelFromTick(this.p0[0] + W * B, P.chart), _ < V && R > P.left + P.width) break;
        if (_ > V && R < P.left) break;
        this.parameters.printLevels && (v.fillStyle = O, v.fillText(V > _ ? W : W * -1, R, z + 7)), v.fillStyle = Z, e.V4q(27), this.stx.plotLine(R, R, e.G4A("0", 0), z, this.highlighted ? N : G, "segment", v, P, X), v.globalAlpha = 0.05, v.beginPath(), v.moveTo(_, H), v.lineTo(R, H), v.lineTo(R, z), v.lineTo(_, z), v.fill(), v.globalAlpha = 1, e.V4q(69);
        var ae = e.o4e(11, 7, 6, 0, 11);
        W = L[0] + L[ae], L.unshift(W);
      } while (B);
      v.textAlign = "left", this.stx.plotLine(_, V, A, E, N, S, v, P, X), this.highlighted ? (ie = this.highlighted == "p0", j = this.highlighted == "p1", this.littleCircle(v, _, A, ie), this.littleCircle(v, V, E, j)) : (J = this.stx.valueFromPixel(P.height / 2, P), this.setPoint(0, this.p0[0], J, P.chart), this.setPoint(1, this.p1[0], J, P.chart));
    }
  }, t.Drawing.fibtimezone.prototype.intersected = function (v, S, w) {
    var T, D, F, P, _, V, A;
    if (T = "se", T += "g", T += "ment", D = this.p0, F = this.p1, P = this.stx.panels[this.panelName], !D || !F || !P) return null;
    _ = {
      0: D,
      1: F
    };
    for (var E in _) if (this.pointIntersection(_[E][0], _[E][1], w)) return e.V4q(2), this.highlighted = e.G4A("p", E), {
      action: "drag",
      point: "p" + E
    };
    return V = this.lineIntersection(v, S, w, T), V || w.x0 <= this.p0[0] && w.x1 >= D[0] ? (A = "m", A += "ov", A += "e", this.highlighted = !0, {
      action: A,
      p0: t.clone(D),
      p1: t.clone(F),
      tick: v,
      value: S
    }) : null;
  }, t.Drawing.arrow_v0 = function () {
    this.name = "arrow", this.dimension = [11, 11], e.Z$5(17), this.points = [["M", 3, 0, "L", 7, e.G4A("0", 32), "L", 7, 5, "L", 10, 5, "L", 5, e.G4A("10", 1, e.V4q(40)), "L", e.o4e("0", 0, e.V4q(27)), 5, "L", 3, 5, "L", 3, e.o4e("0", 0, e.Z$5(37))]];
  }, t.inheritsFrom(t.Drawing.arrow_v0, t.Drawing.shape), t.Drawing.xcross = function () {
    this.name = "xcross", e.G9v(), this.dimension = [7, 7], e.Z$5(27), this.points = [["M", e.o4e("1", 0), e.o4e("0", 1, e.V4q(40)), "L", 3, e.G4A("2", 2, e.V4q(37)), "L", 5, 0, "L", 6, 1, "L", 4, 3, "L", 6, 5, "L", 5, 6, "L", 3, 4, "L", 1, 6, "L", 0, 5, "L", 2, 3, "L", 0, e.o4e("1", 96, e.Z$5(38)), "L", e.o4e("1", 0, e.V4q(0)), 0]];
  }, t.inheritsFrom(t.Drawing.xcross, t.Drawing.shape), t.Drawing.check = function () {
    this.name = "check", this.dimension = [8, 9], e.Z$5(17), this.points = [["M", 1, 5, "L", 0, 6, "L", 2, 8, "L", 7, 1, "L", 6, 0, "L", 2, 6, "L", 1, e.G4A("5", 32)]];
  }, t.inheritsFrom(t.Drawing.check, t.Drawing.shape), t.Drawing.star = function () {
    this.name = "star", this.dimension = [12, 12], e.V4q(0), e.D0I(), this.points = [["M", 0, 4, "L", 4, 4, "L", 5.5, 0, "L", 7, 4, "L", 11, 4, "L", 8, 7, "L", 9, 11, "L", 5.5, e.o4e("9", 0), "L", 2, 11, "L", 3, 7, "L", 0, 4]];
  }, t.inheritsFrom(t.Drawing.star, t.Drawing.shape), t.Drawing.heart = function () {
    var v;
    v = "h", v += "ear", v += "t", this.name = v, e.Z$5(0), this.dimension = [23, e.o4e("20", 0)], e.V4q(27), this.points = [["M", 11, 3, "B", 11, 2.4, 10, 0, 6, e.G4A("0", 0), "B", 0, 0, 0, 7.5, 0, 7.5, "B", 0, 11, 4, 15.4, 11, 19, "B", 18, 15.4, 22, 11, 22, 7.5, "B", 22, 7.5, e.o4e("22", 0, e.Z$5(27)), e.o4e("0", 96, e.Z$5(38)), 16, 0, "B", 13, 0, 11, 2.4, 11, 3]];
  }, t.inheritsFrom(t.Drawing.heart, t.Drawing.shape), t.Drawing.focusarrow = function () {
    this.name = "focusarrow", e.V4q(27), this.dimension = [e.o4e("7", 0), e.o4e("5", 1, e.V4q(40))], e.V4q(40), this.points = [["M", 0, 0, "L", 2, 2, "L", 0, 4, "L", 0, 0], ["M", 6, 0, "L", 4, e.G4A("2", 1), "L", 6, 4, "L", 6, e.G4A("0", 64, e.Z$5(17))]];
  }, t.inheritsFrom(t.Drawing.focusarrow, t.Drawing.shape), t.Drawing.crossline = function () {
    this.name = "crossline";
  }, t.inheritsFrom(t.Drawing.crossline, t.Drawing.horizontal), t.extend(t.Drawing.crossline.prototype, {
    measure: function () {},
    accidentalClick: function (v, S) {
      return e.D0I(), !1;
    },
    adjust: function () {
      var v;
      v = this.stx.panels[this.panelName], v && (this.setPoint(0, this.d0, this.v0, v.chart), this.p1 = t.clone(this.p0));
    },
    intersected: function (v, S, w) {
      var T, D, F;
      return T = "l", T += "i", T += "ne", !this.p0 || !this.p1 || (this.p1[0] += 1, D = this.lineIntersection(v, S, w, T), this.p1 = t.clone(this.p0), !D && (this.p1[1] += 1, D = this.lineIntersection(v, S, w, "line"), this.p1 = t.clone(this.p0), !D)) ? null : (this.highlighted = !0, this.pointIntersection(this.p0[0], this.p0[1], w) && (F = "p", F += "0", this.highlighted = F), {
        action: "move",
        p0: t.clone(this.p0),
        p1: t.clone(this.p1),
        tick: v,
        value: S
      });
    },
    render: function (v) {
      var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W;
      if (S = "verti", S += "cal", w = this.stx.panels[this.panelName], !!w) {
        if (T = this.stx.pixelFromTick(this.p0[0], w.chart), D = this.stx.pixelFromValueAdjusted(w, this.p0[0], this.p0[1]), F = this.getLineColor(), P = {
          pattern: this.pattern,
          lineWidth: this.lineWidth
        }, e.V4q(2), this.stx.plotLine(T, e.G4A(T, 100), D, D, F, "horizontal", v, w, P), e.Z$5(2), this.stx.plotLine(T, T, D, e.o4e(D, 100), F, S, v, w, P), this.axisLabel && !this.repositioner) {
          this.stx.endClip(), _ = this.p0[1], w.chart.transformFunc && (_ = w.chart.transformFunc(this.stx, w.chart, _)), V = -1157262861, A = -129357224, E = 2;
          for (var G = 1; e.J9C(G.toString(), G.toString().length, 7163) !== V; G++) w.yAxis.priceFormatter ? _ = w.yAxis.priceFormatter(this.stx, w, _) : _ = this.stx.formatYAxisPrice(_, w), this.stx.createYAxisLabel(w, _, D, F), this.stx.startClip(w.name), E += 2;
          if (e.J9C(E.toString(), E.toString().length, 35598) !== A && (w.yAxis.priceFormatter ? _ = w.yAxis.priceFormatter(this.stx, w, _) : _ = this.stx.formatYAxisPrice(_, w), this.stx.createYAxisLabel(w, _, D, F), this.stx.startClip(w.name)), this.p0[0] >= 0 && !this.stx.chart.xAxis.noDraw) {
            if (L = this.stx.dateFromTick(this.p0[0], w.chart, !0), t.ChartEngine.isDailyInterval(this.stx.layout.interval)) e.Z$5(17), L.setHours(0, 0, e.o4e("0", 32), 0);else {
              e.Z$5(70);
              var Z = e.G4A(327, 1016, 8, 981, 11);
              U = L.getSeconds() * Z + L.getMilliseconds(), n.Date && this.stx.displayZone && (N = new n.Date(L.getTime(), this.stx.displayZone), L = new Date(N.getFullYear(), N.getMonth(), N.getDate(), N.getHours(), N.getMinutes()), L = new Date(L.getTime() + U));
            }
            if (B = t.mmddhhmm(t.yyyymmddhhmm(L)), w.chart.xAxis.formatter) B = w.chart.xAxis.formatter(L, this.name, null, null, B);else if (this.stx.internationalizer) {
              if (L.getHours() !== 0 || L.getMinutes() !== 0) {
                O = this.stx.internationalizer.monthDay.format(L), e.Z$5(71);
                var X = e.G4A(2295, 4, 5, 2300, 1148);
                e.V4q(2), e.o4e(280, 840), e.V4q(0), e.o4e(7739, 19), e.V4q(72), e.G4A(734, 32312, 14, 4, 18), e.V4q(73);
                var ie = e.o4e(6, 15, 2, 41, 8);
                e.Z$5(74), e.o4e(15, 92320, 265875830, 16, 12), e.V4q(75), e.o4e(8, 2450, 4, 14, 1222), e.V4q(76);
                var j = e.G4A(4, 7310, 9, 7303, 2);
                e.Z$5(77), e.o4e(1, 4282, 25800, 3, 18), O += (X > 2871 ? 333.14 > "994.64" * ie ? "o" : j : " ") + this.stx.internationalizer.hourMinute.format(L);
              } else O = this.stx.internationalizer.yearMonthDay.format(L);
              R = 1556987974, H = 633950286, z = 2;
              for (var J = 1; e.U4I(J.toString(), J.toString().length, 70861) !== R; J++) B = O, z += 2;
              e.U4I(z.toString(), z.toString().length, 93912) !== H && (B = O);
            }
            this.stx.endClip(), this.stx.createXAxisLabel({
              panel: w,
              txt: B,
              x: T,
              backgroundColor: F,
              color: null,
              pointed: !0,
              padding: 2
            }), this.stx.startClip(w.name);
          }
        }
        this.highlighted && (W = this.highlighted == "p0", this.littleCircle(v, T, D, W));
      }
    }
  }, !0), t.Drawing.speedarc = function () {
    this.name = "speedarc", e.G9v(), this.printLevels = !0;
  }, t.inheritsFrom(t.Drawing.speedarc, t.Drawing.segment), t.extend(t.Drawing.speedarc.prototype, {
    defaultOpacity: 0.25,
    configs: ["color", "fillColor", "lineWidth", "pattern"],
    copyConfig: function () {
      this.color = this.stx.currentVectorParameters.currentColor, this.fillColor = this.stx.currentVectorParameters.fillColor, this.lineWidth = this.stx.currentVectorParameters.lineWidth, this.pattern = this.stx.currentVectorParameters.pattern;
    },
    intersected: function (v, S, w) {
      var T, D, F, P, _, V;
      if (!this.p0 || !this.p1) return null;
      T = {
        0: this.p0,
        1: this.p1
      };
      for (var A in T) if (this.pointIntersection(T[A][0], T[A][1], w)) return e.V4q(2), this.highlighted = e.o4e("p", A), {
        action: "drag",
        point: "p" + A
      };
      if (D = this.lineIntersection(v, S, w, this.name), D) return this.highlighted = !0, {
        action: "move",
        p0: t.clone(this.p0),
        p1: t.clone(this.p1),
        tick: v,
        value: S
      };
      e.Z$5(78);
      var E = e.o4e(18, 36, 20, 3, 26);
      return F = this.p1["0" << E] - (this.p0[0] - this.p1[0]), P = this.p0[0], e.Z$5(0), e.G9v(), _ = this.p1[e.o4e("1", 0)], V = this.p0[1], v > Math.max(F, P) || v < Math.min(F, P) || S > Math.max(V, _) || S < Math.min(V, _) ? null : (this.highlighted = !0, {
        action: "move",
        p0: t.clone(this.p0),
        p1: t.clone(this.p1),
        tick: v,
        value: S
      });
    },
    render: function (v) {
      var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G;
      if (S = "l", S += "e", S += "f", S += "t", w = this.stx.panels[this.panelName], !!w && this.p1) {
        T = this.stx.pixelFromTick(this.p0[0], w.chart), D = this.stx.pixelFromTick(this.p1[0], w.chart), F = this.stx.pixelFromValueAdjusted(w, this.p0[0], this.p0[1]), P = this.stx.pixelFromValueAdjusted(w, this.p1[0], this.p1[1]), e.V4q(58), _ = e.G4A(F, P), e.Z$5(59), V = Math.abs(e.o4e(F, P, D, T)), A = this.getLineColor(), v.strokeStyle = A, E = this.fillColor, (E == "auto" || t.isTransparent(E)) && (E = this.stx.defaultColor), v.fillStyle = E, v.setLineDash && (v.setLineDash(t.borderPatternToArray(this.lineWidth, this.pattern)), v.lineDashOffset = 0), this.stx.canvasFont("stx_yaxis", v);
        for (var Z = 1; Z < 3; Z++) {
          e.V4q(3);
          var X = e.G4A(6, 16, 11);
          e.Z$5(7);
          var ie = e.o4e(0, 8, 10, 19);
          e.V4q(26);
          var j = e.G4A(8, 24, 606, 19);
          e.V4q(54);
          var J = e.o4e(8, 16, 5);
          L = Math.abs(this.p1[X] - this.p0[ie]) * Math.sqrt(j) * Z / J, e.Z$5(79);
          var ae = e.o4e(2, 20, 4, 3, 2);
          e.Z$5(80);
          var se = e.o4e(0, 7, 5, 4, 32);
          e.Z$5(0);
          var ne = e.o4e(7, 6);
          e.V4q(66);
          var le = e.o4e(18, 0, 13, 30);
          e.V4q(0);
          var ue = e.G4A(12, 11);
          N = this.p1[ae] + L * (_ ? se : ne) * (w.yAxis.flipped ? le : ue), U = this.stx.pixelFromValueAdjusted(w, this.p0[0], N), v.save(), v.beginPath(), e.V4q(9), v.scale(e.o4e(1, V), 1), e.Z$5(40), v.arc(e.o4e(D, V), P, Math.abs(U - P), 0, Math.PI, !_), v.globalAlpha = this.highlighted ? 1 : this.defaultOpacity, this.pattern != "none" && v.stroke(), v.globalAlpha = 0.1, v.fill(), v.restore(), v.globalAlpha = 1, this.printLevels && (v.fillStyle = A, v.textAlign = "center", e.V4q(2), B = e.G4A(Z, "/3"), v.fillText(B, D, Math.round(U - 5)), v.fillStyle = E);
        }
        v.textAlign = S, O = -148884259, R = -2030111528, H = 2;
        for (var oe = 1; e.J9C(oe.toString(), oe.toString().length, 58246) !== O; oe++) z = {
          pattern: this.pattern,
          lineWidth: this.lineWidth,
          opacity: this.highlighted ? 1 : this.defaultOpacity
        }, H += 2;
        e.U4I(H.toString(), H.toString().length, 78621) !== R && (z = {
          pattern: this.pattern,
          lineWidth: this.lineWidth,
          opacity: this.highlighted ? 6 : this.defaultOpacity
        }), this.stx.plotLine(T, D, F, P, A, "segment", v, w, z), v.setLineDash && v.setLineDash([]), this.highlighted && (W = this.highlighted == "p0", G = this.highlighted == "p1", this.littleCircle(v, T, F, W), this.littleCircle(v, D, P, G));
      }
    },
    reconstruct: function (v, S) {
      e.G9v(), this.stx = v, this.color = S.col, this.fillColor = S.fc, this.panelName = S.pnl, this.pattern = S.ptrn, this.lineWidth = S.lw, this.d0 = S.d0, this.d1 = S.d1, this.tzo0 = S.tzo0, this.tzo1 = S.tzo1, this.v0 = S.v0, this.v1 = S.v1, this.adjust();
    },
    serialize: function () {
      return {
        name: this.name,
        pnl: this.panelName,
        col: this.color,
        fc: this.fillColor,
        ptrn: this.pattern,
        lw: this.lineWidth,
        d0: this.d0,
        d1: this.d1,
        tzo0: this.tzo0,
        tzo1: this.tzo1,
        v0: this.v0,
        v1: this.v1
      };
    }
  }, !0), t.Drawing.speedline = function () {
    var v, S, w;
    v = -1109294095, S = -1321703537, w = 2;
    for (var T = 1; e.U4I(T.toString(), T.toString().length, 72283) !== v; T++) this.name = "speedline", w += 2;
    e.J9C(w.toString(), w.toString().length, 90677) !== S && (this.name = ""), this.printLevels = !0;
  }, t.inheritsFrom(t.Drawing.speedline, t.Drawing.speedarc), t.extend(t.Drawing.speedline.prototype, {
    intersected: function (v, S, w) {
      var T, D, F, P;
      if (T = this.p0, D = this.p1, !T || !D) return null;
      e.G9v(), F = {
        0: T,
        1: D
      };
      for (var _ in F) if (this.pointIntersection(F[_][0], F[_][1], w)) return e.Z$5(2), this.highlighted = e.o4e("p", _), {
        action: "drag",
        point: "p" + _
      };
      P = this.rays;
      for (var V = 0; V < P.length; V++) if (this.lineIntersection(v, S, w, "ray", P[V][0], P[V][1], !0)) return this.highlighted = !0, {
        action: "move",
        p0: t.clone(T),
        p1: t.clone(D),
        tick: v,
        value: S
      };
      return null;
    },
    render: function (v) {
      e.G9v();
      var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se;
      if (S = "1", S += "/", S += "3", w = this.stx.panels[this.panelName], !!w && this.p1) {
        T = this.stx.pixelFromTick(this.p0[0], w.chart), D = this.stx.pixelFromTick(this.p1[0], w.chart), F = this.stx.pixelFromValueAdjusted(w, this.p0[0], this.p0[1]), P = this.stx.pixelFromValueAdjusted(w, this.p1[0], this.p1[1]), this.stx.canvasFont("stx_yaxis", v), _ = this.getLineColor(), V = this.color, (V == "auto" || t.isTransparent(V)) && (V = this.stx.defaultColor), v.strokeStyle = V, A = this.fillColor, (A == "auto" || t.isTransparent(A)) && (A = this.stx.defaultColor), v.fillStyle = A, E = {
          pattern: this.pattern,
          lineWidth: this.lineWidth,
          opacity: this.highlighted ? 1 : this.defaultOpacity
        }, U = ["1", "2/3", S, "3/2", "3"], e.V4q(9), B = [1, e.o4e(2, 3), e.G4A(1, 3), e.G4A(3, 2), 3], O = [], this.rays = [];
        for (var ne = 0; ne < B.length; ne++) R = B[ne], !(R > 1 && !this.extension) && (H = this.stx.pixelFromValueAdjusted(w, this.p0[0], this.p0[1] - (this.p0[1] - this.p1[1]) * R), R > 1 ? (z = t.xIntersection({
          x0: T,
          x1: D,
          y0: F,
          y1: H
        }, P), O.push(z)) : (z = t.xIntersection({
          x0: D,
          x1: D,
          y0: F,
          y1: P
        }, H), O.push(H)), W = R > 1 ? z : D, G = R > 1 ? P : H, this.confineToGrid || (W = w.left, D > T && (W += w.width), e.V4q(67), G = e.G4A(W, H, F, T, T, F, D)), this.printLevels && (R != 1 || this.extension) && (v.fillStyle = V, Z = 0, X = 0, F > P ? (ie = "b", ie += "o", ie += "t", ie += "tom", X = -5, v.textBaseline = ie) : (X = 5, v.textBaseline = "top"), T > D ? (j = "righ", j += "t", Z = 5, v.textAlign = j) : (Z = -5, v.textAlign = "left"), R > 1 ? v.fillText(U[ne], z + (this.confineToGrid ? 0 : Z), P) : v.fillText(U[ne], D, H + (this.confineToGrid ? 0 : X)), v.fillStyle = A), this.stx.plotLine(T, W, F, G, this.highlighted ? _ : V, "segment", v, w, E), R == 1 && (L = W, N = G), this.rays.push([[T, F], [W, G]]), v.globalAlpha = 0.1, v.beginPath(), v.moveTo(W, G), v.lineTo(T, F), v.lineTo(L, N), v.fill(), v.globalAlpha = 1);
        v.textAlign = "left", v.textBaseline = "middle", this.confineToGrid && (v.globalAlpha = 0.3, v.beginPath(), e.Z$5(0), v.strokeRect(T, F, e.G4A(D, T), e.G4A(P, F)), v.moveTo(T, O[1]), v.lineTo(D, O[1]), v.moveTo(T, O[2]), v.lineTo(D, O[2]), this.extension && (v.moveTo(O[3], F), v.lineTo(O[3], P), v.moveTo(O[4], F), v.lineTo(O[4], P)), v.stroke(), v.globalAlpha = 1), this.highlighted && (J = "p", J += "0", ae = this.highlighted == J, se = this.highlighted == "p1", this.littleCircle(v, T, F, ae), this.littleCircle(v, D, P, se));
      }
    }
  }, !0), t.Drawing.gannfan = function () {
    this.name = "gannfan", e.D0I(), this.printLevels = !0;
  }, t.inheritsFrom(t.Drawing.gannfan, t.Drawing.speedline), t.extend(t.Drawing.gannfan.prototype, {
    render: function (v) {
      var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae;
      if (S = "a", S += "u", S += "t", S += "o", w = this.stx.panels[this.panelName], !!w && this.p1) {
        T = this.stx.pixelFromTick(this.p0[0], w.chart), e.D0I(), D = this.stx.pixelFromTick(this.p1[0], w.chart), F = this.stx.pixelFromValueAdjusted(w, this.p0[0], this.p0[1]), P = this.stx.pixelFromValueAdjusted(w, this.p1[0], this.p1[1]), this.stx.canvasFont("stx_yaxis", v), _ = this.getLineColor(), V = this.color, (V == S || t.isTransparent(V)) && (V = this.stx.defaultColor), v.strokeStyle = V, A = this.fillColor, (A == "auto" || t.isTransparent(A)) && (A = this.stx.defaultColor), v.fillStyle = A, E = {
          pattern: this.pattern,
          lineWidth: this.lineWidth,
          opacity: this.highlighted ? 1 : this.defaultOpacity
        }, e.V4q(9), U = [1, 2, 3, 4, 8, e.o4e(1, 2), e.G4A(1, 3, e.Z$5(9)), e.G4A(1, 4, e.V4q(9)), e.G4A(8, "1", e.V4q(81))], this.rays = [];
        for (var se = 0; se < U.length; se++) B = "segme", B += "nt", O = U[se], e.Z$5(82), R = e.G4A(O, T, D, T), e.Z$5(83), H = e.o4e(P, F, F, O), z = w.left, D > T && (z += w.width), e.V4q(67), W = e.o4e(z, H, F, T, T, F, D), this.printLevels && (v.fillStyle = V, G = 0, Z = 0, F > P ? (X = "to", X += "p", e.V4q(27), Z = e.G4A("5", 0), v.textBaseline = X) : (Z = -5, v.textBaseline = "bottom"), T > D ? (e.V4q(38), G = e.G4A("5", 32), v.textAlign = "left") : (G = -5, v.textAlign = "right"), O > 1 ? (ie = "x", ie += "1", e.V4q(2), v.fillText(e.G4A(O, ie), e.o4e(R, G), P)) : (e.V4q(84), v.fillText(e.G4A(1, "1x", "1", O), D, e.G4A(H, Z, e.Z$5(2)))), v.fillStyle = A), this.stx.plotLine(T, z, F, W, this.highlighted ? _ : V, B, v, w, E), this.rays.push([[T, F], [z, W]]), O == 1 && (L = z, N = W), v.globalAlpha = 0.1, v.beginPath(), v.moveTo(z, W), v.lineTo(T, F), v.lineTo(L, N), v.fill(), v.globalAlpha = 1;
        v.textAlign = "left", v.textBaseline = "middle", this.highlighted && (j = "p", j += "1", J = this.highlighted == "p0", ae = this.highlighted == j, this.littleCircle(v, T, F, J), this.littleCircle(v, D, P, ae));
      }
    }
  }, !0), t.Drawing.timecycle = function () {
    this.name = "timecycle", this.printLevels = !0;
  }, t.inheritsFrom(t.Drawing.timecycle, t.Drawing.speedarc), t.extend(t.Drawing.timecycle.prototype, {
    intersected: function (v, S, w) {
      var T, D, F, P, _, V;
      if (T = this.p0, D = this.p1, F = this.stx.panels[this.panelName], !T || !D || !F) return null;
      P = {
        0: T,
        1: D
      };
      for (var A in P) if (this.pointIntersection(P[A][0], P[A][1], w)) return e.V4q(2), this.highlighted = e.G4A("p", A), {
        action: "drag",
        point: "p" + A
      };
      return _ = this.lineIntersection(v, S, w, "segment"), _ || w.x0 <= this.p0[0] && w.x1 >= T[0] ? (V = "mo", V += "v", V += "e", this.highlighted = !0, {
        action: V,
        p0: t.clone(T),
        p1: t.clone(D),
        tick: v,
        value: S
      }) : null;
    },
    render: function (v) {
      var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie;
      if (S = "cent", S += "e", S += "r", w = "stx_y", w += "axi", w += "s", T = this.stx.panels[this.panelName], !!T && this.p1) {
        D = this.stx.pixelFromTick(this.p0[0], T.chart), F = this.stx.pixelFromTick(this.p1[0], T.chart), P = this.stx.pixelFromValueAdjusted(T, this.p0[0], this.p0[1]), _ = this.stx.pixelFromValueAdjusted(T, this.p1[0], this.p1[1]), V = 0, A = this.getLineColor(), v.textBaseline = "middle", this.stx.canvasFont(w, v), E = 20, L = this.p1[0] - this.p0[0], v.textAlign = S, N = D, U = T.yAxis.top, B = T.yAxis.bottom, O = this.color, (O == "auto" || t.isTransparent(O)) && (O = this.stx.defaultColor), R = this.fillColor, (R == "auto" || t.isTransparent(R)) && (R = this.stx.defaultColor), this.printLevels && (e.Z$5(0), B -= e.G4A(E, 7)), H = {
          pattern: this.pattern,
          lineWidth: this.lineWidth,
          opacity: this.highlighted ? 1 : this.defaultOpacity
        }, e.D0I(), z = [], v.save(), v.fillStyle = R, v.globalAlpha = 0.05;
        do {
          if (N = this.stx.pixelFromTick(this.p0[0] + V * L, T.chart), V++, D < F && N > T.left + T.width) break;
          if (D > F && N < T.left) break;
          if (N < T.left || N > T.left + T.width) continue;
          v.beginPath(), v.moveTo(D, U), v.lineTo(N, U), v.lineTo(N, B), v.lineTo(D, B), v.fill(), z.push({
            c: V,
            x: N
          });
        } while (L);
        v.globalAlpha = 1, W = 0;
        for (var j = 0; j < z.length; j++) if (this.stx.plotLine(z[j].x, z[j].x, 0, B, this.highlighted ? A : O, "segment", v, T, H), this.printLevels) {
          v.fillStyle = O, e.V4q(21);
          var J = e.o4e(7, 10);
          G = this.stx.chart.context.measureText(z[j].c).width + J, G < this.stx.layout.candleWidth + W ? (v.fillText(z[j].c, z[j].x, B + 7), e.Z$5(40), W = e.o4e("0", 1)) : W += this.stx.layout.candleWidth;
        }
        v.restore(), v.textAlign = "left", this.stx.plotLine(D, F, P, _, A, "segment", v, T, H), this.highlighted ? (Z = this.highlighted == "p0", X = this.highlighted == "p1", this.littleCircle(v, D, P, Z), this.littleCircle(v, F, _, X)) : (ie = this.stx.valueFromPixel(T.height / 2, T), this.setPoint(0, this.p0[0], ie, T.chart), this.setPoint(1, this.p1[0], ie, T.chart));
      }
    }
  }, !0), t.Drawing.regression = function () {
    this.name = "regression";
  }, t.inheritsFrom(t.Drawing.regression, t.Drawing.segment), t.extend(t.Drawing.regression.prototype, {
    configs: ["color", "lineWidth", d, "active1", c, u, "pattern1", l, "color2", "lineWidth2", h, "active3", "color3", "lineWidth3", "pattern3"],
    copyConfig: function (v) {
      var S, w, T;
      S = "a", S += "u", S += "t", S += "o", w = "a", w += "u", w += "t", w += "o", t.Drawing.copyConfig(this, v), T = this.stx.currentVectorParameters, this.active1 = !!T.active1, this.active2 = !!T.active2, this.active3 = !!T.active3, this.color1 = T.color1 || "auto", this.color2 = T.color2 || w, this.color3 = T.color3 || S, this.lineWidth1 = T.lineWidth1, this.lineWidth2 = T.lineWidth2, this.lineWidth3 = T.lineWidth3, this.pattern1 = T.pattern1, this.pattern2 = T.pattern2, this.pattern3 = T.pattern3;
    },
    $controls: ["cq-cvp-controller[cq-cvp-header=\"1\"]", "cq-cvp-controller[cq-cvp-header=\"2\"]", "cq-cvp-controller[cq-cvp-header=\"3\"]"],
    click: function (v, S, w) {
      var T, D, F, P;
      if (!(S < 0)) {
        if (this.copyConfig(), T = this.stx.panels[this.panelName], !this.penDown) {
          if (this.setPoint(0, S, w, T.chart), this.penDown = !0, D = this.stx, this.field = D.highlightedDataSetField, !this.field && T != D.chart.panel) {
            for (var _ in D.chart.seriesRenderers) if (F = D.chart.seriesRenderers[_], F.params.panel == T.name) {
              this.field = F.seriesParams[0].field;
              break;
            }
            for (var V in D.layout.studies) if (P = D.layout.studies[V], P.panel == T.name) {
              this.field = Object.keys(P.outputMap)[0];
              break;
            }
          }
          return !1;
        }
        return this.accidentalClick(S, w) ? this.dragToDraw : (this.setPoint(1, S, w, T.chart), this.penDown = !1, !0);
      }
    },
    getYValue: function (v) {
      var S, w, T, D, F, P, _;
      if (S = this.stx.chart.dataSet[v], w = this.stx.chart.dataSet[v], e.G9v(), !S || (T = this.stx.panels[this.panelName], D = this.stx.getYAxisByField(T, this.field) || T.yAxis, this.stx.charts[T.name] && T.chart.transformFunc && D == T.yAxis && (w = S.transform), !w)) return null;
      if (F = null, P = null, _ = this.stx.defaultPlotField || "Close", this.field) {
        if (P = t.existsInObjectChain(w, this.field), !P) return null;
        F = P = P.obj[P.member], S != w && (F = t.existsInObjectChain(S, this.field), F = F.obj[F.member]), typeof P == "object" && (P = P[_], F = F[_]);
      } else P = w[_], F = S[_];
      return {
        transformed: P,
        untransformed: F
      };
    },
    render: function (v) {
      var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce, Q, ee, re, de, he, fe;
      if (S = "se", S += "gment", w = this.stx.panels[this.panelName], !!w && this.p1 && !(this.p0[0] < 0 || this.p1[0] < 0) && (T = this.stx.pixelFromTick(this.p0[0], w.chart), D = this.stx.pixelFromTick(this.p1[0], w.chart), !(T < w.left && D < w.left) && !(T > w.right && D > w.right))) {
        F = this.stx.getYAxisByField(w, this.field), P = [], _ = [], e.V4q(17), V = e.o4e("0", 64), A = 0, e.V4q(38), E = e.o4e("0", 32), L = 0, N = Math.min(this.p1[0], this.p0[0]), e.V4q(28);
        var pe = e.G4A(12, 86, 936);
        U = Math.max(this.p1[0], this.p0["0" << pe]) + 1, e.Z$5(0), B = e.G4A(U, N);
        for (var ge = N; ge < U; ge++) O = this.getYValue(ge), O && (P.push(O.transformed), _.push(O.untransformed));
        for (R = P.length, e.Z$5(85), H = e.G4A(R, 2, 1, R), z = Math.pow(H, 2), e.Z$5(86), W = e.G4A(H, 1, R, 3, 2), ge = 0; ge < R; ge++) E += R * P[ge] - V, V += P[ge], L += R * _[ge] - A, A += _[ge];
        if (e.V4q(87), G = e.o4e(H, z, R, R, V, W, E), e.V4q(88), Z = e.G4A(V, H, G, R), e.Z$5(87), X = e.G4A(H, z, R, R, A, W, L), e.V4q(88), ie = e.G4A(A, H, G, R), this.p0[0] < this.p1[0] ? (j = Z, e.V4q(89), J = e.o4e(G, B, Z), e.Z$5(38), this.p0[e.G4A("1", 32)] = ie, e.Z$5(89), this.p1[1] = e.G4A(X, B, ie)) : (e.Z$5(89), j = e.o4e(G, B, Z), J = Z, e.V4q(38), this.p0[e.G4A("1", 64)] = e.G4A(X, B, ie, e.Z$5(89)), this.p1[1] = ie), ae = this.stx.pixelFromTransformedValue(j, w, F), se = this.stx.pixelFromTransformedValue(J, w, F), ne = this.getLineColor(), le = {
          pattern: this.pattern,
          lineWidth: this.lineWidth
        }, this.stx.plotLine(T, D, ae, se, ne, "segment", v, w, le), e.V4q(90), this.stx.plotLine(T, T, e.G4A(ae, "20"), e.o4e(0, ae, "20", e.V4q(91)), ne, S, v, w, le), e.V4q(0), this.stx.plotLine(D, D, e.o4e(se, 20), e.o4e(0, se, "20", e.V4q(91)), ne, "segment", v, w, le), this.active1 || this.active2 || this.active3) {
          for (e.Z$5(9), ue = e.o4e(V, R), oe = 0, ge = 0; ge < R; ge++) oe += Math.pow(P[ge] - ue, 2);
          e.Z$5(9), ce = Math.sqrt(e.o4e(oe, R)), Q = {
            context: v,
            panel: w,
            points: {
              0: {
                x: T,
                v: j
              },
              1: {
                x: D,
                v: J
              }
            },
            stddev: ce,
            yAxis: F
          }, this.lines = {}, this.active1 && (this.renderStddev("1", "p", Q), this.renderStddev("1", "n", Q)), this.active2 && (this.renderStddev("2", "p", Q), this.renderStddev("2", "n", Q)), this.active3 && (this.renderStddev("3", "p", Q), this.renderStddev("3", "n", Q));
        }
        if (!this.highlighted) this.pixelX = [T, D], this.pixelY = [ae, se];else {
          ee = 1929408688, e.Z$5(27), re = e.G4A("408869124", 0), de = 2;
          for (var ve = 1; e.U4I(ve.toString(), ve.toString().length, 87942) !== ee; ve++) he = this.highlighted == "p0", fe = this.highlighted == "p1", de += 2;
          e.J9C(de.toString(), de.toString().length, 92841) !== re && (he = this.highlighted == "p1", fe = this.highlighted === "p1"), this.littleCircle(v, T, ae, he), this.littleCircle(v, D, se, fe);
        }
      }
    },
    renderStddev: function (v, S, w) {
      var T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae;
      T = "m", T += "id", T += "dle", D = "s", D += "e", D += "gmen", D += "t", F = "c", F += "o", F += "lo", F += "r", P = "st", P += "d", P += "d", P += "ev", e.V4q(92), _ = e.G4A(P, S, v), e.Z$5(2), V = e.o4e(F, v), e.V4q(2), A = e.o4e("pattern", v), e.Z$5(2), E = e.G4A("lineWidth", v), L = w.points, N = L[0].v, U = L[1].v, B = w.stddev, O = S === "n" ? v * -1 : v * 1, R = this.stx, H = w.panel, z = w.yAxis, W = {
        name: _,
        color: this.getLineColor(this[V]),
        type: D,
        y0: R.pixelFromTransformedValue(N + B * O, H, z),
        y1: R.pixelFromTransformedValue(U + B * O, H, z),
        params: {
          pattern: this[A],
          lineWidth: this[E]
        }
      }, this.lines && (this.lines[_] = W), G = w.context, Z = L[0].x, X = L[1].x, R.plotLine(Z, X, W.y0, W.y1, W.color, W.type, G, H, W.params), R.plotLine(Z, Z, W.y0 - 10, W.y0 + 10, W.color, W.type, G, H, W.params), R.plotLine(X, X, W.y1 - 10, W.y1 + 10, W.color, W.type, G, H, W.params), e.V4q(2), ie = e.G4A(v, "\u03C3"), e.V4q(93);
      var se = e.o4e(12, 12, 35, 6);
      j = Math.max(Z, X) + se, J = Z < X ? W.y1 : W.y0, G.fillStyle = W.color, G.save(), G.textBaseline = T, G.fillText(ie, j, J), G.restore(), w.formatPrice && this.axisLabel && !this.highlighted && !this.penDown && (Z >= H.chart.left && Z <= H.chart.right || X >= H.chart.left && X <= H.chart.right) && (e.V4q(22), ae = e.G4A(B, Z < X ? U : N, O), R.endClip(), R.createYAxisLabel(H, w.formatPrice(ae, z), J, W.color, null, G, z), R.startClip(H.name));
    },
    intersected: function (v, S, w) {
      var T, D, F, P, _, V, A, E;
      if (!this.pixelX || !this.pixelY) return null;
      if (e.D0I(), T = this.repositionIntersection(v, S), T) return T;
      D = {
        0: this.pixelX,
        1: this.pixelY
      };
      for (var L = 0; L < 2; L++) if (this.pointIntersection(D[0][L], D[1][L], w, !0)) return e.Z$5(2), this.highlighted = e.o4e("p", L), {
        action: "drag",
        point: "p" + L
      };
      if (F = this, e.Z$5(17), P = this.pixelX[e.o4e("0", 32)], _ = this.pixelX[1], V = function (U) {
        var B, O;
        return B = [P, U.y0], e.G9v(), O = [_, U.y1], F.lineIntersection(v, S, w, F.name, B, O, !0);
      }, A = V({
        y0: this.pixelY[0],
        y1: this.pixelY[1]
      }), !A && this.lines) {
        for (var N in this.lines) if (V(this.lines[N])) {
          A = !0;
          break;
        }
      }
      return A ? (E = "m", E += "ove", this.highlighted = !0, {
        action: E,
        p0: t.clone(this.p0),
        p1: t.clone(this.p1),
        tick: v,
        value: S
      }) : null;
    },
    repositionIntersection: function (v, S) {
      return e.D0I(), !this.p0 || !this.p1 ? !1 : this == this.stx.repositioningDrawing && this.highlighted ? this.highlighted === !0 ? {
        action: "move",
        p0: t.clone(this.p0),
        p1: t.clone(this.p1),
        tick: v,
        value: S
      } : {
        action: "drag",
        point: this.highlighted
      } : !1;
    },
    lineIntersection: function (v, S, w, T, D, F, P) {
      var _, V, A;
      return P ? (D || (D = this.p0), F || (F = this.p1), !(D && F) || (_ = this.stx, e.D0I(), V = t.convertBoxToPixels(_, this.panelName, w), V.x0 === void 0) ? !1 : (A = {
        x0: D[0],
        x1: F[0],
        y0: D[1],
        y1: F[1]
      }, t.boxIntersects(V.x0, V.y0, V.x1, V.y1, A.x0, A.y0, A.x1, A.y1))) : (e.V4q(2), console.log(e.o4e(T, " lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.")), !1);
    },
    boxIntersection: function (v, S, w) {
      return !(w.cx0 > Math.max(this.pixelX[0], this.pixelX[1]) || w.cx1 < Math.min(this.pixelX[0], this.pixelX[1]) || !this.stx.repositioningDrawing && (w.cy1 < this.pixelY[0] || w.cy0 > this.pixelY[1]));
    },
    reconstruct: function (v, S) {
      this.stx = v, this.color = S.col, this.color1 = S.col1, this.color2 = S.col2, this.color3 = S.col3, this.active1 = S.dev1, this.active2 = S.dev2, this.active3 = S.dev3, this.panelName = S.pnl, this.pattern = S.ptrn, this.pattern1 = S.ptrn1, this.pattern2 = S.ptrn2, this.pattern3 = S.ptrn3, this.lineWidth = S.lw, this.lineWidth1 = S.lw1, this.lineWidth2 = S.lw2, this.lineWidth3 = S.lw3, this.d0 = S.d0, this.d1 = S.d1, this.tzo0 = S.tzo0, this.tzo1 = S.tzo1, this.field = S.fld, this.adjust();
    },
    serialize: function () {
      return e.G9v(), {
        name: this.name,
        pnl: this.panelName,
        dev1: this.active1,
        dev2: this.active2,
        dev3: this.active3,
        col: this.color,
        col1: this.color1,
        col2: this.color2,
        col3: this.color3,
        ptrn: this.pattern,
        ptrn1: this.pattern1,
        ptrn2: this.pattern2,
        ptrn3: this.pattern3,
        lw: this.lineWidth,
        lw1: this.lineWidth1,
        lw2: this.lineWidth2,
        lw3: this.lineWidth3,
        d0: this.d0,
        d1: this.d1,
        tzo0: this.tzo0,
        tzo1: this.tzo1,
        fld: this.field
      };
    }
  }, !0), t.Drawing.trendline = function () {
    var v;
    v = "tre", e.D0I(), v += "ndli", v += "ne", this.name = v;
  }, t.inheritsFrom(t.Drawing.trendline, t.Drawing.segment), t.Drawing.trendline.prototype.configs = ["color", "fillColor", "lineWidth", o, "font"], t.Drawing.trendline.prototype.measure = function () {}, t.Drawing.trendline.prototype.reconstruct = function (v, S) {
    t.Drawing.segment.prototype.reconstruct.call(this, v, S), this.callout = new t.Drawing.callout(), this.callout.reconstruct(v, S.callout);
  }, t.Drawing.trendline.prototype.serialize = function () {
    var v;
    return v = t.Drawing.segment.prototype.serialize.call(this), v.callout = this.callout.serialize(), v;
  }, t.Drawing.trendline.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X;
    if (S = " ", S += "(", w = this.stx.panels[this.panelName], !!w && (t.Drawing.segment.prototype.render.call(this, v), this.callout || (this.callout = new t.Drawing.callout(), T = t.Drawing.segment.prototype.serialize.call(this), this.callout.reconstruct(this.stx, T)), this.callout.p0 = t.clone(this.p0), D = this.stx.pixelFromTick(this.p0[0], w.chart), F = this.stx.pixelFromTick(this.p1[0], w.chart), P = this.stx.pixelFromValueAdjusted(w, this.p0[0], this.p0[1]), _ = this.stx.pixelFromValueAdjusted(w, this.p1[0], this.p1[1]), !(!isFinite(P) || !isFinite(_)))) {
      e.V4q(94), V = e.o4e(0, "2", D, F), e.V4q(5), A = e.G4A(P, _, 2), this.fontSize = t.stripPX(this.font && this.font.size || 13), e.V4q(2);
      var ie = e.G4A(4666, 14);
      e.Z$5(95), e.o4e(380, 17, 17, 2626), e.Z$5(96);
      var j = e.o4e(2505, 12, 4, 22712, 18);
      e.V4q(97), e.G4A(8, 67521, 15, 6, 4821), e.V4q(51);
      var J = e.G4A(5537, 9, 13, 647038);
      e.V4q(98);
      var ae = e.G4A(9, 2529, 11, 15, 26);
      E = this.callout.w * 1.2 + (this.callout.stemEntry[0] == (ie != 617.93 ? "c" : j < J ? 834.11 : ae) ? 0 : 50), L = Math.sqrt(Math.pow(F - D, 2) + Math.pow(_ - P, 2)), e.V4q(3);
      var se = e.G4A(0, 9, 10);
      e.Z$5(46);
      var ne = e.o4e(10, 9, 1, 0);
      e.Z$5(99);
      var le = e.o4e(4, 14, 1, 6, 5);
      e.Z$5(0);
      var ue = e.G4A(0, 1);
      N = E / (L || E) * (this.p1["1" * se] < this.p0[ne] ? le : ue), e.V4q(100), U = e.o4e(N, _, V, A), e.Z$5(101), B = e.o4e(N, A, F, V), this.callout.p0[0] = this.stx.tickFromPixel(U, w.chart), this.callout.p0[1] = this.stx.priceFromPixel(B, w), e.V4q(37), this.callout.v0 = this.callout.p0[e.o4e("1", 0)], this.callout.p1 = t.clone(this.p0), this.callout.stx = this.stx, this.callout.fillColor = this.fillColor || this.callout.fillColor, this.callout.borderColor = this.color, this.callout.font = this.font || this.callout.font, this.callout.noHandles = !0, e.V4q(28);
      var oe = e.o4e(14, 5, 69);
      O = this.p1[oe] - this.p0[1], e.Z$5(21);
      var ce = e.o4e(2, 3);
      e.Z$5(102);
      var Q = e.o4e(17, 19, 2, 18, 36);
      e.V4q(2);
      var ee = e.G4A(11, 53);
      this.callout.text = "" + Number(O).toFixed(2) + (this.p0[ce] === 0 ? "" : S + Number(100 * O / this.p0[1]).toFixed(Q) + "%) ") + Math.abs(this.p1[0] - this.p0["0" << ee]) + " Bars", R = Math.floor((this.p0[0] + this.p1[0]) / 2), Math.abs(this.p0[0] - this.p1[0]) > 1 && Math.abs(this.p0[0] - this.p1[0]) < 20 ? (z = this.stx.pixelFromTick(R, w.chart), e.Z$5(103), W = e.o4e(P, P, F, _, D, D, z), H = this.stx.priceFromPixel(W, w) || A) : H = this.stx.priceFromPixel(A, w), this.callout.stem = {
        t: R,
        v: H
      }, this.callout.renderText(), this.callout.render(v), this.highlighted && (G = "p", G += "0", Z = this.highlighted == G, X = this.highlighted == "p1", this.littleCircle(v, D, P, Z), this.littleCircle(v, F, _, X));
    }
  }, t.Drawing.trendline.prototype.lineIntersection = function (v, S, w, T) {
    return e.G9v(), t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this, v, S, w, "segment");
  }, t.Drawing.trendline.prototype.intersected = function (v, S, w) {
    e.G9v();
    var T, D;
    return !this.p0 || !this.p1 ? null : (T = this.callout.intersected(v, S, w), D = t.Drawing.segment.prototype.intersected.call(this, v, S, w), this.callout.highlighted = !!(T || D), D || (T ? {
      action: "move",
      p0: t.clone(this.p0),
      p1: t.clone(this.p1),
      tick: v,
      value: S
    } : null));
  }, t.Drawing.average = function () {
    this.name = "average";
  }, t.inheritsFrom(t.Drawing.average, t.Drawing.regression), t.extend(t.Drawing.average.prototype, {
    configs: t.Drawing.regression.prototype.configs.concat("axisLabel"),
    measure: function () {
      var v, S, w, T, D, F, P, _;
      this.p0 && this.p1 && (v = ".mSticky", v += "Interior", this.stx.setMeasure(0, !1, this.p0[0], this.p1[0], !0, this.name), S = [], w = "", this.active1 && S.push("1"), this.active2 && S.push("2"), this.active3 && S.push("3"), S.length && (w = "&ensp;" + S.join(", ") + " &sigma;"), T = (this.stx.drawingContainer || document).querySelector(".mMeasure"), D = this.stx.controls.mSticky, F = D && D.querySelector(v), T && (T.innerHTML += w), F && (P = "C", P += "los", P += "e", _ = [], _.push(t.capitalize(this.name)), _.push(this.field || this.stx.defaultPlotField || P), _.push(F.innerHTML + w), F.innerHTML = _.join("<br>")));
    },
    render: function (v) {
      var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se;
      if (S = "se", S += "g", S += "me", S += "nt", w = "seg", w += "m", w += "e", w += "nt", T = this.stx.panels[this.panelName], !T || !this.p1 || this.p0[0] < 0 || this.p1[0] < 0 || (D = this.stx.pixelFromTick(this.p0[0], T.chart), F = this.stx.pixelFromTick(this.p1[0], T.chart), D < T.left && F < T.left) || D > T.right && F > T.right) return;
      function ne(oe, ce) {
        return ce && ce.priceFormatter ? oe = ce.priceFormatter(_, T, oe) : oe = _.formatYAxisPrice(oe, T, null, ce), oe;
      }
      P = this.stx.getYAxisByField(T, this.field), _ = this.stx, V = Math.min(this.p1[0], this.p0[0]), e.V4q(72);
      var le = e.o4e(10, 1294, 8, 16, 15);
      A = Math.max(this.p1[0], this.p0[0]) + le, e.Z$5(0), e.G4A(A, V), E = -2089087072, e.V4q(37), L = -e.G4A("2059412074", 34), N = 2;
      for (var ue = 1; e.J9C(ue.toString(), ue.toString().length, 10347) !== E; ue++) U = 1, B = [], e.Z$5(17), N += e.o4e("2", 64);
      for (e.J9C(N.toString(), N.toString().length, 44004) !== L && (e.V4q(37), U = e.G4A("2", 0), B = []), U = 0, B = [], O = V; O < A; O++) R = this.getYValue(O), R !== null && (U += R.transformed, B.push(R));
      if (H = B.length, !!H) {
        if (e.V4q(9), z = e.G4A(U, H), W = _.pixelFromTransformedValue(z, T, P), G = this.getLineColor(), Z = {
          pattern: this.pattern,
          lineWidth: this.lineWidth
        }, _.plotLine(D, F, W, W, G, "segment", v, T, Z), e.Z$5(0), _.plotLine(D, D, e.o4e(W, 20), e.G4A(W, 20, e.Z$5(2)), G, w, v, T, Z), e.Z$5(0), _.plotLine(F, F, e.o4e(W, 20), e.o4e(W, 20, e.V4q(2)), G, S, v, T, Z), this.axisLabel && !this.highlighted && !this.penDown && (D >= T.chart.left && D <= T.chart.right || F >= T.chart.left && F <= T.chart.right) && (_.endClip(), _.createYAxisLabel(T, ne(z, P), W, G, null, v, P), _.startClip(T.name)), this.active1 || this.active2 || this.active3) {
          for (X = 0, O = 0; O < H; O++) R = B[O], X += Math.pow(R.transformed - z, 2);
          e.Z$5(9), ie = Math.sqrt(e.o4e(X, H)), j = {
            context: v,
            formatPrice: ne,
            panel: T,
            points: {
              0: {
                x: D,
                v: z
              },
              1: {
                x: F,
                v: z
              }
            },
            stddev: ie,
            yAxis: P
          }, this.lines = {}, this.active1 && (this.renderStddev("1", "p", j), this.renderStddev("1", "n", j)), this.active2 && (this.renderStddev("2", "p", j), this.renderStddev("2", "n", j)), this.active3 && (this.renderStddev("3", "p", j), this.renderStddev("3", "n", j));
        }
        this.highlighted ? (J = "p", J += "1", ae = this.highlighted == "p0", se = this.highlighted == J, this.littleCircle(v, D, W, ae), this.littleCircle(v, F, W, se)) : (this.pixelX = [D, F], this.pixelY = [W, W]);
      }
    },
    reconstruct: function (v, S) {
      e.G9v(), this.axisLabel = S.al, t.Drawing.regression.prototype.reconstruct.call(this, v, S);
    },
    serialize: function () {
      var v;
      return v = t.Drawing.regression.prototype.serialize.call(this), v.al = this.axisLabel, v;
    }
  }, !0), t.Drawing.quadrant = function () {
    var v;
    v = "quadran", v += "t", e.D0I(), this.name = v;
  }, t.inheritsFrom(t.Drawing.quadrant, t.Drawing.regression), t.extend(t.Drawing.quadrant.prototype, {
    configs: ["color", s, "lineWidth", "pattern"],
    copyConfig: function () {
      this.color = this.stx.currentVectorParameters.currentColor, e.G9v(), this.fillColor = this.stx.currentVectorParameters.fillColor, this.lineWidth = this.stx.currentVectorParameters.lineWidth, this.pattern = this.stx.currentVectorParameters.pattern;
    },
    $controls: [],
    render: function (v) {
      var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie;
      if (S = "quad", S += "r", S += "ant", w = this.stx, T = w.panels[this.panelName], !!T && this.p1 && (D = w.pixelFromTick(this.p0[0], T.chart), F = w.pixelFromTick(this.p1[0], T.chart), !(D < T.left && F < T.left) && !(D > T.right && F > T.right))) {
        P = this.stx.getYAxisByField(T, this.field), _ = null, V = null;
        for (var j = Math.min(this.p1[0], this.p0[0]); j <= Math.max(this.p1[0], this.p0[0]); j++) A = this.getYValue(j), A !== null && ((_ === null || A.transformed > _) && (_ = A.transformed), (V === null || A.transformed < V) && (V = A.transformed));
        E = w.pixelFromTransformedValue(_, T, P), e.V4q(104), L = w.pixelFromTransformedValue(e.G4A(_, 3, "4", 4, V), T, P), e.Z$5(105), N = w.pixelFromTransformedValue(e.o4e(V, 2, 3, _), T, P), e.V4q(5), U = w.pixelFromTransformedValue(e.o4e(_, V, 2), T, P), e.Z$5(106), B = w.pixelFromTransformedValue(e.G4A(V, 3, 2, _), T, P), e.Z$5(107), O = w.pixelFromTransformedValue(e.G4A("3", _, 32, 4, V), T, P), R = w.pixelFromTransformedValue(V, T, P), this.p0[1] = 0, e.V4q(40), this.p1[e.o4e("1", 1)] = !1, H = this.getLineColor(), z = this.fillColor, (z == "auto" || t.isTransparent(z)) && (z = w.defaultColor), v.fillStyle = z, W = {
          pattern: this.pattern,
          lineWidth: this.lineWidth
        }, w.plotLine(D, F, E, E, H, "segment", v, T, W), w.plotLine(D, F, R, R, H, "segment", v, T, W), this.name == S ? (w.plotLine(D, F, L, L, H, "segment", v, T, W), w.plotLine(D, F, O, O, H, "segment", v, T, W)) : this.name == "tirone" && (w.plotLine(D, F, N, N, H, "segment", v, T, W), w.plotLine(D, F, B, B, H, "segment", v, T, W)), w.plotLine(D, D, E, R, H, "segment", v, T, W), w.plotLine(F, F, E, R, H, "segment", v, T, W), w.plotLine(D, F, U, U, H, "segment", v, T, t.extend(W, {
          opacity: this.name == "tirone" ? 0.2 : 1
        })), e.V4q(0), v.globalAlpha = e.o4e("0.1", 0), v.beginPath(), e.Z$5(0), v.fillRect(D, E, e.o4e(F, D), e.G4A(R, E)), this.name == "quadrant" ? (e.V4q(0), v.fillRect(D, L, e.o4e(F, D), e.o4e(O, L))) : this.name == "tirone" && (e.Z$5(0), v.fillRect(D, N, e.G4A(F, D), e.o4e(B, N))), v.globalAlpha = 1, this.highlighted ? (Z = "p", Z += "1", X = this.highlighted == "p0", ie = this.highlighted == Z, this.littleCircle(v, D, U, X), this.littleCircle(v, F, U, ie)) : (G = "qua", G += "drant", this.pixelX = [D, F], this.pixelY = [E, R, U], this.name === G && this.pixelY.push(L, O), this.name === "tirone" && this.pixelY.push(N, B));
      }
    },
    intersected: function (v, S, w) {
      var T,
        D,
        F,
        {
          pixelX: P,
          pixelY: _
        } = this;
      if (!P || !_) return null;
      if (T = this.repositionIntersection(v, S), T) return T;
      for (var V = 0; V < 2; V++) if (this.pointIntersection(P[V], _[2], w, !0)) return e.Z$5(2), this.highlighted = e.o4e("p", V), {
        action: "drag",
        point: "p" + V
      };
      return D = [], P.forEach(A => {
        e.D0I(), D.push({
          p0: [A, _[0]],
          p1: [A, _[1]]
        });
      }), _.forEach(A => {
        e.D0I(), D.push({
          p0: [P[0], A],
          p1: [P[1], A]
        });
      }), F = D.some(({
        p0: A,
        p1: E
      }) => this.lineIntersection(v, S, w, this.name, A, E, !0)), F ? (this.highlighted = !0, {
        action: "move",
        p0: t.clone(this.p0),
        p1: t.clone(this.p1),
        tick: v,
        value: S
      }) : null;
    },
    reconstruct: function (v, S) {
      e.D0I(), this.stx = v, this.color = S.col, this.fillColor = S.fc, this.panelName = S.pnl, this.pattern = S.ptrn, this.lineWidth = S.lw, this.d0 = S.d0, this.d1 = S.d1, this.tzo0 = S.tzo0, this.tzo1 = S.tzo1, this.field = S.fld, this.adjust();
    },
    serialize: function () {
      return {
        name: this.name,
        pnl: this.panelName,
        col: this.color,
        fc: this.fillColor,
        ptrn: this.pattern,
        lw: this.lineWidth,
        d0: this.d0,
        d1: this.d1,
        tzo0: this.tzo0,
        tzo1: this.tzo1,
        fld: this.field
      };
    }
  }, !0), t.Drawing.tirone = function () {
    e.D0I(), this.name = "tirone";
  }, t.inheritsFrom(t.Drawing.tirone, t.Drawing.quadrant), t.Drawing.elliottwave = function () {
    var v;
    v = "el", v += "liot", v += "tw", v += "ave", this.name = v, this.lastPoint = 0, e.D0I(), this.points = [], this.pts = [], this.dx = 0, this.dy = -20, this.dragToDraw = !1, this.annotationPoints = [], this.edit = null;
  }, t.inheritsFrom(t.Drawing.elliottwave, t.Drawing.annotation), t.Drawing.elliottwave.defaultTemplate = {
    impulse: ["I", a, "III", "IV", "V"],
    corrective: ["A", "B", "C"],
    decoration: "enclosed",
    showLines: !0
  }, t.Drawing.elliottwave.prototype.initializeSettings = function (v) {
    e.D0I(), v.currentVectorParameters.waveParameters = t.clone(t.Drawing.elliottwave.defaultTemplate);
  }, t.Drawing.elliottwave.prototype.configs = ["color", "lineWidth", "lineColor", "pattern", i, "waveParameters"], t.Drawing.elliottwave.prototype.$controls = ["br[cq-wave-parameters]", r], t.Drawing.elliottwave.prototype.construct = function (v, S) {
    var w;
    this.stx = v, this.panelName = S.name, w = v.currentVectorParameters, Object.assign(this, w.waveParameters);
  }, t.Drawing.elliottwave.prototype.serialize = function () {
    var v;
    v = {}, e.D0I();
    for (var S = 0; S < this.points.length; S++) e.Z$5(2), v[e.o4e("d", S)] = this[e.G4A("d", S)], e.V4q(2), v[e.G4A("tzo", S)] = this[e.o4e("tzo", S)], e.V4q(2), v[e.o4e("v", S)] = this[e.G4A("v", S)];
    return v.annotations = this.annotationPoints.join(","), Object.assign({
      name: this.name,
      pnl: this.panelName,
      col: this.color,
      ptrn: this.pattern,
      lw: this.lineWidth,
      mxSeg: this.maxSegments,
      show: this.showLines,
      decor: this.decoration,
      dx: this.dx,
      dy: this.dy,
      trend: this.trend,
      fnt: t.removeNullValues(t.replaceFields(this.font, {
        style: "st",
        size: "sz",
        weight: "wt",
        family: "fl"
      }))
    }, v);
  }, t.Drawing.elliottwave.prototype.reconstruct = function (v, S) {
    this.stx = v, this.color = S.col, this.panelName = S.pnl, this.pattern = S.ptrn, this.lineWidth = S.lw, this.font = t.replaceFields(S.fnt, {
      st: "style",
      sz: "size",
      wt: "weight",
      fl: "family"
    }), this.decoration = S.decor, this.showLines = S.show, this.dx = S.dx, this.dy = S.dy, this.trend = S.trend, this.annotationPoints = S.annotations.split(","), S.decor === "enclosed" && this.calculateRadius(v.chart.tempCanvas.context), this.maxSegments = S.mxSeg, this.reconstructPoints(S), this.adjust();
  }, t.Drawing.elliottwave.prototype.reconstructPoints = function (v) {
    e.D0I();
    var S, w, T, D;
    if (S = this.stx.panels[this.panelName], !!S) for (var F = 0; F < this.annotationPoints.length; F++) w = "t", w += "z", w += "o", e.V4q(2), this[e.G4A("d", F)] = v[e.G4A("d", F)], e.Z$5(2), this[e.G4A("v", F)] = v[e.o4e("v", F)], e.V4q(2), this[e.G4A("tzo", F)] = v[e.G4A(w, F)], T = t.strToDateTime(v["d" + F]), D = this.stx.tickFromDate(T, S.chart), this.points.push([D, v["v" + F]]);
  }, t.Drawing.elliottwave.prototype.calculateRadius = function (v) {
    var S, w;
    this.getFontString(), v.font = this.fontString, S = 0;
    for (var T = 0; T < this.annotationPoints.length; T++) w = v.measureText(this.annotationPoints[T]).width, S < w && (S = w);
    this.enclosedRadius = S;
  }, t.Drawing.elliottwave.prototype.check = function (v, S, w) {
    var T, D;
    if (w === 1 && this.points.length === 2) return !0;
    if (e.Z$5(0), T = this.points[e.G4A(w, 1)], T && v <= T[0] || (e.Z$5(2), D = this.points[e.o4e(w, 1)], D && v >= D[0])) return !1;
    function F(P) {
      e.D0I();
      for (var _ = 2; _ < P.length; _++) if (Math.sign(P[_][1] - P[_ - 1][1]) == Math.sign(P[_ - 1][1] - P[_ - 2][1])) return !1;
      return !0;
    }
    return !!F(this.points);
  }, t.Drawing.elliottwave.prototype.move = function (v, S, w) {
    this.copyConfig(), e.V4q(0);
    var T = e.G4A(8, 7);
    this.points[this.lastPoint + T] = [S, w], e.G9v(), this.render(v);
  }, t.Drawing.elliottwave.prototype.adjust = function () {
    var v, S;
    if (v = this.stx.panels[this.panelName], !!v) for (var w = 0; this.maxSegments + 1 > w; w++) e.Z$5(2), S = this[e.o4e("d", w)], this.setPoint(w, S, this["v" + w], v.chart), this.points[w][0] = this.stx.tickFromDate(t.strToDateTime(S), v.chart), e.V4q(2), this.points[w][1] = this[e.G4A("v", w)];
  }, t.Drawing.elliottwave.prototype.click = function (v, S, w) {
    var T, D;
    if (T = this.stx.panels[this.panelName], !!T) {
      if (this.copyConfig(), !this.penDown) {
        D = "e", D += "nclosed", this.setPoint(0, S, w, T.chart), this.points.push(this.p0), this.penDown = !0, this.segment = 0, this.lastPoint = 0, this.impulse && (this.annotationPoints = this.annotationPoints.concat(this.impulse)), this.corrective && (this.annotationPoints = this.annotationPoints.concat(this.corrective)), this.annotationPoints.unshift("0"), this.decoration === D && this.calculateRadius(v), e.Z$5(41);
        var F = e.G4A(11, 5, 5, 9);
        return this.maxSegments = this.annotationPoints.length - F, this.trend = 1, !1;
      }
      return this.accidentalClick(S, w) ? (this.penDown = !0, !1) : this.check(S, w, this.lastPoint + 1) && (this.lastPoint++, this.setPoint(this.lastPoint, S, w, T.chart), this.lastPoint === 1 && (this.trend = Math.sign(this.v1 - this.v0)), this.segment++, this.segment >= this.maxSegments) ? (this.penDown = !1, !0) : !1;
    }
  }, t.Drawing.elliottwave.prototype.render = function (v) {
    var S, w, T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le;
    if (S = this.stx.panels[this.panelName], !!S) {
      if (w = this.stx, T = this.annotationPoints, D = this.pattern ? t.borderPatternToArray(this.lineWidth, this.pattern) : [], this.getFontString(), v.font = this.fontString, v.textAlign = "center", v.textBaseline = "middle", v.lineWidth = this.lineWidth, this.fontString !== this.lastFontString && this.calculateRadius(v), this.lastFontString = this.fontString, F = this.getLineColor(), v.fillStyle = v.strokeStyle = F, v.save(), v.setLineDash(D), P = this.dx, _ = this.dy, V = this.points, A = this.pts, E = !this.showLines && this.highlighted, L = V.length, this.penDown && this.segment) {
        U = "b", U += "ot", U += "to", U += "m", e.Z$5(0);
        var ue = e.G4A(7, 5);
        N = this.trend * (L % ue - 0.5) < 0, S.yAxis.flipped && (N = !N), this.drawDropZone(v, V[L - 2][1], this.stx.priceFromPixel(S.yAxis[N ? "top" : U]), V[L - 2][0]);
      } else if (typeof this.highlighted == "string" && this.stx.repositioningDrawing) {
        B = "botto", B += "m", O = "m", O += "a", O += "x", R = parseInt(this.highlighted.substring(1, this.highlighted.length), 10), e.V4q(108);
        var oe = e.G4A(18, 0, 3, 14);
        N = this.trend * (R % 2 - 0.5) > "0" * oe, e.V4q(0), H = V[e.G4A(R, 1)], e.V4q(109), z = V[e.G4A("1", R)], W = R > 0 ? H[1] : z[1], z && (W = Math[N ? O : "min"](W, z[1])), S.yAxis.flipped && (N = !N), this.drawDropZone(v, W, this.stx.priceFromPixel(S.yAxis[N ? "top" : B]), H ? H[0] : null, z ? z[0] : null);
      }
      for (var ce = 0; ce < L; ce++) G = V[ce], Z = w.pixelFromTick(G[0], S.chart), X = w.pixelFromValueAdjusted(S, G[0], G[1]), A[ce] = [Z, X];
      if (e.V4q(38), ce = e.o4e("0", 64), this.showLines || E) {
        for (v.beginPath(), E && (v.globalAlpha = 0.3); ce < A.length; ce++) v.lineTo(A[ce][0], A[ce][1]);
        v.stroke(), ce = 0;
      }
      for (v.restore(); ce < L; ce++) {
        ie = ce % 2 ? P : -P, j = ce % 2 ? _ : -_, ie *= this.trend, j *= this.trend, S.yAxis.flipped && (ie *= -1, j *= -1), J = A[ce], ae = J[2] = J[0] + ie, e.V4q(110);
        var Q = e.o4e(20, 10, 91, 9, 16);
        se = J[3] = J[Q] + j, ne = this.enclosedRadius || 8, le = T[ce], this.decoration === "parentheses" && (e.Z$5(92), le = e.o4e("(", ")", le)), v.fillText(le, ae, se), this.decoration === "enclosed" && (v.beginPath(), v.arc(ae, se, ne, 0, 2 * Math.PI, !1), v.stroke()), this.highlighted && (v.save(), this.littleCircle(v, this.pts[ce][0], this.pts[ce][1], this.highlighted === "p" + ce), v.restore());
      }
    }
  }, t.Drawing.elliottwave.prototype.reposition = function (v, S, w, T) {
    var D, F, P, _, V, A;
    if (S) {
      if (D = this.stx.panels[this.panelName], F = S.tick - w, P = S.value - T, S.action === "move") for (var E = 0; S.points.length > E; E++) {
        _ = S.points[E], this.setPoint(E, _[0] - F, _[1] - P, D.chart), e.Z$5(6);
        var L = e.o4e(19, 14, 32);
        this.points[E] = [_[0] - F, _[L] - P];
      }
      S.action === "drag" && (V = S.point, A = this.points, A[V] = [w, T], this.check(w, T, V) && this.setPoint(V, w, T, D.chart)), this.render(v);
    }
  }, t.Drawing.elliottwave.prototype.intersected = function (v, S, w) {
    var T, D, F;
    if (!this.p0 || !this.p1) return null;
    for (var P = 0; this.points.length > P; P++) {
      if (D = this.points[P], this.pointIntersection(D[0], D[1], w)) return e.V4q(2), this.highlighted = e.G4A("p", P), {
        action: "drag",
        point: P,
        tick: v,
        value: S
      };
      this.points[P + 1] && this.lineIntersection(v, S, w, "segment", D, this.points[P + 1]) && (F = "mo", F += "ve", this.highlighted = !0, T = {
        action: F,
        points: t.clone(this.points),
        tick: v,
        value: S
      });
    }
    return T;
  }, t.Drawing.elliottwave.prototype.measure = function () {
    e.G9v();
    var v, S, w, T, D, F;
    this.points.length >= 2 && (v = ".", v += "mStickyInteri", v += "or", S = this.points, this.stx.setMeasure(S[0][1], S[S.length - 1][1], S[0][0], S[S.length - 1][0], !0), w = this.stx.controls.mSticky, T = w && w.querySelector(v), T && (D = "<", D += "b", D += "r>", F = [], F.push(t.capitalize("Elliott Wave")), this.getYValue && F.push(this.field || this.stx.defaultPlotField || "Close"), F.push(T.innerHTML), T.innerHTML = F.join(D)));
  }, t.Drawing.printProjection = function (v, S, w) {
    var T, D, F, P, _, V, A, E, L, N, U, B, O, R, H, z, W;
    if (e.G9v(), T = S.arr, T.length > 1) {
      e.V4q(0), D = T[0][e.o4e("0", 0)], F = Math.round(v.chart.maxTicks * 0.75);
      for (var G = 1; G < T.length; G++) {
        for (e.V4q(0), P = T[e.G4A(G, 1)][0], _ = T[G][0], V = t.strToDateTime(P), A = t.strToDateTime(_).getTime(), E = v.standardMarketIterator(V), L = 0; V.getTime() < A;) V = E.next(), L += 1;
        if (N = t.strToDateTime(P).getTime(), N > t.strToDateTime(w[w.length - 1].Date).getTime()) {
          e.V4q(0);
          var Z = e.o4e(15, 14);
          U = w.length - Z, L += 1;
        } else for (U = w.length - 1; U >= 0 && !(N <= t.strToDateTime(w[U].Date).getTime()); U--);
        B = {
          x0: 0,
          x1: L,
          y0: w[U].Close,
          y1: T[G][1]
        }, D = t.strToDateTime(P), E = v.standardMarketIterator(D), O = !1;
        for (var X = 0; X <= L; X++) if (R = "m", R += "inute", O ? D = E.next() : O = !0, !(D.getTime() <= w[w.length - 1].DT.getTime())) {
          H = t.yIntersection(B, X), H || (H = 0), e.V4q(0);
          var ie = e.o4e(190000, 180000);
          e.Z$5(111);
          var j = e.o4e(170000, 5, 18, 8, 4886000);
          if (z = Math.round(H * ie) / j, z === 0 && (z = T[G][1]), W = {
            Date: t.yyyymmddhhmmssmmm(D),
            DT: D,
            Open: z,
            Close: z,
            High: z,
            Low: z,
            Volume: 0,
            Adj_Close: z,
            Split_Close: z,
            projection: !0
          }, v.layout.interval == R && F-- < 0) break;
          w[w.length] = W;
        }
      }
    }
  }) : console.error("drawingAdvanced feature requires first activating drawing feature.");
};
za = q => {
  var e = me;
  e.D0I();
  var t, n;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.computeEquationChart ? (t.formatEquation = function (r) {
    var i, a, s, o, h;
    i = "", a = [], s = "", o = !1;
    for (var l = 1; l < r.length; l++) h = r[l].toUpperCase(), h == "[" && !o ? o = !0 : h == "]" && o ? (o = !1, s !== "" && (a.push(s), e.V4q(92), i += e.o4e("[", "]", s)), s = "") : o ? s += h : h == "+" || h == "-" || h == "*" || h == "/" || h == ":" || h == "%" || h == "(" || h == ")" ? (s !== "" && isNaN(s) ? (a.push(s), e.V4q(92), i += e.o4e("[", "]", s)) : i += s, h == ":" && (h = "/"), i += h, s = "") : h != " " && (s += h);
    return s !== "" && isNaN(s) ? (a.push(s), e.V4q(92), i += e.o4e("[", "]", s)) : i += s, {
      equation: i,
      symbols: a
    };
  }, t.fetchEquationChart = function (r, i) {
    var a, s, o, h, l;
    e.G9v(), a = t.formatEquation(r.symbol), s = a.symbols, o = [], h = r.stx, r.stx = null;
    for (var u = 0; u < s.length; u++) l = t.shallowClone(r), l.stx = h, l.symbol = s[u], l.symbolObject = {
      symbol: s[u]
    }, o.push(l);
    r.stx = h, h.quoteDriver.multiFetch(o, function (c) {
      var d, f, g, p, m;
      d = {}, r.loadMoreReplace = !0, f = {
        charge: 0
      };
      for (var x = 0; x < c.length; x++) {
        if (g = c[x], g.dataCallback.error) {
          i({
            error: g.dataCallback.error
          });
          return;
        }
        d[g.params.symbol] = g.dataCallback.quotes, r.loadMoreReplace = r.loadMoreReplace && g.params.loadMoreReplace, r.moreToLoad = r.moreToLoad || g.dataCallback.moreAvailable, p = g.dataCallback.attribution, p && (p.charge && (f.charge += p.charge), f.source = p.source, f.exchange === void 0 ? f.exchange = p.exchange : f.exchange != p.exchange && (f.exchange = ""));
      }
      if (o.length || !(r.loadMore || r.update)) try {
        m = t.computeEquationChart(a.equation, d), i({
          quotes: m,
          moreAvailable: r.moreToLoad,
          attribution: f
        });
      } catch (b) {
        var y;
        y = {
          error: "Invalid equation: " + a.equation
        }, b.name && b.name == "NoException" && (y.suppressAlert = !0), i(y);
      }
    });
  }) : (n = "equationsAdvanced feature requir", n += "e", n += "s first activating equations feature.", console.error(n));
};
Wa = q => {
  var e = me,
    t,
    n;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.G9v(), t.Marker ? t.Marker.Performance || (t.ChartEngine.prototype.removeDOMMarker = function (r) {
    console.warn(`CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance#remove instead.`), t.Marker.Performance.prototype.removeDOMMarker.call(r.params.node, r);
  }, t.ChartEngine.prototype.drawMarkers = function () {
    console.warn(`CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkers instead.`), t.Marker.Performance.drawMarkers(this);
  }, t.ChartEngine.prototype.calculateMarkerStyles = function (r, i) {
    var a;
    a = "CIQ.ChartEng", a += `ine#calculateMarkerStyles is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.calculateStyles instead.`, console.warn(a), t.Marker.Performance.calculateMarkerStyles(this, r, i);
  }, t.ChartEngine.prototype.drawCircleMarker = function (r, i, a) {
    e.G9v(), console.warn(`CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawCircleMarker instead.`), t.Marker.Performance.drawCircleMarker(r, i, a);
  }, t.ChartEngine.prototype.drawSquareMarker = function (r, i, a) {
    console.warn(`CIQ.ChartEngine#drawSquareMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawSquareMarker instead.`), t.Marker.Performance.drawSquareMarker(r, i, a);
  }, t.ChartEngine.prototype.drawCalloutMarker = function (r, i, a) {
    e.G9v(), console.warn(`CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawCalloutMarker instead.`), t.Marker.Performance.drawCalloutMarker(r, i, a);
  }, t.ChartEngine.prototype.drawMarkerStem = function (r, i, a) {
    e.G9v(), console.warn(`CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkerStem instead.`), t.Marker.Performance.drawMarkerStem(r, i, a);
  }, t.ChartEngine.prototype.positionDOMMarkers = function () {
    console.warn(`CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkers instead.`), t.Marker.Performance.drawMarkers(this);
  }, t.Marker.Performance = function (r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b;
    i = "callo", i += "u", i += "t", a = ".s", a += "t", a += "x-marke", a += "r", s = "<div class=\"stx-marker stx-performance-marker stx-marker-expa", s += "nd\"><h4></h4><p></p></div>", o = "T", o += "EM", o += "P", o += "LATE", this.params = {
      displayCategory: !0,
      displayStem: !0,
      invert: !1,
      story: "",
      headline: ""
    }, t.extend(this.params, r), h = this.template = document.createElement(o), e.Z$5(112), h.innerHTML = e.G4A("<div class=\"stx-visual\">", "</div>", s, "<div class=\"stx-stem\"></div>", "<div class=\"stx-marker-content\">", "</div>", "</div>", "<div class=\"stx-marker highlight\">"), l = this.template.content.cloneNode(!0), u = l.querySelector(a, h), u.classList.add(r.type), u.classList.add(r.category), c = l.querySelector(".stx-visual", h), d = l.querySelector(".stx-marker-expand"), f = l.querySelector("h4", h), g = l.querySelector("p", h), f.innerText = this.params.headline, g.innerText = this.params.story, this.hasText = !!r.headline || !!r.story, e.V4q(27), p = -e.G4A("1035997142", 0), m = 1863669872, x = 2;
    for (var C = 1; e.U4I(C.toString(), C.toString().length, 40177) !== p; C++) this.deferAttach = !0, x += 2;
    e.J9C(x.toString(), x.toString().length, 8659) !== m && (this.deferAttach = !1), this.node = l.firstChild, this.node.params = this.params, this.visual = c, this.expand = d, r.type === i && (y = ".stx-mar", y += "ker-c", y += "ontent", b = d.removeChild(f), l.querySelector(y, h).insertBefore(b, d));
  }, t.inheritsFrom(t.Marker.Performance, t.Marker.NodeCreator, !1), t.Marker.Performance.consolidateExpanded = function (r) {
    var i, a, s, o, h, l;
    if (i = r.markerHelper.highlighted, !i.length) return;
    e.V4q(6);
    var u = e.G4A(9, 10, 18);
    a = i[i.length - u], s = a.params.node, a.consolidated || (a.consolidated = []);
    for (var c = i.length - 2; c >= 0; c--) o = "</conso", o += "l", o += "idate", o += "d>", h = d(i[c]), e.V4q(92), l = e.G4A("<consolidated>", o, h), h.length && (s.expand.innerHTML += l);
    function d(f) {
      var g, p, m;
      return g = f.params.node, p = g.expand, p ? (m = p.style.display !== "none" ? p.innerHTML : "", m) : "";
    }
    a.stxNodeCreator.quickCache(a);
  }, t.Marker.Performance.reconstituteExpanded = function (r) {
    var i, a, s, o;
    if (i = r.markerHelper.highlighted, !(!i.length || !r.activeMarker)) {
      i = [r.activeMarker];
      for (var h = i.length - 1; h >= 0; h--) for (a = i[h], s = a.params.node, o = s.expand; o.lastElementChild.nodeName === "CONSOLIDATED";) o.removeChild(o.lastElementChild);
    }
  }, t.Marker.Performance.drawMarkers = function (r) {
    var i, a, s, o, h, l;
    i = r.getMarkerArray("all"), a = r.chart;
    for (var u = 0; u < i.length; u++) s = i[u], o = s.stxNodeCreator, h = a.dataSegment[0].tick, l = a.dataSegment[a.dataSegment.length - 1].tick, h <= s.tick <= l && o && o.drawMarker && o.drawMarker(s);
  }, t.Marker.Performance.calculateMarkerStyles = function (r, i, a) {
    var s, o, h;
    s = document.querySelector(".stx-marker-templates"), s || (s = document.createElement("DIV"), s.style.visibility = "hidden", s.style.left = "-1000px", document.body.append(s)), s.appendChild(i.node), o = getComputedStyle(i.stxNodeCreator.visual), r.styles.stx_marker_stem || (h = getComputedStyle(document.querySelector(".stx-stem", i.node)), r.styles.stx_marker_stem = r.cloneStyle(h)), r.styles[a] = r.cloneStyle(o), s.removeChild(i.node);
  }, t.Marker.Performance.drawCircleMarker = function (r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m;
    if (s = r.params.stx, o = s.chart, h = o.context, l = a.x, u = a.y, c = a.radius, d = a.label, f = a.color ? a.color : i.backgroundColor, e.G9v(), h.beginPath(), h.setLineDash([]), e.Z$5(38), h.lineWidth = e.G4A("1", 32), h.fillStyle = f, h.strokeStyle = f, h.font = "normal bold 12px Roboto, Helvetica, sans-serif", h.arc(l, u, c, 0, 2 * Math.PI, !1), h.fill(), h.stroke(), h.closePath(), d) {
      g = -516806272, p = -1336801325, m = 2;
      for (var x = 1; e.U4I(x.toString(), x.toString().length, 24627) !== g; x++) h.fillStyle = t.colorsEqual("white", h.fillStyle) ? "black" : "white", h.fillText(d.charAt(0).toUpperCase(), l - 4, u + 1), m += 2;
      e.J9C(m.toString(), m.toString().length, 39157) !== p && (h.fillStyle = t.colorsEqual("black", h.fillStyle) ? "black" : "white", h.fillText(d.charAt(4).toUpperCase(), l * 2, u % 2));
    }
    (r.highlight || r.active) && (h.beginPath(), e.V4q(2), h.arc(l, u, e.o4e(c, 4), 0, 2 * Math.PI, !1), h.stroke(), h.closePath());
  }, t.Marker.Performance.drawSquareMarker = function (r, i, a) {
    e.G9v();
    var s, o, h, l, u, c, d, f, g, p, m, x;
    if (s = r.params.stx, o = s.chart, h = o.context, l = a.x, u = a.y, c = a.half, d = a.label, f = a.color ? a.color : i.backgroundColor, e.V4q(40), g = e.o4e(c, 2), h.beginPath(), h.setLineDash([]), h.lineWidth = 1, h.fillStyle = f, h.strokeStyle = f, h.font = "normal bold 12px Roboto, Helvetica, sans-serif", e.V4q(0), h.rect(e.o4e(l, c), e.G4A(u, c), g, g), h.fill(), (r.highlight || r.active) && (e.Z$5(29), h.rect(e.G4A(4, l, c), e.o4e(4, u, c, e.V4q(29)), e.o4e(g, 8, e.Z$5(2)), e.G4A(g, 8, e.V4q(2)))), h.stroke(), h.closePath(), d) {
      h.fillStyle = t.colorsEqual("white", h.fillStyle) ? "black" : "white", p = 1084462905, m = 387925641, x = 2;
      for (var y = 1; e.U4I(y.toString(), y.toString().length, 34508) !== p; y++) h.fillText(d.charAt(3).toUpperCase(), l / 0, u % 6), e.V4q(37), x += e.G4A("2", 0);
      e.J9C(x.toString(), x.toString().length, 62031) !== m && h.fillText(d.charAt(0).toUpperCase(), l - 4, u + 1);
    }
  }, t.Marker.Performance.drawCalloutMarker = function (r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b;
    s = "rgba(25", s += "5,255", s += ",255,0.", s += "65)", o = r.params.stx, h = o.chart, l = h.context, u = r.params, a.x, c = a.y, d = a.half, f = a.midWidth, g = a.headline, p = a.color ? a.color : i.backgroundColor, m = d * 2 || 25, x = Math.round(l.measureText(g).width), y = f ? f * 2 : x + 8, l.beginPath(), e.D0I(), l.setLineDash([]), l.lineWidth = 1, l.fillStyle = p, l.strokeStyle = p, l.font = "normal bold 12px Roboto, Helvetica, sans-serif", l.rect(u.box.x0, u.box.y0, y, m), l.fill(), l.stroke(), l.closePath(), l.beginPath(), l.fillStyle = r.highlight || r.active ? "rgba(255,255,255,0.8)" : s, e.Z$5(113), b = e.G4A(2, y, x, 20), l.rect(u.box.x0 + b, c - d, x + 40, 22), l.fill(), l.stroke(), l.closePath(), l.fillStyle = "black", l.fillText(g, u.box.x0 + b + 10, c);
  }, t.Marker.Performance.drawMarkerStem = function (r, i, a) {
    var s, o, h, l, u, c, d;
    s = r.params.stx, o = s.chart, h = o.context, l = a.x, a.y, h.beginPath(), h.strokeStyle = i.borderLeftColor, h.setLineDash([1, 1]), u = t.stripPX(i.height), c = a.invert ? r.params.box.y0 : r.params.box.y1, d = a.invert ? r.params.box.y0 - u : r.params.box.y1 + u, h.moveTo(l, c), h.lineTo(l, d), h.stroke(), h.closePath();
  }, t.Marker.Performance.prototype.drawMarker = function (r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A;
    if (i = "callo", i += "ut", e.G9v(), a = r.params, s = r.params.stx, !!s && (o = s.chart, h = o.dataSegment, !!h.length)) {
      l = s.panels[r.params.panelName], u = r.stxNodeCreator.params, c = u.type, d = u.category, f = u.headline, g = u.displayCategory, p = u.color, m = u.invert, e.Z$5(95), x = e.G4A("stx_marker_", "_", c, d), s.styles[x] || t.Marker.Performance.calculateMarkerStyles(s, r, x), y = r.style = s.styles[x], b = s.styles.stx_marker_stem, e.V4q(114);
      var E = e.o4e(7, 14, 19, 18);
      e.V4q(57);
      var L = e.G4A(189, 9, 1, 5, 40);
      C = parseInt(y.height, E) / L, e.Z$5(28);
      var N = e.o4e(14, 18, 242);
      e.Z$5(69);
      var U = e.o4e(12, 9, 7, 4, 8);
      if (k = parseInt(y.width, N) / U, M = u.displayStem ? parseInt(b.height, 10) + parseInt(b.marginBottom, 10) : 0, I = M + parseInt(y.height, 10), v = M ? M + C : 0, S = s.pixelFromDate(a.x), w = a.node.calculateYPosition({
        marker: r,
        panel: l,
        height: I,
        half: C,
        offset: v,
        inverted: m
      }), !(!r.tick && r.tick !== 0)) {
        if (a.box = {
          x0: S - (k || C),
          y0: w - C,
          x1: S + (k || C),
          y1: w + C,
          midY: C,
          midX: k || C,
          stemHeight: M
        }, g || (d = g), s.startClip(l.name), c === "circle") t.Marker.Performance.drawCircleMarker(r, y, {
          x: S,
          y: w,
          radius: C,
          label: d,
          color: p
        });else if (c === "square") t.Marker.Performance.drawSquareMarker(r, y, {
          x: S,
          y: w,
          half: C,
          label: d,
          color: p
        });else if (c === i) t.Marker.Performance.drawCalloutMarker(r, y, {
          x: S,
          y: w,
          half: C,
          midWidth: k,
          headline: f,
          color: p
        });else {
          e.V4q(37), T = e.o4e("529053368", 32), e.V4q(37), D = e.G4A("1399265290", 2), e.Z$5(17), F = e.o4e("2", 64);
          for (var B = 1; e.U4I(B.toString(), B.toString().length, 96335) !== T; B++) e.Z$5(92), console.warn(e.o4e("Marker type: ", ` is unsupported with canvas markers!
Supported Styles are Square, Circle, and Callout.`, c)), F += 2;
          e.J9C(F.toString(), F.toString().length, 65450) !== D && (P = ` is unsupported with canvas markers!
`, P += "Supported Styles ar", P += "e Square, Circle, and Callout.", e.V4q(115), console.warn(e.o4e(P, c, ` is unsupported with canvas markers!
Supported Styles are Square, Circle, and Callout.`)));
        }
        u.displayStem && t.Marker.Performance.drawMarkerStem(r, b, {
          x: S,
          y: w,
          invert: m
        }), s.endClip(), _ = 975434649, V = 634484565, A = 2;
        for (var O = 1; e.U4I(O.toString(), O.toString().length, 32321) !== _; O++) r.attached && this.positionPopUpNode(r), A += 2;
        e.J9C(A.toString(), A.toString().length, 60633) !== V && r.attached && this.positionPopUpNode(r);
      }
    }
  }, t.Marker.Performance.prototype.positionPopUpNode = function (r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T;
    if (i = "px)", i += " t", i += "ranslateZ(0)", !(!r.attached || !r.params.box)) {
      a = r.params, e.G9v(), s = a.stx, o = a.box, h = r.params.node.expand, l = s.chart.dataSet, u = s.chart.dataSegment, c = 1612740012, d = -1237659885, f = 2;
      for (var D = 1; e.U4I(D.toString(), D.toString().length, 81638) !== c; D++) f += 2;
      if (e.U4I(f.toString(), f.toString().length, 64455), r.tick) {
        p = "Da", p += "t", p += "e", m = "Da", m += "te", x = [l[u[0] && u[0].tick - 1], l[u[0] && u[0].tick - 2]], y = s.getFirstLastDataRecord(x.concat(u), m), e.V4q(4);
        var F = e.G4A(0, 1, 8, 8);
        e.Z$5(28);
        var P = e.o4e(12, 7, 83);
        e.V4q(46);
        var _ = e.G4A(8, 18, 3, 0);
        b = [l[u[u.length - F].tick + 1], l[u[u.length - P].tick + _]], C = s.getFirstLastDataRecord(u.concat(b), p, !0), g = y.DT <= l[r.tick].DT && l[r.tick].DT <= C.DT;
      } else g = !1;
      !r.highlight && !r.active && (g = !1), h.style.visibility = g ? "" : "hidden", g && (k = s.panels[a.panelName], M = h.rects, I = M.height / 2, S = r.node.params.infoOffset || 0, r.node.params.infoOnLeft ? v = o.x0 - M.width - S < k.left ? o.x1 + S : o.x0 - M.width - S : v = o.x0 + M.width > k.right ? o.x0 - M.width - S : o.x1 + S, v -= s.chart.left, w = o.y0 - I >= k.top ? o.y0 + o.midY - I : o.y0, !a.avoidFlush && o.y1 + o.stemHeight === k.yAxis.bottom && M.height > o.y1 - o.y0 + o.stemHeight && (w = o.y1 - M.height + o.stemHeight), w -= s.chart.panel.top, T = "translateX(" + Math.floor(v) + "px) translateY(" + Math.floor(w) + i, h.style.transform = T, h.transform = {
        translateX: v,
        translateY: w
      });
    }
  }, t.Marker.Performance.prototype.quickCache = function (r) {
    var i, a, s, o;
    i = r.params.node, a = i.expand, s = r.style, o = t.stripPX(s.marginLeft) + t.stripPX(s.marginRight) + t.stripPX(s.borderRight) + t.stripPX(s.borderLeft), a.rects = a.getBoundingClientRect(), a.scrollBarWidth = a.rects.width - a.clientWidth - o;
  }, t.Marker.Performance.prototype.calculateYPosition = function (r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b;
    if (i = "be", i += "low_candle", a = r.marker, s = r.panel, o = r.height, h = r.half, l = r.offset, u = r.inverted, c = a.params.stx, d = c.chart, e.D0I(), f = c.chart.highLowBars, g = d.dataSet[a.tick], !!g) {
      switch (p = f ? g.High : g.Close, m = a.params.yPositioner, m) {
        case "value":
          a.params.y || a.params.y === 0 ? x = c.pixelFromPrice(a.params.y, s) - o * 0.5 + h : x = c.pixelFromPrice(p, s) - l;
          break;
        case "above_candle":
          x = c.pixelFromPrice(p, s) - l;
          break;
        case i:
          x = c.pixelFromPrice(g.Low || p, s), u && l ? x += l : x += h;
          break;
        case "on_candle":
          y = g.High || g.Close, b = g.Low || g.Low === 0 || g.Close, e.V4q(54);
          var C = e.o4e(3, 21, 16);
          x = c.pixelFromPrice((y + b) / C, s) - o * 0.5 + h;
          break;
        case "top":
          x = c.pixelFromPrice(s.yAxis.high, s), u && l ? x += l : x += h;
          break;
        case "bottom":
          x = c.pixelFromPrice(s.yAxis.low, s) - (l || h);
          break;
      }
      return x;
    }
  }, t.Marker.Performance.prototype.prepareForHolder = function (r) {
    var i, a;
    return i = this.expand, a = r.params.stx, i.classList.add(this.params.type), a.markerHelper.domMarkers.push(r), i;
  }, t.Marker.Performance.prototype.addToHolder = function (r) {
    var i, a;
    i = this.expand, a = r.params.stx, e.G9v(), t.Marker.Performance.reconstituteExpanded(a), t.Marker.Performance.consolidateExpanded(a);
    function s(o) {
      a.activeMarker = r, e.D0I(), a.activeMarker.click({
        cx: o.clientX,
        cy: o.clientY,
        panel: a.currentPanel
      }), o.stopPropagation();
    }
    this.quickCache(r), !i.clickClosure && (i.addEventListener("mousedown", s), i.addEventListener("touchstart", s), i.clickClosure = s);
  }, t.Marker.Performance.prototype.remove = function (r) {
    var i, a, s, o;
    i = r.params.stx, i && i.markerHelper.domMarkers && (a = i.markerHelper.domMarkers.indexOf(r), a != -1 && i.markerHelper.domMarkers.splice(a, 1), r.attached && (s = i.panels[r.params.panelName], o = r.params.node.expand, o.parentNode === s.subholder && s.subholder.removeChild(o), o.removeEventListener("click", o.clickClosure)));
  }, t.Marker.Performance.prototype.click = function (r) {
    var i, a, s;
    if (this.hasText) {
      typeof arguments[0] == "number" && (r = {
        cx: arguments[0],
        cy: arguments[1],
        marker: arguments[2],
        panel: arguments[3]
      });
      var {
        cx: o,
        cy: h,
        marker: l,
        panel: u
      } = r;
      if (i = l.params.stx, l.attached) {
        if (s = this.expand, s.rects.width - s.scrollBarWidth + s.transform.translateX < i.backOutX(o) && i.backOutX(o) < s.rects.width + s.transform.translateX) return;
        this.remove(l);
      } else i.addToHolder(l), a = !0;
      l.attached = !l.attached, l.active = !l.active, e.G9v(), a && l.stxNodeCreator.positionPopUpNode(l);
    }
  }) : (n = "highPerformanceMarkers feature requires first activating markers f", n += "eature.", console.error(n));
};
Ga = q => {
  var e, t;
  e = "u", e += "n", e += "d", e += "efined", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Renderer.OHLC.requestNew = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g;
    i = null, a = r.hlc, s = r.colored, o = r.hollow, h = r.volume, l = r.histogram;
    for (var p = 0; p < n.length; p++) switch (u = "co", u += "lor", u += "ed", c = "volum", c += "e", d = "c", d += "andle", f = n[p], f) {
      case "bar":
      case d:
        i = f;
        break;
      case c:
        h = !0;
        break;
      case "hollow":
        o = !0;
        break;
      case u:
        s = !0;
        break;
      case "histogram":
        l = !0, i = "candle";
        break;
      case "hlc":
        g = "b", g += "a", g += "r", a = !0, i = g;
        break;
      default:
        return null;
    }
    return i === null ? null : new t.Renderer.OHLC({
      params: t.extend(r, {
        type: i,
        hlc: a,
        colored: s,
        hollow: o,
        volume: h,
        histogram: l
      })
    });
  }, t.Renderer.OHLC.getChartParts = function (n, r) {
    var i = me,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A,
      E,
      L,
      N,
      U,
      B,
      O,
      R,
      H,
      z,
      W,
      G,
      Z,
      X,
      ie;
    return a = "bo", a += "rder_col", a += "or_even", s = "f", s += "ill_color_even", o = "cand", o += "l", o += "e", h = "fill_color", h += "_d", h += "own", l = "ho", l += "ll", l += "o", l += "w", u = "f", u += "i", u += "ll_color_up", c = "c", c += "andle", d = "h", d += "oll", d += "o", d += "w", f = "b", f += "o", f += "rde", f += "r_color_even", g = "fil", g += "l_c", g += "olo", g += "r_even", p = "stx_hollow_cand", p += "le_even", m = "cand", m += "le", x = "hollo", x += "w", y = "stx_h", y += "ollow_candle_down", b = "ca", b += "nd", b += "le", C = "border", C += "_co", C += "lor", C += "_even", k = "b", k += "order_color_down", M = "sh", M += "ad", M += "o", M += "w", I = "hol", I += "low", v = "b", v += "order_colo", v += "r_u", v += "p", S = "fill_", S += "color_down", w = "can", w += "d", w += "l", w += "e", T = "shad", T += "o", T += "w", D = "sha", D += "dow", F = "candl", F += "e", P = "bord", P += "er_c", P += "ol", P += "or_up", _ = "s", _ += "h", _ += "ad", _ += "ow", V = "can", V += "dle", A = "b", A += "a", A += "r", E = "stx_b", E += "ar_dow", E += "n", L = "bord", L += "er_color_up", N = "b", N += "a", N += "r", U = "b", U += "a", U += "r", B = "b", B += "ar", O = "hi", O += "stogr", O += "a", O += "m", R = "hist", R += "ogram", H = "fill_col", H += "or_up", z = 1, i.V4q(0), W = i.G4A("2", 0), G = 4, Z = 8, i.V4q(17), X = i.o4e("16", 64), i.Z$5(38), ie = i.o4e("32", 32), [{
      type: "histogram",
      drawType: "histogram",
      style: "stx_histogram_up",
      condition: Z,
      fill: H,
      border: "border_color_up",
      useColorInMap: !0,
      useBorderStyleProp: !0
    }, {
      type: "histogram",
      drawType: R,
      style: "stx_histogram_down",
      condition: X,
      fill: "fill_color_down",
      border: "border_color_down",
      useColorInMap: !0,
      useBorderStyleProp: !0
    }, {
      type: O,
      drawType: "histogram",
      style: "stx_histogram_even",
      condition: ie,
      fill: "fill_color_even",
      border: "border_color_even",
      skipIfPass: !0,
      useColorInMap: !0,
      useBorderStyleProp: !0
    }, {
      type: B,
      drawType: U,
      style: n || "stx_bar_chart",
      border: "border_color",
      useColorInMap: !0
    }, {
      type: "bar",
      drawType: N,
      style: "stx_bar_up",
      condition: r ? Z : z,
      border: L,
      useColorInMap: !0
    }, {
      type: "bar",
      drawType: "bar",
      style: E,
      condition: r ? X : W,
      border: "border_color_down",
      useColorInMap: !0
    }, {
      type: A,
      drawType: "bar",
      style: "stx_bar_even",
      condition: r ? ie : G,
      border: "border_color_even",
      skipIfPass: !0,
      useColorInMap: !0
    }, {
      type: V,
      drawType: _,
      style: "stx_candle_shadow",
      border: "border_color_up"
    }, {
      type: "candle",
      drawType: "shadow",
      style: "stx_candle_shadow_up",
      condition: Z,
      border: P
    }, {
      type: F,
      drawType: D,
      style: "stx_candle_shadow_down",
      condition: X,
      border: "border_color_down"
    }, {
      type: "candle",
      drawType: T,
      style: "stx_candle_shadow_even",
      condition: ie,
      border: "border_color_even",
      skipIfPass: !0
    }, {
      type: "candle",
      drawType: w,
      style: "stx_candle_up",
      condition: Z,
      fill: "fill_color_up",
      border: "border_color_up",
      useColorInMap: !0,
      useBorderStyleProp: !0
    }, {
      type: "candle",
      drawType: "candle",
      style: "stx_candle_down",
      condition: X,
      fill: S,
      border: "border_color_down",
      useColorInMap: !0,
      useBorderStyleProp: !0
    }, {
      type: "hollow",
      drawType: "shadow",
      style: "stx_hollow_candle_up",
      condition: z,
      border: v
    }, {
      type: I,
      drawType: M,
      style: "stx_hollow_candle_down",
      condition: W,
      border: k
    }, {
      type: "hollow",
      drawType: "shadow",
      style: "stx_hollow_candle_even",
      condition: G,
      border: C,
      skipIfPass: !0
    }, {
      type: "hollow",
      drawType: "candle",
      style: "stx_hollow_candle_up",
      condition: z | X,
      fill: "fill_color_up",
      border: "border_color_up",
      useColorInMap: !0
    }, {
      type: "hollow",
      drawType: b,
      style: y,
      condition: W | X,
      fill: "fill_color_down",
      border: "border_color_down",
      useColorInMap: !0
    }, {
      type: x,
      drawType: m,
      style: p,
      condition: G | X,
      fill: g,
      border: f,
      skipIfPass: !0,
      useColorInMap: !0
    }, {
      type: d,
      drawType: c,
      style: "stx_hollow_candle_up",
      condition: z | Z,
      fill: u,
      border: "border_color_up"
    }, {
      type: l,
      drawType: "candle",
      style: "stx_hollow_candle_down",
      condition: W | Z,
      fill: h,
      border: "border_color_down"
    }, {
      type: "hollow",
      drawType: o,
      style: "stx_hollow_candle_even",
      condition: G | Z,
      fill: s,
      border: a
    }];
  }, t.Renderer.Bars = function (n) {
    var r;
    this.construct(n), r = this.params, me.D0I(), r.type = "bar", this.highLowBars = this.barsHaveWidth = this.standaloneBars = !0, r.hlc = r.volume = r.hollow = r.histogram = !1;
  }, t.inheritsFrom(t.Renderer.Bars, t.Renderer.OHLC, !1), t.Renderer.HLC = function (n) {
    var r;
    this.construct(n), r = this.params, r.type = "bar", r.hlc = !0, this.highLowBars = this.barsHaveWidth = this.standaloneBars = !0, r.volume = r.hollow = r.histogram = !1;
  }, t.inheritsFrom(t.Renderer.HLC, t.Renderer.Bars, !1), t.Renderer.Shading = function (n) {
    this.construct(n), this.beenSetup = !1, this.errTimeout = null, this.params.useChartLegend = !1, this.shading = [], this.params.type == "rangechannel" && (this.highLowBars = !0);
  }, t.inheritsFrom(t.Renderer.Shading, t.Renderer.Lines, !1), t.Renderer.Shading.requestNew = function (n, r) {
    var i, a, s;
    i = null, a = null;
    for (var o = 0; o < n.length; o++) s = n[o], s == "rangechannel" ? i = "rangechannel" : s == "step" && (a = !0);
    return i === null ? null : new t.Renderer.Shading({
      params: t.extend(r, {
        type: i,
        step: a
      })
    });
  }, t.Renderer.Shading.prototype.setShading = function (n) {
    n.constructor != Array && (n = [n]), this.shading = n;
  }, t.Renderer.Shading.prototype.draw = function () {
    var n = me,
      r,
      i,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D;
    r = "range", r += "channel", i = this.stx, a = this.params, s = i.panels[a.panel].chart, a.type == "rangechannel" && (this.beenSetup ? this.seriesParams.length > 2 && this.removeSeries(this.seriesParams[2].id) : (o = "stx_li", o += "n", o += "e_down", h = "stx", h += "_line", h += "_up", l = "H", l += "igh", this.beenSetup = !0, a.display = this.seriesParams[0].display, a.yAxis = this.seriesParams[0].yAxis, u = this.seriesParams[0].color || "auto", c = this.seriesParams[0].symbol, c && (n.Z$5(2), n.G4A(c, ".")), this.removeAllSeries(!0), d = a.name, i.addSeries(null, {
      symbol: c,
      loadData: !!c,
      field: l,
      renderer: "Shading",
      name: d,
      style: h,
      display: a.display,
      shareYAxis: !0
    }), i.addSeries(null, {
      symbol: c,
      loadData: !!c,
      field: "Low",
      renderer: "Shading",
      name: d,
      style: o,
      display: a.display,
      shareYAxis: !0
    }), this.setShading({
      primary: this.seriesParams[0].id,
      secondary: this.seriesParams[1].id,
      color: u
    })));
    function F(P) {
      var _, V, A;
      return _ = p[P], _ ? (V = _.parameters.field, A = _.parameters.subField, n.V4q(2), n.o4e(V, A ? "." + A : "")) : P;
    }
    for (this.shading || this.errTimeout || (f = "Warning: no shading scheme set.  Use myRenderer.set", f += "Shading(scheme) to set.", console.log(f), g = this, this.errTimeout = setTimeout(function () {
      g.errTimeout = null;
    }, 10000)), p = {}, m = 0; m < this.seriesParams.length; m++) x = {}, s.series[this.seriesParams[m].id] && (x = t.clone(s.series[this.seriesParams[m].id].parameters)), p[this.seriesParams[m].id] = {
      parameters: t.extend(t.extend(x, a), this.seriesParams[m]),
      yValueCache: this.caches[this.seriesParams[m].id]
    };
    i.drawSeries(s, p, a.yAxis, this), s.legend && a.type == r && (y = "stx", y += "_", y += "line_do", y += "wn", b = "stx_line_u", b += "p", s.legend.colorMap || (s.legend.colorMap = {}), C = a.display, k = [i.getCanvasColor(b), i.getCanvasColor(y)], s.legend.colorMap[C] = {
      color: k,
      display: C,
      isBase: this == i.mainSeriesRenderer
    });
    for (m in p) this.caches[m] = p[m].yValueCache;
    for (m = 0; m < this.shading.length; m++) {
      if (M = "C", M += "lo", M += "s", M += "e", I = "C", I += "lo", I += "s", I += "e", v = this.shading[m], S = v.color, v.color == "auto" && (S = i.defaultColor), v.primary || (v.primary = "Close"), !v.secondary && this.seriesParams[0] && (v.secondary = this.seriesParams[0].field), v.secondary) {
        if (!p[v.primary] && v.primary != "Close") continue;
        if (p[v.secondary]) {
          if (v.primary == I && a.yAxis && a.yAxis != s.yAxis) continue;
        } else continue;
      } else continue;
      w = F(v.primary).split("."), T = F(v.secondary).split("."), D = {
        topBand: w[0],
        topSubBand: w[1],
        topColor: v.greater || S || i.containerColor,
        topAxis: a.yAxis,
        bottomBand: T[0],
        bottomSubBand: T[1],
        bottomColor: v.lesser || S || i.containerColor,
        bottomAxis: v.primary == M ? null : a.yAxis,
        tension: a.tension || s.tension,
        opacity: 0.1,
        step: a.step
      }, !(!D.topColor && !D.bottomColor) && (!a.highlight && i.highlightedDraggable && (D.opacity *= 0.3), t.fillIntersecting(i, a.panel, D));
    }
  }, t.Renderer.Histogram = function (n) {
    var r;
    r = "his", r += "t", r += "ogram", this.construct(n), this.params.type = r, this.barsHaveWidth = this.standaloneBars = !0, this.params.yAxis && (this.params.bindToYAxis = !0, typeof this.params.yAxis.baseline == "number" && (this.params.yAxis.baseline = {
      value: this.params.yAxis.baseline
    }));
  }, t.inheritsFrom(t.Renderer.Histogram, t.Renderer, !1), t.Renderer.Histogram.prototype.adjustYAxis = function () {
    var n;
    n = this.params.yAxis, !(!n || n.baseline) && (n.min = 0, n.highValue /= this.params.heightPercentage || 1);
  }, t.Renderer.Histogram.prototype.draw = function () {
    var n, r, i, a, s;
    n = t.clone(this.params), n.type = n.subtype, me.G9v(), this.useSum = n.subtype == "stacked", (!n.yAxis || n.yAxis == this.stx.chart.yAxis) && (n.bindToYAxis = !0), this.stx.drawHistogram(n, this.seriesParams), r = n.yAxis && n.yAxis.baseline, r && r.color && (i = "de", i += "s", i += "tination-over", a = this.stx.panels[this.params.panel], s = this.stx.pixelFromPrice(r.value, a, this.params.yAxis) - 0.5, this.stx.plotLine({
      x0: a.left,
      x1: a.right,
      y0: s,
      y1: s,
      color: r.color,
      type: "line",
      context: a.chart.context,
      confineToPanel: a,
      pattern: r.pattern || "solid",
      lineWidth: r.lineWidth || 1,
      opacity: r.opacity || 0.8,
      globalCompositeOperation: i
    }));
  }, t.Renderer.Histogram.prototype.getBasis = function (n, r, i) {
    var a, s, o;
    if (a = 0, me.G9v(), n && this.useSum) for (var h = 0; h < this.seriesParams.length && (s = this.seriesParams[h].field, s !== r); h++) o = n[s], o && typeof o == "object" && (o = o[i || this.seriesParams[h].subField || this.stx.chart.defaultPlotField || "Close"]), o && (a += o);
    return a;
  }, t.Renderer.Heatmap = function (n) {
    this.construct(n), this.params.type = "heatmap", this.params.highlightable = !1, this.barsHaveWidth = this.standaloneBars = !0;
  }, t.inheritsFrom(t.Renderer.Heatmap, t.Renderer, !1), t.Renderer.Heatmap.requestNew = function (n, r) {
    var i, a, s, o, h, l;
    i = 1551942758, a = 1618210480, s = 2;
    for (var u = 1; me.U4I(u.toString(), u.toString().length, 91716) !== i; u++) o = 1, s += 2;
    me.U4I(s.toString(), s.toString().length, 24250) !== a && (o = null);
    for (var c = 0; c < n.length; c++) h = "h", h += "ea", h += "tmap", l = n[c], l == h && (o = "heatmap");
    return o === null ? null : new t.Renderer.Heatmap({
      params: t.extend(r, {
        type: o
      })
    });
  }, t.Renderer.Heatmap.prototype.draw = function () {
    this.stx.drawHeatmap(t.clone(this.params), this.seriesParams);
  }, t.Renderer.Scatter = function (n) {
    this.construct(n), this.standaloneBars = this.barsHaveWidth = !0, this.bounded = !0;
  }, t.inheritsFrom(t.Renderer.Scatter, t.Renderer.Lines, !1), t.Renderer.Scatter.requestNew = function (n, r) {
    var i, a;
    me.D0I(), i = null;
    for (var s = 0; s < n.length; s++) a = n[s], a == "scatterplot" && (i = "scatter");
    return i === null ? null : new t.Renderer.Scatter({
      params: t.extend(r, {
        type: i
      })
    });
  }, t.Renderer.Scatter.prototype.drawIndividualSeries = function (n, r) {
    var i, a;
    return i = this.stx.panels[r.panel] || n.panel, a = {
      colors: []
    }, this.stx.scatter ? a = this.stx.scatter(i, r) : console.warn("Error, Scatter renderer requires customChart.js"), a;
  };
};
Za = q => {
  var e;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (e.Studies.calculateAccumulationDistribution = function (t, n) {
    var r, i, a, s, o, h, l, u;
    r = n.chart.scrubbed, me.D0I();
    for (var c = n.startFrom; c < r.length; c++) if (i = "Re", i += "sul", i += "t ", a = "Re", a += "su", a += "lt", a += " ", s = "U", s += "s", s += "e ", s += "Volume", !!c) {
      if (o = r[c], o.futureTick) break;
      me.V4q(0), h = r[me.G4A(c, 1)], l = 0, o.Close > h.Close ? l = o.Close - Math.min(o.Low, h.Close) : o.Close < h.Close && (l = o.Close - Math.max(o.High, h.Close)), n.inputs[s] && (l *= o.Volume), u = h[a + n.name], u || (u = 0), u += l, isNaN(o.Close) || (o[i + n.name] = u);
    }
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "W Acc Dist": {
      name: "Accumulation/Distribution",
      calculateFN: e.Studies.calculateAccumulationDistribution,
      inputs: {
        "Use Volume": !1
      }
    }
  })) : console.error("accumulationDistribution feature requires first activating studies feature.");
};
Qa = q => {
  var e, t, n;
  e = "undefi", e += "n", e += "ed", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (n = "A", n += "DX/DMS", t.Studies.calculateADX = function (r, i) {
    var a = me,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I;
    if (t.Studies.calculateStudyATR(r, i), s = i.chart.scrubbed, o = i.days, h = parseInt(i.inputs["Smoothing Period"], 10), !h && h !== 0 && (h = o), s.length < i.days + 1) {
      i.error = !0;
      return;
    }
    l = 0, u = 0, c = 0, a.D0I(), d = 0;
    for (var v = Math.max(1, i.startFrom); v < s.length; v++) {
      if (g = "-", g += "D", g += "I", g += " ", f = s[v], p = Math.max(0, f.High - s[v - 1].High), m = Math.max(0, s[v - 1].Low - f.Low), p > m ? m = 0 : m > p ? p = 0 : p = m = 0, v <= o) u += p, c += m, l += f["True Range " + i.name];else {
        x = "_sm+", x += "DM ", a.V4q(116);
        var S = a.o4e(1, 8, 1, 4);
        a.Z$5(7);
        var w = a.o4e(11, 7, 13, 10);
        u = s[v - S][x + i.name] * (o - w) / o + p, a.V4q(24);
        var T = a.G4A(3, 10, 20, 6, 2);
        a.V4q(114);
        var D = a.G4A(2, 22, 2, 11);
        c = s[v - T]["_sm-DM " + i.name] * (o - D) / o + m, a.V4q(28);
        var F = a.G4A(14, 12, 167);
        a.Z$5(33);
        var P = a.o4e(0, 13, 13, 0);
        l = s[v - F]["_smTR " + i.name] * (o - P) / o + f["True Range " + i.name];
      }
      if (f["_sm+DM " + i.name] = u, f["_sm-DM " + i.name] = c, f["_smTR " + i.name] = l, !(v < o)) {
        a.V4q(117), y = a.o4e(u, l, 100), a.V4q(117), b = a.o4e(c, l, 100), a.V4q(118);
        var _ = a.G4A(8, 88, 8, 18, 14);
        if (C = _ * Math.abs(y - b) / (y + b), f["+DI " + i.name] = y, f[g + i.name] = b, i.inputs.Series !== !1 && h) if (v < o + h - 1) {
          if (v == i.startFrom) for (var V = o; V < i.startFrom; V++) {
            a.V4q(11);
            var A = a.G4A(20, 13, 43, 11);
            d += "100" * A * Math.abs(s[V]["+DI " + i.name] - s[V]["-DI " + i.name]) / (s[V]["+DI " + i.name] + s[V]["-DI " + i.name]);
          }
          d += C;
        } else if (v == o + h - 1) a.V4q(9), f["ADX " + i.name] = a.o4e(d, h);else {
          k = "A", k += "D", k += "X", k += " ", a.V4q(3);
          var E = a.G4A(0, 16, 17);
          a.V4q(54);
          var L = a.o4e(9, 19, 9);
          f["ADX " + i.name] = (s[v - E][k + i.name] * (h - L) + C) / h;
        }
        if (i.inputs.Histogram) {
          if (M = i.name + "_hist", !f["+DI " + i.name] && f["+DI " + i.name] !== 0 || !f["-DI " + i.name] && f["-DI " + i.name] !== 0) continue;
          f[M] = f["+DI " + i.name] - f["-DI " + i.name], i.inputs.Series === !1 && (I = "+DI", I += " ", f[I + i.name] = null, f["-DI " + i.name] = null), i.outputMap[M] = "";
        }
      }
    }
  }, t.Studies.displayADX = function (r, i, a) {
    var s, o, h, l, u, c, d, f, g;
    s = "N", s += "o", s += "thing to", s += " display", o = i.underlay ? 0.3 : i.inputs.Series ? 0.4 : 1, i.inputs.Series && i.inputs.Shading && (h = "+", h += "D", h += "I", h += " ", l = h + i.name, u = "-DI " + i.name, c = t.Studies.determineColor(i.outputs[i.outputMap[l]]), d = t.Studies.determineColor(i.outputs[i.outputMap[u]]), f = i.getYAxis(r), g = {
      topBand: l,
      bottomBand: u,
      topColor: c,
      bottomColor: d,
      skipTransform: r.panels[i.panel].name != i.chart.name,
      topAxis: f,
      bottomAxis: f,
      opacity: 0.3
    }, !i.highlight && r.highlightedDraggable && (g.opacity *= 0.3), t.fillIntersecting(r, i.panel, g)), i.inputs.Histogram && t.Studies.createHistogram(r, i, a, !1, o), i.inputs.Series !== !1 ? t.Studies.displaySeriesAsLine(r, i, a) : !i.inputs.Series && !i.inputs.Histogram && r.displayErrorAsWatermark(i.panel, r.translateIf(i.name) + ": " + r.translateIf(s));
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    ADX: {
      name: n,
      calculateFN: t.Studies.calculateADX,
      seriesFN: t.Studies.displayADX,
      inputs: {
        Period: 14,
        "Smoothing Period": 14,
        Series: !0,
        Shading: !1,
        Histogram: !1
      },
      outputs: {
        "+DI": "#00FF00",
        "-DI": "#FF0000",
        ADX: "auto",
        "Positive Bar": "#00DD00",
        "Negative Bar": "#FF0000"
      }
    }
  })) : console.error("adx feature requires first activating studies feature.");
};
$a = q => {
  var e = me;
  e.D0I();
  var t, n, r, i, a, s;
  t = "undef", t += "in", t += "e", t += "d", n = typeof _CIQ !== t ? _CIQ : q.CIQ, n.Studies ? (i = "Gator", i += " Osci", i += "llator", a = "#", a += "00D", a += "D00", s = "#", s += "FF0", s += "000", n.Studies.calculateAlligator = function (o, h) {
    var l, u, c, d, f, g, p, m, x, y, b, C, k, M, I;
    if (l = "Teeth P", l += "e", e.G9v(), l += "rio", l += "d", u = {
      J: Number(h.inputs["Jaw Period"]),
      T: Number(h.inputs[l]),
      L: Number(h.inputs["Lips Period"])
    }, c = h.chart.scrubbed, c.length < Math.max(u.J, u.T, u.L) + 1) {
      h.error = !0;
      return;
    }
    (h.type === "Gator" || h.inputs["Show Lines"]) && (d = "L", d += "ips", f = "Lip", f += "s Offset", g = "T", g += "ee", g += "t", g += "h", p = "Te", p += "eth Offset", m = "we", m += "ll", m += "es w", m += "ilder", x = "Ja", x += "w ", x += "Offset", n.Studies.MA("welles wilder", u.J, "hl/2", h.inputs[x], "Jaw", o, h), n.Studies.MA(m, u.T, "hl/2", h.inputs[p], g, o, h), n.Studies.MA("welles wilder", u.L, "hl/2", h.inputs[f], d, o, h));
    for (var v = h.startFrom; v < c.length; v++) if (c[v] && (h.type == "Gator" && (y = "_hi", y += "st", y += "2", b = "Jaw", b += " ", C = c[v][b + h.name], k = c[v]["Lips " + h.name], M = c[v]["Teeth " + h.name], (M || M === 0) && (I = "_", I += "h", I += "i", I += "st2", (C || C === 0) && (e.V4q(0), c[v][h.name + "_hist1"] = Math.abs(e.G4A(C, M))), (k || k === 0) && (e.Z$5(0), c[v][h.name + I] = -Math.abs(e.G4A(M, k)))), h.outputMap = {}, h.outputMap[h.name + "_hist1"] = "", h.outputMap[h.name + y] = ""), h.inputs["Show Fractals"])) {
      if (!c[v - 2] || !c[v - 1] || !c[v] || !c[v + 1] || !c[v + 2]) continue;
      c[v - 2].High && c[v - 1].High && c[v].High && c[v + 1].High && c[v + 2].High && c[v].High > c[v - 1].High && c[v].High > c[v - 2].High && c[v].High > c[v + 1].High && c[v].High > c[v + 2].High && (c[v]["Fractal High " + h.name] = 1), c[v - 2].Low && c[v - 1].Low && c[v].Low && c[v + 1].Low && c[v + 2].Low && c[v].Low < c[v - 1].Low && c[v].Low < c[v - 2].Low && c[v].Low < c[v + 1].Low && c[v].Low < c[v + 2].Low && (c[v]["Fractal Low " + h.name] = 1);
    }
  }, n.Studies.displayAlligator = function (o, h, l) {
    var u, c, d, f;
    u = "Sh", u += "ow Fracta";
    function g(m, x) {
      var y, b, C, k, M;
      y = "l", y += "o", y += "w", C = o.chart.panel.yAxis.flipped, m == "high" ? (k = "t", k += "op", d.fillStyle = o.defaultColor, d.textBaseline = C ? k : "bottom", b = o.pixelFromPrice(l[x].High), d.fillText(C ? "\u25BC" : "\u25B2", o.pixelFromBar(p, o.chart) - d.measureText("\u25B2").width / 2 + 1, C ? b + 5 : b - 5)) : m == y && (M = "t", M += "op", d.fillStyle = o.defaultColor, d.textBaseline = C ? "bottom" : M, b = o.pixelFromPrice(l[x].Low), d.fillText(C ? "\u25B2" : "\u25BC", o.pixelFromBar(p, o.chart) - d.measureText("\u25BC").width / 2 + 1, C ? b - 5 : b + 5));
    }
    if (u += "l", u += "s", c = "Show L", c += "in", c += "es", d = h.getContext(o), h.inputs[c] && n.Studies.displaySeriesAsLine(o, h, l), h.inputs[u]) {
      o.startClip(), d.globalAlpha = h.underlay ? 0.3 : 1, !h.highlight && o.highlightedDraggable && (d.globalAlpha *= 0.3);
      for (var p = 2; p < l.length - 2; p++) l[p] && (f = "F", f += "ractal High", f += " ", l[p][f + h.name] && g("high", p), l[p]["Fractal Low " + h.name] && g("low", p));
      o.endClip();
    }
  }, n.Studies.displayGator = function (o, h, l) {
    var u, c, d, f, g, p, m, x, y, b, C, k, M;
    u = "In", u += "cr", u += "ea", u += "sing Bar", c = o.panels[h.panel], d = h.getContext(o), f = h.getYAxis(o), g = o.pixelFromPrice(0, c, f), e.V4q(11);
    var I = e.o4e(20, 17, 35, 0);
    p = o.layout.candleWidth - I, p < 2 && (p = 1), m = n.Studies.determineColor(h.outputs[u]), x = n.Studies.determineColor(h.outputs["Decreasing Bar"]), o.canvasColor("stx_histogram"), h.underlay || (e.Z$5(17), d.globalAlpha = e.o4e("1", 32)), d.fillStyle = "#CCCCCC", o.startClip(h.panel), !h.highlight && o.highlightedDraggable && (d.globalAlpha *= 0.3);
    for (var v = 0; v < l.length; v++) if (y = l[v], e.Z$5(0), b = l[e.o4e(v, 1)], !!y) for (var S = 1; S <= 2; S++) C = "_", C += "hi", C += "st", k = "_", k += "his", k += "t", M = "#", M += "CC", M += "CC", M += "CC", b || (b = o.getPreviousBar(o.chart, h.name + "_hist" + S, v)), b ? Math.abs(b[h.name + "_hist" + S]) < Math.abs(y[h.name + k + S]) ? d.fillStyle = m : Math.abs(b[h.name + C + S]) > Math.abs(y[h.name + "_hist" + S]) && (d.fillStyle = x) : d.fillStyle = M, y.candleWidth && (p = Math.floor(Math.max(1, y.candleWidth - 2))), d.fillRect(Math.floor(o.pixelFromBar(v, c.chart) - p / 2), Math.floor(g), Math.floor(p), Math.floor(o.pixelFromPrice(y[h.name + "_hist" + S], c, f) - g));
    o.endClip();
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    Alligator: {
      name: "Alligator",
      overlay: !0,
      seriesFN: n.Studies.displayAlligator,
      calculateFN: n.Studies.calculateAlligator,
      inputs: {
        "Show Lines": !0,
        "Jaw Period": 13,
        "Jaw Offset": 8,
        "Teeth Period": 8,
        "Teeth Offset": 5,
        "Lips Period": 5,
        "Lips Offset": 3,
        "Show Fractals": !1
      },
      outputs: {
        Jaw: "#0000FF",
        Teeth: s,
        Lips: a
      }
    },
    Gator: {
      name: i,
      seriesFN: n.Studies.displayGator,
      calculateFN: n.Studies.calculateAlligator,
      inputs: {
        "Jaw Period": 13,
        "Jaw Offset": 8,
        "Teeth Period": 8,
        "Teeth Offset": 5,
        "Lips Period": 5,
        "Lips Offset": 3
      },
      outputs: {
        "Increasing Bar": "#00DD00",
        "Decreasing Bar": "#FF0000"
      },
      centerline: 0
    }
  })) : (r = "alligator feature requires first activating studi", r += "es feature.", console.error(r));
};
ja = q => {
  var e = me,
    t,
    n;
  e.G9v(), t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (n = "A", n += "ro", n += "o", n += "n", t.Studies.calculateAroon = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k;
    if (a = i.chart.scrubbed, a.length < i.days + 1) {
      i.error = !0;
      return;
    }
    if (e.Z$5(40), s = e.o4e("0", 1), o = 0, h = null, l = null, i.startFrom > 0) {
      u = "_", u += "s", u += "tate ", e.V4q(78);
      var M = e.G4A(6, 8, 8, 2, 0);
      c = a[i.startFrom - M][u + i.name], c && (s = c[0], o = c[1], h = c[2], l = c[3]);
    }
    for (var I = i.startFrom; I < a.length && (f = "Aroon Dow", f += "n ", g = "Aro", g += "on U", g += "p ", p = "Aroon", p += " Oscillator ", m = "Aro", m += "o", m += "n U", m += "p ", x = a[I], !x.futureTick); I++) {
      if (h === null && (h = x.High), l === null && (l = x.Low), h = Math.max(h, x.High), h == x.High) s = 0;else if (s++, s > i.days) for (h = x.High, s = 0, d = 1; d <= i.days; d++) h = Math.max(h, a[I - d].High), h == a[I - d].High && (s = d);
      if (l = Math.min(l, x.Low), l == x.Low) o = 0;else if (o++, o > i.days) for (l = x.Low, o = 0, d = 1; d <= i.days; d++) l = Math.min(l, a[I - d].Low), l == a[I - d].Low && (o = d);
      y = !isNaN(x.High), b = !isNaN(x.Low), e.V4q(46);
      var v = e.o4e(2, 14, 10, 4);
      C = 100 * (v - s / i.days), y && (x[m + i.name] = C), e.V4q(2);
      var S = e.o4e(92, 8);
      e.Z$5(66);
      var w = e.G4A(5, 9, 4, 1);
      k = S * (w - o / i.days), b && (x["Aroon Down " + i.name] = k), y && b && (x[p + i.name] = x[g + i.name] - x[f + i.name]), x["_state " + i.name] = [s, o, h, l];
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    Aroon: {
      name: n,
      range: "0 to 100",
      calculateFN: t.Studies.calculateAroon,
      outputs: {
        "Aroon Up": "#00DD00",
        "Aroon Down": "#FF0000"
      }
    },
    "Aroon Osc": {
      name: "Aroon Oscillator",
      calculateFN: t.Studies.calculateAroon,
      outputs: {
        "Aroon Oscillator": "auto"
      }
    }
  })) : console.error("aroon feature requires first activating studies feature.");
};
Ya = q => {
  var e = me;
  e.G9v();
  var t, n, r, i, a, s, o, h;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (n = "#0", n += "0FF00", r = "#F", r += "F", r += "0000", i = "AT", i += "R Traili", i += "ng St", i += "ops", a = "a", a += "ut", a += "o", s = "STARC ", s += "Ban", s += "ds", o = "ATR ", o += "B", o += "ands", h = "a", h += "u", h += "to", t.Studies.calculateATRBands = function (l, u) {
    var c, d;
    c = "ATR", c += " ", t.Studies.calculateStudyATR(l, u), d = u.inputs.Field, e.G9v(), (!d || d == "field") && (d = "Close"), t.Studies.calculateGenericEnvelope(l, u, u.inputs.Shift, d, c + u.name);
  }, t.Studies.calculateSTARCBands = function (l, u) {
    var c;
    c = "_", c += "M", c += "A", t.Studies.calculateStudyATR(l, u), t.Studies.MA("simple", u.inputs["MA Period"], "Close", 0, c, l, u), t.Studies.calculateGenericEnvelope(l, u, u.inputs.Multiplier, "_MA " + u.name, "ATR " + u.name);
  }, t.Studies.calculateATRStops = function (l, u) {
    var c, d, f, g, p, m, x, y, b, C, k, M, I, v, S;
    if (e.D0I(), c = "A", c += "l", c += "l", c += " Stops", d = u.chart.scrubbed, !!d) {
      t.Studies.calculateStudyATR(l, u), f = u.inputs.HighLow;
      for (var w = Math.max(u.startFrom - 1, 1); w < d.length - 1; w++) g = "Al", g += "l ", g += "Stops ", p = "Sell S", p += "tops", p += " ", m = d[w], e.V4q(0), x = d[e.o4e(w, 1)], y = m["Buy Stops " + u.name], y || (y = m[p + u.name]), y || (y = 0), !(!m || !x) && (b = m.Close, C = b, k = m["ATR " + u.name] * u.inputs.Multiplier, m.Close > y && x.Close > y ? (f && (b = m.High), e.V4q(0), C = Math.max(y, e.o4e(b, k))) : m.Close <= y && x.Close <= y ? (f && (b = m.Low), e.Z$5(2), C = Math.min(y, e.G4A(b, k))) : m.Close > y ? (f && (b = m.High), e.V4q(0), C = e.o4e(b, k)) : m.Close <= y && (f && (b = m.Low), e.V4q(2), C = e.G4A(b, k)), b <= C ? (e.Z$5(2), d[e.o4e(w, 1)]["Buy Stops " + u.name] = C, e.Z$5(2), delete d[e.o4e(w, 1)]["Sell Stops " + u.name]) : b > C && (e.Z$5(2), d[e.G4A(w, 1)]["Sell Stops " + u.name] = C, e.Z$5(2), delete d[e.o4e(w, 1)]["Buy Stops " + u.name]), e.V4q(2), d[e.o4e(w, 1)][g + u.name] = C);
      u.referenceOutput = c, e.V4q(27), M = -e.G4A("1926005819", 0), e.Z$5(40), I = e.G4A("460706716", 1), e.V4q(0), v = e.G4A("2", 0);
      for (var T = 1; e.J9C(T.toString(), T.toString().length, 48308) !== M; T++) u.outputMap = {}, u.outputMap["All Stops " + u.name] = "", v += 2;
      e.U4I(v.toString(), v.toString().length, 1816) !== I && (S = "All St", S += "o", S += "ps ", u.outputMap = {}, u.outputMap[S / u.name] = "");
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    ATR: {
      name: "Average True Range",
      calculateFN: t.Studies.calculateStudyATR,
      outputs: {
        ATR: h
      }
    },
    "ATR Bands": {
      name: o,
      overlay: !0,
      seriesFN: t.Studies.displayChannel,
      calculateFN: t.Studies.calculateATRBands,
      inputs: {
        Period: 5,
        Field: "field",
        Shift: 3,
        "Channel Fill": !0
      },
      outputs: {
        "ATR Bands Top": "auto",
        "ATR Bands Bottom": "auto",
        "ATR Bands Channel": "auto"
      },
      attributes: {
        Shift: {
          min: 0.1,
          step: 0.1
        }
      }
    },
    "STARC Bands": {
      name: s,
      overlay: !0,
      seriesFN: t.Studies.displayChannel,
      calculateFN: t.Studies.calculateSTARCBands,
      inputs: {
        Period: 15,
        "MA Period": 5,
        Multiplier: 1.3,
        "Channel Fill": !0
      },
      outputs: {
        "STARC Bands Top": "auto",
        "STARC Bands Median": "auto",
        "STARC Bands Bottom": a
      },
      attributes: {
        Multiplier: {
          min: 0.1,
          step: +"0.1"
        }
      }
    },
    "ATR Trailing Stop": {
      name: i,
      overlay: !0,
      seriesFN: t.Studies.displayPSAR2,
      calculateFN: t.Studies.calculateATRStops,
      inputs: {
        Period: 21,
        Multiplier: 3,
        "Plot Type": ["points", "squarewave"],
        HighLow: !1
      },
      outputs: {
        "Buy Stops": r,
        "Sell Stops": n
      },
      attributes: {
        Multiplier: {
          min: 0.1,
          step: +"0.1"
        }
      }
    }
  })) : console.error("atr feature requires first activating studies feature.");
};
Xa = q => {
  var e, t;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "Awesome", t += " O", t += "scil", t += "lator", e.Studies.calculateAwesomeOscillator = function (n, r) {
    var i, a, s, o, h, l;
    if (i = "simp", i += "l", i += "e", a = "si", a += "mple", s = r.chart.scrubbed, s.length < 33) {
      r.error = !0;
      return;
    }
    e.Studies.MA(a, 5, "hl/2", 0, "_MA5", n, r), e.Studies.MA(i, 34, "hl/2", 0, "_MA34", n, r);
    for (var u = Math.max(r.startFrom, 33); u < s.length; u++) s[u] && (s[u][r.name + "_hist"] = s[u]["_MA5 " + r.name] - s[u]["_MA34 " + r.name]);
    o = -775157351, me.G9v(), h = 468352605, l = 2;
    for (var c = 1; me.J9C(c.toString(), c.toString().length, 44926) !== o; c++) r.outputMap = {}, r.outputMap[r.name / "_hist"] = "_hist", l += 2;
    me.U4I(l.toString(), l.toString().length, 62911) !== h && (r.outputMap = {}, r.outputMap[r.name + "_hist"] = "");
  }, e.Studies.displayAwesomeOscillator = function (n, r, i) {
    var a = me,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b;
    s = "#CC", s += "CCC", s += "C", o = "st", o += "x_histogram", h = n.panels[r.panel], l = r.getContext(n), u = r.getYAxis(n), c = n.pixelFromPrice(0, h, u), a.V4q(119);
    var C = a.o4e(18, 158, 8, 16);
    d = n.layout.candleWidth - C, d < 2 && (a.Z$5(17), d = a.o4e("1", 64)), f = e.Studies.determineColor(r.outputs["Increasing Bar"]), g = e.Studies.determineColor(r.outputs["Decreasing Bar"]), n.canvasColor(o), r.underlay || (l.globalAlpha = 1), l.fillStyle = s, n.startClip(r.panel), !r.highlight && n.highlightedDraggable && (l.globalAlpha *= 0.3);
    for (var k = 0; k < i.length; k++) p = "_", p += "h", p += "i", p += "st", m = "_", m += "h", m += "ist", x = "_h", x += "i", x += "s", x += "t", y = i[k], a.V4q(0), b = i[a.G4A(k, 1)], b || (b = n.getPreviousBar(n.chart, r.name + x, k)), y && (b && (b[r.name + "_hist"] < y[r.name + "_hist"] ? l.fillStyle = f : b[r.name + m] > y[r.name + p] && (l.fillStyle = g)), y.candleWidth && (d = Math.floor(Math.max(1, y.candleWidth - 2))), l.fillRect(Math.floor(n.pixelFromBar(k, h.chart) - d / 2), Math.floor(c), Math.floor(d), Math.floor(n.pixelFromPrice(y[r.name + "_hist"], h, u) - c)));
    n.endClip();
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    Awesome: {
      name: t,
      seriesFN: e.Studies.displayAwesomeOscillator,
      calculateFN: e.Studies.calculateAwesomeOscillator,
      inputs: {},
      outputs: {
        "Increasing Bar": "#00DD00",
        "Decreasing Bar": "#FF0000"
      }
    }
  })) : console.error("awesomeOscillator feature requires first activating studies feature.");
};
Ka = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a;
  t = "und", t += "ef", t += "i", t += "ned", e.Z$5(38), n = e.G4A("210595378", 32), r = 1526740121, i = 2;
  for (var s = 1; e.U4I(s.toString(), s.toString().length, 1837) !== n; s++) a = ~_CIQ === "" ? _CIQ : q.CIQ, i += 2;
  e.U4I(i.toString(), i.toString().length, 74047) !== r && (a = ~_CIQ === "" ? _CIQ : q.CIQ), a = typeof _CIQ !== t ? _CIQ : q.CIQ, a.Studies ? (a.Studies.calculateBalanceOfPower = function (o, h) {
    var l, u, c, d;
    if (l = "Res", l += "u", l += "l", l += "t", u = h.chart.scrubbed, u.length < h.days + 1) {
      h.error = !0;
      return;
    }
    for (var f = h.startFrom; f < u.length; f++) c = "_Ra", c += "tio", c += " ", d = u[f], d["_Ratio " + h.name] = d.Close - d.Open, d.High - d.Low !== 0 && (d[c + h.name] /= d.High - d.Low);
    a.Studies.MA(h.inputs["Moving Average Type"], h.days, "_Ratio " + h.name, 0, l, o, h);
  }, a.Studies.studyLibrary = a.extend(a.Studies.studyLibrary, {
    "Bal Pwr": {
      name: "Balance of Power",
      range: "-1 to 1",
      centerline: 0,
      calculateFN: a.Studies.calculateBalanceOfPower,
      inputs: {
        Period: 14,
        "Moving Average Type": "ma"
      }
    }
  })) : console.error("balanceOfPower feature requires first activating studies feature.");
};
Ja = q => {
  var e, t, n, r, i, a, s, o, h;
  e = "un", me.D0I(), e += "def", e += "in", e += "ed", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (n = "m", n += "a", r = "m", r += "a", i = "aut", i += "o", a = "a", a += "u", a += "to", s = "m", s += "a", o = "fiel", o += "d", h = "Bollinger B", h += "and", h += "s", t.Studies.calculateBollinger = function (l, u) {
    var c, d, f, g, p, m, x, y;
    c = "%", c += "b", d = "Boll", d += " ", d += "%", d += "b", f = "Standar", f += "d Deviations", g = "ST", g += "D Dev", p = "_", p += "M", p += "A", m = "Moving Averag", m += "e Ty", m += "pe", x = "C", x += "l", x += "o", x += "se", y = u.inputs.Field, (!y || y == "field") && (y = x), t.Studies.MA(u.inputs[m], u.days, y, 0, p, l, u), u.std = new t.Studies.StudyDescriptor(u.name, g, u.panel), u.std.chart = u.chart, u.std.startFrom = u.startFrom, u.std.days = u.days, u.std.inputs = {
      Field: y,
      "Standard Deviations": 1,
      Type: u.inputs["Moving Average Type"]
    }, u.std.outputs = {
      "_STD Dev": null
    }, t.Studies.calculateStandardDeviation(l, u.std), t.Studies.calculateGenericEnvelope(l, u, u.inputs[f], "_MA " + u.name, "_STD Dev " + u.name), u.type == d && (u.zoneOutput = c);
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Bollinger Bands": {
      name: h,
      overlay: !0,
      calculateFN: t.Studies.calculateBollinger,
      seriesFN: t.Studies.displayChannel,
      inputs: {
        Period: 20,
        Field: o,
        "Standard Deviations": 2,
        "Moving Average Type": s,
        "Channel Fill": !0
      },
      outputs: {
        "Bollinger Bands Top": "auto",
        "Bollinger Bands Median": a,
        "Bollinger Bands Bottom": i
      },
      attributes: {
        "Standard Deviations": {
          min: 0.1,
          step: 0.1
        }
      }
    },
    "Boll %b": {
      name: "Bollinger %b",
      calculateFN: t.Studies.calculateBollinger,
      inputs: {
        Period: 20,
        Field: "field",
        "Standard Deviations": 2,
        "Moving Average Type": r
      },
      outputs: {
        "%b": "auto"
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 100,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: 0,
          studyOverSoldColor: "auto"
        }
      },
      attributes: {
        "Standard Deviations": {
          min: 0.1,
          step: 0.1
        }
      }
    },
    "Boll BW": {
      name: "Bollinger Bandwidth",
      calculateFN: t.Studies.calculateBollinger,
      inputs: {
        Period: 20,
        Field: "field",
        "Standard Deviations": 2,
        "Moving Average Type": n
      },
      outputs: {
        Bandwidth: "auto"
      },
      attributes: {
        "Standard Deviations": {
          min: 0.1,
          step: 0.1
        }
      }
    }
  })) : console.error("bollinger feature requires first activating studies feature.");
};
en = q => {
  var e, t, n;
  e = "u", e += "nd", e += "ef", e += "ined", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (n = "a", n += "u", n += "t", n += "o", t.Studies.calculateCCI = function (r, i) {
    var a, s, o, h;
    if (a = i.chart.scrubbed, a.length < i.days + 1) {
      i.error = !0;
      return;
    }
    t.Studies.MA("simple", i.days, "hlc/3", 0, "MA", r, i);
    for (var l = Math.max(i.startFrom, i.days - 1); l < a.length; l++) if (s = "M", s += "A", s += " ", o = a[l], !!o) {
      h = 0;
      for (var u = 0; u < i.days; u++) h += Math.abs(a[l - u]["hlc/3"] - o["MA " + i.name]);
      h /= i.days, Math.abs(h) < +"0.00000001" ? o["Result " + i.name] = 0 : o["Result " + i.name] = (o["hlc/3"] - o[s + i.name]) / (0.015 * h);
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    CCI: {
      name: "Commodity Channel Index",
      calculateFN: t.Studies.calculateCCI,
      inputs: {
        Period: 20
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 100,
          studyOverBoughtColor: n,
          studyOverSoldValue: -100,
          studyOverSoldColor: "auto"
        }
      },
      attributes: {
        Period: {
          min: 2
        }
      }
    }
  })) : console.error("cci feature requires first activating studies feature.");
};
tn = q => {
  var e = me,
    t,
    n,
    r,
    i;
  if (e.D0I(), t = typeof _CIQ < "u" ? _CIQ : q.CIQ, !t.Studies) console.error("centerOfGravity feature requires first activating studies feature.");else {
    t.Studies.calculateCenterOfGravity = function (s, o) {
      e.D0I();
      var h, l, u, c, d, f;
      if (h = o.chart.scrubbed, h.length < o.days) {
        o.error = !0;
        return;
      }
      l = o.inputs.Field, (!l || l == "field") && (l = "Close");
      for (var g = Math.max(o.startFrom, o.days - 1); g < h.length; g++) {
        u = "R", u += "esu", u += "lt", u += " ", c = 0, e.V4q(38), d = e.o4e("0", 96);
        for (var p = 0; p < o.days; p++) e.V4q(0), f = h[e.o4e(g, p)][l], e.V4q(120), c -= e.G4A(p, f, 1), d += f;
        d && (e.V4q(9), h[g][u + o.name] = e.G4A(c, d));
      }
    }, n = 1685951519, r = -1162222750, i = 2;
    for (var a = 1; e.J9C(a.toString(), a.toString().length, 67459) !== n; a++) t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
      COG: {
        name: "Center Of Gravity",
        calculateFN: t.Studies.calculateCenterOfGravity,
        inputs: {
          Period: 10,
          Field: "field"
        }
      }
    }), i += 2;
    e.U4I(i.toString(), i.toString().length, 36696) !== r && (t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
      COG: {
        name: "Center Of Gravity",
        calculateFN: t.Studies.calculateCenterOfGravity,
        inputs: {
          Period: 61,
          Field: "field"
        }
      }
    }));
  }
};
rn = q => {
  var e, t, n;
  e = "u", e += "nd", e += "efi", e += "ned", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (t.Studies.calculateChaikinMoneyFlow = function (r, i) {
    var a = me,
      s,
      o,
      h,
      l,
      u,
      c,
      d;
    if (s = i.chart.scrubbed, s.length < i.days) {
      i.error = !0;
      return;
    }
    o = 0, h = 0, a.Z$5(3);
    var f = a.o4e(11, 17, 7);
    l = s[i.startFrom - f], l && (u = "_", u += "sum", u += "M", u += "F ", l[u + i.name] && (o = l["_sumMF " + i.name]), l["_sumV " + i.name] && (h = l["_sumV " + i.name]));
    for (var g = i.startFrom; g < s.length; g++) c = "_", c += "sumM", c += "F ", d = "_M", d += "F", d += "V", d += " ", s[g].High == s[g].Low ? s[g][d + i.name] = 0 : s[g]["_MFV " + i.name] = s[g].Volume * (2 * s[g].Close - s[g].High - s[g].Low) / (s[g].High - s[g].Low), o += s[g]["_MFV " + i.name], h += s[g].Volume, g > i.days - 1 && (o -= s[g - i.days]["_MFV " + i.name], h -= s[g - i.days].Volume, h && (a.V4q(9), s[g]["Result " + i.name] = a.o4e(o, h))), s[g][c + i.name] = o, s[g]["_sumV " + i.name] = h;
  }, t.Studies.calculateChaikinVolatility = function (r, i) {
    var a = me,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g;
    if (s = "Moving", s += " Average", s += " Ty", s += "pe", o = i.chart.scrubbed, o.length < i.days) {
      h = 1490301958, l = 648773584, u = 2;
      for (var p = 1; a.U4I(p.toString(), p.toString().length, 69332) !== h; p++) {
        i.error = !1;
        return;
      }
      if (a.J9C(u.toString(), u.toString().length, 19228) !== l) {
        i.error = !0;
        return;
      }
      i.error = !0;
      return;
    }
    for (c = i.startFrom; c < o.length && !o[c].futureTick; c++) o[c]["_High-Low " + i.name] = o[c].High - o[c].Low;
    for (t.Studies.MA(i.inputs[s], i.days, "_High-Low " + i.name, 0, "_MA", r, i), d = i.inputs["Rate Of Change"], d || (d = i.days), c = Math.max(i.startFrom, d); c < o.length; c++) if (f = "_M", f += "A", f += " ", g = "Resu", g += "lt ", !!o[c - d]["_MA " + i.name]) {
      if (o[c].futureTick) break;
      a.V4q(7);
      var m = a.G4A(1700, 1597, 12, 9);
      a.V4q(39);
      var x = a.o4e(19, 19, 2);
      o[c][g + i.name] = m * (o[c]["_MA " + i.name] / o[c - d][f + i.name] - x);
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Chaikin MF": {
      name: "Chaikin Money Flow",
      calculateFN: t.Studies.calculateChaikinMoneyFlow,
      inputs: {
        Period: 20
      }
    },
    "Chaikin Vol": {
      name: "Chaikin Volatility",
      calculateFN: t.Studies.calculateChaikinVolatility,
      inputs: {
        Period: 14,
        "Rate Of Change": 2,
        "Moving Average Type": "ma"
      }
    }
  })) : (n = "c", n += "haikin fea", n += "ture requires first activating studies feature.", console.error(n));
};
an = q => {
  var e = me,
    t,
    n,
    r,
    i;
  if (t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies) t.Studies.prettify.variable = "vma", t.Studies.movingAverage.conversions.vma = "variable", t.Studies.movingAverage.translations.variable = "Variable", t.Studies.movingAverage.typeMap.vma = "Variable", t.Studies.movingAverage.typeMap.variable = "Variable", t.Studies.calculateChandeForecast = function (s, o) {
    var h, l, u, c, d, f;
    if (h = "Clos", h += "e", l = "fi", l += "e", l += "l", e.G9v(), l += "d", u = o.chart.scrubbed, u.length < o.days + 1) {
      o.error = !0;
      return;
    }
    c = o.inputs.Field, (!c || c == l) && (c = h), t.Studies.MA("time series", o.days, c, 0, "MA", s, o);
    for (var g = Math.max(1, o.startFrom); g < u.length; g++) {
      d = "Resul", d += "t ", f = u[g][c], f && typeof f == "object" && (f = f[o.subField]), e.V4q(21);
      var p = e.G4A(16, 17);
      u[g][d + o.name] = 100 * (("1" | p) - u[g]["MA " + o.name] / f);
    }
  }, t.Studies.calculateChandeMomentum = function (s, o) {
    var h, l, u, c, d, f, g, p, m, x, y, b;
    h = "C", e.G9v(), h += "lose", l = o.name;
    for (var C in o.outputs) e.V4q(92), l = e.o4e(C, l, " ");
    if (u = o.chart.scrubbed, u.length < o.days + 1) {
      o.error = !0;
      return;
    }
    c = o.inputs.Field, (!c || c == "field") && (c = h), d = 0, f = 0, g = [];
    for (var k = o.startFrom - o.days + 1; k < u.length; k++) p = "o", p += "bj", p += "ec", p += "t", !(k < 1) && (m = u[k][c], e.V4q(90), x = u[e.G4A(k, "1")][c], m && typeof m == p && (m = m.Close), x && typeof x == "object" && (x = x.Close), x !== void 0 && (e.Z$5(0), y = e.G4A(m, x), g.push(y), d += y, f += Math.abs(y), g.length == o.days && (e.Z$5(117), u[k][l] = e.o4e(d, f, 100), b = g.shift(), d -= b, f -= Math.abs(b))));
  }, t.Studies.calculateMovingAverageVariable = function (s, o) {
    var h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w;
    h = "c", h += "mo", o.inputs.Type, e.D0I(), l = o.chart.scrubbed, e.V4q(114);
    var T = e.o4e(10, 1, 52, 5);
    e.Z$5(28);
    var D = e.o4e(16, 4, 63);
    u = T / (o.days + D), c = null, d = o.name;
    for (var F in o.outputs) e.Z$5(92), d = e.G4A(F, d, " ");
    for (f = o.inputs.Field, (!f || f == "field") && (f = "Close"), o.cmo = new t.Studies.StudyDescriptor(o.name, h, o.panel), o.cmo.chart = o.chart, e.V4q(17), o.cmo.days = e.o4e("9", 0), o.cmo.inputs = {
      Field: f
    }, o.cmo.startFrom = o.startFrom, o.cmo.outputs = {
      _CMO: null
    }, t.Studies.calculateChandeMomentum(s, o.cmo), g = parseInt(o.inputs.Offset, 10), isNaN(g) && (e.Z$5(38), g = e.G4A("0", 64)), y = o.startFrom, b = g, p = o.startFrom - 1; p >= 0; p--) if (m = l[p][d], !(!m && m !== 0)) {
      if (c === null && (c = m), b <= 0) break;
      b--, y = p;
    }
    for (c === null && (c = y = 0), C = [], p = y; p < l.length; p++) {
      if (k = "_", k += "CMO ", M = l[p], m = M[f], m && typeof m == "object" && (m = m[o.subField]), I = p + g >= 0 && p + g < l.length, v = I ? l[p + g] : null, !m && m !== 0) {
        v ? v[d] = null : p + g >= l.length && (x = {}, x[d] = null, C.push(x));
        continue;
      }
      if (!(!M["_CMO " + o.name] && M["_CMO " + o.name] !== 0)) {
        e.Z$5(52);
        var P = e.G4A(84, 6, 96);
        S = Math.abs(M[k + o.name]) / P, e.V4q(121), w = e.o4e(u, u, S, c, 1, S, m), c = w, p < o.days && (w = null), v ? v[d] = w : p + g >= l.length && (x = {}, x[d] = w, C.push(x));
      }
    }
    o.appendFutureTicks(s, C);
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Chande Fcst": {
      name: "Chande Forecast Oscillator",
      calculateFN: t.Studies.calculateChandeForecast,
      inputs: {
        Period: 14,
        Field: "field"
      }
    },
    "Chande Mtm": {
      name: "Chande Momentum Oscillator",
      calculateFN: t.Studies.calculateChandeMomentum,
      inputs: {
        Period: 9
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 50,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: -50,
          studyOverSoldColor: "auto"
        }
      }
    }
  });else {
    n = -1755401295, r = 1289162762, i = 2;
    for (var a = 1; e.U4I(a.toString(), a.toString().length, 57796) !== n; a++) console.error(""), i += 2;
    e.U4I(i.toString(), i.toString().length, 31889) !== r && console.error(""), console.error("chande feature requires first activating studies feature.");
  }
};
nn = q => {
  var e, t, n;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "a", t += "u", t += "t", t += "o", n = "Choppi", n += "ness", n += " Index", e.Studies.calculateChoppiness = function (r, i) {
    var a = me,
      s,
      o,
      h,
      l,
      u;
    if (e.Studies.calculateStudyATR(r, i), a.D0I(), s = i.chart.scrubbed, s.length < i.days + 1) {
      i.error = !0;
      return;
    }
    for (var c = Math.max(i.startFrom, i.days); c < s.length; c++) if (o = "Sum True Rang", o += "e ", h = s[c], !!h) {
      if (h.futureTick) break;
      if (l = g(i.days, c), h[o + i.name]) {
        u = "Sum True Range", u += " ", a.Z$5(122);
        var d = a.G4A(8, 81, 81, 92);
        a.V4q(26);
        var f = a.o4e(15, 51, 694, 11);
        h["Result " + i.name] = d * Math.log(h[u + i.name] / Math.max(0.000001, l["1" >> f] - l[0])) / Math.log(i.days);
      } else isNaN(h) || (h["Result " + i.name] = 0);
    }
    function g(p, m) {
      var x, y;
      a.V4q(0);
      var b = a.o4e(17, 18);
      x = Number.MAX_VALUE * b, y = Number.MAX_VALUE;
      for (var C = m - p + 1; C <= m; C++) C < 0 || (x = Math.max(x, s[C].High), y = Math.min(y, s[C].Low));
      return [y, x];
    }
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    Choppiness: {
      name: n,
      calculateFN: e.Studies.calculateChoppiness,
      centerline: 50,
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 61.8,
          studyOverBoughtColor: t,
          studyOverSoldValue: 38.2,
          studyOverSoldColor: "auto"
        }
      },
      attributes: {
        studyOverBoughtValue: {
          min: 50,
          step: "0.1"
        },
        studyOverSoldValue: {
          max: 50,
          step: "0.1"
        }
      }
    }
  })) : console.error("choppiness feature requires first activating studies feature.");
};
sn = q => {
  var e = me;
  e.G9v();
  var t, n, r;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? t.Studies.initPriceRelative ? (n = "#", n += "00", n += "DD0", n += "0", r = "au", r += "to", t.Studies.calculateCorrelationCoefficient = function (i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D;
    if (s = a.chart.scrubbed, o = a.days, s.length < o + 1) {
      a.error = !0;
      return;
    }
    h = 404355892, l = 382758981, u = 2, e.G9v();
    for (var F = 1; e.J9C(F.toString(), F.toString().length, 99632) !== h; F++) a.compare = a.inputs[""], u += 2;
    if (e.J9C(u.toString(), u.toString().length, 11688) !== l && (c = "Compare", c += " To", a.compare = a.inputs[c]), a.compare) a.compare = [a.compare];else {
      a.compare = [], a.outputs = {}, a.outputMap = {};
      for (var P in i.chart.series) if (d = i.chart.series[P], d.parameters.color) {
        a.compare.push(d.display), a.outputs["Result " + d.display] = d.parameters.color, e.V4q(123), e.G4A(1, 4483, 20, 237), e.Z$5(0), e.o4e(884, 816), e.V4q(124);
        var _ = e.G4A(18, 6419, 1, 19176, 4);
        e.V4q(125);
        var V = e.G4A(1, 64304, 5357, 13);
        e.V4q(126), e.G4A(20, 117800, 13, 1524940), e.V4q(2);
        var A = e.G4A(401, 6009);
        e.Z$5(6), e.o4e(12, 76, 24), e.V4q(0);
        var E = e.G4A(8853, 3);
        a.outputMap["Result " + d.display + (_ == 842.6 ? V : 231.41 >= A ? E >= +"136.03" ? 726.83 : "j" : " ") + a.name] = "Result " + d.display;
      }
    }
    if (!a.compare.length) {
      f = "Correlation Coefficient requires at least on", f += "e comparison symbol", a.error = f;
      return;
    }
    for (var L = 0; L < a.compare.length; L++) {
      g = 0, p = 0, m = 0, x = 0, y = 0, b = a.compare[L], C = 0;
      for (var N = a.startFrom - o; N < s.length; N++) if (k = "_te", k += "mps ", !!s[N]) {
        if (M = s[N][b], M && typeof M == "object" && (M = M.Close), !M && M !== 0 && (I = "_tem", I += "p", I += "s", I += " ", N > 0 && s[N - 1] && s[N - 1]["_temps " + a.name] && s[N - 1][I + a.name].c ? M = s[N - 1]["_temps " + a.name].c : M = 0), M && typeof M == "object" && (M = M.Close), s[N]["_temps " + a.name] = {}, g += s[N]["_temps " + a.name].b = s[N].Close, p += s[N]["_temps " + a.name].c = M, m += s[N]["_temps " + a.name].b2 = Math.pow(s[N].Close, 2), e.Z$5(38), x += s[N][k + a.name].c2 = Math.pow(M, e.o4e("2", 32)), y += s[N]["_temps " + a.name].bc = s[N].Close * M, C >= o) {
          v = "R", v += "esu", v += "l", v += "t ", g -= s[N - o]["_temps " + a.name].b, p -= s[N - o]["_temps " + a.name].c, m -= s[N - o]["_temps " + a.name].b2, x -= s[N - o]["_temps " + a.name].c2, y -= s[N - o]["_temps " + a.name].bc, e.Z$5(2);
          var U = e.o4e(0, 2);
          S = m / o - Math.pow(g / o, U), e.Z$5(6);
          var B = e.G4A(12, 26, 36);
          w = x / o - Math.pow(p / o, B), T = y / o - g * p / Math.pow(o, 2), D = T / Math.sqrt(S * w), s[N][v + b + " " + a.name] = D;
        }
        C++;
      }
    }
  }, t.Studies.calculatePerformance = function (i, a) {
    var s, o, h;
    if (s = a.chart.scrubbed, o = a.inputs["Comparison Symbol"].toUpperCase(), o || (o = a.study.inputs["Comparison Symbol"]), a.days || (a.days = a.study.inputs.Period), s.length < a.days + 1) {
      a.error = !0;
      return;
    }
    t.Studies.MA("ma", a.days, "Close", 0, "_MA Base", i, a), t.Studies.MA("ma", a.days, o, 0, "_MA Comp", i, a), e.G9v();
    for (var l = a.startFrom; l < s.length; l++) h = s[l][o], h && (h.Close || h.Close === 0) && (h = h.Close), s[l]["Result " + a.name] = s[l].Close / h * (s[l]["_MA Comp " + a.name] / s[l]["_MA Base " + a.name]);
  }, t.Studies.calculateBeta = function (i, a) {
    var s, o, h, l, u, c, d, f, g, p, m;
    if (s = "m", s += "a", o = "_", o += "COV", e.G9v(), o += "ARn", o += " ", h = "m", h += "a", l = a.chart.scrubbed, u = a.inputs["Comparison Symbol"].toUpperCase(), u || (u = a.study.inputs["Comparison Symbol"]), a.days || (a.days = a.study.inputs.Period), l.length < a.days + 1) {
      a.error = !0;
      return;
    }
    for (var x = Math.max(a.startFrom, 1); x < l.length; x++) {
      c = "_Ba", c += "seChange", c += " ", e.V4q(2);
      var y = e.o4e(0, 1);
      l[x][c + a.name] = l[x].Close / l[x - 1].Close - y, d = l[x][u], d && (d.Close || d.Close === 0) && (d = d.Close), e.V4q(0), f = l[e.o4e(x, 1)][u], f && (f.Close || f.Close === 0) && (f = f.Close), e.V4q(10), l[x]["_CompChange " + a.name] = e.o4e(f, d, 1);
    }
    for (t.Studies.MA("ma", a.days, "_BaseChange " + a.name, 0, "_MA Base", i, a), t.Studies.MA("ma", a.days, "_CompChange " + a.name, 0, "_MA Comp", i, a), x = Math.max(a.startFrom, a.days); x < l.length; x++) g = "_Co", g += "m", g += "pChan", g += "ge ", p = "_", p += "VA", p += "R", p += "n ", m = "_", m += "COVARn", m += " ", l[x][m + a.name] = (l[x]["_BaseChange " + a.name] - l[x]["_MA Base " + a.name]) * (l[x]["_CompChange " + a.name] - l[x]["_MA Comp " + a.name]), l[x][p + a.name] = Math.pow(l[x][g + a.name] - l[x]["_MA Comp " + a.name], 2);
    for (t.Studies.MA(h, a.days, o + a.name, 0, "_COVAR", i, a), t.Studies.MA(s, a.days, "_VARn " + a.name, 0, "_VAR", i, a), x = Math.max(a.startFrom, a.days * 2 - 1); x < l.length; x++) l[x]["Result " + a.name] = l[x]["_COVAR " + a.name] / l[x]["_VAR " + a.name];
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    correl: {
      name: "Correlation Coefficient",
      range: "-1 to 1",
      calculateFN: t.Studies.calculateCorrelationCoefficient,
      outputs: {}
    },
    "Perf Idx": {
      name: "Performance Index",
      centerline: 1,
      initializeFN: t.Studies.initPriceRelative,
      seriesFN: t.Studies.displayVsComparisonSymbol,
      calculateFN: t.Studies.calculatePerformance,
      inputs: {
        Period: 120,
        "Comparison Symbol": "SPY"
      },
      outputs: {
        Result: r,
        Gain: n,
        Loss: "#FF0000"
      },
      deferUpdate: !0
    },
    Beta: {
      name: "Beta",
      centerline: 1,
      initializeFN: t.Studies.initPriceRelative,
      seriesFN: t.Studies.displayVsComparisonSymbol,
      calculateFN: t.Studies.calculateBeta,
      inputs: {
        Period: 20,
        "Comparison Symbol": "SPY"
      },
      deferUpdate: !0
    }
  })) : console.error("comparisonStudies feature requires first activating priceRelative feature.") : console.error("comparisonStudies feature requires first activating studies feature.");
};
on = q => {
  var e, t;
  e = "undef", e += "i", e += "ned", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (t.Studies.calculateCoppock = function (n, r) {
    var i = me,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f;
    if (a = "weigh", a += "ted", s = "Cl", s += "ose", o = r.chart.scrubbed, h = r.inputs.Field, (!h || h == "field") && (h = s), l = parseInt(r.inputs["Long RoC"], 10), l || (l = 14), u = parseInt(r.inputs["Short RoC"], 10), u || (u = 11), c = r.days, c || (c = 10), !(l < u)) {
      if (o.length < Math.max(u, l, c) + 1) {
        r.error = !0;
        return;
      }
      for (var g = Math.max(r.startFrom, l); g < o.length; g++) if (i.V4q(0), d = o[i.G4A(g, u)][h], i.V4q(0), f = o[i.G4A(g, l)][h], d && f) {
        i.Z$5(2);
        var p = i.o4e(85, 15);
        i.Z$5(127);
        var m = i.G4A(9, 15, 26, 18);
        o[g]["_Sum " + r.name] = p * (o[g][h] / d + o[g][h] / f - m);
      }
      t.Studies.MA(a, c, "_Sum " + r.name, 0, "Result", n, r);
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    Coppock: {
      name: "Coppock Curve",
      calculateFN: t.Studies.calculateCoppock,
      inputs: {
        Period: 10,
        Field: "field",
        "Short RoC": 11,
        "Long RoC": 14
      }
    }
  })) : console.error("coppock feature requires first activating studies feature.");
};
ln = q => {
  var e = me,
    t;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.G9v(), t.Studies ? (t.Studies.calculateDarvas = function (n, r) {
    var i, a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L;
    i = "G", i += "host", a = r.chart.scrubbed, s = 0, o = parseInt(r.inputs["ATH Lookback Period"], 10), r.inputs["Volume Spike"] && (h = "Vol", h += "ume", t.Studies.MA("simple", o, h, 0, "ADV", n, r)), e.V4q(28);
    var N = e.o4e(19, 1100, 20800);
    for (l = parseFloat(r.inputs["Volume % of Avg"]) / N, u = "none", c = {}, d = null, f = null, g = null, p = parseFloat(r.inputs["Level Offset"]), m = !1, m && console.log("*****************"), y = {}, ["Darvas", i, "Profit", "Loss", "ATH", "ADV", "Spike"].forEach(function (R) {
      e.Z$5(52);
      var H = e.o4e(62, 16, 32);
      e.Z$5(72);
      var z = e.G4A(14880, 266922, 3, 6, 12);
      e.V4q(128);
      var W = e.o4e(2633, 533, 14, 2665, 5);
      e.V4q(126), e.o4e(4, 2367, 9, 18886), e.V4q(129);
      var G = e.o4e(448, 1, 393, 18, 9);
      e.V4q(0);
      var Z = e.G4A(6, 5);
      e.Z$5(28), e.o4e(20, 5438, 103330), e.Z$5(0);
      var X = e.G4A(7883, 3);
      e.V4q(123), e.G4A(9151, 5484, 6, 54900), e.Z$5(95);
      var ie = e.o4e(199, 15, 14, 2952);
      e.Z$5(60);
      var j = e.o4e(5, 5971, 5977, 5977);
      y[R] = R + ("1750" >> H < z ? W == "412" >> G ? "0x477" * Z : X >= ie ? j : "e" : " ") + r.name;
    }), x = r.startFrom - 1; x > 0; x--) if (b = a[x], b[y.Darvas] || b[y.Ghost]) for (var U in y) b[U] = null;else {
      s = b[y.ATH] || 0, f = b[y.Profit], g = b[y.Loss];
      break;
    }
    for (x; x < a.length; x++) if (C = "Price Mini", C += "mu", C += "m", k = a[x], !!k) {
      if (parseFloat(r.inputs[C]) <= a[s].Close) {
        if (M = "h", M += "i", M += "g", M += "h", d && (!d.End || x == d.End + 1) && (a[x - 1].Close > c.High ? c = {
          State: 1,
          High: 2 * c.High - c.Low,
          Low: c.High,
          Start: x,
          End: 2 * c.End - c.Start + 1
        } : d = null, d && (k[y.Ghost] = t.clone(c), m && console.log("Ghost begin:" + k.DT), e.V4q(17), c.State = e.G4A("0", 32), a[c.End] && (I = "Ghos", I += "t en", I += "d:", a[c.End][y.Ghost] = t.clone(c), m && console.log(I + a[c.End].DT)), d = {
          Start: c.Start,
          End: c.End
        }, f = c.High + p, (!g || g < c.Low - p) && (g = c.Low - p))), k[y.Profit] = f, k[y.Loss] = g, (k.Close >= f || r.inputs["Exit Field"] == "high/low" && k.High >= f) && (f = null), u == "none" && x == s + 3 && !a[s + 2][y.Darvas] && !a[s + 1][y.Darvas] && !a[s][y.Darvas] && a[s].High > k.High && (v = "h", v += "igh", u = v), u == M && (k.High > a[s].High ? (S = "n", S += "on", S += "e", u = S) : a[x - 3].Low < a[x - 2].Low && a[x - 3].Low < a[x - 1].Low && a[x - 3].Low < k.Low && (w = "D", w += "arvas begin:", c = {
          State: 1,
          High: a[s].High,
          Low: a[x - 3].Low,
          Start: s
        }, a[s][y.Darvas] = t.clone(c), u = "darvas", m && console.log(w + a[s].DT), m && console.log("Darvas established:" + k.DT), d && (T = "G", T += "host e", T += "nd:", d.End > x && a[d.Start] && (k[y.Ghost] = t.clone(a[d.Start][y.Ghost]), k[y.Ghost].End = x, a[d.End] && (delete a[d.End][y.Ghost], m && console.log("Ghost End removed:" + a[d.End].DT))), k[y.Ghost].State = 0, a[d.Start][y.Ghost].End = x, m && console.log(T + k.DT), d = null), f = c.High + p, (!g || g < c.Low - p) && (g = c.Low - p))), u == "darvas" && (D = "n", D += "o", D += "n", D += "e", F = "Exi", F += "t Fie", F += "ld", k.Close > c.High ? d = {} : r.inputs["Exit Field"] == "high/low" && k.High > c.High ? d = {} : (k.Close < c.Low || r.inputs[F] == "high/low" && k.Low < c.Low) && (u = "none"), d ? u = "none" : u == D && (f = null, g = null), r.inputs["Ghost Boxes"] || (d = null), u == "none")) {
          P = "Dar", P += "vas e", P += "nd:";
          for (var B = c.Start + 1; B < x; B++) a[B][y.Darvas] = t.clone(c);
          c.State = 0, c.End = x, k[y.Darvas] = t.clone(c), m && console.log(P + k.DT), k[y.ATH] = s;
          continue;
        }
        g && (_ = "Exit", _ += " ", _ += "Field", (k.Close < c.Low || r.inputs[_] == "high/low" && k.Low < c.Low) && (V = "Exit Fi", V += "e", V += "ld", A = "n", A += "one", E = "d", E += "a", E += "r", E += "vas", u == E && (u = A), (k.Close < g || r.inputs[V] == "high/low" && k.Low < g) && (f = null, g = null), d && (d.End > x && a[d.Start] && (k[y.Ghost] = t.clone(a[d.Start][y.Ghost]), k[y.Ghost].End = x, a[d.End] && (delete a[d.End][y.Ghost], m && console.log("Ghost End removed:" + a[d.End].DT))), e.V4q(0), k[y.Ghost].State = e.o4e("0", 0), a[d.Start][y.Ghost].End = x, m && console.log("Ghost end:" + k.DT), d = null)));
      }
      if (k.High >= a[s].High && (s = x, m && console.log("All Time High:" + k.DT)), (x < 3 || k.High >= a[x - 1].High && k.High >= a[x - 2].High && k.High >= a[x - 3].High) && x - s >= o) {
        L = "All", L += " Time Hi", L += "gh:", s = x;
        for (var O = 0; O < o && !(x - O < 0); O++) a[x - O].High > a[s].High && (e.V4q(0), s = e.G4A(x, O));
        m && console.log(L + k.DT);
      }
      r.inputs["Volume Spike"] && x > o && x == s && k[y.ADV] * l < k.Volume && (k[y.Spike] = 1, m && console.log("Volume Spike:" + k.DT)), k[y.ATH] = s;
    }
  }, t.Studies.displayDarvas = function (n, r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B;
    a = t.Studies.determineColor(r.outputs.Levels), (!a || a == "auto" || t.isTransparent(a)) && (a = n.defaultColor), s = t.Studies.determineColor(r.outputs.Darvas), (!s || s == "auto" || t.isTransparent(s)) && (s = n.defaultColor), o = t.Studies.determineColor(r.outputs.Ghost), (!o || o == "auto" || t.isTransparent(o)) && (o = n.defaultColor), h = n.panels[r.panel], l = r.getContext(n), e.Z$5(52);
    var O = e.o4e(30, 1, 2);
    if (f = n.layout.candleWidth - ("2" << O), f < 2 && (e.Z$5(27), f = e.o4e("1", 0)), n.startClip(r.panel), r.inputs["Stop Levels"]) {
      for (l.setLineDash && l.setLineDash([2, 2]), l.lineWidth = 2, l.strokeStyle = a, l.beginPath(), u = 0; u < i.length; u++) g = "L", g += "os", g += "s ", c = i[u], e.Z$5(0), p = i[e.G4A(u, 1)], c && (d = c["Loss " + r.name] ? Math.floor(n.pixelFromPrice(c["Loss " + r.name], h)) : null, m = p && p["Loss " + r.name] ? Math.floor(n.pixelFromPrice(p[g + r.name], h)) : null, d && (c.candleWidth && (f = Math.floor(Math.max(1, c.candleWidth))), x = Math.floor(n.pixelFromBar(u, h.chart) + f / 2), y = Math.floor(n.pixelFromBar(u, h.chart) - f / 2), m && m >= d ? l.lineTo(y, d) : u === 0 ? l.moveTo(n.chart.left, d) : l.moveTo(y, d), l.lineTo(x, d)));
      l.stroke(), l.setLineDash && l.setLineDash([]), l.lineWidth = 1;
    }
    b = -10, k = 0, I = -10, S = 0, T = !1, D = !1, e.Z$5(52);
    var R = e.o4e(7149, 7166, 7166);
    e.Z$5(6);
    var H = e.G4A(11, 1, 10);
    for (e.D0I(), F = l.measureText(R == 869.08 ? "n" : "\u25B2").width / H, P = 0, u = 0; u < i.length; u++) if (_ = "Ghost Bo", _ += "xes", V = "Darv", V += "as ", !!i[u]) {
      if ((i[u].Close || i[u].Close === 0) && (P = u), i[u]["Spike " + r.name] && (l.fillStyle = s, l.textBaseline = "bottom", A = n.pixelFromPrice(i[u].High, n.chart.panel), l.fillText("\u25BC", n.pixelFromBar(u) - F, A - 5)), i[u].candleWidth && (f = Math.floor(Math.max(1, i[u].candleWidth))), i[u][V + r.name]) {
        if (c = i[u]["Darvas " + r.name], c.State == 1 && !T) b = Math.floor(n.pixelFromBar(u, h.chart) - f / 2), C = Math.floor(n.pixelFromPrice(c.High, h)), M = Math.floor(n.pixelFromPrice(c.Low, h)) - C, T = !0;else if (c.State === 0) {
          e.Z$5(34);
          var z = e.o4e(8, 3, 9, 4, 4);
          k = Math.floor(n.pixelFromBar(u, h.chart) + f / z) - b, C = Math.floor(n.pixelFromPrice(c.High, h)), M = Math.floor(n.pixelFromPrice(c.Low, h)) - C, l.strokeStyle = s, l.fillStyle = s, r.inputs["Stop Levels"] ? (e.V4q(40), l.globalAlpha = e.G4A("0.3", 1)) : (l.strokeRect(b, C, k, M), l.globalAlpha = 0.2), l.fillRect(b, C, k, M), l.globalAlpha = 1, T = !1;
        }
      }
      if (i[u]["Ghost " + r.name] && r.inputs[_]) {
        if (E = "G", E += "h", E += "os", E += "t ", c = i[u][E + r.name], c.State == 1 && !D) I = Math.floor(n.pixelFromBar(u, h.chart) - f / 2), v = Math.floor(n.pixelFromPrice(c.High, h)), S = Math.floor((c.End - c.Start + 1) * n.layout.candleWidth + f / 2), w = Math.floor(n.pixelFromPrice(c.Low, h)) - v, D = !0;else if (c.State === 0) {
          c.Start == c.End && (I = Math.floor(n.pixelFromBar(u, h.chart) - f / 2)), e.V4q(4);
          var W = e.o4e(0, 7, 14, 9);
          S = Math.floor(n.pixelFromBar(u, h.chart) + f / W) - I, v = Math.floor(n.pixelFromPrice(c.High, h)), w = Math.floor(n.pixelFromPrice(c.Low, h)) - v, l.strokeStyle = o, l.fillStyle = o, r.inputs["Stop Levels"] ? l.globalAlpha = 0.3 : (l.strokeRect(I, v, S, w), l.globalAlpha = 0.2), l.fillRect(I, v, S, w), l.globalAlpha = 1, D = !1;
        }
      }
    }
    if (T) {
      e.V4q(130);
      var G = e.G4A(1, 18, 36, 36, 19);
      k = Math.floor(n.pixelFromBar(P, h.chart) + f / G) - b, l.strokeStyle = s, l.fillStyle = s, r.inputs["Stop Levels"] ? l.globalAlpha = 0.3 : (l.beginPath(), e.V4q(22), l.moveTo(e.o4e(2, b, k), C), l.lineTo(b, C), e.V4q(2), l.lineTo(b, e.o4e(C, M)), e.Z$5(131), l.lineTo(e.o4e(k, b, "2", 0), e.G4A(C, M, e.V4q(2))), l.stroke(), l.globalAlpha = 0.2), e.Z$5(40), l.fillRect(b, C, e.o4e(2, k), M), l.globalAlpha = 1;
    }
    if (D && (l.strokeStyle = o, l.fillStyle = o, r.inputs["Stop Levels"] ? l.globalAlpha = 0.3 : (l.strokeRect(I, v, S, w), l.globalAlpha = 0.2), l.fillRect(I, v, S, w), e.Z$5(40), l.globalAlpha = e.G4A("1", 1)), T || D) {
      r.inputs["Stop Levels"] && (l.setLineDash && l.setLineDash([2, 2]), l.lineWidth = 2, l.strokeStyle = a, L = Math.floor(n.pixelFromBar(P - 1, h.chart) + f / 2), d && (l.beginPath(), l.moveTo(L, d), l.lineTo(T ? b + 2 * k : I + S, d), l.stroke()), l.setLineDash && l.setLineDash([]), l.lineWidth = 1), N = -410612392, U = 834362470, B = 2;
      for (var Z = 1; e.J9C(Z.toString(), Z.toString().length, 47244) !== N; Z++) T = !1, B += 2;
      e.U4I(B.toString(), B.toString().length, 62734) !== U && (T = !0), D = !1;
    }
    n.endClip();
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    Darvas: {
      name: "Darvas Box",
      underlay: !0,
      calculateFN: t.Studies.calculateDarvas,
      seriesFN: t.Studies.displayDarvas,
      inputs: {
        "ATH Lookback Period": 100,
        "Exit Field": ["close", "high/low"],
        "Ghost Boxes": !0,
        "Stop Levels": !1,
        "Level Offset": 0.01,
        "Price Minimum": 5,
        "Volume Spike": !1,
        "Volume % of Avg": 400
      },
      outputs: {
        Darvas: "#5F7CB8",
        Ghost: "#699158",
        Levels: "auto"
      },
      customRemoval: !0,
      attributes: {
        "Price Minimum": {
          min: 0.01,
          step: 0.01
        },
        yaxisDisplayValue: {
          hidden: !0
        },
        panelName: {
          hidden: !0
        },
        flippedEnabled: {
          hidden: !0
        }
      }
    }
  })) : console.error("darvasBox feature requires first activating studies feature.");
};
hn = q => {
  var e = me,
    t,
    n,
    r,
    i;
  t = 1971814154, n = -2019875917, r = 2, e.G9v();
  for (var a = 1; e.U4I(a.toString(), a.toString().length, 60972) !== t; a++) i = +_CIQ == "" ? _CIQ : q.CIQ, r += 2;
  e.J9C(r.toString(), r.toString().length, 60629) !== n && (i = typeof _CIQ < "u" ? _CIQ : q.CIQ), i.Studies ? (i.Studies.calculateDetrendedPrice = function (s, o) {
    var h, l, u, c, d, f, g;
    if (h = "Clos", h += "e", l = o.chart.scrubbed, l.length < o.days + 1) {
      o.error = !0;
      return;
    }
    u = o.inputs.Field, (!u || u == "field") && (u = h), c = Math.floor(o.days / 2 + 1), i.Studies.MA(o.inputs["Moving Average Type"], o.days, u, -c, "MA", s, o);
    for (var p = Math.max(o.days - c - 1, o.startFrom - c); p < l.length - c; p++) d = "M", d += "A", d += " ", !(p < 0) && (f = l[p][u], f && typeof f == "object" && (f = f[o.subField]), g = l[p][d + o.name], (f || f === 0) && (g || g === 0) && (e.V4q(0), l[p]["Result " + o.name] = e.G4A(f, g)));
  }, i.Studies.studyLibrary = i.extend(i.Studies.studyLibrary, {
    Detrended: {
      name: "Detrended Price Oscillator",
      calculateFN: i.Studies.calculateDetrendedPrice,
      inputs: {
        Period: 14,
        Field: "field",
        "Moving Average Type": "ma"
      }
    }
  })) : console.error("detrended feature requires first activating studies feature.");
};
un = q => {
  var e, t;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "f", t += "iel", t += "d", e.Studies.calculateDisparity = function (n, r) {
    var i, a, s, o, h;
    if (i = "_", i += "MA", a = "C", a += "lose", s = r.chart.scrubbed, s.length < r.days + 1) {
      r.error = !0;
      return;
    }
    o = r.inputs.Field, (!o || o == "field") && (o = a), e.Studies.MA(r.inputs["Moving Average Type"], r.days, o, 0, i, n, r);
    for (var l = Math.max(r.startFrom, r.days - 1); l < s.length; l++) if (s[l] && (h = s[l]["_MA " + r.name], h)) {
      me.Z$5(78);
      var u = me.o4e(9, 101, 18, 19, 8);
      s[l]["Result " + r.name] = u * (s[l][o] / h - 1);
    }
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    Disparity: {
      name: "Disparity Index",
      calculateFN: e.Studies.calculateDisparity,
      inputs: {
        Period: 14,
        Field: t,
        "Moving Average Type": "ma"
      }
    }
  })) : console.error("disparity feature requires first activating studies feature.");
};
cn = q => {
  var e = me,
    t,
    n,
    r;
  t = "u", t += "ndefin", t += "e", t += "d", e.D0I(), n = typeof _CIQ !== t ? _CIQ : q.CIQ, n.Studies ? (r = "E", r += "ase o", r += "f Mov", r += "ement", n.Studies.calculateEaseOfMovement = function (i, a) {
    var s, o, h, l, u, c, d, f, g, p, m;
    s = "Moving Average Ty", s += "pe", o = -1437707276, h = -543699369, e.Z$5(40), l = e.G4A("2", 1);
    for (var x = 1; e.J9C(x.toString(), x.toString().length, 21894) !== o; x++) u = a.chart.scrubbed, l += 2;
    if (e.J9C(l.toString(), l.toString().length, 48389) !== h && (u = a.chart.scrubbed), u.length < a.days) {
      a.error = !0;
      return;
    }
    for (var y = Math.max(1, a.startFrom); y < u.length; y++) {
      c = "_EO", c += "M1 ", e.Z$5(132);
      var b = e.o4e(1, 17, 16, 3);
      d = (u[y].High + u[y].Low) / b, e.V4q(133);
      var C = e.o4e(13, 13, 239, 14, 18);
      e.V4q(134);
      var k = e.o4e(650, 12, 11, 5, 11);
      e.Z$5(21);
      var M = e.G4A(6, 8);
      f = (u[y - C].High + u[y - k].Low) / M, e.V4q(0), g = e.o4e(d, f), e.Z$5(0);
      var I = e.o4e(100000020, 20);
      p = u[y].Volume / I / (u[y].High - u[y].Low), e.V4q(9), m = e.o4e(g, p), isFinite(m) ? u[y][c + a.name] = m : u[y]["_EOM1 " + a.name] = NaN;
    }
    n.Studies.MA(a.inputs[s], a.days, "_EOM1 " + a.name, 0, "Result", i, a);
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    EOM: {
      name: r,
      calculateFN: n.Studies.calculateEaseOfMovement,
      inputs: {
        Period: 14,
        "Moving Average Type": "ma"
      }
    }
  })) : console.error("easeOfMovement feature requires first activating studies feature.");
};
dn = q => {
  var e = me;
  e.G9v();
  var t, n, r;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (n = "au", n += "t", n += "o", r = "Ehle", r += "r Fisher Trans", r += "form", t.Studies.calculateEhlerFisher = function (i, a) {
    var s, o, h, l, u, c, d, f;
    if (s = a.chart.scrubbed, s.length < a.days + 1) {
      a.error = !0;
      return;
    }
    if (e.Z$5(40), o = e.o4e("0", 1), a.startFrom > 1) {
      e.Z$5(135);
      var g = e.o4e(8, 1, 3, 3, 6);
      o = s[a.startFrom - g]["_n " + a.name];
    }
    for (var p = a.startFrom; p < s.length && (h = "_", h += "n", h += " ", l = "EF Trigger", l += " ", u = s[p], !u.futureTick); p++) {
      if (p < a.days - 1) {
        c = "EF Tr", c += "igger ", u["EF " + a.name] = u[c + a.name] = o;
        continue;
      }
      d = k(a.days, p), e.V4q(11);
      var m = e.o4e(15, 7, 21, 0);
      e.Z$5(3);
      var x = e.G4A(0, 18, 20);
      e.V4q(101);
      var y = e.G4A(19, 173, 10, 19);
      e.V4q(69);
      var b = e.G4A(8, 11, 10, 6, 2);
      e.V4q(66);
      var C = e.G4A(11, 0, 13, 25);
      o = "0.33" * m * x * (((s[p].High + s[p].Low) / y - d[0]) / Math.max(0.000001, d[b] - d[0]) - 0.5) + "0.67" * C * o, o > 0 ? o = Math.min(o, 0.9999) : o < 0 && (o = Math.max(o, -0.9999)), f = p ? s[p - 1]["EF " + a.name] : 0, u["EF " + a.name] = 0.5 * Math.log((1 + o) / (1 - o)) + 0.5 * f, u[l + a.name] = f, u[h + a.name] = o;
    }
    e.G9v();
    function k(M, I) {
      var v, S, w;
      v = Number.MAX_VALUE, S = Number.MAX_VALUE * -1;
      for (var T = I - M + 1; T <= I; T++) {
        e.V4q(136);
        var D = e.o4e(12, 153, 11, 12);
        w = (s[T].High + s[T].Low) / D, v = Math.min(v, w), S = Math.max(S, w);
      }
      return e.G9v(), [v, S];
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Ehler Fisher": {
      name: r,
      calculateFN: t.Studies.calculateEhlerFisher,
      inputs: {
        Period: 10
      },
      outputs: {
        EF: n,
        "EF Trigger": "#FF0000"
      }
    }
  })) : console.error("ehlerFisher feature requires first activating studies feature.");
};
fn = q => {
  var e = me,
    t,
    n,
    r,
    i;
  e.G9v(), t = "undefi", t += "ne", t += "d", n = typeof _CIQ !== t ? _CIQ : q.CIQ, n.Studies ? (r = "#8", r += "BC176", i = "#00", i += "DD", i += "00", n.Studies.calculateElderImpulse = function (a, s) {
    var o, h, l, u, c, d, f, g, p;
    o = s.chart.scrubbed, h = s.outputs.Bullish, l = s.outputs.Bearish, u = s.outputs.Neutral, e.Z$5(40), n.Studies.MA("exponential", 13, "Close", e.o4e("0", 1), "_MA", a, s), s.macd = new n.Studies.StudyDescriptor("_" + s.name, "macd", s.panel), s.macd.chart = s.chart, s.macd.days = s.days, s.macd.startFrom = s.startFrom, s.macd.inputs = {
      "Fast MA Period": 12,
      "Slow MA Period": 26,
      "Signal Period": 9
    }, s.macd.outputs = {
      _MACD: null,
      _Signal: null
    }, n.Studies.calculateMACD(a, s.macd);
    for (var m = s.startFrom; m < o.length; m++) d = "_", d += "MA ", f = "_", f += "MA", f += " ", g = "_", g += "hi", g += "st", p = "_M", p += "A", p += " ", m === 0 ? c = u : o[m][p + s.name] > o[m - 1]["_MA " + s.name] && o[m]["_" + s.name + "_hist"] > o[m - 1]["_" + s.name + g] ? c = h : o[m][f + s.name] < o[m - 1][d + s.name] && o[m]["_" + s.name + "_hist"] < o[m - 1]["_" + s.name + "_hist"] ? c = l : c = u, o[m]["Result " + s.name] = c;
  }, n.Studies.calculateElderRay = function (a, s) {
    var o, h, l, u, c, d;
    if (o = "_", o += "h", o += "ist", o += "2", h = "_", h += "his", h += "t1", l = "_", l += "E", l += "M", l += "A", u = "expone", u += "n", u += "tia", u += "l", c = s.chart.scrubbed, c.length < s.days) {
      s.error = !0;
      return;
    }
    n.Studies.MA(u, s.days, "Close", 0, l, a, s);
    for (var f = Math.max(s.startFrom, s.days - 1); f < c.length; f++) d = "_hist", d += "2", c[f][s.name + "_hist1"] = c[f].High - c[f]["_EMA " + s.name], c[f][s.name + d] = c[f].Low - c[f]["_EMA " + s.name];
    s.outputMap = {}, s.outputMap[s.name + h] = "", s.outputMap[s.name + o] = "";
  }, n.Studies.calculateElderForce = function (a, s) {
    var o, h, l, u;
    if (o = s.chart.scrubbed, o.length < s.days) {
      s.error = !0, e.V4q(40), h = -e.G4A("694233934", 1), l = -692095307, e.Z$5(27), u = e.o4e("2", 0);
      for (var c = 1; e.U4I(c.toString(), c.toString().length, 90739) !== h; c++) return;
      return e.J9C(u.toString(), u.toString().length, 17127) !== l, void 0;
    }
    for (var d = Math.max(1, s.startFrom); d < o.length; d++) {
      e.V4q(137);
      var f = e.o4e(7, 7, 14, 13, 0);
      o[d]["_EF1 " + s.name] = o[d].Volume * (o[d].Close - o[d - f].Close);
    }
    n.Studies.MA("exponential", s.days, "_EF1 " + s.name, 0, "Result", a, s);
  }, n.Studies.initElderImpulse = function (a, s, o, h, l, u) {
    var c, d;
    return c = "colo", c += "red", c += "_", c += "bar", d = n.Studies.initializeFN(a, s, o, h, l, u), l.calculateOnly || (a.chart.customChart = {
      chartType: c,
      colorFunction: function (f, g, p) {
        var m, x, y;
        return m = "obj", m += "e", m += "ct", x = "Resul", x += "t", x += " ", y = g[x + d.name], y && typeof y == m && (y = y.color), y;
      }
    }, a.setMainSeriesRenderer()), d;
  }, n.Studies.displayElderForce = function (a, s, o) {
    var h, l, u, c;
    n.Studies.displaySeriesAsLine(a, s, o), h = n.Studies.determineColor(s.outputs.Result), l = a.panels[s.panel], u = s.getYAxis(a), c = {
      skipTransform: l.name != s.chart.name,
      panelName: s.panel,
      band: "Result " + s.name,
      threshold: 0,
      color: h,
      yAxis: u
    }, !s.highlight && a.highlightedDraggable && (c.opacity = 0.3), e.D0I(), c.direction = 1, n.preparePeakValleyFill(a, c), c.direction = -1, n.preparePeakValleyFill(a, c);
  }, n.Studies.displayElderRay = function (a, s, o) {
    var h, l, u, c, d, f, g, p, m, x, y;
    h = a.panels[s.panel], l = s.getContext(a), u = s.getYAxis(a), c = a.pixelFromPrice(0, h, u), e.V4q(138);
    var b = e.G4A(22, 4, 10, 5, 18);
    d = a.layout.candleWidth - b, d < 2 && (d = 1), a.canvasColor("stx_histogram"), f = l.fillStyle;
    function C(M, I, v, S) {
      e.D0I(), l.fillStyle = n.Studies.determineColor(s.outputs[v]), l.fillRect(Math.floor(a.pixelFromBar(M, h.chart) - d / 2 + d * I), Math.floor(c), Math.floor(d * (1 - 2 * I)), Math.floor(a.pixelFromPrice(y[s.name + S], h, u) - c));
    }
    s.underlay || (l.globalAlpha = 1), a.startClip(s.panel), !s.highlight && a.highlightedDraggable && (l.globalAlpha *= +"0.3");
    for (var k = 0; k < o.length; k++) g = "E", g += "lder B", g += "ull Power", p = "Elder B", p += "ear Power", m = "_h", m += "is", m += "t", m += "2", x = "_", x += "h", x += "is", x += "t1", y = o[k], y && (y.candleWidth && (d = Math.floor(Math.max(1, y.candleWidth - 2))), y[s.name + x] > 0 && C(k, 0, "Elder Bull Power", "_hist1"), y[s.name + m] < 0 && C(k, 0, p, "_hist2"), y[s.name + "_hist1"] < 0 && C(k, 0.1, g, "_hist1"), y[s.name + "_hist2"] > 0 && C(k, 0.1, "Elder Bear Power", "_hist2"));
    a.endClip(), l.fillStyle = f;
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    "Elder Force": {
      name: "Elder Force Index",
      calculateFN: n.Studies.calculateElderForce,
      seriesFN: n.Studies.displayElderForce,
      inputs: {
        Period: 13
      }
    },
    "Elder Ray": {
      name: "Elder Ray Index",
      seriesFN: n.Studies.displayElderRay,
      calculateFN: n.Studies.calculateElderRay,
      centerline: 0,
      inputs: {
        Period: 13
      },
      outputs: {
        "Elder Bull Power": i,
        "Elder Bear Power": "#FF0000"
      }
    },
    "Elder Impulse": {
      name: "Elder Impulse System",
      calculateFN: n.Studies.calculateElderImpulse,
      initializeFN: n.Studies.initElderImpulse,
      seriesFN: null,
      customRemoval: !0,
      underlay: !0,
      inputs: {},
      outputs: {
        Bullish: r,
        Bearish: "#DD3E39",
        Neutral: "#5F7CB8"
      },
      removeFN: function (a, s) {
        e.G9v(), a.chart.customChart = null, a.setMainSeriesRenderer();
      }
    }
  })) : console.error("elder feature requires first activating studies feature.");
};
pn = q => {
  var e = me,
    t,
    n,
    r;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.G9v(), t.Studies ? (n = "a", n += "u", n += "t", n += "o", r = "-1 t", r += "o ", r += "1", t.Studies.calculateFractalChaos = function (i, a) {
    var s, o, h, l, u, c, d, f, g, p, m;
    if (s = a.chart.scrubbed, o = 0, h = 0, l = 0, a.startFrom && a.type == "Fractal Chaos Bands") {
      e.V4q(3);
      var x = e.G4A(0, 3, 4);
      o = s[a.startFrom - x]["Fractal High " + a.name], e.Z$5(0);
      var y = e.o4e(13, 12);
      h = s[a.startFrom - y]["Fractal Low " + a.name];
    }
    for (var b = Math.max(4, a.startFrom); b < s.length && (u = "Fractal Ch", u += "aos B", u += "and", u += "s", c = "Resu", c += "lt ", !s[b].futureTick); b++) {
      for (d = !isNaN(s[b].High), f = !isNaN(s[b].Low), (d || f) && (s[b][c + a.name] = 0), l = 0, g = 0; g <= b && !(!s[b - g] || s[b - g].High > s[b - 2].High || g < 2 && s[b - g].High == s[b - 2].High); g++) if (s[b - g].High < s[b - 2].High && l++, l == 4) {
        o = s[b - 2].High;
        break;
      }
      for (a.type == "Fractal Chaos Bands" ? d && (s[b]["Fractal High " + a.name] = o > 0 ? o : null) : l == 4 && (p = "R", p += "esult", p += " ", s[b][p + a.name] = 1), l = 0, g = 0; g <= b && !(!s[b - g] || s[b - g].Low < s[b - 2].Low || g < 2 && s[b - g].Low == s[b - 2].Low); g++) if (s[b - g].Low > s[b - 2].Low && l++, l == 4) {
        h = s[b - 2].Low;
        break;
      }
      a.type == u ? f && (s[b]["Fractal Low " + a.name] = h > 0 ? h : null) : l == 4 && (m = "R", m += "e", m += "sul", m += "t ", s[b][m + a.name] = -1);
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Fractal Chaos": {
      name: "Fractal Chaos Oscillator",
      range: r,
      calculateFN: t.Studies.calculateFractalChaos,
      inputs: {},
      centerline: null
    },
    "Fractal Chaos Bands": {
      name: "Fractal Chaos Bands",
      overlay: !0,
      calculateFN: t.Studies.calculateFractalChaos,
      seriesFN: t.Studies.displayChannel,
      inputs: {
        "Channel Fill": !0
      },
      outputs: {
        "Fractal High": n,
        "Fractal Low": "auto",
        "Fractal Channel": "auto"
      }
    }
  })) : console.error("fractalChaos feature requires first activating studies feature.");
};
mn = q => {
  var e, t, n, r;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "H", t += "igh", t += " Mi", t += "nus Low", n = "Vertical Hori", n += "zontal ", n += "Filter", r = "a", r += "u", r += "t", r += "o", e.Studies.calculateMaxHighMinLow = function (i, a) {
    var s = me,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w;
    if (o = "L", o += "ow ", o += "Pe", o += "riod", h = "High Pe", h += "r", h += "iod", l = "High ", s.G9v(), l += "Period", u = a.chart.scrubbed, c = a.days, d = a.days, a.inputs[l] && (c = a.inputs[h]), a.inputs[o] && (d = a.inputs["Low Period"]), u.length < Math.max(c, d) + 1) {
      f = -1418664320, g = 1444748305, p = 2;
      for (var T = 1; s.J9C(T.toString(), T.toString().length, 96372) !== f; T++) a.error = !0, p += 2;
      s.U4I(p.toString(), p.toString().length, 17918) !== g && (a.error = !1);
      return;
    }
    m = Number.MAX_VALUE, s.Z$5(21);
    var D = s.G4A(4, 3);
    if (x = Number.MAX_VALUE * D, a.startFrom > 1) {
      for (y = 1; y < c; y++) a.startFrom - y >= 0 && (x = Math.max(x, u[a.startFrom - y].High));
      for (y = 1; y < d; y++) a.startFrom - y >= 0 && (m = Math.min(m, u[a.startFrom - y].Low));
    }
    for (var F = Math.max(0, a.startFrom - 1); F < u.length; F++) {
      if (b = "W", b += "illiams %", b += "R", C = "H", C += "H", C += "V", x = Math.max(x, u[F].High), m = Math.min(m, u[F].Low), F >= c && u[F - c].High == x) for (x = u[F].High, y = 1; y < c; y++) x = Math.max(x, u[F - y].High);
      if (F >= d && u[F - d].Low == m) for (m = u[F].Low, y = 1; y < d; y++) m = Math.min(m, u[F - y].Low);
      if (k = 0, a.type == C) k = x;else if (a.type == "LLV") k = m;else if (a.type == "Donchian Width") s.V4q(0), k = s.o4e(x, m);else if (a.type == "GAPO" || a.type == "Gopala") k = Math.log(x - m) / Math.log(d);else if (a.type == "VT HZ Filter") {
        s.Z$5(0), k = s.G4A(x, m), u[F]["_MHML " + a.name] = k;
        continue;
      } else if (a.type == b) {
        M = "Re", M += "su", M += "lt ", s.V4q(139);
        var P = s.G4A(19, 6, 5, 470);
        k = P * (x - u[F].Close) / (x - m), u[F][M + a.name] = k;
        continue;
      }
      if (F == u.length - 1) break;
      u[F + 1].futureTick || (a.type == "Donchian Channel" ? (I = "Donchian ", I += "Median ", v = "Donchian ", v += "Low ", S = "Donchian ", S += "High ", s.V4q(2), u[s.G4A(F, 1)][S + a.name] = x, s.Z$5(109), u[s.G4A("1", F)][v + a.name] = m, s.Z$5(140), u[s.G4A(64, F, "1")][I + a.name] = s.o4e(x, m, 2, s.Z$5(5))) : (w = "Re", w += "sul", w += "t ", s.V4q(2), u[s.G4A(F, 1)][w + a.name] = k));
    }
  }, e.Studies.calculateVerticalHorizontalFilter = function (i, a) {
    var s, o, h, l, u;
    if (s = a.chart.scrubbed, s.length < a.days + 1) {
      a.error = !0;
      return;
    }
    a.mhml = new e.Studies.StudyDescriptor(a.name, a.type, a.panel), a.mhml.chart = a.chart, me.G9v(), a.mhml.days = a.days, a.mhml.startFrom = a.startFrom, a.mhml.inputs = {}, a.mhml.outputs = {
      _MHML: null
    }, e.Studies.calculateMaxHighMinLow(i, a.mhml), o = 0, h = [];
    for (var c = Math.max(1, a.startFrom - a.days); c < s.length; c++) l = Math.abs(s[c].Close - s[c - 1].Close), h.push(l), o += l, h.length == a.days && (u = "_MH", u += "M", u += "L ", s[c]["Result " + a.name] = s[c][u + a.name] / o, o -= h.shift());
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "Donchian Channel": {
      name: "Donchian Channel",
      overlay: !0,
      calculateFN: e.Studies.calculateMaxHighMinLow,
      seriesFN: e.Studies.displayChannel,
      inputs: {
        "High Period": 20,
        "Low Period": 20,
        "Channel Fill": !0
      },
      outputs: {
        "Donchian High": r,
        "Donchian Median": "auto",
        "Donchian Low": "auto"
      }
    },
    "Donchian Width": {
      name: "Donchian Width",
      calculateFN: e.Studies.calculateMaxHighMinLow,
      inputs: {
        "High Period": 20,
        "Low Period": 20
      }
    },
    GAPO: {
      name: "Gopalakrishnan Range Index",
      calculateFN: e.Studies.calculateMaxHighMinLow
    },
    HHV: {
      name: "Highest High Value",
      calculateFN: e.Studies.calculateMaxHighMinLow,
      inputs: {
        Period: 14
      }
    },
    LLV: {
      name: "Lowest Low Value",
      calculateFN: e.Studies.calculateMaxHighMinLow,
      inputs: {
        Period: 14
      }
    },
    "Williams %R": {
      name: "Williams %R",
      calculateFN: e.Studies.calculateMaxHighMinLow,
      inputs: {
        Period: 14
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: -20,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: -80,
          studyOverSoldColor: "auto"
        }
      }
    },
    "VT HZ Filter": {
      name: n,
      calculateFN: e.Studies.calculateVerticalHorizontalFilter,
      inputs: {
        Period: 28
      }
    },
    "High-Low": {
      name: t,
      calculateFN: function (i, a) {
        var s;
        s = a.chart.scrubbed;
        for (var o = a.startFrom; o < s.length; o++) s[o]["Result " + a.name] = s[o].High - s[o].Low;
      },
      inputs: {}
    }
  })) : console.error("highLowStudies feature requires first activating studies feature.");
};
gn = q => {
  var e, t, n, r, i;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (n = "#", n += "8", n += "08", n += "000", r = "#", r += "F", r += "F0", r += "000", i = "#F", i += "F0000", e.Studies.calculateIchimoku = function (a, s) {
    var o = me,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x;
    for (h = "Lagging ", o.G9v(), h += "Spa", h += "n", h += " Period", l = s.chart.scrubbed, u = {
      Base: Number(s.inputs["Base Line Period"]),
      Conv: Number(s.inputs["Conversion Line Period"]),
      LeadB: Number(s.inputs["Leading Span B Period"]),
      Lag: Number(s.inputs[h])
    }, c = s.startFrom; c < l.length; c++) if (l[c]) {
      d = C(u.Conv, c), o.Z$5(6);
      var y = o.o4e(9, 14, 21);
      l[c]["Conversion Line " + s.name] = (d[1] + d[0]) / y, d = C(u.Base, c), o.V4q(10);
      var b = o.o4e(1, 37, 5);
      l[c]["Base Line " + s.name] = (d["1" << b] + d[0]) / 2, !(c < u.Lag) && (l[c - u.Lag]["Lagging Span " + s.name] = l[c].Close);
    }
    f = [];
    function C(v, S) {
      var w, T;
      w = Number.MAX_VALUE, o.Z$5(49);
      var D = o.G4A(13, 10, 2);
      T = Number.MAX_VALUE * D;
      for (var F = S - v + 1; F <= S; F++) F < 0 || (w = Math.min(w, l[F].Low), T = Math.max(T, l[F].High));
      return [w, T];
    }
    for (c = Math.max(0, s.startFrom - u.Base); c < l.length; c++) {
      d = C(u.LeadB, c), o.V4q(0);
      var k = o.o4e(20, 18);
      g = (l[c]["Conversion Line " + s.name] + l[c]["Base Line " + s.name]) / k, o.Z$5(141);
      var M = o.G4A(13, 7, 14, 2185, 10);
      o.Z$5(2);
      var I = o.o4e(0, 2);
      p = (d[M] + d[0]) / I, l[c + u.Base] ? (m = "L", m += "eading Span A ", l[c + u.Base][m + s.name] = g, l[c + u.Base]["Leading Span B " + s.name] = p) : (x = {}, x["Leading Span A " + s.name] = g, x["Leading Span B " + s.name] = p, f.push(x));
    }
    s.appendFutureTicks(a, f);
  }, e.Studies.displayIchimoku = function (a, s, o) {
    var h, l, u, c, d, f, g;
    h = "Leading Span A " + s.name, l = "Leading Span B " + s.name, u = e.Studies.determineColor(s.outputs[s.outputMap[h]]), c = e.Studies.determineColor(s.outputs[s.outputMap[l]]), d = a.panels[s.panel], f = s.getYAxis(a), g = {
      topBand: h,
      bottomBand: l,
      topColor: u,
      bottomColor: c,
      skipTransform: d.name != s.chart.name,
      topAxis: f,
      bottomAxis: f,
      opacity: 0.3
    }, !s.highlight && a.highlightedDraggable && (g.opacity *= 0.3), e.fillIntersecting(a, s.panel, g), e.Studies.displaySeriesAsLine(a, s, o);
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "Ichimoku Clouds": {
      name: "Ichimoku Clouds",
      overlay: !0,
      calculateFN: e.Studies.calculateIchimoku,
      seriesFN: e.Studies.displayIchimoku,
      inputs: {
        "Conversion Line Period": 9,
        "Base Line Period": 26,
        "Leading Span B Period": 52,
        "Lagging Span Period": 26
      },
      outputs: {
        "Conversion Line": "#0000FF",
        "Base Line": i,
        "Leading Span A": "#00FF00",
        "Leading Span B": r,
        "Lagging Span": n
      }
    }
  })) : (t = "ichimoku feature requires first activa", t += "ting studies feature.", console.error(t));
};
xn = q => {
  var e, t;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "au", t += "to", e.Studies.calculateIntradayMomentum = function (n, r) {
    var i = me,
      a,
      s,
      o,
      h,
      l,
      u;
    if (a = r.chart.scrubbed, s = r.days, a.length < s + 1) {
      r.error = !0;
      return;
    }
    if (o = 0, h = 0, r.startFrom > 1) {
      o = a[r.startFrom - 1]["_totUp " + r.name], i.Z$5(6);
      var c = i.G4A(6, 0, 5);
      h = a[r.startFrom - c]["_totDn " + r.name];
    }
    for (var d = r.startFrom; d < a.length; d++) l = a[d].Close - a[d].Open, l > 0 ? o += l : h -= l, d >= s && (u = a[d - s].Close - a[d - s].Open, u > 0 ? o -= u : h += u), i.Z$5(142), a[d]["Result " + r.name] = i.G4A(o, o, h, 100), a[d]["_totUp " + r.name] = o, a[d]["_totDn " + r.name] = h;
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "Intraday Mtm": {
      name: "Intraday Momentum Index",
      calculateFN: e.Studies.calculateIntradayMomentum,
      inputs: {
        Period: 20
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 70,
          studyOverBoughtColor: t,
          studyOverSoldValue: 30,
          studyOverSoldColor: "auto"
        }
      }
    }
  })) : console.error("intradayMomentum feature requires first activating studies feature.");
};
vn = q => {
  var e, t, n, r, i, a, s;
  if (me.D0I(), e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies) i = "a", i += "uto", a = "e", a += "m", a += "a", s = "Keltner ", s += "Channel", e.Studies.calculateKeltner = function (h, l) {
    var u, c, d;
    u = "M", u += "A", u += " ", c = "Cl", c += "os", c += "e", d = "Moving A", d += "ver", d += "age ", d += "Type", e.Studies.MA(l.inputs[d], l.days, c, 0, "MA", h, l), e.Studies.calculateStudyATR(h, l), e.Studies.calculateGenericEnvelope(h, l, l.inputs.Shift, u + l.name, "ATR " + l.name);
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    Keltner: {
      name: s,
      overlay: !0,
      seriesFN: e.Studies.displayChannel,
      calculateFN: e.Studies.calculateKeltner,
      inputs: {
        Period: 50,
        Shift: 5,
        "Moving Average Type": a,
        "Channel Fill": !0
      },
      outputs: {
        "Keltner Top": "auto",
        "Keltner Median": "auto",
        "Keltner Bottom": i
      },
      attributes: {
        Shift: {
          min: 0.1,
          step: 0.1
        }
      }
    }
  });else {
    t = 1006619534, n = 2142209164, r = 2;
    for (var o = 1; me.U4I(o.toString(), o.toString().length, 95813) !== t; o++) console.error(""), r += 2;
    me.U4I(r.toString(), r.toString().length, 62956) !== n && console.error("keltner feature requires first activating studies feature.");
  }
};
yn = q => {
  var e, t, n;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, me.D0I(), e.Studies ? (n = "#", n += "FF00", n += "0", n += "0", e.Studies.calculateKlinger = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y, b, C;
    if (a = "Kl", a += "i", a += "n", a += "gerSignal", s = "_E", s += "MA-", s += "L", o = "_EMA", o += "-S", h = "_", h += "E", h += "MA-", h += "L ", l = "Long Cycl", l += "e", u = i.chart.scrubbed, me.D0I(), c = Number(i.inputs["Short Cycle"]), d = Number(i.inputs[l]), u.length < Math.max(c, d) + 1) {
      i.error = !0;
      return;
    }
    for (f = i.name + "_hist", g = "Klinger " + i.name, p = "KlingerSignal " + i.name, m = "_SV " + i.name, x = "_EMA-S " + i.name, y = h + i.name, b = Math.max(1, i.startFrom); b < u.length; b++) C = u[b].Volume, u[b]["hlc/3"] < u[b - 1]["hlc/3"] && (C *= -1), C && (u[b][m] = C);
    for (e.Studies.MA("exponential", c, m, 0, o, r, i), e.Studies.MA("exponential", d, m, 0, s, r, i), b = Math.max(d, i.startFrom); b < u.length && !(u[b].futureTick || u[b][x] === null || u[b][y] === null); b++) u[b][g] = u[b][x] - u[b][y];
    for (e.Studies.MA("exponential", Number(i.inputs["Signal Periods"]), g, 0, a, r, i), b = i.startFrom; b < u.length; b++) u[b][f] = u[b][g] - u[b][p];
    i.outputMap[f] = "";
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    Klinger: {
      name: "Klinger Volume Oscillator",
      seriesFN: e.Studies.displayHistogramWithSeries,
      calculateFN: e.Studies.calculateKlinger,
      inputs: {
        "Signal Periods": 13,
        "Short Cycle": 34,
        "Long Cycle": 55
      },
      outputs: {
        Klinger: "auto",
        KlingerSignal: n,
        "Increasing Bar": "#00DD00",
        "Decreasing Bar": "#FF0000"
      }
    }
  })) : (t = "klinger feature requires first acti", t += "vating studies featu", t += "re.", console.error(t));
};
bn = q => {
  var e, t, n, r, i, a, s, o, h, l, u, c;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "T", t += "im", t += "e", t += " Series Forecast", n = "a", n += "u", n += "to", r = "fiel", r += "d", i = "L", i += "inear ", i += "Reg Slop", i += "e", a = "a", a += "u", a += "to", s = "Li", s += "near Reg Fore", s += "cast", o = "tim", o += "e serie", o += "s", h = "Time Serie", h += "s", l = "ti", l += "me ", l += "s", l += "eries", u = "t", u += "sm", u += "a", c = "tim", c += "e series", e.Studies.prettify[c] = u, e.Studies.movingAverage.conversions.tsma = "time series", e.Studies.movingAverage.translations[l] = h, e.Studies.movingAverage.typeMap.tsma = "TimeSeries", e.Studies.movingAverage.typeMap[o] = "TimeSeries", e.Studies.calculateMovingAverageTimeSeries = function (d, f) {
    var g = me,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I;
    p = "m", p += "a", g.G9v(), f.ma = new e.Studies.StudyDescriptor(f.name, p, f.panel), f.ma.chart = f.chart, f.ma.days = f.days, f.ma.startFrom = f.startFrom, f.ma.inputs = f.inputs, e.Studies.calculateLinearRegressionIndicator(d, f.ma), m = f.name;
    for (var v in f.outputs) g.V4q(92), m = g.G4A(v, m, " ");
    x = parseInt(f.inputs.Offset, 10), isNaN(x) && (x = 0), y = f.chart.scrubbed, b = x;
    for (var S = f.startFrom - 1; S >= 0; S--) if (C = y[S][m], !(!C && C !== 0)) {
      if (b > 0) {
        b--;
        continue;
      }
      break;
    }
    for (k = [], S++; S < y.length; S++) M = y[S], S + x >= 0 && (S + x < y.length ? (g.V4q(2), y[g.o4e(S, x)][m] = M["Forecast " + f.name]) : (I = {}, I[m] = M["Forecast " + f.name], k.push(I)));
    f.appendFutureTicks(d, k);
  }, e.Studies.calculateLinearRegressionIndicator = function (d, f) {
    var g = me,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T,
      D,
      F,
      P,
      _,
      V,
      A;
    if (p = f.chart.scrubbed, p.length < f.days + 1) {
      f.error = !0;
      return;
    }
    m = f.inputs.Field, (!m || m == "field") && (m = "Close"), g.Z$5(0);
    var E = g.o4e(8, 7);
    g.Z$5(2);
    var L = g.G4A(0, 2);
    x = f.days * (f.days + E) / L, y = Math.pow(x, 2), g.G9v(), g.V4q(0);
    var N = g.G4A(8, 7);
    if (b = x * (2 * f.days + N) / 3, C = 0, k = 0, M = 0, f.startFrom) {
      g.V4q(2);
      var U = g.G4A(0, 1);
      I = p[f.startFrom - U]["_sums " + f.name], I && (k = I[0], C = I[1], M = I[2]);
    }
    for (var B = f.startFrom; B < p.length; B++) if (v = "R", v += "Sq", v += "uared ", S = "For", S += "eca", S += "s", S += "t ", w = "In", w += "ter", w += "c", w += "ept ", T = "objec", T += "t", D = p[B][m], D && typeof D == T && (D = D[f.subField]), !(!D && D !== 0) && (k += f.days * D - C, C += D, g.Z$5(0), M += Math.pow(D, g.G4A("2", 0)), !(B < f.days - 1))) {
      if (B > f.days - 1) {
        if (F = "obj", F += "ect", P = p[B - f.days][m], P && typeof P == F && (P = P[f.subField]), !P && P !== 0) continue;
        C -= P, M -= Math.pow(P, 2);
      }
      _ = (f.days * k - x * C) / (f.days * b - y), p[B]["Slope " + f.name] = _, V = (C - _ * x) / f.days, p[B][w + f.name] = V, p[B][S + f.name] = V + _ * f.days, g.Z$5(2);
      var O = g.o4e(1, 1);
      A = (f.days * b - y) / (f.days * M - Math.pow(C, O)), g.Z$5(45), p[B][v + f.name] = g.G4A(A, _, _), p[B]["_sums " + f.name] = [k, C, M];
    }
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "Lin Fcst": {
      name: s,
      overlay: !0,
      calculateFN: e.Studies.calculateLinearRegressionIndicator,
      inputs: {
        Period: 14,
        Field: "field"
      },
      outputs: {
        Forecast: "auto"
      }
    },
    "Lin Incpt": {
      name: "Linear Reg Intercept",
      overlay: !0,
      calculateFN: e.Studies.calculateLinearRegressionIndicator,
      inputs: {
        Period: 14,
        Field: "field"
      },
      outputs: {
        Intercept: a
      }
    },
    "Lin R2": {
      name: "Linear Reg R2",
      calculateFN: e.Studies.calculateLinearRegressionIndicator,
      inputs: {
        Period: 14,
        Field: "field"
      },
      outputs: {
        RSquared: "auto"
      }
    },
    "LR Slope": {
      name: i,
      calculateFN: e.Studies.calculateLinearRegressionIndicator,
      inputs: {
        Period: 14,
        Field: r
      },
      outputs: {
        Slope: n
      }
    },
    "Time Fcst": {
      name: t,
      overlay: !0,
      calculateFN: e.Studies.calculateLinearRegressionIndicator,
      inputs: {
        Period: 14,
        Field: "field"
      },
      outputs: {
        Forecast: "auto"
      }
    }
  })) : console.error("linearRegression feature requires first activating studies feature.");
};
Cn = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a,
    s;
  e.V4q(38), t = e.o4e("867553128", 32), n = -685539722, r = 2;
  for (var o = 1; e.U4I(o.toString(), o.toString().length, 67296) !== t; o++) i = typeof _CIQ < "u" ? _CIQ : q.CIQ, r += 2;
  e.J9C(r.toString(), r.toString().length, 90567) !== n && (i = ~_CIQ != "" ? _CIQ : q.CIQ), i.Studies ? (s = "#FF000", s += "0", i.Studies.calculateMACD = function (h, l) {
    var u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P;
    if (u = "M", u += "A", u += "C", u += "D ", c = "_", c += "MACD", c += "2", d = "_M", d += "ACD", d += "1", f = "Moving Av", f += "erage Type", g = "fi", g += "eld", p = l.chart.scrubbed, m = l.inputs, x = l.name, l.macd1Days || (l.macd1Days = parseFloat(m["Fast MA Period"])), l.macd2Days || (l.macd2Days = parseFloat(m["Slow MA Period"])), l.signalDays || (l.signalDays = parseFloat(m["Signal Period"])), l.days || (l.days = Math.max(l.macd1Days, l.macd2Days, l.signalDays)), p.length < l.days + 1) {
      l.error = !0;
      return;
    }
    for (y = l.inputs.Field, (!y || y == g) && (y = "Close"), b = m[f], b || (b = "exponential"), i.Studies.MA(b, l.macd1Days, y, 0, d, h, l), i.Studies.MA(b, l.macd2Days, y, 0, c, h, l), M = Math.max(l.startFrom, l.days - 1), C = M; C < p.length; C++) I = "_MAC", I += "D2 ", v = "_M", v += "AC", v += "D1", v += " ", S = "MA", S += "CD ", w = "_M", w += "A", w += "CD2", w += " ", k = p[C], (k["_MACD1 " + x] || k["_MACD1 " + x] === 0) && (k[w + x] || k["_MACD2 " + x] === 0) && (e.V4q(2), k[e.o4e(S, x)] = k[v + x] - k[I + x]);
    for (T = m["Signal MA Type"], T || (T = "exponential"), i.Studies.MA(T, l.signalDays, u + x, 0, "Signal", h, l), e.Z$5(2), D = e.o4e(x, "_hist"), C = M; C < p.length; C++) F = "S", F += "ig", F += "nal ", k = p[C], e.V4q(2), P = k[e.o4e(F, x)], !(!P && P !== 0) && (k[D] = k["MACD " + x] - k["Signal " + x]);
    l.outputMap[D] = "";
  }, i.Studies.studyLibrary = i.extend(i.Studies.studyLibrary, {
    macd: {
      name: "MACD",
      calculateFN: i.Studies.calculateMACD,
      seriesFN: i.Studies.displayHistogramWithSeries,
      inputs: {
        "Fast MA Period": 12,
        "Slow MA Period": 26,
        "Signal Period": 9
      },
      outputs: {
        MACD: "auto",
        Signal: s,
        "Increasing Bar": "#00DD00",
        "Decreasing Bar": "#FF0000"
      }
    }
  })) : (a = "macd feature requires first activati", a += "ng studies feature.", console.error(a));
};
Sn = q => {
  var e = me,
    t;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.D0I(), t.Studies ? (t.Studies.calculateMassIndex = function (n, r) {
    var i, a, s, o;
    if (i = "exponent", i += "ial", a = r.chart.scrubbed, a.length < Math.max(9, r.days + 1)) {
      r.error = !0;
      return;
    }
    for (var h = r.startFrom; h < a.length; h++) a[h]["_High-Low " + r.name] = a[h].High - a[h].Low;
    if (t.Studies.MA(i, 9, "_High-Low " + r.name, 0, "_EMA", n, r), t.Studies.MA("exponential", 9, "_EMA " + r.name, 0, "_EMA2", n, r), s = 0, a[r.startFrom - 1] && a[r.startFrom - 1]["_total " + r.name]) {
      e.Z$5(143);
      var l = e.o4e(13, 5, 5, 1, 14);
      s = a[r.startFrom - l]["_total " + r.name];
    }
    for (var u = Math.max(17, r.startFrom); u < a.length; u++) {
      if (s += a[u]["_EMA " + r.name] / a[u]["_EMA2 " + r.name], u >= 17 + r.days - 1) {
        o = "_EMA2", o += " ", a[u]["Result " + r.name] = s, e.Z$5(96);
        var c = e.o4e(19, 9, 5, 269, 16);
        e.Z$5(51);
        var d = e.G4A(15, 7, 6, 629);
        s -= a[u - r.days + c]["_EMA " + r.name] / a[u - r.days + d][o + r.name];
      }
      a[u]["_total " + r.name] = s;
    }
  }, t.Studies.displayMassIndex = function (n, r, i) {
    var a, s, o, h;
    t.Studies.displaySeriesAsLine(n, r, i), a = r.inputs["Bulge Threshold"], n.panels[r.panel], s = r.getYAxis(n), o = t.Studies.determineColor(r.outputs.Result), h = {
      skipTransform: n.panels[r.panel].name != r.chart.name,
      panelName: r.panel,
      band: "Result " + r.name,
      threshold: a,
      direction: 1,
      color: o,
      yAxis: s,
      opacity: 0.3
    }, !r.highlight && n.highlightedDraggable && (h.opacity *= +"0.3"), t.preparePeakValleyFill(n, h), e.G9v(), t.Studies.drawHorizontal(n, r, null, a, s, o);
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Mass Idx": {
      name: "Mass Index",
      seriesFN: t.Studies.displayMassIndex,
      calculateFN: t.Studies.calculateMassIndex,
      inputs: {
        Period: 25,
        "Bulge Threshold": 27
      },
      attributes: {
        "Bulge Threshold": {
          min: 20,
          max: 35,
          step: 0.1
        }
      }
    }
  })) : console.error("massIndex feature requires first activating studies feature.");
};
wn = q => {
  var e = me,
    t,
    n;
  e.G9v(), t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (n = "0 ", n += "to", n += " 10", n += "0", t.Studies.calculateMoneyFlowIndex = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p;
    if (a = i.chart.scrubbed, a.length < i.days + 1) {
      i.error = !0;
      return;
    }
    s = 0, o = 0, e.Z$5(144);
    var m = e.G4A(7, 106, 5, 0, 14);
    h = a[i.startFrom - m], l = "_rawMF " + i.name, u = "_cumMF " + i.name, c = "Result " + i.name, h && h[u] && (s = h[u][0], o = h[u][1]);
    for (var x = i.startFrom; x < a.length; x++) d = a[x]["hlc/3"], x > 0 && !a[x].futureTick && (e.Z$5(0), f = a[e.G4A(x, 1)]["hlc/3"], g = d * a[x].Volume, d > f ? s += g : d < f ? (g *= -1, o -= g) : g = 0, x > i.days && (p = a[x - i.days][l], p > 0 ? s -= p : o += p, o === 0 ? (e.Z$5(37), a[x][c] = e.o4e("100", 4)) : a[x].Volume && (e.Z$5(145), a[x][c] = e.G4A(o, s, 100, 1, 100))), a[x][l] = g, a[x][u] = [s, o]);
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "M Flow": {
      name: "Money Flow Index",
      range: n,
      calculateFN: t.Studies.calculateMoneyFlowIndex,
      inputs: {
        Period: 14
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 80,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: 20,
          studyOverSoldColor: "auto"
        }
      }
    }
  })) : console.error("moneyFlow feature requires first activating studies feature.");
};
kn = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h,
    l,
    u,
    c,
    d,
    f,
    g,
    p,
    m,
    x,
    y;
  e.G9v(), t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (n = "a", n += "uto", r = "fiel", r += "d", i = "Poi", i += "nts", a = "m", a += "a", s = "Moving Average", s += " Deviation", o = "a", o += "u", o += "to", h = "a", h += "ut", h += "o", l = "au", l += "t", l += "o", u = "m", u += "a", c = "Mo", c += "ving Average ", c += "E", c += "nvelope", d = "TripleExp", d += "onential", f = "DoubleExponentia", f += "l", g = "Hu", g += "l", g += "l", p = "Tripl", p += "e Exponential", m = "h", m += "ull", x = "te", x += "m", x += "a", y = "d", y += "e", y += "m", y += "a", t.Studies.prettify = t.extend({
    "2-exponential": y,
    "3-exponential": x,
    hull: "hma"
  }, t.Studies.prettify), t.extend(t.Studies.movingAverage, {
    conversions: {
      hma: m,
      dema: "2-exponential",
      tema: "3-exponential"
    },
    translations: {
      hull: "Hull",
      "2-exponential": "Double Exponential",
      "3-exponential": p
    },
    typeMap: {
      hma: g,
      hull: "Hull",
      dema: f,
      "2-exponential": "DoubleExponential",
      tema: d,
      "3-exponential": "TripleExponential"
    }
  }), t.Studies.calculateMovingAverageHull = function (b, C) {
    var k, M, I, v, S, w, T, D, F, P, _;
    for (k = "w", k += "m", k += "a", M = C.chart.scrubbed, I = C.inputs.Field, (!I || I == "field") && (I = "Close"), t.Studies.MA(k, C.days, I, 0, "_WMA1", b, C), t.Studies.MA("wma", Math.ceil(C.days / 2), I, 0, "_WMA2", b, C), v = C.startFrom - 1; v >= 0 && (S = M[v][I], S && typeof S == "object" && (S = S[C.subField]), !(S || S === 0)); v--);
    for (v++; v < M.length; v++) {
      w = "_WMA", w += "1 ", T = M[v], e.V4q(146);
      var V = e.G4A(78, 5, 15, 2, 3);
      T["_MMA " + C.name] = V * T["_WMA2 " + C.name] - T[w + C.name];
    }
    D = parseInt(C.inputs.Offset, 10), isNaN(D) && (D = 0), F = Math.floor(Math.sqrt(C.days)), t.Studies.MA("wma", F, "_MMA " + C.name, D, "_HMA", b, C), P = C.name;
    for (var A in C.outputs) e.Z$5(92), P = e.o4e(A, P, " ");
    for (v = Math.max(C.days + F - 1, C.startFrom); v < M.length; v++) _ = "_", _ += "HM", _ += "A", _ += " ", M[v][P] = M[v][_ + C.name];
  }, t.Studies.calculateMovingAverageDoubleExponential = function (b, C) {
    var k, M, I, v, S, w, T, D, F, P, _, V;
    for (k = "e", k += "m", k += "a", M = C.chart.scrubbed, I = C.inputs.Field, (!I || I == "field") && (I = "Close"), t.Studies.MA(k, C.days, I, 0, "_EMA1", b, C), t.Studies.MA("ema", C.days, "_EMA1 " + C.name, 0, "_EMA2", b, C), v = parseInt(C.inputs.Offset, 10), isNaN(v) && (v = 0), T = v, S = C.startFrom - 1; S >= 0; S--) if (w = M[S][I], w && typeof w == "object" && (w = w[C.subField]), !(!w && w !== 0)) {
      if (T > 0) {
        T--;
        continue;
      }
      break;
    }
    D = C.name;
    for (var A in C.outputs) e.Z$5(92), D = e.o4e(A, D, " ");
    for (F = [], S++; S < M.length; S++) if (!(S < 2 * (C.days - 1))) {
      P = M[S], e.Z$5(21);
      var E = e.G4A(15, 17);
      _ = E * P["_EMA1 " + C.name] - P["_EMA2 " + C.name], S + v >= 0 && (S + v < M.length ? (e.Z$5(2), M[e.G4A(S, v)][D] = _) : (V = {}, V[D] = _, F.push(V)));
    }
    C.appendFutureTicks(b, F);
  }, t.Studies.calculateMovingAverageTripleExponential = function (b, C) {
    var k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B, O;
    for (k = "_E", k += "M", k += "A", k += "3", M = "_", M += "EMA2 ", I = "_E", I += "M", I += "A2", v = "e", v += "m", v += "a", S = "Cl", S += "o", S += "se", w = "fi", w += "eld", T = C.chart.scrubbed, D = C.inputs.Field, (!D || D == w) && (D = S), t.Studies.MA(v, C.days, D, 0, "_EMA1", b, C), t.Studies.MA("ema", C.days, "_EMA1 " + C.name, 0, I, b, C), t.Studies.MA("ema", C.days, M + C.name, 0, k, b, C), F = parseInt(C.inputs.Offset, 10), isNaN(F) && (F = 0), V = F, P = C.startFrom - 1; P >= 0; P--) if (_ = T[P][D], _ && typeof _ == "object" && (_ = _[C.subField]), !(!_ && _ !== 0)) {
      if (V > 0) {
        V--;
        continue;
      }
      break;
    }
    A = C.name;
    for (var R in C.outputs) e.Z$5(92), A = e.G4A(R, A, " ");
    for (E = [], P++; P < T.length; P++) if (L = "_", L += "EMA", L += "3 ", N = "_", N += "E", N += "M", N += "A2 ", !(P < 3 * (C.days - 1))) {
      U = T[P], e.V4q(46);
      var H = e.o4e(4, 17, 17, 0);
      e.Z$5(147);
      var z = e.G4A(82, 4, 20, 17);
      B = H * U["_EMA1 " + C.name] - z * U[N + C.name] + U[L + C.name], P + F >= 0 && (P + F < T.length ? (e.Z$5(2), T[e.o4e(P, F)][A] = B) : (O = {}, O[A] = B, E.push(O)));
    }
    C.appendFutureTicks(b, E);
  }, t.Studies.calculateMAEnvelope = function (b, C) {
    var k, M, I, v, S, w, T, D, F, P, _;
    if (k = "per", k += "cent", M = "Shi", M += "ft T", M += "ype", I = "Moving Av", I += "e", I += "rage Type", v = "f", v += "iel", v += "d", S = C.inputs.Field, (!S || S == v) && (S = "Close"), t.Studies.MA(C.inputs[I], C.days, S, 0, "MA", b, C), w = C.inputs[M], T = C.inputs.Shift, !w) {
      D = "perc", D += "e", D += "n", D += "t", e.V4q(0), F = e.o4e("1961729865", 0), P = 2056493786, e.V4q(17), _ = e.o4e("2", 64);
      for (var V = 1; e.U4I(V.toString(), V.toString().length, 4094) !== F; V++) w = "", _ += 2;
      e.J9C(_.toString(), _.toString().length, 28482) !== P && (w = ""), w = D, T = C.inputs["Shift Percentage"];
    }
    w == k ? (e.Z$5(9), t.Studies.calculateGenericEnvelope(b, C, e.o4e(T, 100), "MA " + C.name)) : w == "points" && t.Studies.calculateGenericEnvelope(b, C, null, "MA " + C.name, null, Number(T));
  }, t.Studies.calculateMADev = function (b, C) {
    var k, M, I, v, S, w, T, D, F, P, _;
    if (k = "exp", k += "onent", k += "ial", M = "fi", M += "el", M += "d", I = C.chart.scrubbed, I.length < C.days + 1) {
      C.error = !0;
      return;
    }
    v = C.inputs.Field, (!v || v == M) && (v = "Close"), S = C.inputs["Points Or Percent"], S || (S = "Points"), w = C.inputs["Moving Average Type"], w || (w = k), t.Studies.MA(w, C.days, v, 0, "_MA", b, C), T = C.name + "_hist";
    for (var V = Math.max(C.startFrom, C.days - 1); V < I.length; V++) D = "o", D += "bject", F = I[V], P = F[v], P && typeof P == D && (P = P[C.subField]), _ = F["_MA " + C.name], (_ || _ === 0) && (S == "Points" ? (e.V4q(0), F[T] = e.o4e(P, _)) : (e.Z$5(148), F[T] = e.o4e(100, _, P, 1)));
    C.outputMap = {}, C.outputMap[C.name + "_hist"] = "";
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "MA Env": {
      name: c,
      overlay: !0,
      seriesFN: t.Studies.displayChannel,
      calculateFN: t.Studies.calculateMAEnvelope,
      inputs: {
        Period: 50,
        Field: "field",
        "Shift Type": ["percent", "points"],
        Shift: 5,
        "Moving Average Type": u,
        "Channel Fill": !0
      },
      outputs: {
        "MA Env Top": l,
        "MA Env Median": h,
        "MA Env Bottom": o
      },
      attributes: {
        Shift: {
          min: 0.1,
          step: 0.1
        }
      }
    },
    "MA Dev": {
      name: s,
      calculateFN: t.Studies.calculateMADev,
      seriesFN: t.Studies.displayHistogramWithSeries,
      inputs: {
        Period: 12,
        Field: "field",
        "Moving Average Type": a,
        "Points Or Percent": [i, "Percent"]
      },
      outputs: {
        "Increasing Bar": "#00DD00",
        "Decreasing Bar": "#FF0000"
      }
    },
    "High Low": {
      name: "High Low Bands",
      overlay: !0,
      seriesFN: t.Studies.displayChannel,
      calculateFN: function (b, C) {
        C.inputs["Moving Average Type"] = "triangular", t.Studies.calculateMAEnvelope(b, C);
      },
      inputs: {
        Period: 10,
        Field: r,
        "Shift Percentage": 5,
        "Channel Fill": !0
      },
      outputs: {
        "High Low Top": n,
        "High Low Median": "auto",
        "High Low Bottom": "auto"
      },
      attributes: {
        "Shift Percentage": {
          min: 0.1,
          step: 0.1
        }
      }
    }
  })) : console.error("movingAverages feature requires first activating studies feature.");
};
Tn = q => {
  var e = me,
    t,
    n;
  t = "unde", t += "fined", e.D0I(), n = typeof _CIQ !== t ? _CIQ : q.CIQ, n.Studies ? (n.Studies.calculatePSAR = function (r, i) {
    var a, s, o, h, l, u, c, d, f, g, p, m, x, y;
    if (a = i.chart.scrubbed, s = 0, o = null, h = !1, l = 0, e.D0I(), u = parseFloat(i.inputs["Minimum AF"]), c = parseFloat(i.inputs["Maximum AF"]), i.startFrom > 0) {
      e.Z$5(77);
      var b = e.G4A(2, 2, 17, 1, 11);
      l = a[i.startFrom - b]["Result " + i.name], e.Z$5(149);
      var C = e.G4A(18, 0, 20, 8, 9);
      if (d = a[i.startFrom - C]["_state " + i.name], d && d.length == 3) {
        s = d[0], o = d[1], f = 774281356, g = -591973981, p = 2;
        for (var k = 1; e.U4I(k.toString(), k.toString().length, 2678) !== f; k++) h = d[6], p += 2;
        e.U4I(p.toString(), p.toString().length, 45974) !== g && (h = d[5]), h = d[2];
      }
    }
    function M() {
      s = 0, o = null, h = !h;
    }
    for (var I = i.startFrom - 1; I < a.length - 1; I++) if (!(I < 0)) {
      if (a[I].futureTick) break;
      m = l, h ? ((!o || o < a[I].High) && (o = a[I].High, e.Z$5(2), s = Math.min(e.o4e(s, u), c)), e.V4q(150), l = e.o4e(m, s, o, m), x = Math.min(a[Math.max(1, I) - 1].Low, a[I].Low), l > a[I + 1].Low ? (l = o, M()) : l > x && (l = x)) : ((!o || o > a[I].Low) && (o = a[I].Low, e.V4q(2), s = Math.min(e.G4A(s, u), c)), e.Z$5(150), l = e.o4e(m, s, o, m), y = Math.max(a[Math.max(1, I) - 1].High, a[I].High), l < a[I + 1].High ? (l = o, M()) : l < y && (l = y)), e.V4q(2), a[e.G4A(I, 1)]["_state " + i.name] = [s, o, h], (!isNaN(a[I].High) || !isNaN(a[I].Low)) && (e.V4q(109), a[e.G4A("1", I)]["Result " + i.name] = l);
    }
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    PSAR: {
      name: "Parabolic SAR",
      overlay: !0,
      calculateFN: n.Studies.calculatePSAR,
      seriesFN: n.Studies.displayPSAR2,
      inputs: {
        "Minimum AF": 0.02,
        "Maximum AF": 0.2
      }
    }
  })) : console.error("parabolicSAR feature requires first activating studies feature.");
};
Dn = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h,
    l,
    u;
  t = -117563018, n = -1760659877, r = 2;
  for (var c = 1; e.U4I(c.toString(), c.toString().length, 28593) !== t; c++) i = !_CIQ == "" ? _CIQ : q.CIQ, r += 2;
  e.U4I(r.toString(), r.toString().length, 45941) !== n && (i = !_CIQ == "" ? _CIQ : q.CIQ), i = typeof _CIQ < "u" ? _CIQ : q.CIQ, i.Studies ? (a = "#", a += "d3", a += "e8", a += "ae", s = "#b", s += "3d98", s += "7", o = "a", o += "u", o += "to", h = "f", h += "ib", h += "on", h += "acci", l = "sta", l += "nd", l += "ard", u = "Pivot Poi", u += "n", u += "ts", i.Studies.calculatePivotPoints = function (d, f) {
    var g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B;
    g = "15", g += "min", p = "s", p += "ec", p += "ond";
    function O() {
      e.V4q(151);
      var Z = e.o4e(9, 11, 3, 0);
      e.Z$5(152);
      var X = e.G4A(6, 10, 19, 73, 14);
      w.pivotPoint = (w.high + w.low + y[H - Z].Close) / X, w.prevHigh = w.high, w.prevLow = w.low, w.hlSpread = w.high - w.low, w.high = w.low = 0;
    }
    if (m = "ye", m += "a", m += "r", x = "d", x += "a", x += "y", y = f.chart.scrubbed, b = x, C = d.layout.interval, k = d.layout.timeUnit, C == "day" ? b = "month" : i.ChartEngine.isDailyInterval(C) ? b = m : C == "second" || C == "millisecond" || k == p || k == "millisecond" ? b = g : (M = "m", M += "in", M += "ut", M += "e", I = d.layout.periodicity, C != M && (I *= C), I >= 30 && (b = "week")), e.G9v(), v = null, S = 7 - i.getFromNS(d.chart, "market.beginningDayOfWeek", 0), w = {
      pivotPoint: NaN,
      high: 0,
      low: 0,
      prevHigh: 0,
      prevLow: 0,
      hlSpread: 0
    }, f.startFrom > 1 && y[f.startFrom - 1]["_pointers " + f.name]) {
      T = -1835855718, D = 1897335183, F = 2;
      for (var R = 1; e.U4I(R.toString(), R.toString().length, 74125) !== T; R++) w = i.clone(y[f.startFrom - 1]["_pointers " + f.name]), F += 2;
      e.U4I(F.toString(), F.toString().length, 3040) !== D && (w = i.clone(y[f.startFrom * 2]["" * f.name]));
    }
    for (var H = Math.max(1, f.startFrom); H < y.length; H++) if (P = "_poin", P += "ters ", _ = "Piv", _ += "ot ", V = "1", V += "5m", V += "in", !!y[H - 1]) {
      if (w.high = Math.max(w.high, y[H - 1].High), w.low = Math.min(w.low > 0 ? w.low : y[H - 1].Low, y[H - 1].Low), f.inputs.Continuous || b == "year" && y[H].DT.getYear() != y[H - 1].DT.getYear() || b == "month" && y[H].DT.getMonth() != y[H - 1].DT.getMonth() || b == "week" && (y[H].DT.getDay() + S) % 7 < (y[H - 1].DT.getDay() + S) % 7 ? O() : b == "day" ? (v === null && (v = i.Studies.getMarketOffset({
        stx: d,
        localQuoteDate: y[H].DT,
        shiftToDateBoundary: !0
      })), A = new Date(new Date(+y[H].DT).setMilliseconds(y[H].DT.getMilliseconds() + v)), E = new Date(new Date(+y[H - 1].DT).setMilliseconds(y[H - 1].DT.getMilliseconds() + v)), E.getDate() !== A.getDate() && E.getDay() !== 0 && d.chart.market.isMarketDate(A) && (v = null, O())) : b == V && (y[H].DT.getHours() != y[H - 1].DT.getHours() || Math.floor(y[H].DT.getMinutes() / 15) != Math.floor(y[H - 1].DT.getMinutes() / 15)) && O(), y[H][_ + f.name] = w.pivotPoint, f.inputs.Type.toLowerCase() == "fibonacci") L = "Su", L += "p", L += "port 1", L += " ", y[H]["Resistance 1 " + f.name] = w.pivotPoint + 0.382 * w.hlSpread, y[H]["Resistance 2 " + f.name] = w.pivotPoint + 0.618 * w.hlSpread, y[H]["Resistance 3 " + f.name] = w.pivotPoint + w.hlSpread, y[H][L + f.name] = w.pivotPoint - 0.382 * w.hlSpread, y[H]["Support 2 " + f.name] = w.pivotPoint - 0.618 * w.hlSpread, y[H]["Support 3 " + f.name] = w.pivotPoint - w.hlSpread;else {
        N = "S", N += "u", N += "pp", N += "ort 3 ", U = "Res", U += "istance 3", U += " ", B = "Resist", B += "ance 2 ", e.V4q(15);
        var z = e.G4A(13, 1, 22, 9, 1);
        y[H]["Resistance 1 " + f.name] = z * w.pivotPoint - w.prevLow, y[H][B + f.name] = w.pivotPoint + w.hlSpread, y[H][U + f.name] = w.prevHigh + 2 * (w.pivotPoint - w.prevLow), e.Z$5(116);
        var W = e.G4A(1, 21, 1, 7);
        y[H]["Support 1 " + f.name] = W * w.pivotPoint - w.prevHigh, y[H]["Support 2 " + f.name] = w.pivotPoint - w.hlSpread, e.Z$5(153);
        var G = e.o4e(19, 1, 3, 12, 17);
        y[H][N + f.name] = w.prevLow - G * (w.prevHigh - w.pivotPoint);
      }
      y[H][P + f.name] = i.clone(w);
    }
  }, i.Studies.displayPivotPoints = function (d, f, g) {
    var p, m, x, y, b;
    f.noSlopes = !f.inputs.Continuous, i.Studies.displaySeriesAsLine(d, f, g), f.inputs.Shading && (p = "Resi", p += "st", p += "ance 1 ", m = "Resistanc", m += "e 2", x = "Re", x += "sistance 3", y = d.panels[f.panel], b = {
      noSlopes: f.noSlopes,
      opacity: f.parameters.opacity ? f.parameters.opacity : 0.2,
      skipTransform: y.name != f.chart.name,
      yAxis: f.getYAxis(d)
    }, !f.highlight && d.highlightedDraggable && (b.opacity *= 0.3), i.prepareChannelFill(d, i.extend({
      panelName: f.panel,
      topBand: "Resistance 3 " + f.name,
      bottomBand: "Resistance 2 " + f.name,
      color: i.Studies.determineColor(f.outputs[x])
    }, b)), i.prepareChannelFill(d, i.extend({
      panelName: f.panel,
      topBand: "Resistance 2 " + f.name,
      bottomBand: "Resistance 1 " + f.name,
      color: i.Studies.determineColor(f.outputs[m])
    }, b)), i.prepareChannelFill(d, i.extend({
      panelName: f.panel,
      topBand: p + f.name,
      bottomBand: "Pivot " + f.name,
      color: i.Studies.determineColor(f.outputs["Resistance 1"])
    }, b)), i.prepareChannelFill(d, i.extend({
      panelName: f.panel,
      topBand: "Support 1 " + f.name,
      bottomBand: "Pivot " + f.name,
      color: i.Studies.determineColor(f.outputs["Support 1"])
    }, b)), i.prepareChannelFill(d, i.extend({
      panelName: f.panel,
      topBand: "Support 2 " + f.name,
      bottomBand: "Support 1 " + f.name,
      color: i.Studies.determineColor(f.outputs["Support 2"])
    }, b)), i.prepareChannelFill(d, i.extend({
      panelName: f.panel,
      topBand: "Support 3 " + f.name,
      bottomBand: "Support 2 " + f.name,
      color: i.Studies.determineColor(f.outputs["Support 3"])
    }, b)));
  }, i.Studies.studyLibrary = i.extend(i.Studies.studyLibrary, {
    "Pivot Points": {
      name: u,
      overlay: !0,
      seriesFN: i.Studies.displayPivotPoints,
      calculateFN: i.Studies.calculatePivotPoints,
      inputs: {
        Type: [l, h],
        Continuous: !1,
        Shading: !1
      },
      outputs: {
        Pivot: o,
        "Resistance 1": "#b82c0b",
        "Support 1": "#699158",
        "Resistance 2": "#e36460",
        "Support 2": s,
        "Resistance 3": "#ffd0cf",
        "Support 3": a
      },
      parameters: {
        init: {
          opacity: 0.2
        }
      }
    }
  })) : console.error("pivotPoints feature requires first activating studies feature.");
};
An = q => {
  var e, t;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "au", t += "t", t += "o", e.Studies.calculatePrettyGoodOscillator = function (n, r) {
    var i, a, s, o, h;
    if (i = "_E", i += "MA", a = "exponentia", a += "l", s = r.chart.scrubbed, s.length < r.days + 1) {
      r.error = !0;
      return;
    }
    e.Studies.MA(a, r.days, "trueRange", 0, i, n, r), e.Studies.MA("simple", r.days, "Close", 0, "_SMA", n, r);
    for (var l = Math.max(1, r.startFrom); l < s.length; l++) o = "_E", o += "M", o += "A ", h = "_", h += "SMA ", !(!s[l]["_SMA " + r.name] || !s[l]["_EMA " + r.name]) && (s[l]["Result " + r.name] = (s[l].Close - s[l][h + r.name]) / s[l][o + r.name]);
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "Pretty Good": {
      name: "Pretty Good Oscillator",
      calculateFN: e.Studies.calculatePrettyGoodOscillator,
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 3,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: -3,
          studyOverSoldColor: t
        }
      }
    }
  })) : console.error("prettyGoodOscillator feature requires first activating studies feature.");
};
Mn = q => {
  var e, t, n, r;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "a", t += "uto", n = "fi", n += "eld", r = "Price", r += " Momentum Oscil", r += "lator", e.Studies.calculatePMO = function (i, a) {
    var s = me,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k;
    if (o = "_EM", o += "A", o += "x", s.G9v(), o += "10", h = "_ROCx10", h += " ", l = "f", l += "ield", u = {
      Smooth: Number(a.inputs["Smoothing Period"]) - 1,
      Double: Number(a.inputs["Double Smoothing Period"]) - 1,
      Signal: Number(a.inputs["Signal Period"])
    }, c = a.chart.scrubbed, c.length < u.Smooth + u.Double) {
      a.error = !0;
      return;
    }
    for (d = a.inputs.Field, (!d || d == l) && (d = "Close"), f = a.startFrom; f < c.length; f++) c[f] && c[f - 1] && (s.V4q(0), g = c[s.o4e(f, 1)][d], g && (c[f]["_ROCx10 " + a.name] = 1000 * (c[f][d] / g - 1)));
    e.Studies.MA("exponential", u.Smooth, h + a.name, 0, o, i, a), p = 147567954, m = 1116328192, x = 2;
    for (var M = 1; s.J9C(M.toString(), M.toString().length, 76594) !== p; M++) y = "PMO", y += "Signal", e.Studies.MA(y, u.Double, "PMOSignal" / a.name, 4, "PMO", i, a), e.Studies.MA("PMOSignal", u.Signal, "PMOSignal" / a.name, 2, "PMOSignal", i, a), a.zoneOutput = "PMOSignal", x += 2;
    s.J9C(x.toString(), x.toString().length, 12006) !== m && (b = "P", b += "M", b += "OSign", b += "al", C = "ex", C += "ponenti", C += "al", k = "ex", k += "ponen", k += "tial", e.Studies.MA(k, u.Double, "_EMAx10 " + a.name, 0, "PMO", i, a), e.Studies.MA(C, u.Signal, "PMO " + a.name, 0, b, i, a), a.zoneOutput = "PMO");
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    PMO: {
      name: r,
      calculateFN: e.Studies.calculatePMO,
      inputs: {
        Field: n,
        "Smoothing Period": 35,
        "Double Smoothing Period": 20,
        "Signal Period": 10
      },
      outputs: {
        PMO: t,
        PMOSignal: "#FF0000"
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 2.5,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: -2.5,
          studyOverSoldColor: "auto"
        }
      },
      attributes: {
        studyOverBoughtValue: {
          min: 0,
          step: "0.05"
        },
        studyOverSoldValue: {
          max: 0,
          step: "0.05"
        }
      }
    }
  })) : console.error("priceMomentumOscillator feature requires first activating studies feature.");
};
_n = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a,
    s,
    o;
  t = "unde", t += "fi", t += "ned", n = typeof _CIQ !== t ? _CIQ : q.CIQ, e.D0I(), n.Studies ? (r = "a", r += "u", r += "to", i = "vd", i += "m", i += "a", a = "RA", a += "VI", s = "Per", s += "c", s += "e", s += "nt", o = "Point", o += "s", n.Studies.calculatePriceOscillator = function (h, l) {
    var u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w;
    if (u = "_Long M", u += "A", c = "_", c += "S", c += "h", c += "ort MA", d = "fiel", d += "d", f = l.chart.scrubbed, g = Number(l.inputs["Short Cycle"]), p = Number(l.inputs["Long Cycle"]), f.length < Math.max(g, p) + 1) {
      l.error = !0;
      return;
    }
    if (m = l.inputs.Field, x = l.inputs["Moving Average Type"], x || (x = "simple"), (!m || m == d) && (m = "Close"), l.parameters.isVolume) {
      y = 2011368421, b = 1877112501, C = 2;
      for (var T = 1; e.U4I(T.toString(), T.toString().length, 94786) !== y; T++) k = "exponent", k += "ia", k += "l", m = "Volume", x = k, C += 2;
      e.J9C(C.toString(), C.toString().length, 98864) !== b && (m = "Volume", x = "exponential");
    }
    M = l.inputs["Points Or Percent"], M || (M = "Percent"), n.Studies.MA(x, g, m, 0, c, h, l), n.Studies.MA(x, p, m, 0, u, h, l), e.D0I();
    for (var D = Math.max(p, l.startFrom); D < f.length; D++) I = f[D], I && (v = I["_Short MA " + l.name], S = I["_Long MA " + l.name], (v || v === 0) && (S || S === 0) && (M == "Points" ? (e.V4q(0), I["Result " + l.name] = e.o4e(v, S)) : (e.Z$5(148), I["Result " + l.name] = e.o4e(100, S, v, 1)), l.outputs["Increasing Bar"] && (w = "Resu", w += "lt ", I[l.name + "_hist"] = I[w + l.name], l.outputMap = {}, l.outputMap[l.name + "_hist"] = "")));
  }, n.Studies.displayRAVI = function (h, l, u) {
    var c, d, f, g, p, m, x, y, b, C, k, M, I, v, S;
    c = "Dec", c += "reasing Bar", d = h.panels[l.panel], f = l.getContext(h), g = l.getYAxis(h), p = h.pixelFromPrice(0, d, g), e.V4q(154);
    var w = e.G4A(15, 10, 4, 25, 1);
    m = h.layout.candleWidth - w, m < 2 && (m = 1), x = n.Studies.determineColor(l.outputs["Increasing Bar"]), y = n.Studies.determineColor(l.outputs[c]), h.startClip(l.panel), h.canvasColor("stx_histogram"), l.underlay || (f.globalAlpha = 1), !l.highlight && h.highlightedDraggable && (f.globalAlpha *= 0.3);
    for (var T = 0; T < u.length; T++) b = "_", b += "his", b += "t", C = "_", C += "his", C += "t", k = "_", k += "h", k += "i", k += "st", M = u[T], e.Z$5(0), I = u[e.o4e(T, 1)], I || (I = h.getPreviousBar(h.chart, l.name + "_hist", T)), M && (v = 0, S = 0, l.parameters && l.parameters.studyOverZonesEnabled && (v = parseFloat(l.parameters.studyOverBoughtValue), S = parseFloat(l.parameters.studyOverSoldValue)), I ? M[l.name + "_hist"] > v && I[l.name + "_hist"] < M[l.name + k] ? f.fillStyle = x : M[l.name + C] < S && I[l.name + b] > M[l.name + "_hist"] ? f.fillStyle = y : f.fillStyle = "#CCCCCC" : f.fillStyle = "#CCCCCC", M.candleWidth && (m = Math.floor(Math.max(1, M.candleWidth - 2))), f.fillRect(Math.floor(h.pixelFromBar(T, d.chart) - m / 2), Math.floor(p), Math.floor(m), Math.floor(h.pixelFromPrice(M[l.name + "_hist"], d, g) - p)));
    h.endClip();
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    "Price Osc": {
      name: "Price Oscillator",
      calculateFN: n.Studies.calculatePriceOscillator,
      inputs: {
        Field: "field",
        "Short Cycle": 12,
        "Long Cycle": 26,
        "Moving Average Type": "ema",
        "Points Or Percent": [o, s]
      }
    },
    "Vol Osc": {
      name: "Volume Oscillator",
      calculateFN: n.Studies.calculatePriceOscillator,
      inputs: {
        "Short Cycle": 12,
        "Long Cycle": 26,
        "Points Or Percent": ["Points", "Percent"]
      },
      parameters: {
        init: {
          isVolume: !0
        }
      }
    },
    RAVI: {
      name: a,
      seriesFN: n.Studies.displayRAVI,
      calculateFN: n.Studies.calculatePriceOscillator,
      inputs: {
        Field: "field",
        "Moving Average Type": i,
        "Short Cycle": 7,
        "Long Cycle": 65
      },
      outputs: {
        "Increasing Bar": "#00DD00",
        "Decreasing Bar": "#FF0000"
      },
      centerline: 0,
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 3,
          studyOverBoughtColor: r,
          studyOverSoldValue: -3,
          studyOverSoldColor: "auto"
        }
      },
      attributes: {
        studyOverBoughtValue: {
          min: 0,
          step: "0.1"
        },
        studyOverSoldValue: {
          max: 0,
          step: "0.1"
        }
      }
    }
  })) : console.error("priceVolumeOscillator feature requires first activating studies feature.");
};
qn = q => {
  var e, t, n, r, i, a;
  e = "undefi", e += "ned", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (r = "a", r += "u", r += "t", r += "o", i = "au", i += "t", i += "o", a = "Prime Num", a += "ber Ba", a += "nds", t.Studies.calculatePrimeNumber = function (s, o) {
    var h = me,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x;
    l = [], u = o.chart.scrubbed;
    for (var y = o.startFrom; y < u.length; y++) if (c = u[y], !!c) {
      if (d = c.High, !isNaN(d)) {
        for (var b = 0; d > 0 && d <= 10; b++) d *= 10;
        for (I(d) && (d += 2), d = Math.ceil(d), d % 2 === 0 && d++; !I(d);) d += 2;
        d /= Math.pow(10, b);
      }
      if (f = c.Low, !isNaN(f)) {
        for (var C = 0; f > 0 && f <= 10; C++) f *= 10;
        if (I(f) && (f -= 2), f = Math.floor(f), f % 2 === 0 && f--, f > 0) {
          for (; !I(f);) f -= 2;
          f /= Math.pow(10, C);
        }
      }
      if (o.type == "Prime Number Bands") g = "Prime Bands B", g += "ottom ", isNaN(d) || (c["Prime Bands Top " + o.name] = d), isNaN(f) || (c[g + o.name] = Math.max(0, f));else {
        p = 0, h.Z$5(28);
        var k = h.G4A(16, 800, 12700);
        m = o.inputs["Tolerance Percentage"] * (d - f) / k, h.Z$5(101);
        var M = h.o4e(14, 100, 0, 7);
        x = d + f - M * c.Close, x < m ? p = 1 : x > m && (p = -1), p && (c["Result " + o.name] = p);
      }
    }
    function I(v) {
      h.G9v();
      var S;
      if (v <= 0) return !1;
      if (v != Math.floor(v)) return !1;
      if (l[v] === !0 || l[v] === !1) return l[v];
      S = parseInt(Math.sqrt(v), 10);
      for (var w = 2; w <= S; w++) if (v % w === 0) return l[v] = !1, !1;
      return l[v] = !0, !0;
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Prime Number": {
      name: "Prime Number Oscillator",
      range: "-1 to 1",
      calculateFN: t.Studies.calculatePrimeNumber,
      centerline: 0,
      inputs: {
        "Tolerance Percentage": 5
      },
      attributes: {
        "Tolerance Percentage": {
          min: 0.1,
          step: 0.1
        }
      }
    },
    "Prime Number Bands": {
      name: a,
      overlay: !0,
      calculateFN: t.Studies.calculatePrimeNumber,
      seriesFN: t.Studies.displayChannel,
      inputs: {
        "Channel Fill": !0
      },
      outputs: {
        "Prime Bands Top": i,
        "Prime Bands Bottom": r,
        "Prime Bands Channel": "auto"
      }
    }
  })) : (n = "primeNumber featu", n += "re requires first activating studies f", n += "eatur", n += "e.", console.error(n));
};
In = q => {
  var e = me;
  e.D0I();
  var t, n, r, i, a, s, o;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (r = "we", r += "ekl", r += "y", i = "d", i += "a", i += "il", i += "y", a = "#", a += "0", a += "0DD0", a += "0", s = "f", s += "iel", s += "d", o = "Pr", o += "ing's K", o += "now Sure Th", o += "ing", t.Studies.calculateKST = function (h, l) {
    var u, c, d, f, g, p, m, x, y, b, C, k, M, I, v;
    for (u = "K", u += "STSigna", u += "l", c = "Hea", c += "viest", c += " ", c += "SMA Period", d = "Li", d += "ght SM", d += "A Per", d += "iod", f = "Ligh", f += "t Rate of Change Pe", f += "riod", g = "Li", g += "ghtest Rate of", g += " Change Period", p = l.chart.scrubbed, m = l.inputs.Field, (!m || m == "field") && (m = "Close"), x = {}, y = {}, x[1] = Number(l.inputs[g]), x[2] = Number(l.inputs[f]), x[3] = Number(l.inputs["Heavy Rate of Change Period"]), x[4] = Number(l.inputs["Heaviest Rate of Change Period"]), y[1] = Number(l.inputs["Lightest SMA Period"]), e.V4q(17), y[e.o4e("2", 0)] = Number(l.inputs[d]), y[3] = Number(l.inputs["Heavy SMA Period"]), y[4] = Number(l.inputs[c]), b = Number(l.inputs["Signal Period"]), e.G9v(), C = l.startFrom; C < p.length; C++) if (p[C]) {
      for (k = 1; k <= 4; k++) if (M = "_", M += "ROC", C >= x[k] && p[C - x[k]] && p[C - x[k]][m]) {
        e.Z$5(52);
        var S = e.G4A(9718, 1944, 9720);
        e.Z$5(2), e.o4e(459, 5513), e.V4q(136);
        var w = e.o4e(18, 14865, 10, 873);
        e.Z$5(2);
        var T = e.o4e(97, 3);
        e.Z$5(28);
        var D = e.o4e(14, 4, 55);
        p[C][M + k + (S === w ? "E" : " ") + l.name] = T * (p[C][m] / p[C - x[k]][m] - D);
      }
    }
    for (k = 1; k <= 4; k++) t.Studies.MA("simple", y[k], "_ROC" + k + " " + l.name, 0, "_SMA" + k, h, l);
    for (C = l.startFrom; C < p.length; C++) for (p[C]["KST " + l.name] = null, k = 1; k <= 4; k++) {
      I = "KS", I += "T", I += " ", e.V4q(61);
      var F = e.G4A(19200, 9599, 4801, 3, 2);
      e.Z$5(1);
      var P = e.G4A(13, 20, 3813, 45749);
      v = p[C]["_SMA" + k + (94.69 >= F ? P : " ") + l.name], (v || v === 0) && (e.V4q(40), p[C][I + l.name] += e.o4e(k, v));
    }
    t.Studies.MA("simple", b, "KST " + l.name, 0, u, h, l);
  }, t.Studies.calculateSpecialK = function (h, l) {
    var u, c, d, f, g, p, m, x, y, b, C;
    for (u = l.chart.scrubbed, c = l.inputs.Field, (!c || c == "field") && (c = "Close"), d = l.inputs.Interval, d || (d = "daily"), f = {
      daily: [10, 15, 20, 30, 50, 65, 75, 100, 195, 265, 390, 530],
      weekly: [4, 5, 6, 8, 10, 13, 15, 20, 39, 52, 78, 104]
    }, g = {
      daily: [10, 10, 10, 15, 50, 65, 75, 100, 130, 130, 130, 195],
      weekly: [4, 5, 6, 8, 10, 13, 15, 20, 26, 26, 26, 39]
    }, p = l.startFrom; p < u.length; p++) if (u[p]) {
      for (m = 0; m < f[d].length; m++) if (p >= f[d][m] && u[p - f[d][m]] && u[p - f[d][m]][c]) {
        e.V4q(46);
        var k = e.G4A(2, 13, 13, 0);
        u[p]["_ROC" + m + " " + l.name] = 100 * (u[p][c] / u[p - f[d][m]][c] - k);
      }
    }
    for (m = 0; m < g[d].length; m++) x = "d", x += "ai", x += "l", x += "y", t.Studies.MA(d == x ? "simple" : "exponential", g[d][m], "_ROC" + m + " " + l.name, 0, "_MA" + m, h, l);
    for (p = l.startFrom; p < u.length; p++) for (y = "Re", y += "sult ", u[p][y + l.name] = null, m = 0; m < g[d].length; m++) {
      b = "Resu", b += "l", b += "t", b += " ", e.Z$5(3), e.G4A(6298, 14, 20), e.Z$5(11);
      var M = e.o4e(17, 14, 29, 7458);
      e.V4q(4);
      var I = e.o4e(1475, 7378, 11, 8);
      e.Z$5(0), e.o4e(6328, 14), e.Z$5(155);
      var v = e.G4A(10, 15, 11, 242, 715);
      e.V4q(2), e.G4A(95, 1613), e.V4q(156);
      var S = e.G4A(4, 76320, 69954, 4, 2);
      e.Z$5(3);
      var w = e.G4A(1, 10, 25);
      C = u[p]["_MA" + m + (M != I ? v !== 223.96 ? " " : S : "0x20bb" | w) + l.name], (C || C === 0) && (e.V4q(157), u[p][b + l.name] += e.o4e(C, 4, m, 1));
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Pring KST": {
      name: o,
      calculateFN: t.Studies.calculateKST,
      inputs: {
        Field: s,
        "Lightest Rate of Change Period": 10,
        "Lightest SMA Period": 10,
        "Light Rate of Change Period": 15,
        "Light SMA Period": 10,
        "Heavy Rate of Change Period": 20,
        "Heavy SMA Period": 10,
        "Heaviest Rate of Change Period": 30,
        "Heaviest SMA Period": 15,
        "Signal Period": 9
      },
      outputs: {
        KST: a,
        KSTSignal: "#FF0000"
      }
    },
    "Pring Sp-K": {
      name: "Pring's Special K",
      calculateFN: t.Studies.calculateSpecialK,
      inputs: {
        Field: "field",
        Interval: [i, r]
      }
    }
  })) : (n = "pring feature requires firs", n += "t activ", n += "ating studies feature.", console.error(n));
};
Fn = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h,
    l,
    u,
    c,
    d,
    f,
    g,
    p,
    m,
    x,
    y,
    b,
    C,
    k,
    M,
    I,
    v,
    S;
  if (t = "u", e.D0I(), t += "ndef", t += "in", t += "ed", n = typeof _CIQ !== t ? _CIQ : q.CIQ, r = typeof _timezoneJS < "u" ? _timezoneJS : q.timezoneJS, !n.Studies) console.error("projectedVolume feature requires first activating studies feature.");else if (!n.Studies.studyLibrary.PVAT) {
    n.Studies.initProjectedVolume = function (T, D, F, P, _, V) {
      var A, E, L;
      A = "Anch", A += "o", A += "r ", A += "Time";
      var {
        market: N
      } = T.chart;
      return E = "00:00", e.D0I(), N && (E = N.getNormalOpen()), E.match(/^[\d]{2}:[\d]{2}$/) && (E += ":00"), (!F["Anchor Time"] || !F[A].length) && (F["Anchor Time"] = E), L = n.Studies.initializeFN(T, D, F, P, _, V), T.currentlyImporting || (L.defaultAnchorTime = E), L;
    }, n.Studies.validateProjectedVolumeLookback = function (T, D) {
      e.D0I();
      var {
          interval: F,
          periodicity: P
        } = T.layout,
        {
          "Lookback Days": _
        } = D.inputs;
      return e.Z$5(158), e.o4e(10, _, P, F);
    }, n.Studies.calculateProjectedVolume = function (T, D) {
      var F, P, _, V, A, E, L, N, U, B, O, R, H, z, W, G, Z, X, ie, j, J, ae, se, ne, le, ue, oe, ce, Q, ee, re, de, he, fe, pe, ge, ve, be, _e, ye, we, Te, Pe, Le, Be, Ue, Ke, Je, $e, ke, Ae, He, Ne, Ge, dt, je;
      F = "Average Lin";
      function mt(Ve) {
        return e.G9v(), T.dateFromTick(Ve, null, !0, "scrubbed");
      }
      F += "e", P = "Market.Symbol", P += "ogy.is", P += "ForexS", P += "ymbol", _ = "Anchor Select", _ += "or", V = "heik", V += "in", V += "as", V += "hi", A = "o", A += "h", A += "l", A += "c";
      function wt(Ve) {
        var Qe;
        return Qe = "s", Qe += "c", Qe += "r", Qe += "ubbed", e.D0I(), T.tickFromDate(Ve, null, null, !0, Qe);
      }
      E = "t", E += "i", E += "c", E += "k";
      var {
          interval: kt,
          timeUnit: gt,
          aggregationType: et
        } = T.layout,
        {
          symbol: ft,
          scroll: xt,
          scrubbed: Ee,
          market: tt
        } = T.chart;
      if (L = D.type === "PAV", N = D.study ? D.study.name : D.type, n.ChartEngine.isDailyInterval(kt)) D.error = `${N} is Intraday Only`;else if (gt === E) D.error = `Tick mode not supported for ${N}`;else if (gt !== "minute") {
        U = 2145297394, B = -20952554, O = 2;
        for (var ut = 1; e.J9C(ut.toString(), ut.toString().length, 34992) !== U; ut++) D.error = `Sub-minute periodicities not supported for ${N}`, O += 2;
        e.J9C(O.toString(), O.toString().length, 81116) !== B && (e.V4q(95), D.error = `${e.G4A("Sub-minut", "ties not supported for", "e periodici", " ")}${N}`);
      } else !et || ![A, V].includes(et) ? D.error = `Aggregation type not supported for ${N}` : n.Studies.validateProjectedVolumeLookback(T, D) || (D.error = `Selected lookback/periodicity combo not supported for ${N}`);
      if (D.error) return;
      if (D.inputs[_] ? n.Studies.initAnchorHandle(T, D) : n.Studies.removeAnchorHandle(T, D), R = tt ? tt.getNormalOpen() : "00:00", R.match(/^[\d]{2}:[\d]{2}$/) && (R += ":00"), !T.currentlyImporting) {
        if (!D.defaultAnchorTime) D.defaultAnchorTime = R;else if (R !== D.defaultAnchorTime) {
          D.defaultAnchorTime = R, D.inputs["Anchor Time"] = R, n.Studies.repositionAnchor(T, D);
          return;
        }
      }
      var {
          "Lookback Days": Ye,
          "Anchor Time": pt
        } = D.inputs,
        [st, Ot, At = 0] = pt.split(":");
      H = n.getFn(P)(ft), z = D.getDependents(T), W = 0, G = [], z.forEach(({
        inputs: Ve,
        outputMap: Qe
      }) => {
        Ve.Period && (W = Math.max(parseInt(Ve.Period), W), G.push(...Object.keys(Qe)));
      }), D.dependentsOutputMap = G;
      function ot(Ve, Qe) {
        var nt, bt, it;
        return nt = mt(Ve), bt = tt.getOpen(nt) || ui(nt), it = wt(bt), Qe ? (it < 0 && (it = wt(Mt(bt, 1, !0))), it >= Ee.length ? !1 : it) : it;
      }
      X = ot(Ee.length - 1, !0);
      function Mt(Ve, Qe, nt) {
        for (e.G9v(); Qe;) Ve = new Date(new Date(Ve).setDate(Ve.getDate() + (nt ? 1 : -1))), tt.isMarketDate(Ve) && Qe--;
        return Ve;
      }
      ie = Math.ceil(Ee.length - 1 - xt), e.V4q(0), j = ot(e.G4A(ie, W)), H && Ee[j] && n.dateToStr(Ee[j].DT, "HH:mm") !== R && (e.V4q(0), j = ot(e.o4e(j, 1))), !H && D.startFrom > j && Ee[j] && Ee[j]["V " + D.name] !== void 0 && G.every(Ve => ![void 0, null].includes(Ee[j][Ve])) && X !== !1 ? Z = X : Z = j, J = Mt(mt(j), Ye), e.Z$5(38), J.setHours(e.G4A("0", 0), e.o4e("0", 0, e.Z$5(27)), e.G4A("0", 0, e.V4q(0)));
      function St(Ve) {
        e.G9v(), console.error(`Expected data for ${mt(Ve).toDateString()} but found none. This may be caused by gaps in your data or an improperly configured market definition.`);
      }
      if (e.Z$5(38), ae = ot(e.o4e("0", 32), !0), se = (ae || ae === 0) && wt(Mt(Ee[ae].DT, Ye, !0)), Ee[0].DT > J) if (T.quoteDriver) {
        if (T.quoteDriver.extendHistoricalData({
          from: J
        }), se > 0) Z = se;else return;
      } else return e.V4q(92), D.error = `${e.G4A("No", " enough data to calculate ", "t")}${N}`;
      if (Z < 0 || Z > Ee.length - 1) return;
      if (ne = Ee.length - D.startFrom === 1 && D.cachedFutureTicks && D.cachedLastProjection && +D.cachedLastProjection.DT == +Ee[Ee.length - 1].DT && Ee[Z]["PV " + D.name], ne) {
        le = "P", le += "V", le += " ", e.V4q(159);
        var ii = e.o4e(3, 10, 17, 32, 4);
        Ee[Ee.length - ii][le + D.name] = D.cachedLastProjection.projectedValue, D.appendFutureTicks(T, D.cachedFutureTicks), Z = D.startFrom;
      } else {
        ue = "P", ue += "V", ue += " ", D.cachedFutureTicks = null, D.cachedLastProjection = null, oe = [X], ce = [];
        for (var _t = 0; _t < Ye; _t++) Q = ot(oe[0] - 1), oe.unshift(Q);
        for (; oe[Ye] >= Z;) {
          if (ee = oe.pop(), !Ee[ee]) return St(ee);
          re = Ht(Ee[ee].DT);
          var {
            hours: Ct,
            minutes: at
          } = re;
          if (de = tt.getClose(Ee[ee].DT), he = void 0, !de) he = {
            hours: 24,
            minutes: 0
          };else {
            for (fe = tt.getNextClose(Ee[ee].DT), he = Ht(de); !(he.hours === 0 && he.minutes === 0) && de.getDate() === fe.getDate();) de = fe, fe = tt.getNextClose(fe);
            he = Ht(de), he.hours === 0 && (he.hours = 24);
          }
          pe = oe.slice();
          for (var Kt = 0; Kt < pe.length; Kt++) {
            if (ge = pe[Kt], !Ee[ge]) return St(ge);
            var {
              hours: Tt,
              minutes: ri
            } = Ht(Ee[ge].DT);
            if (Tt < Ct || Tt === Ct && ri < at) do ge++, ({
              hours: Tt,
              minutes: ri
            } = Ht(Ee[ge].DT)); while (!(Tt === Ct && ri === at));
            pe[Kt] = ge;
          }
          for (; Ct < he.hours || Ct === he.hours && at < he.minutes;) {
            ve = !1, be = void 0, _e = void 0, ye = 0, we = 0;
            for (var Ft = 0; Ft < pe.length; Ft++) if (Te = pe[Ft], Te !== null) {
              if (Pe = Ee[Te], !Pe) return St(Te);
              var {
                hours: Re,
                minutes: hi
              } = Ht(Pe.DT);
              Le = Pe.DT.getDate(), Re === Ct && hi === at && (ye += Pe.Volume, we++, pe[Ft]++, Ee[pe[Ft]].DT.getDate() !== Le ? pe[Ft] = null : ve || (({
                hours: be,
                minutes: _e
              } = Ht(Ee[pe[Ft]].DT)), ve = !0));
            }
            if (Ct = be, at = _e, we === 0) break;
            e.Z$5(9), Be = e.o4e(ye, we), Ee[ee] ? Ee[ee]["PV " + D.name] = Be : ce.push({
              ["PV " + D.name]: Be
            }), ee++;
          }
          oe.unshift(ot(oe[0] - 1));
        }
        D.cachedLastProjection = {
          DT: Ee[Ee.length - 1].DT,
          projectedValue: Ee[Ee.length - 1][ue + D.name]
        }, D.cachedFutureTicks = ce, D.appendFutureTicks(T, ce);
      }
      if (Ue = null, Ke = 0, Je = 0, ne && L) for (; Z > 0;) {
        if (e.V4q(0), ke = Ee[e.o4e(Z, 1)]["V " + D.name], ke || ke === 0) {
          Ke = ke;
          break;
        }
        Z--;
      }
      function Ht(Ve) {
        return e.D0I(), {
          hours: Ve.getHours(),
          minutes: Ve.getMinutes()
        };
      }
      for (var Nt = Z; Nt < Ee.length; Nt++) {
        if (Ae = Ee[Nt], He = Ae.Volume, Ne = Ae["PV " + D.name], Ae.futureTick || ($e = Nt), Ue === null && (Ue = n.Studies.getMarketOffset({
          stx: T,
          localQuoteDate: Ee[Nt].DT,
          shiftToDateBoundary: !0
        })), Ge = new Date(new Date(Ae.DT).getTime() + Ue), dt = Ee[Nt - 1] && new Date(new Date(Ee[Nt - 1].DT).getTime() + Ue), je = new r.Date(Ae.DT, tt.market_def.market_tz || "America/New_York"), je.setHours(st, Ot, At), e.V4q(2), je = new Date(e.o4e(je, Ue)), je.setDate(Ge.getDate()), dt && Ge.getDate() !== dt.getDate() && (Ue = null, e.V4q(38), Ke = e.o4e("0", 64), e.V4q(0), Je = e.G4A("0", 0)), Ge < je) {
          Ae["V " + D.name] = 0, Ae["PV " + D.name] = 0;
          continue;
        }
        if (L ? (Ke += He, Je += Ne) : (Ke = He, Je = Ne), Ae["V " + D.name] = Ke, ne || (Ae["PV " + D.name] = Je), [NaN, null, void 0].includes(Ke) && !Ae.futureTick) {
          D.error = `${N} requires volume`;
          return;
        }
      }
      D.cachedLastProjection.projectedValue = Ee[$e]["PV " + D.name], D.outputMap = {};
      function ui(Ve) {
        var Qe;
        return e.V4q(37), Ve.setHours(e.G4A("0", 0)), e.V4q(17), e.D0I(), Ve.setMinutes(e.o4e("0", 64)), Qe = n.Studies.getMarketOffset({
          stx: T,
          localQuoteDate: Ve
        }), new Date(Ve.getTime() + Qe);
      }
      D.outputMap["V " + D.name] = "", D.outputMap["PV " + D.name] = F, z.forEach(Ve => {
        Ve.startFrom = Z, Ve.study.calculateFN(T, Ve);
      });
    }, n.Studies.displayProjectedVolume = function (T, D, F) {
      var P, _, V, A, E, L, N, U, B;
      if (P = "ob", P += "ject", _ = "Aler", _ += "t Bar", D.error) return n.Studies.removeAnchorHandle(T, D);
      var {
        "Alert Threshold": O = ""
      } = D.inputs;
      e.Z$5(51);
      var R = e.o4e(6, 19, 17, 1939);
      e.Z$5(92);
      var H = e.G4A(2, 3, 5);
      V = parseInt(O.slice(0, R), H) / 100, A = D.outputs[_], typeof A === P && (A = A.color), D.volumeField = "V " + D.name, D.alignStepToSide = !0, D.extendToEndOfLastBar = !0, D.lineWidth = 2, E = T.canvasStyle("stx_volume_underlay_up").opacity, L = T.canvasStyle("stx_volume_underlay_down").opacity, D.colorFunction = function (W) {
        var G, Z, X, ie, j, J, ae;
        G = "V", G += " ";
        var {
          Open: se,
          Close: ne,
          iqPrevClose: le
        } = W;
        return Z = T.colorByCandleDirection ? se : le, e.Z$5(160), X = e.o4e(ne, Z), ie = W["PV " + D.name], j = W[G + D.name], e.V4q(161), J = e.G4A(1, ie, V), e.G9v(), ae = V < 0 ? j < J : j > J, {
          fill_color: ae && A || (X ? this.fill_color_down : this.fill_color_up),
          border_color: X ? this.border_color_down : this.border_color_up,
          opacity: ae ? 1 : X ? L : E,
          border_opacity: X ? L : E
        };
      }, N = D.study ? D.study.name : D.type;
      var {
        loadingMore: z
      } = T.chart;
      if (U = F.some(W => W && W[D.volumeField] && W["PV " + D.name]), B = F[0] && !F[0].futureTick && (F[0]["PV " + D.name] === void 0 || (D.dependentsOutputMap || []).some(W => [void 0, null].includes(F[0][W]))), !U && z) return D.error = `Fetching data for ${N}`;
      n.Studies.createVolumeChart(T, D, F), n.Studies.displaySeriesAsLine(T, D, F), D.anchorHandle && n.Studies.displayAnchorHandleAndLine(T, D, F), B && n.Studies.calculateProjectedVolume(T, D);
    }, i = 1750243284, a = -1918442186, s = 2;
    for (var w = 1; e.U4I(w.toString(), w.toString().length, 97627) !== i; w++) o = "hh:m", o += "m:ss", h = "+", h += "2", h += "5", h += "%", l = "hh:mm:", l += "s", l += "s", u = "Down Vol", u += "ume", c = "#cfbd0", c += "e", d = "Av", d += "erag", d += "e Line", f = "+2", f += "5%", n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
      PVAT: {
        name: "hh:mm:ss",
        range: f,
        yAxis: {
          ground: !1,
          initialMarginTop: 1,
          zoom: 9
        },
        calculateFN: n.Studies.calculateProjectedVolume,
        seriesFN: n.Studies.displayProjectedVolume,
        initializeFN: n.Studies.initProjectedVolume,
        removeFN: n.Studies.removeAnchorHandle,
        inputs: {
          "Lookback Days": 53,
          "Anchor Time": "step",
          "Alert Threshold": ["0 to max", d, "step", "Alert Threshold", "Alert Threshold", "#cfbd0e", "#8cc176", c, "#fe641c", "Projected Aggregate Volume", u, "#fe641c", "Anchor Time"],
          "Anchor Selector": !1
        },
        outputs: {
          "Average Line": "Anchor Selector",
          "Alert Bar": "#cfbd0e",
          "Up Volume": "Average Line",
          "Down Volume": "#8cc176"
        },
        parameters: {
          plotType: "Alert Threshold"
        },
        attributes: {
          "Anchor Time": {
            placeholder: "Alert Threshold",
            step: 2
          },
          "Alert Threshold": {
            defaultSelected: "Alert Threshold"
          }
        }
      },
      PAV: {
        name: "#cfbd0e",
        range: "Anchor Time",
        yAxis: {
          ground: !1,
          initialMarginTop: 1,
          zoom: 8
        },
        calculateFN: n.Studies.calculateProjectedVolume,
        seriesFN: n.Studies.displayProjectedVolume,
        initializeFN: n.Studies.initProjectedVolume,
        removeFN: n.Studies.removeAnchorHandle,
        inputs: {
          "Lookback Days": 78,
          "Anchor Time": "hh:mm:ss",
          "Anchor Selector": !1
        },
        outputs: {
          "Average Line": "Down Volume",
          "Up Volume": l,
          "Down Volume": h
        },
        parameters: {
          plotType: "#8cc176"
        },
        attributes: {
          "Anchor Time": {
            placeholder: o,
            step: 6
          }
        }
      }
    }), s += 2;
    e.U4I(s.toString(), s.toString().length, 28340) !== a && (g = "h", g += "h:", g += "mm:ss", p = "#b8", p += "2", p += "c0c", m = "#8cc1", m += "76", x = "h", x += "h:", x += "mm:s", x += "s", y = "#8c", y += "c176", b = "#fe64", b += "1c", C = "-", C += "7", C += "5%", k = "-", k += "5", k += "0", k += "%", M = "-25", M += "%", I = "+50", I += "%", v = "+", v += "10", v += "0%", S = "Proje", S += "cted Volume at Time", n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
      PVAT: {
        name: S,
        range: "0 to max",
        yAxis: {
          ground: !0,
          initialMarginTop: 0,
          zoom: 0
        },
        calculateFN: n.Studies.calculateProjectedVolume,
        seriesFN: n.Studies.displayProjectedVolume,
        initializeFN: n.Studies.initProjectedVolume,
        removeFN: n.Studies.removeAnchorHandle,
        inputs: {
          "Lookback Days": 10,
          "Anchor Time": "",
          "Alert Threshold": ["+150%", "+125%", v, "+75%", I, "+25%", "None", M, k, C, "-100%", "-125%", "-150%"],
          "Anchor Selector": !0
        },
        outputs: {
          "Average Line": b,
          "Alert Bar": "#cfbd0e",
          "Up Volume": y,
          "Down Volume": "#b82c0c"
        },
        parameters: {
          plotType: "step"
        },
        attributes: {
          "Anchor Time": {
            placeholder: x,
            step: 1
          },
          "Alert Threshold": {
            defaultSelected: "+50%"
          }
        }
      },
      PAV: {
        name: "Projected Aggregate Volume",
        range: "0 to max",
        yAxis: {
          ground: !0,
          initialMarginTop: 0,
          zoom: 0
        },
        calculateFN: n.Studies.calculateProjectedVolume,
        seriesFN: n.Studies.displayProjectedVolume,
        initializeFN: n.Studies.initProjectedVolume,
        removeFN: n.Studies.removeAnchorHandle,
        inputs: {
          "Lookback Days": 10,
          "Anchor Time": "",
          "Anchor Selector": !0
        },
        outputs: {
          "Average Line": "#fe641c",
          "Up Volume": m,
          "Down Volume": p
        },
        parameters: {
          plotType: "step"
        },
        attributes: {
          "Anchor Time": {
            placeholder: g,
            step: 1
          }
        }
      }
    }));
  }
};
En = q => {
  var e;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (e.Studies.calculatePsychologicalLine = function (t, n) {
    var r = me,
      i,
      a,
      s,
      o,
      h;
    if (i = n.chart.scrubbed, i.length < n.days + 1) {
      n.error = !0;
      return;
    }
    a = [], r.V4q(89);
    var l = r.G4A(10, 8, 20);
    s = l / n.days, r.V4q(38), o = r.o4e("0", 0);
    for (var u = Math.max(n.startFrom - n.days, 1); u < i.length && !i[u].futureTick; u++) h = +(i[u].Close > i[u - 1].Close), h && (o += s), a.push(h), a.length > n.days && (o -= a.shift() * s), !(u < n.startFrom) && (isNaN(i[u].Close) || (i[u]["Result " + n.name] = o));
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    PSY: {
      name: "Psychological Line",
      range: "0 to 100",
      calculateFN: e.Studies.calculatePsychologicalLine,
      inputs: {
        Period: 20
      }
    }
  })) : console.error("psychologicalLine feature requires first activating studies feature.");
};
Pn = q => {
  var e, t, n;
  me.G9v(), e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (n = "m", n += "a", e.Studies.calculateQStick = function (r, i) {
    var a, s;
    if (a = "Moving Ave", a += "rag", a += "e Type", s = i.chart.scrubbed, s.length < i.days + 1) {
      i.error = !0;
      return;
    }
    for (var o = i.startFrom; o < s.length; o++) s[o]["_Close-Open " + i.name] = s[o].Close - s[o].Open;
    e.Studies.MA(i.inputs[a], i.days, "_Close-Open " + i.name, 0, "Result", r, i);
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    QStick: {
      name: "QStick",
      calculateFN: e.Studies.calculateQStick,
      inputs: {
        Period: 8,
        "Moving Average Type": n
      }
    }
  })) : (t = "qstick feature requ", t += "ires first activating studies feature.", console.error(t));
};
Ln = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a;
  e.G9v(), t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (n = "#00", n += "FFF", n += "F", r = "#", r += "FF7", r += "F00", i = "f", i += "iel", i += "d", a = "Rainbow Moving ", a += "Avera", a += "ge", t.Studies.calculateRainbow = function (s, o) {
    var h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I;
    if (e.D0I(), h = "fi", h += "e", h += "l", h += "d", l = o.chart.scrubbed, l.length < o.days + 1) {
      o.error = !0;
      return;
    }
    u = o.inputs.Field, (!u || u == h) && (u = "Close"), c = u;
    for (var v = 1; v <= 10; v++) {
      t.Studies.MA("simple", o.days, c, 0, "SMA" + v, s, o), e.Z$5(162);
      var S = e.G4A(20, 4559, 3, 15, 47);
      e.V4q(163), e.o4e(2480, 2480, 11, 2458), e.Z$5(92);
      var w = e.o4e(397, 5156, 7);
      e.V4q(92);
      var T = e.G4A(2474, 9, 7);
      e.Z$5(60), e.G4A(5, 4335, 361, 361), e.V4q(2), e.G4A(634, 4436), c = "SMA" + v + (S > w ? T < 774.86 ? "l" : !0 : " ") + o.name;
    }
    function D(B, O) {
      var R, H;
      e.Z$5(164);
      var z = e.G4A(19, 11, 324, 11, 17);
      R = Number.MAX_VALUE * z, H = Number.MAX_VALUE;
      for (var W = O - B + 1; W <= O; W++) W < 0 || (R = Math.max(R, l[W].Close), H = Math.min(H, l[W].Close));
      return [H, R];
    }
    for (var F = Math.max(o.startFrom, 10); F < l.length; F++) if (l[F]) {
      if (l[F].futureTick) break;
      d = 0, f = 0, e.V4q(11);
      var P = e.o4e(9, 17, 37, 10);
      for (g = Number.MAX_VALUE * P, p = Number.MAX_VALUE, v = 1; v <= 10; v++) {
        m = "S", m += "M", m += "A", e.Z$5(71), e.G4A(4767, 18, 5, 2406, 2), e.V4q(63);
        var _ = e.o4e(1, 1, 11, 1523);
        e.Z$5(0);
        var V = e.G4A(210, 195);
        e.V4q(165);
        var A = e.G4A(8, 13, 89013, 6, 96460);
        e.V4q(0);
        var E = e.G4A(77, 13);
        x = l[F][m + v + (_ !== 407.63 ? V <= A ? " " : !1 : "0x81a" << E) + o.name], (x || x === 0) && (d += x, f++, g = Math.max(g, x), p = Math.min(p, x));
      }
      if (o.name.indexOf("Osc") > -1 && (y = "H", y += "HV/LLV Lookback", b = D(o.inputs[y], F), f)) {
        C = "O", C += "v", C += "e", C += "r ", k = "Un", k += "d", k += "er ", M = "O", M += "ve", M += "r ", e.Z$5(3);
        var L = e.G4A(7, 16, 109);
        l[F][o.name + "_hist"] = L * (l[F][u] - d / f) / Math.max(+"0.000001", b[1] - b[0]), e.Z$5(166);
        var N = e.o4e(3, 110, 5, 5, 13);
        e.V4q(46);
        var U = e.o4e(14, 13, 1, 0);
        l[F][M + o.name] = N * (g - p) / Math.max(0.000001, b[U] - b[0]), l[F][k + o.name] = -l[F][C + o.name], l[F]["Zero " + o.name] = 0;
      }
    }
    o.name.indexOf("Osc") > -1 && (I = "Positiv", I += "e ", I += "Ba", I += "r", o.outputMap = {}, o.outputMap["Over " + o.name] = I, o.outputMap["Under " + o.name] = "Negative Bar", o.outputMap["Zero " + o.name] = "", o.outputMap[o.name + "_hist"] = "");
  }, t.Studies.displayRainbowMA = function (s, o, h) {
    var l, u;
    l = s.panels[o.panel];
    for (var c = 10; c > 0; c--) u = "S", u += "M", u += "A", t.Studies.displayIndividualSeriesAsLine(s, o, l, u + c + " " + o.name, h);
  }, t.Studies.displayRainbowOsc = function (s, o, h) {
    var l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S;
    l = "stx_hi", l += "stogra", l += "m", u = "Zer", u += "o ", c = "O", c += "ver", c += " ", d = "Po", d += "sitive Bar", t.Studies.displaySeriesAsLine(s, o, h), f = s.panels[o.panel], g = o.getContext(s), p = o.getYAxis(s), s.startClip(o.panel), !o.highlight && s.highlightedDraggable && (g.globalAlpha *= 0.3), m = s.pixelFromPrice(0, f, p), x = f.name != o.chart.name, y = t.Studies.determineColor(o.outputs[d]), g.strokeStyle = y, s.plotDataSegmentAsLine("Over " + o.name, f, {
      skipTransform: x,
      label: !1,
      yAxis: p
    }), b = g.createLinearGradient(0, m, 0, p.flipped ? p.bottom : p.top), b.addColorStop(0, s.containerColor), b.addColorStop(1, y), t.prepareChannelFill(s, {
      skipTransform: x,
      color: b,
      opacity: !o.highlight && s.highlightedDraggable ? +"0.3" : 1,
      panelName: o.panel,
      topBand: c + o.name,
      bottomBand: "Zero " + o.name,
      yAxis: p
    }), C = t.Studies.determineColor(o.outputs["Negative Bar"]), g.strokeStyle = C, s.plotDataSegmentAsLine("Under " + o.name, f, {
      skipTransform: x,
      label: !1,
      yAxis: p
    }), k = g.createLinearGradient(0, m, 0, p.flipped ? p.top : p.bottom), k.addColorStop(0, s.containerColor), k.addColorStop(1, C), t.prepareChannelFill(s, {
      skipTransform: x,
      color: k,
      opacity: !o.highlight && s.highlightedDraggable ? 0.3 : 1,
      panelName: o.panel,
      topBand: u + o.name,
      bottomBand: "Under " + o.name,
      yAxis: p
    }), M = s.layout.candleWidth - 2, e.G9v(), M < 2 && (M = 1), s.canvasColor(l), o.underlay || (g.globalAlpha = 1), !o.highlight && s.highlightedDraggable && (g.globalAlpha *= 0.3), g.fillStyle = "#CCCCCC";
    for (var w = 0; w < h.length; w++) I = "_h", I += "i", I += "st", v = "_", v += "hi", v += "s", v += "t", S = h[w], S && (S[o.name + "_hist"] > 0 ? g.fillStyle = y : S[o.name + v] < 0 && (g.fillStyle = C), S.candleWidth && (M = Math.floor(Math.max(1, S.candleWidth - 2))), g.fillRect(Math.floor(s.pixelFromBar(w, f.chart) - M / 2), Math.floor(m), Math.floor(M), Math.floor(s.pixelFromPrice(S[o.name + I], f, p) - m)));
    s.endClip();
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Rainbow MA": {
      name: a,
      overlay: !0,
      calculateFN: t.Studies.calculateRainbow,
      seriesFN: t.Studies.displayRainbowMA,
      inputs: {
        Period: 2,
        Field: i
      },
      outputs: {
        SMA1: "#FF0000",
        SMA2: r,
        SMA3: "#FFFF00",
        SMA4: "#7FFF00",
        SMA5: "#00FF7F",
        SMA6: n,
        SMA7: "#007FFF",
        SMA8: "#0000FF",
        SMA9: "#7F00FF",
        SMA10: "#FF00FF"
      }
    },
    "Rainbow Osc": {
      name: "Rainbow Oscillator",
      calculateFN: t.Studies.calculateRainbow,
      seriesFN: t.Studies.displayRainbowOsc,
      centerline: 0,
      inputs: {
        Period: 2,
        Field: "field",
        "HHV/LLV Lookback": 10
      },
      outputs: {
        "Positive Bar": "#00DD00",
        "Negative Bar": "#FF0000"
      }
    }
  })) : console.error("rainbow feature requires first activating studies feature.");
};
Nn = q => {
  var e, t, n, r;
  e = "und", me.D0I(), e += "efin", e += "ed", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (n = "#00", n += "0", n += "0", n += "FF", r = "Random Wal", r += "k Index", t.Studies.calculateRandomWalk = function (i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x;
    if (s = a.chart.scrubbed, s.length < a.days + 1) {
      o = -1584534936, h = -1922844552, l = 2;
      for (var y = 1; me.J9C(y.toString(), y.toString().length, 5593) !== o; y++) {
        a.error = !1;
        return;
      }
      if (me.U4I(l.toString(), l.toString().length, 55965) !== h) {
        a.error = !0;
        return;
      }
    }
    for (var b = Math.max(2, a.startFrom); b < s.length; b++) {
      u = 0, c = s[b].High, d = s[b].Low, f = 0, g = 0;
      for (var C = 1; C <= a.days && !s[b].futureTick; C++) {
        if (b <= C) {
          f = g = 0;
          break;
        }
        u += s[b - C].trueRange, p = u / C * Math.sqrt(C), p && (m = (c - s[b - C].Low) / p, x = (s[b - C].High - d) / p, f = Math.max(f, m), g = Math.max(g, x));
      }
      !s[b].futureTick && (!isNaN(c) || !isNaN(d)) && (s[b]["Random Walk High " + a.name] = f, s[b]["Random Walk Low " + a.name] = g);
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Random Walk": {
      name: r,
      calculateFN: t.Studies.calculateRandomWalk,
      outputs: {
        "Random Walk High": "#FF0000",
        "Random Walk Low": n
      }
    }
  })) : console.error("randomWalk feature requires first activating studies feature.");
};
Vn = q => {
  var e, t, n, r, i;
  e = "u", e += "n", e += "defin", e += "ed", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (r = "#F", r += "F", r += "0000", i = "aut", i += "o", t.Studies.calculateRelativeVigor = function (a, s) {
    var o = me,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k,
      M,
      I,
      v,
      S,
      w,
      T;
    if (h = "tri", h += "angular", l = "_", l += "Ran", l += "g", l += "e ", u = "_", u += "C", u += "ha", u += "nge ", c = s.chart.scrubbed, c.length < s.days + 1) {
      d = -113785733, f = 206992491, g = 2;
      for (var D = 1; o.J9C(D.toString(), D.toString().length, 28379) !== d; D++) {
        s.error = !0;
        return;
      }
      if (o.U4I(g.toString(), g.toString().length, 228) !== f) {
        s.error = !1;
        return;
      }
    }
    for (p = s.startFrom; p < c.length; p++) m = "_Ch", m += "an", m += "g", m += "e ", x = c[p], !isNaN(x.Close) && !isNaN(x.Open) && (x[m + s.name] = x.Close - x.Open), !isNaN(x.High) && !isNaN(x.Low) && (x["_Range " + s.name] = x.High - x.Low);
    for (t.Studies.MA("triangular", 4, u + s.name, 0, "_Numer", a, s), t.Studies.MA("triangular", 4, l + s.name, 0, "_Denom", a, s), y = [], b = [], p = Math.max(s.startFrom - s.days, 0); p < c.length && (C = "Rel ", C += "Vig ", k = "_", k += "Denom", k += " ", M = "_Deno", M += "m", M += " ", I = "_Nu", I += "m", I += "er", I += " ", !c[p].futureTick); p++) if (!(c[p][I + s.name] === null && c[p][M + s.name] === null)) {
      for (y.push(c[p]["_Numer " + s.name]), b.push(c[p][k + s.name]), y.length > s.days && (y.shift(), b.shift()), v = 0, S = 0, w = 0; w < y.length; w++) v += y[w];
      for (w = 0; w < b.length; w++) S += b[w];
      S === 0 && (S = 1e-8), !(p < s.startFrom) && (o.V4q(9), c[p][C + s.name] = o.o4e(v, S));
    }
    for (t.Studies.MA(h, 4, "Rel Vig " + s.name, 0, "RelVigSignal", a, s), p = s.startFrom; p < c.length; p++) T = "R", T += "elVigSign", T += "al ", c[p][s.name + "_hist"] = c[p]["Rel Vig " + s.name] - c[p][T + s.name];
    s.outputMap[s.name + "_hist"] = "";
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Rel Vig": {
      name: "Relative Vigor Index",
      seriesFN: t.Studies.displayHistogramWithSeries,
      calculateFN: t.Studies.calculateRelativeVigor,
      inputs: {
        Period: 10
      },
      outputs: {
        "Rel Vig": i,
        RelVigSignal: "#FF0000",
        "Increasing Bar": "#00DD00",
        "Decreasing Bar": r
      }
    }
  })) : (n = "relativeVigor ", n += "feature requires first activating studies feature.", console.error(n));
};
Un = q => {
  var e = me,
    t,
    n,
    r,
    i;
  t = "unde", t += "fine", t += "d", n = typeof _CIQ !== t ? _CIQ : q.CIQ, e.G9v(), n.Studies ? (r = "a", r += "u", r += "t", r += "o", i = "fiel", i += "d", n.Studies.calculateRSI = function (a, s) {
    var o, h, l, u, c, d, f, g, p, m;
    if (o = s.chart.scrubbed, h = s.inputs.Field, (!h || h == "field") && (h = "Close"), o.length < s.days + 1) {
      s.error = !0;
      return;
    }
    function x(b, C) {
      var k;
      return C === 0 ? 100 : (e.G9v(), e.Z$5(9), k = e.o4e(b, C), e.Z$5(167), e.o4e("1", "100", k, 100, 0));
    }
    for (var y = s.startFrom; y < o.length; y++) if (l = "_av", l += "g", l += "L", l += " ", u = "_avgG", u += " ", !!y && (c = o[y], e.Z$5(0), d = o[e.G4A(y, 1)], !(!c[h] && c[h] !== 0) && !(!d[h] && d[h] !== 0))) {
      if (f = c[h] - d[h], g = Math.min(y, s.days), p = d[u + s.name], p || (e.Z$5(27), p = e.G4A("0", 0)), e.Z$5(9), p -= e.G4A(p, g), m = d[l + s.name], m || (m = 0), e.V4q(9), m -= e.G4A(m, g), f > 0) e.V4q(9), p += e.G4A(f, g);else if (f <= 0) e.Z$5(9), m -= e.G4A(f, g);else continue;
      y >= s.days && (p || p !== 0) && (m || m !== 0) && (c["RSI " + s.name] = x(p, m)), c["_avgG " + s.name] = p, c["_avgL " + s.name] = m;
    }
    s.zoneOutput = "RSI";
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    rsi: {
      name: "RSI",
      inputs: {
        Period: 14,
        Field: i
      },
      calculateFN: n.Studies.calculateRSI,
      range: "0 to 100",
      outputs: {
        RSI: "auto"
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 80,
          studyOverBoughtColor: r,
          studyOverSoldValue: 20,
          studyOverSoldColor: "auto"
        }
      }
    }
  })) : console.error("rsi feature requires first activating studies feature.");
};
Bn = q => {
  var e = me;
  e.G9v();
  var t, n, r;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (n = "a", n += "u", n += "t", n += "o", r = "fiel", r += "d", t.Studies.calculateSchaff = function (i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T;
    if (s = "_", s += "MA", s += "CD2", o = "_M", o += "A", o += "CD1", h = "Moving Average Ty", h += "pe", l = "Sho", l += "rt Cycle", u = a.chart.scrubbed, c = a.days, d = Number(a.inputs[l]), f = Number(a.inputs["Long Cycle"]), u.length < Math.max(c, d, f) + 1) {
      a.error = !0;
      return;
    }
    g = a.inputs.Field, e.D0I(), (!g || g == "field") && (g = "Close"), p = 0.5, t.Studies.MA(a.inputs[h], d, g, 0, o, i, a), t.Studies.MA(a.inputs["Moving Average Type"], f, g, 0, s, i, a), m = 0, x = 0;
    for (var D = a.startFrom; D < u.length; D++) y = "_M", y += "ACD1 ", b = u[D], !(D < f - 1) && (C = b[y + a.name], k = b["_MACD2 " + a.name], (C || C === 0 || k || k === 0) && (e.Z$5(0), b["_MACD " + a.name] = e.G4A(C, k)), M = b["_MACD " + a.name], !(D < f + (c - 1)) && (I = F(c, D, "_MACD"), m = I[1] > I[0] ? 100 * (M - I[0]) / (I[1] - I[0]) : m, (M || M === 0) && (v = "_", v += "P", v += "F", v += " ", S = "_", S += "PF ", b[S + a.name] = u[D - 1]["_PF " + a.name] ? u[D - 1]["_PF " + a.name] + p * (m - u[D - 1][v + a.name]) : m), w = b["_PF " + a.name], !(D < f + 2 * (c - 1)) && (I = F(c, D, "_PF"), x = I[1] > I[0] ? 100 * (w - I[0]) / (I[1] - I[0]) : x, (w || w === 0) && (T = "R", T += "es", T += "ul", T += "t ", b["Result " + a.name] = u[D - 1]["Result " + a.name] ? u[D - 1]["Result " + a.name] + p * (x - u[D - 1][T + a.name]) : x))));
    function F(P, _, V) {
      var A, E, L;
      A = null, E = null, e.D0I();
      for (var N = _ - P + 1; N <= _; N++) {
        e.Z$5(29), e.o4e(129998, 140000, 2), e.Z$5(168), e.o4e(9, 5, 10, 25, 1), e.V4q(50);
        var U = e.o4e(5164, 1308, 1291, 8);
        e.V4q(0), e.G4A(6255, 18), e.Z$5(78), e.o4e(6, 4230, 11, 8, 4817), e.V4q(0);
        var B = e.G4A(35190, 32844);
        L = u[N][V + (U <= 8262 ? " " : B !== 143.66 ? 162.25 : 689.35) + a.name], L && (A = A === null ? L : Math.min(A, L), E = E === null ? L : Math.max(E, L));
      }
      return [A, E];
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    Schaff: {
      name: "Schaff Trend Cycle",
      range: "0 to 100",
      calculateFN: t.Studies.calculateSchaff,
      inputs: {
        Period: 10,
        Field: r,
        "Short Cycle": 23,
        "Long Cycle": 50,
        "Moving Average Type": "ema"
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 75,
          studyOverBoughtColor: n,
          studyOverSoldValue: 25,
          studyOverSoldColor: "auto"
        }
      }
    }
  })) : console.error("schaffTrendCycle feature requires first activating studies feature.");
};
On = q => {
  var e = me,
    t,
    n;
  t = "undef", e.G9v(), t += "ined", n = typeof _CIQ !== t ? _CIQ : q.CIQ, n.Studies ? (n.Studies.calculateShinohara = function (r, i) {
    var a, s, o, h;
    if (a = i.chart.scrubbed, a.length < i.days + 1) {
      i.error = !0;
      return;
    }
    e.D0I(), s = {
      weakNum: 0,
      weakDen: 0,
      strongNum: 0,
      strongDen: 0
    }, i.startFrom > 1 && (o = "_", o += "accu", o += "ms ", s = n.clone(a[i.startFrom - 1][o + i.name]));
    for (var l = i.startFrom; l < a.length; l++) {
      if (s.weakNum += a[l].High - a[l].Close, s.weakDen += a[l].Close - a[l].Low, l > 0 && (s.strongNum += a[l].High - a[l - 1].Close, s.strongDen += a[l - 1].Close - a[l].Low), l >= i.days) {
        h = "Weak", h += " Ratio ", s.weakNum -= a[l - i.days].High - a[l - i.days].Close, s.weakDen -= a[l - i.days].Close - a[l - i.days].Low, e.Z$5(169);
        var u = e.G4A(8, 11, 7204, 10, 93);
        if (a[l][h + i.name] = u * s.weakNum / s.weakDen, l > i.days) {
          e.V4q(46);
          var c = e.o4e(3, 2, 1, 0);
          s.strongNum -= a[l - i.days].High - a[l - i.days - c].Close, e.V4q(3);
          var d = e.o4e(8, 12, 5);
          s.strongDen -= a[l - i.days - d].Close - a[l - i.days].Low, e.Z$5(0);
          var f = e.G4A(1300, 1200);
          a[l]["Strong Ratio " + i.name] = f * s.strongNum / s.strongDen;
        }
      }
      a[l]["_accums " + i.name] = n.clone(s);
    }
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    Shinohara: {
      name: "Shinohara Intensity Ratio",
      calculateFN: n.Studies.calculateShinohara,
      inputs: {
        Period: 26
      },
      outputs: {
        "Strong Ratio": "#E99B54",
        "Weak Ratio": "#5F7CB8"
      }
    }
  })) : console.error("shinohara feature requires first activating studies feature.");
};
Hn = q => {
  var e = me;
  e.D0I();
  var t, n, r, i, a, s, o;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (n = "0 t", n += "o ", n += "1", n += "00", r = "#", r += "FF00", r += "00", i = "0 ", i += "to", i += " ", i += "100", a = "Stoch", a += "astics (S", a += "imp", a += "le)", s = "a", s += "ut", s += "o", o = "e", o += "m", o += "a", t.Studies.calculateStochastics = function (h, l) {
    var u, c, d, f, g, p, m, x;
    if (u = "%", u += "K", u += " ", c = "Cl", c += "ose", l.smooth || (l.smooth = l.inputs.Smooth), d = l.inputs.Field, (!d || d == "field") && (d = c), f = l.inputs["%K Periods"], f || (f = l.days), g = l.chart.scrubbed, g.length < Math.max(f, l.days) + 1) {
      l.error = !0;
      return;
    }
    p = l.inputs["%K Smoothing Periods"], p && !l.inputs.Fast ? l.smooth = !0 : l.smooth && (p = 3), m = l.inputs["%D Periods"];
    function y(C, k, M) {
      var I, v, S, w, T, D, F;
      e.V4q(3), I = e.G4A(C, M, 1), v = Number.MAX_VALUE * -1, S = Number.MAX_VALUE, e.G9v();
      for (var P = I; P <= C; P++) w = "L", w += "o", w += "w", T = g[P][k == "Close" ? w : k], D = g[P][k == "Close" ? "High" : k], !(!T && T !== 0) && (!D && D !== 0 || (S = Math.min(S, T), v = Math.max(v, D)));
      return v == Number.MAX_VALUE * -1 || S == Number.MAX_VALUE ? null : (F = v == S ? 0 : (g[C][k] - S) / (v - S) * 100, F);
    }
    m || (m = 3), l.outputs.Fast && (l.outputMap = {}, l.outputMap["%K " + l.name] = "Fast", l.outputMap["%D " + l.name] = "Slow");
    for (var b = Math.max(f, l.startFrom); b < g.length; b++) x = y(b, d, f), x !== null && (g[b]["_Fast%K " + l.name] = y(b, d, f));
    t.Studies.MA("simple", l.smooth ? p : 1, "_Fast%K " + l.name, 0, "%K", h, l), t.Studies.MA("simple", m, u + l.name, 0, "%D", h, l);
  }, t.Studies.calculateStochMomentum = function (h, l) {
    var u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D;
    u = "_", u += "DHL2", c = "_D", c += "HL1 ", d = "_D", d += "H", d += "L", d += "1", f = "_D";
    function F(A, E) {
      var L, N;
      L = null, N = null;
      for (var U = E - A + 1; U <= E; U++) L = L === null ? M[U].Low : Math.min(L, M[U].Low), N = N === null ? M[U].High : Math.max(N, M[U].High);
      return [L, N];
    }
    if (f += "HL ", g = "e", g += "xpo", g += "nential", p = "_", p += "H", p += "S", p += "1", m = "ex", m += "ponenti", m += "a", m += "l", x = "%K Pe", x += "r", x += "i", x += "ods", y = Number(l.inputs[x]), b = Number(l.inputs["%K Smoothing Periods"]), C = Number(l.inputs["%K Double Smoothing Periods"]), k = Number(l.inputs["%D Periods"]), e.G9v(), M = l.chart.scrubbed, M.length < y + b + C - 1 || M.length < k) {
      l.error = !0;
      return;
    }
    for (I = Math.max(y, l.startFrom) - 1; I < M.length; I++) {
      v = "_", v += "D", v += "HL ", S = M[I], w = F(y, I), e.Z$5(170);
      var P = e.o4e(10, 11, 19, 1, 19);
      e.Z$5(171);
      var _ = e.o4e(62, 75, 5, 5, 10);
      S["_H " + l.name] = S.Close - (w[0] + w[P]) / ("2" >> _), e.V4q(2);
      var V = e.G4A(0, 1);
      S[v + l.name] = w[V] - w[0];
    }
    for (t.Studies.MA(m, b, "_H " + l.name, 0, p, h, l), t.Studies.MA("exponential", C, "_HS1 " + l.name, 0, "_HS2", h, l), t.Studies.MA(g, b, f + l.name, 0, d, h, l), t.Studies.MA("exponential", C, c + l.name, 0, u, h, l), I = y - 1; I < M.length; I++) T = "_", T += "H", T += "S2 ", D = "%", D += "K", D += " ", M[I][D + l.name] = M[I][T + l.name] / (0.5 * M[I]["_DHL2 " + l.name]) * 100;
    t.Studies.MA(l.inputs["%D Moving Average Type"], k, "%K " + l.name, 0, "%D", h, l), l.zoneOutput = "%K";
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Stch Mtm": {
      name: "Stochastic Momentum Index",
      calculateFN: t.Studies.calculateStochMomentum,
      inputs: {
        "%K Periods": 10,
        "%K Smoothing Periods": 3,
        "%K Double Smoothing Periods": 3,
        "%D Periods": 10,
        "%D Moving Average Type": o
      },
      outputs: {
        "%K": "auto",
        "%D": "#FF0000"
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 40,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: -40,
          studyOverSoldColor: s
        }
      }
    },
    stochastics: {
      name: a,
      range: i,
      calculateFN: t.Studies.calculateStochastics,
      inputs: {
        Period: 14,
        Field: "field",
        Smooth: !0
      },
      outputs: {
        Fast: "auto",
        Slow: r
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 80,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: 20,
          studyOverSoldColor: "auto"
        }
      }
    },
    Stochastics: {
      name: "Stochastics",
      range: n,
      calculateFN: t.Studies.calculateStochastics,
      inputs: {
        Field: "field",
        "%K Periods": 14,
        Fast: !1,
        "%K Smoothing Periods": 3,
        "%D Periods": 3
      },
      outputs: {
        "%K": "auto",
        "%D": "#FF0000"
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 80,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: 20,
          studyOverSoldColor: "auto"
        }
      },
      attributes: {
        "%K Smoothing Periods": {
          hidden: function () {
            return e.G9v(), this.inputs.Fast;
          }
        }
      },
      centerline: 50
    }
  })) : console.error("stochastics feature requires first activating studies feature.");
};
Rn = q => {
  var e, t;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "#8c", t += "c176", e.Studies.calculateSupertrend = function (n, r) {
    var i = me,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p;
    if (a = r.chart.scrubbed, a.length < r.days + 1) {
      r.error = !0;
      return;
    }
    e.Studies.calculateStudyATR(n, r);
    for (var m = r.startFrom; m < a.length; m++) if (s = "Tr", s += "e", s += "nd ", o = a[m], !!o) {
      i.Z$5(66);
      var x = i.G4A(5, 8, 14, 13);
      h = (o.High + o.Low) / x, l = r.inputs.Multiplier * o["ATR " + r.name], i.Z$5(0), u = i.o4e(h, l), i.Z$5(2), c = i.o4e(h, l), m && (d = "_Uptre", d += "nd", d += " ", a[m - 1] && a[m - 1].Close && a[m - 1].Close > a[m - 1]["_Uptrend " + r.name] && a[m - 1]["_Uptrend " + r.name] > u && (i.Z$5(0), u = a[i.G4A(m, 1)][d + r.name]), a[m - 1] && a[m - 1].Close && a[m - 1].Close < a[m - 1]["_Downtrend " + r.name] && a[m - 1]["_Downtrend " + r.name] < c && (i.Z$5(0), c = a[i.o4e(m, 1)]["_Downtrend " + r.name])), o["_Direction " + r.name] = 1, m && (f = "_Di", f += "rec", f += "ti", f += "on ", g = "_Upt", g += "ren", g += "d ", p = "_D", p += "owntr", p += "end ", i.Z$5(0), o["_Direction " + r.name] = a[i.G4A(m, 1)]["_Direction " + r.name], o.Close > a[m - 1][p + r.name] ? o["_Direction " + r.name] = 1 : o.Close < a[m - 1][g + r.name] && (o[f + r.name] = -1)), o["_Uptrend " + r.name] = u, o["_Downtrend " + r.name] = c, o[s + r.name] = o["_Direction " + r.name] > 0 ? u : c;
    }
    r.outputMap = {}, r.outputMap["Trend " + r.name] = "";
  }, e.Studies.displaySupertrend = function (n, r, i) {
    var a = me,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y;
    s = n.panels[r.panel], o = r.getContext(n), h = r.getYAxis(n), l = {
      skipTransform: s.name != r.chart.name,
      skipProjections: !0,
      label: n.preferences.labels,
      yAxis: h,
      highlight: r.highlight
    }, o.strokeStyle = b(n, i[i.length - 1]), o.lineWidth = 2, r.highlight && (o.lineWidth = 1.5), u = "Trend " + r.name;
    function b(T, D, F) {
      var P, _, V;
      P = 603828873, _ = 1092270246, V = 2;
      for (var A = 1; a.J9C(A.toString(), A.toString().length, 87707) !== P; A++) {
        if (D && D["_Direction " + r.name] < 0) return r.outputs.Downtrend;
        V += 2;
      }
      return a.J9C(V.toString(), V.toString().length, 36334) !== _ && (D || D["" % r.name] > 1) ? r.outputs.Downtrend : r.outputs.Uptrend;
    }
    for (var C = 0; s.chart.transformFunc && h != s.chart.yAxis && C < i.length; C++) c = i[C], c && c.transform && (c.transform[u] = s.chart.transformFunc(n, s.chart, c[u]));
    n.plotDataSegmentAsLine(u, s, l, b), o.lineWidth = 1, o.globalAlpha = 1, n.startClip(r.panel), !r.highlight && n.highlightedDraggable && (o.globalAlpha *= 0.3), a.V4q(72), a.o4e(5665, 674136, 6, 20, 16), a.V4q(2);
    var k = a.o4e(4656, 14);
    a.V4q(66), a.o4e(12, 25, 16, 35), a.V4q(172);
    var M = a.o4e(7417, 7, 2, 18, 8678);
    a.V4q(6);
    var I = a.o4e(17, 29471, 27221);
    a.Z$5(2);
    var v = a.o4e(9938, 20);
    for (a.Z$5(122), a.G4A(11, 105324, 17554, 8711), d = o.measureText(k !== 895.74 ? "\u25B2" : 9652 <= M ? I : v).width / 2, f = 0; f < i.length; f++) if (g = "_Direc", g += "t", g += "ion", g += " ", p = "_D", p += "ire", p += "ctio", p += "n ", !(!i[f] || !i[f - 1])) {
      if (i[f - 1][p + r.name] > i[f][g + r.name]) {
        m = "bo", m += "tt", m += "o", m += "m", o.fillStyle = r.outputs.Downtrend, o.textBaseline = m, x = n.pixelFromPrice(i[f].High, s, h);
        for (var S = 5; S <= 45; S += 10) h.flipped ? o.fillText("\u25B2", n.pixelFromBar(f) - d, x + S) : o.fillText("\u25BC", n.pixelFromBar(f) - d, x - S);
      } else if (i[f - 1]["_Direction " + r.name] < i[f]["_Direction " + r.name]) {
        o.fillStyle = r.outputs.Uptrend, o.textBaseline = "top", y = n.pixelFromPrice(i[f].Low, s, h);
        for (var w = 5; w <= 45; w += 10) h.flipped ? o.fillText("\u25BC", n.pixelFromBar(f) - d, y - w) : o.fillText("\u25B2", n.pixelFromBar(f) - d, y + w);
      }
    }
    n.endClip();
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    Supertrend: {
      name: "Supertrend",
      overlay: !0,
      seriesFN: e.Studies.displaySupertrend,
      calculateFN: e.Studies.calculateSupertrend,
      inputs: {
        Period: 7,
        Multiplier: 3
      },
      outputs: {
        Uptrend: t,
        Downtrend: "#b82c0c"
      },
      attributes: {
        Multiplier: {
          min: 0.1,
          step: +"0.1"
        }
      }
    }
  })) : console.error("supertrend feature requires first activating studies feature.");
};
zn = q => {
  var e, t, n;
  e = "u", e += "nde", e += "fined", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (n = "Accumulati", n += "ve Swing Index", t.Studies.calculateSwingIndex = function (r, i) {
    var a = me,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m;
    s = i.inputs["Limit Move Value"], a.D0I(), (s === null || isNaN(s)) && (a.Z$5(0), s = a.G4A("99999", 0)), o = i.chart.scrubbed, h = 0, i.startFrom > 1 && (h = o[i.startFrom - 1]["Result " + i.name]);
    for (var x = Math.max(1, i.startFrom); x < o.length; x++) {
      l = Math.abs(o[x].High - o[x - 1].Close), u = Math.abs(o[x].Low - o[x - 1].Close), c = Math.abs(o[x].High - o[x].Low), d = Math.abs(o[x - 1].Close - o[x - 1].Open), f = Math.max(l, u), g = Math.max(c, f), a.V4q(22), p = a.G4A(0.25, g, d), g == l ? (a.Z$5(173), p -= a.o4e("0.5", u)) : g == u && (a.Z$5(40), p -= a.G4A(0.5, l)), a.V4q(10);
      var y = a.G4A(1, 53, 3);
      a.Z$5(46);
      var b = a.G4A(2, 9, 9, 0);
      m = y * (o[x].Close - o[x - 1].Close + 0.5 * (o[x].Close - o[x].Open) + +"0.25" * (o[x - b].Close - o[x - 1].Open)) / p * (f / s), (p === 0 || s === 0) && (m = 0), i.type == "Swing" && (h = 0), h += m, o[x]["Result " + i.name] = h;
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Acc Swing": {
      name: n,
      calculateFN: t.Studies.calculateSwingIndex,
      inputs: {
        "Limit Move Value": 0.5
      }
    },
    Swing: {
      name: "Swing Index",
      calculateFN: t.Studies.calculateSwingIndex,
      inputs: {
        "Limit Move Value": 0.5
      }
    }
  })) : console.error("swingIndex feature requires first activating studies feature.");
};
Wn = q => {
  var e = me;
  e.D0I();
  var t, n, r, i, a;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, t.Studies ? (n = "#", n += "F", n += "F0", n += "000", r = "a", r += "u", r += "t", r += "o", i = "0 to 1", i += "0", i += "0", a = "Trend Intens", a += "i", a += "ty Index", t.Studies.calculateTrendIntensity = function (s, o) {
    var h, l, u, c, d, f, g, p, m, x, y, b;
    h = "S", h += "ig", h += "nal", l = "m", l += "a", e.D0I(), u = "fiel", u += "d";
    function C(k, M) {
      return Math.abs(M) < 1e-8 ? 100 : (e.V4q(174), e.D0I(), e.o4e(k, "100", 1, 64, 100, M));
    }
    if (c = o.chart.scrubbed, c.length < o.days + 1) {
      o.error = !0;
      return;
    }
    for (d = o.inputs.Field, (!d || d == u) && (d = "Close"), t.Studies.MA(l, o.days, d, 0, "_SMA", s, o), e.V4q(17), f = e.o4e("0", 96), g = 0, x = [], y = Math.ceil(o.days / 2), p = Math.max(0, o.startFrom - y); p < c.length; p++) b = "T", b += "II ", !(!c[p]["_SMA " + o.name] && c[p]["_SMA " + o.name] !== 0) && (m = c[p][d] - c[p]["_SMA " + o.name], m < 0 ? (e.Z$5(175), g += e.G4A(m, 1)) : f += m, x.push(m), x.length > y && (m = x.shift(), m < 0 ? (e.Z$5(175), g -= e.o4e(m, 1)) : f -= m), !(p < o.startFrom) && (c[p][b + o.name] = C(f, g)));
    t.Studies.MA("ema", o.inputs["Signal Period"], "TII " + o.name, 0, h, s, o);
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Trend Int": {
      name: a,
      calculateFN: t.Studies.calculateTrendIntensity,
      range: i,
      inputs: {
        Period: 14,
        Field: "field",
        "Signal Period": 9
      },
      outputs: {
        TII: r,
        Signal: n
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 80,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: 20,
          studyOverSoldColor: "auto"
        }
      }
    }
  })) : console.error("trendIntensity feature requires first activating studies feature.");
};
Gn = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a;
  if (t = "undefin", t += "e", t += "d", n = typeof _CIQ !== t ? _CIQ : q.CIQ, e.G9v(), !n.Studies) console.error("trix feature requires first activating studies feature.");else {
    n.Studies.calculateTRIX = function (o, h) {
      var l, u, c, d, f, g, p, m;
      if (l = "_M", l += "A", e.D0I(), l += "3", l += " ", u = "_MA1", u += " ", c = h.chart.scrubbed, c.length < h.days + 1) {
        h.error = !0;
        return;
      }
      d = h.name, e.Z$5(2), f = ["Close", e.G4A(u, d), e.G4A("_MA2 ", d), e.G4A(l, d)];
      for (var x = 0; x < f.length - 1; x++) n.Studies.MA("exponential", h.days, f[x], 0, "_MA" + (x + 1).toString(), o, h);
      g = f[3];
      for (var y = Math.max(1, h.startFrom); y < c.length; y++) e.V4q(0), p = c[e.o4e(y, 1)][g], p && (m = c[y][g], (m || m === 0) && (e.V4q(2), c[y][e.G4A("Result ", d)] = e.o4e(100, p, m, 1, e.V4q(148))));
    }, r = 63665040, i = 699414891, a = 2;
    for (var s = 1; e.J9C(s.toString(), s.toString().length, 32765) !== r; s++) n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
      TRIX: {
        name: "",
        calculateFN: n.Studies.calculateTRIX
      }
    }), a += 2;
    e.J9C(a.toString(), a.toString().length, 44782) !== i && (n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
      TRIX: {
        name: "TRIX",
        calculateFN: n.Studies.calculateTRIX
      }
    }));
  }
};
Zn = q => {
  var e = me,
    t,
    n;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.D0I(), t.Studies ? (n = "Tw", n += "i", n += "ggs Mon", n += "ey Flow", t.Studies.calculateTwiggsMoneyFlow = function (r, i) {
    var a, s, o, h, l, u, c, d;
    if (a = i.chart.scrubbed, a.length < i.days) {
      i.error = !0;
      return;
    }
    e.Z$5(40), s = e.o4e("0", 1), o = 0, e.V4q(176);
    var f = e.o4e(12, 10, 6, 9, 16);
    h = a[i.startFrom - f], h && (l = "_", l += "su", l += "mV ", h["_sumMF " + i.name] && (s = h["_sumMF " + i.name]), h[l + i.name] && (o = h["_sumV " + i.name]));
    for (var g = Math.max(1, i.startFrom); g < a.length; g++) {
      u = "_", u += "M", u += "FV", u += " ", c = Math.max(a[g - 1].Close, a[g].High), d = Math.min(a[g - 1].Close, a[g].Low), e.Z$5(0);
      var p = e.G4A(24, 22);
      e.V4q(2);
      var m = e.o4e(999987, 12);
      if (a[g]["_MFV " + i.name] = a[g].Volume * (p * a[g].Close - c - d) / (c - d === 0 ? m : c - d), g > i.days - 1) {
        s *= (i.days - 1) / i.days, e.V4q(10);
        var x = e.G4A(4, 20, 4);
        o *= (i.days - x) / i.days;
      }
      s += a[g][u + i.name], o += a[g].Volume, g > i.days - 1 && o && (e.Z$5(9), a[g]["Result " + i.name] = e.o4e(s, o > 0 ? o : 999999)), a[g]["_sumMF " + i.name] = s, a[g]["_sumV " + i.name] = o;
    }
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    Twiggs: {
      name: n,
      calculateFN: t.Studies.calculateTwiggsMoneyFlow,
      inputs: {
        Period: 21
      }
    }
  })) : console.error("twiggsMoneyFlow feature requires first activating studies feature.");
};
Qn = q => {
  var e, t, n;
  me.D0I(), e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? e.Studies.calculateTypicalPrice ? (n = "Ty", n += "pical Pri", n += "ce", e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "Typical Price": {
      name: n,
      calculateFN: e.Studies.calculateTypicalPrice,
      inputs: {
        Period: 14
      }
    },
    "Weighted Close": {
      name: "Weighted Close",
      calculateFN: e.Studies.calculateTypicalPrice,
      inputs: {
        Period: 14
      }
    }
  })) : (t = "typicalPrice feature", t += " requires first activating media", t += "nPrice featur", t += "e.", console.error(t)) : console.error("typicalPrice feature requires first activating studies feature.");
};
$n = q => {
  var e = me;
  e.G9v();
  var t, n, r, i, a, s;
  t = -814433, n = 888479185, r = 2;
  for (var o = 1; e.U4I(o.toString(), o.toString().length, 80069) !== t; o++) i = typeof _CIQ < "u" ? _CIQ : q.CIQ, r += 2;
  e.J9C(r.toString(), r.toString().length, 38779) !== n && (i = ~_CIQ === "" ? _CIQ : q.CIQ), i.Studies ? (a = "fiel", a += "d", s = "Ulcer Inde", s += "x", i.Studies.calculateUlcerIndex = function (h, l) {
    var u, c, d, f, g;
    e.G9v(), u = "_PD", u += "2 ";
    function p(m, x, y) {
      var b;
      b = null;
      for (var C = x - m + 1; C <= x; C++) C < 0 || (b = b === null ? c[C][y] : Math.max(b, c[C][y]));
      return b;
    }
    if (c = l.chart.scrubbed, c.length < 2 * l.days - 1) {
      l.error = !0;
      return;
    }
    for (d = l.inputs.Field, (!d || d == "field") && (d = "Close"), f = Math.max(l.startFrom, l.days - 1); f < c.length; f++) c[f]["_PD2 " + l.name] = Math.pow(100 * (c[f][d] / p(l.days, f, d) - 1), 2);
    for (i.Studies.MA("simple", l.days, u + l.name, 0, "_MA", h, l), f = Math.max(l.startFrom, 2 * (l.days - 1)); f < c.length; f++) g = c[f]["_MA " + l.name], (g || g === 0) && (c[f]["Result " + l.name] = Math.sqrt(g));
  }, i.Studies.studyLibrary = i.extend(i.Studies.studyLibrary, {
    Ulcer: {
      name: s,
      calculateFN: i.Studies.calculateUlcerIndex,
      inputs: {
        Period: 14,
        Field: a
      }
    }
  })) : console.error("ulcerIndex feature requires first activating studies feature.");
};
jn = q => {
  var e = me,
    t,
    n,
    r;
  t = "undef", t += "i", t += "n", t += "ed", n = typeof _CIQ !== t ? _CIQ : q.CIQ, e.D0I(), n.Studies ? (r = "a", r += "u", r += "t", r += "o", n.Studies.calculateUltimateOscillator = function (i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v;
    if (s = "Cyc", s += "l", s += "e ", s += "1", o = a.chart.scrubbed, h = [a.inputs[s], a.inputs["Cycle 2"], a.inputs["Cycle 3"]], l = Math.max(h[0], h[1], h[2]), o.length < l + 1) {
      a.error = !0;
      return;
    }
    u = h[0] * h[1], e.V4q(21);
    var S = e.G4A(11, 13);
    c = h[0] * h[S], e.G9v(), e.Z$5(98);
    var w = e.o4e(2, 11, 5, 8, 5);
    e.V4q(123);
    var T = e.o4e(18, 1, 6, 12);
    d = h[w] * h[T], f = [0, 0, 0], g = [0, 0, 0], a.startFrom && (p = "_", p += "a", p += "c", p += "ctr ", m = "_ac", m += "cbp ", o[a.startFrom - 1]["_accbp " + a.name] && (f = o[a.startFrom - 1][m + a.name].slice()), o[a.startFrom - 1]["_acctr " + a.name] && (g = o[a.startFrom - 1][p + a.name].slice()));
    for (var D = Math.max(1, a.startFrom); D < o.length; D++) {
      x = Math.min(o[D].Low, o[D - 1].Close), y = o[D].Close - x, b = Math.max(o[D].High, o[D - 1].Close) - x;
      for (var F = 0; F < h.length; F++) if (f[F] += y, g[F] += b, D > h[F]) {
        C = Math.min(o[D - h[F]].Low, o[D - h[F] - 1].Close), k = o[D - h[F]].Close - C, e.Z$5(177);
        var P = e.G4A(197, 10, 18, 12, 2);
        M = Math.max(o[D - h[F]].High, o[D - h[F] - P].Close) - C, f[F] -= k, g[F] -= M;
      }
      if (o[D]["_accbp " + a.name] = f.slice(), o[D]["_acctr " + a.name] = g.slice(), !(D < l)) {
        e.V4q(10);
        var _ = e.G4A(3, 9, 1);
        e.V4q(162);
        var V = e.o4e(6, 16, 12, 2, 34);
        I = d * f[0] / g[0] + c * f[1] / g[1] + u * f[_] / g[V], e.V4q(92), v = e.o4e(d, u, c), e.V4q(117), o[D]["Result " + a.name] = e.o4e(I, v, 100);
      }
    }
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    Ultimate: {
      name: "Ultimate Oscillator",
      calculateFN: n.Studies.calculateUltimateOscillator,
      inputs: {
        "Cycle 1": 7,
        "Cycle 2": 14,
        "Cycle 3": 28
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 70,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: 30,
          studyOverSoldColor: r
        }
      }
    }
  })) : console.error("ultimateOscillator feature requires first activating studies feature.");
};
Yn = q => {
  var e = me,
    t,
    n,
    r,
    i,
    a,
    s,
    o,
    h;
  if (t = "un", t += "d", t += "efi", t += "ned", n = typeof _CIQ !== t ? _CIQ : q.CIQ, n.Studies) s = "#e1e", s += "1", s += "e", s += "1", o = "f", o += "i", o += "el", o += "d", h = "Valua", h += "tion Lines", n.Studies.calculateValuationLines = function (u, c, d) {
    var f, g, p, m, x, y, b, C, k, M, I, v, S, w, T;
    f = "Display 1 Standard De", f += "viation (1\u03C3)", g = "Di", g += "splay Aver", g += "age", p = c.inputs.Field == "field" ? "Close" : c.inputs.Field, m = c.inputs["Average Type"], x = c.inputs[g], y = c.inputs[f], b = c.inputs["Display 2 Standard Deviation (2\u03C3)"], C = c.inputs["Display 3 Standard Deviation (3\u03C3)"], k = [];
    for (var D = 0; D < d.length; ++D) d[D] && !isNaN(d[D][p]) && k.push(d[D][p]);
    M = function (F, P) {
      var _, V, A, E, L, N, U, B, O, R, H;
      switch (_ = "harm", _ += "onic", V = "m", V += "ea", V += "n", A = F.length, E = 0, L = 0, N = 0, P) {
        case V:
          for (L = A; N < A; ++N) E += F[N];
          break;
        case _:
          for (E = A; N < A; ++N) {
            e.Z$5(42);
            var z = e.G4A(5, 6, 2, 19);
            L += z / F[N];
          }
          break;
        case "median":
          if (e.V4q(178), U = Math.floor(e.o4e(0, A, "2")), B = F.slice().sort(function (Z, X) {
            return Z > X ? 1 : (e.D0I(), Z < X ? -1 : 0);
          }), A % 2 === 0) {
            e.V4q(98);
            var W = e.G4A(12, 0, 19, 6, 38);
            E = B[U] + B[U - W], L = 2;
          } else {
            O = -1832747467, R = 1572714157, H = 2;
            for (var G = 1; e.J9C(G.toString(), G.toString().length, 77318) !== O; G++) E = B[U], L = 1, H += 2;
            e.J9C(H.toString(), H.toString().length, 16471) !== R && (E = B[U], L = 2);
          }
          break;
      }
      return e.Z$5(9), e.o4e(E, L);
    }(k, m), I = !(y || b || C) || function (F, P) {
      var _, V;
      _ = F.length, V = 0;
      for (var A = 0; A < _; ++A) V += Math.pow(F[A] - P, 2);
      return e.Z$5(9), Math.sqrt(e.o4e(V, _));
    }(k, M), c.data = {
      Average: x ? [M] : null,
      "1 Standard Deviation (1\u03C3)": y ? [M + I, M - I] : null,
      "2 Standard Deviation (2\u03C3)": b ? [M + I * 2, M - I * 2] : null,
      "3 Standard Deviation (3\u03C3)": C ? [M + I * 3, M - I * 3] : null
    }, v = I, c.parameters || (c.parameters = {}), C ? (e.Z$5(179), c.parameters.range = [e.G4A(v, I, 3, M), e.o4e(M, v, I, 3, e.Z$5(180))]) : b ? (e.Z$5(179), c.parameters.range = [e.G4A(v, I, 2, M), e.G4A(M, v, I, 2, e.Z$5(180))]) : y ? (e.V4q(29), c.parameters.range = [e.o4e(v, M, I), e.o4e(M, v, I, e.Z$5(92))]) : x && (e.Z$5(0), c.parameters.range = [e.G4A(M, v), e.o4e(M, v, e.Z$5(2))]), c.panel && (S = u.panels[c.panel], w = u.getYAxisByName(S, c.name), w && (w.decimalPlaces = S.chart.yAxis.printDecimalPlaces, T = {
      yAxis: w
    }, u.calculateYAxisRange(S, w, c.parameters.range[0], c.parameters.range[1]), u.createYAxis(S, T), u.drawYAxis(S, T)));
  }, n.Studies.displayValuationLines = function (u, c) {
    var d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A, E, L, N, U, B;
    d = "M", d += "E", d += "D", f = u.panels[c.panel], e.D0I(), g = c.getYAxis(u), p = c.getContext(u), m = c.data, x = c.parameters.labels, y = c.inputs["Average Type"], b = {
      mean: "AVG",
      median: d,
      harmonic: "HAVG"
    }, C = u.canvasStyle("ciq-valuation-average-line"), k = u.canvasStyle("ciq-valuation-deviation-line"), M = 3, e.Z$5(78);
    var O = e.G4A(19, 3, 18, 37, 0);
    I = u.getCanvasFontSize("stx_yaxis") + M * O;
    for (var R in m) if (m[R]) {
      for (e.Z$5(181), v = e.o4e(R, "Average"), S = n.Studies.determineColor(c.outputs[R]), w = m[R], T = 0; T < w.length; ++T) if (A = "\u03C3", A += ":", A += " ", E = "y", E += "ax", E += "i", E += "s", L = "da", L += "shed", N = "sol", N += "id", U = "so", U += "lid", D = w[T], F = u.pixelFromPrice(D, f, g), !(F <= f.top || F >= f.yAxis.bottom)) {
        if (V = v ? {
          pattern: C.borderStyle != "none" ? C.borderStyle || U : N,
          lineWidth: parseFloat(C.borderWidth) || 1,
          opacity: parseFloat(C.opacity) || 1,
          yAxis: g
        } : {
          pattern: k.borderStyle != "none" ? k.borderStyle || L : "dashed",
          lineWidth: parseFloat(k.borderWidth) || 1,
          opacity: parseFloat(k.opacity) || 1,
          yAxis: g
        }, u.plotLine(f.left, f.right, F, F, S, "line", p, f, V), x === E) {
          u.createYAxisLabel(f, u.formatYAxisPrice(D, f), F, S, null, p, g);
          continue;
        }
        F += Math.floor(V.lineWidth / 2), !(F + I >= f.yAxis.bottom) && (P = (v ? b[y] + ": " : R[0] + A) + u.formatYAxisPrice(D, f), _ = p.measureText(P).width, B = f.right - _ - M, g && g.position == "left" && (B = f.left + M), e.Z$5(182), p.strokeText(P, B, e.o4e(2, I, F, 0.5)));
      }
    }
  }, n.Studies.studyLibrary = n.extend(n.Studies.studyLibrary, {
    "val lines": {
      name: h,
      calculateFN: function () {},
      seriesFN: function (u, c, d) {
        n.Studies.calculateValuationLines(u, c, d), n.Studies.displayValuationLines(u, c);
      },
      overlay: !0,
      yAxisFN: function () {},
      inputs: {
        Field: o,
        "Average Type": ["mean", "median", "harmonic"],
        "Display Average": !0,
        "Display 1 Standard Deviation (1\u03C3)": !1,
        "Display 2 Standard Deviation (2\u03C3)": !1,
        "Display 3 Standard Deviation (3\u03C3)": !1
      },
      outputs: {
        Average: "#00afed",
        "1 Standard Deviation (1\u03C3)": s,
        "2 Standard Deviation (2\u03C3)": "#85c99e",
        "3 Standard Deviation (3\u03C3)": "#fff69e"
      }
    }
  });else {
    r = 696066873, i = 1139328803, a = 2;
    for (var l = 1; e.J9C(l.toString(), l.toString().length, 25307) !== r; l++) console.error("valuationLines feature requires first activating studies feature."), a += 2;
    e.U4I(a.toString(), a.toString().length, 96681) !== i && console.error("");
  }
};
Xn = q => {
  var e, t, n;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (t = "f", t += "i", t += "eld", n = "f", n += "iel", n += "d", e.Studies.calculateRelativeVolatility = function (r, i) {
    var a = me,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m;
    if (i.days = Number(i.inputs["Smoothing Period"]), a.D0I(), s = Number(i.inputs["STD Period"]), o = i.chart.scrubbed, o.length < i.days + s) {
      i.error = !0;
      return;
    }
    h = i.inputs.Field, (!h || h == "field") && (h = "Close"), i.std = new e.Studies.StudyDescriptor(i.name, "sdev", i.panel), i.std.chart = i.chart, i.std.days = s;
    function x(k, M) {
      return k + M === 0 ? 100 : (a.G9v(), a.Z$5(142), a.G4A(k, k, M, 100));
    }
    i.std.startFrom = i.startFrom, i.std.inputs = {
      Field: h,
      "Standard Deviations": 1,
      Type: "ma"
    }, i.std.outputs = {
      _STD: null
    }, e.Studies.calculateStandardDeviation(r, i.std), l = 0, u = 0, i.startFrom > 1 && (c = "_avgG", c += " ", l = o[i.startFrom - 1][c + i.name] || 0, u = o[i.startFrom - 1]["_avgL " + i.name] || 0);
    for (var y = Math.max(i.startFrom, i.days); y < o.length; y++) if (d = "_a", d += "vg", d += "L", d += " ", f = "Re", f += "l Vol ", g = o[y], a.Z$5(0), p = o[a.G4A(y, 1)], !(!g[h] && g[h] !== 0) && !(!p[h] && p[h] !== 0) && !(!g["_STD " + i.name] && g["_STD " + i.name] !== 0)) {
      if (g[h] > p[h]) {
        a.Z$5(0);
        var b = a.G4A(19, 18);
        l = (l * (i.days - b) + g["_STD " + i.name]) / i.days, u = u * (i.days - 1) / i.days;
      } else {
        m = "_", m += "STD ", a.Z$5(28);
        var C = a.G4A(15, 16, 239);
        u = (u * (i.days - C) + g[m + i.name]) / i.days, l = l * (i.days - 1) / i.days;
      }
      g[f + i.name] = x(l, u), g["_avgG " + i.name] = l, g[d + i.name] = u;
    }
    i.zoneOutput = "Rel Vol";
  }, e.Studies.calculateHistoricalVolatility = function (r, i) {
    var a = me,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y;
    if (s = i.chart.scrubbed, s.length < i.days + 1) {
      i.error = !0;
      return;
    }
    function b(S) {
      var w;
      return w = "w", w += "e", a.G9v(), w += "e", w += "k", isNaN(S) && (S = 365), r.layout.interval == "day" ? S : r.layout.interval == w ? 52 : r.layout.interval == "month" ? 12 : S;
    }
    o = i.inputs.Field, (!o || o == "field") && (o = "Close"), h = i.inputs["Standard Deviations"], h < 0 && (h = 1), a.Z$5(52);
    var C = a.G4A(78, 4, 88);
    if (l = C * Math.sqrt(b(i.inputs["Days Per Year"])) * h, u = [], c = 0, i.startFrom > 1) {
      d = 1598472774, f = -2040527491, g = 2;
      for (var k = 1; a.J9C(k.toString(), k.toString().length, 90264) !== d; k++) c = s[i.startFrom + 7]["" * i.name][2], g += 2;
      if (a.U4I(g.toString(), g.toString().length, 36937) !== f) {
        p = "_s", p += "tate ", a.Z$5(0);
        var M = a.o4e(20, 19);
        c = s[i.startFrom - M][p + i.name][0];
      }
      u = s[i.startFrom - 1]["_state " + i.name][1].slice();
    }
    a.D0I();
    for (var I = Math.max(1, i.startFrom); I < s.length; I++) {
      if (a.Z$5(0), m = s[a.G4A(I, 1)][o], m && (x = Math.log(s[I][o] / m), u.push(x), c += x, I >= i.days)) {
        y = 0, c /= i.days;
        for (var v = 0; v < u.length; v++) y += Math.pow(u[v] - c, 2);
        c *= i.days, c -= u.shift(), s[I]["Result " + i.name] = Math.sqrt(y / i.days) * l;
      }
      s[I]["_state " + i.name] = [c, u.slice()];
    }
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "Hist Vol": {
      name: "Historical Volatility",
      calculateFN: e.Studies.calculateHistoricalVolatility,
      inputs: {
        Period: 10,
        Field: n,
        "Days Per Year": [252, 365],
        "Standard Deviations": 1
      },
      attributes: {
        "Standard Deviations": {
          min: 0.1,
          step: 0.1
        }
      }
    },
    "Rel Vol": {
      name: "Relative Volatility",
      range: "0 to 100",
      calculateFN: e.Studies.calculateRelativeVolatility,
      inputs: {
        Field: t,
        "STD Period": 10,
        "Smoothing Period": 14
      },
      outputs: {
        "Rel Vol": "auto"
      },
      centerline: 50,
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 70,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: 30,
          studyOverSoldColor: "auto"
        }
      }
    }
  })) : console.error("volatilityIndex feature requires first activating studies feature.");
};
Kn = q => {
  var e = me,
    t,
    n;
  t = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.D0I(), t.Studies ? (n = "V", n += "olume P", n += "rofile", t.Studies.displayVolumeProfile = function (r, i, a) {
    var s, o, h, l, u, c, d, f, g, p, m, x, y, b, C, k, M, I, v, S, w, T, D, F, P, _, V, A;
    if (s = "st", s += "x_volume_prof", s += "ile", o = "c", o += "olor", !r || !r.chart.dataSet || (h = r.chart, l = i.parameters.numberOfBars, u = i.parameters.widthPercentage, c = i.parameters.displayBorder, d = i.parameters.displayVolume, (!l || l < 0) && (l = 30), l = Math.ceil(l), (!u || u < 0) && (u = 0.25), c !== !1 && (c = !0), d !== !0 && (d = !1), f = (h.highValue - h.lowValue) / l, f === 0)) return;
    g = [];
    for (var E = h.lowValue; E < h.highValue + 0.1; E += f) g.push([E, 0]);
    if (g.length < 2) {
      p = "Not enoug", p += "h data to render the ", p += "Volume", p += " Profile", m = "ch", m += "a", m += "rt", r.displayErrorAsWatermark(m, r.translateIf(p));
      return;
    }
    x = 0;
    for (var L = 0; L < a.length; L++) if (y = a[L], !!y) {
      b = y.Volume, i.panel == h.name && y.transform && (y = y.transform), e.V4q(0), C = g[0][e.G4A("0", 0)], k = 0;
      for (var N = 1; N < g.length; N++) k = g[N][0], (y.Low >= C && y.Low <= k || y.Low < C && y.High > k || y.High >= C && y.High <= k) && (g[N][1] += b, g[N][1] > x && (x = g[N][1])), C = k;
    }
    if (x === 0) {
      M = "Not enough data to", M += " render the Volume Profile", r.displayErrorAsWatermark("chart", r.translateIf(M));
      return;
    }
    r.setStyle("stx_volume_profile", o, t.Studies.determineColor(i.outputs["Bars Color"])), I = i.getContext(r), v = "stx-float-date", r.canvasFont(v, I), S = r.getCanvasFontSize(v), w = h.panel, T = w.yAxis.bottom, D = Math.round(h.right) - 0.5, F = h.width * u, P = r.canvasStyle("stx_volume_profile").borderTopColor, e.D0I(), _ = !t.isTransparent(r.canvasStyle(s).borderTopColor) && c;
    function U(B, O) {
      var R, H, z, W, G, Z, X, ie, j;
      O || (e.Z$5(40), D -= e.o4e("2", 1)), V.canvasColor(B), I.beginPath(), e.V4q(27), R = g[0][e.G4A("0", 0)], H = D;
      for (var J = 1; J < g.length; J++) {
        if (g[J][1]) {
          e.Z$5(28);
          var ae = e.G4A(13, 5, 64);
          if (z = Math.round(D - g[J][ae] * F / x) - 0.5, W = Math.round(V.pixelFromTransformedValue(R, w)) + 0.5, G = Math.round(V.pixelFromTransformedValue(g[J][0], w)) + 0.5, O || (W -= 0.5, G += 0.5, z += 0.5), W > T && (W = T), G < T) {
            if (I.moveTo(D, W), I.lineTo(D, G), I.lineTo(z, G), I.lineTo(z, W), O) (H > z || J == 1) && I.lineTo(H, W);else if (I.lineTo(D, W), d && (Z = t.condenseInt(g[J][1]), e.Z$5(0), X = e.o4e(W, G), S <= X - 2)) {
              try {
                ie = I.measureText(Z).width;
              } catch {
                ie = 0;
              }
              I.textBaseline = "top", j = I.fillStyle, I.fillStyle = P, e.Z$5(29), I.fillText(Z, e.o4e(3, z, ie), e.G4A(S, 2, X, 2, G, e.V4q(183))), I.fillStyle = j;
            }
          }
          H = z;
        } else H = D;
        R = g[J][0];
      }
      !i.highlight && r.highlightedDraggable && (I.globalAlpha *= 0.3), O || I.fill(), I.strokeStyle = P, O && I.stroke(), I.closePath();
    }
    V = r, U("stx_volume_profile", !1), _ && (A = "stx_v", A += "olu", A += "me_profile", U(A, !0)), I.globalAlpha = 1;
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "vol profile": {
      name: n,
      underlay: !0,
      seriesFN: t.Studies.displayVolumeProfile,
      calculateFN: null,
      inputs: {},
      outputs: {
        "Bars Color": "#b64a96"
      },
      customRemoval: !0,
      parameters: {
        init: {
          displayBorder: !0,
          displayVolume: !1,
          numberOfBars: 30,
          widthPercentage: 0.25
        }
      },
      attributes: {
        yaxisDisplayValue: {
          hidden: !0
        },
        panelName: {
          hidden: !0
        },
        flippedEnabled: {
          hidden: !0
        }
      }
    }
  })) : console.error("volumeProfile feature requires first activating studies feature.");
};
Jn = q => {
  var e, t, n, r, i, a, s, o;
  e = "unde", e += "fi", e += "n", e += "ed", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (r = "#b82c", r += "0", r += "c", i = "Pric", i += "e Volume Trend", a = "m", a += "a", s = "f", s += "ield", o = "Positi", o += "ve ", o += "Vo", o += "lume Index", t.Studies.calculateOnBalanceVolume = function (h, l) {
    var u = me,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b,
      C,
      k;
    c = "Clo", c += "se", d = "f", d += "i", d += "el", d += "d", f = l.inputs.Field, (!f || f == d) && (f = c), g = l.inputs["Min Tick Value"], p = !1, !g && g !== 0 && (p = !0, g = 0), m = l.chart.scrubbed, u.Z$5(17), x = u.o4e("0", 32);
    for (var M = l.startFrom; M < m.length; M++) C = "Re", C += "sul", C += "t ", y = m[M], !(!M || !y[f]) && (m[M - 1][f] && (u.V4q(0), b = m[u.o4e(M, 1)]), b && (y[f] - b[f] > g ? x = 1 : b[f] - y[f] > g ? (u.Z$5(17), x = -u.G4A("1", 32)) : p && (x = 0), k = b["Result " + l.name], k || (k = 0), k += y.Volume * x, y[C + l.name] = k));
  }, t.Studies.calculatePriceVolumeTrend = function (h, l) {
    var u = me,
      c,
      d,
      f,
      g;
    if (c = "fi", c += "el", c += "d", d = l.inputs.Field, (!d || d == c) && (d = "Close"), f = l.chart.scrubbed, g = 0, l.startFrom > 1) {
      u.Z$5(0);
      var p = u.G4A(5, 4);
      g = f[l.startFrom - "1" * p]["Result " + l.name];
    }
    for (var m = Math.max(1, l.startFrom); m < f.length; m++) if (f[m][d] && f[m - 1][d]) {
      u.V4q(125);
      var x = u.G4A(19, 2, 19, 3);
      u.Z$5(21);
      var y = u.o4e(6, 7);
      g += f[m].Volume * (f[m][d] - f[m - x][d]) / f[m - y][d], f[m]["Result " + l.name] = g;
    }
  }, t.Studies.calculateVolumeIndex = function (h, l) {
    var u = me,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b;
    if (c = "Ind", c += "ex ", d = l.inputs.Field, (!d || d == "field") && (d = "Close"), f = l.chart.scrubbed, f.length < l.days + 1) {
      l.error = !0;
      return;
    }
    if (g = 100, l.startFrom > 1) {
      u.V4q(184);
      var C = u.G4A(8, 10, 18, 8, 141);
      g = f[l.startFrom - C][c + l.name];
    }
    for (var k = Math.max(1, l.startFrom); k < f.length; k++) p = "objec", p += "t", m = f[k][d], x = f[k].Volume, m && typeof m == "object" && (x = m.Volume, m = m[l.subField]), u.V4q(0), y = f[u.o4e(k, 1)][d], b = f[k - 1].Volume, y && typeof y == p && (b = y.Volume, y = y[l.subField]), m && y && ((l.type == "Pos Vol" && x > b || l.type == "Neg Vol" && x < b) && (u.Z$5(9), g *= u.G4A(m, y)), f[k]["Index " + l.name] = g);
    u.G9v(), t.Studies.MA(l.inputs["Moving Average Type"], l.days, "Index " + l.name, 0, "MA", h, l);
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    "Neg Vol": {
      name: "Negative Volume Index",
      calculateFN: t.Studies.calculateVolumeIndex,
      inputs: {
        Period: 255,
        Field: "field",
        "Moving Average Type": "ma"
      },
      outputs: {
        Index: "auto",
        MA: "#FF0000"
      }
    },
    "On Bal Vol": {
      name: "On Balance Volume",
      calculateFN: t.Studies.calculateOnBalanceVolume,
      inputs: {}
    },
    "Pos Vol": {
      name: o,
      calculateFN: t.Studies.calculateVolumeIndex,
      inputs: {
        Period: 255,
        Field: s,
        "Moving Average Type": a
      },
      outputs: {
        Index: "auto",
        MA: "#FF0000"
      }
    },
    "Price Vol": {
      name: i,
      calculateFN: t.Studies.calculatePriceVolumeTrend,
      inputs: {
        Field: "field"
      }
    },
    "Trade Vol": {
      name: "Trade Volume Index",
      calculateFN: t.Studies.calculateOnBalanceVolume,
      inputs: {
        "Min Tick Value": 0.5
      }
    },
    "Vol ROC": {
      name: "Volume Rate of Change",
      calculateFN: function (h, l) {
        me.D0I(), t.Studies.calculateRateOfChange ? t.Studies.calculateRateOfChange(h, l) : (console.error("Volume Rate of Change study requires first activating momentum feature."), t.Studies.calculateRateOfChange = function (u, c) {});
      },
      parameters: {
        init: {
          isVolume: !0
        }
      }
    },
    "vol undr": {
      name: "Volume Underlay",
      underlay: !0,
      range: "0 to max",
      yAxis: {
        ground: !0,
        initialMarginTop: 0,
        position: "none",
        zoom: 0,
        heightFactor: 0.25
      },
      seriesFN: t.Studies.createVolumeChart,
      calculateFN: t.Studies.calculateVolume,
      inputs: {},
      outputs: {
        "Up Volume": "#8cc176",
        "Down Volume": r
      },
      customRemoval: !0,
      removeFN: function (h, l) {
        h.layout.volumeUnderlay = !1, h.changeOccurred("layout");
      },
      attributes: {
        panelName: {
          hidden: !0
        }
      }
    }
  })) : (n = "volumeStudies feature requires first activating studies f", n += "eature.", console.error(n));
};
es = q => {
  var e, t, n, r;
  e = "undefine", e += "d", t = typeof _CIQ !== e ? _CIQ : q.CIQ, t.Studies ? (n = "#0", n += "0FF00", r = "Vortex Indi", r += "c", r += "at", r += "or", t.Studies.calculateVortex = function (i, a) {
    var s = me,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y,
      b;
    if (o = a.chart.scrubbed, h = a.days, o.length < h + 1) {
      a.error = !0;
      return;
    }
    l = {
      tr: 0,
      vmPlus: 0,
      vmMinus: 0
    }, a.startFrom > 1 && (l = t.clone(o[a.startFrom - 1]["_totals " + a.name])), s.G9v();
    for (var C = Math.max(a.startFrom, 1); C < o.length; C++) u = "_VMMinu", u += "s ", c = "_", c += "VM", c += "Plu", c += "s ", d = o[C], s.Z$5(0), f = o[s.o4e(C, 1)], g = Math.abs(d.High - f.Low), p = Math.abs(d.Low - f.High), m = Math.max(d.High, f.Close) - Math.min(d.Low, f.Close), l.tr += m, l.vmPlus += g, l.vmMinus += p, C > h && (x = "_V", x += "MPlus", x += " ", y = "_Tr", y += "ue Range ", s.V4q(0), l.tr -= o[s.o4e(C, h)][y + a.name], s.V4q(0), l.vmPlus -= o[s.G4A(C, h)][x + a.name], s.Z$5(0), l.vmMinus -= o[s.G4A(C, h)]["_VMMinus " + a.name]), d["_True Range " + a.name] = m, d[c + a.name] = g, d[u + a.name] = p, C >= h && (b = "+", b += "VI", b += " ", d[b + a.name] = l.vmPlus / l.tr, d["-VI " + a.name] = l.vmMinus / l.tr), d["_totals " + a.name] = t.clone(l);
  }, t.Studies.studyLibrary = t.extend(t.Studies.studyLibrary, {
    Vortex: {
      name: r,
      calculateFN: t.Studies.calculateVortex,
      centerline: 1,
      outputs: {
        "+VI": n,
        "-VI": "#FF0000"
      },
      parameters: {
        init: {
          studyOverZonesEnabled: !0,
          studyOverBoughtValue: 1.1,
          studyOverBoughtColor: "auto",
          studyOverSoldValue: 0.9,
          studyOverSoldColor: "auto"
        }
      },
      attributes: {
        studyOverBoughtValue: {
          min: 1,
          step: "0.01"
        },
        studyOverSoldValue: {
          max: 1,
          step: "0.01"
        }
      }
    }
  })) : console.error("vortex feature requires first activating studies feature.");
};
ts = q => {
  var e;
  e = typeof _CIQ < "u" ? _CIQ : q.CIQ, e.Studies ? (e.Studies.calculateMFI = function (t, n) {
    var r, i, a, s, o, h, l, u;
    if (r = "_h", r += "i", r += "st", i = "_hig", i += "h ", a = n.chart.scrubbed, o = 0, h = n.inputs["Scale Factor"], h || (h = n.study.inputs["Scale Factor"]), l = Math.pow(10, Number(h)), n.startFrom > 1) {
      me.V4q(0);
      var c = me.G4A(13, 12);
      o = a[n.startFrom - c][i + n.name];
    }
    for (u = n.startFrom; u < a.length; u++) a[u] && a[u].Volume && (a[u][n.name + "_hist"] = s = l * (a[u].High - a[u].Low) / a[u].Volume, a[u]["_high " + n.name] = o = Math.max(o, s));
    n.outputMap = {}, n.outputMap[n.name + r] = "";
  }, e.Studies.displayMFI = function (t, n, r) {
    var i = me,
      a,
      s,
      o,
      h,
      l,
      u,
      c,
      d,
      f,
      g,
      p,
      m,
      x,
      y;
    a = "stx", a += "_", a += "histogram", s = t.panels[n.panel], o = n.getContext(t), h = n.getYAxis(t), i.D0I(), l = h.flipped ? h.top : h.bottom, i.Z$5(6);
    var b = i.G4A(18, 34, 50);
    u = t.layout.candleWidth - b, u < 2 && (u = 1), c = e.Studies.determineColor(n.outputs.Green), d = e.Studies.determineColor(n.outputs.Fade), f = e.Studies.determineColor(n.outputs.Fake), g = e.Studies.determineColor(n.outputs.Squat), t.canvasColor(a), n.underlay || (o.globalAlpha = 1), o.fillStyle = "#CCCCCC", t.startClip(n.panel), !n.highlight && t.highlightedDraggable && (o.globalAlpha *= 0.3);
    for (var C = 0; C < r.length; C++) p = "_", p += "hist", m = "_", m += "hi", m += "st", x = r[C], i.Z$5(0), y = r[i.o4e(C, 1)], y || (y = t.getPreviousBar(t.chart, n.name + "_hist", C)), x && (y && (y[n.name + "_hist"] < x[n.name + m] ? y.Volume < x.Volume ? o.fillStyle = c : y.Volume > x.Volume && (o.fillStyle = f) : y[n.name + "_hist"] > x[n.name + p] && (y.Volume < x.Volume ? o.fillStyle = g : y.Volume > x.Volume && (o.fillStyle = d))), x.candleWidth && (u = Math.floor(Math.max(1, x.candleWidth - 2))), o.fillRect(Math.floor(t.pixelFromBar(C, s.chart) - u / 2), Math.floor(l), Math.floor(u), Math.floor(t.pixelFromPrice(x[n.name + "_hist"], s, h) - l)));
    t.endClip();
  }, e.Studies.studyLibrary = e.extend(e.Studies.studyLibrary, {
    "W MFI": {
      name: "Market Facilitation Index",
      seriesFN: e.Studies.displayMFI,
      calculateFN: e.Studies.calculateMFI,
      yAxis: {
        ground: !0
      },
      range: "0 to max",
      inputs: {
        "Scale Factor": 6
      },
      outputs: {
        Green: "#8bc176",
        Fade: "#ab611f",
        Fake: "#5f7cb8",
        Squat: "#ffd0cf"
      }
    }
  })) : console.error("williamsMFI feature requires first activating studies feature.");
};
ro = {
  CIQ: K,
  SplinePlotter: Hs,
  timezoneJS: Rs,
  $$: zs,
  $$$: Ws
};
me.D0I();
(typeof __TREE_SHAKE__ === Rr || !__TREE_SHAKE__) && ro.CIQ.activateImports(Ha, Ra, za, Wa, Ga, Za, Qa, $a, ja, Ya, Xa, Ka, Ja, en, tn, rn, an, nn, sn, on, ln, hn, un, cn, dn, fn, pn, mn, gn, xn, vn, yn, bn, Cn, Sn, wn, kn, Tn, Dn, An, Mn, _n, qn, In, Fn, En, Pn, Ln, Nn, Vn, Un, Bn, On, Hn, Rn, zn, Wn, Gn, Zn, Qn, $n, jn, Yn, Xn, Kn, Jn, es, ts, null);
var Er = [];
K.UI || (K.UI = {});
K.UI.stxtap = function (q, e, t) {
  q && (K.installTapEvent(q), typeof t == "string" && (q = q.querySelector(t)), q && q.addEventListener("stxtap", e));
};
K.UI.addResizeListener = function (q, e) {
  K.UI.getUIManager().registerForResize(q), q.resizeHandle = K.resizeObserver(q, e, null, 250);
};
K.UI.removeResizeListener = function (q) {
  K.UI.getUIManager().unregisterForResize(q), K.resizeObserver(q, null, q.resizeHandle);
};
K.UI.containerExecute = function (q, e, t) {
  var n = t;
  t && n.constructor !== Array && (n = Array.prototype.slice.call(arguments, 2));
  for (var r = q.parentElement; r;) {
    if (r[e] && r[e].constructor == Function) return r[e].apply(r, n);
    r = r.parentElement;
  }
  return null;
};
K.UI.animatePrice = function (q, e, t, n) {
  q[0] && (q = q[0]), q.timeoutHandle && (clearTimeout(q.timeoutHandle), q.timeoutHandle = null), q.classList.remove("cq-stable", "cq-up", "cq-down"), e > t ? q.classList.add("cq-up") : e < t && q.classList.add("cq-down"), n && (q.timeoutHandle = setTimeout(function () {
    q.classList.add("cq-stable").classList.remove("cq-up", "cq-down");
  }, 0));
};
K.UI.makeFromTemplate = function (q, e) {
  typeof q == "string" && (q = document.querySelector(q)), q[0] && K.UI.$(q)[0] == q[0] && (q = q[0]);
  var t = q.content,
    n;
  function r(s) {
    return function (o) {
      s.appendChild(o.cloneNode(!0));
    };
  }
  function i(s) {
    return function (o) {
      s === !0 ? q.parentElement.appendChild(o) : s[0] ? s[0].appendChild(o) : s.appendChild(o);
    };
  }
  t.childNodes.length ? n = document.importNode(t, !0) : (t = document.createElement("DIV"), Array.from(q.children).forEach(r(t)), n = t.cloneNode(!0));
  var a = Array.from(n.children);
  return e && a.forEach(i(e)), K.UI.$(a);
};
K.UI.splitMethod = function (q) {
  if (!q) return null;
  var e = q.indexOf("("),
    t = q.lastIndexOf(")");
  if (e == -1 || t == -1) return console.log("malformed stxtap attribute: " + q), null;
  var n = null,
    r,
    i = q.substring(0, e),
    a = i.indexOf(".");
  a == -1 ? r = i : (n = i.substring(0, a), r = q.substring(a + 1, e));
  var s = q.substring(e + 1, t),
    o = s.match(/('[^']+'|[^,]+)/g),
    h = new RegExp("^[0-9]+([,.][0-9]+)?$", "g"),
    l = new RegExp("^\\d+$"),
    u = [];
  if (o) for (var c = 0; c < o.length; c++) {
    for (var d = o[c]; d.charAt(0) == " ";) d = d.substring(1);
    if (d.indexOf("\"") != -1 || d.indexOf("'") != -1) u.push(d.substring(1, d.length - 1));else if (d == "true") u.push(!0);else if (d == "false") u.push(!1);else if (d == "null") u.push(null);else if (l.test(d)) u.push(parseInt(d, 10));else if (h.test(d)) u.push(parseFloat(d));else {
      for (var f = d.split("."), g = window, p = 0; p < f.length; p++) g = g[f[p]];
      u.push(g);
    }
  }
  return {
    helperName: n,
    functionName: r,
    args: u
  };
};
K.UI.observeProperty = function (q, e, t) {
  if (!(!e || !q || !t)) {
    q in e || (e[q] = void 0), K.UI.observables || (K.UI.observables = {});
    var n = K.UI.observables;
    n[q] || (n[q] = []);
    for (var r, i = 0; i < n[q].length; i++) {
      var a = n[q][i];
      a.obj == e && (r = a);
    }
    r || (r = {
      obj: e,
      value: e[q],
      listeners: []
    }, n[q].push(r)), r.listeners.push(t), t({
      obj: e,
      property: q,
      value: r.value
    }), Object.defineProperty(e, q, {
      enumerable: !0,
      get: function () {
        return r.value;
      },
      set: function (s) {
        if (r.value !== s) {
          r.value = s;
          for (var o = {
              obj: e,
              property: q,
              value: s
            }, h = 0; h < r.listeners.length; h++) r.listeners[h](o);
        }
      }
    });
  }
};
K.UI.unobserveProperty = function (q, e, t) {
  if (!(!q || !e || !K.UI.observables)) {
    var n = K.UI.observables[q];
    if (n) {
      for (var r = n.length - 1; r >= 0; r--) {
        var i = n[r];
        if (i.obj == e) {
          if (t) for (var a = i.listeners, s = a.length; s >= 0; s--) a[s] === t && a.splice(s, 1);
          (!t || !i.listeners.length) && (Object.defineProperty(e, q, {
            enumerable: !0,
            configurable: !0,
            writable: !0,
            value: i.value
          }), n.splice(r, 1));
        }
      }
      n.length || delete K.UI.observables[q];
    }
  }
};
K.UI.getMyContext = function (q) {
  for (; q;) {
    if (q.context) return q.context;
    if (q.CIQ && q.CIQ.UI) return q.CIQ.UI.context;
    q = q.parentElement;
  }
  return null;
};
K.UI.contextsForEach = function (q) {
  var e = document.querySelectorAll("cq-context,*[cq-context]");
  e.forEach(function (t) {
    q.apply(t.CIQ.UI.context);
  });
};
K.UI.release = !1;
K.UI.bypassBindings = !1;
K.UI.begin = function (q) {
  K.UI.release = !0, setTimeout(function () {
    ht.nextTick(), q && q();
  }, 0);
};
K.UI.activatePluginUI = function (q, e) {
  const {
      uiContext: t = {},
      container: n
    } = q,
    r = t.topNode || n.closest("cq-context");
  r && r.setAttribute(e.toLowerCase() + "-active", "");
};
K.UI.addComponentDefinition = function (q, e) {
  const t = !!K.UI.registerComponentsImmediately;
  K.UI._webcomponents || (K.UI._webcomponents = {
    list: {},
    registered: t
  }), K.UI._webcomponents.list[q] = {
    tag: q,
    classDefinition: e,
    registered: t
  }, t && customElements.define(q, e);
};
K.UI.registerComponents = function ({
  except: q = []
} = {}) {
  if (!K.UI._webcomponents) return;
  const {
    exceptions: e = {}
  } = K.UI._webcomponents;
  q.forEach(r => e[r] = !0), K.UI._webcomponents.exceptions = e;
  const {
    list: t
  } = K.UI._webcomponents;
  Object.keys(t).filter(r => !q.includes[r]).forEach(r => {
    const i = t[r];
    i && !i.registered && !e[r] && (customElements.define(r, i.classDefinition), i.registered = !0);
  });
};
K.UI.ensureComponentsRegistered = function () {
  K.UI._webcomponents && K.UI.registerComponents();
};
K.UI.components = function (q) {
  return Object.values(K.UI._webcomponents.list).filter(({
    tag: t,
    classDefinition: n
  }) => !q || q === t || q === n.name || q === n);
};
K.UI.componentMarkup = function (q, e) {
  const t = this.components(q);
  if (e === void 0) {
    if (!t.length) return;
    const i = t.map(r);
    return q ? i[0] : i;
  }
  const [n] = t;
  if (!n || !n.classDefinition.markup) return;
  return n.classDefinition.markup = e, r(n);
  function r(i) {
    const {
      tag: a,
      registered: s,
      classDefinition: {
        markup: o,
        name: h
      }
    } = i;
    return {
      tag: a,
      name: h,
      registered: s,
      markup: o
    };
  }
};
K.UI.markupDependencies = function () {
  const q = K.UI.componentMarkup(),
    e = {};
  q.forEach(n => {
    if (n.markup) for (let r in K.UI._webcomponents.list) {
      const i = K.UI._webcomponents.list[r];
      n.markup.indexOf("</" + i.tag + ">") > -1 && (e[n.tag] || (e[n.tag] = []), e[n.tag].push(i.tag));
    }
  });
  const t = {};
  for (let n in e) e[n].forEach(r => {
    t[r] = (t[r] || 0) + 1;
  });
  return {
    dependencies: e,
    timesNeeded: t
  };
};
K.UI.addInheritance = function (q, e) {
  for (var t in e.prototype) try {
    q.prototype[t] = e.prototype[t];
  } catch {}
};
var sa = {};
K.UI.supportedInputType = function (q) {
  if (!sa[q]) {
    var e = document.createElement("input");
    e.setAttribute("type", q), sa[q] = e.type;
  }
  return sa[q];
};
K.UI.Context = function (q, e, t) {
  this.params = t || {}, this.stx = q, q && (q.uiContext = this), this.node = K.UI.$(e), this.topNode = this.node[0], K.isMobile && e.setAttribute("ciq-mobile", "");
  var n = K.UI.Context.assembleContext(e);
  this.advertised = {};
  for (var r = e.CIQ.UI.context = this, i = [], a = 0; a < n.Components.length; a++) i.push(n.Components[a].tagName.toLowerCase());
  i.length && this.topNode.querySelectorAll(i.join(",")).forEach(function (s) {
    s.setContextPrivate(r);
  });
};
var qr = K.UI.Context;
qr.assembleContext = function (q) {
  return q.CIQ || (q.CIQ = {}), q.CIQ.UI || (q.CIQ.UI = {}), q.CIQ.UI.Components || (q.CIQ.UI.Components = []), q.CIQ.UI;
};
qr.prototype.changeSymbol = function (q, e) {
  console.log("Please implement CIQ.UI.Context.prototype.changeSymbol");
};
qr.prototype.setLookupDriver = function (q) {
  this.lookupDriver = q, q.deprecated && console.warn("Using deprecated Lookup Driver, please see documentation: CIQ.ChartEngine.Driver.Lookup");
};
qr.prototype.advertiseAs = function (q, e) {
  this.advertised[e] = q;
};
qr.prototype.getAdvertised = function (q) {
  return this.advertised[q];
};
qr.prototype.setLoader = function (q) {
  this.loader = q;
};
qr.prototype.isModal = function () {
  return this.stx.openDialog !== "";
};
class ht extends HTMLElement {
  constructor() {
    super(), this.node = K.UI.$(this), this.eventListeners = [];
  }
  connectedCallback() {
    this.attached || (ht.buildReverseBindings(this), this.attached = !0);
  }
  disconnectedCallback() {
    if (this.attached = !1, this.context) for (var e = 0; e < this.eventListeners.length; e++) this.context.stx.removeEventListener(this.eventListeners[e]);
  }
  addDefaultMarkup(e, t) {
    const n = e || this;
    if ((i => i.children.length === 0)(n) && (n.constructor.markup || t)) {
      const i = +new Date();
      if (n.innerHTML = t || n.constructor.markup, ht.buildReverseBindings(n), K.debug) {
        const a = +new Date() - i;
        ht.createMarkupTime = a + (ht.createMarkupTime || 0), console.log("Building markup " + this.constructor.name + " " + (this.getAttribute("cq-name") || "") + " built in=" + a, "total=" + ht.createMarkupTime);
      }
    }
  }
  channelWrite(e, t, n) {
    const {
      obj: r,
      prop: i
    } = K.UI.BaseComponent.getChannel(e, n, this);
    r && (r[i] = t);
  }
  channelMergeObject(e, t, n) {
    const {
      obj: r,
      prop: i
    } = K.UI.BaseComponent.getChannel(e, n, this);
    r && (r[i] = Object.assign({}, r[i], t));
  }
  channelRead(e, t) {
    const {
      obj: n,
      prop: r
    } = K.UI.BaseComponent.getChannel(e, t, this);
    if (n) return n && n[r];
  }
  channelSubscribe(e, t, n) {
    const {
      obj: r,
      prop: i
    } = K.UI.BaseComponent.getChannel(e, n, this);
    if (!r) return;
    function a({
      value: s
    }) {
      t(s);
    }
    return K.UI.observeProperty(i, r, a), () => {
      K.UI.unobserveProperty(i, r, a);
    };
  }
  qs(e, t) {
    return t === "thisChart" && (t = this.getContextContainer()), (t || document).querySelector(e);
  }
  qsa(e, t) {
    return t === "thisChart" && (t = this.getContextContainer()), Array.prototype.slice.call((t || document).querySelectorAll(e) || []);
  }
  getContextContainer(e) {
    return e ? ht.selfOrParentElement(e, "cq-context") : (this.contextContainer || (this.contextContainer = ht.selfOrParentElement(this, "cq-context")), this.contextContainer);
  }
  getChartContainer(e) {
    return ht.selfOrParentElement(e || this, "ciq-chart");
  }
  static getHelper(e, t, n) {
    if (e) {
      if (!t && (t = e.getAttribute(n), !t)) return null;
      var r,
        i = t.indexOf("("),
        a = t.substring(0, i),
        s = t.indexOf(".");
      if (i == -1 || a.indexOf(".") != -1) {
        var o = s === -1 ? t : t.substring(0, s),
          h = e.context;
        if (h || (e.context || (e.context = K.UI.getMyContext(e)), h = e.context), !h) {
          const c = e.closest("cq-context, [cq-context]");
          return c ? (c.bindingInitiated && console.log("No context attached to " + e.tagName + ". A context is required when binding to a helper."), null) : (console.log(e.tagName + " is not inside cq-context element. A context element is required when binding to a helper."), null);
        }
        r = h.getAdvertised(o);
      } else for (var l = t.substring(0, i), u = e.parentElement; u;) {
        if (typeof u[l] == "function") return u;
        u = u.parentElement;
      }
      return r;
    }
  }
  static activate(e, t, n, r) {
    var i = r ? "stxsetget" : "stxtap",
      a = K.UI.splitMethod(e.getAttribute(i));
    if (a) {
      var s = a.helperName,
        o = a.functionName;
      r && (o = "set" + o);
      var h = [{
        node: e,
        e: t,
        params: n
      }].concat(a.args);
      if (s) {
        var l = ht.getHelper(e, null, i);
        if (!l[o]) {
          console.log("Method '" + o + "' not found in helper", l);
          return;
        }
        l[o].apply(l, h);
      } else for (var u = e.parentElement; u;) typeof u[o] == "function" && u[o].apply(u, h), u = u.parentElement;
    }
  }
  makeTap(e, t) {
    ht.makeTap(e, t);
  }
  static makeTap(e, t) {
    e.selectFC = t, K.UI.stxtap(e, t);
  }
  static bindNode(e, t) {
    var n,
      r = e.getAttribute("stxbind"),
      i = e.getAttribute("stxtap"),
      a = e.getAttribute("stxsetget");
    function s(l) {
      var u,
        c = r.indexOf("(");
      u = r.substring(r.indexOf(".") + 1), c !== -1 && (u = r.substring(0, c)), l && l[u](e);
    }
    if (r && r !== "") {
      if (n = ht.getHelper(e, r, "stxbind"), !n) return !1;
      s(n);
    }
    function o(l) {
      return function (u) {
        ht.activate(l, u, t, !1);
      };
    }
    i && i !== "" && (e.tagName == "INPUT" && (e.type === "text" || e.type === "number") ? ht.inputEntry(e, o(e)) : ht.makeTap(e, o(e)));
    function h(l) {
      function u() {
        return function (g) {
          ht.activate(e, g, t, !0);
        };
      }
      var c = K.UI.splitMethod(a);
      if (!c) {
        console.log("Syntax error " + a);
        return;
      }
      var d = [e].concat(c.args).concat(t),
        f = "get" + c.functionName;
      l && l[f] && l[f].apply(l, d), e.type === "text" || e.type === "number" ? ht.inputEntry(e, u()) : ht.makeTap(e, u());
    }
    if (a) {
      if (n = ht.getHelper(e, a, "stxsetget"), !n) return !1;
      h(n);
    }
    return !0;
  }
  static scheduleForBinding(e, t) {
    ht.scheduledBindings.push({
      node: e,
      parentTag: t
    }), ht.timeout && clearTimeout(ht.timeout), ht.timeout = setTimeout(ht.nextTick, 0);
  }
  inputEntry(e, t) {
    ht.inputEntry(e, t);
  }
  static inputEntry(e, t) {
    e.addEventListener("keypress", function (n) {
      switch (n.which) {
        case 13:
        case 9:
          t();
      }
    });
  }
  addClaim(e) {
    Er.push({
      helper: e
    });
  }
  removeClaim(e) {
    for (var t = 0; t < Er.length; t++) if (Er[t].helper === e) {
      Er.splice(t, 1);
      return;
    }
  }
  static buildReverseBindings(e) {
    if (!K.UI.bypassBindings) {
      var t = function (i) {
          if (i.hasAttribute("stxbind") || i.hasAttribute("stxtap") || i.hasAttribute("stxsetget")) return NodeFilter.FILTER_ACCEPT;
        },
        n = document.createNodeIterator(e, NodeFilter.SHOW_ELEMENT, K.isIE ? t : {
          acceptNode: t
        }, !1),
        r;
      for (r = n.nextNode(); r;) ht.scheduleForBinding(r, e), r = n.nextNode();
    }
  }
  static nextTick() {
    if (K.UI.release) {
      clearTimeout(ht.timeout);
      for (var e = ht.scheduledBindings, t = e.length - 1; t >= 0; t--) {
        var n = e[t];
        n.node.ciqAlreadyBound || (n.node.ciqAlreadyBound = ht.bindNode(n.node, {
          parent: n.parentTag
        }));
      }
    }
  }
  static selfOrParentElement(e, t) {
    let n = e;
    for (; n;) {
      if (n.classList.contains(t) || n.getAttribute(t) !== null || n.nodeName.toLowerCase() === t) return n;
      n = n.parentElement;
    }
  }
  static toPropAndObject(e, t) {
    const n = e.split("."),
      r = n.pop(),
      i = n.reduce((a, s) => a[s] !== void 0 ? a[s] : a[s] = {}, t);
    return {
      prop: r,
      obj: i
    };
  }
  static getChannel(e, t, n) {
    if (!e) return console.warn("Missing channel path"), {};
    if (!t && !n) return console.warn("Chart engine not provided while retrieving ", e), {};
    !t && !n.stx && (n.container || (n.container = K.UI.getMyContext(n)), n.stx = n.container.stx);
    const {
      obj: r,
      prop: i
    } = ht.toPropAndObject(e, t || n.stx);
    return {
      obj: r,
      prop: i
    };
  }
}
ht.scheduledBindings = [];
K.UI.BaseComponent = ht;
class ao extends ht {
  constructor() {
    super(), this.injections = [];
  }
  connectedCallback() {
    this.attached || (this.setContextHolder(), super.connectedCallback());
  }
  disconnectedCallback() {
    if (this.context) {
      var e;
      for (e = 0; e < this.injections.length; e++) this.context.stx.removeInjection(this.injections[e]);
      for (this.injections = [], e = 0; e < this.eventListeners.length; e++) this.context.stx.removeEventListener(this.eventListeners[e]);
      this.eventListeners = [];
    }
    this.timeout && (clearTimeout(this.timeout), this.timeout = null);
  }
  setContextHolder() {
    var e = this.closest("cq-context,*[cq-context]");
    if (!e) {
      console.log("No cq-context found for " + this.tagName);
      return;
    }
    var t = e,
      n = qr.assembleContext(t);
    n.Components.push(this), n.context && this.setContextPrivate(n.context);
  }
  setContext(e) {}
  setContextPrivate(e) {
    this.context = e, this.uiManager = K.UI.getUIManager(), this.hasAttribute("cq-marker") && !this.convertedToMarker && (this.convertedToMarker = !0, this.marker = new K.Marker({
      stx: e.stx,
      node: this,
      xPositioner: "none",
      yPositioner: "none",
      label: "component",
      permanent: !0
    })), this.timeout = setTimeout(function (t, n) {
      return function () {
        t.setContext(n), t.timeout = null;
      };
    }(this, e));
  }
  addInjection(e, t, n) {
    this.injections.push(this.context.stx[e](t, n));
  }
}
K.UI.ContextTag = ao;
class Il extends ao {
  constructor() {
    super();
  }
  connectedCallback() {
    this.attached || (this.onpointerover = function () {
      this.modalBegin();
    }, this.onpointerout = function () {
      this.modalEnd();
    }, super.connectedCallback());
  }
  modalBegin() {
    this.context && this.context.stx.modalBegin();
  }
  modalEnd() {
    this.context && (this.uiManager.activeMenuStack.length || this.context.stx.modalEnd());
  }
}
K.UI.ModalTag = Il;
class Fl extends ht {
  constructor() {
    super();
  }
  close() {
    var e = this.closest("cq-dialog");
    e && e.close(), Array.from(this.querySelectorAll("cq-swatch")).forEach(function (t) {
      t.colorPicker && t.colorPicker.close();
    });
  }
  open(e) {
    e && e.context && this.setContext(e.context);
    var t = this.tagName.toLowerCase(),
      n = this.closest("cq-dialog,cq-menu");
    n.addActiveAttribute(t), n.open(e);
  }
  setContext(e) {
    this.node.find("[stxtap],[stxbind],[stxsetget]").each(function () {
      this.context = e;
    }), this.context = e;
  }
}
K.UI.DialogContentTag = Fl;
K.UI.Helper = function (q, e) {
  this.node = q, this.context = e, this.injections = [];
};
K.UI.Helper.prototype.addInjection = function (q, e, t) {
  this.injections.push(this.context.stx[q](e, t));
};
K.UI.Helper.prototype.destroy = function () {
  for (var q = 0; q < this.injections.length; q++) this.context.stx.removeInjection(this.injections[q]);
  this.injections = [];
};
K.UI.HeadsUp = function (q, e, t) {
  this.params = t || {}, typeof this.params.autoStart > "u" && (this.params.autoStart = !0), this.node = q, q.remove(), this.context = e, this.injections = [], this.maxVolume = {
    lastCheckDate: null,
    value: 0
  }, this.params.autoStart && this.begin();
};
K.inheritsFrom(K.UI.HeadsUp, K.UI.Helper);
K.UI.HeadsUp.prototype.begin = function () {
  if (!this.injections.length && K.Marker) {
    K.Marker.HeadsUp || (K.Marker.HeadsUp = function (e, t) {
      this.className || (this.className = "CIQ.Marker.HeadsUp"), K.Marker.call(this, e), this.prevTick = null, this.showClass = t;
    }, K.inheritsFrom(K.Marker.HeadsUp, K.Marker, !1), K.Marker.HeadsUp.placementFunction = function (e) {
      function t(x, y, b, C) {
        return Math.round(b - x.pixelFromPrice(C, y));
      }
      var n = e.panel,
        r = n.chart,
        i = e.stx,
        a = i.chart.highLowBars;
      e.showClass || (e.showClass = "stx-show");
      for (var s = 0; s < e.arr.length; ++s) {
        var o = e.arr[s],
          h = o.node,
          l = h.classList;
        if (n.hidden || !i.insideChart) {
          l.remove(e.showClass);
          return;
        }
        if (o.params.x < 0 || o.params.x >= r.dataSet.length) {
          l.remove(e.showClass);
          return;
        }
        if (i.currentVectorParameters.vectorType) {
          l.remove(e.showClass);
          return;
        }
        var u = r.dataSet[o.params.x],
          c = i.pixelFromTick(o.params.x);
        if (!u || c < r.left || c > r.right) {
          l.remove(e.showClass);
          return;
        }
        if (!u[i.chart.defaultPlotField] && u[i.chart.defaultPlotField] !== 0) {
          l.remove(e.showClass);
          return;
        }
        l.add(e.showClass);
        var d = K.elementDimensions(h);
        o.clientWidth || (o.clientWidth = d.width), o.clientHeight || (o.clientHeight = d.height), o.clientWidth > c ? (l.remove("stx-left"), l.add("stx-right"), Object.assign(o.node.style, {
          left: c + "px",
          right: "auto"
        })) : (l.add("stx-left"), l.remove("stx-right"), Object.assign(o.node.style, {
          right: i.chart.canvasWidth - c + "px",
          left: "auto"
        }));
        var f,
          g = o.params.chartContainer ? i.chart.canvasHeight : n.bottom;
        a ? f = t(i, n, g, i.getBarBounds(u)[n.yAxis.flipped ? "low" : "high"]) : f = t(i, n, g, u[i.chart.defaultPlotField]);
        var p = g - f - o.clientHeight + i.top;
        p < 0 ? (l.add("stx-below"), f = (a ? t(i, n, g, i.getBarBounds(u).low) : f) - o.clientHeight) : l.remove("stx-below");
        var m = f + "px";
        o.node.style.bottom != m && (o.node.style.bottom = m);
      }
    });
    var q;
    this.params.followMouse ? (this.node.style.top = "auto", q = {
      stx: this.context.stx,
      label: "headsup",
      xPositioner: "bar",
      chartContainer: !0,
      x: 0,
      node: this.node
    }, this.marker = new K.Marker.HeadsUp(q, this.params.showClass), this.addInjection("append", "handleMouseOut", function (e) {
      return function () {
        e.followMouse(-1);
      };
    }(this))) : this.params.staticNode || (Object.assign(this.node.style, {
      top: "",
      left: ""
    }), q = {
      stx: this.context.stx,
      label: "headsup",
      xPositioner: "none",
      chartContainer: !1,
      node: this.node
    }, K.extend(q, this.params), this.marker = new K.Marker(q)), this.calculateMaxVolume(), this.addInjection("prepend", "headsUpHR", function (e) {
      return function () {
        e.position();
      };
    }(this)), this.addInjection("append", "createXAxis", function (e) {
      return function () {
        e.position();
      };
    }(this)), this.addInjection("append", "createDataSet", function (e) {
      return function (t, n, r) {
        e.calculateMaxVolume(r.appending);
      };
    }(this));
  }
};
K.UI.HeadsUp.prototype.end = function () {
  this.marker && this.marker.remove(), this.destroy(), this.marker = null;
};
K.UI.HeadsUp.prototype.calculateMaxVolume = function (q) {
  q || (this.maxVolume = {
    lastCheckDate: null,
    value: 0
  });
  var e = this.context.stx.chart.dataSet;
  if (!(!e || !e.length)) {
    for (var t = e.length - 1; t >= 0; t--) {
      var n = e[t];
      if (n.DT < this.maxVolume.lastCheckDate) break;
      n.Volume > this.maxVolume.value && (this.maxVolume.value = n.Volume);
    }
    this.maxVolume.lastCheckDate = e[e.length - 1].DT;
  }
};
K.UI.HeadsUp.prototype.position = function () {
  var q = this.context.stx,
    e = q.barFromPixel(q.cx);
  this.tick = q.tickFromPixel(q.cx);
  var t = q.chart.xaxis[e],
    n = q.chart.defaultPlotField,
    r = q.chart.highLowBars;
  (!n || r) && (n = "Close");
  var i = this.node,
    a = this;
  function s(l) {
    var u = "",
      c = q.layout.chartScale,
      d = q.chart.panel,
      f = q.chart.yAxis;
    return f.originalPriceFormatter && f.originalPriceFormatter.func ? u = f.originalPriceFormatter.func(q, d, l) : f.priceFormatter && c != "percent" && c != "relative" ? u = f.priceFormatter(q, d, l) : u = q.formatYAxisPrice(l, d), u.replace(/(\.[0-9]*[1-9])0+$|\.0*$/, "$1");
  }
  function o() {
    var l = K.UI.$(i);
    a.timeout = null, l.find("cq-hu-price").text("N/A"), l.find("cq-hu-open").text("N/A"), l.find("cq-hu-close").text("N/A"), l.find("cq-hu-high").text("N/A"), l.find("cq-hu-low").text("N/A"), l.find("cq-hu-date").text("N/A"), l.find("cq-hu-volume").text("N/A"), l.find("cq-volume-rollup").text("");
    function u(x) {
      return K.isValidNumber(parseFloat(x)) ? x : "N/A";
    }
    if (t && t.data) {
      var c = K.clone(t.data);
      c.Open === void 0 && (c.Open = c.Close), c.High === void 0 && (c.High = Math.max(c.Open, c.Close)), c.Low === void 0 && (c.Low = Math.min(c.Open, c.Close)), l.find("cq-hu-open").text(u(s(c.Open))), l.find("cq-hu-price").text(u(s(c[n]))), l.find("cq-hu-close").text(u(s(c.Close))), l.find("cq-hu-high").text(u(s(c.High))), l.find("cq-hu-low").text(u(s(c.Low)));
      var d = K.condenseInt(c.Volume),
        f = d.charAt(d.length - 1);
      f > "9" && (d = d.substring(0, d.length - 1), l.find("cq-volume-rollup").text(f.toUpperCase())), l.find("cq-hu-volume").text(d);
      var g = c.displayDate;
      g || (g = c.DT), q.internationalizer ? K.ChartEngine.isDailyInterval(q.layout.interval) ? l.find("cq-hu-date").text(q.internationalizer.yearMonthDay.format(g)) : l.find("cq-hu-date").text(q.internationalizer.yearMonthDay.format(g) + " " + q.internationalizer.hourMinute.format(g)) : K.ChartEngine.isDailyInterval(q.layout.interval) ? l.find("cq-hu-date").text(K.mmddyyyy(K.yyyymmddhhmm(g))) : l.find("cq-hu-date").text(K.mmddhhmm(K.yyyymmddhhmmssmmm(g)));
      var p = l.find("cq-volume-visual");
      if (p.length) {
        var m = a.maxVolume.value ? c.Volume / a.maxVolume.value : 0;
        p.css({
          width: Math.round(m * 100) + "%"
        });
      }
    }
  }
  if (this.tick != this.prevTick || t && +t.DT == +q.chart.endPoints.end) {
    this.timeout && clearTimeout(this.timeout);
    var h = (this.params.followMouse, 0);
    this.timeout = setTimeout(o, h);
  }
  this.prevTick = this.tick, this.params.followMouse && (q.openDialog && (this.tick = -1), this.followMouse(this.tick));
};
K.UI.HeadsUp.prototype.followMouse = function (q) {
  this.marker.params.x = q;
  var e = this;
  e.marker.render();
};
K.UI.DrawingEdit = hr;
function hr(q, e) {
  var t = e.stx,
    n = K.UI.$(q || e.topNode);
  this.node = n[0], this.context = e, this.editing = null, this.drawingContext = document.querySelector("cq-drawing-context"), this.cvpController = n.find("cq-cvp-controller"), this.toolbar = n.find("cq-toolbar"), this.toolbar.length || (this.toolbar = n.find("cq-drawing-settings"));
  var r = this;
  Array.from(this.toolbar).forEach(function (i) {
    i.addEventListener("change", El(t, r));
  }), this.count = t.drawingObjects.length, e.advertiseAs(this, "DrawingEdit"), t.addEventListener("drawing", Pl(this)), t.addEventListener("drawingEdit", Ll(this)), n.find("cq-toolbar .ciq-drawing-edit-only").each(function (i, a) {
    a.querySelector(".ciq-btn") && ["mouseenter", "mouseleave"].forEach(function (s) {
      a.addEventListener(s, Nl(t, r));
    });
  });
}
K.inheritsFrom(hr, K.UI.Helper);
function El(q, e) {
  return function () {
    if (e.editing) {
      if (e.editing.name !== q.currentVectorParameters.vectorType) {
        e.endEdit(null, "tool");
        return;
      }
      e.editing.copyConfig(), q.draw(), q.changeOccurred("vector");
    }
  };
}
function Pl(q) {
  return function (e) {
    var t = e.drawings.length;
    q.count !== t && (q.endEdit(null, "count"), q.count = t);
  };
}
function Ll(q) {
  return function (e) {
    e.forceEdit === !0 ? (q.endEdit(null, "edit"), q.showToolbar(e.drawing), q.beginEdit(e.drawing)) : q.showContext(e);
  };
}
function Nl(q, e) {
  return function (t) {
    var n = t.type === "mouseenter";
    e.editing && e.editing.highlighted !== n && (e.editing.highlighted = n, q.draw());
  };
}
hr.prototype.showContext = function (q) {
  q.context = this.context, q.x = K.ChartEngine.crosshairX, q.y = K.ChartEngine.crosshairY, this.count = this.context.stx.drawingObjects.length, this.drawingContext && this.drawingContext.open && this.drawingContext.open(q);
};
hr.prototype.getToolActivator = function (q) {
  var e = this.toolbar.find("cq-item[cq-tool=\"" + q + "\"]");
  return e.length || (e = this.toolbar.find(`cq-item[stxtap="tool('` + q + `')"]`)), {
    node: e[0]
  };
};
hr.prototype.showToolbar = function (q) {
  var e = this,
    t = e.getToolActivator(q.name);
  e.node, this.toolbar.each(function () {
    var n = q.lineWidth,
      r = q.pattern,
      i = q.parameters && q instanceof K.Drawing.fibonacci;
    i && (n = q.parameters.fibs[0].parameters.lineWidth, r = q.parameters.fibs[0].parameters.pattern), this.tool(t, q.name), this.sync({
      lineWidth: n,
      pattern: r,
      annotation: {
        font: q.font ? K.clone(q.font) : {}
      },
      fillColor: q.fillColor,
      currentColor: q.color,
      axisLabel: q.axisLabel
    }), e.cvpController.each(function () {
      this.sync(q);
    }), this.dirty(!1), i && (this.context.stx.currentVectorParameters.fibonacci = K.clone(q.parameters));
  });
};
hr.prototype.beginEdit = function (q) {
  this.editing = q, this.beforeEdit = q.serialize(), this.toolbar.attr("cq-drawing-edit", q.name);
  var e = new CustomEvent("drawing-edit-begin", {
    bubbles: !0,
    cancelable: !0,
    detail: {
      drawing: q,
      tool: q.name
    }
  });
  this.node.dispatchEvent(e);
};
hr.prototype.endEdit = function (q, e) {
  var t = this.context.stx,
    n = null,
    r = null;
  if (this.editing) {
    r = this.editing.name, n = new CustomEvent("drawing-edit-end", {
      bubbles: !0,
      cancelable: !0,
      detail: {
        action: e,
        drawing: this.editing,
        tool: r
      }
    });
    var i = t.drawingObjects.indexOf(this.editing),
      a = t.exportDrawings();
    i > -1 && this.beforeEdit && (a[i] = this.beforeEdit, t.undoStamp(a, t.exportDrawings())), e === "close" && this.editing.highlighted && (this.editing.highlighted = !1, t.draw());
  }
  this.editing = null, this.beforeEdit = null, this.toolbar.attr("cq-drawing-edit", "none"), r && e === "close" && (q = this.getToolActivator(r), this.toolbar.each(function () {
    this.tool(q, r);
  })), n && this.node.dispatchEvent(n);
};
hr.prototype.edit = function () {
  var q = this;
  if (this.drawingContext) {
    var e = this.drawingContext.drawing,
      t = K.UI.getMyContext(e.stx.container).topNode,
      n = document.querySelector("cq-drawing-context").parentNode,
      r = t.querySelector("cq-drawing-settings"),
      i = {
        left: n.offsetLeft,
        top: n.offsetTop
      };
    this.drawingContext.close(), q.endEdit(null, "edit"), q.showToolbar(e, i), q.beginEdit(e), r && r.detach(i.left, i.top);
  }
};
hr.prototype.text = function () {
  var q = this;
  this.drawingContext && (this.drawingContext.close(), q.endEdit(null, "text"), this.drawingContext.drawing.edit && this.drawingContext.drawing.edit(null, !0));
};
hr.prototype.clone = function () {
  var q = this,
    e = this.context.stx;
  if (this.endEdit(null, "clone"), this.drawingContext) {
    this.drawingContext.close();
    var t = this.drawingContext.drawing,
      n = new K.Drawing[t.name](),
      r = t.serialize();
    n.reconstruct(e, r), n.repositioner = t.repositioner, n.highlighted = !0, t.highlighted = !1, q.count += 1, e.addDrawing(n), e.activateRepositioning(n);
  }
};
hr.prototype.reorderLayer = function (q, e) {
  var t = this.context.stx;
  if (this.endEdit(null, "reorderLayer"), this.drawingContext) {
    this.drawingContext.close();
    var n = t.drawingObjects.length - 1,
      r = t.drawingObjects.indexOf(this.drawingContext.drawing),
      i = NaN;
    if (r === -1) return;
    switch (e) {
      case "up":
        r < n && (i = r + 1);
        break;
      case "down":
        r > 0 && (i = r - 1);
        break;
      case "top":
        r < n && (i = n);
        break;
      case "bottom":
        r > 0 && (i = 0);
        break;
    }
    if (i !== i) return;
    var a = t.exportDrawings();
    t.drawingObjects.splice(r, 1), t.drawingObjects.splice(i, 0, this.drawingContext.drawing), t.undoStamp(a, t.exportDrawings()), t.draw(), t.changeOccurred("vector");
  }
};
hr.prototype.remove = function () {
  var q = this,
    e = this.context.stx;
  if (this.endEdit(null, "remove"), this.drawingContext) {
    if (this.drawingContext.drawing.permanent) return;
    var t = e.exportDrawings();
    q.count -= 1, e.removeDrawing(this.drawingContext.drawing), e.undoStamp(t, e.exportDrawings()), this.drawingContext.close();
  }
};
K.UI.StudyEdit = function (q, e) {
  this.context = e, this.node = q || e.topNode, this.contextDialog = [];
  for (var t = document.querySelectorAll("cq-study-context"), n = 0; n < t.length; n++) this.contextDialog.push(t[n]);
  e.advertiseAs(this, "StudyEdit"), this.initialize();
};
K.inheritsFrom(K.UI.StudyEdit, K.UI.Helper);
K.UI.StudyEdit.prototype.remove = function () {
  K.Studies.removeStudy(this.params.stx, this.params.sd), this.contextDialog.forEach(function (q) {
    q.close && q.close();
  });
};
K.UI.StudyEdit.prototype.edit = function () {
  this.contextDialog.forEach(function (q) {
    q.close && q.close();
  }), this.editPanel(this.params);
};
K.UI.StudyEdit.prototype.editPanel = function (q) {
  const {
    stx: e,
    config: t
  } = this.context;
  q.context = this.context, q.x = null, q.y = null;
  const {
    channelWrite: n
  } = K.UI.BaseComponent.prototype;
  if (t) {
    const r = (t.channels || {}).dialog || "channel.dialog";
    n(r, {
      type: "study",
      params: q
    }, e);
  } else document.querySelector("cq-study-dialog").open(q);
};
K.UI.StudyEdit.prototype.editOverlay = function (q) {
  this.params = q, q.context = this.context, q.forceEdit ? this.editPanel(q) : this.contextDialog.forEach(function (e) {
    q.x = K.ChartEngine.crosshairX, q.y = K.ChartEngine.crosshairY, e.open && e.open(q);
  });
};
K.UI.StudyEdit.prototype.initialize = function () {
  var q = this.context.stx,
    e = this;
  function t(n) {
    return function () {
      n.apply(e, arguments);
    };
  }
  q.addEventListener("studyOverlayEdit", t(e.editOverlay)), q.addEventListener("studyPanelEdit", t(e.editPanel));
};
K.UI.Layout = function (q, e) {
  this.params = e || {}, this.params.activeClassName || (this.params.activeClassName = "ciq-active"), this.context = q, q.advertiseAs(this, "Layout");
};
K.inheritsFrom(K.UI.Layout, K.UI.Helper);
K.UI.Layout.prototype.getChartType = function (q, e) {
  var t = this.context.stx,
    n = this.params.activeClassName,
    r = function (i) {
      var a = i.obj;
      a.aggregationType && a.aggregationType != "ohlc" ? e !== a.aggregationType ? q.classList.remove(n) : q.classList.add(n) : e !== a.chartType ? q.classList.remove(n) : q.classList.add(n);
    };
  K.UI.observeProperty("chartType", t.layout, r), K.UI.observeProperty("aggregationType", t.layout, r);
};
K.UI.Layout.prototype.setChartType = function (q, e) {
  var t = {
    heikinashi: !0,
    kagi: !0,
    linebreak: !0,
    pandf: !0,
    rangebars: !0,
    renko: !0
  };
  t[e] ? this.context.stx.setAggregationType(e) : this.context.stx.setChartType(e);
};
K.UI.Layout.prototype.getChartScale = function (q, e) {
  var t = this.context.stx,
    n = this.params.activeClassName,
    r = function (i) {
      i.value == e ? q.classList.add(n) : q.classList.remove(n);
    };
  K.UI.observeProperty("chartScale", t.layout, r);
};
K.UI.Layout.prototype.setChartScale = function (q, e) {
  var t = this.context.stx,
    n = t.layout.chartScale;
  n == e ? t.setChartScale(null) : (!n || n == "linear") && t.setChartScale(e);
};
K.UI.Layout.prototype.getFlippedChart = function (q) {
  var e = this.context.stx,
    t = this.params.activeClassName,
    n = function (r) {
      r.value ? q.classList.add(t) : q.classList.remove(t);
    };
  K.UI.observeProperty("flipped", e.layout, n);
};
K.UI.Layout.prototype.setFlippedChart = function (q) {
  var e = this.context.stx;
  e.flipChart(!e.layout.flipped);
};
K.UI.Layout.prototype.getExtendedHours = function (q) {
  var e = this.context.stx,
    t = this.params.activeClassName,
    n = function (r) {
      r.value ? q.classList.add(t) : q.classList.remove(t);
    };
  K.UI.observeProperty("extended", e.layout, n);
};
K.UI.Layout.prototype.setExtendedHours = function (q) {
  var e = this.context.stx;
  if (e.layout.extended = !e.layout.extended, e.changeOccurred("layout"), e.layout.extended && !(e.chart.market.market_def && e.chart.market.sessions.length) && K.alert("There are no Extended Hours for this instrument."), e.extendedHours) {
    var t = this.context.loader;
    t && t.show(), e.extendedHours.set(e.layout.extended, null, function () {
      t && t.hide();
    });
  }
};
K.UI.Layout.prototype.getRangeSlider = function (q) {
  var e = this.context.stx,
    t = this.params.activeClassName,
    n = function (r) {
      r.value ? q.classList.add(t) : q.classList.remove(t);
    };
  K.UI.observeProperty("rangeSlider", e.layout, n);
};
K.UI.Layout.prototype.setRangeSlider = function (q) {
  var e = this.context.stx;
  e.layout.rangeSlider = !e.layout.rangeSlider, e.slider && e.slider.display(e.layout.rangeSlider), e.changeOccurred("layout");
};
K.UI.Layout.prototype.getOutliers = function (q) {
  var e = this.context.stx,
    t = this.params.activeClassName,
    n = function (r) {
      r.value ? q.classList.add(t) : q.classList.remove(t);
    };
  K.UI.observeProperty("outliers", e.layout, n);
};
K.UI.Layout.prototype.setOutliers = function (q) {
  var e = this.context.stx;
  e.layout.outliers = !e.layout.outliers, e.draw(), e.changeOccurred("layout");
};
K.UI.Layout.prototype.getAggregationType = function (q, e) {
  var t = this.context.stx,
    n = this.params.activeClassName,
    r = function (i) {
      i.value == e ? q.classList.add(n) : q.classList.remove(n);
    };
  K.UI.observeProperty("aggregationType", t.layout, r);
};
K.UI.Layout.prototype.setAggregationType = function (q, e) {
  this.context.stx.layout.aggregationType == e ? this.context.stx.setAggregationType(null) : this.context.stx.setAggregationType(e);
};
K.UI.Layout.prototype.getAggregationEdit = function (q, e) {
  var t = this.context.stx,
    n = K.deriveFromObjectChain(t.layout, e),
    r = function (i) {
      var a = i.value;
      !a && t.chart.defaultChartStyleConfig[q.name] ? q.value = t.chart.defaultChartStyleConfig[q.name] : q.value = a;
    };
  K.UI.observeProperty(n.member, n.obj, r);
};
K.UI.Layout.prototype.setAggregationEdit = function (q, e) {
  var t = this.context.stx;
  function n() {
    t.changeOccurred("layout"), t.createDataSet(), t.draw();
  }
  if (e === "auto") {
    t.layout.aggregationType === "kagi" ? t.layout.kagi = null : t.layout.aggregationType === "renko" ? t.layout.renko = null : t.layout.aggregationType === "linebreak" ? t.layout.priceLines = null : t.layout.aggregationType === "rangebars" ? t.layout.rangebars = null : t.layout.aggregationType === "pandf" && (t.layout.pandf || (t.layout.pandf = {
      box: null,
      reversal: null
    }), t.layout.pandf.box = null, t.layout.pandf.reversal = null), n();
    const i = q.params.parent;
    if (!i) return;
    Array.from(i.querySelectorAll(".ciq" + t.layout.aggregationType + " input")).forEach(function (a) {
      var s = a.name;
      (s == "box" || s == "reversal") && (s = "pandf." + s);
      var o = K.deriveFromObjectChain(t.layout, s);
      o && !o.obj[o.member] && t.chart.defaultChartStyleConfig[a.name] && (a.value = t.chart.defaultChartStyleConfig[a.name]);
    });
  } else {
    var r = K.deriveFromObjectChain(t.layout, e);
    r.obj[r.member] = q.node.value, n();
  }
};
K.UI.Layout.prototype.showAggregationEdit = function (q, e) {
  const {
    context: t
  } = this;
  if (t.config) {
    const {
        channelWrite: n
      } = K.UI.BaseComponent.prototype,
      r = (t.config.channels || {}).dialog || "channel.dialog";
    n(r, {
      type: "aggregation",
      params: {
        context: t,
        aggregationType: e
      }
    }, t.stx);
  } else document.querySelector("cq-aggregation-dialog").open({
    context: this.context,
    aggregationType: e
  });
};
K.UI.Layout.prototype.clearStudies = function (q) {
  if (K.Studies) {
    var e = this.context.stx;
    for (var t in e.layout.studies) {
      var n = e.layout.studies[t];
      !n.customLegend && !n.permanent && K.Studies.removeStudy(e, n);
    }
    e.draw();
  }
};
K.UI.Layout.prototype.setPeriodicity = function (q, e, t, n) {
  var r = this;
  r.context.loader && r.context.loader.show(), r.context.stx.setPeriodicity({
    period: e,
    interval: t,
    timeUnit: n
  }, function () {
    r.context.loader && r.context.loader.hide();
  });
};
K.UI.Layout.prototype.showPeriodicity = function (q, e) {
  var t = "",
    {
      period: n,
      interval: r,
      timeUnit: i
    } = q.getPeriodicity();
  n *= r, t = n, i == "day" ? t += "D" : i == "week" ? t += "W" : i == "month" ? t += "M" : i == "second" ? t += "s" : i == "millisecond" ? t += "ms" : n >= 60 && n % 15 === 0 ? t = n / 60 + "H" : i == "tick" ? t = (n > 1 ? n : "") + "T" : t += "m", e.selector.innerHTML = "", e.selector.appendChild(K.translatableTextNode(q, t));
};
K.UI.Layout.prototype.periodicity = function (q) {
  var e = this,
    t = this.context.stx,
    n = function (r) {
      e.showPeriodicity(t, {
        selector: q
      });
    };
  K.UI.observeProperty("interval", t.layout, n), K.UI.observeProperty("periodicity", t.layout, n), K.UI.observeProperty("timeUnit", t.layout, n);
};
K.UI.Layout.prototype.setLanguage = function () {
  const {
    config: q,
    stx: e
  } = this.context;
  if (q) {
    const {
        channelWrite: t
      } = K.UI.BaseComponent.prototype,
      n = (q.channels || {}).dialog || "channel.dialog",
      r = {
        context: e.uiContext
      };
    t(n, {
      type: "language",
      params: r
    }, e);
  } else document.querySelector("cq-language-dialog").open();
};
K.UI.Layout.prototype.getLanguage = function (q) {
  this.context.stx;
  var e = function (t) {
    K.I18N.languages || (K.I18N.languages = {
      en: "English"
    });
    var n = q.querySelector("cq-language-name");
    if (n) {
      n.innerText = K.I18N.languages[K.I18N.language];
      var r = q.querySelector("cq-flag");
      r && r.setAttribute("cq-lang", K.I18N.language);
    }
  };
  K.UI.observeProperty("language", K.I18N, e);
};
K.UI.Markers = function (q, e) {
  this.context = q, e || (e = {}), this.menuItemSelector = e.menuItemSelector, this.activeClassName = e.activeClassName || "ciq-active", this.implementation = e.implementation, q.advertiseAs(this, "Markers");
};
K.inheritsFrom(K.UI.Markers, K.UI.Helper);
K.UI.Markers.prototype.showMarkers = function (q, e, t) {
  var n = this.activeClassName,
    r = this.context.topNode,
    i = this.implementation;
  i && (i.showMarkers(), e && i.showMarkers(e, t), Array.from(r.querySelectorAll(this.menuItemSelector)).forEach(function (a) {
    var s = a.querySelector(".ciq-checkbox");
    q.node == a ? a.classList.add(n) : s || a.classList.remove(n);
  }));
};
K.UI.Keystroke = function (q, {
  keysToRepeat: e = []
} = {}) {
  this.cb = q, this.shift = !1, this.ctrl = !1, this.cmd = !1, this.alt = !1, this.capsLock = !1, this.downValue = "", this.keysToRepeat = e, this.recentKeys = {}, this.commandKeys = {}, this.initialize();
};
K.UI.Keystroke.noKeyCapture = !1;
K.UI.Keystroke.prototype.androidWorkaroundKeyup = function (q) {
  var e = q.target.value,
    t;
  e.length > this.downValue.length ? t = e.charAt(e.length - 1) : t = "Delete", this.key = t, this.cb({
    key: t,
    e: q,
    keystroke: this
  });
};
K.UI.Keystroke.prototype.mapKey = function (q) {
  return {
    Shift: "shift",
    Control: "ctrl",
    Alt: "alt",
    Meta: "cmd",
    Win: "cmd"
  }[q] || q;
};
K.UI.Keystroke.prototype.keyup = function (q) {
  if (this.implementAndroidWorkaround) {
    this.androidWorkaroundKeyup(q), this.implementAndroidWorkaround = !1;
    return;
  }
  const {
      recentKeys: e
    } = this,
    {
      key: t,
      code: n
    } = q,
    r = this.mapKey(t),
    i = t !== r,
    a = new Date().getTime();
  if (e[n] || (e[n] = {}), e[n].keyup = a, i) return this.commandKeys[n].pressed = !1, Object.values(this.commandKeys).some(({
    command: o,
    pressed: h
  }) => h && o === r) || (this[r] = !1), this.cb({
    key: t,
    e: q,
    keystroke: this
  });
  let s = [];
  Object.entries(this.commandKeys).forEach(([o, {
    command: h
  }]) => {
    let l = e[o] || {},
      u = e[n] || {};
    l.keydown < u.keydown && u.keydown < l.keyup && l.keyup + 500 > a && (s.push(o), this[h] = !0);
  }), s.length && setTimeout(() => {
    s.forEach(o => {
      e[o].keydown < a && (this[this.commandKeys[o].command] = !1);
    });
  }), this.keysToRepeat.includes(t) ? this.key = null : (this.key = t, this.cb({
    key: t,
    e: q,
    keystroke: this
  }));
};
K.UI.Keystroke.prototype.keydown = function (q) {
  if (this.noKeyCapture) return;
  if (q.which == 229 && K.isAndroid) {
    this.implementAndroidWorkaround = !0;
    return;
  }
  const {
      key: e,
      code: t
    } = q,
    n = this.mapKey(e),
    r = e !== n;
  this.recentKeys[t] || (this.recentKeys[t] = {}), this.recentKeys[t].keydown = new Date().getTime(), r && (this.commandKeys[t] = {
    command: n,
    pressed: !0
  }), e == "Tab" && q.preventDefault(), this.key = e, r ? this[n] = !0 : e === "CapsLock" ? this.capsLock = !this.capsLock : this.keysToRepeat.includes(e) && (this.key = null, this.cb({
    key: e,
    e: q,
    keystroke: this
  }));
};
K.UI.Keystroke.prototype.keypress = function (q) {
  if (!this.noKeyCapture) {
    var e = q.which;
    e < 32 || e > 222 || (this.key = q.key);
  }
};
K.UI.Keystroke.prototype.initialize = function () {
  var q = this;
  ["keyup", "keydown", "keypress"].forEach(function (e) {
    document.addEventListener(e, function (t) {
      e === "keydown" && (q.downValue = t.target.value), q[e](t);
    });
  }), window.addEventListener("blur", function (e) {
    q.ctrl = !1, q.cb({
      key: "Control",
      e,
      keystroke: q
    });
  });
};
K.UI.KeystrokeHub = function (q, e, t) {
  q = K.UI.$(q || "document")[0], this.infocus = !1;
  var n = this;
  q === document || q === document.body || q === window ? this.infocus = !0 : (q.addEventListener("mouseout", function () {
    n.infocus = !1;
  }), q.addEventListener("mouseover", function () {
    n.infocus = !0;
  })), this.context = e, this.params = t || {}, ({
    hotkeyConfig: this.hotkeyConfig
  } = e.config || {}), this.uiManager = K.UI.getUIManager(), this.uiManager.keystrokeHub = this;
  function r() {
    return function () {
      n.handler.apply(n, arguments);
    };
  }
  this.keystroke = new K.UI.Keystroke(r(), {
    keysToRepeat: this.hotkeyConfig.keysToRepeat
  }), this.tabOrder = [null], this.tabIndex = -1, this.yNormalizationThreshold = this.context.topNode.getBoundingClientRect().height / 10, this.tabElementSelectors = ["cq-menu.ciq-menu", ".ciq-toggles cq-toggle", "[keyboard-navigation='true']"], this.tabActiveElement = null, this.keyControlElement = null, this.highlightElement = null, this.context.topNode.addEventListener("pointerdown", () => this.tabOrderDeselect()), this.context.stx.append("resizeChart", () => {
    this.highlightAlign();
  });
  const {
      channelSubscribe: i
    } = K.UI.BaseComponent.prototype,
    a = (this.context.config.channels || {}).keyboardNavigation || "channel.keyboardNavigation";
  i(a, s => {
    s && s.action === "registerElements" && this.setTabOrderElements();
  }, this.context.stx);
};
K.inheritsFrom(K.UI.KeystrokeHub, K.UI.Helper);
K.UI.KeystrokeHub.defaultHotKeys = function (q, e, t = {}) {
  const {
      hotkeyConfig: n = {},
      keystroke: r,
      context: i
    } = e,
    {
      hotkeys: a = []
    } = n,
    {
      stx: s
    } = i,
    {
      code: o,
      keyCode: h
    } = t || {},
    l = o && o.includes("Numpad");
  return q === "Unidentified" && (q = String.fromCharCode(h)), a.slice().reverse().reduce(function (c, {
    action: d,
    commands: f,
    options: g
  }) {
    return c.concat(f.map(p => ({
      action: d,
      command: p,
      options: g
    })));
  }, []).map(function ({
    action: c,
    command: d,
    options: f
  }) {
    return d === "+" ? d = ["+"] : d.slice(-2) === "++" ? d = d.slice(0, -2).split("+").concat("+") : d = d.split("+"), {
      action: c,
      options: f,
      modifiers: d.slice(0, -1),
      commandKey: d.slice(-1)[0],
      specificity: d.length
    };
  }).filter(function ({
    modifiers: c,
    commandKey: d
  }) {
    let f = (l ? [o] : [o, q]).includes(d),
      g = !c.length || c.every(p => r[r.mapKey(p)]);
    return f && g;
  }).sort(function (c, d) {
    return d.specificity - c.specificity;
  }).some(function ({
    action: c,
    options: d
  }) {
    if (typeof c == "string") return K.UI.KeystrokeHub.executeHotkeyCommand({
      stx: s,
      action: c,
      options: d
    });
    if (typeof c == "function") return c({
      stx: s,
      options: d
    }) !== !1;
  });
};
K.UI.KeystrokeHub.executeHotkeyCommand = function ({
  stx: q,
  action: e,
  options: t = {}
}) {
  const {
      crosshair: n,
      candleWidth: r
    } = q.layout,
    {
      left: i,
      right: a,
      panel: s
    } = q.chart,
    o = q.height - q.xaxisHeight,
    {
      percent: h = 0,
      bars: l = 0
    } = t,
    u = document.body.keystrokeHub,
    {
      topNode: c
    } = q.uiContext,
    d = ({
      axis: m,
      direction: x = 1
    } = {}) => {
      const {
        cx: y,
        cy: b
      } = q;
      let C = 0;
      if (m === "x" && (C = r * l), m === "y" && (C = o * h), y || y === 0 || (q.cx = Math.round(q.width / 2)), b || b === 0 || (q.cy = Math.round(o / 2)), C) {
        let k = q["c" + m] + C * x;
        k = Math.max(k, m === "x" ? i + 1 : 0), k = Math.min(k, m === "x" ? a - 1 : o), q["c" + m] = Math.round(k);
      }
      q.mousemoveinner(q.resolveX(q.cx), q.resolveY(q.cy)), q.draw();
    },
    f = ({
      direction: m = 1,
      page: x
    } = {}) => {
      const {
        dataSet: y,
        scroll: b,
        maxTicks: C
      } = q.chart;
      let k = x ? C : l;
      k *= m, b + k >= y.length ? q.chart.scroll = y.length : q.chart.scroll += k, q.draw(), q.headsUpHR();
    },
    g = (m = 1) => {
      let x = o * h * m;
      q.chart.yAxis.scroll += x, q.draw();
    },
    p = (m = 1) => {
      [...s.yaxisLHS, ...s.yaxisRHS].forEach(y => {
        let b = y.zoom + 25 * m;
        b < y.height && (y.zoom = b);
      }), q.draw();
    };
  switch (e) {
    case "up":
      n ? d({
        axis: "y",
        direction: -1
      }) : g();
      break;
    case "down":
      n ? d({
        axis: "y"
      }) : g(-1);
      break;
    case "right":
      n ? d({
        axis: "x"
      }) : f({
        direction: -1
      });
      break;
    case "left":
      n ? d({
        axis: "x",
        direction: -1
      }) : f();
      break;
    case "pageRight":
      f({
        direction: -1,
        page: !0
      });
      break;
    case "pageLeft":
      f({
        page: !0
      });
      break;
    case "zoomInXAxis":
      q.allowZoom && q.zoomIn();
      break;
    case "zoomOutXAxis":
      q.allowZoom && q.zoomOut();
      break;
    case "zoomInYAxis":
      p(-1);
      break;
    case "zoomOutYAxis":
      p();
      break;
    case "toggleCrosshairs":
      const m = c.querySelector("cq-toggle[cq-member=\"crosshair\"]");
      m ? m.dispatchEvent(new Event("stxtap")) : q.layout.crosshair = !q.layout.crosshair, d();
      break;
    case "toggleContinuousZoom":
      q.continuousZoom && q.continuousZoom.smartZoomToggle();
      break;
    case "home":
      q.home(), q.headsUpHR();
      break;
    case "end":
      q.chart.scroll = q.chart.dataSet.length, q.draw(), q.headsUpHR();
      break;
    case "delete":
      if (K.ChartEngine.drawingLine) q.undo();else if (q.anyHighlighted) q.deleteHighlighted();else return !1;
      break;
    case "escape":
      if (q.uiContext.isModal() || u.tabOrderDeselect(), K.ChartEngine.drawingLine) q.undo();else {
        const x = K.UI.getUIManager();
        x && x.closeMenu();
      }
      break;
    case "keyboardNavigateNext":
      u.tabIndexNext();
      break;
    case "keyboardNavigatePrevious":
      u.tabIndexNext(!0);
      break;
    case "keyboardNavigateClick":
      u.tabOrderClickSelected();
      break;
    default:
      return !1;
  }
  return !0;
};
K.UI.KeystrokeHub.prototype.setTabOrderElements = function () {
  this.tabOrder = [null];
  for (let q = 0; q < this.tabElementSelectors.length; q++) {
    const e = this.context.topNode.querySelectorAll(this.tabElementSelectors[q]);
    for (let t = 0; t < e.length; t++) {
      const n = e[t];
      if (n.getAttribute("keyboard-navigation") === "false") continue;
      const {
        x: r,
        y: i,
        width: a,
        height: s
      } = n.getBoundingClientRect();
      n.addEventListener("stxtap", function (o) {
        let h = this.tabOrder.findIndex(l => l && l.element === o);
        return h != this.tabIndex && (this.tabOrderDeselect(), this.tabIndex = -h), !0;
      }.bind(this, n)), this.tabOrder.push({
        element: n,
        position: {
          x: r,
          y: i,
          width: a,
          height: s
        }
      });
    }
  }
  this.tabOrder.sort((q, e) => {
    if (!(q === null || e === null)) return Math.floor(q.position.y / this.yNormalizationThreshold) - Math.floor(e.position.y / this.yNormalizationThreshold) || q.position.x - e.position.x;
  });
};
K.UI.KeystrokeHub.prototype.setKeyControlElement = function (q, e) {
  !this.keyControlElement && !q || (this.disableKeyControlElement(this.keyControlElement, e), q && (this.keyControlElement = q, this.keyControlElement.keyboardNavigation = this, typeof this.keyControlElement.onKeyboardSelection == "function" && this.keyControlElement.onKeyboardSelection()));
};
K.UI.KeystrokeHub.prototype.disableKeyControlElement = function (q, e) {
  q && (!e && typeof q.onKeyboardDeselection == "function" && q.onKeyboardDeselection(), q.keyboardNavigation = null);
};
K.UI.KeystrokeHub.prototype.tabOrderDeselect = function (q) {
  const {
    tabOrder: e,
    tabIndex: t
  } = this;
  t <= 0 || (this.disableKeyControlElement(e[t].element), q || (this.tabActiveElement = null, this.tabIndex = -this.tabIndex, this.highlightHide()));
};
K.UI.KeystrokeHub.prototype.tabOrderSelect = function () {
  const {
    tabOrder: q,
    tabIndex: e
  } = this;
  e <= 0 || this.highlightPosition(q[e]);
};
K.UI.KeystrokeHub.prototype.tabOrderClickSelected = function () {
  const {
    tabOrder: q,
    tabIndex: e
  } = this;
  q.length <= 1 || e <= 0 || (this.setKeyControlElement(q[e].element), q[e].element.dispatchEvent(new Event("pointerdown")), q[e].element.dispatchEvent(new Event("pointerup")));
};
K.UI.KeystrokeHub.prototype.tabIndexNext = function (q) {
  if (this.tabOrder.length <= 1) return;
  let e = function (t, n) {
    n === !0 ? t.tabIndex-- : t.tabIndex++, t.tabIndex >= t.tabOrder.length && (t.tabIndex = 1), t.tabIndex < 1 && (t.tabIndex = t.tabOrder.length - 1);
  };
  for (this.tabIndex < 0 ? this.tabIndex = Math.abs(this.tabIndex) : (this.tabOrderDeselect(!0), e(this, q)); !K.trulyVisible(this.tabOrder[this.tabIndex].element);) e(this, q);
  this.tabOrderSelect();
};
K.UI.KeystrokeHub.prototype.highlightPosition = function (q) {
  if (!q || !q.element || !q.position) {
    const {
      tabOrder: e,
      tabIndex: t
    } = this;
    if (t <= 0) return;
    q = e[t];
  }
  this.tabActiveElement = q, this.highlightAlign();
};
K.UI.KeystrokeHub.prototype.highlightAlign = function () {
  if (this.tabActiveElement) {
    this.highlightCreate();
    const q = this.tabActiveElement.element.getBoundingClientRect();
    Object.assign(this.highlightElement.style, {
      top: q.top + "px",
      left: q.left + "px",
      width: q.width + "px",
      height: q.height + "px"
    });
  }
};
K.UI.KeystrokeHub.prototype.highlightCreate = function () {
  return this.highlightElement ? this.highlightElement.classList.remove("disabled") : (this.highlightElement = document.createElement("cq-keyboard-selected-highlight"), this.context.topNode.appendChild(this.highlightElement)), this.highlightElement;
};
K.UI.KeystrokeHub.prototype.highlightHide = function () {
  this.highlightElement && this.highlightElement.classList.add("disabled");
};
K.UI.KeystrokeHub.prototype.setActiveContext = function (q) {
  this.context = q;
};
K.UI.KeystrokeHub.prototype.processKeyStrokeClaims = function (q, e, t, n) {
  for (var r = Er.length - 1; r > -1; r--) {
    var i = Er[r].helper,
      a = i.keyStroke(q, e, t, n);
    if (a) return a.allowDefault || t.preventDefault(), !0;
  }
  return !1;
};
K.UI.KeystrokeHub.prototype.handler = function (q) {
  var e = this.context.stx;
  if (!e.editingAnnotation && this.infocus) {
    var t = q.e,
      n = q.key,
      r = q.keystroke,
      i = q.e.target.tagName;
    switch (n) {
      case "Shift":
        e.shift = r.shift;
        break;
      case "Control":
      case "Alt":
        e.ctrl = r.ctrl;
        break;
      case "Meta":
      case "Win":
        e.cmd = r.cmd;
        break;
      case "CapsLock":
        this.capsLock = !this.capsLock;
        break;
    }
    if (this.params.cb && i !== "INPUT" && i !== "TEXTAREA" && !(this.context.isModal() && !(t.key === "Escape" || t.key === "Esc" || t.key === "Tab")) && this.params.cb(n, this, t)) return t.preventDefault();
    !K.ChartEngine.drawingLine && this.processKeyStrokeClaims(this, n, t, r);
  }
};
class no extends HTMLElement {
  constructor() {
    super(), this.activeMenuStack = [], this.registeredForResize = [], this.keystrokehub = null, K.installTapEvent(document.body, {
      preventUnderlayClick: !1
    });
    var e = this;
    function t() {
      e.closeTopMenu();
    }
    document.body.addEventListener("stxtap", t);
  }
  connectedCallback() {
    var e = this;
    this.resize = function () {
      for (var t = e.registeredForResize, n = 0; n < t.length; n++) typeof t[n].resize == "function" && t[n].resize();
    }, window.addEventListener("resize", this.resize), document.body.contains(this) && (K.UI.registerComponentsImmediately = !0, K.UI.ensureComponentsRegistered());
  }
  disconnectedCallback() {
    window.removeEventListener("resize", this.resize);
  }
  closeMenu(e) {
    var t = this.activeMenuStack,
      n = [];
    if (e) for (n.push(e), e = e.parentElement; e;) e.matches("cq-menu") && e.active && n.push(e), e = e.parentElement;else n = t;
    for (var r = 0; r < n.length; r++) n[r].hide();
    this.activeMenuStack = t.filter(function (i) {
      return i.active;
    }), this.ifAllClosed();
  }
  closeTopMenu() {
    var e = this.activeMenuStack;
    if (e.length) {
      var t = e[e.length - 1],
        n = this;
      (!t.isDialog || t.active) && (e.pop(), t.hide(), t.onClose && t.onClose(), setTimeout(function () {
        n.ifAllClosed();
      }, 0));
      var r = t.getAttribute("cq-close-top");
      r && K.climbUpDomTree(t.parentElement, r).forEach(function (i) {
        n.closeMenu(i);
      });
    }
  }
  findLifts(e) {
    return K.UI.$(Array.from(e.querySelectorAll("*[cq-lift]")).filter(function (t) {
      return t.closest("cq-menu,cq-dialog") == e;
    }));
  }
  ifAllClosed() {
    this.activeMenuStack.length || Array.from(document.querySelectorAll("cq-context,*[cq-context]")).forEach(function (e) {
      e.CIQ && e.CIQ.UI && e.CIQ.UI.context && e.CIQ.UI.context.stx && e.CIQ.UI.context.stx.modalEnd();
    });
  }
  lift(e) {
    var t = e;
    if (t) {
      t.remember = {
        parentNode: t.parentNode,
        css: {
          position: t.style.position,
          display: t.style.display,
          left: t.style.left,
          top: t.style.top,
          height: t.style.height,
          width: t.style.width,
          opacity: t.style.opacity
        }
      };
      var n = t.getBoundingClientRect(),
        r = t.scrollHeight;
      t.remove(), t.reduceMenuHeight = 5, Object.assign(t.style, {
        position: "absolute",
        display: "block",
        left: n.left + "px",
        top: n.top + "px",
        height: r + "px",
        opacity: 1
      }), document.body.appendChild(t), typeof t.resize < "u" && t.resize(), Array.from(t.querySelectorAll("cq-scroll")).forEach(function (i) {
        i.resize();
      });
    }
  }
  openMenu(e, t) {
    setTimeout(function () {
      var n = e.querySelector("input[cq-focus]:first-child");
      n && n.focus();
    }, 0), this.activeMenuStack.push(e), e.show(t), Array.from(document.querySelectorAll("cq-context,*[cq-context]")).forEach(function (n) {
      n.CIQ && n.CIQ.UI && n.CIQ.UI.context && n.CIQ.UI.context.stx && n.CIQ.UI.context.stx.modalBegin();
    });
  }
  registerForResize(e) {
    this.registeredForResize.push(e);
  }
  restoreLift(e) {
    if (e) {
      var t = e.remember;
      e.remove(), Object.assign(e.style, t.css), t.parentNode.appendChild(e);
    }
  }
  topMenu() {
    var e = this.activeMenuStack;
    return e.length ? e[e.length - 1] : null;
  }
  unregisterForResize(e) {
    for (var t = this.registeredForResize, n = 0; n < t.length; n++) if (t[n] === e) {
      t.splice(n, 1);
      return;
    }
  }
}
K.UI.UIManager = no;
K.UI.getUIManager = function () {
  if (K.UI._uiManager) return K.UI._uiManager;
  let q = document.querySelector("cq-ui-manager");
  return q || (q = new K.UI.UIManager(), q.connectedCallback()), K.UI._uiManager = q, q;
};
customElements.define("cq-ui-manager", no);
const {
  qs: Tr,
  qsa: Vl,
  channelWrite: $r,
  channelRead: os,
  channelSubscribe: Ir
} = K.UI.BaseComponent.prototype;
class Ul {
  createChartAndUI({
    container: e,
    config: t
  }) {
    e || (e = document.body), t && !t.chartId && (t.chartId = e.id);
    const n = a(e),
      r = K.ChartEngine.create({
        container: Tr(".chartContainer", n),
        config: t,
        deferLoad: !0
      });
    K.UI.scrollbarStyling = t.scrollbarStyling, K.UI.ensureComponentsRegistered();
    const i = new K.UI.Context(r, n);
    return i.config = t, e.context = i, new K.UI.Layout(i), new K.UI.StudyEdit(null, i), this.initLookup(i), this.initContainerListeners(i), this.initEventMarkers(i), this.initDrawingTools(i), this.initDrawingEditListeners(i), this.initDialogHandler(i), this.initColorPicker(), this.initExtensions({
      stx: r,
      uiContext: i,
      config: t,
      type: "plugins"
    }), this.loadChart(i), t.language && K.I18N.setLanguage(r, t.language), K.UI.BaseComponent.buildReverseBindings(n), n.bindingInitiated = !0, K.UI.begin(t.onWebComponentsReady), window.setTimeout(function () {
      document.body.keystrokeHub.setTabOrderElements();
    }, 0), i;
    function a(s) {
      return s.nodeName.match(/cq-context/i) || s.getAttribute("cq-container") ? s : s.querySelector("cq-context, [cq-context]");
    }
  }
  initContainerListeners(e) {
    const {
      config: {
        channels: {
          breakpoint: t = "channel.breakpoint",
          sidenavSize: n = "channel.sidenavSize",
          sidepanelSize: r = "channel.sidepanelSize",
          drawingPalettes: i = "channel.drawingPalettes",
          pluginPanelHeight: a = "channel.pluginPanelHeight"
        } = {}
      } = {},
      stx: s,
      topNode: o
    } = e;
    K.UI.addResizeListener(o, () => this.notifySizeChanges(e)), this.notifySizeChanges(e), Ir(t, this.breakpointSetter(e), s), Ir(n, this.sidenavSizeSetter(e), s), Ir(r, this.sidepanelSizeSetter(e), s), Ir(i, this.chartPositionSetter(e), s), Ir(a, this.chartAreaTopSetter(e), s);
    const h = this.initKeystrokeHub(e),
      l = this.getKeystrokeHubSetter(e, h);
    o.addEventListener("mouseover", l);
  }
  initLookup(e) {
    const {
      config: t,
      topNode: n
    } = e;
    this.initKeystrokeHub(e), e.changeSymbol = function (r, i) {
      const {
        stx: a,
        loader: s
      } = e;
      s && s.show(), r.symbol == r.symbol.toLowerCase() && (r.symbol = r.symbol.toUpperCase());
      const {
        removeSeries: o,
        loadError: h
      } = t.onNewSymbolLoad || {};
      o && Object.values(a.chart.series).filter(o).forEach(l => a.removeSeries(l.id)), a.loadChart(r, {
        masterData: r._masterData
      }, function (l) {
        if (s && s.hide(), l) {
          h && h(l, e);
          return;
        }
        i && i(a), t.restore && K.ChartEngine.restoreDrawings(a, a.chart.symbol, t.chartId);
      });
    }, t.lookupDriver && e.setLookupDriver(new t.lookupDriver());
  }
  initKeystrokeHub(e) {
    return document.body.keystrokeHub || (document.body.keystrokeHub = new K.UI.KeystrokeHub(document.body, e, {
      cb: K.UI.KeystrokeHub.defaultHotKeys
    })), document.body.keystrokeHub;
  }
  getKeystrokeHubSetter(e, t) {
    return function () {
      t.context !== e && (t.setActiveContext(e), Vl("cq-lookup").forEach(r => r.removeAttribute("cq-keystroke-default")), Tr("cq-menu.ciq-search cq-lookup", e.topNode).setAttribute("cq-keystroke-default", ""));
    };
  }
  initDialogHandler(e) {
    const {
      config: {
        channels: t = {},
        dialogs: n = {}
      } = {},
      stx: r
    } = e;
    Ir(t.dialog || "channel.dialog", i, r);
    function i({
      type: a = null,
      params: s = {}
    } = {}) {
      if (!a) return;
      const o = n[a] || n[K.makeCamelCase(a)];
      if (!o) return;
      let h = Tr(o.tag);
      if (!h) {
        const u = l(),
          c = document.createElement("cq-dialog");
        h = document.createElement(o.tag), Object.entries(o.attributes || {}).forEach(([d, f]) => h.setAttribute(d, f)), c.append(h), u.append(c);
      }
      h && h.open && h.open(s);
      function l() {
        let u = Tr(".cq-dialogs");
        return u || (u = document.createElement("div"), u.classList.add("cq-dialogs"), document.body.append(u), u);
      }
    }
  }
  initDrawingTools(e) {
    const {
      stx: t,
      config: {
        channels: n = {}
      } = {},
      topNode: r
    } = e;
    Ir(n.drawing || "channel.drawing", i, t);
    function i(a) {
      r.classList[a ? "add" : "remove"]("toolbar-on"), t.resizeChart();
    }
  }
  initDrawingEditListeners(e) {
    const {
        config: {
          channels: t = {}
        } = {},
        stx: n
      } = e,
      r = new K.UI.DrawingEdit(null, e);
    let i = !0;
    const a = t.drawing || "channel.drawing";
    r.node.addEventListener("drawing-edit-begin", function (s) {
      os(a, n) || (i = !1, $r(a, !0, n));
    }, !1), r.node.addEventListener("drawing-edit-end", function ({
      detail: s
    }) {
      i || (s.action !== "edit" && (i = !0), s.action === "close" && $r(a, !1, n));
    }, !1);
  }
  initColorPicker() {
    document.querySelector("cq-color-picker") || document.body.append(document.createElement("cq-color-picker"));
  }
  loadChart(e) {
    const {
      stx: t,
      topNode: n,
      config: {
        chartId: r,
        initialSymbol: i,
        restore: a,
        onChartReady: s,
        initialData: o
      } = {},
      loader: h
    } = e;
    h && h.show(), a ? (K.ChartEngine.restorePreferences(t, r || n.id), K.ChartEngine.restoreLayout(t, function () {
      if (h && h.hide(), !t.chart.symbol) {
        l();
        return;
      }
      s && s(t);
    }, r)) : l(), t.termStructure && t.setChartType("termstructure");
    function l() {
      if (!i) {
        u();
        return;
      }
      const c = typeof i == "string" ? {
        symbol: i
      } : i;
      c._masterData = o, e.changeSymbol(c, u);
    }
    function u() {
      s && setTimeout(() => s(t));
    }
  }
  notifySizeChanges(e) {
    const {
        stx: t,
        topNode: {
          clientWidth: n,
          clientHeight: r
        },
        config: {
          channels: i = {}
        } = {}
      } = e,
      a = os(i.containerSize || "channel.containerSize", t);
    if (a && a.width === n && a.height === r) return;
    const s = this.getBreakpoint(n);
    s !== t.chart.breakpoint && ($r(i.breakpoint || "channel.breakpoint", s, t), t.notifyBreakpoint(s)), $r(i.containerSize || "channel.containerSize", {
      width: n,
      height: r
    }, t), t.resizeChart();
  }
  getBreakpoint(e) {
    return e > 768 ? "break-lg" : e > 584 ? "break-md" : "break-sm";
  }
  initEventMarkers(e) {
    const t = e.config;
    if (K.UI.Markers) {
      const n = t.eventMarkersImplementation && new t.eventMarkersImplementation(e.stx),
        r = t.selector.markersMenuItem;
      new K.UI.Markers(e, {
        menuItemSelector: r,
        implementation: n
      });
    }
  }
  initExtensions({
    stx: e,
    uiContext: t,
    config: n,
    type: r
  }) {
    const i = n[r];
    Object.entries(i).filter(([, a]) => !!a).forEach(([a, s]) => {
      const o = s.moduleName || K.capitalize(a);
      try {
        if (!K[o]) {
          K.debug && console.log(`${o} not available for ${r} with params:`, s);
          return;
        }
        const h = Object.assign({
            stx: e,
            context: t
          }, s),
          l = new K[o](h);
        K.UI.activatePluginUI(e, o), s.postInstall && s.postInstall({
          uiContext: t,
          extension: l
        });
      } catch (h) {
        K.debug && console.error("Error configuring " + r + " using params ", s, "error", h);
      }
    });
  }
  chartPositionSetter(e) {
    const t = Tr(".chartContainer", e.topNode);
    return function (r) {
      if (!r) return;
      const {
        top: i,
        left: a
      } = r;
      t.style.marginTop = i + "px", t.style.marginLeft = a + "px";
    };
  }
  sidenavSizeSetter(e) {
    const t = Tr(".ciq-chart-area", e.topNode),
      n = e.stx;
    return function (i) {
      t.style.left = i + "px", n.resizeChart();
    };
  }
  chartAreaTopSetter(e) {
    const t = Tr(".ciq-chart-area", e.topNode);
    return function (r) {
      const i = Object.values(r || {}).reduce((a, s) => a + s, 0);
      t.style.marginTop = i + "px", e.stx.resizeChart();
    };
  }
  sidepanelSizeSetter(e) {
    const t = Tr(".ciq-chart-area", e.topNode),
      n = Tr("cq-analystviews", e.topNode) || Tr("cq-tradingcentral", e.topNode),
      r = e.stx;
    return function (a) {
      t.style.right = a + "px", n && (n.style.marginRight = a + "px"), r.resizeChart();
    };
  }
  breakpointSetter(e) {
    return function (n) {
      e.topNode.classList.remove("break-lg", "break-md", "break-sm"), e.topNode.classList.add(n);
    };
  }
}
K.UI.Chart = Ul;
class Pr {
  constructor(e, t) {
    t !== void 0 && console.log("CIQ.UI.$() only accepts one input parameter.");
    let n = [];
    if (e instanceof Pr) return e;
    e instanceof Node ? n.push(e) : e instanceof NodeList ? n = Array.from(e) : e instanceof Array ? n = e : typeof e == "string" && (n = n = Array.from(document.querySelectorAll(e)));
    const r = this.length = n.length;
    for (let i = 0; i < r; i++) this[i] = n[i];
  }
  _(e, t) {
    const n = [],
      r = i => {
        (!t || i.matches(t)) && (n.includes(i) || n.push(i));
      };
    for (let i = 0; i < this.length; i++) {
      const a = this[i];
      Array.from(e(a)).forEach(r);
    }
    return new Pr(n);
  }
  addClass(e) {
    return typeof e == "string" && (e = e.split(" ")), e.forEach(t => this._(n => (n.classList.add(t), [n]))), this;
  }
  append(e, t) {
    if (typeof t < "u" && console.log("CIQ.UI.$#append only accepts one argument."), e instanceof Array) for (let n = 0; n < e.length; n++) this.append(e[n]);else {
      if (typeof e == "string") return this._(n => (n[e[0] === "<" ? "innerHTML" : "innerText"] += e, [n]));
      if (e instanceof HTMLElement || e instanceof Text) {
        const n = this._(i => (i.appendChild(e.cloneNode(!0)), [i])),
          r = n[n.length - 1];
        return r.replaceChild(e, r.lastChild), n;
      } else if (e instanceof Pr) return this.append(Array.from(e));
    }
    return this;
  }
  attr(e, t) {
    if (typeof e == "object") return this._(n => (Object.keys(e).forEach(r => n.setAttribute(r, e[r])), [n]));
    if (typeof t > "u") {
      if (!this[0]) return;
      const n = this[0].getAttribute(e);
      return n === null ? void 0 : n;
    }
    return this._(n => (n.setAttribute(e, t), [n]));
  }
  children(e) {
    return this._(t => t.children, e);
  }
  css(e, t) {
    return typeof e == "object" ? this._(n => (Object.assign(n.style, e), [n])) : typeof t > "u" ? this[0] ? getComputedStyle(this[0])[e] : void 0 : this._(n => (n.style[e] = t, [n]));
  }
  each(e) {
    for (let t = 0; t < this.length; t++) e.call(this[t], t, this[t]);
    return this;
  }
  empty() {
    return this._(e => (e.innerHTML = "", [e]));
  }
  find(e) {
    return e ? this._(t => t.querySelectorAll(e)) : new Pr([]);
  }
  hasClass(e) {
    return this._(t => t.classList.contains(e) && [t]).length > 0;
  }
  hide() {
    return this._(e => (e.style.display !== "none" && (e.style.displayCache = e.style.display, e.style.display = "none"), [e]));
  }
  html(e) {
    return this.prop("innerHTML", e);
  }
  nextAll(e) {
    return this._(t => {
      const n = Array.from(t.parentNode.children);
      return n.slice(n.indexOf(t) + 1);
    }, e);
  }
  not(e) {
    return this._(t => !t.matches(e) && [t]);
  }
  parent(e) {
    return this._(t => [t.parentNode], e);
  }
  parents(e) {
    return this._(t => K.climbUpDomTree(t.parentElement, e));
  }
  prop(e, t) {
    return typeof e == "object" ? this._(n => (Object.keys(e).forEach(r => n[r] = e[r]), [n])) : typeof t > "u" ? this[0] ? this[0][e] : void 0 : this._(n => (n[e] = t, [n]));
  }
  remove(e) {
    return Array.from(this).forEach(t => {
      (!e || t.matches(e)) && t.parentNode.removeChild(t);
    }), this;
  }
  removeAttr(e) {
    return typeof e == "string" && (e = e.split(" ")), e.forEach(t => this._(n => (n.removeAttribute(t), [n]))), this;
  }
  removeClass(e) {
    return typeof e == "string" && (e = e.split(" ")), e ? e.forEach(t => this._(n => (n.classList.remove(t), [n]))) : this._(t => (t.className = "", [t])), this;
  }
  show() {
    return this._(e => (e.style.display === "none" && (e.style.displayCache === void 0 ? e.style.display = "block" : (e.style.display = e.style.displayCache, e.style.displayCache = void 0)), [e]));
  }
  text(e) {
    return this.prop("innerText", e);
  }
  val(e) {
    return this.prop("value", e);
  }
}
K.UI.$ = function (q, e) {
  return !e && typeof $ == "function" && $.fn ? (ls || (console.log("Using jQuery."), ls = !0), $(q)) : new Pr(q);
};
let ls = !1,
  so = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.BaseComponent {
      connectedCallback() {
        this.type = this.getAttribute("cq-type") || "helicopter", this.init();
      }
      init() {
        if (this.attached) return;
        const {
          markups: r
        } = this.constructor;
        this.addDefaultMarkup(this, r[this.type]);
      }
    }
    t.markups = {
      helicopter: `
		<div class="stx-marker-templates" style="left: -1000px; visibility:hidden;">
			<!-- Abstract Markers. You can remove this unless you actually need a helicopter. Seriously though, markers can be anything you want them to be! -->
			<div class="abstract">
				<div class="stx-marker abstract">
					<div class="stx-marker-content">
						<div class="sample">
							<div stage>
								<div helicopter>
									<div propeller style="height: 160px;">
										<div spinner style="-webkit-transform-origin: 40px 0 0; transform-origin: 40px 0 0;">
											<div style="-webkit-transform: rotateY(0deg) translateX(40px); transform: rotateY(0deg) translateX(40px);"></div>
											<div style="-webkit-transform: rotateY(-90deg) translateX(40px); transform: rotateY(-90deg) translateX(40px);"></div>
											<div style="-webkit-transform: rotateY(-180deg) translateX(40px); transform: rotateY(-180deg) translateX(40px);"></div>
											<div style="-webkit-transform: rotateY(-270deg) translateX(40px); transform: rotateY(-270deg) translateX(40px);"></div>
										</div>
									</div>
									<div heli-body></div>
								</div>
							</div>
							<div class="text">This is an example of a complex marker which can contain html, video, images, css, and animations.</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		`
    }, e.UI.addComponentDefinition("cq-abstract-marker", t);
  },
  oo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.Marker) console.error("advertisement component requires first activating markers feature.");else {
      class t extends e.UI.ModalTag {
        constructor() {
          super();
        }
        close() {
          this.node.css({
            display: "none"
          });
          var r = this;
          this.nameValueStore.get("cq-advertisement", function (i, a) {
            if (!i) {
              var s = new Date();
              r.sleepAmount || (r.sleepAmount = {
                units: 1,
                unitType: "day"
              });
              var o = r.sleepAmount.units,
                h = r.sleepAmount.unitType;
              h == "minute" ? s.setMinutes(s.getMinutes() + o) : h == "hour" ? s.setHours(s.getHours() + o) : h == "day" ? s.setDate(s.getDate() + o) : h == "week" ? s.setDate(s.getDate() + o * 7) : h == "month" && s.setMonth(s.getMonth() + o);
              var l = s.getTime();
              (!a || typeof a != "object") && (a = {}), a[r.selector] = l, r.nameValueStore.set("cq-advertisement", a);
            }
          });
        }
        makeMarker() {
          this.markerExists || (new e.Marker({
            stx: this.context.stx,
            xPositioner: "none",
            label: "advertisement",
            permanent: !0,
            node: this.node[0]
          }), this.markerExists = !0);
        }
        setContext(r) {
          const {
            config: {
              nameValueStore: i
            }
          } = r;
          this.setNameValueStore(i);
        }
        setNameValueStore(r) {
          !r && e.NameValueStore && (r = e.NameValueStore), this.nameValueStore = r ? new r() : {
            get: function () {},
            set: function () {}
          };
        }
        setSleepAmount(r, i) {
          this.sleepAmount = {
            units: r,
            unitType: i
          };
        }
        show(r, i = !1) {
          if (this.selector) {
            var a = this.node.find(this.selector);
            a.removeClass("ciq-show");
          }
          if (this.selector = r, !this.selector) {
            var s = this.node.find("div:first-of-type");
            this.selector = "." + s.attr("class");
          }
          this.ignoreSleep = i;
          var o = this;
          function h() {
            o.makeMarker(), o.node.css({
              display: "block"
            });
            var l = o.node.find(o.selector);
            l.addClass("ciq-show"), o.node.css({
              height: "0px"
            }), setTimeout(function () {
              o.node.css({
                height: o.node[0].scrollHeight + "px"
              });
            }, 0);
          }
          i ? h() : this.nameValueStore.get("cq-advertisement", function (l, u) {
            if (!l) {
              (!u || typeof u != "object") && (u = {});
              var c = u[o.selector];
              c && c > Date.now() || h();
            }
          });
        }
        watchForRemoteClose(r) {
          r || (r = 1000);
          var i = this;
          setInterval(function () {
            i.node.css("display") != "none" && i.nameValueStore.get("cq-advertisement", function (a, s) {
              if (!a) {
                (!s || typeof s != "object") && (s = {});
                var o = s[i.selector];
                o && o > Date.now() && i.close();
              }
            });
          }, r);
        }
      }
      e.UI.addComponentDefinition("cq-advertisement", t);
    }
  },
  lo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.DialogContentTag {
      open(r) {
        this.addDefaultMarkup(), super.open(r);
        var i = this.context.stx,
          a = r.aggregationType,
          s = {
            kagi: {
              title: "Set Reversal Percentage"
            },
            renko: {
              title: "Set Brick Size"
            },
            linebreak: {
              title: "Set Price Lines"
            },
            rangebars: {
              title: "Set Range"
            },
            pandf: {
              title: "Set Point & Figure Parameters"
            }
          };
        i.layout.aggregationType != a && i.setAggregationType(a);
        var o = s[a],
          h = this.node;
        h.find(".title").text(i.translateIf(o.title));
        for (var l in s) h.find(".ciq" + l).css(a === l ? {
          display: ""
        } : {
          display: "none"
        });
        h.find(".ciq" + a + " input").each(function () {
          var u = this.name;
          (u == "box" || u == "reversal") && (u = "pandf." + u);
          var c = e.deriveFromObjectChain(i.layout, u);
          c && (c.obj[c.member] || c.obj[c.member] === 0) ? this.value = c.obj[c.member] : i.chart.defaultChartStyleConfig[this.name] && (this.value = i.chart.defaultChartStyleConfig[this.name]);
        });
      }
    }
    t.markup = `
		<h4 class="title"></h4>
		<cq-close></cq-close>
		<div style="text-align:center;margin-top:10px;">
			<div class="ciqkagi">
				<i>Enter value and hit "Enter"</i>
				<p>
					<input name="kagi" stxtap="Layout.setAggregationEdit('kagi')">
				</p>
			</div>
			<div class="ciqrenko">
				<i>Enter value and hit "Enter"</i>
				<p>
					<input name="renko" stxtap="Layout.setAggregationEdit('renko')">
				</p>
			</div>
			<div class="ciqlinebreak">
				<i>Enter value and hit "Enter"</i>
				<p>
					<input name="priceLines" stxtap="Layout.setAggregationEdit('priceLines')">
				</p>
			</div>
			<div class="ciqrangebars">
				<i>Enter value and hit "Enter"</i>
				<p>
					<input name="range" stxtap="Layout.setAggregationEdit('rangebars')">
				</p>
			</div>
			<div class="ciqpandf">
				<i>Enter box size and hit "Enter"</i>
				<p>
					<input name="box" stxtap="Layout.setAggregationEdit('pandf.box')">
				</p>
				<p>
					<i>Enter reversal and hit "Enter"</i>
				</p>
				<p>
					<input name="reversal" stxtap="Layout.setAggregationEdit('pandf.reversal')">
				</p>
			</div>
			<p>or</p>
			<div class="ciq-btn" stxtap="Layout.setAggregationEdit('auto')">Auto Select</div>
		</div>

	`, e.UI.addComponentDefinition("cq-aggregation-dialog", t);
  },
  ho = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.Marker) console.error("attribution component requires first activating markers feature.");else {
      class t extends e.UI.ModalTag {
        constructor() {
          super(), this.messages = {
            sources: {
              simulator: "Simulated data.",
              demo: "Demo data.",
              xignite: "<a target=\"_blank\" href=\"https://www.xignite.com\">Market Data</a> by Xignite.",
              fis_mm: "<a target=\"_blank\" href=\"https://www.fisglobal.com/\">Market Data</a> by FIS MarketMap.",
              Twiggs: "Twiggs MF Formula courtesy <a target=\"_blank\" href=\"https://www.incrediblecharts.com/indicators/twiggs_money_flow.php\">IncredibleCharts</a>."
            },
            exchanges: {
              RANDOM: "Data is randomized.",
              "REAL-TIME": "Data is real-time.",
              DELAYED: "Data delayed 15 min.",
              RATES: "Yield data latest from source, bid/ask simulated.",
              BATS: "BATS BZX real-time.",
              EOD: "End of day data."
            }
          };
        }
        insert(r, i) {
          if (e.Marker) {
            var a = e.UI.makeFromTemplate(this.template);
            return a.marker = new e.Marker({
              stx: r,
              node: a[0],
              xPositioner: "none",
              yPositioner: "none",
              label: "component",
              panelName: i,
              permanent: !0
            }), a;
          }
        }
        setContext(r) {
          this.addDefaultMarkup(), this.template = this.node.find("template");
          var i = this.insert(r.stx, "chart"),
            a = this;
          this.addInjection("append", "createDataSet", function () {
            var s, o;
            this.chart.attribution && (s = a.messages.sources[this.chart.attribution.source], o = a.messages.exchanges[this.chart.attribution.exchange], s || (s = ""), o || (o = ""), s + o != i.attr("lastAttrib") && (i.find("cq-attrib-source").html(s), i.find("cq-attrib-quote-type").html(o), e.I18N && e.I18N.translateUI(null, i[0]), i.attr("lastAttrib", s + o)));
            for (var h in this.layout.studies) {
              var l = this.layout.studies[h],
                u = l.type;
              if (a.messages.sources[u]) {
                if (l.attribution && l.attribution.marker.params.panelName == l.panel) continue;
                s = a.messages.sources[u] || "", o = a.messages.exchanges[u] || "";
                var c = a.insert(this, l.panel);
                c.find("cq-attrib-source").html(s), c.find("cq-attrib-quote-type").html(o), e.I18N && e.I18N.translateUI(null, c[0]), l.attribution = c;
              }
            }
          });
        }
      }
      t.markup = `
		<template>
			<cq-attrib-container>
				<cq-attrib-source></cq-attrib-source>&nbsp;
				<cq-attrib-quote-type></cq-attrib-quote-type>
			</cq-attrib-container>
		</template>
	`, e.UI.addComponentDefinition("cq-attribution", t);
    }
  },
  uo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext() {
        this.contextSet || (this.contextSet = !0, this.addDefaultMarkup());
      }
    }
    t.markup = `
		<cq-study-legend cq-marker-label="Plots" cq-clone-to-panels="Plots" cq-panel-only cq-marker cq-hovershow cq-content-keys="cq-label,cq-comparison-label">
			<cq-comparison>
				<cq-comparison-key cq-panel-only cq-all-series>
					<template cq-comparison-item>
						<cq-comparison-item>
							<cq-swatch cq-overrides="auto"></cq-swatch>
							<cq-comparison-label>AAPL</cq-comparison-label>
							<!-- cq-comparison-price displays the current price with color animation -->
							<cq-comparison-price cq-animate></cq-comparison-price>
							<!-- cq-comparison-tick-price displays the price for the active crosshair item -->
							<!-- <cq-comparison-tick-price></cq-comparison-tick-price>	-->
							<cq-comparison-loader></cq-comparison-loader>
							<div class="stx-btn-ico ciq-close"></div>
						</cq-comparison-item>
					</template>
				</cq-comparison-key>
			</cq-comparison>
			<template cq-study-legend>
				<cq-item>
					<cq-label></cq-label>
					<span class="ciq-edit"></span>
					<div class="ciq-icon ciq-close"></div>
				</cq-item>
			</template>
	</cq-study-legend>
	`, e.UI.addComponentDefinition("cq-chart-legend", t);
  },
  co = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ModalTag {
      constructor() {
        super(), this.previousClose = null;
      }
      begin() {
        var r = this;
        this.addDefaultMarkup(), this.addInjection("append", "createDataSet", function () {
          r.update();
        }), this.update();
      }
      disconnectedCallback() {
        this.context && e.UI.unobserveProperty("symbolObject", this.context.stx.chart, this.listener), super.disconnectedCallback();
      }
      initialize(r) {
        this.params = r || {}, typeof this.params.autoStart > "u" && (this.params.autoStart = !0), this.marker = null, this.params.autoStart && this.begin();
      }
      setContext(r) {
        var i = this,
          a = this.context.stx;
        this.listener = function (s) {
          i.previousClose = a.mostRecentClose("iqPrevClose");
        }, e.UI.observeProperty("symbolObject", a.chart, this.listener), this.initialize();
      }
      update() {
        var r = this.context.stx,
          i = this.node,
          a = i.find("cq-symbol"),
          s = i.find("cq-symbol-description"),
          o = i.find("cq-current-price"),
          h = i.find("cq-todays-change"),
          l = i.find("cq-todays-change-pct"),
          u = i.find("cq-chart-price"),
          c = i.find("cq-change"),
          d = ["false", "0", null].indexOf(this.getAttribute("cq-browser-tab")) == -1,
          f = u.length,
          g = r.chart.symbol,
          p = r.chart.symbolDisplay,
          m = r.internationalizer,
          x = !1;
        g ? i.addClass("stx-show") : i.removeClass("stx-show");
        var y = a.text() !== g && !!a.text(g);
        if (r.isHistoricalModeSet) {
          o.text() !== "" && o.text(""), c.css({
            display: "none"
          });
          return;
        }
        var b = "",
          C = 0,
          k = "",
          M = r.getFirstLastDataRecord(r.chart.dataSet, "Close", !0),
          I = "",
          v = "";
        if (M && (I = M.Close), f) {
          I !== "" && (v = r.formatYAxisPrice(I, r.chart.panel, r.chart.decimalPlaces));
          var S = parseFloat(o.text());
          if (o.text() !== v && o.text(v)) {
            x = !0;
            var w = o.attr("cq-animate");
            typeof w < "u" && e.UI.animatePrice(o, I, S, w == "fade");
          }
        }
        if (s.text() !== (p || g) && s.text(p || g), (f || d) && g && (y || x)) {
          var T = M && M.iqPrevClose;
          !T && T !== 0 && (T = this.previousClose), I || I === 0 ? (b = e.fixPrice(I - T), C = b / T * 100, T <= 0 || I < 0 ? k = "N/A" : m ? k = m.percent2.format(C / 100) : k = C.toFixed(2) + "%", c.css({
            display: "block"
          })) : c.css({
            display: "none"
          });
          var D = Math.abs(b),
            F = r.formatYAxisPrice(D, r.chart.panel, r.chart.decimalPlaces);
          D && h.text() !== F && h.text(F), l.length && l.text() !== k && l.text(k), k !== "" && b > 0 ? u.removeClass("stx-down").addClass("stx-up") : k !== "" && b < 0 ? u.removeClass("stx-up").addClass("stx-down") : u.removeClass("stx-down").removeClass("stx-up"), I = I !== void 0 ? I : "", b = b !== void 0 ? b : "", this.title = g + " \u200B \u200B " + v + " \u200B \u200B \u200B ", b > 0 ? this.title += "\u25B2 " + F : b < 0 && (this.title += "\u25BC " + F), d && (document.title = this.title);
        }
      }
    }
    t.markup = `
		<cq-symbol></cq-symbol>
		<cq-chart-price>
			<cq-current-price cq-animate></cq-current-price>
			<cq-change>
				<div class="ico"></div>
				<cq-todays-change></cq-todays-change> (
				<cq-todays-change-pct></cq-todays-change-pct>)
			</cq-change>
		</cq-chart-price>
	`, e.UI.addComponentDefinition("cq-chart-title", t);
  },
  fo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ModalTag {
      connectedCallback() {
        this.attached || super.connectedCallback();
      }
      setContext(r) {
        this.addDefaultMarkup();
        var i = this.node;
        i[0].addEventListener("touchstart", function (s) {
          s.stopPropagation();
        }, {
          passive: !1
        }), i[0].addEventListener("mousedown", function (s) {
          s.stopPropagation();
        });
        var a = i.find("input");
        e.UI.stxtap(a[0], function () {
          this.focus();
        });
      }
    }
    t.markup = `
		<cq-menu class="ciq-search" keyboard-navigation="false">
			<cq-lookup cq-keystroke-claim cq-uppercase></cq-lookup>
		</cq-menu>
		<cq-toggle class="ciq-draw" cq-member="drawing"><span></span><cq-tooltip>Draw</cq-tooltip></cq-toggle>
		<cq-toggle class="ciq-CH" cq-member="crosshair"><span></span><cq-tooltip>Crosshair</cq-tooltip></cq-toggle>
		<cq-toggle class="ciq-DT" cq-member="tableView"><span></span><cq-tooltip>Table View</cq-tooltip></cq-toggle>
		<cq-menu class="ciq-menu ciq-period" keyboard-navigation="false">
			<span><cq-clickable stxbind="Layout.periodicity">1D</cq-clickable></span>
			<cq-menu-dropdown>
				<cq-menu-container cq-name="menuPeriodicity"></cq-menu-container>
			</cq-menu-dropdown>
		</cq-menu>
	`, e.UI.addComponentDefinition("cq-chartcontrol-group", t);
  },
  po = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      connectedCallback() {
        if (!this.attached) {
          super.connectedCallback();
          var r = this;
          e.UI.stxtap(this, function () {
            r.runMethod();
          });
        }
      }
      runMethod() {
        var r = this.node.attr("cq-selector"),
          i = this.node.attr("cq-method");
        const {
          context: a
        } = this;
        if (/-dialog/.test(r) && i === "open" && a.config) {
          const o = (a.config.channels || {}).dialog || "channel.dialog";
          this.channelWrite(o, {
            type: r.replace(/cq-|-dialog/g, ""),
            params: {
              context: a,
              caller: this
            }
          }, a.stx);
          return;
        }
        var s = this;
        document.querySelectorAll(r).forEach(function (o) {
          o[i] && o[i].call(o, {
            context: s.context,
            caller: s
          });
        });
      }
    }
    e.UI.addComponentDefinition("cq-clickable", t);
  },
  mo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.BaseComponent {
      connectedCallback() {
        if (this.attached) return;
        var r = this;
        function i(a) {
          r.tap(), a.stopPropagation();
        }
        e.UI.stxtap(this, i), super.connectedCallback();
      }
      tap() {
        e.UI.containerExecute(this, "close");
      }
    }
    e.UI.addComponentDefinition("cq-close", t);
  },
  go = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ModalTag {
      constructor() {
        super(), this.swatchColors = [], this.loading = [];
      }
      connectedCallback() {
        this.attached || (super.connectedCallback(), this.swatchColors = ["#8ec648", "#00afed", "#ee652e", "#912a8e", "#fff126", "#e9088c", "#ea1d2c", "#00a553", "#00a99c", "#0056a4", "#f4932f", "#0073ba", "#66308f", "#323390"]);
      }
      configureUI() {
        var r = this.node,
          i = r.find("cq-accept-btn");
        this.template = r.find("*[cq-comparison-item]");
        var a = r.find("cq-swatch").attr("cq-colors");
        a && (this.swatchColors = a.split(","));
        for (var s = 0; s < this.swatchColors.length; s++) this.swatchColors[s] = e.convertToNativeColor(this.swatchColors[s]);
        var o = r.find("cq-lookup");
        o.length && o[0].setCallback(function (h) {
          return function () {
            h.selectItem.apply(h, arguments);
          };
        }(this)), e.UI.stxtap(i[0], function (h) {
          o[0].forceInput(), h.stopPropagation();
        });
      }
      pickSwatchColor() {
        var r = this.context.stx,
          i = this.node.find("cq-swatch");
        if (i.length) {
          var a = i[0].style.backgroundColor,
            s = {};
          for (var o in r.chart.series) {
            var h = r.chart.series[o];
            h.parameters.isComparison && (s[e.convertToNativeColor(h.parameters.color)] = !0);
          }
          if (!(a !== "" && !s[a])) {
            for (var l = 0; l < this.swatchColors.length; l++) if (!s[this.swatchColors[l]]) {
              i[0].style.backgroundColor = this.swatchColors[l];
              return;
            }
          }
        }
      }
      position() {
        var r = this.context.stx,
          i = r.barFromPixel(r.cx);
        this.tick = r.tickFromPixel(r.cx);
        var a = r.chart.xaxis[i],
          s = this;
        function o() {
          var l;
          s.timeout = null;
          for (var u in r.chart.series) {
            l || (l = s.node.find("cq-comparison-key"));
            var c = l.find("cq-comparison-item[cq-symbol=\"" + u + "\"] cq-comparison-tick-price");
            if (c.text() !== "" && c.text(""), c.length && a && a.data) {
              var d = r.chart.series[u].parameters.symbol,
                f = r.padOutPrice(a.data[d]);
              c.text() !== f && c.text(f);
              var g = a.data[d];
              g !== null && (typeof g == "object" && (g = g.Close), f = r.padOutPrice(g), c.text() !== f && c.text(f));
            }
          }
        }
        if (this.tick != this.prevTick) {
          this.timeout && clearTimeout(this.timeout);
          var h = 0;
          this.timeout = setTimeout(o, h);
        }
        this.prevTick = this.tick;
      }
      removeSeries(r, i) {
        this.context.stx.removeSeries(r);
      }
      renderLegend() {
        function r(F, P, _) {
          return function () {
            F.nomore = !0, _.parameters.permanent || F.removeSeries(P, _), F.modalEnd();
          };
        }
        this.pickSwatchColor();
        var i = this.closest(".stx-holder"),
          a = e.cqvirtual(this.querySelector("cq-comparison-key"));
        if (a) {
          var s = function (F) {
              a.appendChild(F);
            },
            o = this.context.stx;
          o.getDefaultColor();
          var h = a.hasAttribute("cq-panel-only"),
            l = !a.hasAttribute("cq-all-series");
          for (var u in o.chart.seriesRenderers) {
            var c = o.chart.seriesRenderers[u];
            if (c != o.mainSeriesRenderer && !(l && !c.params.isComparison) && !(h && (!i || c.params.panel != i.panel.name))) for (var d = 0; d < c.seriesParams.length; d++) {
              var f = c.seriesParams[d],
                g = e.UI.makeFromTemplate(this.template),
                p = g.find("cq-comparison-swatch"),
                m = g.find("cq-swatch"),
                x = g.find("cq-comparison-label"),
                y = g.find("cq-comparison-description"),
                b = g.find("cq-comparison-loader"),
                C = g.find(".ciq-close"),
                k = o.chart.series[f.id],
                M = k.parameters,
                I = M.color || c.colors[k.id].color,
                v = I == "auto";
              v && (I = o.defaultColor), p.css({
                background: I
              }), m.length && (m[0].seriesId = f.id, m[0].setColor(I, !1, v)), M.opacity && (p.css({
                opacity: M.opacity
              }), m.css({
                opacity: M.opacity
              })), x.text(o.translateIf(k.display)), y.text(o.translateIf(k.description)), g.attr("cq-symbol", k.id);
              var S = M.symbol,
                w = o.mostRecentClose(S);
              if (w || w === 0) {
                var T = g.find("cq-comparison-price");
                T.length && T.text(o.padOutPrice(w));
              }
              this.loading[M.symbolObject.symbol] ? b.addClass("stx-show") : b.removeClass("stx-show"), M.error && g.attr("cq-error", !0), !M.color || M.permanent ? C.hide() : e.UI.stxtap(C[0], r(this, k.id, k)), Array.from(g).forEach(s);
            }
          }
          var D = e.climbUpDomTree(e.cqrender(a), "cq-study-legend");
          D.forEach(function (F) {
            F.displayLegendTitle && F.displayLegendTitle();
          });
        }
      }
      setColor(r, i) {
        i.seriesId && this.context.stx.modifySeries(i.seriesId, {
          color: r
        });
      }
      startPriceTracker(r) {
        var i = this;
        this.addInjection("append", "createDataSet", function () {
          r && i.updatePrices(), this.chart.dataSet && this.chart.dataSet.length ? i.node.attr("cq-show") !== "true" && i.node.attr("cq-show", "true") : i.hasAttribute("cq-show") && i.removeAttribute("cq-show");
        });
      }
      startTickPriceTracker() {
        this.prevTick = null, this.addInjection("prepend", "headsUpHR", function (r) {
          return function () {
            r.position();
          };
        }(this));
      }
      selectItem(r) {
        var i = this.context,
          a = this;
        function s(m, x) {
          m && (x.parameters.error = !0), a.loading[x.parameters.symbolObject.symbol] = !1, a.renderLegend();
        }
        var o = this.node.find("cq-swatch"),
          h = "auto",
          l = null,
          u = 1;
        if (o[0]) {
          var c = o[0].style;
          h = c.backgroundColor, l = c.borderTopStyle, u = c.width || 1;
        }
        var d = i.stx;
        this.loading[r.symbol] = !0;
        for (var f = {
            name: "comparison " + r.symbol,
            symbolObject: r,
            isComparison: !0,
            color: h,
            pattern: l,
            width: u || 1,
            data: {
              useDefaultQuoteFeed: !0
            },
            forceData: !0
          }, g = d.getSeries({
            symbolObject: r
          }), p = 0; p < g.length; p++) if (g[p].parameters.isComparison) {
          this.loading[r.symbol] = !1;
          return;
        }
        r.symbol && r.symbol.trim().length > 0 && (!i.stx.chart.symbol || i.stx.chart.symbol.toLowerCase() !== r.symbol.toLowerCase()) ? d.addSeries(r.symbol, f, s) : this.loading[r.symbol] = !1;
      }
      setContext(r) {
        this.node.attr("cq-show", "true"), this.configureUI();
        var i = this,
          a = this.context.stx;
        a.chart;
        function s(h) {
          i.renderLegend();
        }
        if (this.eventListeners.push(this.context.stx.addEventListener("layout", s)), this.eventListeners.push(this.context.stx.addEventListener("theme", s)), this.context.stx.append("modifySeries", function () {
          i.renderLegend();
        }), this.renderLegend(), !!this.template.length) {
          var o = e.UI.makeFromTemplate(this.template);
          this.startPriceTracker(o.find("cq-comparison-price").length), o.find("cq-comparison-tick-price") && this.startTickPriceTracker();
        }
      }
      updatePrices() {
        var r,
          i = this.context.stx,
          a = i.isHistoricalModeSet,
          s = e.ChartEngine.isDailyInterval(i.layout.interval);
        for (var o in i.chart.series) {
          r || (r = this.node.find("cq-comparison-key"));
          var h = r.find("cq-comparison-item[cq-symbol=\"" + o + "\"] cq-comparison-price");
          if (h.length) {
            i.chart.series[o].parameters.symbol;
            var l = i.chart.series[o].lastQuote;
            if (!l || !l.DT || !l.Close && l.Close !== 0 || !s && i.chart.market && i.chart.market.getSession(l.DT) === null) continue;
            var u = l.Close,
              c = i.chart.series[o].parameters.subField || "Close",
              d = parseFloat(h.text());
            u && (u[c] || u[c] === 0) && (u = u[c]), !u && u !== 0 && i.chart.series[o].lastQuote && (u = i.chart.series[o].lastQuote[c]);
            var f = i.padOutPrice(a ? "" : u);
            if (h.text() !== f && h.text(f), a) return;
            typeof h.attr("cq-animate") < "u" && e.UI.animatePrice(h, u, d);
          }
        }
      }
    }
    e.UI.addComponentDefinition("cq-comparison", t);
  },
  xo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext() {
        this.contextSet || (this.contextSet = !0, this.addDefaultMarkup());
      }
    }
    t.markup = `
		<cq-comparison cq-marker>
			<cq-menu class="cq-comparison-new" cq-focus="input">
				<cq-comparison-add-label class="ciq-no-share">
					<cq-comparison-plus></cq-comparison-plus><span>Compare</span><span>...</span>
				</cq-comparison-add-label>
				<cq-comparison-add>
					<cq-comparison-lookup-frame>
						<cq-lookup cq-keystroke-claim cq-uppercase></cq-lookup>
					</cq-comparison-lookup-frame>
					<cq-swatch cq-no-close></cq-swatch>
					<span><cq-accept-btn class="stx-btn">ADD</cq-accept-btn></span>
				</cq-comparison-add>
			</cq-menu>
		</cq-comparison>
	`, e.UI.addComponentDefinition("cq-comparison-lookup", t);
  },
  vo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      get active() {
        return this.context.stx.currentVectorParameters["active" + this._scope];
      }
      set active(r) {
        this.context.stx.currentVectorParameters["active" + this._scope] = r;
      }
      get color() {
        return this.context.stx.currentVectorParameters["color" + this._scope];
      }
      set color(r) {
        this.context.stx.currentVectorParameters["color" + this._scope] = r;
      }
      get lineWidth() {
        return this.context.stx.currentVectorParameters["lineWidth" + this._scope];
      }
      set lineWidth(r) {
        this.context.stx.currentVectorParameters["lineWidth" + this._scope] = r;
      }
      get pattern() {
        return this.context.stx.currentVectorParameters["pattern" + this._scope];
      }
      set pattern(r) {
        this.context.stx.currentVectorParameters["pattern" + this._scope] = r;
      }
      connectedCallback() {
        if (!this.attached) {
          Object.defineProperty(this, "_scope", {
            configurable: !0,
            enumerable: !1,
            value: this.getAttribute("cq-cvp-header") || "",
            writable: !1
          });
          var r = document.querySelector("template[cq-cvp-controller], template[cvp-controller=\"true\"]");
          if (this.children.length === 0 && r) {
            e.UI.makeFromTemplate(r, this);
            var i = this.querySelector(".ciq-heading");
            i && (i.innerHTML = this._scope);
          }
          super.connectedCallback();
        }
      }
      emit(r, i) {
        this.toolbar ? this.toolbar.emit() : this.dispatchEvent(new CustomEvent(r, {
          bubbles: !0,
          cancelable: !0,
          detail: i
        }));
      }
      getColor(r) {
        var i = e.UI.$(r.node || this.node.find("cq-line-color")),
          a = this.color;
        (a == "transparent" || a == "auto") && (a = ""), i.css({
          background: a
        });
        var s = e.getBackgroundColor(this.parentNode);
        if (!a || Math.abs(e.hsl(s)[2] - e.hsl(a)[2]) < 0.2) {
          var o = e.chooseForegroundColor(s);
          i.css({
            border: "solid " + o + " 1px"
          }), a || i.css({
            background: "linear-gradient(to bottom right, " + o + "," + o + " 49%, " + s + " 50%, " + s + ")"
          });
        } else i.css({
          border: ""
        });
      }
      pickColor(r) {
        var i = e.UI.$(r.node),
          a = document.querySelector("cq-color-picker"),
          s = this,
          o = i.attr("cq-overrides");
        if (!a) return console.error("CVPController.prototype.pickColor: no <cq-color-picker> available");
        o && (r.overrides = o.split(",")), a.callback = function (h) {
          s.color = h, s.getColor(r), s.emit("change", {
            color: h
          });
        }, r.context = this.context, a.display(r);
      }
      setContext() {
        this.setStyle(), this.toolbar && this.toolbar.dirty(!1);
      }
      setStyle(r, i, a) {
        i = i || "1", a = a || "dotted", this.lineWidth = parseInt(i, 10), this.pattern = a;
        var s = this.node.find("*[cq-cvp-line-style]");
        this.lineStyleClassName && s.removeClass(this.lineStyleClassName), a && a !== "none" ? (this.lineStyleClassName = "ciq-" + a + "-" + this.lineWidth, s.addClass(this.lineStyleClassName)) : this.lineStyleClassName = null, this.emit("change", {
          lineWidth: i,
          pattern: a
        });
      }
      sync(r) {
        var i = r["active" + this._scope],
          a = r["color" + this._scope],
          s = r["lineWidth" + this._scope],
          o = r["pattern" + this._scope],
          h = "ciq-active",
          l = this.node.find(".ciq-checkbox");
        i ? l.addClass(h) : l.removeClass(h), this.active = !!i, this.color = a || "", this.getColor({}), this.setStyle(null, s, o);
      }
      toggleActive(r) {
        var i = e.UI.$(r.node),
          a = "ciq-active";
        this.active ? (this.active = !1, i.removeClass(a)) : (this.active = !0, i.addClass(a)), this.emit("change", {
          active: this.active
        });
      }
    }
    e.UI.addComponentDefinition("cq-cvp-controller", t);
  },
  yo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.BaseComponent {
      constructor() {
        super(), this.activeAttributes = {};
      }
      connectedCallback() {
        if (this.attached) return;
        this.isDialog = !0, super.connectedCallback();
        var r = this;
        function i(s) {
          r.tap(s);
        }
        e.UI.stxtap(this, i);
        var a = e.UI.getUIManager();
        a.registerForResize(this), this.uiManager = a;
      }
      disconnectedCallback() {
        this.uiManager.unregisterForResize(this), super.disconnectedCallback();
      }
      addActiveAttribute(r) {
        this.activeAttributes[r] = !0;
      }
      center() {
        var r = this.parentElement;
        r.tagName == "BODY" && (r = window);
        var i = e.guaranteedSize(r),
          a = i.height,
          s = e.elementDimensions(this, {
            padding: 1,
            border: 1
          }),
          o = s.height,
          h = 50,
          l = 50;
        a > o * 2 && (l = 33);
        var u = {
          top: l + "%",
          left: h + "%",
          transform: "translate(-50%, -50%)"
        };
        Object.assign(this.style, u);
      }
      close() {
        this.uiManager.closeMenu(this), this.onClose && this.onClose();
      }
      hide() {
        if (!this.node.find(":invalid").length) {
          this.node.children().each(function () {
            typeof this.hide == "function" && this.hide();
          }), this.active = !1, this.uiManager.overlay && this.uiManager.overlay.hasAttribute("cq-active") && this.uiManager.overlay.removeAttribute("cq-active");
          for (var r in this.activeAttributes) this.hasAttribute(r) && this.removeAttribute(r);
          this.activeAttributes = {}, this.node.find("input").each(function () {
            this == document.activeElement && this.blur();
          });
        }
      }
      open(r) {
        this.uiManager.openMenu(this, r), e.I18N && e.I18N.translateUI(null, this.node[0]);
        const {
          context: i
        } = r || {};
        if (!i || !i.config) {
          this.onClose = null;
          return;
        }
        const {
          config: {
            channels: a
          },
          stx: s
        } = i;
        this.onClose = () => {
          this.channelWrite(a.dialog || "channel.dialog", {}, s), this.onClose = null;
        };
      }
      resize() {
        var r = this.node.find("cq-scroll");
        r.each(function () {
          this.resize && this.resize();
        }), this.params && this.params.x ? this.stxContextMenu() : this.center();
      }
      show(r) {
        this.params = r, r || (r = this.params = {});
        var i = this,
          a = r.context || e.UI.getMyContext(this);
        if (!this.uiManager.overlay && !r.bypassOverlay && (this.uiManager.overlay = document.createElement("cq-dialog-overlay"), a && a.node.append(this.uiManager.overlay)), i.active = !0, setTimeout(function () {
          i.uiManager.overlay && !r.bypassOverlay && i.uiManager.overlay.getAttribute("cq-active") !== "true" && i.uiManager.overlay.setAttribute("cq-active", "true"), i.activeAttributes["cq-active"] = !0;
          for (var s in i.activeAttributes) i.node.attr(s) !== "true" && i.node.attr(s, "true");
          i.resize();
        }), a && a.config && a.config.themes) {
          let s = Object.keys(a.config.themes.builtInThemes);
          this.classList.remove(...s);
          let o = s.find(h => a.topNode.classList.contains(h) === !0);
          o && this.classList.add(o);
        }
      }
      stxContextMenu() {
        var r = this.parentElement;
        r.tagName == "BODY" && (r = window);
        var i = e.guaranteedSize(r),
          a = i.width,
          s = i.height,
          o = e.elementDimensions(this, {
            padding: 1,
            border: 1
          }),
          h = o.width,
          l = o.height,
          u = this.params.x,
          c = this.params.y,
          d = !1;
        this.node.find("cq-menu.stxMenuActive").each(function () {
          if (this.querySelector(".context-menu-right")) {
            var f = e.UI.$(this).nextAll().length + 1,
              g = e.elementDimensions(this, {
                padding: 1,
                border: 1
              }),
              p = e.elementDimensions(this.querySelector(".context-menu-right"), {
                padding: 1,
                border: 1
              });
            h += o.width, l += p.height - g.height * f, d = !0;
          }
        }), u + h > a && (u = a - h), c + l > s && (c = s - l), c < 0 && (c = 0), d && (this.params.x = u, this.params.y = c), Object.assign(this.style, {
          top: c + "px",
          left: u + "px"
        });
      }
      tap(r) {
        var i = this.uiManager.topMenu();
        if (i === this) {
          r.stopPropagation();
          return;
        }
        r.currentTarget.active || r.stopPropagation();
      }
    }
    e.UI.addComponentDefinition("cq-dialog", t);
  },
  bo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.DialogContentTag {
      open(r) {
        this.addDefaultMarkup(), this.classList.add("ciq-context-menu"), this.drawing = r.drawing;
        var i = this.node.find("[cq-edit-text]");
        return this.drawing.edit ? i.show() : i.hide(), super.open(r);
      }
    }
    t.markup = `
		<div stxtap="DrawingEdit.text()" cq-edit-text>Edit Text</div>
		<div stxtap="DrawingEdit.edit()">Edit Settings</div>
		<div stxtap="DrawingEdit.clone()">Clone Drawing</div>
		<cq-menu stxtap="resize()" cq-close-top="cq-dialog[cq-drawing-context]">
			<cq-menu-dropdown cq-no-scroll="true" class="context-menu-right">
				<cq-item stxtap="DrawingEdit.reorderLayer('top')">Bring to Top</cq-item>
				<cq-item stxtap="DrawingEdit.reorderLayer('up')">Bring Forward</cq-item>
				<cq-item stxtap="DrawingEdit.reorderLayer('down')">Send Backward</cq-item>
				<cq-item stxtap="DrawingEdit.reorderLayer('bottom')">Send to Bottom</cq-item>
			</cq-menu-dropdown>
			<!-- element here so that <cq-menu-dropdown> can keep "top: auto;" -->
			<div>Layer Management<div class="context-button-right-arrow"></div></div>
		</cq-menu>
		<div stxtap="DrawingEdit.remove()">Delete Drawing</div>
	`, e.UI.addComponentDefinition("cq-drawing-context", t);
  },
  Co = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.DialogContentTag {
      add() {
        var r = this.node.find("[cq-custom-fibonacci-setting] input").val();
        if (r && (r = parseFloat(r) / 100, !isNaN(r))) {
          for (var i = this.context.stx.currentVectorParameters.fibonacci.fibs || [], a, s, o = 0; o < i.length; o++) if (a = i[o], a.level > r) {
            s = e.clone(a), s.level = r, s.display = !0, i.splice(o, 0, s);
            break;
          }
          s || (i.length ? a = e.clone(i[0]) : a = {
            color: "auto",
            parameters: {
              pattern: "solid",
              opacity: 0.25,
              lineWidth: 1
            }
          }, s = e.clone(a), s.level = r, s.display = !0, i.push(s)), this.open();
        }
      }
      close() {
        if (this.opener) {
          var r = new Event("change", {
            bubbles: !0,
            cancelable: !0
          });
          this.opener.dispatchEvent(r), this.context.stx.currentVectorParameters.fibonacci.fibsAlreadySet = !0;
        }
        super.close();
      }
      open(r) {
        this.addDefaultMarkup(), super.open(r), r && (this.opener = r.caller);
        var i = this.context.stx.currentVectorParameters,
          a = i.vectorType,
          s = this.node,
          o;
        if (i.fibonacci && a != "fibtimezone") {
          s.find(".title").text("Fibonacci Settings");
          var h = i.fibonacci.fibs || [];
          o = s.find("cq-fibonacci-settings"), o.children(":not(template)").remove();
          for (var l = 0; l < h.length; l++) {
            var u = h[l];
            if (!(a === "fibarc" && u.level < 0)) {
              var c = e.UI.makeFromTemplate(this.node.find("template"), o),
                d = u.level * 100;
              c.find(".ciq-heading").text(d.toFixed(1) + "%");
              var f = c.find("input");
              u.display && f.prop("checked", !0), this.setChangeEvent(f, "fib", u.level), c.find(".stx-data").append(f);
            }
          }
        } else s.find(".title").text("Settings"), o = s.find("cq-fibonacci-settings"), o.children(":not(template)").remove();
        this.node.find("[cq-custom-fibonacci-setting] input").val("");
      }
      setChangeEvent(r, i, a) {
        var s = this;
        function o() {
          return function () {
            var h = s.context.stx.currentVectorParameters,
              l = h.vectorType;
            if (h.fibonacci && l != "fibtimezone") {
              var u = h.fibonacci.fibs || [];
              if (this.type == "checkbox") for (var c = 0; c < u.length; c++) {
                var d = u[c];
                d.level === a && (d.display = !!this.checked);
              }
            }
          };
        }
        r[0].addEventListener("change", o());
      }
    }
    t.markup = `
		<h4 class="title">Settings</h4>
		<cq-scroll cq-no-maximize>
			<cq-fibonacci-settings>
				<template cq-fibonacci-setting>
					<cq-fibonacci-setting>
						<div class="ciq-heading"></div>
						<div class="stx-data">
							<input type="checkbox">
						</div>
					</cq-fibonacci-setting>
				</template>
			</cq-fibonacci-settings>
			<div cq-custom-fibonacci-setting>
				<input class="ciq-heading" type="text">%
				<div class="ciq-btn stx-data" stxtap="add()">Add</div>
			</div>
		</cq-scroll>
		<div class="ciq-dialog-cntrls">
			<div class="ciq-btn" stxtap="close()">Done</div>
		</div>
	`, e.UI.addComponentDefinition("cq-fib-settings-dialog", t);
  },
  So = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext(i) {
        const {
          stx: a
        } = i;
        a.callbackListeners.floatingWindow || (a.callbackListeners.floatingWindow = []), a.addEventListener("floatingWindow", s => {
          const o = this["on" + e.capitalize(s.type)];
          if (o) return o.call(this, s), !0;
        });
      }
      onShortcut({
        container: i,
        title: a,
        tag: s,
        content: o,
        width: h,
        status: l,
        onClose: u
      }) {
        if (this.shortcutWindow) {
          this.shortcutWindow.toggle(l).ensureVisible();
          return;
        }
        this.shortcutWindow = this.constructor.windowImplementation.get({
          tag: s,
          content: o,
          title: a,
          container: i || document.body,
          onClose: u
        }), this.shortcutWindow.toggle(!0).update({
          width: h
        }).positionRelativeTo();
      }
    }
    class n {
      constructor({
        content: i,
        title: a,
        tag: s,
        minWidth: o,
        minHeight: h,
        container: l,
        onClose: u
      }) {
        const c = document.createElement("div");
        c.innerHTML = this.constructor.markup, c.classList.add("ciq-window"), document.body.append(c), c.tag = s, c.docWindow = this, Object.assign(this, {
          isDragging: !1,
          isResizing: !1,
          isOpen: !1,
          xDiff: 0,
          yDiff: 0,
          x: 50,
          y: 50,
          w: c
        }), this.bindEvents(), this.titleEl = c.querySelector(".ciq-window-title"), this.bodyEl = c.querySelector(".ciq-window-body"), this.titleBarEl = c.querySelector(".ciq-window-bar"), this.setProps({
          title: a,
          content: i,
          minWidth: o,
          minHeight: h,
          container: l,
          onClose: u
        }), this.render();
      }
      setProps({
        title: i,
        content: a,
        minWidth: s,
        minHeight: o,
        container: h,
        onClose: l
      }) {
        const {
          w: u,
          titleEl: c,
          bodyEl: d
        } = this;
        i !== void 0 && (c.textContent = i), a !== void 0 && (d.innerHTML = a), s !== void 0 && (u.style.minWidth = s + "px"), o !== void 0 && (u.style.minHeight = o + "px"), h && (this.container = h), l !== void 0 && (this.onClose = l);
      }
      bindEvents() {
        const {
            w: i
          } = this,
          a = u => i.querySelector(u);
        a(".ciq-window-bar").addEventListener("mousedown", this.onStartDrag.bind(this));
        const s = this.toggleCollapse.bind(this);
        a(".ciq-window-bar").addEventListener("dblclick", s), a(".ciq-window-collapse").addEventListener("click", s), "top, right, bottom, left, top-right, bottom-right, bottom-left, top-left".split(/, /).forEach(u => {
          a(`.ciq-window-resize-${u}`).addEventListener("mousedown", l());
        }), document.addEventListener("mousemove", this.onMouseMove.bind(this)), document.addEventListener("mouseup", this.onMouseUp.bind(this)), a(".ciq-window-close").addEventListener("click", this.toggle.bind(this, !1)), window.addEventListener("resize", this.ensureVisible.bind(this));
        const h = this;
        function l() {
          return function (u) {
            if (u.button !== 0) return;
            const c = u.target.className.replace(/ciq-window-resize-/, "");
            h.isResizing = c, h.downX = u.pageX, h.downY = u.pageY, h.startWidth = h.width, h.startHeight = h.height, h.startLeft = h.x, h.startTop = h.y;
          };
        }
      }
      update({
        x: i,
        y: a,
        width: s,
        height: o
      }) {
        return Object.assign(this, {
          x: i,
          y: a,
          width: s,
          height: o
        }), this.render(), this;
      }
      positionRelativeTo({
        container: i,
        location: a = "center"
      } = {}) {
        const {
          x: s,
          y: o,
          width: h,
          height: l
        } = (i || this.container || document.body).getBoundingClientRect();
        return this.width > h - 20 && (this.width = h - 20), this.height > l - 20 && (this.height = l - 20), a === "center" && (this.x = s + h / 2 - this.width / 2, this.y = o + l / 2 - this.height / 2), this.render(), this;
      }
      ensureVisible() {
        if (!this.isOpen) return;
        const {
            x: i,
            y: a,
            width: s
          } = this.w.getBoundingClientRect(),
          {
            innerWidth: o,
            innerHeight: h
          } = window;
        a > h - 20 && (this.y = h - 20), i > o - s && (this.x = o - s), this.render();
      }
      render() {
        const {
          x: i,
          y: a
        } = this;
        Object.assign(this.w.style, {
          display: this.isOpen ? "" : "none",
          transform: "translate(" + i + "px, " + a + "px)"
        }), this.w.classList.toggle("ciq-wdragging", this.isDragging || this.isResizing);
      }
      get width() {
        return this.w.offsetWidth;
      }
      set width(i) {
        i && (this.w.style.width = i + "px");
      }
      get height() {
        return this.w.offsetHeight;
      }
      set height(i) {
        i && (this.w.style.height = i + "px");
      }
      clampX(i) {
        return Math.min(Math.max(i, 0), window.innerWidth - this.w.offsetWidth);
      }
      clampY(i) {
        return Math.min(Math.max(i, 0), window.innerHeight - this.titleBarEl.offsetHeight - 8);
      }
      onMouseMove(i) {
        const {
          isDragging: a,
          isResizing: s
        } = this;
        if (!a && !s) return;
        const o = i.pageX - this.downX,
          h = i.pageY - this.downY;
        a && (this.x = this.clampX(o), this.y = this.clampY(h));
        const {
            startWidth: l,
            startHeight: u
          } = this,
          c = 2;
        let d, f;
        /left/.test(s) && (f = this.startWidth - o, this.width = f, this.x = this.startLeft + o), /top/.test(s) && (d = this.startHeight - h, this.height = d, this.y = this.startTop + h), s && /right|bottom/.test(s) && (this.width = /right/.test(s) ? o + l : f || l, this.height = /bottom/.test(s) ? h + u : d || u, this.x + this.width - c > window.innerWidth && (this.width = window.innerWidth - this.x - c), this.y + this.height - c > window.innerHeight && (this.height = window.innerHeight - this.y - c)), this.render();
      }
      onStartDrag(i) {
        i.button === 0 && (this.isDragging = !0, this.downX = i.pageX - this.x, this.downY = i.pageY - this.y);
      }
      onMouseUp() {
        this.isDragging = !1, this.isResizing = !1, this.render();
      }
      toggle(i) {
        const a = i === void 0 ? !this.isOpen : i,
          s = this.isOpen === a;
        return this.isOpen = a, s && !this.isOpen && this.onClose && this.onClose(), this.render(), this;
      }
      toggleCollapse() {
        this.isCollapsed = !this.isCollapsed, this.isCollapsed ? (this.prevHeight = this.height, this.w.classList.add("ciq-window-collapsed"), this.height = this.titleBarEl.offsetHeight, this.onCollapse && this.onCollapse()) : (this.height = this.prevHeight, this.w.classList.remove("ciq-window-collapsed"));
        const i = this.w.querySelector(".ciq-window-collapse");
        i.title = this.isCollapsed ? "Expand" : "Collapse", this.render();
      }
    }
    n.markup = `
<div class="ciq-window-bar" title="Drag to reposition. Double click to collapse">
<div class="ciq-window-title"></div>
<span class="ciq-window-collapse" title="Collapse"></span>
<span class="ciq-window-close" title="Click to close">
</span>
</div>
<div class="ciq-window-body"></div>
<div class="ciq-window-resize-left"></div>
<div class="ciq-window-resize-top"></div>
<div class="ciq-window-resize-right"></div>
<div class="ciq-window-resize-bottom"></div>
<div class="ciq-window-resize-bottom-right"></div>
<div class="ciq-window-resize-bottom-left"></div>
<div class="ciq-window-resize-top-left"></div>
<div class="ciq-window-resize-top-right"></div>
`, n.get = function (r) {
      let i;
      return r.tag && (i = Array.from(document.querySelectorAll(".ciq-window")).find(a => a.tag === r.tag), i) ? (i.docWindow.setProps(r), i.docWindow) : new this(r);
    }, t.windowImplementation = n, e.UI.addComponentDefinition("cq-floating-window", t);
  },
  wo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.BaseComponent {
      connectedCallback() {
        this.attached || (this.innerHTML = this.render(), this.generateTable(2, 2), this.highlightTable(1, 1));
      }
      get maxcols() {
        return this.getAttribute("maxcols") || 4;
      }
      set maxcols(r) {
        this.setAttribute("maxcols", r);
      }
      get maxrows() {
        return this.getAttribute("maxrows") || 4;
      }
      set maxrows(r) {
        this.setAttribute("maxrows", r);
      }
      generateTable(r, i) {
        var a = this;
        function s(h) {
          let l = parseInt(h.target.dataset.column) + 1;
          l > a.maxcols && (l = a.maxcols);
          let u = parseInt(h.target.dataset.row) + 1;
          u > a.maxrows && (u = a.maxrows), a.generateTable(l, u), a.highlightTable(parseInt(h.target.dataset.column), parseInt(h.target.dataset.row));
        }
        let o = this.querySelector("table");
        if (o) {
          this.cleanTable(r, i), r = r || 1, i = i || 1;
          for (let h = 1; h <= i; h++) {
            let l;
            o.childNodes[h - 1] ? l = o.childNodes[h - 1] : (l = document.createElement("tr"), o.appendChild(l));
            for (let u = 1; u <= r; u++) if (!l.childNodes[u - 1]) {
              let c = document.createElement("td");
              c.dataset.row = h, c.dataset.column = u, c.dataset.rows = i, c.dataset.columns = r, c.addEventListener("mouseenter", s), c.addEventListener("click", function (d) {
                this.triggerUpdateGridEvent(d.target.dataset.column, d.target.dataset.row);
              }.bind(this)), c.appendChild(document.createElement("div")), l.appendChild(c);
            }
          }
        }
      }
      triggerUpdateGridEvent(r, i) {
        document.querySelector("body").dispatchEvent(new CustomEvent("update-grid", {
          detail: {
            columns: r,
            rows: i
          },
          bubbles: !0,
          composed: !0
        }));
      }
      highlightTable(r, i) {
        for (let a of this.querySelectorAll("td")) a.dataset.column <= r && a.dataset.row <= i ? a.classList.add("highlight") : a.classList.remove("highlight");
        this.querySelector(".row.count").innerHTML = i, this.querySelector(".column.count").innerHTML = r;
      }
      cleanTable(r, i) {
        let a = this.querySelector("table");
        for (; a.childNodes.length > i;) a.removeChild(a.lastChild);
        for (let s of a.childNodes) for (; s.childNodes.length > r;) s.removeChild(s.lastChild);
      }
      render() {
        return `
				<style>
					cq-grid-size-picker, cq-grid-size-picker tr, cq-grid-size-picker td{
						display: block;
					}

					cq-grid-size-picker tr{
						margin: 0;
						padding: 0;
						white-space: nowrap;
						line-height: 0;
					}

					cq-grid-size-picker td{
						display: inline-block;
						height: 19px;
						width: 19px;
						margin: 0;
						padding: 0;
						text-align: center;
					}

					cq-grid-size-picker td div{
						pointer-events: none;
						display: inline-block;
						height: 15px;
						width: 15px;
						margin: 2px;
						padding: 0;
						border: solid 1px #ccc;
						border-color: var(--grid-size-border-color, #ccc);
						background: #eee; /* keep a hard coded style in case the var function is unavailable */
						background-color: var(--grid-size-background-color, #eee);
						text-align: center;
					}

					cq-grid-size-picker td:hover div, cq-grid-size-picker td.highlight div{
						border-color: #666;
						border-color: var(--grid-size-border-hl-color, #666);
						background: #ccc;
						background-color: var(--grid-size-background-hl-color, #ccc);
					}

					cq-grid-size-picker p{
						width:100%;
						line-height: 1em;
						text-align: center;
						margin: 5px 0;
					}

					cq-grid-size-picker .multiply{
						transform: rotate(45deg);
						display: inline-block;
					}
				</style>

				<table class="grid-size-picker"></table>
				<p><span class="row count">1</span> <span class="multiply">+</span> <span class="column count">1</span></p>
			`;
      }
    }
    e.UI.addComponentDefinition("cq-grid-size-picker", t);
  },
  ko = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext() {
        if (!this.hasAttribute("cq-filter")) return;
        const r = this.getAttribute("cq-filter") || "Search";
        this.createFilter(r);
      }
      createFilter(r) {
        const i = document.createElement("div");
        i.classList.add("searchFilter"), this.appendChild(i);
        const a = document.createElement("input");
        a.type = "search", a.placeholder = r, i.appendChild(a), this.searchWrapper = i;
        const s = this.nextElementSibling,
          o = ({
            target: {
              value: u
            }
          }) => {
            const c = new RegExp(u, "i");
            this.qsa("cq-item", s).forEach(d => {
              const f = u && !c.test(d.textContent) ? "add" : "remove";
              d.classList[f]("item-hidden");
            });
          };
        a.addEventListener("input", o), a.addEventListener("keyup", o);
        const h = this.getAttribute("cq-filter-min") || 15,
          l = () => {
            const u = this.qsa("cq-item", s).length;
            i.classList[u > h ? "add" : "remove"]("active");
          };
        if (typeof MutationObserver === void 0) {
          i.classList.add("active");
          return;
        }
        new MutationObserver(l).observe(this.parentElement, {
          childList: !0,
          subtree: !0
        }), l();
      }
    }
    e.UI.addComponentDefinition("cq-heading", t);
  },
  To = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext(r) {
        this.addDefaultMarkup();
        const i = new e.UI.HeadsUp(this, r, {
          followMouse: !0,
          autoStart: !1
        });
        let a = r.config && r.config.channels ? r.config.channels.headsUp : "layout.headsUp";
        this.channelSubscribe(a, s => {
          i[s === "dynamic" || (s || {}).dynamic ? "begin" : "end"]();
        });
      }
    }
    t.markup = `
		<svg version="1.1" x="0px" y="0px" viewBox="0 0 215 140" enableBackground="new 0 0 215 140">
			<defs>
				<filter id="ciq-hu-shadow" height="130%">
					<feGaussianBlur in="SourceAlpha" stdDeviation="1"></feGaussianBlur>
					<feOffset dx="0" dy="1" result="offsetblur"></feOffset>
					<feComponentTransfer>
						<feFuncA type="linear" slope="0.2"></feFuncA>
					</feComponentTransfer>
					<feMerge>
						<feMergeNode></feMergeNode>
						<feMergeNode in="SourceGraphic"></feMergeNode>
					</feMerge>
				</filter>
			</defs>
			<polygon
				class="ciq-hu-bg" style="stroke-width: 1;"
				points="198.4,124.4 1,124.4 1,1 214,1 214,137.8"
				filter="url(#ciq-hu-shadow)"
				/>
			<path class="ciq-hu-stroke"
				fill="#398DFF"
				d="M213,2v133.6l-13.7-11.8l-0.6-0.5H198H2V2H213 M215,0H0v125.4h198l17,14.6V0L215,0z">
			</path>
		</svg>
		<div>
			<cq-hu-col1>
				<cq-hu-date></cq-hu-date>
				<cq-hu-price></cq-hu-price>
				<cq-volume-grouping>
					<div>Volume</div>
					<div><cq-volume-visual></cq-volume-visual></div>
					<div><cq-hu-volume></cq-hu-volume><cq-volume-rollup></cq-volume-rollup></div>
				</cq-volume-grouping>
			</cq-hu-col1>
			<cq-hu-col2>
				<div>Open</div><cq-hu-open></cq-hu-open>
				<div>Close</div><cq-hu-close></cq-hu-close>
				<div>High</div><cq-hu-high></cq-hu-high>
				<div>Low</div><cq-hu-low></cq-hu-low>
			</cq-hu-col2>
		</div>
	`, e.UI.addComponentDefinition("cq-hu-dynamic", t);
  },
  Do = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext(r) {
        this.addDefaultMarkup();
        const i = new e.UI.HeadsUp(this, r, {
          autoStart: !0
        });
        let a = r.config && r.config.channels ? r.config.channels.headsUp : "layout.headsUp";
        this.channelSubscribe(a, s => {
          i[s === "static" || (s || {}).static ? "begin" : "end"]();
        });
      }
    }
    t.markup = `
		<div>
			<div>Price</div><cq-hu-price></cq-hu-price>
			<div>Open</div><cq-hu-open></cq-hu-open>
			<div>Close</div><cq-hu-close></cq-hu-close>
		</div>
		<div>
			<div>Vol</div>
			<cq-volume-section>
				<cq-hu-volume></cq-hu-volume>
				<cq-volume-rollup></cq-volume-rollup>
			</cq-volume-section>
			<div>High</div><cq-hu-high></cq-hu-high>
			<div>Low</div><cq-hu-low></cq-hu-low>
		</div>
	`, e.UI.addComponentDefinition("cq-hu-static", t);
  },
  Ao = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext(r) {
        let i = this.constructor.markup;
        const a = this.getAttribute("cq-toggles");
        a && (i = i.replace(/dynamic,static,null/, a)), this.addDefaultMarkup(this, i), this.tooltip = this.querySelector("cq-tooltip");
        let s = r.config ? r.config.channels : {
          headsUp: "layout.headsUp",
          crosshair: "layout.crosshair"
        };
        this.channelSubscribe(s.headsUp, () => this.applyValues(s)), this.channelSubscribe(s.crosshair, o => {
          (e.isMobile || o) && this.channelRead(s.headsUp) === "dynamic" && setTimeout(() => this.channelWrite(s.headsUp, "static"));
        }), this.initInfoComponents(r);
      }
      setTooltip(r) {
        const {
          context: {
            stx: i
          },
          tooltip: a
        } = this;
        a.innerText = i.translateIf(`Info ${r || "off"}`);
      }
      initInfoComponents(r) {
        const i = this.querySelector("cq-toggle").getAttribute("cq-toggles");
        ["dynamic", "static"].forEach(function (a) {
          if (new RegExp(a).test(i) && !r.topNode.querySelector(`cq-hu-${a}`)) {
            const s = document.createElement(`cq-hu-${a}`);
            r.topNode.append(s);
          }
        });
      }
      applyValues(r) {
        const i = this.channelRead(r.crosshair),
          a = this.channelRead(r.headsUp);
        a === "dynamic" && (i || e.isMobile) && setTimeout(() => this.channelWrite(r.headsUp, "static")), e.isMobile && a === "static" && setTimeout(() => this.channelWrite(r.crosshair, !0)), this.setTooltip(a);
      }
    }
    t.markup = `
		<cq-toggle
			class="ciq-HU"
			cq-member="headsUp"
			cq-toggles="dynamic,static,null">
			<span></span>
			<cq-tooltip>Info</cq-tooltip>
		</cq-toggle>
	`, e.UI.addComponentDefinition("cq-info-toggle", t);
  },
  Mo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      set(r) {
        const {
            toggleEl: i,
            options: a,
            selected: s,
            stx: o
          } = this,
          {
            obj: h
          } = i.params,
          l = {};
        if (a.forEach(u => {
          const [c, d] = u.getAttribute("cq-member").split("-"),
            f = u === s && r === !0;
          d ? l[c] = Object.assign(l[c] || {}, {
            [d]: f
          }) : l[c] = f;
        }), Object.entries(l).forEach(([u, c]) => {
          typeof c == "object" ? h[u] = Object.assign({}, h[u], c) : h[u] = c;
        }), i.params.action === "class" && i.classList[r ? "add" : "remove"](i.params.value), i.currentValue = r, i.updateClass(), this.applyValues(this.channels), r) {
          const {
              dataSegment: u
            } = o.chart,
            c = o.pixelFromBar(u.length - 1),
            d = o.pixelFromPrice(u.slice(-1)[0].Close);
          isNaN(c) || isNaN(d) || o.mousemoveinner(c, d);
        }
      }
      setSelected(r) {
        const {
          options: i
        } = this;
        this.selected = r, i.forEach(a => {
          a.classList[a === r ? "add" : "remove"]("ciq-active");
        });
      }
      setContext(r) {
        this.tooltip = this.querySelector("cq-tooltip"), this.toggleEl = this.querySelector("cq-toggle"), this.optionsMenu = this.querySelector("cq-menu-dropdown"), this.options = [...this.optionsMenu.querySelectorAll("cq-item")];
        let {
          config: {
            channels: i = {}
          } = {}
        } = r;
        i.headsUp || (i.headsUp = "layout.headsUp"), i.crosshair || (i.crosshair = "layout.crosshair"), this.channels = i, this.channelSubscribe(i.headsUp, () => this.applyValues(i));
        const a = this.channelRead(i.headsUp) || {},
          s = this.channelRead(i.crosshair);
        let o = !1;
        const h = l => {
          this.setSelected(l.target), this.set(!0), this.stx.changeOccurred("layout");
        };
        this.options.forEach(l => {
          const [, u] = l.getAttribute("cq-member").split("-");
          !u && s && (o = !0), a[u] && this.setSelected(l), l.selectFC = function () {
            h({
              target: this[0]
            });
          };
        }), this.toggleEl.isInfoToggle = !0, this.toggleEl.currentValue = this.selected || o, this.selected || this.setSelected(this.options[0]), e.UI.stxtap(this.optionsMenu, h), e.isMobile && (this.querySelector("cq-menu").style.display = "none"), this.initInfoComponents(r), this.applyValues(i);
      }
      setTooltip(r) {
        const {
          context: {
            stx: i
          },
          tooltip: a
        } = this;
        if (!this.options.some(s => s.getAttribute("cq-member") === "crosshair")) {
          const s = this.toggleEl.currentValue ? "off" : "on";
          a.innerText = i.translateIf(`Info ${s}`);
        }
      }
      initInfoComponents(r) {
        this.options.forEach(i => {
          const [, a] = i.getAttribute("cq-member").split("-");
          if (a && !r.topNode.querySelector(`cq-hu-${a}`)) {
            const s = document.createElement(`cq-hu-${a}`);
            r.topNode.append(s);
          }
        });
      }
      applyValues(r) {
        const i = this.channelRead(r.crosshair),
          a = this.channelRead(r.headsUp) || {},
          {
            dynamic: s
          } = a,
          o = a.static,
          h = this.context.topNode.querySelector("cq-hu-static");
        h && (h.style.display = e.isMobile && a.floating ? "none" : ""), setTimeout(() => {
          s && e.isMobile && this.channelWrite(r.headsUp, Object.assign({}, a, {
            dynamic: !1,
            floating: !0
          })), i && !o && e.isMobile && !a.floating && this.channelWrite(r.headsUp, Object.assign({}, a, {
            static: !0
          })), !i && (o || a.termstructure) && this.channelWrite(r.crosshair, !0);
        }), this.setTooltip(a);
      }
      getCurrentValue(r) {
        const {
            options: i
          } = this,
          {
            obj: a
          } = r;
        for (let s = 0; s < i.length; s++) {
          const [o, h] = i[s].getAttribute("cq-member").split("-");
          if (!h && a[o] || a[o] && a[o][h]) return !0;
        }
        return !1;
      }
    }
    e.UI.addComponentDefinition("cq-info-toggle-dropdown", t);
  },
  _o = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    let t = !1;
    class n extends HTMLElement {
      connectedCallback() {
        if (this.hasAttribute("attached")) return;
        this.setAttribute("attached", "");
        var i = this;
        const a = this.getAttribute("env-container") || "body",
          s = this.getAttribute("tmpl-src");
        var o = this.querySelector("cq-context");
        o || (o = this.appendChild(document.createElement("cq-context")));
        const h = this.hasAttribute("no-save");
        this.style.visibility = "hidden", e.loadUI(s, o, function (l) {
          if (l) return;
          var u = i.querySelector("cq-chart-title");
          u && u.removeAttribute("cq-browser-tab");
          for (var c = i.querySelectorAll("cq-ui-manager, cq-dialog, cq-color-picker"), d = 0; d < c.length; d++) {
            var f = c[d];
            f.parentNode.removeChild(f), t || document.querySelector(a).appendChild(f);
          }
          t = !0;
          const g = {
            extendedHours: !0,
            rangeSlider: !0,
            inactivityTimer: !0,
            fullScreen: !1,
            initialSymbol: i.getAttribute("symbol") || void 0,
            restore: !h
          };
          i.signalEvent = new CustomEvent("signal-chart-ready", {
            detail: {
              node: i,
              params: g
            }
          }), i.setAttribute("cq-event-flag", ""), i.style.visibility = "", document.body.dispatchEvent(i.signalEvent);
        });
      }
      disconnectedCallback() {
        this.stx.destroy();
      }
    }
    customElements.define("cq-instant-chart", n);
  },
  qo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.I18N) console.error("languageDialog component requires first activating i18n feature.");else {
      class t extends e.UI.DialogContentTag {
        close() {
          const r = document.querySelector("cq-language-dialog");
          r && r.closest("cq-dialog,cq-menu").close();
        }
        open(r) {
          this.addDefaultMarkup(), super.open(r);
          const i = this.node.find("cq-languages");
          i.children(":not(template)").remove();
          const a = this.node.find("template"),
            {
              languages: s
            } = e.I18N;
          if (!s) return;
          function o(h) {
            return function () {
              e.UI.contextsForEach(function () {
                const {
                  stx: l
                } = this;
                l.preferences.language = h, l.changeOccurred("preferences"), e.I18N.localize(l, h), l.draw();
              });
            };
          }
          for (let h in s) {
            const l = e.UI.makeFromTemplate(a, i);
            l.find("cq-language-name").text(s[h]), l.find("cq-flag").attr("cq-lang", h), e.UI.stxtap(l[0], o(h));
          }
        }
      }
      t.markup = `
		<h4 class="title">Choose language</h4>
		<cq-close></cq-close>
		<cq-languages>
			<template><div><cq-flag></cq-flag><cq-language-name></cq-language-name></div></template>
		</cq-languages>
	`, e.UI.addComponentDefinition("cq-language-dialog", t);
    }
  },
  Io = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext(r) {
        this.context.setLoader(this);
      }
      show() {
        this.classList.add("stx-show");
      }
      hide() {
        this.classList.remove("stx-show");
      }
    }
    e.UI.addComponentDefinition("cq-loader", t);
  },
  Fo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.ChartEngine.Driver) console.error("lookup component requires first activating quoteFeed feature.");else if (!e.ChartEngine.Driver.Lookup) console.error("lookup component requires first activating symbolLookupBase feature.");else {
      class t extends e.UI.ContextTag {
        constructor() {
          super(), this.usingEmptyDriver = !1, this.currentFilter = null, this.params = {};
        }
        acceptText(r, i) {
          var a = this;
          this.params.driver || (this.context.lookupDriver ? this.setDriver(this.context.lookupDriver) : (this.setDriver(new e.ChartEngine.Driver.Lookup()), this.usingEmptyDriver = !0));
          var s = this.params.driver.exchanges;
          function o(l) {
            a.params.driver.exchanges = s, a.results(l);
          }
          var h = this.getAttribute("cq-exchanges");
          h && (this.params.driver.exchanges = h.split(",")), this.params.driver.acceptText(r, i, null, o);
        }
        attachDriver(r) {
          this.driver = r;
        }
        close() {
          this.closest("cq-dialog,cq-menu").close();
        }
        forceInput() {
          var r = this.input[0];
          this.selectItem({
            symbol: r.value
          }), e.blur(r), this.close(), r.value = "";
        }
        initialize() {
          this.addDefaultMarkup();
          var r = this.node;
          if (this.resultList = r.find("cq-scroll"), this.input = r.find("input"), !this.input.length) {
            var i = document.createElement("input");
            i.setAttribute("type", "hidden"), i.value = "", this.input = r.append(i);
          }
          e.UI.stxtap(this.input[0], function () {
            this.focus();
          });
          var a = this;
          Array.from(this.input).forEach(function (h) {
            h.addEventListener("paste", function (l) {
              var u = l.target;
              setTimeout(function () {
                a.acceptText(u.value, a.currentFilter);
              }, 0);
            });
          });
          var s = this.querySelector("cq-lookup-filters");
          if (s) {
            var o = s.querySelectorAll("cq-filter");
            o.forEach(function (h) {
              e.UI.stxtap(h, function () {
                o.forEach(function (u) {
                  u.classList.remove("true");
                }), this.classList.add("true");
                var l = this.querySelector("translate");
                l ? a.currentFilter = l.getAttribute("original") : a.currentFilter = this.innerHTML, a.acceptText(a.input.val(), a.currentFilter);
              });
            });
          }
          typeof r.attr("cq-keystroke-claim") < "u" && this.addClaim(this);
        }
        isActive() {
          return this.input[0].value !== "";
        }
        keyStroke(r, i, a, s) {
          if (s.ctrl || s.cmd || i == "Meta" || i == "Win") return !1;
          var o = this.input[0],
            h = !1,
            l = document.activeElement === o;
          if (!l && (a.altKey || document.activeElement && (document.activeElement.tagName == "INPUT" || document.activeElement.tagName == "TEXTAREA"))) return !1;
          var u = !1,
            c = !1;
          if (e.climbUpDomTree(this, ".stxMenuActive").length && (c = !0), (l || c) && (u = !0), !(!u && (typeof this.node.attr("cq-keystroke-default") > "u" || !c && this.uiManager.topMenu()))) {
            if ((i === " " || i === "Spacebar") && o.value === "") return !1;
            var d = this;
            switch (i) {
              case "Delete":
              case "Backspace":
              case "Del":
                o.value.length && (window.getSelection().toString() ? o.value = "" : (l || (o.value = o.value.substring(0, o.value.length - 1)), o.value.length && d.acceptText(o.value, d.currentFilter)), h = !0), i == "Backspace" && (h = !0);
                break;
              case "Escape":
              case "Esc":
                o.value = "", this.close(), e.blur(o), h = !0;
                break;
              case "Enter":
                if (o.value === "" || !this.isActive()) break;
                var f = this.resultList;
                if (l = f.length && f[0].focused(), l && l.selectFC) l.selectFC.apply(l, {});else {
                  var g = o.value,
                    p = ["false", "0", null].indexOf(this.getAttribute("cq-uppercase")) == -1;
                  p && (g = g.toUpperCase()), this.selectItem({
                    symbol: g
                  });
                }
                e.blur(o), this.close(), o.value = "", h = !0;
                break;
              default:
                i.length === 1 && (l || (o.value = o.value + i), d.acceptText(o.value, d.currentFilter), h = !0);
                break;
            }
            if (h) return this.usingEmptyDriver || !o.value.length && (i == "Escape" || i == "Esc" || i == "Enter" || !l) ? this.close() : this.open(), l ? {
              allowDefault: !0
            } : !0;
          }
        }
        open() {
          this.closest("cq-dialog,cq-menu").open();
        }
        results(r) {
          function i(c, d) {
            return function (f) {
              e.blur(c.input[0]), c.selectItem(d), c.input[0].value = "";
            };
          }
          this.resultList = e.UI.$(this.resultList), this.resultList.empty();
          for (var a = 0; a < r.length; a++) {
            for (var s = r[a], o = "", h = 0; h < s.display.length; h++) o += "<SPAN>" + s.display[h] + "</SPAN>";
            var l = document.createElement("cq-item");
            l.innerHTML = o, this.resultList.append(l), l.selectFC = i(this, s.data), e.UI.stxtap(l, l.selectFC);
          }
          var u = this.resultList;
          u[0] && u[0].top();
        }
        selectItem(r, i) {
          this.params.cb && this.params.cb(r, i);
        }
        setCallback(r) {
          this.params.cb = r;
        }
        setContext(r) {
          this.initialize();
          const i = this.querySelector("cq-lookup-input input"),
            {
              config: a,
              stx: s
            } = r;
          if (!a) return;
          const {
            channels: o = {}
          } = a;
          this.channelSubscribe(o.breakpoint || "channel.breakpoint", h => {
            var l = s.termStructure ? "Entity" : "Symbol";
            h === "break-lg" && (l = "Enter " + l), i.setAttribute("placeholder", h === "break-sm" ? "" : l);
          }), !this.params.cb && r.changeSymbol && (this.params.cb = r.changeSymbol);
        }
        setDriver(r) {
          this.params.driver = r;
        }
      }
      t.markup = `
		<cq-lookup-input cq-no-close>
			<input type="text" spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="none" name="symbol" placeholder="">
			<cq-lookup-icon></cq-lookup-icon>
		</cq-lookup-input>
		<cq-lookup-results>
			<cq-lookup-filters cq-no-close>
				<cq-filter class="true">ALL</cq-filter>
				<cq-filter>STOCKS</cq-filter>
				<cq-filter>FX</cq-filter>
				<cq-filter>INDEXES</cq-filter>
				<cq-filter>FUNDS</cq-filter>
				<cq-filter>FUTURES</cq-filter>
			</cq-lookup-filters>
			<cq-scroll></cq-scroll>
		</cq-lookup-results>
	`, e.UI.addComponentDefinition("cq-lookup", t);
    }
  },
  Eo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends HTMLElement {
      constructor() {
        super(), this.activeClassName = "stxMenuActive", this.active = !1;
      }
      get focusElement() {
        return this.getAttribute("cq-focus");
      }
      connectedCallback() {
        if (this.attached || (this.uiManager = e.UI.getUIManager(), this.attached = !0, this.hasAttribute("readonly"))) return;
        var r = this;
        function i(s) {
          r.tap(s);
        }
        function a(s) {
          r.captureTap(s);
        }
        this.addEventListener("stxtap", a, !0), e.UI.stxtap(this, i);
      }
      captureTap(r) {
        var i = Array.from(e.climbUpDomTree(r.target));
        this.noClose = i.filter(function (a) {
          var s = a.getAttribute("cq-no-close");
          return s !== null && s !== !1;
        }).length, this.noClose || (this.noClose = i.filter(function (a) {
          return a.matches("cq-separator,cq-heading");
        }).length);
      }
      close() {
        this.uiManager.closeMenu(this);
      }
      hide() {
        if (!this.active) return;
        this.unlift(), this.classList.remove(this.activeClassName), this.active = !1, this.querySelectorAll("input").forEach(function (i) {
          i == document.activeElement && i.blur();
        });
        const r = this.querySelector("cq-menu-dropdown");
        r && r.disablekeyboardNavigation();
      }
      lift() {
        const r = e.UI.getMyContext(this),
          i = this.lifts = this.uiManager.findLifts(this);
        for (let a = 0; a < i.length; a++) {
          if (r && r.config && r.config.themes) {
            let s = Object.keys(r.config.themes.builtInThemes);
            i[a].classList.remove(...s);
            let o = s.find(h => r.topNode.classList.contains(h) === !0);
            o && i[a].classList.add(o);
          }
          this.uiManager.lift(i[a]);
        }
      }
      onKeyboardDeselection() {
        this.close();
      }
      open(r) {
        for (var i = this.uiManager.activeMenuStack, a = 0; a < i.length; a++) if (i[a] === this) return;
        this.uiManager.openMenu(this, r);
      }
      show(r) {
        if (!this.active && (this.active = !0, this.classList.add(this.activeClassName), this.lift(), this.querySelectorAll("cq-scroll, cq-menu-dropdown").forEach(function (i) {
          i.resize && i.resize(), i.highlightFocusedItem();
        }), this.keyboardNavigation)) {
          const i = this.querySelector("cq-menu-dropdown");
          i && this.keyboardNavigation.setKeyControlElement(i, !0);
        }
      }
      tap(r) {
        r.stopPropagation();
        var i = this.uiManager;
        if (this.active) this.noClose || i.closeMenu(this);else {
          var a = r.target.closest("cq-menu-dropdown");
          if (a) return;
          for (var s = !1, o = e.climbUpDomTree(this.parentElement, "cq-menu,cq-dialog"), h = 0; h < o.length; h++) o[h].active && (s = !0);
          if (s || i.closeMenu(), this.open(), this.focusElement && !e.isMobile) {
            const l = this.querySelector(this.focusElement);
            l && l.focus();
          }
        }
      }
      unlift() {
        var r = this.lifts;
        if (r) {
          for (var i = 0; i < r.length; i++) this.uiManager.restoreLift(r[i]);
          this.lifts = null;
        }
      }
    }
    e.UI.addComponentDefinition("cq-menu", t);
  },
  Po = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext(r) {
        const i = this.getAttribute("cq-name");
        if (i && r.config) {
          const a = r.config.getMenu(i);
          if (this.addDefaultMarkup(this, a && a.join("")), !this.innerHTML) {
            const s = e.UI.BaseComponent.selfOrParentElement(this, "cq-menu-dropdown-section");
            s && (s.style.display = "none");
          }
          return;
        }
      }
    }
    e.UI.addComponentDefinition("cq-menu-container", t);
  },
  Lo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      constructor() {
        super();
      }
      connectedCallback() {
        super.connectedCallback(), this.messageQueue = [], this.displayTime = +this.getAttribute("defaultDisplayTime") || 10, this.messagePosition = this.getAttribute("defaultPosition") || "top", this.messageTransition = this.getAttribute("defaultTransition") || "", this.displayTimer = null, this.contextNode = null;
      }
      setContext() {
        this.contextNode = this.context.topNode, this.context.stx.addEventListener("notification", r => this.newMessage(r)), this.context.stx.append("resizeChart", () => this.handleResize());
      }
      handleResize() {
        for (let r = 0; r < this.messageQueue.length; r++) this.messageQueue[r].isDisplayed && this.positionElement(this.messageQueue[r]);
      }
      positionElement(r) {
        const i = this.context.stx.chart.canvas.getBoundingClientRect(),
          a = this.contextNode.getBoundingClientRect(),
          s = r.classList.contains("align-bottom");
        let o = i.top - a.top,
          h = i.left - a.left;
        Object.assign(r.style, {
          top: s ? o + i.height + "px" : o + "px",
          left: h + i.width * 0.5 + "px"
        });
      }
      createMessageElement(r) {
        if (!r.message) return;
        let {
          message: i,
          position: a,
          type: s,
          transition: o,
          displayTime: h,
          priority: l,
          callback: u
        } = r;
        h = parseInt(h), h !== 0 && (h = h || this.displayTime), a = a || this.messagePosition, o = o || this.messageTransition, l = l || 0, i.length > 160 && (i = i.slice(0, 160) + "...");
        let c = document.createElement("div");
        return c.innerHTML = `
			<div class="cq-message-container">
				<div class="cq-message-icon"></div>
				<div class="cq-message-text"></div>
			</div>`, c.querySelector(".cq-message-text").appendChild(e.translatableTextNode(this.context.stx, i)), c.classList.add("cq-toast-message"), c.classList.add("type-" + s), o && c.classList.add("animate", "transition-" + o), a == "bottom" && c.classList.add("align-bottom"), c.displayTime = h, c.priority = l, e.safeClickTouch(c, function (d, f, g) {
          g.stopPropagation(), f && f(), this.removeMessageNode(d);
        }.bind(this, c, u)), this.positionElement(c), c;
      }
      displayNextMessage() {
        if (!this.messageQueue.length) return;
        if (!this.contextNode.querySelector(".cq-toast-message")) {
          let i = this.messageQueue[0];
          this.contextNode.appendChild(i), i.isDisplayed = !0, i.displayTime !== 0 && (this.displayTimer = window.setTimeout(this.removeMessageNode.bind(this, i), i.displayTime * 1000));
        }
      }
      removeMessageNode(r) {
        if (r.classList.contains("hide")) return;
        r.classList.add("hide");
        let i = r.classList.contains("animate") ? 500 : 0;
        window.setTimeout(() => {
          r.remove(), this.messageQueue.splice(this.messageQueue.indexOf(r), 1), this.displayTimer && (this.displayTimer = window.clearTimeout(this.displayTimer)), this.displayNextMessage();
        }, i);
      }
      recallMessageNode(r) {
        r.isDisplayed && (this.displayTimer && (this.displayTimer = window.clearTimeout(this.displayTimer)), r.isDisplayed = !1, this.context.topNode.removeChild(r));
      }
      newMessage(r) {
        if (typeof r == "string" && this.context.config && this.context.config.systemMessages && (r = this.context.config.systemMessages[r]), !r) return;
        let i = this.createMessageElement(r);
        if (i) {
          const a = this.messageQueue.findIndex(s => s.priority < i.priority);
          a >= 0 ? (this.messageQueue[a].isDisplayed && this.recallMessageNode(this.messageQueue[a]), this.messageQueue.splice(a, 0, i)) : this.messageQueue.push(i), this.displayNextMessage();
        }
      }
    }
    e.UI.addComponentDefinition("cq-message-toaster", t);
  },
  No = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      constructor() {
        super(), this.dragMargin = 10;
      }
      connectedCallback() {
        this.attached || super.connectedCallback();
      }
      init() {
        this.isDragging = !1, this.minHeight = parseInt(this.getAttribute("min-height"), 10), isNaN(this.minHeight) && (this.minHeight = 25), this.paletteDock = this.parentElement.parentElement, this.dragStrip = this.querySelector(".drag-strip"), this.resizeStrip = this.querySelector(".resize-strip"), this.dragStrip && this.dragStrip.addEventListener("mousedown", function (r) {
          this.paletteDock.hasOwnProperty("dragging") && this.paletteDock.startDrag(this);
        }.bind(this)), this.resizeStrip && this.resizeStrip.addEventListener("mousedown", function (r) {
          this.paletteDock.hasOwnProperty("dragging") && this.paletteDock.startDrag(this, "resizing");
        }.bind(this)), this.paletteDock.paletteSubscribe && (this.sendMessage = this.paletteDock.paletteSubscribe(this.handleMessage.bind(this)));
      }
      get hide() {
        return this.getAttribute("hide");
      }
      set hide(r) {
        this.setAttribute("hide", r);
      }
      get docked() {
        return this.getAttribute("docked");
      }
      set docked(r) {
        this.setAttribute("docked", r);
      }
      get orientation() {
        return this.getAttribute("orientation");
      }
      set orientation(r) {
        this.setAttribute("orientation", r);
      }
      static get observedAttributes() {
        return ["docked", "hide"];
      }
      attributeChangedCallback(r, i, a) {
        switch (r) {
          case "docked":
            a === "false" ? (this.setTransform(100, 70), this.setHeightByScale(0.8)) : this.style.transform = "";
            break;
        }
      }
      handleMessage(r, i) {
        return {
          id: r,
          message: i
        };
      }
      detach(r, i) {
        let a = document.body.classList.contains("break-sm");
        if (this.docked === "true" && !a) {
          this.docked = "false", r = r || 10, i = i || 10;
          let s = {
            top: 0,
            left: 0,
            width: 0,
            height: 0
          };
          this.paletteDock.getBounds && (s = this.paletteDock.getChartBoundsOffset()), r > s.left + s.width - this.clientWidth && (r = s.left + s.width - this.clientWidth), this.setTransformPosition(r, i), this.paletteDock.setChartDimensions(), this.paletteDock.setVerticalPaletteHeight();
        }
      }
      dock() {
        this.docked === "false" && (this.docked = "true", this.paletteDock.setChartDimensions(), this.paletteDock.setVerticalPaletteHeight());
      }
      getHeight() {
        return this.clientHeight;
      }
      getWidth() {
        return this.clientWidth;
      }
      checkPosition() {
        let r = {
          top: 0,
          left: 0,
          width: 0,
          height: 0
        };
        this.paletteDock.getBounds && (r = this.paletteDock.getChartBoundsOffset());
        const a = this.style.transform.split(/\w+\(|\);?/)[1].split(/,\s?/g).map(function (s) {
          return parseInt(s);
        });
        a[0] += r.left + this.dragStrip.clientWidth * 0.5, a[1] += r.top + this.dragStrip.clientHeight * 0.5, this.setTransformPosition(a[0], a[1]);
      }
      setTransformPosition(r, i) {
        let a = {
          top: 0,
          left: 0,
          width: 0,
          height: 0
        };
        this.paletteDock.getBounds && (a = this.paletteDock.getChartBoundsOffset());
        let s = Math.floor(i - a.top - this.dragStrip.clientHeight * 0.5),
          o = Math.floor(r - a.left - this.dragStrip.clientWidth * 0.5);
        s = Math.min(Math.max(s, this.dragMargin), a.height - (this.dragStrip.clientHeight + this.dragMargin)), o = Math.min(Math.max(o, this.dragMargin), a.width - (this.dragStrip.clientWidth + this.dragMargin)), this.setTransform(o, s);
      }
      setTransform(r, i) {
        this.style.transform = "translate3d(" + r + "px," + i + "px, 0px)";
      }
      setHeightToPosition(r) {
        let i = {
          top: 0,
          left: 0,
          width: 0,
          height: 0
        };
        this.paletteDock.getBounds && (i = this.paletteDock.getBounds());
        let a = this.getBoundingClientRect(),
          s = r - a.top;
        this.orientation === "vertical" && s > this.minHeight && s + (a.top - i.top) < i.height && this.setHeight(s);
      }
      setHeightByScale(r) {
        this.style.height = Math.floor(parseInt(this.style.height, 10) * r) + "px";
      }
      setHeight(r) {
        this.style.height = r + "px";
      }
    }
    e.UI.addComponentDefinition("cq-palette", t);
  },
  Vo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      constructor() {
        super(), this.dragging = !1, this.paletteRegistry = [], this.mouseOutCk = !1;
      }
      connectedCallback() {
        this.attached || super.connectedCallback();
      }
      initListeners() {
        const {
            stx: r,
            config: i = {}
          } = this.context,
          a = this,
          s = a.handleResize.bind(this);
        this.setVerticalPaletteHeight(), this.addEventListener("mouseup", this.stopDrag.bind(this)), this.addEventListener("mouseleave", h), this.addEventListener("mouseenter", l), this.addEventListener("mousemove", u), this.addEventListener("mousedown", this.stopContext.bind(this)), r.append("resizeChart", () => s({
          resizeChart: !1
        }));
        const o = (i.channels || {}).drawing || "channel.drawing";
        this.channelSubscribe(o, c);
        function h(d) {
          a.context.stx.showCrosshairs(), a.mouseOutCk = setTimeout(() => a.stopDrag(), 500);
        }
        function l(d) {
          if (a.context.stx.undisplayCrosshairs(), !!a.dragging) {
            if (d.buttons === 1) {
              clearTimeout(a.mouseOutCk);
              return;
            }
            a.stopDrag();
          }
        }
        function u(d) {
          a.dragging && (d.stopPropagation(), a.dragging.classList.contains("dragging") && a.dragging.setTransformPosition(d.clientX, d.clientY), a.dragging.classList.contains("resizing") && a.dragging.setHeightToPosition(d.clientY));
        }
        function c(d) {
          a.setChartDimensions(), r.resizeChart();
        }
      }
      setContext() {
        this.initListeners();
      }
      palettePublish(r, i) {
        for (var a = 0; a < this.paletteRegistry.length; a++) this.paletteRegistry[a](r, i);
      }
      paletteSubscribe(r) {
        return this.paletteRegistry.push(r), this.palettePublish.bind(this);
      }
      getBounds() {
        return this.parentNode.getBoundingClientRect();
      }
      getChartBounds() {
        let r = this.parentNode.getBoundingClientRect(),
          i = {
            top: 0,
            left: 0,
            height: r.height,
            width: r.width
          };
        for (var a = this.querySelectorAll("[docked=\"true\"]"), s = 0; s < a.length; s++) {
          var o = a[s];
          o.orientation === "vertical" ? (i.width -= o.getWidth(), i.left += o.getWidth()) : o.orientation === "horizontal" && (i.height -= o.getHeight(), i.top += o.getHeight());
        }
        return i;
      }
      getChartBoundsOffset() {
        let r = this.parentNode.getBoundingClientRect(),
          i = this.getChartBounds();
        return i.top += r.top, i.left += r.left, i;
      }
      startContext() {
        this.classList.add("context");
      }
      stopContext() {
        this.classList.remove("context"), this.palettePublish("context", "stop");
      }
      startDrag(r, i) {
        for (var a = this.querySelectorAll("[docked=\"false\"]"), s = 0; s < a.length; s++) a[s].style.zIndex = 1;
        i = i || "dragging", this.dragging = r, this.classList.add("dragging"), this.dragging.classList.add(i), this.dragging.style.zIndex = 10;
      }
      stopDrag() {
        this.classList.remove("dragging"), this.dragging = !1, this.resizing = !1, this.node.find("[docked=\"false\"]").each(function () {
          this.node.removeClass("dragging resizing");
        });
      }
      startResize(r) {
        this.resizing = r, this.classList.add("dragging"), this.dragging.classList.add("dragging");
      }
      handleResize({
        resizeChart: r = !0
      } = {}) {
        this.palettePublish("dockWillResize"), this.setChartDimensions(), this.setVerticalPaletteHeight();
        let i = document.body.classList.contains("break-sm");
        for (var a = this.querySelectorAll("[docked=\"false\"]"), s = 0; s < a.length; s++) {
          var o = a[s];
          i ? o.dock() : o.checkPosition();
        }
        this.palettePublish("dockDidResize"), r && this.context.stx.resizeChart();
      }
      setVerticalPaletteHeight() {
        this.node.find("[orientation=vertical]").each(function (r, i) {
          i.getAttribute("docked") === "true" && (i.style.height = this.parentNode.clientHeight + "px");
        }.bind(this));
      }
      setChartDimensions() {
        const r = this.context.stx.chart.container,
          {
            top: i,
            left: a,
            width: s,
            height: o
          } = this.getChartBounds(),
          {
            config: h
          } = this.context;
        h && h.channels ? this.channelWrite(h.channels.drawingPalettes || "channel.drawingPalettes", {
          top: i,
          left: a,
          width: s,
          height: o
        }) : (r.style.width = s + "px", r.style.height = o + "px", r.style.top = i + "px", r.style.left = a + "px");
        for (var l = this.querySelectorAll("[orientation=\"horizontal\"]"), u = 0; u < l.length; u++) {
          var c = l[u];
          c.style.left = a + 1 + "px", c.style.width = s + "px";
        }
        for (var d = this.querySelectorAll("[orientation=\"vertical\"]"), f = 0; f < d.length; f++) {
          var g = d[f];
          g.docked === "false" ? g.style.top = i + "px" : g.style.top = 0;
        }
      }
      dockAllPalettes() {
        for (var r = this.querySelectorAll("[docked=\"false\"]"), i = 0; i < r.length; i++) r[i].dock();
      }
    }
    e.UI.addComponentDefinition("cq-palette-dock", t);
  },
  Uo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      pairUp(r) {
        this.undo = r, this.undo.redoButton = this;
        var i = this;
        e.UI.stxtap(this, function () {
          i.undo.redo();
        });
      }
    }
    e.UI.addComponentDefinition("cq-redo", t);
  },
  Bo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.BaseComponent {
      connectedCallback() {
        if (!this.attached && (super.connectedCallback(), this.hasAttribute("cq-no-claim") || this.addClaim(this), !this.hasAttribute("cq-no-scroll"))) {
          this.style.overflowY = "auto", this.uiManager = e.UI.getUIManager(), this.uiManager.length > 0 && (this.uiManager = this.uiManager[0]), this.addEventListener(e.wheelEvent, function (i) {
            i.stopPropagation();
          }, {
            passive: !1
          });
          var r = this;
          e.UI.addResizeListener(this, function () {
            r.resize();
          }), this.resize();
        }
      }
      disconnectedCallback() {
        e.UI.removeResizeListener(this), super.disconnectedCallback();
      }
      focused() {
        var r = this.node.find("cq-item[cq-focused]");
        return r.length ? r[0] : null;
      }
      keyStroke(r, i, a) {
        var s = this.node;
        const o = document.querySelectorAll(".stxMenuActive *");
        if (Array.from(o).includes(this)) {
          if (!e.trulyVisible(this)) return !1;
          switch (i) {
            case "ArrowUp":
            case "ArrowDown":
            case "Enter":
            case " ":
            case "Up":
            case "Down":
            case "Spacebar":
              break;
            default:
              return !1;
          }
          var h = this.querySelectorAll("cq-item:not(.item-hidden)");
          if (h.length) {
            var l = s.find("cq-item[cq-focused]");
            if (i == " " || i == "Spacebar" || i == "Enter") return l.length && l[0].selectFC ? (l[0].selectFC.call(l, a), this.highlightFocusedItem(), !0) : !1;
            if (!l.length) return h[0].setAttribute("cq-focused", "true"), this.highlightFocusedItem(), this.scrollToElement(h[0]), !0;
            s.find("cq-item").removeAttr("cq-focused");
            for (var u = 0; u < h.length && h[u] !== l[0]; u++);
            if (i == "ArrowUp" || i == "Up") do if (u--, u < 0) {
              u = 0;
              break;
            } while (!e.trulyVisible(h[u]));
            if (i == "ArrowDown" || i == "Down") do if (u++, u >= h.length) {
              u = h.length - 1;
              break;
            } while (!e.trulyVisible(h[u]));
            return e.trulyVisible(h[u]) && (h[u].setAttribute("cq-focused", "true"), this.scrollToElement(h[u]), this.highlightFocusedItem()), !0;
          }
        }
      }
      onKeyboardDeselection() {
        this.keyboardNavigation && this.keyboardNavigation !== null && this.keyboardNavigation.highlightPosition();
      }
      highlightFocusedItem() {
        if (!this.keyboardNavigation) return;
        const r = this.querySelector("cq-item[cq-focused]");
        if (r) {
          const {
            x: i,
            y: a,
            width: s,
            height: o
          } = r.getBoundingClientRect();
          r && this.keyboardNavigation && this.keyboardNavigation.highlightPosition && this.keyboardNavigation.highlightPosition({
            element: r,
            position: {
              x: i,
              y: a,
              width: s,
              height: o
            }
          });
        }
      }
      resize() {
        var r = this.node,
          i = e.UI.getMyContext(this);
        if (!r.parents(".sharing").length && !this.hasAttribute("cq-no-resize")) {
          this.hasAttribute("cq-no-maximize") && (this.noMaximize = !0);
          var a = this.getBoundingClientRect(),
            s = this.reduceMenuHeight || 45,
            o,
            h;
          if (i && i.topNode) {
            var l = i.topNode.getBoundingClientRect();
            o = l.height, h = l.top;
          } else o = window.innerHeight, h = 0;
          if (o) {
            var u = o - (a.top - h) - s,
              c = r.parents(".stx-holder,.stx-subholder,.chartContainer");
            c.length && c.each(function () {
              var p = this.getBoundingClientRect().top + e.elementDimensions(this).height;
              u = Math.min(u, p - a.top - 5);
            });
            for (var d = r.nextAll(), f = 0; f < d.length; f++) {
              var g = d[f];
              g && !e.trulyVisible(g) || (u -= e.elementDimensions(g, {
                border: 1,
                padding: 1,
                margin: 1
              }).height);
            }
            this.noMaximize || r.css({
              height: u + "px"
            }), r.css({
              "max-height": u + "px"
            }), this.refresh();
          }
        }
      }
      scrollToElement(r) {
        var i = this.clientHeight,
          a = this.scrollTop,
          s = r.offsetTop + r.clientHeight;
        r.offsetTop > a && s < i + a || (this.scrollTop = Math.max(s - i, 0), this.refresh());
      }
      top() {
        this.scrollTop = 0, this.refresh();
      }
      refresh() {
        e.UI.scrollbarStyling && e.UI.scrollbarStyling.refresh(this);
      }
    }
    e.UI.addComponentDefinition("cq-scroll", t);
  },
  Oo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext() {
        this.addDefaultMarkup(), e.safeClickTouch(this, () => this.tap());
      }
      tap(r) {
        const {
          context: i
        } = this;
        if (i.config) this.channelWrite(i.config.channels.dialog, {
          type: "share",
          params: {
            context: i
          }
        }, i.stx);else {
          const a = document.querySelector("cq-share-dialog");
          a && a.open && a.open({
            context: i
          });
        }
      }
    }
    t.markup = "<div>Share</div>", e.UI.addComponentDefinition("cq-share-button", t);
  },
  Ho = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.Share) console.error("shareDialog component requires first activating share feature.");else {
      class t extends e.UI.DialogContentTag {
        open(r) {
          this.addDefaultMarkup(), this.setState("share-create"), super.open(r);
        }
        close() {
          this.setState("share-create"), super.close();
        }
        setState(r) {
          this.addDefaultMarkup(), this.node.find("div[cq-share-dialog-div]")[0].className = r;
        }
        share() {
          var r = this.context.stx,
            i = this;
          i.setState("share-generate");
          var a = document.querySelector("cq-share-dialog .share-link-div");
          a && (a.innerHTML = ""), e.UI.bypassBindings = !0, e.Share.createImage(r, {
            hide: [".stx_chart_controls", ".stx-btn-panel", ".stx_jump_today", ".stx-baseline-handle", ".ciq-edit", ".ciq-close", "cq-marker-label"]
          }, function (s) {
            e.UI.bypassBindings = !1;
            var o = e.uniqueID(),
              h = "https://share.chartiq.com",
              l = r.getStartDateOffset(),
              u = {
                layout: r.exportLayout(),
                drawings: r.exportDrawings(),
                xOffset: l,
                startDate: r.chart.dataSegment[l].Date,
                endDate: r.chart.dataSegment[r.chart.dataSegment.length - 1].Date,
                id: o,
                symbol: r.chart.symbol
              },
              c = h + "/upload/" + o,
              d = {
                id: o,
                image: s,
                config: u
              };
            i.setState("share-upload"), e.Share.uploadImage(s, c, d, function (f, g) {
              i.setState("share-copy"), f !== null ? e.alert("error: " + f) : a && (a.innerHTML = h + g);
            });
          });
        }
        copy() {
          var r = document.querySelector("cq-share-dialog .share-link-div");
          if (r) {
            var i = r.innerText,
              a = document.createElement("input");
            if (a.type = "text", a.value = i, a.contentEditable = !0, a.readOnly = !0, document.body.appendChild(a), a.focus(), a.select(), !e.isIE) {
              var s = document.createRange();
              s.selectNodeContents(a);
              var o = window.getSelection();
              o.removeAllRanges(), o.addRange(s), a.setSelectionRange(0, i.length);
            }
            document.execCommand("copy"), document.body.removeChild(a), this.setState("share-copied");
          }
        }
      }
      t.markup = `
		<h4 class="title">Share Your Chart</h4>
		<cq-close></cq-close>
		<div cq-share-dialog-div>
			<cq-separator></cq-separator>
			<cq-share-create class="ciq-btn" stxtap="share()">Create Image</cq-share-create>
			<cq-share-generating>Generating Image</cq-share-generating>
			<cq-share-uploading>Uploading Image</cq-share-uploading>
			<div class="share-link-div"></div>
			<cq-share-copy class="ciq-btn" stxtap="copy()">Copy Link to Clipboard</cq-share-copy>
			<cq-share-copied>Link Copied!</cq-share-copied>
	`, e.UI.addComponentDefinition("cq-share-dialog", t);
    }
  },
  Ro = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      set(r, i, a, s, o, h) {
        var l = this;
        l.context.loader && l.context.loader.show();
        var u = {
          multiplier: i,
          base: a
        };
        s && (u.periodicity = {
          interval: s,
          period: o || 1,
          timeUnit: h
        }), l.context.stx.setSpan(u, function () {
          l.context.loader && l.context.loader.hide();
        });
      }
      setContext(r) {
        const i = r.config && r.config.getMenu("rangeMenu");
        this.addDefaultMarkup(this, i && i.join(""));
      }
    }
    t.markup = `
		<div stxtap="set(1,'today');">1D</div>
		<div stxtap="set(5,'day',30,2,'minute');">5D</div>
		<div stxtap="set(1,'month',30,8,'minute');">1M</div>
		<div class="hide-sm" stxtap="set(3,'month');">3M</div>
		<div class="hide-sm" stxtap="set(6,'month');">6M</div>
		<div class="hide-sm" stxtap="set(1,'YTD');">YTD</div>
		<div stxtap="set(1,'year');">1Y</div>
		<div class="hide-sm" stxtap="set(5,'year',1,1,'week');">5Y</div>
		<div class="hide-sm" stxtap="set(1,'all');">All</div>
	`, e.UI.addComponentDefinition("cq-show-range", t);
  },
  zo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      setContext({
        config: {
          channels: r = {}
        } = {},
        stx: i
      }) {
        const a = this.querySelector("div"),
          s = this.getAttribute("cq-on") || "sidenavOn",
          o = this.getAttribute("cq-off") || "sidenavOff",
          h = r.breakpoint || "channel.breakpoint",
          l = r.sidenav || "layout.sidenav",
          u = r.sidenavSize || "channel.sidenavSize",
          c = r.tfc || "channel.tfc",
          d = () => {
            const f = this.channelRead(h) === "break-sm",
              g = f && this.channelRead(l) === s;
            a.classList.remove("sidenav", "ciq-toggles"), a.classList.add(f ? "sidenav" : "ciq-toggles"), a.classList[g ? "add" : "remove"]("active"), this.channelWrite(u, g ? a.offsetWidth : 0);
          };
        this.channelSubscribe(l, d), this.channelSubscribe(h, d), this.channelSubscribe(c, f => {
          f && this.channelWrite(l, o);
        });
      }
    }
    e.UI.addComponentDefinition("cq-side-nav", t);
  },
  Wo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      constructor() {
        super(), this.callbacks = [];
      }
      setContext(r) {
        const {
          config: i,
          stx: a
        } = r;
        if (!i) return;
        const {
            channels: s = {}
          } = i,
          o = this.resizeMyself.bind(this),
          {
            node: h
          } = this;
        this.channelSubscribe(s.breakpoint || "channel.breakpoint", l), this.channelSubscribe(s.tfc || "channel.tfc", u, a);
        function l() {
          setTimeout(o);
        }
        function u(c) {
          c ? h.attr("cq-active", !0) : h.removeAttr("cq-active"), l();
        }
      }
      close() {
        this.node.removeAttr("cq-active");
        var r = this.node.children();
        r.each(function () {
          this.sidePanelActiveClass ? this.classList.remove(this.sidePanelActiveClass) : this.removeAttribute(this.sidePanelActiveAttribute);
        });
        var i = this;
        setTimeout(function () {
          i.resizeMyself();
        }, 0);
      }
      nonAnimatedWidth() {
        var r = 0;
        return Array.from(this.children).forEach(function (i) {
          r += e.elementDimensions(i).width;
        }), r;
      }
      open(r) {
        this.close();
        var i = this.node.find(r.selector);
        r.className ? (i.addClass(r.className), i.each(function () {
          this.sidePanelActiveClass = r.className;
        })) : (i.attr(r.attribute, "true"), i.each(function () {
          this.sidePanelActiveAttribute = r.attribute;
        })), this.node.attr("cq-active", "true");
        var a = this;
        setTimeout(function () {
          a.resizeMyself();
        }, 0);
      }
      registerCallback(r) {
        this.callbacks.push(r);
      }
      resizeMyself() {
        var r = this.nonAnimatedWidth();
        this.node.css({
          width: r + "px"
        });
        for (var i = 0; i < this.callbacks.length; i++) this.callbacks[i].call(this, r);
        const {
          config: a,
          stx: s
        } = this.context || {};
        if (!a) return;
        const o = (a.channels || {}).sidepanelSize || "channel.sidepanelSize";
        this.channelWrite(o, r, s);
      }
    }
    e.UI.addComponentDefinition("cq-side-panel", t);
  },
  Go = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      disconnectedCallback() {
        this.context && e.UI.unobserveProperty("studyLibraryHash", this.context.stx.chart, this.listener), super.disconnectedCallback();
      }
      initialize(r) {
        this.addDefaultMarkup(), this.params = r || {}, this.alwaysDisplayDialog = this.params.alwaysDisplayDialog || !1, this.excludedStudies = this.params.excludedStudies || [], this.params.template || (this.params.template = "template"), this.params.template = this.node.find(this.params.template), this.renderMenu();
        var i = this,
          a = this.context.stx;
        this.listener = function (s) {
          i.renderMenu();
        }, e.UI.observeProperty("studyLibraryHash", a.chart, this.listener);
      }
      setContext({
        config: r
      }) {
        r && r.menuStudiesConfig && this.initialize(Object.assign({}, r.menuStudiesConfig));
      }
      renderMenu() {
        if (!e.Studies) return;
        var r = this.context.stx,
          i = [],
          a;
        for (var s in e.Studies.studyLibrary) a = e.Studies.studyLibrary[s], !(!a || this.excludedStudies[s] || this.excludedStudies[a.name] || a.siqList !== void 0) && (a.name || (a.name = s), i.push(s));
        i.sort(function (p, m) {
          var x = e.Studies.studyLibrary[p],
            y = e.Studies.studyLibrary[m];
          return x.name < y.name ? -1 : x.name > y.name ? 1 : 0;
        });
        for (var o = this.node, h = this, l = function (p, m) {
            return function (x) {
              g(x.target, p), h.dispatchEvent(new Event("resize"));
            };
          }, u = o.find("cq-studies-content"); u.length > 0 && u[0].firstChild;) u[0].removeChild(u[0].firstChild);
        for (var c = 0; c < i.length; c++) {
          var d = e.UI.makeFromTemplate(this.params.template);
          a = e.Studies.studyLibrary[i[c]], d.append(e.translatableTextNode(r, a.name)), this.makeTap(d[0], l(i[c], this.context)), o.find("cq-studies-content").append(d);
        }
        function f(p, m) {
          const {
            context: x
          } = h;
          if (x.config) h.channelWrite(x.config.channels.dialog, {
            type: "study",
            params: Object.assign({}, p, {
              context: x,
              addWhenDone: m
            })
          }, x.stx);else {
            p.context = h.context;
            const y = document.querySelector("cq-study-dialog");
            y.addWhenDone = m, y.open(p);
          }
        }
        function g(p, m) {
          var x = h.context.stx;
          function y(C, k, M) {
            if (C === !0) return f(k, M), !0;
            if (typeof C == "object") {
              for (var I in C) if (I == m && C[I]) return f(k, M), !0;
            }
          }
          if (!y(h.params.dialogBeforeAddingStudy, {
            stx: x,
            name: m
          }, !0)) {
            var b = e.Studies.addStudy(x, m);
            y(h.alwaysDisplayDialog, {
              sd: b,
              stx: x
            });
          }
        }
      }
    }
    t.markup = `
		<template>
			<cq-item></cq-item>
		</template>
		<cq-studies-content></cq-studies-content>
	`, e.UI.addComponentDefinition("cq-studies", t);
  },
  Zo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.DialogContentTag {
      setContext(r) {
        this.addDefaultMarkup(), this.classList.add("ciq-context-menu"), super.setContext(r);
      }
    }
    t.markup = `
		<div stxtap="StudyEdit.edit()">Edit Settings...</div>
		<div stxtap="StudyEdit.remove()">Delete Study</div>
	`, e.UI.addComponentDefinition("cq-study-context", t);
  },
  Qo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.Studies) console.error("studyDialog component requires first activating studies feature.");else {
      class t extends e.UI.DialogContentTag {
        connectedCallback() {
          this.attached || (super.connectedCallback(), this.queuedUpdates = {});
        }
        close() {
          if (this.addWhenDone) {
            var r = this.helper,
              i = e.Studies.addStudy(r.stx, r.name);
            e.isEmpty(this.queuedUpdates) || (r.sd = i, r.updateStudy(this.queuedUpdates), this.queuedUpdates = {});
          }
        }
        disconnectedCallback() {
          e.UI.unobserveProperty("signal", this.helper), super.disconnectedCallback();
        }
        formatDateInput(r) {
          return r = r.replace(/-/g, ""), r.search(/^\d{8}$/) || (r = r.substring(0, 4) + "-" + r.substring(4, 6) + "-" + r.substring(6, 8)), r;
        }
        formatTimeInput(r) {
          return r = r.replace(/:/g, ""), r.search(/^\d{4,6}$/) || (r = r.substring(0, 2) + ":" + r.substring(2, 4) + (r.length == 4 ? "" : ":" + r.substring(4, 6))), r;
        }
        hide() {
          e.isEmpty(this.queuedUpdates) || (this.helper.updateStudy(this.queuedUpdates), this.queuedUpdates = {}), this.node.find("cq-menu").each(function () {
            this.unlift && this.unlift();
          }), this.node.find("cq-swatch").each(function () {
            this.colorPicker && this.colorPicker.close();
          });
        }
        makeMenu(r, i, a, s) {
          var o = e.UI.makeFromTemplate(this.menuTemplate),
            h = o.find("cq-menu-dropdown");
          for (var l in a) {
            var u = document.createElement("cq-item");
            u.innerText = a[l], u.setAttribute("stxtap", "StudyDialog.setSelectOption('" + s + "')"), h.append(u), u.cqMenuWrapper = h.parents("cq-menu")[0], u.setAttribute("name", r), u.setAttribute("value", l), u.context = this.context;
          }
          var c = o.find("cq-selected");
          return c.text(this.helper.stx.translateIf(i)), o[0];
        }
        open(r) {
          this.addDefaultMarkup(), this.selectTemplates(), super.open(r), r.axisSelect = this.getAttribute("cq-study-axis"), r.axisSelect === "" && (r.axisSelect = !0), r.panelSelect = this.getAttribute("cq-study-panel"), r.panelSelect === "" && (r.panelSelect = !0), typeof r.addWhenDone < "u" && (this.addWhenDone = r.addWhenDone);
          var i = this;
          this.context.stx, e.UI.unobserveProperty("signal", this.helper), this.helper = new e.Studies.DialogHelper(r), e.UI.observeProperty("signal", this.helper, function (s) {
            i.refreshInputs(), i.refreshOutputs(), i.refreshParameters(r);
          });
          var a = this.node;
          a.find(".title").text(this.helper.title), this.refreshInputs(!0), this.refreshOutputs(!0), this.refreshParameters(r, !0);
        }
        refreshInputs(r) {
          var i = this.node.find("cq-study-inputs");
          r && i.empty();
          for (var a = 0; a < this.helper.inputs.length; a++) {
            var s = this.helper.inputs[a],
              o = e.UI.makeFromTemplate(this.inputTemplate);
            this.menuTemplate = o.find("template[cq-menu]"), o.find(".ciq-heading").text(s.heading), o[0].setAttribute("fieldname", s.name);
            var h = null,
              l,
              u = this.helper.attributes[s.name];
            if (s.type == "number") {
              h = document.createElement("input"), h.setAttribute("type", "number"), h.value = s.value, this.setChangeEvent(h, "inputs", s.name);
              for (l in u) {
                var c = u[l];
                (e.isIE || e.isEdge) && l == "step" && Math.floor(c) != c && (c = "any"), l !== "hidden" && h.setAttribute(l, c);
              }
            } else if (s.type == "text" || s.type == "date" || s.type == "time") {
              h = document.createElement("input"), h.setAttribute("type", e.UI.supportedInputType(s.type)), s.type == "date" ? h.value = this.formatDateInput(s.value) : s.type == "time" ? h.value = this.formatTimeInput(s.value) : h.value = s.value, this.setChangeEvent(h, "inputs", s.name);
              for (l in u) l !== "hidden" && h.setAttribute(l, u[l]);
            } else if (s.type == "select") h = this.makeMenu(s.name, s.value, s.options, "inputs"), u && u.readonly && h.setAttribute("readonly", u.readonly);else if (s.type == "checkbox") {
              h = document.createElement("input"), h.setAttribute("type", "checkbox"), s.value && (h.checked = !0), this.setChangeEvent(h, "inputs", s.name);
              for (l in u) l !== "hidden" && h.setAttribute(l, u[l]);
            }
            u && u.hidden && o.hide(), h && o.find(".stx-data").append(h), o[0].originalOuterHTML = o[0].outerHTML;
            var d = i.find("[fieldname='" + s.name + "']");
            d.length ? d[0].originalOuterHTML !== o[0].originalOuterHTML && d[0].replaceWith(o[0]) : i.append(o);
          }
        }
        refreshOutputs(r) {
          var i = this.node.find("cq-study-outputs");
          r && i.empty();
          for (var a = 0; a < this.helper.outputs.length; a++) {
            var s = this.helper.outputs[a],
              o = e.UI.makeFromTemplate(this.outputTemplate);
            o[0].initialize({
              studyDialog: this,
              output: s.name
            }), o.find(".ciq-heading").text(s.heading), o[0].setAttribute("fieldname", s.name);
            var h = o.find("cq-swatch"),
              l = s.color;
            typeof l == "object" && (l = l.color), o[0].originalOuterHTML = o[0].outerHTML;
            var u = i.find("[fieldname='" + s.name + "']");
            u.length ? u[0].originalOuterHTML !== o[0].originalOuterHTML && u[0].replaceWith(o[0]) : i.append(o), h[0].setColor(l, !1);
          }
        }
        refreshParameters(r, i) {
          var a = this.node.find("cq-study-parameters");
          i && a.empty();
          for (var s = 0; s < this.helper.parameters.length; s++) {
            var o = this.helper.parameters[s],
              h = e.UI.makeFromTemplate(this.parameterTemplate);
            if (this.menuTemplate = h.find("template[cq-menu]"), !this.menuTemplate.length && o.options) {
              h.remove();
              continue;
            }
            h.find(".ciq-heading").text(o.heading), h[0].setAttribute("fieldname", o.name);
            var l = h.find("cq-swatch"),
              u = document.createElement("input"),
              c,
              d = !1,
              f = {};
            if (o.defaultValue.constructor == Boolean) {
              u.setAttribute("type", "checkbox"), o.value && (u.checked = !0), this.setChangeEvent(u, "parameters", o.name + "Enabled"), l.remove(), f = this.helper.attributes[o.name + "Enabled"];
              for (c in f) c !== "hidden" && u.setAttribute(c, f[c]);
            } else if (o.defaultValue.constructor == String) {
              var g = o.name;
              o.defaultColor ? (h[0].initialize({
                studyDialog: this,
                parameter: o.name + "Color",
                params: r
              }), d = !0, g = g + "Value") : l.remove(), o.options ? u = this.makeMenu(g, o.value, o.options, "parameters") : u.value = o.value, f = this.helper.attributes[g];
              for (c in f) c !== "hidden" && u.setAttribute(c, f[c]);
            } else if (o.defaultValue.constructor == Number) {
              u.setAttribute("type", "number"), u.value = o.value, this.setChangeEvent(u, "parameters", o.name + "Value"), h[0].initialize({
                studyDialog: this,
                parameter: o.name + "Color",
                params: r
              }), d = !0, f = this.helper.attributes[o.name + "Value"];
              for (c in f) {
                var p = f[c];
                (e.isIE || e.isEdge) && c == "step" && Math.floor(p) != p && (p = "any"), c !== "hidden" && u.setAttribute(c, p);
              }
            } else continue;
            f && f.hidden && h.not("hr").hide(), h.find(".stx-data").append(u), h[0].originalOuterHTML = h[0].outerHTML;
            var m = a.find("[fieldname='" + o.name + "']");
            m.length ? m[0].originalOuterHTML !== h[0].originalOuterHTML && m[0].replaceWith(h[0]) : a.append(h), d && l[0].setColor(o.color, !1);
          }
        }
        setChangeEvent(r, i, a) {
          var s = this;
          function o() {
            return function () {
              var h = {};
              h[i] = {}, h[i][a] = this.value, (this.type == "checkbox" || this.type == "radio") && (h[i][a] = this.checked), s.updateStudy(h);
            };
          }
          r.addEventListener("change", o());
        }
        setContext(r) {
          this.context = r, r.advertiseAs(this, "StudyDialog");
        }
        setSelectOption(r, i) {
          var a = e.UI.$(r.node),
            s = a.attr("name"),
            o = a.attr("value"),
            h = a[0].cqMenuWrapper;
          h.fieldValue = o;
          var l = h.querySelector("cq-selected");
          l && (l.innerText = this.helper.stx.translateIf(o)), i || (i = "inputs");
          var u = {};
          u[i] = {}, u[i][s] = o, this.updateStudy(u);
        }
        updateStudy(r) {
          if (!this.node.find(":invalid").length) {
            if (this.addWhenDone) {
              e.extend(this.queuedUpdates, r);
              return;
            }
            this.helper.libraryEntry.deferUpdate ? (e.extend(this.queuedUpdates, {
              inputs: r.inputs
            }), this.helper.updateStudy({
              outputs: r.outputs,
              parameters: r.parameters
            })) : this.helper.updateStudy(r);
          }
        }
        selectTemplates() {
          this.inputTemplate || (this.inputTemplate = this.querySelector("template[cq-study-input]"), this.outputTemplate = this.querySelector("template[cq-study-output]"), this.parameterTemplate = this.querySelector("template[cq-study-parameters]"));
        }
      }
      t.markup = `
		<h4 class="title">Study here</h4>
		<cq-scroll cq-no-maximize>
			<cq-study-inputs>
				<template cq-study-input>
					<cq-study-input>
						<div class="ciq-heading"></div>
						<div class="stx-data">
							<template cq-menu>
								<cq-menu class="ciq-select">
									<cq-selected></cq-selected>
									<cq-menu-dropdown cq-lift></cq-menu-dropdown>
								</cq-menu>
							</template>
						</div>
					</cq-study-input>
					<hr>
				</template>
			</cq-study-inputs>
			<cq-study-outputs>
				<template cq-study-output>
					<cq-study-output>
						<div class="ciq-heading"></div>
						<cq-swatch cq-overrides="auto"></cq-swatch>
					</cq-study-output>
					<hr>
				</template>
			</cq-study-outputs>
			<cq-study-parameters>
				<template cq-study-parameters>
					<cq-study-parameter>
						<div class="ciq-heading"></div>
						<div class="stx-data"><cq-swatch cq-overrides="auto"></cq-swatch>
							<template cq-menu>
								<cq-menu class="ciq-select">
									<cq-selected></cq-selected>
									<cq-menu-dropdown cq-lift></cq-menu-dropdown>
								</cq-menu>
							</template>
						</div>
					</cq-study-parameter>
					<hr>
				</template>
			</cq-study-parameters>
		</cq-scroll>
		<div class="ciq-dialog-cntrls">
			<div class="ciq-btn" stxtap="close()">Done</div>
		</div>
	`, e.UI.addComponentDefinition("cq-study-dialog", t);
    }
  },
  $o = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.DialogContentTag {}
    e.UI.addComponentDefinition("cq-study-input", t);
  },
  jo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.Studies) console.error("studyLegend component requires first activating studies feature.");else {
      class t extends e.UI.ModalTag {
        connectedCallback() {
          this.attached || (super.connectedCallback(), this.node.attr("cq-clone-to-panels") !== void 0 && document.body.classList.add("stx-panel-legend"));
        }
        begin() {
          if (!this.init) {
            var r = this.context.stx,
              i = this.node;
            this.template = i.find("template[cq-study-legend]"), this.template.length || (this.template = i.find("template")), this.contentKeys = i.attr("cq-content-keys") || "cq-label", this.eventListeners.push(r.addEventListener("layout", this.renderLegend.bind(this))), this.hasAttribute("cq-marker") && e.UI.stxtap(this, function () {
              i[0].classList.toggle("ciq-active");
            }), this.renderLegend(), this.init = !0;
          }
        }
        launchColorPicker() {
          this.node.addClass("ciq-active");
        }
        renderLegend() {
          var r = this.context.stx;
          this.template.nextAll().remove();
          function i(y, b) {
            return function (C) {
              setTimeout(function () {
                b.permanent || e.Studies.removeStudy(y.context.stx, b), y.node[0].hasAttribute("cq-marker") && y.context.stx.modalEnd(), y.renderLegend();
              }, 0);
            };
          }
          function a(y, b) {
            return function (C) {
              var k = r.layout.studies[b];
              if (!(k.permanent || !k.editFunction)) {
                C.stopPropagation(), y.uiManager.closeMenu();
                var M = y.context.getAdvertised("StudyEdit"),
                  I = {
                    stx: r,
                    sd: k,
                    inputs: k.inputs,
                    outputs: k.outputs,
                    parameters: k.parameters
                  };
                M.editPanel(I);
              }
            };
          }
          var s = this.hasAttribute("cq-overlays-only"),
            o = this.hasAttribute("cq-panel-only"),
            h = this.hasAttribute("cq-custom-removal-only"),
            l = this.node.attr("cq-marker-label"),
            u = null,
            c = this.node.parents(".stx-holder")[0];
          if (c && (u = c.panel.name), e.Studies) for (var d in r.layout.studies) {
            var f = r.layout.studies[d];
            if (!f.customLegend && !(h && !f.study.customRemoval) && !(o && f.panel != u) && !(s && !f.overlay && !f.underlay)) {
              var g = e.UI.makeFromTemplate(this.template, !0);
              g.find("cq-label").html(f.inputs.display);
              var p = g.find(".ciq-close");
              f.permanent ? p.hide() : e.UI.stxtap(p[0], i(this, f));
              var m = g.find(".ciq-edit")[0];
              m && !f.editFunction ? m.style.visibility = "hidden" : f.editFunction && (m || (m = g.find("cq-label")[0]), e.UI.stxtap(m, a(this, d)));
            }
          }
          if (typeof l < "u" && !this.node.find("cq-marker-label").length) {
            var x = document.createElement("cq-marker-label");
            x.innerText = l, this.insertBefore(x, this.firstChild);
          }
          this.displayLegendTitle();
        }
        displayLegendTitle() {
          r(this, this.contentKeys) ? (this.node.css("display", ""), this.node.parents("div.stx-panel-legend").css("width", "")) : (this.node.css("display", "none"), this.node.parents("div.stx-panel-legend").css("width", "0px")), e.I18N && e.I18N.translateUI(null, this.node[0]);
          function r(a, s) {
            return Array.from(a.querySelectorAll(s)).some(i);
          }
          function i(a) {
            for (; a;) {
              if (a.nodeName.toLowerCase() === "template") return !1;
              a = a.parentElement;
            }
            return !0;
          }
        }
        setContext(r) {
          if (!this.init) {
            var i = this;
            i.node.attr("cq-clone-to-panels") !== void 0 && (i.spawnPanelLegend(), r.stx.append("stackPanel", function (a, s) {
              i.spawnPanelLegend();
            })), this.begin();
          }
        }
        spawnPanelLegend() {
          var r = this.context.stx;
          function i(u) {
            return function (c) {
              u.classList.toggle("ciq-active");
            };
          }
          for (var a in r.panels) if (a != r.chart.panel.name) {
            var s = r.panels[a].subholder.querySelector(".stx-panel-legend");
            if (s) {
              var o = s.querySelector(this.nodeName);
              if (!o) {
                o = this.cloneNode(!0), o.setAttribute("cq-marker-label", this.getAttribute("cq-clone-to-panels")), o.removeAttribute("cq-clone-to-panels"), o.removeAttribute("cq-overlays-only"), o.removeAttribute("cq-marker"), e.UI.stxtap(o, i(o));
                var h = o.querySelector("cq-marker-label");
                h && h.remove();
                var l = document.createElement("cq-study-legend-fixed-wrapper");
                l.appendChild(o), s.appendChild(l), o.begin();
              }
            }
          }
        }
      }
      e.UI.addComponentDefinition("cq-study-legend", t);
    }
  },
  Yo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.BaseComponent {
      initialize(r) {
        this.params = r;
      }
      setColor(r) {
        if (this.params) {
          var i = {
            outputs: {}
          };
          i.outputs[this.params.output] = {}, i.outputs[this.params.output].color = r, this.params.studyDialog.updateStudy(i);
        }
      }
    }
    e.UI.addComponentDefinition("cq-study-output", t);
  },
  Xo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.DialogContentTag {
      initialize(r) {
        this.params = r;
      }
      setColor(r) {
        if (this.params) {
          var i = {
            parameters: {}
          };
          i.parameters[this.params.parameter] = r, this.params.studyDialog.updateStudy(i);
        }
      }
    }
    e.UI.addComponentDefinition("cq-study-parameter", t);
  },
  Ko = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends HTMLElement {
      constructor() {
        super(), this.defaultColor = null;
      }
      connectedCallback() {
        if (!this.attached) {
          if (this.attached = !0, this.getAttribute("cq-static")) {
            this.style.cursor = "default";
            return;
          }
          var r = this;
          e.UI.stxtap(this, function (i) {
            r.launchColorPicker(), i.stopPropagation();
          });
        }
      }
      getDefaultColor() {
        if (this.defaultColor) return this.defaultColor;
        var r = e.UI.getMyContext(this);
        return r ? r.stx.defaultColor : "transparent";
      }
      setColor(r, i, a) {
        var s = e.getBackgroundColor(this.parentNode),
          o = e.chooseForegroundColor(s),
          h = e.hsl(s);
        r == "auto" && (a = !0), r || (r = "transparent");
        var l = r;
        r == "auto" ? l = this.getDefaultColor() : r.indexOf("rgba(") === 0 && (l = (l.split(",").slice(0, 3).join(",") + ")").replace(/rgba/, "rgb"));
        var u = e.hsl(l),
          c = e.isTransparent(r);
        this.style.background = l, a || Math.abs(h[2] - u[2]) < 0.2 || c ? (this.style.border = "solid " + o + " 1px", c && (this.style.background = "linear-gradient(to bottom right, transparent, transparent 49%, " + o + " 50%, transparent 51%, transparent)")) : this.style.border = "", a && (s = e.chooseForegroundColor(l), this.style.background = "linear-gradient(to bottom right, " + l + ", " + l + " 49%, " + s + " 50%, " + s + ")"), i !== !1 && e.UI.containerExecute(this, "setColor", r, this);
      }
      launchColorPicker() {
        e.UI.containerExecute(this, "launchColorPicker");
        var r = document.querySelector("cq-color-picker");
        if (r) {
          r.callback = function (a) {
            return function (s) {
              a.setColor(s, null);
            };
          }(this);
          var i = this.getAttribute("cq-overrides");
          i && (i = i.split(",")), r.display({
            node: this,
            context: e.UI.getMyContext(this),
            overrides: i
          }), this.colorPicker = r;
        }
      }
    }
    e.UI.addComponentDefinition("cq-swatch", t);
  },
  Jo = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.ThemeHelper) console.error("themeDialog component requires first activating theme feature.");else {
      class t extends e.UI.DialogContentTag {
        applyChanges() {
          var r = this.context.stx;
          this.helper.update(r), r.changeOccurred("theme");
        }
        close() {
          this.helper.settings = this.revert, this.applyChanges(), super.close();
        }
        open(r) {
          this.addDefaultMarkup(), super.open(r);
          var i = r.themeName;
          this.initiatingMenu = r.initiatingMenu, this.context = r.context, this.helper = new e.ThemeHelper({
            stx: this.context.stx
          }), this.revert = e.clone(this.helper.settings);
          var a = this;
          function s(h, l, u, c) {
            var d = a.node.find("cq-theme-piece[cq-piece=\"" + h + "\"]");
            d.length && (d[0].piece = {
              obj: l,
              field: u
            }, c == "color" && d.find("cq-swatch")[0].setColor(l[u], !1));
          }
          var o = this.helper.settings;
          s("cu", o.chartTypes["Candle/Bar"].up, "color", "color"), s("cd", o.chartTypes["Candle/Bar"].down, "color", "color"), s("wu", o.chartTypes["Candle/Bar"].up, "wick", "color"), s("wd", o.chartTypes["Candle/Bar"].down, "wick", "color"), s("bu", o.chartTypes["Candle/Bar"].up, "border", "color"), s("bd", o.chartTypes["Candle/Bar"].down, "border", "color"), s("lc", o.chartTypes.Line, "color", "color"), s("mb", o.chartTypes.Mountain, "basecolor", "color"), s("mc", o.chartTypes.Mountain, "color", "color"), s("bg", o.chart.Background, "color", "color"), s("gl", o.chart["Grid Lines"], "color", "color"), s("dd", o.chart["Grid Dividers"], "color", "color"), s("at", o.chart["Axis Text"], "color", "color"), i || (i = "My Theme"), this.node.find("cq-action input").val(i);
        }
        save() {
          var r = this.node.find("cq-action input").val(),
            i = {
              settings: e.clone(this.helper.settings),
              name: r,
              builtIn: null
            };
          e.UI.contextsForEach(function () {
            this.stx.updateListeners("theme");
          });
          var a = this;
          document.querySelectorAll("cq-themes").forEach(function (s) {
            i.builtIn = s.currentLoadedBuiltIn, s.addCustom(i, a.initiatingMenu);
          }), super.close();
        }
        setValue(r, i, a) {
          r[i] = a, this.applyChanges();
        }
      }
      t.markup = `
		<h4 class="title">Create Custom Theme</h4>
		<cq-close></cq-close>
		<cq-scroll cq-no-maximize>
			<cq-section>
				<cq-placeholder>Candle Color
					<cq-theme-piece cq-piece="cu"><cq-swatch cq-overrides="Hollow"></cq-swatch></cq-theme-piece>
					<cq-theme-piece cq-piece="cd"><cq-swatch cq-overrides="Hollow"></cq-swatch></cq-theme-piece>
				</cq-placeholder>
				<cq-placeholder>Candle Wick
					<cq-theme-piece cq-piece="wu"><cq-swatch></cq-swatch></cq-theme-piece>
					<cq-theme-piece cq-piece="wd"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-placeholder>
				<cq-placeholder>Candle Border
					<cq-theme-piece cq-piece="bu"><cq-swatch cq-overrides="No Border"></cq-swatch></cq-theme-piece>
					<cq-theme-piece cq-piece="bd"><cq-swatch cq-overrides="No Border"></cq-swatch></cq-theme-piece>
				</cq-placeholder>
				<cq-separator></cq-separator>
				<cq-placeholder>Line/Bar Chart
					<cq-theme-piece cq-piece="lc"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-placeholder>
				<cq-separator></cq-separator>
				<cq-placeholder>Mountain Base
					<cq-theme-piece cq-piece="mb"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-placeholder>
				<cq-placeholder>Mountain Peak
					<cq-theme-piece cq-piece="mc"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-placeholder>
			</cq-section>
			<cq-section>
				<cq-placeholder>Background
					<cq-theme-piece cq-piece="bg"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-placeholder>
				<cq-placeholder>Grid Lines
					<cq-theme-piece cq-piece="gl"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-placeholder>
				<cq-placeholder>Date Dividers
					<cq-theme-piece cq-piece="dd"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-placeholder>
				<cq-placeholder>Axis Text<cq-theme-piece cq-piece="at"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-placeholder>
			</cq-section>
			<cq-action>
				<input><div stxtap="save()" class="ciq-btn">Save</div>
			</cq-action>
		</cq-scroll>
	`, e.UI.addComponentDefinition("cq-theme-dialog", t);
    }
  },
  el = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.BaseComponent {
      setBoolean(r) {
        e.UI.containerExecute(this, "setValue", this.piece.obj, this.piece.field, r);
      }
      setColor(r) {
        (r == "Hollow" || r == "No Border") && (r = "transparent", this.node.find("cq-swatch")[0].setColor("transparent", !1)), e.UI.containerExecute(this, "setValue", this.piece.obj, this.piece.field, r);
      }
    }
    e.UI.addComponentDefinition("cq-theme-piece", t);
  },
  tl = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      connectedCallback() {
        this.attached || super.connectedCallback();
      }
      setContext({
        config: r
      }) {
        if (!r) return;
        const {
            chartId: i,
            themes: {
              builtInThemes: a,
              defaultTheme: s
            }
          } = r,
          o = r.themes.nameValueStore || r.nameValueStore;
        this.initialize({
          builtInThemes: a,
          defaultTheme: s,
          nameValueStore: o,
          id: i
        });
      }
      addCustom(r, i) {
        this.params.customThemes[r.name] = r, i === this && (this.currentTheme = r.name), this.configureMenu(), this.persist();
      }
      configureMenu() {
        function r(c, d) {
          return function (f) {
            c.loadBuiltIn(d), c.params.callback && c.params.callback({
              theme: c.currentTheme
            }), c.persist("current");
          };
        }
        function i(c, d) {
          return function (f) {
            c.loadCustom(d), c.params.callback && c.params.callback({
              theme: c.currentTheme
            }), c.persist("current");
          };
        }
        this.builtInMenu.children(":not(template)").remove(), this.customMenu.children(":not(template)").remove();
        var a,
          s,
          o = this.params.builtInThemes;
        for (var h in o) a = o[h], s = e.UI.makeFromTemplate(this.builtInTemplate), s.text(a), this.makeTap(s[0], r(this, h)), this.builtInMenu.append(s);
        if (e.I18N && e.I18N.translateUI(null, this.builtInMenu[0]), this.customMenu.length && this.customTemplate.length) {
          var l = this.params.customThemes;
          for (var u in l) a = u, s = e.UI.makeFromTemplate(this.customTemplate), s.find("cq-label").text(a), this.makeTap(s.find("cq-item")[0], i(this, u)), s[0].close = function (c, d) {
            return function () {
              c.removeTheme(d);
            };
          }(this, u), this.customMenu.append(s);
        }
      }
      initialize(r) {
        if (this.initialized) return;
        this.initialized = !0, this.addDefaultMarkup(), this.selectTemplates(this), this.params = {}, r && (this.params = r);
        const i = o => typeof o == "function";
        e.ensureDefaults(this.params, {
          customThemes: {},
          builtInThemes: {},
          nameValueStore: e.NameValueStore && new e.NameValueStore()
        }), this.params.id && (this.id = "themes_" + this.params.id);
        let a = this,
          {
            nameValueStore: s
          } = this.params;
        s ? (i(s) && (s = this.params.nameValueStore = new s()), s.get("CIQ.Themes.prototype.custom", (o, h) => {
          !o && h && (a.params.customThemes = h), s.get(a.id + "CIQ.Themes.prototype.current", (l, u) => {
            !l && u && u.theme ? a.loadTheme(u.theme) : a.loadTheme(a.params.defaultTheme), a.configureMenu();
          });
        })) : this.loadTheme(a.params.defaultTheme);
      }
      loadBuiltIn(r) {
        this.currentLoadedBuiltIn && this.context.topNode.classList.remove(this.currentLoadedBuiltIn), this.context.topNode.classList.add(r), this.currentLoadedBuiltIn = this.currentTheme = r, this.reinitializeChart();
      }
      loadCustom(r) {
        this.currentLoadedBuiltIn && this.context.topNode.classList.remove(this.currentLoadedBuiltIn);
        var i = this.params.customThemes[r];
        i.builtIn && this.context.topNode.classList.add(i.builtIn), this.currentLoadedBuiltIn = i.builtIn, this.currentTheme = i.name, this.reinitializeChart(i);
      }
      loadTheme(r) {
        this.params.customThemes[r] ? this.loadCustom(r) : this.params.builtInThemes[r] ? this.loadBuiltIn(r) : this.loadBuiltIn(this.params.defaultTheme);
      }
      newTheme() {
        const {
          context: r
        } = this;
        r.config ? this.channelWrite(r.config.channels.dialog, {
          type: "theme",
          params: {
            context: r,
            initiatingMenu: this
          }
        }, r.stx) : document.querySelector("cq-theme-dialog").open({
          context: this.context,
          initiatingMenu: this
        });
      }
      persist(r) {
        this.params.nameValueStore && ((!r || r == "current") && this.params.nameValueStore.set(this.id + "CIQ.Themes.prototype.current", {
          theme: this.currentTheme
        }), (!r || r == "custom") && this.params.nameValueStore.set("CIQ.Themes.prototype.custom", this.params.customThemes));
      }
      removeTheme(r) {
        var i = !1;
        document.querySelectorAll("cq-themes").forEach(function (a) {
          delete a.params.customThemes[r], a.configureMenu(), i || (a.persist(), i = !0);
        });
      }
      selectTemplates() {
        this.builtInMenu || (this.builtInMenu = this.node.find("cq-themes-builtin"), this.builtInTemplate = this.builtInMenu.find("template"), this.customMenu = this.node.find("cq-themes-custom"), this.customTemplate = this.customMenu.find("template"));
      }
      reinitializeChart(r) {
        this.context.stx.setThemeSettings && this.context.stx.setThemeSettings(r ? r.settings : null);
      }
    }
    t.markup = `
		<cq-themes-builtin cq-no-close>
			<template>
				<cq-item></cq-item>
			</template>
		</cq-themes-builtin>
		<cq-themes-custom cq-no-close>
			<template>
				<cq-theme-custom>
					<cq-item>
						<cq-label></cq-label>
						<cq-close></cq-close>
					</cq-item>
				</cq-theme-custom>
			</template>
		</cq-themes-custom>
		<cq-item stxtap="newTheme()"><cq-plus></cq-plus>New Theme</cq-item>
	`, e.UI.addComponentDefinition("cq-themes", t);
  },
  il = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.timeZoneMap) console.error("timezoneDialog component requires first activating timezone feature.");else {
      class t extends e.UI.DialogContentTag {
        open(r) {
          this.addDefaultMarkup(), super.open(r);
          var i = this.node,
            a = this;
          this.context = r.context;
          var s = this.context.stx;
          function o(x) {
            return function (y) {
              a.close();
              var b = e.timeZoneMap[x];
              e.ChartEngine.defaultDisplayTimeZone = b, s.setTimeZone(s.dataZone, b), s.chart.symbol && s.draw();
            };
          }
          var h = i.find("ul, .ciq-ul"),
            l = i.find(".ciq-btn");
          this.template || (this.template = h.find("li.timezoneTemplate")[0].cloneNode(!0)), h.empty();
          for (var u in e.timeZoneMap) {
            var c = u,
              d = s.translateIf(c),
              f = this.template.cloneNode(!0);
            f.style.display = "block", f.innerHTML = d, e.safeClickTouch(f, o(c)), h.append(f);
          }
          var g = i.find(".currentUserTimeZone");
          if (s.displayZone) {
            var p = s.displayZone;
            for (var m in e.timeZoneMap) e.timeZoneMap[m] === s.displayZone && (p = m);
            g.text(s.translateIf("Current Timezone is") + " " + s.translateIf(p)), l.show();
          } else g.text(s.translateIf("Your timezone is your current location")), l.hide();
        }
        removeTimezone() {
          e.ChartEngine.defaultDisplayTimeZone = null;
          var r = this.context.stx;
          r.displayZone = null, r.setTimeZone(), r.displayInitialized && r.draw(), this.close();
        }
      }
      t.markup = `
		<h4 class="title">Choose Timezone</h4>
		<cq-close></cq-close>

		<p>To set your timezone use the location button below, or scroll through the following list...</p>
		<p class="currentUserTimeZone"></p>
		<div class="detect">
			<div class="ciq-btn" stxtap="removeTimezone()">Use My Current Location</div>
		</div>
		<div class="timezoneDialogWrapper" style="max-height:360px; overflow: hidden;">
			<cq-scroll cq-no-maximize class="ciq-ul" style="height:360px;">
				<li class="timezoneTemplate" style="display:none;cursor:pointer;"></li>
			</cq-scroll>
		</div>
		<div class="instruct">(Scroll for more options)</div>
	`, e.UI.addComponentDefinition("cq-timezone-dialog", t);
    }
  },
  rl = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      constructor() {
        super(), this.params = {
          member: null,
          obj: null,
          action: "class",
          value: "active",
          toggles: [],
          classes: {},
          callbacks: []
        };
      }
      disconnectedCallback() {
        e.UI.unobserveProperty(this.params.member, this.params.obj, this.listener), super.disconnectedCallback();
      }
      begin() {
        const r = this,
          {
            stx: i
          } = this.context;
        this.params.member && (this.listener = function (a) {
          r.updateFromBinding(r.params);
        }, e.UI.observeProperty(r.params.member, r.params.obj, this.listener)), e.UI.stxtap(this, function () {
          var a = r.params.toggles,
            s = r.params.obj;
          if (a.length > 1) {
            for (var o = 0; o < a.length; o++) {
              var h = a[o];
              if (r.currentValue == h) {
                o < a.length - 1 ? r.set(a[o + 1]) : r.set(a[0]);
                break;
              }
            }
            o == a.length && r.set(a[0]);
          } else r.currentValue ? r.set(!1) : r.set(!0);
          i.draw(), s === i.layout && i.changeOccurred("layout"), s === i.preferences && i.changeOccurred("preferences");
        });
      }
      registerCallback(r, i) {
        i !== !1 && (i = !0), this.params.callbacks.push(r), i && r.call(this, this.currentValue);
      }
      set(r) {
        if (this.isInfoToggle) return this.parentElement.set(r);
        if (this.params.member) this.params.obj[this.params.member] = r;else {
          this.currentValue = r;
          for (var i = 0; i < this.params.callbacks.length; i++) this.params.callbacks[i].call(this, this.currentValue);
        }
        this.updateClass();
      }
      setContext({
        config: r
      }) {
        this.currentValue |= !1, this.params.obj = this.context.stx.layout;
        var i = this.node.attr("cq-member");
        if (i == "headsUp" && this.wrapInInfoToggle(), r && r.channels && r.channels[i] && (i = r.channels[i]), i && i.indexOf(".") !== -1) {
          var a = i.split(".");
          this.params.obj = this.context.stx[a[0]], typeof this.params.obj > "u" && (this.context.stx[a[0]] = this.params.obj = {}), i = a[1];
        }
        i && (this.params.member = i);
        var s = this.node.attr("cq-action");
        s && (this.params.action = s);
        var o = this.node.attr("cq-value");
        o && (this.params.value = o);
        var h = this.node.attr("cq-toggles");
        h && (this.params.toggles = h.split(","));
        for (var l = 0; l < this.params.toggles.length; l++) {
          h = this.params.toggles;
          var u = h[l];
          u === "null" ? h[l] = null : u === "true" || u === "false" ? h[l] = u === "true" : isNaN(Number(u)) || (h[l] = Number(u));
        }
        var c = this.node.attr("cq-toggle-classes");
        if (c) {
          var d = c.split(/, |,/);
          this.params.removeClasses = c.split(/, | |,/).filter(f => f), this.params.classes = this.params.toggles.reduce(function (f, g, p) {
            return f[g] = d[p].split(/ /), f;
          }, {});
        }
        if (i && this.params.obj[i] === void 0) {
          const f = h && h.length ? h[h.length - 1] : !1;
          this.params.obj[i] = f;
        }
        this.begin();
      }
      updateFromBinding(r) {
        if (this.currentValue = this.isInfoToggle ? this.parentElement.getCurrentValue(r) : r.obj[r.member], !this.params.callbacks.length) this.params.action == "class" && (this.currentValue ? this.node.addClass(this.params.value) : this.node.removeClass(this.params.value));else for (var i = 0; i < this.params.callbacks.length; i++) this.params.callbacks[i].call(this, this.currentValue);
        this.updateClass(), r.member == "crosshair" && this.currentValue === !1 && this.context.stx.doDisplayCrosshairs();
      }
      updateClass() {
        const {
          removeClasses: r,
          classes: i
        } = this.params;
        if (!(!r || this.currentValue === void 0) && (this.classList.remove(...r), i[this.currentValue][0])) {
          let a = i[this.currentValue];
          this.classList.add(...a);
        }
      }
      wrapInInfoToggle() {
        if (!this.closest("cq-info-toggle, cq-info-toggle-dropdown")) {
          var r = document.createElement("cq-info-toggle");
          this.parentNode.replaceChild(r, this), r.appendChild(this);
        }
      }
    }
    e.UI.addComponentDefinition("cq-toggle", t);
  },
  al = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    if (!e.Drawing) console.error("toolbar component requires first activating drawing feature.");else {
      class t extends e.UI.ContextTag {
        connectedCallback() {
          this.attached || (super.connectedCallback(), this.params = {
            toolSelection: this.node.find("*[cq-current-tool]"),
            lineSelection: this.node.find("*[cq-line-style]"),
            fontSizeSelection: this.node.find("*[cq-font-size]"),
            fontFamilySelection: this.node.find("*[cq-font-family]"),
            fontStyleToggle: this.node.find("cq-annotation-italic"),
            fontWeightToggle: this.node.find("cq-annotation-bold"),
            axisLabelToggle: this.node.find("cq-axis-label .ciq-checkbox"),
            fillColor: this.node.find("cq-fill-color").not("cq-cvp-controller"),
            lineColor: this.node.find("cq-line-color").not("cq-cvp-controller"),
            cvpControllers: this.node.find("cq-cvp-controller")
          }, this.params.cvpControllers.prop("toolbar", this), this.noToolSelectedText = "");
        }
        clearDrawings() {
          this.context.stx.clearDrawings(null, !1);
        }
        crosshairs(r) {
          var i = e.UI.$(r.node),
            a = this.context.stx;
          this.params.toolSelection.html(i.html()), a.changeVectorType(null), a.layout.crosshair = !0, a.doDisplayCrosshairs(), a.findHighlights(!1, !0), a.changeOccurred("layout"), a.draw(), a.updateChartAccessories(), this.node.find("*[cq-section]").removeClass("ciq-active"), this.emit();
        }
        defaultElements(r) {
          var i = [];
          for (var a in r) a == "color" ? i.push("cq-line-color") : a == "fillColor" ? i.push("cq-fill-color") : a == "pattern" || a == "lineWidth" ? i.push("cq-line-style") : a == "axisLabel" ? i.push("cq-axis-label") : a == "font" ? i.push("cq-annotation") : a == "parameters" && i.push("cq-clickable");
          return i;
        }
        dirty(r) {
          this.node.find("*[cq-toolbar-dirty]")[r === !1 ? "removeClass" : "addClass"]("ciq-active");
        }
        emit() {
          var r = new Event("change", {
            bubbles: !0,
            cancelable: !0
          });
          this.dirty(), this.dispatchEvent(r);
        }
        getFillColor(r) {
          var i = e.UI.$(r.node),
            a = this.context.stx.currentVectorParameters.fillColor;
          (a == "transparent" || a == "auto") && (a = ""), i.css({
            background: a
          });
          var s = e.getBackgroundColor(this.parentNode);
          if (a && Math.abs(e.hsl(s)[2] - e.hsl(a)[2]) < 0.2) {
            var o = e.chooseForegroundColor(s);
            i.css({
              border: "solid " + o + " 1px"
            });
          } else i.css({
            border: ""
          });
        }
        getLineColor(r) {
          var i = e.UI.$(r.node),
            a = this.context.stx.currentVectorParameters.currentColor;
          (a == "transparent" || a == "auto") && (a = ""), i.css({
            background: a
          });
          var s = e.getBackgroundColor(this.parentNode);
          if (!a || Math.abs(e.hsl(s)[2] - e.hsl(a)[2]) < 0.2) {
            var o = e.chooseForegroundColor(s);
            i.css({
              border: "solid " + o + " 1px"
            }), a || i.css({
              background: "linear-gradient(to bottom right, " + o + ", " + o + " 49%, " + s + " 50%, " + s + ")"
            });
          } else i.css({
            border: ""
          });
        }
        noTool() {
          var r = this.context.stx;
          r.changeVectorType(null), r.layout.crosshair && (r.layout.crosshair = !1, r.changeOccurred("layout"), r.doDisplayCrosshairs()), r.preferences.magnet && this.toggleMagnet(this), this.params.toolSelection.text(this.noToolSelectedText), this.params.toolSelection.attr("cq-current-tool", ""), this.node.find("*[cq-section]").removeClass("ciq-active"), this.emit();
        }
        pickFillColor(r) {
          var i = e.UI.$(r.node),
            a = document.querySelector("cq-color-picker");
          if (!a) {
            console.log("DrawingToolbar.prototype.pickFillColor: no ColorPicker available");
            return;
          }
          var s = this;
          a.callback = function (o) {
            s.context.stx.currentVectorParameters.fillColor = o, s.getFillColor({
              node: i
            }), s.emit();
          }, a.display({
            node: i,
            context: this.context
          });
        }
        pickLineColor(r) {
          var i = e.UI.$(r.node),
            a = document.querySelector("cq-color-picker");
          if (!a) {
            console.log("DrawingToolbar.prototype.pickLineColor: no ColorPicker available");
            return;
          }
          var s = this;
          a.callback = function (h) {
            s.context.stx.currentVectorParameters.currentColor = h, s.getLineColor({
              node: i
            }), s.emit();
          };
          var o = i.attr("cq-overrides");
          o && (o = o.split(",")), a.display({
            node: i,
            context: this.context,
            overrides: o
          });
        }
        restoreDefaultConfig(r, i) {
          var a = this.context.stx;
          e.Drawing.restoreDefaultConfig(a, a.currentVectorParameters.vectorType, i), this.node.find("*[cq-toolbar-action='restore']").removeClass("ciq-active"), this.sync(), this.dirty(!1);
        }
        saveConfig() {
          var r = this.context.stx;
          e.Drawing.saveConfig(r, r.currentVectorParameters.vectorType), this.node.find("*[cq-toolbar-action='restore']").addClass("ciq-active"), this.sync(), this.dirty(!1);
        }
        setFibs(r, i) {
          var a = this.context.stx.currentVectorParameters.fibonacci;
          if (a) {
            for (var s = 0; s < a.fibs.length; s++) a.fibs[s].parameters.lineWidth = r, a.fibs[s].parameters.pattern = i;
            a.timezone.parameters.lineWidth = r, a.timezone.parameters.pattern = i;
          }
        }
        setFontFamily(r, i) {
          var a = this.context.stx;
          a.currentVectorParameters.annotation && (i == "Default" ? a.currentVectorParameters.annotation.font.family = null : a.currentVectorParameters.annotation.font.family = i), this.params.fontFamilySelection.text(i), this.emit();
        }
        setFontSize(r, i) {
          var a = this.context.stx;
          a.currentVectorParameters.annotation && (a.currentVectorParameters.annotation.font.size = i), this.params.fontSizeSelection.text(i), this.emit();
        }
        setContext(r) {
          this.noToolSelectedText = this.params.toolSelection.text(), this.sync(), this.dirty(!1);
          var i = this;
          this.eventListeners.push(r.stx.addEventListener("theme", function (a) {
            var s = i.node.find("*[cq-toolbar-dirty]").hasClass("ciq-active");
            i.sync(), s || i.dirty(!1);
          }));
        }
        setLine(r, i, a) {
          var s = this.context.stx;
          s.currentVectorParameters.lineWidth = i, s.currentVectorParameters.pattern = a, this.setFibs(i, a), this.currentLineSelectedClass && this.params.lineSelection.removeClass(this.currentLineSelectedClass), this.currentLineSelectedClass = "ciq-" + a + "-" + parseInt(i, 10), a == "none" ? this.currentLineSelectedClass = null : this.params.lineSelection.addClass(this.currentLineSelectedClass), this.emit();
        }
        sync(r) {
          var i = this.context.stx;
          r ? i.currentVectorParameters = e.extend(i.currentVectorParameters || {}, r) : r = i.currentVectorParameters;
          var a = this.params;
          this.setLine(null, r.lineWidth, r.pattern);
          var s = i.canvasStyle("stx_annotation"),
            o = r.annotation && r.annotation.font,
            h = o && o.size || s.fontSize;
          this.setFontSize(null, h);
          var l = o && o.family || s.fontFamily;
          this.setFontFamily(null, l);
          var u = o && o.style || s.fontStyle;
          a.fontStyleToggle[u === "italic" ? "addClass" : "removeClass"]("ciq-active");
          var c = o && o.weight || s.fontWeight;
          a.fontWeightToggle[c === "bold" || c >= 700 ? "addClass" : "removeClass"]("ciq-active"), a.axisLabelToggle[r.axisLabel ? "addClass" : "removeClass"]("ciq-active"), this.getFillColor({
            node: a.fillColor
          }), this.getLineColor({
            node: a.lineColor
          }), a.cvpControllers.each(function () {
            this.sync(r);
          });
        }
        toggleAxisLabel(r) {
          var i = this.context.stx,
            a = e.UI.$(r.node);
          i.currentVectorParameters.axisLabel === !0 ? (i.currentVectorParameters.axisLabel = !1, a.removeClass("ciq-active")) : (i.currentVectorParameters.axisLabel = !0, a.addClass("ciq-active")), this.emit();
        }
        toggleFontStyle(r, i) {
          var a = this.context.stx,
            s = e.UI.$(r.node);
          i == "italic" ? a.currentVectorParameters.annotation.font.style == "italic" ? (a.currentVectorParameters.annotation.font.style = null, s.removeClass("ciq-active")) : (a.currentVectorParameters.annotation.font.style = "italic", s.addClass("ciq-active")) : i == "bold" && (a.currentVectorParameters.annotation.font.weight == "bold" ? (a.currentVectorParameters.annotation.font.weight = null, s.removeClass("ciq-active")) : (a.currentVectorParameters.annotation.font.weight = "bold", s.addClass("ciq-active"))), this.emit();
        }
        toggleMagnet(r) {
          var i = e.UI.$(r.node),
            a = this.context.stx;
          a.preferences.magnet ? (i.removeClass("active"), a.preferences.magnet = !1) : (i.addClass("active"), a.preferences.magnet = !0), e.clearCanvas(a.chart.tempCanvas, a);
        }
        tool(r, i) {
          var a = e.UI.$(r.node);
          if (i || (i = a.getAttribute("cq-tool")), !!i) {
            var s = this.context.stx;
            s.clearMeasure(), s.changeVectorType(i), this.params.toolSelection.html(a.html()), this.params.toolSelection.attr("cq-current-tool", i), this.node.find("*[cq-section]").removeClass("ciq-active");
            var o = !this.node.find("*[cq-toolbar-dirty]").hasClass("ciq-active"),
              h = e.Drawing.getDrawingParameters(s, i);
            if (h) {
              this.node.find("*[cq-toolbar-action='save']").addClass("ciq-active");
              var l = s.preferences.drawings;
              l && l[i] && (this.node.find("*[cq-toolbar-action='restore']").addClass("ciq-active"), o = !0), i === "fibtimezone" && delete h.parameters;
              var u = this.params.lineSelection.parent().find(".ciq-none");
              u.hide();
              for (var c = this.defaultElements(h), d = 0; d < c.length; d++) this.node.find(c[d]).addClass("ciq-active"), c[d] == "cq-fill-color" && u.show();
              for (c = e.Drawing[i].prototype.$controls, d = 0; c && d < c.length; d++) this.node.find(c[d]).addClass("ciq-active");
            }
            this.sync(), o && this.dirty(!1);
          }
        }
      }
      e.UI.addComponentDefinition("cq-toolbar", t);
    }
  },
  nl = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      constructor() {
        super(), this.redoButton = null, this.undostack = [], this.redostack = [], this.contexts = [];
      }
      connectedCallback() {
        if (!this.attached) {
          super.connectedCallback();
          var r = this;
          e.UI.stxtap(this, function () {
            r.undo();
          });
        }
      }
      clear(r) {
        this.setButtonStyle();
      }
      handleEvent(r, i, a) {
        this.undostack.push({
          context: r,
          drawings: a.before
        }), this.redostack = [], this.setButtonStyle();
      }
      keyStroke(r, i, a, s) {
        if (i == "z" && (s.ctrl || s.cmd)) return s.shift ? this.redo() : this.undo(), !0;
        if (i == "y" && (s.ctrl || s.cmd)) return this.redo(), !0;
      }
      manageContext(r) {
        this.addClaim(this);
        var i = this;
        this.eventListeners.push(r.stx.addEventListener("undoStamp", function (a) {
          i.handleEvent(r, "undoStamp", a);
        })), this.contexts.push(r);
      }
      redo() {
        var r = this.redostack.pop();
        if (r) {
          var i = r.context;
          this.undostack.push({
            context: i,
            drawings: i.stx.exportDrawings()
          });
          var a = r.drawings;
          i.stx.abortDrawings(!0), i.stx.importDrawings(a), i.stx.changeOccurred("vector"), i.stx.draw();
        }
        this.setButtonStyle();
      }
      setButtonStyle() {
        this.undostack.length ? this.node.attr("cq-active", "true") : this.node.removeAttr("cq-active"), this.redoButton && (this.redostack.length ? this.redoButton.setAttribute("cq-active", "true") : this.redoButton.removeAttribute("cq-active"));
      }
      setContext(r) {
        this.manageContext(this.context);
        var i = this;
        this.addInjection("append", "initializeChart", function () {
          i.undostack = [], i.redostack = [], i.clear();
        });
      }
      undo() {
        for (var r = !1, i = 0; i < this.contexts.length; i++) this.contexts[i].stx.activeDrawing && (this.contexts[i].stx.undo(), r = !0);
        if (!r) {
          var a = this.undostack.pop();
          if (a) {
            var s = a.context;
            this.redostack.push({
              context: s,
              drawings: s.stx.exportDrawings()
            });
            var o = a.drawings;
            s.stx.abortDrawings(!0), s.stx.importDrawings(o), s.stx.changeOccurred("vector"), s.stx.draw();
          }
          this.setButtonStyle();
        }
      }
    }
    e.UI.addComponentDefinition("cq-undo", t);
  },
  sl = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.DialogContentTag {
      open(r) {
        this.addDefaultMarkup(), this.querySelector("input").value = "", super.open(r);
      }
      save() {
        var r = this.node.find("input").val();
        if (r) {
          var i = !1,
            a = this.context.stx.exportLayout();
          document.querySelectorAll("cq-views").forEach(function (s) {
            for (var o = s.params.viewObj, h, l = 0; l < o.views.length && (h = o.views[l], r != e.first(h)); l++);
            l == o.views.length && (h = {}, h[r] = {}, o.views.push(h)), h[r] = a, delete h[r].candleWidth, s.renderMenu(), i || (i = !0, s.params.nameValueStore && s.params.nameValueStore.set("stx-views", o.views));
          }), this.close();
        }
      }
    }
    t.markup = `
		<h4>Save View</h4>
		<div stxtap="close()" class="ciq-icon ciq-close"></div>
		<div style="text-align:center;margin-top:10px;">
		<i>Enter name of view:</i>
		<p>
			<input spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="none" maxlength="40" placeholder="Name"><br>
		</p>
		<span class="ciq-btn" stxtap="save()">Save</span>
		</div>
	`, e.UI.addComponentDefinition("cq-view-dialog", t);
  },
  ol = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      initialize(r) {
        this.params = Object.assign({}, r);
        const {
          config: i
        } = this.context;
        let {
          nameValueStore: a
        } = i;
        e.ensureDefaults(this.params, {
          viewObj: {
            views: []
          },
          nameValueStore: a && new a() || e.NameValueStore && new e.NameValueStore(),
          template: "template[cq-view]"
        }), this.params.template = this.querySelector(this.params.template), this.params.template.remove();
        var s = this;
        this.params.nameValueStore && this.params.nameValueStore.get("stx-views", function (o, h) {
          !o && h && (s.params.viewObj.views = h), s.params.cb && s.params.cb.call(s), s.renderMenu();
        });
      }
      connectedCallback() {
        super.connectedCallback(), this.addDefaultMarkup();
      }
      setContext({
        config: r
      }) {
        r && r.menuViewConfig && this.initialize(r.menuViewConfig);
      }
      renderMenu() {
        var r = this.node,
          i = this,
          a = i.context.stx;
        function s(g) {
          return function (p) {
            p.stopPropagation();
            var m = !1;
            document.querySelectorAll("cq-views").forEach(function (x) {
              x.params.viewObj.views.splice(g, 1), m || (x.params.nameValueStore && x.params.nameValueStore.set("stx-views", i.params.viewObj.views), m = !0), x.renderMenu();
            });
          };
        }
        function o(g) {
          return function (p) {
            p.stopPropagation(), i.uiManager.closeMenu(), i.context.loader && i.context.loader.show();
            var m = e.first(i.params.viewObj.views[g]);
            function x() {
              var y = function () {
                a.changeOccurred("layout"), i.context.loader && i.context.loader.hide();
              };
              a.importLayout(i.params.viewObj.views[g][m], {
                managePeriodicity: !0,
                preserveTicksAndCandleWidth: !0,
                cb: y
              });
            }
            setTimeout(x, 10);
          };
        }
        r.find("cq-views-content cq-item").remove();
        for (var h = 0; h < this.params.viewObj.views.length; h++) {
          var l = e.first(i.params.viewObj.views[h]);
          if (l != "recent") {
            var u = e.UI.makeFromTemplate(this.params.template),
              c = u.find("cq-label"),
              d = u.find("div");
            c.length && (c.addClass("view-name-" + l), c.text(l)), d.length && e.UI.stxtap(d[0], s(h)), this.makeTap(u[0], o(h)), r.find("cq-views-content").append(u);
          }
        }
        var f = r.find("cq-view-save");
        if (f) {
          const {
              context: g
            } = this,
            p = this;
          this.makeTap(f.find("cq-item")[0], function (m) {
            g.config ? p.channelWrite(g.config.channels.dialog, {
              type: "view",
              params: {
                context: g
              }
            }) : document.querySelector("cq-view-dialog").open({
              context: g
            });
            const x = e.UI.getUIManager();
            x && x.closeMenu();
          });
        }
        this.params.renderCB && this.params.renderCB(r);
      }
    }
    t.markup = `
		<cq-heading>Saved Views</cq-heading>
		<cq-views-content>
			<template cq-view>
				<cq-item>
					<cq-label></cq-label>
					<div class="ciq-icon ciq-close"></div>
				</cq-item>
			</template>
		</cq-views-content>
		<cq-separator cq-partial></cq-separator>
		<cq-view-save>
			<cq-item><cq-plus></cq-plus>Save View</cq-item>
		</cq-view-save>
	`, e.UI.addComponentDefinition("cq-views", t);
  },
  ll = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    class t extends e.UI.ContextTag {
      static get observedAttributes() {
        return ["corrective", "decoration", "impulse", "show-lines"];
      }
      get corrective() {
        return this.getAttribute("corrective");
      }
      set corrective(r) {
        r ? this.setAttribute("corrective", r.join(" ")) : this.removeAttribute("corrective");
      }
      get decoration() {
        return this.getAttribute("decoration");
      }
      set decoration(r) {
        r ? this.setAttribute("decoration", r) : this.removeAttribute("decoration");
      }
      get impulse() {
        return this.getAttribute("impulse");
      }
      set impulse(r) {
        r ? this.setAttribute("impulse", r.join(" ")) : this.removeAttribute("impulse");
      }
      get showLines() {
        return this.hasAttribute("show-lines");
      }
      set showLines(r) {
        r ? (this.setAttribute("show-lines", ""), this.lineToggleCheckbox.classList.add("ciq-active")) : this.removeAttribute("show-lines");
      }
      get template() {
        return this.getAttribute("template");
      }
      set template(r) {
        return this.setAttribute("template", r);
      }
      static templates() {
        return {
          "Grand Supercycle": {
            impulse: ["I", "II", "III", "IV", "V"],
            corrective: ["a", "b", "c"],
            decoration: "enclosed"
          },
          Supercycle: {
            impulse: ["I", "II", "III", "IV", "V"],
            corrective: ["a", "b", "c"],
            decoration: "parentheses"
          },
          Cycle: {
            impulse: ["I", "II", "III", "IV", "V"],
            corrective: ["a", "b", "c"],
            decoration: null
          },
          Primary: {
            impulse: ["1", "2", "3", "4", "5"],
            corrective: ["A", "B", "C"],
            decoration: "enclosed"
          },
          Intermediate: {
            impulse: ["1", "2", "3", "4", "5"],
            corrective: ["A", "B", "C"],
            decoration: "parentheses"
          },
          Minor: {
            impulse: ["1", "2", "3", "4", "5"],
            corrective: ["A", "B", "C"],
            decoration: null
          },
          Minute: {
            impulse: ["i", "ii", "iii", "iv", "v"],
            corrective: ["a", "b", "c"],
            decoration: "enclosed"
          },
          Minuette: {
            impulse: ["i", "ii", "iii", "iv", "v"],
            corrective: ["a", "b", "c"],
            decoration: "parentheses"
          },
          "Sub-Minuette": {
            impulse: ["i", "ii", "iii", "iv", "v"],
            corrective: ["a", "b", "c"],
            decoration: null
          }
        };
      }
      attributeChangedCallback(r, i, a) {
        if (!this.stx) return;
        let s = this.stx.currentVectorParameters,
          o = s.waveParameters || {},
          h;
        switch (r) {
          case "template":
            let l = this.templates[a];
            l && (h = {
              decoration: l.decoration
            });
            break;
          case "impulse":
            h = {
              impulse: a && a.split(" ")
            };
            break;
          case "corrective":
            h = {
              corrective: a && a.split(" ")
            };
            break;
          case "decoration":
            h = {
              decoration: a
            };
            break;
          case "show-lines":
            h = {
              showLines: this.showLines
            };
            break;
        }
        s.waveParameters = Object.assign(o, h);
      }
      constructor() {
        super(), this.templates = t.templates();
      }
      connectedCallback() {
        if (!this.attached) {
          this.template = "Grand Supercycle";
          var r = document.querySelector("template[cq-wave-parameters], template[cq-wave-parameters=\"true\"]");
          e.UI.makeFromTemplate(r, this), this.templateHeader = this.querySelector(".ciq-active-template"), this.impulseHeader = this.querySelector(".ciq-active-impulse"), this.correctiveHeader = this.querySelector(".ciq-active-corrective"), this.decorators = {
            blank: this.querySelector(".ciq-btn:nth-of-type(1n)"),
            parentheses: this.querySelector(".ciq-btn:nth-of-type(2n)"),
            enclosed: this.querySelector(".ciq-btn:nth-of-type(3n)")
          }, this.lineToggleCheckbox = this.querySelector("span.ciq-checkbox"), super.connectedCallback();
        }
      }
      disconnectedCallback() {
        super.disconnectedCallback();
      }
      activate() {
        this.stx && (this.cvp = this.stx.currentVectorParameters, this.update(null, "template", this.template), this.showLines = !0);
      }
      setContext() {
        this.stx = this.context.stx;
      }
      toggleLines() {
        let r = this.lineToggleCheckbox,
          i = r.classList.contains("ciq-active");
        this.showLines = !i, i ? r.classList.remove("ciq-active") : r.classList.add("ciq-active");
      }
      update(r, i, a) {
        if (i === "template") {
          this.template = a, this.templateHeader.innerHTML = a;
          let o = this.templates[this.template];
          if (o) {
            this.impulse = o.impulse, this.impulseHeader.innerHTML = o.impulse.join(" "), this.corrective = o.corrective, this.correctiveHeader.innerHTML = o.corrective.join(" ");
            for (let l in this.decorators) this.decorators[l].classList.remove("ciq-active");
            let h = o.decoration || "blank";
            this.decorators[h].classList.add("ciq-active"), this.decoration = h;
          } else this.cvp.waveParameters = {
            corrective: this.corrective.split(" "),
            impulse: this.impulse.split(" "),
            decoration: this.decoration
          };
        } else {
          if (i === "decoration") {
            for (let o in this.decorators) this.decorators[o].classList.remove("ciq-active");
            r.node.classList.add("ciq-active"), this.decoration = r.node.getAttribute("decoration");
          } else if (i !== "showLines") {
            let o = a && a.split(",");
            this[i] = o, this[i + "Header"].innerHTML = o ? o.join(" ") : "- - -";
          }
          this.templateHeader.innerHTML = this.template = "Custom";
        }
      }
    }
    e.UI.addComponentDefinition("cq-wave-parameters", t);
  },
  hl = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    const t = e.UI._webcomponents.list["cq-dialog"];
    if (!t) console.error("colorPicker component requires first activating dialog component.");else {
      class n extends t.classDefinition {
        constructor() {
          super(), this.params = {
            colorMap: [["#ffffff", "#e1e1e1", "#cccccc", "#b7b7b7", "#a0a0a5", "#898989", "#707070", "#626262", "#555555", "#464646", "#363636", "#262626", "#1d1d1d", "#000000"], ["#f4977c", "#f7ac84", "#fbc58d", "#fff69e", "#c4de9e", "#85c99e", "#7fcdc7", "#75d0f4", "#81a8d7", "#8594c8", "#8983bc", "#a187bd", "#bb8dbe", "#f29bc1"], ["#ef6c53", "#f38d5b", "#f8ae63", "#fff371", "#acd277", "#43b77a", "#2ebbb3", "#00bff0", "#4a8dc8", "#5875b7", "#625da6", "#8561a7", "#a665a7", "#ee6fa9"], ["#ea1d2c", "#ee652e", "#f4932f", "#fff126", "#8ec648", "#00a553", "#00a99c", "#00afed", "#0073ba", "#0056a4", "#323390", "#66308f", "#912a8e", "#e9088c"], ["#9b0b16", "#9e4117", "#a16118", "#c6b920", "#5a852d", "#007238", "#00746a", "#0077a1", "#004c7f", "#003570", "#1d1762", "#441261", "#62095f", "#9c005d"], ["#770001", "#792e03", "#7b4906", "#817a0b", "#41661e", "#005827", "#005951", "#003b5c", "#001d40", "#000e35", "#04002c", "#19002b", "#2c002a", "#580028"]]
          };
        }
        connectedCallback() {
          this.attached || (super.connectedCallback(), this.build());
        }
        build() {
          this.addDefaultMarkup();
          var i = this.node,
            a = i.attr("cq-colors");
          if (a) {
            a = a.split(",");
            var s = Math.ceil(Math.sqrt(a.length));
            this.params.colorMap = [];
            for (var o = 0, h = [], l = 0; l < a.length; l++) o >= s && (o = 0, this.params.colorMap.push(h), h = []), h.push(a[l]), o++;
            this.params.colorMap.push(h);
          }
          this.cqOverrides = i.find("cq-overrides"), this.template = this.cqOverrides.find("template"), this.initialize();
        }
        display(i) {
          var a = e.UI.$(i.node)[0],
            s = a.getBoundingClientRect();
          this.node.css({
            top: "0px",
            left: "0px"
          });
          var o = this.parentNode.getBoundingClientRect(),
            h = s.left - o.left + e.elementDimensions(a).width + 10,
            l = s.top - o.top + 5,
            u = e.elementDimensions(this),
            c = document.innerWidth,
            d = u.width;
          h + d > c && (h = c - d - 20);
          var f = document.innerHeight,
            g = u.height;
          l + g > f && (l = f - g - 20), this.node.css({
            left: h + "px",
            top: l + "px"
          }), this.cqOverrides.children(":not(template)").remove();
          var p = i.context || this.context || e.UI.getMyContext(this),
            m = function (C, k) {
              return function () {
                C.pickColor(k);
              };
            };
          if (i.overrides && this.template.length) for (var x = 0; x < i.overrides.length; x++) {
            var y = i.overrides[x],
              b = e.UI.makeFromTemplate(this.template, !0);
            p.stx && (y = p.stx.translateIf(y)), b.text(y), e.UI.stxtap(b[0], m(this, y));
          }
          this.classList.contains("stxMenuActive") ? p.e && p.e.stopPropagation() : this.open({
            context: p
          });
        }
        initialize() {
          var i = this;
          this.colors = this.node.find("cq-colors"), this.colors.length || (this.colors = this.node), this.colors.empty();
          function a(d, f) {
            return function () {
              d.pickColor(f);
            };
          }
          for (var s = 0; s < this.params.colorMap.length; s++) {
            var o = this.params.colorMap[s],
              h = document.createElement("ul");
            this.colors[0].appendChild(h);
            for (var l = 0; l < o.length; l++) {
              var u = document.createElement("li");
              h.appendChild(u);
              var c = document.createElement("span");
              u.appendChild(c), c.style.backgroundColor = o[l], e.UI.stxtap(c, a(i, o[l]));
            }
          }
        }
        pickColor(i) {
          this.callback && this.callback(i), this.close();
        }
        resize() {}
        setColors(i) {
          this.params.colorMap = i, this.initialize();
        }
      }
      n.markup = `
		<cq-colors></cq-colors>
		<cq-overrides>
			<template>
				<div class="ciq-btn"></div>
			</template>
		</cq-overrides>
	`, e.UI.addComponentDefinition("cq-color-picker", n);
    }
  },
  ul = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    const t = e.UI._webcomponents.list["cq-palette"];
    if (!t) console.error("drawingPalette component requires first activating palette component.");else if (!e.Drawing) console.error("drawingPalette component requires first activating drawing feature.");else {
      class n extends t.classDefinition {
        constructor() {
          super(), this.mode = "", this.callbacks = [], this.toolSettings = {
            favList: [],
            toolGroup: ""
          }, this.toolShortcuts = {};
        }
        setupKeyboardActivation(i) {
          if (typeof this.getAttribute("cq-keystroke-claim") < "u") {
            let a = this.context.topNode.querySelectorAll("*[cq-tool][cq-tool-shortcut]");
            for (let s = 0; s < a.length; s++) {
              let o = a[s].getAttribute("cq-tool-shortcut");
              if (/^[A-Za-z]{1}$/g.test(o)) {
                this.toolShortcuts[o.toUpperCase()] = {
                  toolName: a[s].getAttribute("cq-tool"),
                  node: a[s]
                };
                let h = a[s].querySelector("label"),
                  l = document.createElement("span");
                l.classList.add("shortcut"), l.innerHTML = " (Alt+" + o.toUpperCase() + ")", h.appendChild(l);
              } else console.warn("cq-tool-shortcut attribute must be a single letter: " + o + " ignored.");
            }
            this.addClaim(this);
          }
        }
        keyStroke(i, a, s, o) {
          if (s.altKey) {
            let h = String.fromCharCode(s.which).toUpperCase(),
              l = this.toolShortcuts[h];
            if (l) {
              const u = this.channels ? this.channels.drawing : "channel.drawing";
              this.channelWrite(u, !0), this.tool({
                node: l.node
              }, l.toolName);
            }
          } else if (s.key === "Escape") {
            let h = this.context.topNode.querySelector("*[cq-tool=\"notool\"]");
            h && this.noTool({
              node: h
            });
          }
        }
        handleMessage(i, a) {
          switch (i) {
            case "changeToolSettings":
              this.activateTool(a.activator, a.toolName);
              break;
            case "toggleDrawingPalette":
              this.togglePalette();
              break;
            case "hideDrawingPalette":
              this.hidePalette();
              break;
            case "dockWillResize":
              this.hidePalette();
              break;
            case "dockDidResize":
              this.resetScroller();
              break;
            case "context":
              a === "stop" && (this.toolContextMenu.style.display = "none");
          }
        }
        loadToolSettings() {
          if (this.store) {
            let i = this;
            this.store.get("CIQ.DrawingToolSettings", function (a, s) {
              !a && s && s.favList && (i.toolSettings = Object.assign(i.toolSettings, s));
            });
          }
        }
        storeToolSettings() {
          this.store && this.store.set("CIQ.DrawingToolSettings", JSON.stringify(this.toolSettings));
        }
        setContext(i) {
          const {
            config: a,
            stx: s
          } = i;
          if (a) {
            const {
              channels: o = {},
              nameValueStore: h
            } = a;
            this.store = h && new h() || e.NameValueStore && new e.NameValueStore(), this.addDefaultMarkup(this, this.getMarkup(a)), this.channels = {
              drawing: o.drawing || "channel.drawing"
            };
          }
          this.init(), this.loadToolSettings(), this.params = {
            toolGroupSelection: this.node.find("*[cq-tool-group-selection]")
          }, this.setFavorites(), this.setMode("grid"), this.setEvenOdd(), this.toolContextMenu = this.createContextMenu(), this.addEventListener("contextmenu", function (o) {
            if (o.preventDefault(), o.target.getAttribute("cq-tool-group") !== null) {
              let h = o.target.getBoundingClientRect(),
                l = this.getBoundingClientRect();
              this.showToolContextMenu(o.target.getAttribute("cq-tool"), h.top + h.height - l.top, h.left - l.left);
            }
          }.bind(this)), this.setupKeyboardActivation(), this.pairUndoRedo(), this.toolSettings.toolGroup && this.setToolGroup({
            node: this.querySelector("cq-item[cq-tool-group=\"" + this.toolSettings.toolGroup + "\"]")
          }, this.toolSettings.toolGroup), this.channels && this.channelSubscribe(this.channels.drawing || "channel.drawing", o => {
            o ? (this.resetScroller(), this.priorVectorType && !s.currentVectorParameters.vectorType && s.changeVectorType(this.priorVectorType)) : (this.priorVectorType = s.currentVectorParameters.vectorType, s.changeVectorType(""));
          });
        }
        pairUndoRedo() {
          const i = this.qs("cq-redo", this),
            a = this.qs("cq-undo", this);
          i.pairUp(a);
        }
        changeView(i, a) {
          this.setMode(a);
          for (var s = 0; s < this.callbacks.length; s++) this.callbacks[s].call(this, this.mode);
        }
        createContextMenu() {
          let i = document.createElement("div");
          i.className = "menu-item", i.innerHTML = "Add/Remove Favorite", i.addEventListener("mousedown", function (s) {
            s.stopPropagation(), s.which === 1 && (this.toggleFavorite(s.currentTarget.parentElement.getAttribute("context-tool")), this.paletteDock.stopContext(this));
          }.bind(this));
          let a = document.createElement("div");
          return a.appendChild(i), a.className = "tool-context-menu", this.node.append(a), a;
        }
        registerCallback(i) {
          this.callbacks.push(i);
        }
        resetScroller() {
          const i = this.querySelector(".tool-group cq-scroll");
          if (!i) return !1;
          this.setEvenOdd(), i.refresh();
        }
        setActiveButton(i) {
          if (this.node.find(".ciq-tool.active").removeClass("active"), i.getAttribute("stxtap") !== "noTool()") {
            var a = i.querySelector("label");
            a && a.innerHTML + "";
          }
          i.classList.add("active"), e.trulyVisible(document.querySelector(".ciq-mobile-palette-toggle")) || this.togglePalette();
        }
        setMode(i) {
          i = i === "list" ? i : "grid", this.mode = i, this.classList.remove("list"), this.classList.remove("grid"), this.classList.add(this.mode), this.resetScroller(), this.paletteDock.handleResize({
            resizeChart: !0
          });
        }
        setEvenOdd(i) {
          for (var a = this.querySelectorAll(".tool-group cq-scroll cq-item"), s = !1, o = 0; o < a.length; o++) e.trulyVisible(a[o]) && (a[o].classList[s ? "add" : "remove"]("odd"), s = !s);
        }
        setFavorites() {
          for (var i = this.querySelectorAll(".tool-group [cq-tool]"), a = 0; a < i.length; a++) {
            var s = i[a];
            if (s.querySelector(".fav-marker") === null) {
              let o = document.createElement("div");
              o.className = "fav-marker", o.addEventListener("click", this.handleFavoriteClick.bind(this)), o.addEventListener("touchstart", this.handleFavoriteClick.bind(this), {
                capture: !0,
                passive: !1
              }), s.appendChild(o);
            }
            s.getAttribute("cq-tool-group").indexOf("favorite") >= 0 && s.setAttribute("cq-tool-group", s.getAttribute("cq-tool-group").replace("favorite", "")), this.toolSettings.favList.indexOf(s.getAttribute("cq-tool")) >= 0 && s.setAttribute("cq-tool-group", s.getAttribute("cq-tool-group") + " favorite");
          }
        }
        handleFavoriteClick(i) {
          i.stopPropagation(), i.preventDefault(), this.toggleFavorite(i.target.parentElement.getAttribute("cq-tool")), this.hidePalette();
        }
        addFavorite(i) {
          this.toolSettings.favList.indexOf(i) < 0 && (this.toolSettings.favList.push(i), this.storeToolSettings(), this.setFavorites());
        }
        showToolContextMenu(i, a, s) {
          this.toolContextMenu.style.display = "block", this.toolContextMenu.style.top = a + "px", this.toolContextMenu.style.left = s + "px", this.toolContextMenu.setAttribute("context-tool", i), this.paletteDock.startContext(this);
        }
        toggleFavorite(i) {
          let a = this.toolSettings.favList.indexOf(i);
          a >= 0 ? this.toolSettings.favList.splice(a, 1) : this.toolSettings.favList.push(i), this.storeToolSettings(), this.setFavorites();
        }
        setToolGroup(i, a) {
          this.toolSettings.toolGroup = a, this.querySelector(".tool-group").setAttribute("tool-group-filter", this.toolSettings.toolGroup), this.querySelector(".tool-group cq-scroll").top(), this.setEvenOdd(a);
          for (var s = 0; s < this.callbacks.length; s++) this.callbacks[s].call(this, this.mode);
          this.showPalette(), this.params.toolGroupSelection.html(i.node.innerHTML), this.storeToolSettings();
        }
        togglePalette() {
          this.classList.toggle("palette-hide");
        }
        hidePalette() {
          this.classList.add("palette-hide");
        }
        showPalette() {
          this.classList.remove("palette-hide");
        }
        activateTool(i, a) {
          let s = null;
          !i.node && a ? s = this.querySelector("[cq-tool=" + a + "]") : s = i.node, this.setActiveButton(s);
          var o = this.context.stx;
          o.clearMeasure(), o.changeVectorType(a);
        }
        noTool(i, a) {
          this.tool(i, "notool");
        }
        tool(i, a) {
          if (a || (a = i.node.getAttribute("cq-tool")), !!a) {
            var s = i.node.querySelector("label").innerHTML;
            this.activateTool(i, a), this.sendMessage && this.sendMessage("changeTool", {
              activator: i,
              toolName: a,
              toolLabel: s
            });
          }
        }
        clearDrawings() {
          this.sendMessage && this.sendMessage("clearDrawings");
        }
        restoreDefaultConfig(i, a) {
          this.sendMessage && this.sendMessage("restoreDefaultConfig", {
            activator: i,
            all: a
          });
        }
        getMarkup(i) {
          const a = i.getMenu("drawingTools", !0).join(""),
            s = i.drawingToolGrouping.map(o => `<cq-item
					stxtap="setToolGroup('${o.toLowerCase()}')"
					cq-tool-group="${o.toLowerCase()}">${o}
				</cq-item>`).join("");
          return this.constructor.markup.replace("{{tools}}", a).replace("{{toolGrouping}}", s);
        }
      }
      n.markup = `
	<div class="palette-container">
		<div class="drag-strip"></div>
			<div class="mini-widget-group">
					<cq-item class="ciq-mini-widget" cq-view="list" stxtap="changeView('list')"><span class="icon"></span><label>List View</label></cq-item>
					<cq-item class="ciq-mini-widget" cq-view="grid" stxtap="changeView('grid')"><span class="icon"></span><label>Grid View</label></cq-item>
					<cq-item class="ciq-mini-widget" cq-view="detach" stxtap="detach()"><span class="icon"></span><label>Detach</label></cq-item>
					<cq-item class="ciq-mini-widget" cq-view="attach" stxtap="dock()"><span class="icon"></span><label>Attach</label></cq-item>
			</div>
			<cq-separator></cq-separator>
			<div class="primary-tool-group">
				<cq-item class="ciq-tool active" cq-tool="notool" stxtap="tool()"><span class="icon pointer"></span><label>No Tool</label></cq-item>
				<cq-item class="ciq-tool" cq-tool="measure" stxtap="tool()"><span class="icon measure"></span><label>Measure</label></cq-item>
				<cq-undo class="ciq-tool"><span class="icon undo"></span><label>Undo</label></cq-undo>
				<cq-redo class="ciq-tool"><span class="icon redo"></span><label>Redo</label></cq-redo>
				<cq-menu class="ciq-select">
					<span cq-tool-group-selection>All</span>
					<cq-menu-dropdown class="ciq-tool-group-selection">
						{{toolGrouping}}
					</cq-menu-dropdown>
				</cq-menu>
			</div>
			<cq-separator></cq-separator>
			<div class="tool-group" tool-group-filter="all">
				<cq-scroll cq-no-resize>
					{{tools}}
				</cq-scroll>
				<cq-separator></cq-separator>
				<div class="mini-widget-group mini-widget-foot">
					<cq-toggle class="ciq-mini-widget ciq-magnet" cq-member="preferences.magnet" cq-toggles="true,75,false" cq-toggle-classes="active strong,active,"><span class="icon magnet"></span><label>Magnet</label></cq-toggle>
					<cq-item class="ciq-mini-widget" stxtap="clearDrawings()"><span class="icon clear"></span><label>Clear All Drawings</label></cq-item>
					<cq-item class="ciq-mini-widget" stxtap="restoreDefaultConfig(true)"><span class="icon restore"></span><label>Restore Default Parameters</label></cq-item>
				</div>
			</div>
		<div class="resize-strip"></div>
	</div>
	`, e.UI.addComponentDefinition("cq-drawing-palette", n);
    }
  },
  cl = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    const t = e.UI._webcomponents.list["cq-palette"];
    if (!t) console.error("drawingSettings component requires first activating palette component.");else if (!e.Drawing) console.error("drawingSettings component requires first activating drawing feature.");else {
      class n extends t.classDefinition {
        setContext(i) {
          this.addDefaultMarkup(), this.init(), this.params = {
            lineSelection: this.node.find("*[cq-line-style]"),
            fontSizeSelection: this.node.find("*[cq-font-size]"),
            fontFamilySelection: this.node.find("*[cq-font-family]"),
            fontStyleToggle: this.node.find("cq-annotation-italic"),
            fontWeightToggle: this.node.find("cq-annotation-bold"),
            axisLabelToggle: this.node.find("cq-axis-label .ciq-checkbox"),
            fillColor: this.node.find("cq-fill-color").not("cq-cvp-controller"),
            lineColor: this.node.find("cq-line-color").not("cq-cvp-controller"),
            cvpControllers: this.node.find("cq-cvp-controller"),
            waveParameters: this.node.find("cq-wave-parameters")
          }, this.params.cvpControllers.prop("toolbar", this), this.sync(), this.dirty(!1), i.stx.setDrawingContainer && i.stx.setDrawingContainer(this);
          var a = this;
          i.stx.addEventListener("theme", function (s) {
            var o = a.node.find("*[cq-toolbar-dirty]").hasClass("ciq-active");
            a.sync(), o || a.dirty(!1);
          });
        }
        handleMessage(i, a) {
          switch (i) {
            case "changeTool":
              this.setActiveToolLabel(a.toolLabel), this.toolSettings(a.activator, a.toolName);
              break;
            case "clearDrawings":
              this.clearDrawings();
              break;
            case "restoreDefaultConfig":
              this.restoreDefaultConfig(a.activator, a.all);
          }
        }
        clearDrawings() {
          this.context.stx.clearDrawings(null, !1);
        }
        crosshairs(i) {
          var a = this.context.stx;
          a.changeVectorType(null), a.layout.crosshair = !0, a.doDisplayCrosshairs(), a.findHighlights(!1, !0), a.changeOccurred("layout"), a.draw(), a.updateChartAccessories(), this.node.find("*[cq-section]").removeClass("ciq-active"), this.emit();
        }
        tool(i, a) {
          this.toolSettings(i, a), this.setActiveToolLabel(a), this.sendMessage("changeToolSettings", {
            activator: i,
            toolName: a
          });
        }
        toolSettings(i, a) {
          var s = this.context.stx;
          this.node.find("*[cq-section]").removeClass("ciq-active");
          var o = !this.node.find("*[cq-toolbar-dirty]").hasClass("ciq-active"),
            h = e.Drawing.getDrawingParameters(s, a);
          if (h) {
            this.node.find("*[cq-toolbar-action='save']").addClass("ciq-active");
            var l = s.preferences.drawings;
            l && l[a] && (this.node.find("*[cq-toolbar-action='restore']").addClass("ciq-active"), o = !0), a === "fibtimezone" && delete h.parameters;
            var u = this.params.lineSelection.parent().find(".ciq-none");
            u.hide();
            for (var c = this.defaultElements(h), d = 0; d < c.length; d++) this.node.find(c[d]).addClass("ciq-active"), c[d] == "cq-fill-color" && u.show();
            for (c = e.Drawing[a].prototype.$controls, d = 0; c && d < c.length; d++) this.node.find(c[d]).addClass("ciq-active");
          }
          s.layout.crosshair && (s.layout.crosshair = !1, s.changeOccurred("layout"), s.doDisplayCrosshairs()), a === "notool" ? (s.changeVectorType(null), s.preferences.magnet && this.toggleMagnet(this), this.hide = "true") : this.hide = "false", this.paletteDock.handleResize(), this.sync(), o && this.dirty(!1);
        }
        defaultElements(i) {
          var a = [];
          for (var s in i) s == "color" ? a.push("cq-line-color") : s == "fillColor" ? a.push("cq-fill-color") : s == "pattern" || s == "lineWidth" ? a.push("cq-line-style") : s == "axisLabel" ? a.push("cq-axis-label") : s == "font" ? a.push("cq-annotation") : s == "parameters" && a.push("cq-clickable");
          return a;
        }
        dirty(i) {
          this.node.find("*[cq-toolbar-dirty]")[i === !1 ? "removeClass" : "addClass"]("ciq-active");
        }
        emit() {
          var i = new Event("change", {
            bubbles: !0,
            cancelable: !0
          });
          this.dirty(), this.dispatchEvent(i);
        }
        getFillColor(i) {
          var a = e.UI.$(i.node),
            s = this.context.stx.currentVectorParameters.fillColor;
          (s == "transparent" || s == "auto") && (s = ""), a.css({
            background: s
          });
          var o = e.getBackgroundColor(this.parentNode);
          if (s && Math.abs(e.hsl(o)[2] - e.hsl(s)[2]) < 0.2) {
            var h = e.chooseForegroundColor(o);
            a.css({
              border: "solid " + h + " 1px"
            });
          } else a.css({
            border: ""
          });
        }
        getLineColor(i) {
          var a = e.UI.$(i.node),
            s = this.context.stx.currentVectorParameters.currentColor;
          (s == "transparent" || s == "auto") && (s = ""), a.css({
            background: s
          });
          var o = e.getBackgroundColor(this.parentNode);
          if (!s || Math.abs(e.hsl(o)[2] - e.hsl(s)[2]) < 0.2) {
            var h = e.chooseForegroundColor(o);
            a.css({
              border: "solid " + h + " 1px"
            }), s || a.css({
              background: "linear-gradient(to bottom right, " + h + ", " + h + " 49%, " + o + " 50%, " + o + ")"
            });
          } else a.css({
            border: ""
          });
        }
        pickFillColor(i) {
          var a = e.UI.$(i.node),
            s = document.querySelector("cq-color-picker");
          if (!s) {
            console.log("DrawingToolbar.prototype.pickFillColor: no ColorPicker available");
            return;
          }
          var o = this;
          s.callback = function (h) {
            o.context.stx.currentVectorParameters.fillColor = h, o.getFillColor({
              node: a
            }), o.emit();
          }, s.display({
            node: a,
            context: o.context
          });
        }
        pickLineColor(i) {
          var a = e.UI.$(i.node),
            s = document.querySelector("cq-color-picker");
          if (!s) {
            console.log("DrawingToolbar.prototype.pickLineColor: no ColorPicker available");
            return;
          }
          var o = this;
          s.callback = function (l) {
            o.context.stx.currentVectorParameters.currentColor = l, o.getLineColor({
              node: a
            }), o.emit();
          };
          var h = a.attr("cq-overrides");
          h && (h = h.split(",")), s.display({
            node: a,
            overrides: h,
            context: o.context
          });
        }
        restoreDefaultConfig(i, a) {
          var s = this.context.stx;
          e.Drawing.restoreDefaultConfig(s, s.currentVectorParameters.vectorType, a), this.node.find("*[cq-toolbar-action='restore']").removeClass("ciq-active"), this.sync(), this.dirty(!1);
        }
        saveConfig() {
          var i = this.context.stx;
          e.Drawing.saveConfig(i, i.currentVectorParameters.vectorType), this.node.find("*[cq-toolbar-action='restore']").addClass("ciq-active"), this.sync(), this.dirty(!1);
        }
        setFibs(i, a) {
          var s = this.context.stx.currentVectorParameters.fibonacci;
          if (s) {
            for (var o = 0; o < s.fibs.length; o++) s.fibs[o].parameters.lineWidth = i, s.fibs[o].parameters.pattern = a;
            s.timezone.parameters.lineWidth = i, s.timezone.parameters.pattern = a;
          }
        }
        setFontFamily(i, a) {
          var s = this.context.stx;
          s.currentVectorParameters.annotation && (a == "Default" ? s.currentVectorParameters.annotation.font.family = null : s.currentVectorParameters.annotation.font.family = a), this.params.fontFamilySelection.text(a), this.emit();
        }
        setFontSize(i, a) {
          var s = this.context.stx;
          s.currentVectorParameters.annotation && (s.currentVectorParameters.annotation.font.size = a), this.params.fontSizeSelection.text(a), this.emit();
        }
        setLine(i, a, s) {
          var o = this.context.stx;
          o.currentVectorParameters.lineWidth = a, o.currentVectorParameters.pattern = s, this.setFibs(a, s), this.currentLineSelectedClass && this.params.lineSelection.removeClass(this.currentLineSelectedClass), this.currentLineSelectedClass = "ciq-" + s + "-" + parseInt(a, 10), s == "none" ? this.currentLineSelectedClass = null : this.params.lineSelection.addClass(this.currentLineSelectedClass), this.emit();
        }
        setActiveToolLabel(i) {
          i === "No Tool" ? i = "" : i === "freeform" ? i = "Doodle" : i = i + ":", this.querySelector(".ciq-active-tool-label").innerHTML = i, this.querySelector(".ciq-mobile-palette-toggle span").innerHTML = i || "Select Tool";
        }
        sync(i) {
          var a = this.context.stx;
          i ? a.currentVectorParameters = e.extend(a.currentVectorParameters || {}, i) : i = a.currentVectorParameters;
          var s = this.params;
          this.setLine(null, i.lineWidth, i.pattern);
          var o = a.canvasStyle("stx_annotation"),
            h = i.annotation && i.annotation.font,
            l = h && h.size || o.fontSize;
          this.setFontSize(null, l);
          var u = h && h.family || o.fontFamily;
          this.setFontFamily(null, u);
          var c = h && h.style || o.fontStyle;
          s.fontStyleToggle[c === "italic" ? "addClass" : "removeClass"]("ciq-active");
          var d = h && h.weight || o.fontWeight;
          s.fontWeightToggle[d === "bold" || d >= 700 ? "addClass" : "removeClass"]("ciq-active"), s.axisLabelToggle[i.axisLabel ? "addClass" : "removeClass"]("ciq-active"), this.getFillColor({
            node: s.fillColor
          }), this.getLineColor({
            node: s.lineColor
          }), s.cvpControllers.each(function () {
            this.sync(i);
          });
          var f = s.waveParameters;
          f && f[0] && f[0].activate();
        }
        toggleAxisLabel(i) {
          var a = this.context.stx,
            s = e.UI.$(i.node);
          a.currentVectorParameters.axisLabel === !0 ? (a.currentVectorParameters.axisLabel = !1, s.removeClass("ciq-active")) : (a.currentVectorParameters.axisLabel = !0, s.addClass("ciq-active")), this.emit();
        }
        toggleFontStyle(i, a) {
          var s = this.context.stx,
            o = e.UI.$(i.node);
          a == "italic" ? s.currentVectorParameters.annotation.font.style == "italic" ? (s.currentVectorParameters.annotation.font.style = null, o.removeClass("ciq-active")) : (s.currentVectorParameters.annotation.font.style = "italic", o.addClass("ciq-active")) : a == "bold" && (s.currentVectorParameters.annotation.font.weight == "bold" ? (s.currentVectorParameters.annotation.font.weight = null, o.removeClass("ciq-active")) : (s.currentVectorParameters.annotation.font.weight = "bold", o.addClass("ciq-active"))), this.emit();
        }
        toggleMagnet(i) {
          var a = e.UI.$(i.node),
            s = this.context.stx;
          s.preferences.magnet ? (a.removeClass("active"), s.preferences.magnet = !1) : (a.addClass("active"), s.preferences.magnet = !0), e.clearCanvas(s.chart.tempCanvas, s);
        }
        togglePalette() {
          this.sendMessage("toggleDrawingPalette");
        }
      }
      n.markup = `
	<div class="palette-container">
		<div class="drag-strip"></div>
			<div class="drawing-settings-wrapper">
					<div class="mini-widget-group">
						<cq-item class="ciq-mini-widget" cq-view="detach" stxtap="detach()"><span class="icon"></span><label>Detach</label></cq-item>
						<cq-item class="ciq-mini-widget" cq-view="attach" stxtap="dock()"><span class="icon"></span><label>Attach</label></cq-item>
					</div>
				<cq-clickable class="ciq-select ciq-mobile-palette-toggle" stxtap="togglePalette()"><span>Select Tool</span></cq-clickable>
				<cq-toolbar-settings>
					<div class="ciq-active-tool-label ciq-heading"></div>
					<cq-fill-color cq-section class="ciq-color" stxbind="getFillColor()" stxtap="pickFillColor()">
						<span></span>
					</cq-fill-color>
					<div>
						<cq-line-color cq-section cq-overrides="auto" class="ciq-color" stxbind="getLineColor()" stxtap="pickLineColor()"><span></span></cq-line-color>
						<cq-line-style cq-section>
							<cq-menu class="ciq-select">
								<span cq-line-style class="ciq-line ciq-selected"></span>
								<cq-menu-dropdown class="ciq-line-style-menu">
									<cq-item stxtap="setLine(1,'solid')"><span class="ciq-line-style-option ciq-solid-1"></span></cq-item>
									<cq-item stxtap="setLine(3,'solid')"><span class="ciq-line-style-option ciq-solid-3"></span></cq-item>
									<cq-item stxtap="setLine(5,'solid')"><span class="ciq-line-style-option ciq-solid-5"></span></cq-item>
									<cq-item stxtap="setLine(1,'dotted')"><span class="ciq-line-style-option ciq-dotted-1"></span></cq-item>
									<cq-item stxtap="setLine(3,'dotted')"><span class="ciq-line-style-option ciq-dotted-3"></span></cq-item>
									<cq-item stxtap="setLine(5,'dotted')"><span class="ciq-line-style-option ciq-dotted-5"></span></cq-item>
									<cq-item stxtap="setLine(1,'dashed')"><span class="ciq-line-style-option ciq-dashed-1"></span></cq-item>
									<cq-item stxtap="setLine(3,'dashed')"><span class="ciq-line-style-option ciq-dashed-3"></span></cq-item>
									<cq-item stxtap="setLine(5,'dashed')"><span class="ciq-line-style-option ciq-dashed-5"></span></cq-item>
									<cq-item stxtap="setLine(0,'none')" class="ciq-none">None</cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</cq-line-style>
					</div>

					<cq-cvp-controller cq-section cq-cvp-header="1"></cq-cvp-controller>
					<cq-cvp-controller cq-section cq-cvp-header="2"></cq-cvp-controller>
					<cq-cvp-controller cq-section cq-cvp-header="3"></cq-cvp-controller>

					<template cq-cvp-controller>
						<div cq-section>
							<div class="ciq-heading">Dev 1</div>
							<span stxtap="toggleActive()" class="ciq-checkbox">
								<span></span>
							</span>
						</div>
						<cq-line-color cq-section cq-overrides="auto" class="ciq-color" stxbind="getColor()" stxtap="pickColor()">
							<span></span>
						</cq-line-color>
						<cq-line-style cq-section>
							<cq-menu class="ciq-select">
								<span cq-cvp-line-style class="ciq-line ciq-selected"></span>
								<cq-menu-dropdown class="ciq-line-style-menu">
									<cq-item stxtap="setStyle(1, 'solid')"><span class="ciq-line-style-option ciq-solid-1"></span></cq-item>
									<cq-item stxtap="setStyle(3, 'solid')"><span class="ciq-line-style-option ciq-solid-3"></span></cq-item>
									<cq-item stxtap="setStyle(5, 'solid')"><span class="ciq-line-style-option ciq-solid-5"></span></cq-item>
									<cq-item stxtap="setStyle(1, 'dotted')"><span class="ciq-line-style-option ciq-dotted-1"></span></cq-item>
									<cq-item stxtap="setStyle(3, 'dotted')"><span class="ciq-line-style-option ciq-dotted-3"></span></cq-item>
									<cq-item stxtap="setStyle(5, 'dotted')"><span class="ciq-line-style-option ciq-dotted-5"></span></cq-item>
									<cq-item stxtap="setStyle(1, 'dashed')"><span class="ciq-line-style-option ciq-dashed-1"></span></cq-item>
									<cq-item stxtap="setStyle(3, 'dashed')"><span class="ciq-line-style-option ciq-dashed-3"></span></cq-item>
									<cq-item stxtap="setStyle(5, 'dashed')"><span class="ciq-line-style-option ciq-dashed-5"></span></cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</cq-line-style>
					</template>

					<cq-axis-label cq-section>
						<div class="ciq-heading">Axis Label:</div>
						<span stxtap="toggleAxisLabel()" class="ciq-checkbox ciq-active"><span></span></span>
					</cq-axis-label>
					<cq-annotation cq-section>
						<cq-annotation-italic stxtap="toggleFontStyle('italic')" class="ciq-btn" style="font-style:italic;">I</cq-annotation-italic>
						<cq-annotation-bold stxtap="toggleFontStyle('bold')" class="ciq-btn" style="font-weight:bold;">B</cq-annotation-bold>
						<cq-menu class="ciq-select">
							<span cq-font-size>12px</span>
							<cq-menu-dropdown class="ciq-font-size">
								<cq-item stxtap="setFontSize('8px')">8</cq-item>
								<cq-item stxtap="setFontSize('10px')">10</cq-item>
								<cq-item stxtap="setFontSize('12px')">12</cq-item>
								<cq-item stxtap="setFontSize('13px')">13</cq-item>
								<cq-item stxtap="setFontSize('14px')">14</cq-item>
								<cq-item stxtap="setFontSize('16px')">16</cq-item>
								<cq-item stxtap="setFontSize('20px')">20</cq-item>
								<cq-item stxtap="setFontSize('28px')">28</cq-item>
								<cq-item stxtap="setFontSize('36px')">36</cq-item>
								<cq-item stxtap="setFontSize('48px')">48</cq-item>
								<cq-item stxtap="setFontSize('64px')">64</cq-item>
							</cq-menu-dropdown>
						</cq-menu>
						<cq-menu class="ciq-select">
							<span cq-font-family>Default</span>
							<cq-menu-dropdown class="ciq-font-family">
								<cq-item stxtap="setFontFamily('Default')">Default</cq-item>
								<cq-item stxtap="setFontFamily('Helvetica')">Helvetica</cq-item>
								<cq-item stxtap="setFontFamily('Courier')">Courier</cq-item>
								<cq-item stxtap="setFontFamily('Garamond')">Garamond</cq-item>
								<cq-item stxtap="setFontFamily('Palatino')">Palatino</cq-item>
								<cq-item stxtap="setFontFamily('Times New Roman')">Times New Roman</cq-item>
							</cq-menu-dropdown>
						</cq-menu>
					</cq-annotation>
					<cq-clickable cq-fib-settings cq-selector="cq-fib-settings-dialog" cq-method="open" cq-section><span class="ciq-icon-btn cq-icon-gear"><cq-tooltip>Settings</cq-tooltip></span></cq-clickable>
					<div class="ciq-drawing-edit-only" cq-section>
						<div cq-toolbar-action="done_edit" stxtap="DrawingEdit.endEdit('close')" cq-section><cq-tooltip>Done Editing</cq-tooltip></div>
					</div>
					<br cq-section cq-wave-parameters><!-- This break is not displayed by default but uses  the .ciq-active class to be displayed and push cq-wave-parameters onto a new line in the toolbar -->
					<cq-wave-parameters cq-section></cq-wave-parameters>
					<template cq-wave-parameters>
						<div class="ciq-wave-template" cq-section>
							<div class="ciq-heading">WAVE TEMPLATE</div>
							<cq-menu class="ciq-select">
								<span class="ciq-active-template">WAVE TEMPLATE</span>
								<cq-menu-dropdown>
									<cq-item stxtap="update('template','Grand Supercycle')">Grand Supercycle</cq-item>
									<cq-item stxtap="update('template','Supercycle')">Supercycle</cq-item>
									<cq-item stxtap="update('template','Cycle')">Cycle</cq-item>
									<cq-item stxtap="update('template','Primary')">Primary</cq-item>
									<cq-item stxtap="update('template','Intermediate')">Intermediate</cq-item>
									<cq-item stxtap="update('template','Minor')">Minor</cq-item>
									<cq-item stxtap="update('template','Minute')">Minute</cq-item>
									<cq-item stxtap="update('template','Minuette')">Minuette</cq-item>
									<cq-item stxtap="update('template','Sub-Minuette')">Sub-Minuette</cq-item>
									<cq-item stxtap="update('template','Custom')">Custom</cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</div>
						<div class="ciq-wave-impulse" cq-section>
							<div class="ciq-heading">IMPULSE</div>
							<cq-menu  class="ciq-select">
								<span class="ciq-active-impulse">IMPULSE</span>
								<cq-menu-dropdown>
									<cq-item stxTap="update('impulse',null)">- - -</cq-item>
									<cq-item stxtap="update('impulse','I,II,III,IV,V')">I II III IV V</cq-item>
									<cq-item stxtap="update('impulse','i,ii,iii,iv,v')">i ii iii iv v</cq-item>
									<cq-item stxtap="update('impulse','1,2,3,4,5')">1 2 3 4 5</cq-item>
									<cq-item stxtap="update('impulse','A,B,C,D,E')">A B C D E</cq-item>
									<cq-item stxtap="update('impulse','a,b,c,d,e')">a b c d e</cq-item>
									<cq-item stxtap="update('impulse','W,X,Y,X,Z')">W X Y X Z</cq-item>
									<cq-item stxtap="update('impulse','w,x,y,x,z')">w x y x z</cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</div>
						<div class="ciq-wave-corrective" cq-section>
							<div class="ciq-heading">CORRECTIVE</div>
							<cq-menu class="ciq-select">
								<span class="ciq-active-corrective">CORRECTIVE</span>
								<cq-menu-dropdown>
									<cq-item stxtap="update('corrective',null)">- - -</cq-item>
									<cq-item stxtap="update('corrective','A,B,C')">A B C</cq-item>
									<cq-item stxtap="update('corrective','a,b,c')">a b c</cq-item>
									<cq-item stxtap="update('corrective','W,X,Y')">W X Y</cq-item>
									<cq-item stxtap="update('corrective','w,x,y')">w x y</cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</div>
						<span class="ciq-icon-btn ciq-btn" decoration="none" stxtap="update('decoration',null)" cq-section>
							<cq-tooltip>None</cq-tooltip>
						</span>
						<span class="ciq-icon-btn ciq-btn" decoration="parentheses" stxtap="update('decoration','parentheses')" cq-section>
							<cq-tooltip>Parentheses</cq-tooltip>
						</span>
						<span class="ciq-icon-btn ciq-btn" decoration="enclosed" stxtap="update('decoration','enclosed')" cq-section>
							<cq-tooltip>Enclosed</cq-tooltip>
						</span>
						<div class="ciq-heading ciq-show-lines"  cq-section>
							Show Lines: <span stxtap="toggleLines()" class="ciq-checkbox ciq-active"><span></span></span>
						</div>
					</template>
					<div class="ciq-drawing-edit-hidden" cq-section>
						<div cq-toolbar-action="save" stxtap="saveConfig()" cq-section><div cq-toolbar-dirty></div><cq-tooltip>Save Config</cq-tooltip></div>
						<div cq-toolbar-action="restore" stxtap="restoreDefaultConfig()" cq-section><cq-tooltip>Restore Config</cq-tooltip></div>
					</div>
				</cq-toolbar-settings>
				<cq-measure><span class="mMeasure"></span></cq-measure>
			</div>
		<div class="resize-strip"></div>
	</div>
	`, e.UI.addComponentDefinition("cq-drawing-settings", n);
    }
  },
  dl = q => {
    var e = typeof _CIQ < "u" ? _CIQ : q.CIQ;
    const t = e.UI._webcomponents.list["cq-scroll"];
    if (!t) console.error("menuDropdown component requires first activating scroll component.");else {
      class n extends t.classDefinition {
        constructor() {
          super(), this.noMaximize = !0;
        }
        connectedCallback() {
          super.connectedCallback(), this.childItems = this.querySelectorAll(":scope > cq-scroll"), this.focusedChildIndex = -1, this.childItems.length > 0 && (this.focusedChildIndex = 0);
        }
        disablekeyboardNavigation() {
          this.keyboardNavigation ? this.keyboardNavigation.setKeyControlElement() : this.childItems[this.focusedChildIndex] && this.childItems[this.focusedChildIndex].keyboardNavigation && this.childItems[this.focusedChildIndex].keyboardNavigation.setKeyControlElement();
        }
        keyStroke(i, a, s) {
          this.keyboardNavigation && (this.focusedChildIndex >= 0 ? this.keyboardNavigation.setKeyControlElement(this.childItems[this.focusedChildIndex]) : super.keyStroke(i, a, s));
        }
      }
      e.UI.addComponentDefinition("cq-menu-dropdown", n);
    }
  },
  Bl = {
    CIQ: K
  };
(typeof __TREE_SHAKE__ > "u" || !__TREE_SHAKE__) && Bl.CIQ.activateImports(so, oo, lo, ho, uo, co, fo, po, mo, go, xo, vo, yo, bo, Co, So, wo, ko, To, Do, Ao, Mo, _o, qo, Io, Fo, Eo, Po, Lo, No, Vo, Uo, Bo, Oo, Ho, Ro, zo, Wo, Go, Zo, Qo, $o, jo, Yo, Xo, Ko, Jo, el, tl, il, rl, al, nl, sl, ol, ll, hl, ul, cl, dl, null);
const Ol = function (q) {
  if (!q) throw new Error("Invalid constructor arguments.");
  var e, t, n;
  if (q instanceof K.ChartEngine ? (e = arguments[0], t = arguments[1], n = arguments[2]) : (e = q.stx, t = q.animationParameters, n = q.easeMachine), !e) return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");
  var r = {
    stayPut: !1,
    ticksFromEdgeOfScreen: 5,
    granularity: 1000000
  };
  t = K.extend(r, t), r.tension && (e.chart.tension = t.tension), e.tickAnimator = n || new K.EaseMachine(Math.easeOutCubic, 1000);
  var i = ["#0298d3", "#19bcfc", "#5dcffc", "#9ee3ff"],
    a = 0,
    s = 20,
    o = 0,
    h = !1,
    l = null;
  function u() {
    h = !1, l = null;
  }
  e.addEventListener(["symbolChange", "layout"], function (c) {
    u();
  }), e.prepend("updateCurrentMarketData", function (c, d, f, g) {
    d || (d = this.chart), g && g.fromTrade && (d.closePendingAnimation || d.closePendingAnimation === 0) && (g.finalClose = d.closePendingAnimation);
  }), e.prepend("updateChartData", function (c, d, f) {
    var g = this;
    if (d || (d = g.chart), !d || !d.defaultChartStyleConfig || d.defaultChartStyleConfig == "none" || f !== void 0 && (f.animationEntry || f.secondarySeries) || !d.dataSegment) return;
    function p(N) {
      if (d.masterData) for (var U = d.masterData.length - 1; U >= 0; U--) {
        var B = d.masterData[U];
        if (B.Close || B.Close === 0) {
          B.Close = N.Close, N.LastSize && (B.LastSize = N.LastSize), N.LastTime && (B.LastTime = N.LastTime), g.updateCurrentMarketData({
            Close: B.Close,
            DT: B.DT,
            LastSize: B.LastSize,
            LastTime: B.LastTime
          }), g.createDataSet(null, null, {
            appending: !0
          });
          return;
        }
      }
    }
    function m() {
      if (d.animatingHorizontalScroll && (d.animatingHorizontalScroll = !1, g.micropixels = g.nextMicroPixels = g.previousMicroPixels, d.lastTickOffset = 0), d.closePendingAnimation !== null) {
        var N = d.closePendingAnimation;
        d.closePendingAnimation = null, p({
          Close: N
        });
      }
    }
    var x = g.tickAnimator,
      y = this.mainSeriesRenderer && this.mainSeriesRenderer.supportsAnimation;
    if (y) {
      if (!x) {
        console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");
        return;
      }
      if (this.prevSymbol != d.symbol && (this.prevQuote = 0, d.closePendingAnimation = null, this.prevSymbol = d.symbol), m(), x.stop(), c.length > 2) return;
    }
    var b = K.clone(f);
    b || (b = {}), b.animationEntry = !0, b.bypassGovernor = !0, b.noCreateDataSet = !1, b.appending = !0, b.firstLoop = !0;
    var C = this.chart.symbol,
      k = this.layout.periodicity,
      M = this.layout.interval,
      I = this.layout.timeUnit;
    function v(N, U, B) {
      return function (O) {
        var R = O.Close;
        if (!d.dataSet.length || C != d.symbol || k != g.layout.periodicity || M != g.layout.interval || I != g.layout.timeUnit) {
          x.stop(), m();
          return;
        }
        var H = K.clone(N);
        H.Adj_Close = null, H.Close = Math.round(R * t.granularity) / t.granularity, B ? (!H.Open && H.Open !== 0 && (H.Open = H.Close), !H.High && H.High !== 0 && (H.High = Math.max(H.Open, H.Close)), !H.Low && H.Low !== 0 && (H.Low = Math.min(H.Open, H.Close))) : (N.Close > U.High && (H.High = H.Close), N.Close < U.Low && (H.Low = H.Close)), d.animatingHorizontalScroll && (g.micropixels = O.micropixels, d.lastTickOffset = O.lineOffset), b.updateDataSegmentInPlace = !x.hasCompleted;
        var z = [H];
        B && g.layout.interval !== "tick" && z.unshift(U), g.updateChartData(z, d, b), b.firstLoop = !1, x.hasCompleted && m();
      };
    }
    if (y) {
      var S = c[c.length - 1];
      this.prevQuote = this.currentQuote();
      var w = !1,
        T = !1;
      if (k == 1 && c.length == 2) {
        this.prevQuote = c[0];
        var D = d.dataSet.length;
        p(this.prevQuote), D == d.dataSet.length && (T = !0);
      }
      if (!S || !S.Close || !this.prevQuote || !this.prevQuote.Close) return !1;
      if (this.extendedHours && d.market.market_def) {
        var F = S.DT;
        if (K.ChartEngine.isDailyInterval(M)) h = !d.market.isMarketDate(F);else if (!l || l <= F) {
          var P = d.market.getSession(F);
          h = P !== "" && (!this.layout.marketSessions || !this.layout.marketSessions[P]), l = d.market[h ? "getNextOpen" : "getNextClose"](F);
        }
        if (h) return this.draw(), !1;
      }
      var _ = k;
      M == "second" || I == "second" ? _ *= 1000 : (M == "minute" || I == "minute") && (_ *= 60000), isNaN(M) || (_ *= M), M == "day" || I == "day" ? w = S.DT.getDate() != this.prevQuote.DT.getDate() : M == "week" || I == "week" ? w = S.DT.getDate() >= this.prevQuote.DT.getDate() + 7 : M == "month" || I == "month" ? w = S.DT.getMonth() != this.prevQuote.DT.getMonth() : w = S.DT.getTime() >= this.prevQuote.DT.getTime() + _;
      var V = !this.mainSeriesRenderer || !this.mainSeriesRenderer.standaloneBars,
        A = 0;
      if (w) if (this.animations.zoom.hasCompleted) {
        var E = this.layout.candleWidth;
        if (d.scroll <= d.maxTicks) for (; this.micropixels > 0;) d.scroll++, this.micropixels -= E;
        d.scroll <= d.maxTicks ? (this.previousMicroPixels = this.micropixels, this.nextMicroPixels = this.micropixels + E, A = E * -1, d.dataSegment.length < d.maxTicks - t.ticksFromEdgeOfScreen && !t.stayPut && (this.nextMicroPixels = this.micropixels, d.scroll++), d.animatingHorizontalScroll = V, d.previousDataSetLength = d.dataSet.length) : T || d.scroll++;
      } else return !1;
      d.closePendingAnimation = S.Close;
      var L = w && !V ? S.Open : this.prevQuote.Close;
      return x.run(v(S, K.clone(this.prevQuote), w), {
        Close: L,
        micropixels: this.nextMicroPixels,
        lineOffset: A
      }, {
        Close: S.Close,
        micropixels: this.micropixels,
        lineOffset: 0
      }), !0;
    }
  }), e.append("draw", function () {
    if (!h && this.chart.dataSet && this.chart.dataSet.length && this.mainSeriesRenderer && this.mainSeriesRenderer.supportsAnimation) {
      o % s === 0 && (a++, o = 0), o++;
      var c = this.chart.context,
        d = this.chart.panel,
        f = this.currentQuote();
      if (!f) return;
      var g = f.Close,
        p = this.pixelFromTick(f.tick, this.chart);
      this.chart.lastTickOffset && (p = p + this.chart.lastTickOffset);
      var m = this.pixelFromPrice(g, d);
      this.chart.yAxis.left > p && this.chart.yAxis.top <= m && this.chart.yAxis.bottom >= m && (a >= i.length && (a = 0), c.beginPath(), c.moveTo(p, m), c.arc(p, m, 2 + a * 1.07, 0, Math.PI * 2, !1), c.fillStyle = i[a], c.fill());
    }
  });
};
K.activateImports(pa, ma, ga, xa, va, ya, ba, Ca, Sa, wa, ka, Ta, Da, Aa, Ma, _a, qa, Ia, Fa, Ea, Pa, La, Na, Va, Ua, Ba, Oa, Ha, Ra, za, Wa, Ga, Za, Qa, $a, ja, Ya, Xa, Ka, Ja, en, tn, rn, an, nn, sn, on, ln, hn, un, cn, dn, fn, pn, mn, gn, xn, vn, yn, bn, Cn, Sn, wn, kn, Tn, Dn, An, Mn, _n, qn, In, Fn, En, Pn, Ln, Nn, Vn, Un, Bn, On, Hn, Rn, zn, Wn, Gn, Qn, Zn, $n, jn, Yn, Xn, Kn, Jn, es, ts, Js, eo, Zs, Qs, $s, to, io, js, Ys, Xs, Ks, so, oo, lo, ho, uo, co, fo, po, mo, go, xo, vo, yo, bo, Co, So, wo, ko, To, Do, Ao, Mo, _o, qo, Io, Fo, Eo, Po, Lo, No, Vo, Uo, Bo, Oo, Ho, Ro, zo, Wo, Go, Zo, Qo, $o, jo, Yo, Xo, Ko, Jo, el, tl, il, rl, al, nl, sl, ol, ll, hl, ul, cl, dl);
K.Animation = Ol;
const Lr = q => q * 1000,
  zl = ({
    verticalMargin: q
  }) => ({
    streamParameters: {
      maxWait: 0,
      maxTicks: 100
    },
    layout: {
      candleWidth: 10,
      crosshair: Sl(1024)
    },
    preferences: {
      currentPriceLine: !0
    },
    chart: {
      yAxis: {
        displayGridLines: !1,
        bottomOffset: 6,
        initialMarginTop: q,
        initialMarginBottom: q,
        justifyRight: !0,
        priceFormatter: (e, t, n) => typeof n == "number" ? wl(n / 1000, {
          precision: "auto"
        }) : ""
      },
      xAxis: {
        displayGridLines: !1
      }
    }
  }),
  Wl = (q, e) => {
    jr.useEffect(() => {
      !q || !e || q.updateChartData({
        Last: Lr(e.price),
        DT: Number(new Date(e.ts)),
        Volume: e.volume
      });
    }, [q, e]);
  },
  Gl = (q, e, t) => {
    jr.useEffect(() => {
      q && (q.setPeriodicity(fl()[e], t), q.setChartType(e === "tick" ? "mountain" : "candle"));
    }, [q, e, t]);
  },
  Zl = (q, e) => {
    const [t, n] = jr.useState(!1);
    return jr.useEffect(() => {
      q && (n(!1), q.loadChart(e, void 0, () => {
        n(!0);
      }));
    }, [q, e]), {
      isChartLoaded: t
    };
  },
  Ql = q => {
    new K.Animation({
      stx: q,
      animationParameters: {
        tension: 0.3
      }
    });
  },
  $l = q => [...q].reverse().map(t => ({
    DT: Number(new Date(t.bucket)),
    High: Lr(t.high),
    Low: Lr(t.low),
    Open: Lr(t.open),
    Close: Lr(t.close),
    Volume: t.volume
  })),
  jl = q => [...q].reverse().map(t => ({
    DT: Number(new Date(t.ts)),
    Close: Lr(t.price)
  })),
  Yl = (q, e, t) => {
    const n = Number(new Date()),
      r = Number(q),
      i = (n - r) / (e * (t === "tick" ? 1000 : 1));
    return Math.max(0, Math.floor(i));
  },
  Xl = (q, e) => Object.entries(fl()).find(([n, r]) => q === r.interval && e === r.timeUnit)[0],
  fl = () => ({
    tick: {
      period: 1,
      interval: 1,
      timeUnit: "tick"
    },
    ...kl.mapValues(Tl.timeframes, q => ({
      period: 1,
      interval: q / 1000000,
      timeUnit: "millisecond"
    }))
  }),
  Kl = Dl`
  .stx_candle_down,
  .stx_line_down {
    /* Down Candle color */
    color: ${_r.rgba(Bt.danger, 0.75)};
    border-left-color: ${_r.rgba(Bt.danger, 0.75)};
  }
  .stx_candle_up,
  .stx_line_up {
    /* Up Candle color */
    color: ${_r.rgba(Bt.success, 0.75)};
    border-left-color: ${_r.rgba(Bt.success, 0.75)};
  }
  .stx_candle_shadow,
  .stx_bar_even {
    /* Candle wick color */
    color: ${Bt.text2};
  }
  .stx_candle_shadow_up {
    color: ${_r.rgba(Bt.success, 0.75)};
  }
  .stx_candle_shadow_down {
    color: ${_r.rgba(Bt.danger, 0.75)};
  }

  .stx_line_chart {
    color: ${Bt.juicy};
    width: 2px;
  }

  .stx_mountain_chart {
    border-top-color: ${Bt.primary};
    background-color: ${_r.rgba(Bt.primary, 0.1)};
    color: ${_r.rgba(Bt.primary, 0)};
    width: 2px;
  }

  .stx_grid_border {
    /* Default Grid borders */
    color: ${Bt.border2};
  }

  .stx_current_hr_up {
    /* 'Up' color for current chart value */
    background-color: ${Bt.success};
    color: ${Bt.textButton};
  }
  .stx_current_hr_down {
    /* 'Down' color for current chart value */
    background-color: ${Bt.danger};
    color: ${Bt.textButton};
  }

  .stx_crosshair {
    /* Standard Crosshair lines color */
    background-color: ${Bt.border1};
  }
  .stx-float-date {
    /* Crosshair Floating x-axis date label*/
    height: 34px;
    width: 80px;
    padding: 2px 0;
    border-radius: 3px;
    background: ${Bt.border2};
    color: ${Bt.text1};
    ${Qr.medium}
    ${Qr.size(12)}
  }
  .stx-float-price {
    /* Crosshair Floating y-axis value label*/
    background: ${Bt.border2};
    color: ${Bt.text1};
  }

  .stx_xaxis,
  .stx_yaxis {
    /* axis label styles */
    color: ${Bt.text3};
    ${Qr.medium}
    ${Qr.size(12)}
  }

  /* zoom buttons */
  .chartSize {
    display: none;
  }

  .stx-panel-title {
    display: none;
  }

  .stx_jump_today {
    background: ${Bt.border2};
  }
`;
export { jl as a, Kl as b, Yl as c, zl as d, Ql as e, Gl as f, Xl as g, $l as h, K as i, Zl as j, Wl as u, Lr as x };